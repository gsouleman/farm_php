(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(r){if(r.ep)return;r.ep=!0;const a=n(r);fetch(r.href,a)}})();var NA=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function og(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fm={exports:{}},vf={};var tb;function DA(){if(tb)return vf;tb=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.fragment");function n(i,r,a){var l=null;if(a!==void 0&&(l=""+a),r.key!==void 0&&(l=""+r.key),"key"in r){a={};for(var d in r)d!=="key"&&(a[d]=r[d])}else a=r;return r=a.ref,{$$typeof:t,type:i,key:l,ref:r!==void 0?r:null,props:a}}return vf.Fragment=e,vf.jsx=n,vf.jsxs=n,vf}var nb;function MA(){return nb||(nb=1,Fm.exports=DA()),Fm.exports}var u=MA(),Um={exports:{}},Zn={};var ib;function OA(){if(ib)return Zn;ib=1;var t=Symbol.for("react.transitional.element"),e=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),r=Symbol.for("react.profiler"),a=Symbol.for("react.consumer"),l=Symbol.for("react.context"),d=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),g=Symbol.for("react.memo"),m=Symbol.for("react.lazy"),_=Symbol.for("react.activity"),A=Symbol.iterator;function x(ne){return ne===null||typeof ne!="object"?null:(ne=A&&ne[A]||ne["@@iterator"],typeof ne=="function"?ne:null)}var R={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},M=Object.assign,k={};function I(ne,H,te){this.props=ne,this.context=H,this.refs=k,this.updater=te||R}I.prototype.isReactComponent={},I.prototype.setState=function(ne,H){if(typeof ne!="object"&&typeof ne!="function"&&ne!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,ne,H,"setState")},I.prototype.forceUpdate=function(ne){this.updater.enqueueForceUpdate(this,ne,"forceUpdate")};function Y(){}Y.prototype=I.prototype;function B(ne,H,te){this.props=ne,this.context=H,this.refs=k,this.updater=te||R}var V=B.prototype=new Y;V.constructor=B,M(V,I.prototype),V.isPureReactComponent=!0;var ee=Array.isArray;function ue(){}var _e={H:null,A:null,T:null,S:null},fe=Object.prototype.hasOwnProperty;function G(ne,H,te){var ce=te.ref;return{$$typeof:t,type:ne,key:H,ref:ce!==void 0?ce:null,props:te}}function me(ne,H){return G(ne.type,H,ne.props)}function Z(ne){return typeof ne=="object"&&ne!==null&&ne.$$typeof===t}function J(ne){var H={"=":"=0",":":"=2"};return"$"+ne.replace(/[=:]/g,function(te){return H[te]})}var Se=/\/+/g;function Ee(ne,H){return typeof ne=="object"&&ne!==null&&ne.key!=null?J(""+ne.key):H.toString(36)}function Ye(ne){switch(ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason;default:switch(typeof ne.status=="string"?ne.then(ue,ue):(ne.status="pending",ne.then(function(H){ne.status==="pending"&&(ne.status="fulfilled",ne.value=H)},function(H){ne.status==="pending"&&(ne.status="rejected",ne.reason=H)})),ne.status){case"fulfilled":return ne.value;case"rejected":throw ne.reason}}throw ne}function oe(ne,H,te,ce,Q){var xe=typeof ne;(xe==="undefined"||xe==="boolean")&&(ne=null);var Te=!1;if(ne===null)Te=!0;else switch(xe){case"bigint":case"string":case"number":Te=!0;break;case"object":switch(ne.$$typeof){case t:case e:Te=!0;break;case m:return Te=ne._init,oe(Te(ne._payload),H,te,ce,Q)}}if(Te)return Q=Q(ne),Te=ce===""?"."+Ee(ne,0):ce,ee(Q)?(te="",Te!=null&&(te=Te.replace(Se,"$&/")+"/"),oe(Q,H,te,"",function(Re){return Re})):Q!=null&&(Z(Q)&&(Q=me(Q,te+(Q.key==null||ne&&ne.key===Q.key?"":(""+Q.key).replace(Se,"$&/")+"/")+Te)),H.push(Q)),1;Te=0;var Le=ce===""?".":ce+":";if(ee(ne))for(var Ge=0;Ge<ne.length;Ge++)ce=ne[Ge],xe=Le+Ee(ce,Ge),Te+=oe(ce,H,te,xe,Q);else if(Ge=x(ne),typeof Ge=="function")for(ne=Ge.call(ne),Ge=0;!(ce=ne.next()).done;)ce=ce.value,xe=Le+Ee(ce,Ge++),Te+=oe(ce,H,te,xe,Q);else if(xe==="object"){if(typeof ne.then=="function")return oe(Ye(ne),H,te,ce,Q);throw H=String(ne),Error("Objects are not valid as a React child (found: "+(H==="[object Object]"?"object with keys {"+Object.keys(ne).join(", ")+"}":H)+"). If you meant to render a collection of children, use an array instead.")}return Te}function ae(ne,H,te){if(ne==null)return ne;var ce=[],Q=0;return oe(ne,ce,"","",function(xe){return H.call(te,xe,Q++)}),ce}function he(ne){if(ne._status===-1){var H=ne._result;H=H(),H.then(function(te){(ne._status===0||ne._status===-1)&&(ne._status=1,ne._result=te)},function(te){(ne._status===0||ne._status===-1)&&(ne._status=2,ne._result=te)}),ne._status===-1&&(ne._status=0,ne._result=H)}if(ne._status===1)return ne._result.default;throw ne._result}var De=typeof reportError=="function"?reportError:function(ne){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var H=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof ne=="object"&&ne!==null&&typeof ne.message=="string"?String(ne.message):String(ne),error:ne});if(!window.dispatchEvent(H))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",ne);return}console.error(ne)},ze={map:ae,forEach:function(ne,H,te){ae(ne,function(){H.apply(this,arguments)},te)},count:function(ne){var H=0;return ae(ne,function(){H++}),H},toArray:function(ne){return ae(ne,function(H){return H})||[]},only:function(ne){if(!Z(ne))throw Error("React.Children.only expected to receive a single React element child.");return ne}};return Zn.Activity=_,Zn.Children=ze,Zn.Component=I,Zn.Fragment=n,Zn.Profiler=r,Zn.PureComponent=B,Zn.StrictMode=i,Zn.Suspense=p,Zn.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=_e,Zn.__COMPILER_RUNTIME={__proto__:null,c:function(ne){return _e.H.useMemoCache(ne)}},Zn.cache=function(ne){return function(){return ne.apply(null,arguments)}},Zn.cacheSignal=function(){return null},Zn.cloneElement=function(ne,H,te){if(ne==null)throw Error("The argument must be a React element, but you passed "+ne+".");var ce=M({},ne.props),Q=ne.key;if(H!=null)for(xe in H.key!==void 0&&(Q=""+H.key),H)!fe.call(H,xe)||xe==="key"||xe==="__self"||xe==="__source"||xe==="ref"&&H.ref===void 0||(ce[xe]=H[xe]);var xe=arguments.length-2;if(xe===1)ce.children=te;else if(1<xe){for(var Te=Array(xe),Le=0;Le<xe;Le++)Te[Le]=arguments[Le+2];ce.children=Te}return G(ne.type,Q,ce)},Zn.createContext=function(ne){return ne={$$typeof:l,_currentValue:ne,_currentValue2:ne,_threadCount:0,Provider:null,Consumer:null},ne.Provider=ne,ne.Consumer={$$typeof:a,_context:ne},ne},Zn.createElement=function(ne,H,te){var ce,Q={},xe=null;if(H!=null)for(ce in H.key!==void 0&&(xe=""+H.key),H)fe.call(H,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(Q[ce]=H[ce]);var Te=arguments.length-2;if(Te===1)Q.children=te;else if(1<Te){for(var Le=Array(Te),Ge=0;Ge<Te;Ge++)Le[Ge]=arguments[Ge+2];Q.children=Le}if(ne&&ne.defaultProps)for(ce in Te=ne.defaultProps,Te)Q[ce]===void 0&&(Q[ce]=Te[ce]);return G(ne,xe,Q)},Zn.createRef=function(){return{current:null}},Zn.forwardRef=function(ne){return{$$typeof:d,render:ne}},Zn.isValidElement=Z,Zn.lazy=function(ne){return{$$typeof:m,_payload:{_status:-1,_result:ne},_init:he}},Zn.memo=function(ne,H){return{$$typeof:g,type:ne,compare:H===void 0?null:H}},Zn.startTransition=function(ne){var H=_e.T,te={};_e.T=te;try{var ce=ne(),Q=_e.S;Q!==null&&Q(te,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(ue,De)}catch(xe){De(xe)}finally{H!==null&&te.types!==null&&(H.types=te.types),_e.T=H}},Zn.unstable_useCacheRefresh=function(){return _e.H.useCacheRefresh()},Zn.use=function(ne){return _e.H.use(ne)},Zn.useActionState=function(ne,H,te){return _e.H.useActionState(ne,H,te)},Zn.useCallback=function(ne,H){return _e.H.useCallback(ne,H)},Zn.useContext=function(ne){return _e.H.useContext(ne)},Zn.useDebugValue=function(){},Zn.useDeferredValue=function(ne,H){return _e.H.useDeferredValue(ne,H)},Zn.useEffect=function(ne,H){return _e.H.useEffect(ne,H)},Zn.useEffectEvent=function(ne){return _e.H.useEffectEvent(ne)},Zn.useId=function(){return _e.H.useId()},Zn.useImperativeHandle=function(ne,H,te){return _e.H.useImperativeHandle(ne,H,te)},Zn.useInsertionEffect=function(ne,H){return _e.H.useInsertionEffect(ne,H)},Zn.useLayoutEffect=function(ne,H){return _e.H.useLayoutEffect(ne,H)},Zn.useMemo=function(ne,H){return _e.H.useMemo(ne,H)},Zn.useOptimistic=function(ne,H){return _e.H.useOptimistic(ne,H)},Zn.useReducer=function(ne,H,te){return _e.H.useReducer(ne,H,te)},Zn.useRef=function(ne){return _e.H.useRef(ne)},Zn.useState=function(ne){return _e.H.useState(ne)},Zn.useSyncExternalStore=function(ne,H,te){return _e.H.useSyncExternalStore(ne,H,te)},Zn.useTransition=function(){return _e.H.useTransition()},Zn.version="19.2.4",Zn}var rb;function Oy(){return rb||(rb=1,Um.exports=OA()),Um.exports}var de=Oy();const ta=og(de);var Hm={exports:{}},yf={},qm={exports:{}},Wm={};var ab;function PA(){return ab||(ab=1,(function(t){function e(oe,ae){var he=oe.length;oe.push(ae);e:for(;0<he;){var De=he-1>>>1,ze=oe[De];if(0<r(ze,ae))oe[De]=ae,oe[he]=ze,he=De;else break e}}function n(oe){return oe.length===0?null:oe[0]}function i(oe){if(oe.length===0)return null;var ae=oe[0],he=oe.pop();if(he!==ae){oe[0]=he;e:for(var De=0,ze=oe.length,ne=ze>>>1;De<ne;){var H=2*(De+1)-1,te=oe[H],ce=H+1,Q=oe[ce];if(0>r(te,he))ce<ze&&0>r(Q,te)?(oe[De]=Q,oe[ce]=he,De=ce):(oe[De]=te,oe[H]=he,De=H);else if(ce<ze&&0>r(Q,he))oe[De]=Q,oe[ce]=he,De=ce;else break e}}return ae}function r(oe,ae){var he=oe.sortIndex-ae.sortIndex;return he!==0?he:oe.id-ae.id}if(t.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var l=Date,d=l.now();t.unstable_now=function(){return l.now()-d}}var p=[],g=[],m=1,_=null,A=3,x=!1,R=!1,M=!1,k=!1,I=typeof setTimeout=="function"?setTimeout:null,Y=typeof clearTimeout=="function"?clearTimeout:null,B=typeof setImmediate<"u"?setImmediate:null;function V(oe){for(var ae=n(g);ae!==null;){if(ae.callback===null)i(g);else if(ae.startTime<=oe)i(g),ae.sortIndex=ae.expirationTime,e(p,ae);else break;ae=n(g)}}function ee(oe){if(M=!1,V(oe),!R)if(n(p)!==null)R=!0,ue||(ue=!0,J());else{var ae=n(g);ae!==null&&Ye(ee,ae.startTime-oe)}}var ue=!1,_e=-1,fe=5,G=-1;function me(){return k?!0:!(t.unstable_now()-G<fe)}function Z(){if(k=!1,ue){var oe=t.unstable_now();G=oe;var ae=!0;try{e:{R=!1,M&&(M=!1,Y(_e),_e=-1),x=!0;var he=A;try{t:{for(V(oe),_=n(p);_!==null&&!(_.expirationTime>oe&&me());){var De=_.callback;if(typeof De=="function"){_.callback=null,A=_.priorityLevel;var ze=De(_.expirationTime<=oe);if(oe=t.unstable_now(),typeof ze=="function"){_.callback=ze,V(oe),ae=!0;break t}_===n(p)&&i(p),V(oe)}else i(p);_=n(p)}if(_!==null)ae=!0;else{var ne=n(g);ne!==null&&Ye(ee,ne.startTime-oe),ae=!1}}break e}finally{_=null,A=he,x=!1}ae=void 0}}finally{ae?J():ue=!1}}}var J;if(typeof B=="function")J=function(){B(Z)};else if(typeof MessageChannel<"u"){var Se=new MessageChannel,Ee=Se.port2;Se.port1.onmessage=Z,J=function(){Ee.postMessage(null)}}else J=function(){I(Z,0)};function Ye(oe,ae){_e=I(function(){oe(t.unstable_now())},ae)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(oe){oe.callback=null},t.unstable_forceFrameRate=function(oe){0>oe||125<oe?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):fe=0<oe?Math.floor(1e3/oe):5},t.unstable_getCurrentPriorityLevel=function(){return A},t.unstable_next=function(oe){switch(A){case 1:case 2:case 3:var ae=3;break;default:ae=A}var he=A;A=ae;try{return oe()}finally{A=he}},t.unstable_requestPaint=function(){k=!0},t.unstable_runWithPriority=function(oe,ae){switch(oe){case 1:case 2:case 3:case 4:case 5:break;default:oe=3}var he=A;A=oe;try{return ae()}finally{A=he}},t.unstable_scheduleCallback=function(oe,ae,he){var De=t.unstable_now();switch(typeof he=="object"&&he!==null?(he=he.delay,he=typeof he=="number"&&0<he?De+he:De):he=De,oe){case 1:var ze=-1;break;case 2:ze=250;break;case 5:ze=1073741823;break;case 4:ze=1e4;break;default:ze=5e3}return ze=he+ze,oe={id:m++,callback:ae,priorityLevel:oe,startTime:he,expirationTime:ze,sortIndex:-1},he>De?(oe.sortIndex=he,e(g,oe),n(p)===null&&oe===n(g)&&(M?(Y(_e),_e=-1):M=!0,Ye(ee,he-De))):(oe.sortIndex=ze,e(p,oe),R||x||(R=!0,ue||(ue=!0,J()))),oe},t.unstable_shouldYield=me,t.unstable_wrapCallback=function(oe){var ae=A;return function(){var he=A;A=ae;try{return oe.apply(this,arguments)}finally{A=he}}}})(Wm)),Wm}var ob;function IA(){return ob||(ob=1,qm.exports=PA()),qm.exports}var Gm={exports:{}},Go={};var sb;function zA(){if(sb)return Go;sb=1;var t=Oy();function e(p){var g="https://react.dev/errors/"+p;if(1<arguments.length){g+="?args[]="+encodeURIComponent(arguments[1]);for(var m=2;m<arguments.length;m++)g+="&args[]="+encodeURIComponent(arguments[m])}return"Minified React error #"+p+"; visit "+g+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var i={d:{f:n,r:function(){throw Error(e(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},r=Symbol.for("react.portal");function a(p,g,m){var _=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:r,key:_==null?null:""+_,children:p,containerInfo:g,implementation:m}}var l=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function d(p,g){if(p==="font")return"";if(typeof g=="string")return g==="use-credentials"?g:""}return Go.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Go.createPortal=function(p,g){var m=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!g||g.nodeType!==1&&g.nodeType!==9&&g.nodeType!==11)throw Error(e(299));return a(p,g,null,m)},Go.flushSync=function(p){var g=l.T,m=i.p;try{if(l.T=null,i.p=2,p)return p()}finally{l.T=g,i.p=m,i.d.f()}},Go.preconnect=function(p,g){typeof p=="string"&&(g?(g=g.crossOrigin,g=typeof g=="string"?g==="use-credentials"?g:"":void 0):g=null,i.d.C(p,g))},Go.prefetchDNS=function(p){typeof p=="string"&&i.d.D(p)},Go.preinit=function(p,g){if(typeof p=="string"&&g&&typeof g.as=="string"){var m=g.as,_=d(m,g.crossOrigin),A=typeof g.integrity=="string"?g.integrity:void 0,x=typeof g.fetchPriority=="string"?g.fetchPriority:void 0;m==="style"?i.d.S(p,typeof g.precedence=="string"?g.precedence:void 0,{crossOrigin:_,integrity:A,fetchPriority:x}):m==="script"&&i.d.X(p,{crossOrigin:_,integrity:A,fetchPriority:x,nonce:typeof g.nonce=="string"?g.nonce:void 0})}},Go.preinitModule=function(p,g){if(typeof p=="string")if(typeof g=="object"&&g!==null){if(g.as==null||g.as==="script"){var m=d(g.as,g.crossOrigin);i.d.M(p,{crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0})}}else g==null&&i.d.M(p)},Go.preload=function(p,g){if(typeof p=="string"&&typeof g=="object"&&g!==null&&typeof g.as=="string"){var m=g.as,_=d(m,g.crossOrigin);i.d.L(p,m,{crossOrigin:_,integrity:typeof g.integrity=="string"?g.integrity:void 0,nonce:typeof g.nonce=="string"?g.nonce:void 0,type:typeof g.type=="string"?g.type:void 0,fetchPriority:typeof g.fetchPriority=="string"?g.fetchPriority:void 0,referrerPolicy:typeof g.referrerPolicy=="string"?g.referrerPolicy:void 0,imageSrcSet:typeof g.imageSrcSet=="string"?g.imageSrcSet:void 0,imageSizes:typeof g.imageSizes=="string"?g.imageSizes:void 0,media:typeof g.media=="string"?g.media:void 0})}},Go.preloadModule=function(p,g){if(typeof p=="string")if(g){var m=d(g.as,g.crossOrigin);i.d.m(p,{as:typeof g.as=="string"&&g.as!=="script"?g.as:void 0,crossOrigin:m,integrity:typeof g.integrity=="string"?g.integrity:void 0})}else i.d.m(p)},Go.requestFormReset=function(p){i.d.r(p)},Go.unstable_batchedUpdates=function(p,g){return p(g)},Go.useFormState=function(p,g,m){return l.H.useFormState(p,g,m)},Go.useFormStatus=function(){return l.H.useHostTransitionStatus()},Go.version="19.2.4",Go}var lb;function Cw(){if(lb)return Gm.exports;lb=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Gm.exports=zA(),Gm.exports}var cb;function BA(){if(cb)return yf;cb=1;var t=IA(),e=Oy(),n=Cw();function i(o){var s="https://react.dev/errors/"+o;if(1<arguments.length){s+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)s+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+o+"; visit "+s+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(o){return!(!o||o.nodeType!==1&&o.nodeType!==9&&o.nodeType!==11)}function a(o){var s=o,h=o;if(o.alternate)for(;s.return;)s=s.return;else{o=s;do s=o,(s.flags&4098)!==0&&(h=s.return),o=s.return;while(o)}return s.tag===3?h:null}function l(o){if(o.tag===13){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function d(o){if(o.tag===31){var s=o.memoizedState;if(s===null&&(o=o.alternate,o!==null&&(s=o.memoizedState)),s!==null)return s.dehydrated}return null}function p(o){if(a(o)!==o)throw Error(i(188))}function g(o){var s=o.alternate;if(!s){if(s=a(o),s===null)throw Error(i(188));return s!==o?null:o}for(var h=o,y=s;;){var C=h.return;if(C===null)break;var T=C.alternate;if(T===null){if(y=C.return,y!==null){h=y;continue}break}if(C.child===T.child){for(T=C.child;T;){if(T===h)return p(C),o;if(T===y)return p(C),s;T=T.sibling}throw Error(i(188))}if(h.return!==y.return)h=C,y=T;else{for(var q=!1,le=C.child;le;){if(le===h){q=!0,h=C,y=T;break}if(le===y){q=!0,y=C,h=T;break}le=le.sibling}if(!q){for(le=T.child;le;){if(le===h){q=!0,h=T,y=C;break}if(le===y){q=!0,y=T,h=C;break}le=le.sibling}if(!q)throw Error(i(189))}}if(h.alternate!==y)throw Error(i(190))}if(h.tag!==3)throw Error(i(188));return h.stateNode.current===h?o:s}function m(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o;for(o=o.child;o!==null;){if(s=m(o),s!==null)return s;o=o.sibling}return null}var _=Object.assign,A=Symbol.for("react.element"),x=Symbol.for("react.transitional.element"),R=Symbol.for("react.portal"),M=Symbol.for("react.fragment"),k=Symbol.for("react.strict_mode"),I=Symbol.for("react.profiler"),Y=Symbol.for("react.consumer"),B=Symbol.for("react.context"),V=Symbol.for("react.forward_ref"),ee=Symbol.for("react.suspense"),ue=Symbol.for("react.suspense_list"),_e=Symbol.for("react.memo"),fe=Symbol.for("react.lazy"),G=Symbol.for("react.activity"),me=Symbol.for("react.memo_cache_sentinel"),Z=Symbol.iterator;function J(o){return o===null||typeof o!="object"?null:(o=Z&&o[Z]||o["@@iterator"],typeof o=="function"?o:null)}var Se=Symbol.for("react.client.reference");function Ee(o){if(o==null)return null;if(typeof o=="function")return o.$$typeof===Se?null:o.displayName||o.name||null;if(typeof o=="string")return o;switch(o){case M:return"Fragment";case I:return"Profiler";case k:return"StrictMode";case ee:return"Suspense";case ue:return"SuspenseList";case G:return"Activity"}if(typeof o=="object")switch(o.$$typeof){case R:return"Portal";case B:return o.displayName||"Context";case Y:return(o._context.displayName||"Context")+".Consumer";case V:var s=o.render;return o=o.displayName,o||(o=s.displayName||s.name||"",o=o!==""?"ForwardRef("+o+")":"ForwardRef"),o;case _e:return s=o.displayName||null,s!==null?s:Ee(o.type)||"Memo";case fe:s=o._payload,o=o._init;try{return Ee(o(s))}catch{}}return null}var Ye=Array.isArray,oe=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,ae=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,he={pending:!1,data:null,method:null,action:null},De=[],ze=-1;function ne(o){return{current:o}}function H(o){0>ze||(o.current=De[ze],De[ze]=null,ze--)}function te(o,s){ze++,De[ze]=o.current,o.current=s}var ce=ne(null),Q=ne(null),xe=ne(null),Te=ne(null);function Le(o,s){switch(te(xe,s),te(Q,o),te(ce,null),s.nodeType){case 9:case 11:o=(o=s.documentElement)&&(o=o.namespaceURI)?C1(o):0;break;default:if(o=s.tagName,s=s.namespaceURI)s=C1(s),o=E1(s,o);else switch(o){case"svg":o=1;break;case"math":o=2;break;default:o=0}}H(ce),te(ce,o)}function Ge(){H(ce),H(Q),H(xe)}function Re(o){o.memoizedState!==null&&te(Te,o);var s=ce.current,h=E1(s,o.type);s!==h&&(te(Q,o),te(ce,h))}function gt(o){Q.current===o&&(H(ce),H(Q)),Te.current===o&&(H(Te),hf._currentValue=he)}var mt,Ot;function Kt(o){if(mt===void 0)try{throw Error()}catch(h){var s=h.stack.trim().match(/\n( *(at )?)/);mt=s&&s[1]||"",Ot=-1<h.stack.indexOf(`
    at`)?" (<anonymous>)":-1<h.stack.indexOf("@")?"@unknown:0:0":""}return`
`+mt+o+Ot}var ye=!1;function Pt(o,s){if(!o||ye)return"";ye=!0;var h=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(s){var St=function(){throw Error()};if(Object.defineProperty(St.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(St,[])}catch(ct){var st=ct}Reflect.construct(o,[],St)}else{try{St.call()}catch(ct){st=ct}o.call(St.prototype)}}else{try{throw Error()}catch(ct){st=ct}(St=o())&&typeof St.catch=="function"&&St.catch(function(){})}}catch(ct){if(ct&&st&&typeof ct.stack=="string")return[ct.stack,st.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var C=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");C&&C.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var T=y.DetermineComponentFrameRoot(),q=T[0],le=T[1];if(q&&le){var Oe=q.split(`
`),at=le.split(`
`);for(C=y=0;y<Oe.length&&!Oe[y].includes("DetermineComponentFrameRoot");)y++;for(;C<at.length&&!at[C].includes("DetermineComponentFrameRoot");)C++;if(y===Oe.length||C===at.length)for(y=Oe.length-1,C=at.length-1;1<=y&&0<=C&&Oe[y]!==at[C];)C--;for(;1<=y&&0<=C;y--,C--)if(Oe[y]!==at[C]){if(y!==1||C!==1)do if(y--,C--,0>C||Oe[y]!==at[C]){var yt=`
`+Oe[y].replace(" at new "," at ");return o.displayName&&yt.includes("<anonymous>")&&(yt=yt.replace("<anonymous>",o.displayName)),yt}while(1<=y&&0<=C);break}}}finally{ye=!1,Error.prepareStackTrace=h}return(h=o?o.displayName||o.name:"")?Kt(h):""}function Dn(o,s){switch(o.tag){case 26:case 27:case 5:return Kt(o.type);case 16:return Kt("Lazy");case 13:return o.child!==s&&s!==null?Kt("Suspense Fallback"):Kt("Suspense");case 19:return Kt("SuspenseList");case 0:case 15:return Pt(o.type,!1);case 11:return Pt(o.type.render,!1);case 1:return Pt(o.type,!0);case 31:return Kt("Activity");default:return""}}function dn(o){try{var s="",h=null;do s+=Dn(o,h),h=o,o=o.return;while(o);return s}catch(y){return`
Error generating stack: `+y.message+`
`+y.stack}}var At=Object.prototype.hasOwnProperty,sn=t.unstable_scheduleCallback,kt=t.unstable_cancelCallback,Yt=t.unstable_shouldYield,Vt=t.unstable_requestPaint,xn=t.unstable_now,kn=t.unstable_getCurrentPriorityLevel,$t=t.unstable_ImmediatePriority,Cn=t.unstable_UserBlockingPriority,In=t.unstable_NormalPriority,Jt=t.unstable_LowPriority,En=t.unstable_IdlePriority,en=t.log,Ni=t.unstable_setDisableYieldValue,Hn=null,hn=null;function gn(o){if(typeof en=="function"&&Ni(o),hn&&typeof hn.setStrictMode=="function")try{hn.setStrictMode(Hn,o)}catch{}}var Nt=Math.clz32?Math.clz32:vn,tn=Math.log,ui=Math.LN2;function vn(o){return o>>>=0,o===0?32:31-(tn(o)/ui|0)|0}var vt=256,yi=262144,Pn=4194304;function ln(o){var s=o&42;if(s!==0)return s;switch(o&-o){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return o&261888;case 262144:case 524288:case 1048576:case 2097152:return o&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return o&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return o}}function ri(o,s,h){var y=o.pendingLanes;if(y===0)return 0;var C=0,T=o.suspendedLanes,q=o.pingedLanes;o=o.warmLanes;var le=y&134217727;return le!==0?(y=le&~T,y!==0?C=ln(y):(q&=le,q!==0?C=ln(q):h||(h=le&~o,h!==0&&(C=ln(h))))):(le=y&~T,le!==0?C=ln(le):q!==0?C=ln(q):h||(h=y&~o,h!==0&&(C=ln(h)))),C===0?0:s!==0&&s!==C&&(s&T)===0&&(T=C&-C,h=s&-s,T>=h||T===32&&(h&4194048)!==0)?s:C}function Ya(o,s){return(o.pendingLanes&~(o.suspendedLanes&~o.pingedLanes)&s)===0}function ia(o,s){switch(o){case 1:case 2:case 4:case 8:case 64:return s+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function zo(){var o=Pn;return Pn<<=1,(Pn&62914560)===0&&(Pn=4194304),o}function Wr(o){for(var s=[],h=0;31>h;h++)s.push(o);return s}function nn(o,s){o.pendingLanes|=s,s!==268435456&&(o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0)}function Ao(o,s,h,y,C,T){var q=o.pendingLanes;o.pendingLanes=h,o.suspendedLanes=0,o.pingedLanes=0,o.warmLanes=0,o.expiredLanes&=h,o.entangledLanes&=h,o.errorRecoveryDisabledLanes&=h,o.shellSuspendCounter=0;var le=o.entanglements,Oe=o.expirationTimes,at=o.hiddenUpdates;for(h=q&~h;0<h;){var yt=31-Nt(h),St=1<<yt;le[yt]=0,Oe[yt]=-1;var st=at[yt];if(st!==null)for(at[yt]=null,yt=0;yt<st.length;yt++){var ct=st[yt];ct!==null&&(ct.lane&=-536870913)}h&=~St}y!==0&&Za(o,y,0),T!==0&&C===0&&o.tag!==0&&(o.suspendedLanes|=T&~(q&~s))}function Za(o,s,h){o.pendingLanes|=s,o.suspendedLanes&=~s;var y=31-Nt(s);o.entangledLanes|=s,o.entanglements[y]=o.entanglements[y]|1073741824|h&261930}function ei(o,s){var h=o.entangledLanes|=s;for(o=o.entanglements;h;){var y=31-Nt(h),C=1<<y;C&s|o[y]&s&&(o[y]|=s),h&=~C}}function xi(o,s){var h=s&-s;return h=(h&42)!==0?1:si(h),(h&(o.suspendedLanes|s))!==0?0:h}function si(o){switch(o){case 2:o=1;break;case 8:o=4;break;case 32:o=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:o=128;break;case 268435456:o=134217728;break;default:o=0}return o}function Ut(o){return o&=-o,2<o?8<o?(o&134217727)!==0?32:268435456:8:2}function nr(){var o=ae.p;return o!==0?o:(o=window.event,o===void 0?32:Z1(o.type))}function fo(o,s){var h=ae.p;try{return ae.p=o,s()}finally{ae.p=h}}var ra=Math.random().toString(36).slice(2),ti="__reactFiber$"+ra,bi="__reactProps$"+ra,Zi="__reactContainer$"+ra,pr="__reactEvents$"+ra,Ka="__reactListeners$"+ra,Oa="__reactHandles$"+ra,ho="__reactResources$"+ra,Gr="__reactMarker$"+ra;function Jo(o){delete o[ti],delete o[bi],delete o[pr],delete o[Ka],delete o[Oa]}function Pa(o){var s=o[ti];if(s)return s;for(var h=o.parentNode;h;){if(s=h[Zi]||h[ti]){if(h=s.alternate,s.child!==null||h!==null&&h.child!==null)for(o=N1(o);o!==null;){if(h=o[ti])return h;o=N1(o)}return s}o=h,h=o.parentNode}return null}function hi(o){if(o=o[ti]||o[Zi]){var s=o.tag;if(s===5||s===6||s===13||s===31||s===26||s===27||s===3)return o}return null}function aa(o){var s=o.tag;if(s===5||s===26||s===27||s===6)return o.stateNode;throw Error(i(33))}function Or(o){var s=o[ho];return s||(s=o[ho]={hoistableStyles:new Map,hoistableScripts:new Map}),s}function ir(o){o[Gr]=!0}var Bo=new Set,oa={};function Xa(o,s){Qa(o,s),Qa(o+"Capture",s)}function Qa(o,s){for(oa[o]=s,o=0;o<s.length;o++)Bo.add(s[o])}var va=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Ns={},es={};function ts(o){return At.call(es,o)?!0:At.call(Ns,o)?!1:va.test(o)?es[o]=!0:(Ns[o]=!0,!1)}function Ht(o,s,h){if(ts(s))if(h===null)o.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":o.removeAttribute(s);return;case"boolean":var y=s.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){o.removeAttribute(s);return}}o.setAttribute(s,""+h)}}function di(o,s,h){if(h===null)o.removeAttribute(s);else{switch(typeof h){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(s);return}o.setAttribute(s,""+h)}}function ya(o,s,h,y){if(y===null)o.removeAttribute(h);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":o.removeAttribute(h);return}o.setAttributeNS(s,h,""+y)}}function Gn(o){switch(typeof o){case"bigint":case"boolean":case"number":case"string":case"undefined":return o;case"object":return o;default:return""}}function Ia(o){var s=o.type;return(o=o.nodeName)&&o.toLowerCase()==="input"&&(s==="checkbox"||s==="radio")}function $a(o,s,h){var y=Object.getOwnPropertyDescriptor(o.constructor.prototype,s);if(!o.hasOwnProperty(s)&&typeof y<"u"&&typeof y.get=="function"&&typeof y.set=="function"){var C=y.get,T=y.set;return Object.defineProperty(o,s,{configurable:!0,get:function(){return C.call(this)},set:function(q){h=""+q,T.call(this,q)}}),Object.defineProperty(o,s,{enumerable:y.enumerable}),{getValue:function(){return h},setValue:function(q){h=""+q},stopTracking:function(){o._valueTracker=null,delete o[s]}}}}function Sn(o){if(!o._valueTracker){var s=Ia(o)?"checked":"value";o._valueTracker=$a(o,s,""+o[s])}}function Ii(o){if(!o)return!1;var s=o._valueTracker;if(!s)return!0;var h=s.getValue(),y="";return o&&(y=Ia(o)?o.checked?"true":"false":o.value),o=y,o!==h?(s.setValue(o),!0):!1}function zn(o){if(o=o||(typeof document<"u"?document:void 0),typeof o>"u")return null;try{return o.activeElement||o.body}catch{return o.body}}var zi=/[\n"\\]/g;function ni(o){return o.replace(zi,function(s){return"\\"+s.charCodeAt(0).toString(16)+" "})}function Lo(o,s,h,y,C,T,q,le){o.name="",q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?o.type=q:o.removeAttribute("type"),s!=null?q==="number"?(s===0&&o.value===""||o.value!=s)&&(o.value=""+Gn(s)):o.value!==""+Gn(s)&&(o.value=""+Gn(s)):q!=="submit"&&q!=="reset"||o.removeAttribute("value"),s!=null?Ja(o,q,Gn(s)):h!=null?Ja(o,q,Gn(h)):y!=null&&o.removeAttribute("value"),C==null&&T!=null&&(o.defaultChecked=!!T),C!=null&&(o.checked=C&&typeof C!="function"&&typeof C!="symbol"),le!=null&&typeof le!="function"&&typeof le!="symbol"&&typeof le!="boolean"?o.name=""+Gn(le):o.removeAttribute("name")}function ns(o,s,h,y,C,T,q,le){if(T!=null&&typeof T!="function"&&typeof T!="symbol"&&typeof T!="boolean"&&(o.type=T),s!=null||h!=null){if(!(T!=="submit"&&T!=="reset"||s!=null)){Sn(o);return}h=h!=null?""+Gn(h):"",s=s!=null?""+Gn(s):h,le||s===o.value||(o.value=s),o.defaultValue=s}y=y??C,y=typeof y!="function"&&typeof y!="symbol"&&!!y,o.checked=le?o.checked:!!y,o.defaultChecked=!!y,q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"&&(o.name=q),Sn(o)}function Ja(o,s,h){s==="number"&&zn(o.ownerDocument)===o||o.defaultValue===""+h||(o.defaultValue=""+h)}function Xn(o,s,h,y){if(o=o.options,s){s={};for(var C=0;C<h.length;C++)s["$"+h[C]]=!0;for(h=0;h<o.length;h++)C=s.hasOwnProperty("$"+o[h].value),o[h].selected!==C&&(o[h].selected=C),C&&y&&(o[h].defaultSelected=!0)}else{for(h=""+Gn(h),s=null,C=0;C<o.length;C++){if(o[C].value===h){o[C].selected=!0,y&&(o[C].defaultSelected=!0);return}s!==null||o[C].disabled||(s=o[C])}s!==null&&(s.selected=!0)}}function po(o,s,h){if(s!=null&&(s=""+Gn(s),s!==o.value&&(o.value=s),h==null)){o.defaultValue!==s&&(o.defaultValue=s);return}o.defaultValue=h!=null?""+Gn(h):""}function go(o,s,h,y){if(s==null){if(y!=null){if(h!=null)throw Error(i(92));if(Ye(y)){if(1<y.length)throw Error(i(93));y=y[0]}h=y}h==null&&(h=""),s=h}h=Gn(s),o.defaultValue=h,y=o.textContent,y===h&&y!==""&&y!==null&&(o.value=y),Sn(o)}function sa(o,s){if(s){var h=o.firstChild;if(h&&h===o.lastChild&&h.nodeType===3){h.nodeValue=s;return}}o.textContent=s}var is=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Vn(o,s,h){var y=s.indexOf("--")===0;h==null||typeof h=="boolean"||h===""?y?o.setProperty(s,""):s==="float"?o.cssFloat="":o[s]="":y?o.setProperty(s,h):typeof h!="number"||h===0||is.has(s)?s==="float"?o.cssFloat=h:o[s]=(""+h).trim():o[s]=h+"px"}function Ds(o,s,h){if(s!=null&&typeof s!="object")throw Error(i(62));if(o=o.style,h!=null){for(var y in h)!h.hasOwnProperty(y)||s!=null&&s.hasOwnProperty(y)||(y.indexOf("--")===0?o.setProperty(y,""):y==="float"?o.cssFloat="":o[y]="");for(var C in s)y=s[C],s.hasOwnProperty(C)&&h[C]!==y&&Vn(o,C,y)}else for(var T in s)s.hasOwnProperty(T)&&Vn(o,T,s[T])}function Ms(o){if(o.indexOf("-")===-1)return!1;switch(o){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var fs=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Pr=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function gr(o){return Pr.test(""+o)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":o}function Vr(){}var Yr=null;function Fo(o){return o=o.target||o.srcElement||window,o.correspondingUseElement&&(o=o.correspondingUseElement),o.nodeType===3?o.parentNode:o}var rs=null,Ct=null;function rr(o){var s=hi(o);if(s&&(o=s.stateNode)){var h=o[bi]||null;e:switch(o=s.stateNode,s.type){case"input":if(Lo(o,h.value,h.defaultValue,h.defaultValue,h.checked,h.defaultChecked,h.type,h.name),s=h.name,h.type==="radio"&&s!=null){for(h=o;h.parentNode;)h=h.parentNode;for(h=h.querySelectorAll('input[name="'+ni(""+s)+'"][type="radio"]'),s=0;s<h.length;s++){var y=h[s];if(y!==o&&y.form===o.form){var C=y[bi]||null;if(!C)throw Error(i(90));Lo(y,C.value,C.defaultValue,C.defaultValue,C.checked,C.defaultChecked,C.type,C.name)}}for(s=0;s<h.length;s++)y=h[s],y.form===o.form&&Ii(y)}break e;case"textarea":po(o,h.value,h.defaultValue);break e;case"select":s=h.value,s!=null&&Xn(o,!!h.multiple,s,!1)}}}var ai=!1;function as(o,s,h){if(ai)return o(s,h);ai=!0;try{var y=o(s);return y}finally{if(ai=!1,(rs!==null||Ct!==null)&&(Sh(),rs&&(s=rs,o=Ct,Ct=rs=null,rr(s),o)))for(s=0;s<o.length;s++)rr(o[s])}}function Zr(o,s){var h=o.stateNode;if(h===null)return null;var y=h[bi]||null;if(y===null)return null;h=y[s];e:switch(s){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(o=o.type,y=!(o==="button"||o==="input"||o==="select"||o==="textarea")),o=!y;break e;default:o=!1}if(o)return null;if(h&&typeof h!="function")throw Error(i(231,s,typeof h));return h}var Bi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Os=!1;if(Bi)try{var ar={};Object.defineProperty(ar,"passive",{get:function(){Os=!0}}),window.addEventListener("test",ar,ar),window.removeEventListener("test",ar,ar)}catch{Os=!1}var Kr=null,mo=null,Ai=null;function za(){if(Ai)return Ai;var o,s=mo,h=s.length,y,C="value"in Kr?Kr.value:Kr.textContent,T=C.length;for(o=0;o<h&&s[o]===C[o];o++);var q=h-o;for(y=1;y<=q&&s[h-y]===C[T-y];y++);return Ai=C.slice(o,1<y?1-y:void 0)}function xa(o){var s=o.keyCode;return"charCode"in o?(o=o.charCode,o===0&&s===13&&(o=13)):o=s,o===10&&(o=13),32<=o||o===13?o:0}function hs(){return!0}function Qs(){return!1}function Qi(o){function s(h,y,C,T,q){this._reactName=h,this._targetInst=C,this.type=y,this.nativeEvent=T,this.target=q,this.currentTarget=null;for(var le in o)o.hasOwnProperty(le)&&(h=o[le],this[le]=h?h(T):T[le]);return this.isDefaultPrevented=(T.defaultPrevented!=null?T.defaultPrevented:T.returnValue===!1)?hs:Qs,this.isPropagationStopped=Qs,this}return _(s.prototype,{preventDefault:function(){this.defaultPrevented=!0;var h=this.nativeEvent;h&&(h.preventDefault?h.preventDefault():typeof h.returnValue!="unknown"&&(h.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var h=this.nativeEvent;h&&(h.stopPropagation?h.stopPropagation():typeof h.cancelBubble!="unknown"&&(h.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),s}var vo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(o){return o.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},yo=Qi(vo),eo=_({},vo,{view:0,detail:0}),Bn=Qi(eo),os,Ar,to,ps=_({},eo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:yn,button:0,buttons:0,relatedTarget:function(o){return o.relatedTarget===void 0?o.fromElement===o.srcElement?o.toElement:o.fromElement:o.relatedTarget},movementX:function(o){return"movementX"in o?o.movementX:(o!==to&&(to&&o.type==="mousemove"?(os=o.screenX-to.screenX,Ar=o.screenY-to.screenY):Ar=os=0,to=o),os)},movementY:function(o){return"movementY"in o?o.movementY:Ar}}),Ps=Qi(ps),no=_({},ps,{dataTransfer:0}),Uo=Qi(no),gs=_({},eo,{relatedTarget:0}),xo=Qi(gs),Is=_({},vo,{animationName:0,elapsedTime:0,pseudoElement:0}),D=Qi(Is),K=_({},vo,{clipboardData:function(o){return"clipboardData"in o?o.clipboardData:window.clipboardData}}),we=Qi(K),Ie=_({},vo,{data:0}),Ke=Qi(Ie),dt={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},wt={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bt={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Zt(o){var s=this.nativeEvent;return s.getModifierState?s.getModifierState(o):(o=Bt[o])?!!s[o]:!1}function yn(){return Zt}var Mn=_({},eo,{key:function(o){if(o.key){var s=dt[o.key]||o.key;if(s!=="Unidentified")return s}return o.type==="keypress"?(o=xa(o),o===13?"Enter":String.fromCharCode(o)):o.type==="keydown"||o.type==="keyup"?wt[o.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:yn,charCode:function(o){return o.type==="keypress"?xa(o):0},keyCode:function(o){return o.type==="keydown"||o.type==="keyup"?o.keyCode:0},which:function(o){return o.type==="keypress"?xa(o):o.type==="keydown"||o.type==="keyup"?o.keyCode:0}}),Qn=Qi(Mn),Ki=_({},ps,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),or=Qi(Ki),pi=_({},eo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:yn}),mr=Qi(pi),Di=_({},vo,{propertyName:0,elapsedTime:0,pseudoElement:0}),_r=Qi(Di),Ba=_({},ps,{deltaX:function(o){return"deltaX"in o?o.deltaX:"wheelDeltaX"in o?-o.wheelDeltaX:0},deltaY:function(o){return"deltaY"in o?o.deltaY:"wheelDeltaY"in o?-o.wheelDeltaY:"wheelDelta"in o?-o.wheelDelta:0},deltaZ:0,deltaMode:0}),wr=Qi(Ba),To=_({},vo,{newState:0,oldState:0}),Ho=Qi(To),Xr=[9,13,27,32],io=Bi&&"CompositionEvent"in window,ba=null;Bi&&"documentMode"in document&&(ba=document.documentMode);var zs=Bi&&"TextEvent"in window&&!ba,ro=Bi&&(!io||ba&&8<ba&&11>=ba),sr=" ",ms=!1;function ss(o,s){switch(o){case"keyup":return Xr.indexOf(s.keyCode)!==-1;case"keydown":return s.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Bs(o){return o=o.detail,typeof o=="object"&&"data"in o?o.data:null}var jo=!1;function Fi(o,s){switch(o){case"compositionend":return Bs(s);case"keypress":return s.which!==32?null:(ms=!0,sr);case"textInput":return o=s.data,o===sr&&ms?null:o;default:return null}}function Fa(o,s){if(jo)return o==="compositionend"||!io&&ss(o,s)?(o=za(),Ai=mo=Kr=null,jo=!1,o):null;switch(o){case"paste":return null;case"keypress":if(!(s.ctrlKey||s.altKey||s.metaKey)||s.ctrlKey&&s.altKey){if(s.char&&1<s.char.length)return s.char;if(s.which)return String.fromCharCode(s.which)}return null;case"compositionend":return ro&&s.locale!=="ko"?null:s.data;default:return null}}var Fs={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function _a(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s==="input"?!!Fs[o.type]:s==="textarea"}function Ua(o,s,h,y){rs?Ct?Ct.push(y):Ct=[y]:rs=y,s=kh(s,"onChange"),0<s.length&&(h=new yo("onChange","change",null,h,y),o.push({event:h,listeners:s}))}var Qr=null,ls=null;function cs(o){y1(o,0)}function bo(o){var s=aa(o);if(Ii(s))return o}function Ha(o,s){if(o==="change")return s}var lr=!1;if(Bi){var Fn;if(Bi){var la="oninput"in document;if(!la){var wa=document.createElement("div");wa.setAttribute("oninput","return;"),la=typeof wa.oninput=="function"}Fn=la}else Fn=!1;lr=Fn&&(!document.documentMode||9<document.documentMode)}function ko(){Qr&&(Qr.detachEvent("onpropertychange",vs),ls=Qr=null)}function vs(o){if(o.propertyName==="value"&&bo(ls)){var s=[];Ua(s,ls,o,Fo(o)),as(cs,s)}}function Sa(o,s,h){o==="focusin"?(ko(),Qr=s,ls=h,Qr.attachEvent("onpropertychange",vs)):o==="focusout"&&ko()}function Mi(o){if(o==="selectionchange"||o==="keyup"||o==="keydown")return bo(ls)}function Ro(o,s){if(o==="click")return bo(s)}function Ca(o,s){if(o==="input"||o==="change")return bo(s)}function Wi(o,s){return o===s&&(o!==0||1/o===1/s)||o!==o&&s!==s}var vr=typeof Object.is=="function"?Object.is:Wi;function w(o,s){if(vr(o,s))return!0;if(typeof o!="object"||o===null||typeof s!="object"||s===null)return!1;var h=Object.keys(o),y=Object.keys(s);if(h.length!==y.length)return!1;for(y=0;y<h.length;y++){var C=h[y];if(!At.call(s,C)||!vr(o[C],s[C]))return!1}return!0}function j(o){for(;o&&o.firstChild;)o=o.firstChild;return o}function P(o,s){var h=j(o);o=0;for(var y;h;){if(h.nodeType===3){if(y=o+h.textContent.length,o<=s&&y>=s)return{node:h,offset:s-o};o=y}e:{for(;h;){if(h.nextSibling){h=h.nextSibling;break e}h=h.parentNode}h=void 0}h=j(h)}}function z(o,s){return o&&s?o===s?!0:o&&o.nodeType===3?!1:s&&s.nodeType===3?z(o,s.parentNode):"contains"in o?o.contains(s):o.compareDocumentPosition?!!(o.compareDocumentPosition(s)&16):!1:!1}function W(o){o=o!=null&&o.ownerDocument!=null&&o.ownerDocument.defaultView!=null?o.ownerDocument.defaultView:window;for(var s=zn(o.document);s instanceof o.HTMLIFrameElement;){try{var h=typeof s.contentWindow.location.href=="string"}catch{h=!1}if(h)o=s.contentWindow;else break;s=zn(o.document)}return s}function $(o){var s=o&&o.nodeName&&o.nodeName.toLowerCase();return s&&(s==="input"&&(o.type==="text"||o.type==="search"||o.type==="tel"||o.type==="url"||o.type==="password")||s==="textarea"||o.contentEditable==="true")}var ge=Bi&&"documentMode"in document&&11>=document.documentMode,be=null,He=null,Ze=null,Be=!1;function je(o,s,h){var y=h.window===h?h.document:h.nodeType===9?h:h.ownerDocument;Be||be==null||be!==zn(y)||(y=be,"selectionStart"in y&&$(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Ze&&w(Ze,y)||(Ze=y,y=kh(He,"onSelect"),0<y.length&&(s=new yo("onSelect","select",null,s,h),o.push({event:s,listeners:y}),s.target=be)))}function Ne(o,s){var h={};return h[o.toLowerCase()]=s.toLowerCase(),h["Webkit"+o]="webkit"+s,h["Moz"+o]="moz"+s,h}var Pe={animationend:Ne("Animation","AnimationEnd"),animationiteration:Ne("Animation","AnimationIteration"),animationstart:Ne("Animation","AnimationStart"),transitionrun:Ne("Transition","TransitionRun"),transitionstart:Ne("Transition","TransitionStart"),transitioncancel:Ne("Transition","TransitionCancel"),transitionend:Ne("Transition","TransitionEnd")},Me={},Ue={};Bi&&(Ue=document.createElement("div").style,"AnimationEvent"in window||(delete Pe.animationend.animation,delete Pe.animationiteration.animation,delete Pe.animationstart.animation),"TransitionEvent"in window||delete Pe.transitionend.transition);function Xe(o){if(Me[o])return Me[o];if(!Pe[o])return o;var s=Pe[o],h;for(h in s)if(s.hasOwnProperty(h)&&h in Ue)return Me[o]=s[h];return o}var nt=Xe("animationend"),Qe=Xe("animationiteration"),ft=Xe("animationstart"),Tt=Xe("transitionrun"),Dt=Xe("transitionstart"),It=Xe("transitioncancel"),Lt=Xe("transitionend"),Gt=new Map,Mt="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Mt.push("scrollEnd");function jt(o,s){Gt.set(o,s),Xa(s,[o])}var Wt=typeof reportError=="function"?reportError:function(o){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var s=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof o=="object"&&o!==null&&typeof o.message=="string"?String(o.message):String(o),error:o});if(!window.dispatchEvent(s))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",o);return}console.error(o)},An=[],Ln=0,fn=0;function On(){for(var o=Ln,s=fn=Ln=0;s<o;){var h=An[s];An[s++]=null;var y=An[s];An[s++]=null;var C=An[s];An[s++]=null;var T=An[s];if(An[s++]=null,y!==null&&C!==null){var q=y.pending;q===null?C.next=C:(C.next=q.next,q.next=C),y.pending=C}T!==0&&Aa(h,C,T)}}function gi(o,s,h,y){An[Ln++]=o,An[Ln++]=s,An[Ln++]=h,An[Ln++]=y,fn|=y,o.lanes|=y,o=o.alternate,o!==null&&(o.lanes|=y)}function Ea(o,s,h,y){return gi(o,s,h,y),Lr(o)}function li(o,s){return gi(o,null,null,s),Lr(o)}function Aa(o,s,h){o.lanes|=h;var y=o.alternate;y!==null&&(y.lanes|=h);for(var C=!1,T=o.return;T!==null;)T.childLanes|=h,y=T.alternate,y!==null&&(y.childLanes|=h),T.tag===22&&(o=T.stateNode,o===null||o._visibility&1||(C=!0)),o=T,T=T.return;return o.tag===3?(T=o.stateNode,C&&s!==null&&(C=31-Nt(h),o=T.hiddenUpdates,y=o[C],y===null?o[C]=[s]:y.push(s),s.lane=h|536870912),T):null}function Lr(o){if(50<of)throw of=0,um=null,Error(i(185));for(var s=o.return;s!==null;)o=s,s=o.return;return o.tag===3?o.stateNode:null}var ca={};function Ac(o,s,h,y){this.tag=o,this.key=h,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=s,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function La(o,s,h,y){return new Ac(o,s,h,y)}function $l(o){return o=o.prototype,!(!o||!o.isReactComponent)}function No(o,s){var h=o.alternate;return h===null?(h=La(o.tag,s,o.key,o.mode),h.elementType=o.elementType,h.type=o.type,h.stateNode=o.stateNode,h.alternate=o,o.alternate=h):(h.pendingProps=s,h.type=o.type,h.flags=0,h.subtreeFlags=0,h.deletions=null),h.flags=o.flags&65011712,h.childLanes=o.childLanes,h.lanes=o.lanes,h.child=o.child,h.memoizedProps=o.memoizedProps,h.memoizedState=o.memoizedState,h.updateQueue=o.updateQueue,s=o.dependencies,h.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext},h.sibling=o.sibling,h.index=o.index,h.ref=o.ref,h.refCleanup=o.refCleanup,h}function El(o,s){o.flags&=65011714;var h=o.alternate;return h===null?(o.childLanes=0,o.lanes=s,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=h.childLanes,o.lanes=h.lanes,o.child=h.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=h.memoizedProps,o.memoizedState=h.memoizedState,o.updateQueue=h.updateQueue,o.type=h.type,s=h.dependencies,o.dependencies=s===null?null:{lanes:s.lanes,firstContext:s.firstContext}),o}function ol(o,s,h,y,C,T){var q=0;if(y=o,typeof o=="function")$l(o)&&(q=1);else if(typeof o=="string")q=bA(o,h,ce.current)?26:o==="html"||o==="head"||o==="body"?27:5;else e:switch(o){case G:return o=La(31,h,s,C),o.elementType=G,o.lanes=T,o;case M:return $s(h.children,C,T,s);case k:q=8,C|=24;break;case I:return o=La(12,h,s,C|2),o.elementType=I,o.lanes=T,o;case ee:return o=La(13,h,s,C),o.elementType=ee,o.lanes=T,o;case ue:return o=La(19,h,s,C),o.elementType=ue,o.lanes=T,o;default:if(typeof o=="object"&&o!==null)switch(o.$$typeof){case B:q=10;break e;case Y:q=9;break e;case V:q=11;break e;case _e:q=14;break e;case fe:q=16,y=null;break e}q=29,h=Error(i(130,o===null?"null":typeof o,"")),y=null}return s=La(q,h,s,C),s.elementType=o,s.type=y,s.lanes=T,s}function $s(o,s,h,y){return o=La(7,o,y,s),o.lanes=h,o}function Al(o,s,h){return o=La(6,o,null,s),o.lanes=h,o}function Jl(o){var s=La(18,null,null,0);return s.stateNode=o,s}function Ll(o,s,h){return s=La(4,o.children!==null?o.children:[],o.key,s),s.lanes=h,s.stateNode={containerInfo:o.containerInfo,pendingChildren:null,implementation:o.implementation},s}var c=new WeakMap;function v(o,s){if(typeof o=="object"&&o!==null){var h=c.get(o);return h!==void 0?h:(s={value:o,source:s,stack:dn(s)},c.set(o,s),s)}return{value:o,source:s,stack:dn(s)}}var S=[],N=0,U=null,re=0,ke=[],$e=0,ot=null,bt=1,Ft="";function an(o,s){S[N++]=re,S[N++]=U,U=o,re=s}function $n(o,s,h){ke[$e++]=bt,ke[$e++]=Ft,ke[$e++]=ot,ot=o;var y=bt;o=Ft;var C=32-Nt(y)-1;y&=~(1<<C),h+=1;var T=32-Nt(s)+C;if(30<T){var q=C-C%5;T=(y&(1<<q)-1).toString(32),y>>=q,C-=q,bt=1<<32-Nt(s)+C|h<<C|y,Ft=T+o}else bt=1<<T|h<<C|y,Ft=o}function Ta(o){o.return!==null&&(an(o,1),$n(o,1,0))}function Tr(o){for(;o===U;)U=S[--N],S[N]=null,re=S[--N],S[N]=null;for(;o===ot;)ot=ke[--$e],ke[$e]=null,Ft=ke[--$e],ke[$e]=null,bt=ke[--$e],ke[$e]=null}function Do(o,s){ke[$e++]=bt,ke[$e++]=Ft,ke[$e++]=ot,bt=s.id,Ft=s.overflow,ot=o}var Li=null,Ti=null,ci=!1,ao=null,Sr=!1,qo=Error(i(519));function Js(o){var s=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Tl(v(s,o)),qo}function Lc(o){var s=o.stateNode,h=o.type,y=o.memoizedProps;switch(s[ti]=o,s[bi]=y,h){case"dialog":vi("cancel",s),vi("close",s);break;case"iframe":case"object":case"embed":vi("load",s);break;case"video":case"audio":for(h=0;h<lf.length;h++)vi(lf[h],s);break;case"source":vi("error",s);break;case"img":case"image":case"link":vi("error",s),vi("load",s);break;case"details":vi("toggle",s);break;case"input":vi("invalid",s),ns(s,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0);break;case"select":vi("invalid",s);break;case"textarea":vi("invalid",s),go(s,y.value,y.defaultValue,y.children)}h=y.children,typeof h!="string"&&typeof h!="number"&&typeof h!="bigint"||s.textContent===""+h||y.suppressHydrationWarning===!0||w1(s.textContent,h)?(y.popover!=null&&(vi("beforetoggle",s),vi("toggle",s)),y.onScroll!=null&&vi("scroll",s),y.onScrollEnd!=null&&vi("scrollend",s),y.onClick!=null&&(s.onclick=Vr),s=!0):s=!1,s||Js(o,!0)}function Ui(o){for(Li=o.return;Li;)switch(Li.tag){case 5:case 31:case 13:Sr=!1;return;case 27:case 3:Sr=!0;return;default:Li=Li.return}}function Ir(o){if(o!==Li)return!1;if(!ci)return Ui(o),ci=!0,!1;var s=o.tag,h;if((h=s!==3&&s!==27)&&((h=s===5)&&(h=o.type,h=!(h!=="form"&&h!=="button")||Em(o.type,o.memoizedProps)),h=!h),h&&Ti&&Js(o),Ui(o),s===13){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Ti=R1(o)}else if(s===31){if(o=o.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(317));Ti=R1(o)}else s===27?(s=Ti,Uc(o.type)?(o=km,km=null,Ti=o):Ti=s):Ti=Li?nl(o.stateNode.nextSibling):null;return!0}function sl(){Ti=Li=null,ci=!1}function ou(){var o=ao;return o!==null&&(Cs===null?Cs=o:Cs.push.apply(Cs,o),ao=null),o}function Tl(o){ao===null?ao=[o]:ao.push(o)}var jl=ne(null),Us=null,ys=null;function kl(o,s,h){te(jl,s._currentValue),s._currentValue=h}function xs(o){o._currentValue=jl.current,H(jl)}function Tc(o,s,h){for(;o!==null;){var y=o.alternate;if((o.childLanes&s)!==s?(o.childLanes|=s,y!==null&&(y.childLanes|=s)):y!==null&&(y.childLanes&s)!==s&&(y.childLanes|=s),o===h)break;o=o.return}}function ec(o,s,h,y){var C=o.child;for(C!==null&&(C.return=o);C!==null;){var T=C.dependencies;if(T!==null){var q=C.child;T=T.firstContext;e:for(;T!==null;){var le=T;T=C;for(var Oe=0;Oe<s.length;Oe++)if(le.context===s[Oe]){T.lanes|=h,le=T.alternate,le!==null&&(le.lanes|=h),Tc(T.return,h,o),y||(q=null);break e}T=le.next}}else if(C.tag===18){if(q=C.return,q===null)throw Error(i(341));q.lanes|=h,T=q.alternate,T!==null&&(T.lanes|=h),Tc(q,h,o),q=null}else q=C.child;if(q!==null)q.return=C;else for(q=C;q!==null;){if(q===o){q=null;break}if(C=q.sibling,C!==null){C.return=q.return,q=C;break}q=q.return}C=q}}function Rl(o,s,h,y){o=null;for(var C=s,T=!1;C!==null;){if(!T){if((C.flags&524288)!==0)T=!0;else if((C.flags&262144)!==0)break}if(C.tag===10){var q=C.alternate;if(q===null)throw Error(i(387));if(q=q.memoizedProps,q!==null){var le=C.type;vr(C.pendingProps.value,q.value)||(o!==null?o.push(le):o=[le])}}else if(C===Te.current){if(q=C.alternate,q===null)throw Error(i(387));q.memoizedState.memoizedState!==C.memoizedState.memoizedState&&(o!==null?o.push(hf):o=[hf])}C=C.return}o!==null&&ec(s,o,h,y),s.flags|=262144}function Fu(o){for(o=o.firstContext;o!==null;){if(!vr(o.context._currentValue,o.memoizedValue))return!0;o=o.next}return!1}function Nl(o){Us=o,ys=null,o=o.dependencies,o!==null&&(o.firstContext=null)}function oo(o){return rh(Us,o)}function Uu(o,s){return Us===null&&Nl(o),rh(o,s)}function rh(o,s){var h=s._currentValue;if(s={context:s,memoizedValue:h,next:null},ys===null){if(o===null)throw Error(i(308));ys=s,o.dependencies={lanes:0,firstContext:s},o.flags|=524288}else ys=ys.next=s;return h}var jg=typeof AbortController<"u"?AbortController:function(){var o=[],s=this.signal={aborted:!1,addEventListener:function(h,y){o.push(y)}};this.abort=function(){s.aborted=!0,o.forEach(function(h){return h()})}},kg=t.unstable_scheduleCallback,Rg=t.unstable_NormalPriority,$r={$$typeof:B,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function jc(){return{controller:new jg,data:new Map,refCount:0}}function su(o){o.refCount--,o.refCount===0&&kg(Rg,function(){o.controller.abort()})}var lu=null,Hu=0,b=0,E=null;function O(o,s){if(lu===null){var h=lu=[];Hu=0,b=mm(),E={status:"pending",value:void 0,then:function(y){h.push(y)}}}return Hu++,s.then(F,F),s}function F(){if(--Hu===0&&lu!==null){E!==null&&(E.status="fulfilled");var o=lu;lu=null,b=0,E=null;for(var s=0;s<o.length;s++)(0,o[s])()}}function X(o,s){var h=[],y={status:"pending",value:null,reason:null,then:function(C){h.push(C)}};return o.then(function(){y.status="fulfilled",y.value=s;for(var C=0;C<h.length;C++)(0,h[C])(s)},function(C){for(y.status="rejected",y.reason=C,C=0;C<h.length;C++)(0,h[C])(void 0)}),y}var ie=oe.S;oe.S=function(o,s){Vx=xn(),typeof s=="object"&&s!==null&&typeof s.then=="function"&&O(o,s),ie!==null&&ie(o,s)};var se=ne(null);function pe(){var o=se.current;return o!==null?o:xr.pooledCache}function ve(o,s){s===null?te(se,se.current):te(se,s.pool)}function Ae(){var o=pe();return o===null?null:{parent:$r._currentValue,pool:o}}var qe=Error(i(460)),it=Error(i(474)),Ce=Error(i(542)),Ve={then:function(){}};function et(o){return o=o.status,o==="fulfilled"||o==="rejected"}function pt(o,s,h){switch(h=o[h],h===void 0?o.push(s):h!==s&&(s.then(Vr,Vr),s=h),s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Rt(o),o;default:if(typeof s.status=="string")s.then(Vr,Vr);else{if(o=xr,o!==null&&100<o.shellSuspendCounter)throw Error(i(482));o=s,o.status="pending",o.then(function(y){if(s.status==="pending"){var C=s;C.status="fulfilled",C.value=y}},function(y){if(s.status==="pending"){var C=s;C.status="rejected",C.reason=y}})}switch(s.status){case"fulfilled":return s.value;case"rejected":throw o=s.reason,Rt(o),o}throw ht=s,qe}}function tt(o){try{var s=o._init;return s(o._payload)}catch(h){throw h!==null&&typeof h=="object"&&typeof h.then=="function"?(ht=h,qe):h}}var ht=null;function xt(){if(ht===null)throw Error(i(459));var o=ht;return ht=null,o}function Rt(o){if(o===qe||o===Ce)throw Error(i(483))}var Et=null,cn=0;function Xt(o){var s=cn;return cn+=1,Et===null&&(Et=[]),pt(Et,o,s)}function qn(o,s){s=s.props.ref,o.ref=s!==void 0?s:null}function rn(o,s){throw s.$$typeof===A?Error(i(525)):(o=Object.prototype.toString.call(s),Error(i(31,o==="[object Object]"?"object with keys {"+Object.keys(s).join(", ")+"}":o)))}function fi(o){function s(Je,We){if(o){var rt=Je.deletions;rt===null?(Je.deletions=[We],Je.flags|=16):rt.push(We)}}function h(Je,We){if(!o)return null;for(;We!==null;)s(Je,We),We=We.sibling;return null}function y(Je){for(var We=new Map;Je!==null;)Je.key!==null?We.set(Je.key,Je):We.set(Je.index,Je),Je=Je.sibling;return We}function C(Je,We){return Je=No(Je,We),Je.index=0,Je.sibling=null,Je}function T(Je,We,rt){return Je.index=rt,o?(rt=Je.alternate,rt!==null?(rt=rt.index,rt<We?(Je.flags|=67108866,We):rt):(Je.flags|=67108866,We)):(Je.flags|=1048576,We)}function q(Je){return o&&Je.alternate===null&&(Je.flags|=67108866),Je}function le(Je,We,rt,_t){return We===null||We.tag!==6?(We=Al(rt,Je.mode,_t),We.return=Je,We):(We=C(We,rt),We.return=Je,We)}function Oe(Je,We,rt,_t){var wn=rt.type;return wn===M?yt(Je,We,rt.props.children,_t,rt.key):We!==null&&(We.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===fe&&tt(wn)===We.type)?(We=C(We,rt.props),qn(We,rt),We.return=Je,We):(We=ol(rt.type,rt.key,rt.props,null,Je.mode,_t),qn(We,rt),We.return=Je,We)}function at(Je,We,rt,_t){return We===null||We.tag!==4||We.stateNode.containerInfo!==rt.containerInfo||We.stateNode.implementation!==rt.implementation?(We=Ll(rt,Je.mode,_t),We.return=Je,We):(We=C(We,rt.children||[]),We.return=Je,We)}function yt(Je,We,rt,_t,wn){return We===null||We.tag!==7?(We=$s(rt,Je.mode,_t,wn),We.return=Je,We):(We=C(We,rt),We.return=Je,We)}function St(Je,We,rt){if(typeof We=="string"&&We!==""||typeof We=="number"||typeof We=="bigint")return We=Al(""+We,Je.mode,rt),We.return=Je,We;if(typeof We=="object"&&We!==null){switch(We.$$typeof){case x:return rt=ol(We.type,We.key,We.props,null,Je.mode,rt),qn(rt,We),rt.return=Je,rt;case R:return We=Ll(We,Je.mode,rt),We.return=Je,We;case fe:return We=tt(We),St(Je,We,rt)}if(Ye(We)||J(We))return We=$s(We,Je.mode,rt,null),We.return=Je,We;if(typeof We.then=="function")return St(Je,Xt(We),rt);if(We.$$typeof===B)return St(Je,Uu(Je,We),rt);rn(Je,We)}return null}function st(Je,We,rt,_t){var wn=We!==null?We.key:null;if(typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint")return wn!==null?null:le(Je,We,""+rt,_t);if(typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case x:return rt.key===wn?Oe(Je,We,rt,_t):null;case R:return rt.key===wn?at(Je,We,rt,_t):null;case fe:return rt=tt(rt),st(Je,We,rt,_t)}if(Ye(rt)||J(rt))return wn!==null?null:yt(Je,We,rt,_t,null);if(typeof rt.then=="function")return st(Je,We,Xt(rt),_t);if(rt.$$typeof===B)return st(Je,We,Uu(Je,rt),_t);rn(Je,rt)}return null}function ct(Je,We,rt,_t,wn){if(typeof _t=="string"&&_t!==""||typeof _t=="number"||typeof _t=="bigint")return Je=Je.get(rt)||null,le(We,Je,""+_t,wn);if(typeof _t=="object"&&_t!==null){switch(_t.$$typeof){case x:return Je=Je.get(_t.key===null?rt:_t.key)||null,Oe(We,Je,_t,wn);case R:return Je=Je.get(_t.key===null?rt:_t.key)||null,at(We,Je,_t,wn);case fe:return _t=tt(_t),ct(Je,We,rt,_t,wn)}if(Ye(_t)||J(_t))return Je=Je.get(rt)||null,yt(We,Je,_t,wn,null);if(typeof _t.then=="function")return ct(Je,We,rt,Xt(_t),wn);if(_t.$$typeof===B)return ct(Je,We,rt,Uu(We,_t),wn);rn(We,_t)}return null}function on(Je,We,rt,_t){for(var wn=null,Hi=null,pn=We,ii=We=0,wi=null;pn!==null&&ii<rt.length;ii++){pn.index>ii?(wi=pn,pn=null):wi=pn.sibling;var qi=st(Je,pn,rt[ii],_t);if(qi===null){pn===null&&(pn=wi);break}o&&pn&&qi.alternate===null&&s(Je,pn),We=T(qi,We,ii),Hi===null?wn=qi:Hi.sibling=qi,Hi=qi,pn=wi}if(ii===rt.length)return h(Je,pn),ci&&an(Je,ii),wn;if(pn===null){for(;ii<rt.length;ii++)pn=St(Je,rt[ii],_t),pn!==null&&(We=T(pn,We,ii),Hi===null?wn=pn:Hi.sibling=pn,Hi=pn);return ci&&an(Je,ii),wn}for(pn=y(pn);ii<rt.length;ii++)wi=ct(pn,Je,ii,rt[ii],_t),wi!==null&&(o&&wi.alternate!==null&&pn.delete(wi.key===null?ii:wi.key),We=T(wi,We,ii),Hi===null?wn=wi:Hi.sibling=wi,Hi=wi);return o&&pn.forEach(function(Vc){return s(Je,Vc)}),ci&&an(Je,ii),wn}function Rn(Je,We,rt,_t){if(rt==null)throw Error(i(151));for(var wn=null,Hi=null,pn=We,ii=We=0,wi=null,qi=rt.next();pn!==null&&!qi.done;ii++,qi=rt.next()){pn.index>ii?(wi=pn,pn=null):wi=pn.sibling;var Vc=st(Je,pn,qi.value,_t);if(Vc===null){pn===null&&(pn=wi);break}o&&pn&&Vc.alternate===null&&s(Je,pn),We=T(Vc,We,ii),Hi===null?wn=Vc:Hi.sibling=Vc,Hi=Vc,pn=wi}if(qi.done)return h(Je,pn),ci&&an(Je,ii),wn;if(pn===null){for(;!qi.done;ii++,qi=rt.next())qi=St(Je,qi.value,_t),qi!==null&&(We=T(qi,We,ii),Hi===null?wn=qi:Hi.sibling=qi,Hi=qi);return ci&&an(Je,ii),wn}for(pn=y(pn);!qi.done;ii++,qi=rt.next())qi=ct(pn,Je,ii,qi.value,_t),qi!==null&&(o&&qi.alternate!==null&&pn.delete(qi.key===null?ii:qi.key),We=T(qi,We,ii),Hi===null?wn=qi:Hi.sibling=qi,Hi=qi);return o&&pn.forEach(function(RA){return s(Je,RA)}),ci&&an(Je,ii),wn}function fr(Je,We,rt,_t){if(typeof rt=="object"&&rt!==null&&rt.type===M&&rt.key===null&&(rt=rt.props.children),typeof rt=="object"&&rt!==null){switch(rt.$$typeof){case x:e:{for(var wn=rt.key;We!==null;){if(We.key===wn){if(wn=rt.type,wn===M){if(We.tag===7){h(Je,We.sibling),_t=C(We,rt.props.children),_t.return=Je,Je=_t;break e}}else if(We.elementType===wn||typeof wn=="object"&&wn!==null&&wn.$$typeof===fe&&tt(wn)===We.type){h(Je,We.sibling),_t=C(We,rt.props),qn(_t,rt),_t.return=Je,Je=_t;break e}h(Je,We);break}else s(Je,We);We=We.sibling}rt.type===M?(_t=$s(rt.props.children,Je.mode,_t,rt.key),_t.return=Je,Je=_t):(_t=ol(rt.type,rt.key,rt.props,null,Je.mode,_t),qn(_t,rt),_t.return=Je,Je=_t)}return q(Je);case R:e:{for(wn=rt.key;We!==null;){if(We.key===wn)if(We.tag===4&&We.stateNode.containerInfo===rt.containerInfo&&We.stateNode.implementation===rt.implementation){h(Je,We.sibling),_t=C(We,rt.children||[]),_t.return=Je,Je=_t;break e}else{h(Je,We);break}else s(Je,We);We=We.sibling}_t=Ll(rt,Je.mode,_t),_t.return=Je,Je=_t}return q(Je);case fe:return rt=tt(rt),fr(Je,We,rt,_t)}if(Ye(rt))return on(Je,We,rt,_t);if(J(rt)){if(wn=J(rt),typeof wn!="function")throw Error(i(150));return rt=wn.call(rt),Rn(Je,We,rt,_t)}if(typeof rt.then=="function")return fr(Je,We,Xt(rt),_t);if(rt.$$typeof===B)return fr(Je,We,Uu(Je,rt),_t);rn(Je,rt)}return typeof rt=="string"&&rt!==""||typeof rt=="number"||typeof rt=="bigint"?(rt=""+rt,We!==null&&We.tag===6?(h(Je,We.sibling),_t=C(We,rt),_t.return=Je,Je=_t):(h(Je,We),_t=Al(rt,Je.mode,_t),_t.return=Je,Je=_t),q(Je)):h(Je,We)}return function(Je,We,rt,_t){try{cn=0;var wn=fr(Je,We,rt,_t);return Et=null,wn}catch(pn){if(pn===qe||pn===Ce)throw pn;var Hi=La(29,pn,null,Je.mode);return Hi.lanes=_t,Hi.return=Je,Hi}}}var yr=fi(!0),Yn=fi(!1),Qt=!1;function qt(o){o.updateQueue={baseState:o.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function jr(o,s){o=o.updateQueue,s.updateQueue===o&&(s.updateQueue={baseState:o.baseState,firstBaseUpdate:o.firstBaseUpdate,lastBaseUpdate:o.lastBaseUpdate,shared:o.shared,callbacks:null})}function Tn(o){return{lane:o,tag:0,payload:null,callback:null,next:null}}function Jn(o,s,h){var y=o.updateQueue;if(y===null)return null;if(y=y.shared,(Yi&2)!==0){var C=y.pending;return C===null?s.next=s:(s.next=C.next,C.next=s),y.pending=s,s=Lr(o),Aa(o,null,h),s}return gi(o,y,s,h),Lr(o)}function Gi(o,s,h){if(s=s.updateQueue,s!==null&&(s=s.shared,(h&4194048)!==0)){var y=s.lanes;y&=o.pendingLanes,h|=y,s.lanes=h,ei(o,h)}}function ja(o,s){var h=o.updateQueue,y=o.alternate;if(y!==null&&(y=y.updateQueue,h===y)){var C=null,T=null;if(h=h.firstBaseUpdate,h!==null){do{var q={lane:h.lane,tag:h.tag,payload:h.payload,callback:null,next:null};T===null?C=T=q:T=T.next=q,h=h.next}while(h!==null);T===null?C=T=s:T=T.next=s}else C=T=s;h={baseState:y.baseState,firstBaseUpdate:C,lastBaseUpdate:T,shared:y.shared,callbacks:y.callbacks},o.updateQueue=h;return}o=h.lastBaseUpdate,o===null?h.firstBaseUpdate=s:o.next=s,h.lastBaseUpdate=s}var so=!1;function cr(){if(so){var o=E;if(o!==null)throw o}}function ua(o,s,h,y){so=!1;var C=o.updateQueue;Qt=!1;var T=C.firstBaseUpdate,q=C.lastBaseUpdate,le=C.shared.pending;if(le!==null){C.shared.pending=null;var Oe=le,at=Oe.next;Oe.next=null,q===null?T=at:q.next=at,q=Oe;var yt=o.alternate;yt!==null&&(yt=yt.updateQueue,le=yt.lastBaseUpdate,le!==q&&(le===null?yt.firstBaseUpdate=at:le.next=at,yt.lastBaseUpdate=Oe))}if(T!==null){var St=C.baseState;q=0,yt=at=Oe=null,le=T;do{var st=le.lane&-536870913,ct=st!==le.lane;if(ct?(_i&st)===st:(y&st)===st){st!==0&&st===b&&(so=!0),yt!==null&&(yt=yt.next={lane:0,tag:le.tag,payload:le.payload,callback:null,next:null});e:{var on=o,Rn=le;st=s;var fr=h;switch(Rn.tag){case 1:if(on=Rn.payload,typeof on=="function"){St=on.call(fr,St,st);break e}St=on;break e;case 3:on.flags=on.flags&-65537|128;case 0:if(on=Rn.payload,st=typeof on=="function"?on.call(fr,St,st):on,st==null)break e;St=_({},St,st);break e;case 2:Qt=!0}}st=le.callback,st!==null&&(o.flags|=64,ct&&(o.flags|=8192),ct=C.callbacks,ct===null?C.callbacks=[st]:ct.push(st))}else ct={lane:st,tag:le.tag,payload:le.payload,callback:le.callback,next:null},yt===null?(at=yt=ct,Oe=St):yt=yt.next=ct,q|=st;if(le=le.next,le===null){if(le=C.shared.pending,le===null)break;ct=le,le=ct.next,ct.next=null,C.lastBaseUpdate=ct,C.shared.pending=null}}while(!0);yt===null&&(Oe=St),C.baseState=Oe,C.firstBaseUpdate=at,C.lastBaseUpdate=yt,T===null&&(C.shared.lanes=0),Pc|=q,o.lanes=q,o.memoizedState=St}}function _o(o,s){if(typeof o!="function")throw Error(i(191,o));o.call(s)}function da(o,s){var h=o.callbacks;if(h!==null)for(o.callbacks=null,o=0;o<h.length;o++)_o(h[o],s)}var oi=ne(null),ji=ne(0);function kr(o,s){o=uc,te(ji,o),te(oi,s),uc=o|s.baseLanes}function Oi(){te(ji,uc),te(oi,oi.current)}function ka(){uc=ji.current,H(oi),H(ji)}var Rr=ne(null),ki=null;function Jr(o){var s=o.alternate;te(Ci,Ci.current&1),te(Rr,o),ki===null&&(s===null||oi.current!==null||s.memoizedState!==null)&&(ki=o)}function Vi(o){te(Ci,Ci.current),te(Rr,o),ki===null&&(ki=o)}function fa(o){o.tag===22?(te(Ci,Ci.current),te(Rr,o),ki===null&&(ki=o)):ha()}function ha(){te(Ci,Ci.current),te(Rr,Rr.current)}function $i(o){H(Rr),ki===o&&(ki=null),H(Ci)}var Ci=ne(0);function wo(o){for(var s=o;s!==null;){if(s.tag===13){var h=s.memoizedState;if(h!==null&&(h=h.dehydrated,h===null||Tm(h)||jm(h)))return s}else if(s.tag===19&&(s.memoizedProps.revealOrder==="forwards"||s.memoizedProps.revealOrder==="backwards"||s.memoizedProps.revealOrder==="unstable_legacy-backwards"||s.memoizedProps.revealOrder==="together")){if((s.flags&128)!==0)return s}else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return null;s=s.return}s.sibling.return=s.return,s=s.sibling}return null}var zr=0,bn=null,_n=null,Ri=null,Wo=!1,bs=!1,Mo=!1,pa=0,Dl=0,Ml=null,qu=0;function ur(){throw Error(i(321))}function Ud(o,s){if(s===null)return!1;for(var h=0;h<s.length&&h<o.length;h++)if(!vr(o[h],s[h]))return!1;return!0}function Hd(o,s,h,y,C,T){return zr=T,bn=s,s.memoizedState=null,s.updateQueue=null,s.lanes=0,oe.H=o===null||o.memoizedState===null?ix:Bg,Mo=!1,T=h(y,C),Mo=!1,bs&&(T=ll(s,h,y,C)),Wu(o),T}function Wu(o){oe.H=Xd;var s=_n!==null&&_n.next!==null;if(zr=0,Ri=_n=bn=null,Wo=!1,Dl=0,Ml=null,s)throw Error(i(300));o===null||Wa||(o=o.dependencies,o!==null&&Fu(o)&&(Wa=!0))}function ll(o,s,h,y){bn=o;var C=0;do{if(bs&&(Ml=null),Dl=0,bs=!1,25<=C)throw Error(i(301));if(C+=1,Ri=_n=null,o.updateQueue!=null){var T=o.updateQueue;T.lastEffect=null,T.events=null,T.stores=null,T.memoCache!=null&&(T.memoCache.index=0)}oe.H=rx,T=s(h,y)}while(bs);return T}function Ng(){var o=oe.H,s=o.useState()[0];return s=typeof s.then=="function"?Ol(s):s,o=o.useState()[0],(_n!==null?_n.memoizedState:null)!==o&&(bn.flags|=1024),s}function qd(){var o=pa!==0;return pa=0,o}function Wd(o,s,h){s.updateQueue=o.updateQueue,s.flags&=-2053,o.lanes&=~h}function Gu(o){if(Wo){for(o=o.memoizedState;o!==null;){var s=o.queue;s!==null&&(s.pending=null),o=o.next}Wo=!1}zr=0,Ri=_n=bn=null,bs=!1,Dl=pa=0,Ml=null}function qa(){var o={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ri===null?bn.memoizedState=Ri=o:Ri=Ri.next=o,Ri}function Br(){if(_n===null){var o=bn.alternate;o=o!==null?o.memoizedState:null}else o=_n.next;var s=Ri===null?bn.memoizedState:Ri.next;if(s!==null)Ri=s,_n=o;else{if(o===null)throw bn.alternate===null?Error(i(467)):Error(i(310));_n=o,o={memoizedState:_n.memoizedState,baseState:_n.baseState,baseQueue:_n.baseQueue,queue:_n.queue,next:null},Ri===null?bn.memoizedState=Ri=o:Ri=Ri.next=o}return Ri}function cu(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ol(o){var s=Dl;return Dl+=1,Ml===null&&(Ml=[]),o=pt(Ml,o,s),s=bn,(Ri===null?s.memoizedState:Ri.next)===null&&(s=s.alternate,oe.H=s===null||s.memoizedState===null?ix:Bg),o}function kc(o){if(o!==null&&typeof o=="object"){if(typeof o.then=="function")return Ol(o);if(o.$$typeof===B)return oo(o)}throw Error(i(438,String(o)))}function tc(o){var s=null,h=bn.updateQueue;if(h!==null&&(s=h.memoCache),s==null){var y=bn.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(s={data:y.data.map(function(C){return C.slice()}),index:0})))}if(s==null&&(s={data:[],index:0}),h===null&&(h=cu(),bn.updateQueue=h),h.memoCache=s,h=s.data[s.index],h===void 0)for(h=s.data[s.index]=Array(o),y=0;y<o;y++)h[y]=me;return s.index++,h}function el(o,s){return typeof s=="function"?s(o):s}function Vu(o){var s=Br();return Rc(s,_n,o)}function Rc(o,s,h){var y=o.queue;if(y===null)throw Error(i(311));y.lastRenderedReducer=h;var C=o.baseQueue,T=y.pending;if(T!==null){if(C!==null){var q=C.next;C.next=T.next,T.next=q}s.baseQueue=C=T,y.pending=null}if(T=o.baseState,C===null)o.memoizedState=T;else{s=C.next;var le=q=null,Oe=null,at=s,yt=!1;do{var St=at.lane&-536870913;if(St!==at.lane?(_i&St)===St:(zr&St)===St){var st=at.revertLane;if(st===0)Oe!==null&&(Oe=Oe.next={lane:0,revertLane:0,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null}),St===b&&(yt=!0);else if((zr&st)===st){at=at.next,st===b&&(yt=!0);continue}else St={lane:0,revertLane:at.revertLane,gesture:null,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Oe===null?(le=Oe=St,q=T):Oe=Oe.next=St,bn.lanes|=st,Pc|=st;St=at.action,Mo&&h(T,St),T=at.hasEagerState?at.eagerState:h(T,St)}else st={lane:St,revertLane:at.revertLane,gesture:at.gesture,action:at.action,hasEagerState:at.hasEagerState,eagerState:at.eagerState,next:null},Oe===null?(le=Oe=st,q=T):Oe=Oe.next=st,bn.lanes|=St,Pc|=St;at=at.next}while(at!==null&&at!==s);if(Oe===null?q=T:Oe.next=le,!vr(T,o.memoizedState)&&(Wa=!0,yt&&(h=E,h!==null)))throw h;o.memoizedState=T,o.baseState=q,o.baseQueue=Oe,y.lastRenderedState=T}return C===null&&(y.lanes=0),[o.memoizedState,y.dispatch]}function Yu(o){var s=Br(),h=s.queue;if(h===null)throw Error(i(311));h.lastRenderedReducer=o;var y=h.dispatch,C=h.pending,T=s.memoizedState;if(C!==null){h.pending=null;var q=C=C.next;do T=o(T,q.action),q=q.next;while(q!==C);vr(T,s.memoizedState)||(Wa=!0),s.memoizedState=T,s.baseQueue===null&&(s.baseState=T),h.lastRenderedState=T}return[T,y]}function Zu(o,s,h){var y=bn,C=Br(),T=ci;if(T){if(h===void 0)throw Error(i(407));h=h()}else h=s();var q=!vr((_n||C).memoizedState,h);if(q&&(C.memoizedState=h,Wa=!0),C=C.queue,Dg(Vd.bind(null,y,C,o),[o]),C.getSnapshot!==s||q||Ri!==null&&Ri.memoizedState.tag&1){if(y.flags|=2048,ic(9,{destroy:void 0},Gd.bind(null,y,C,h,s),null),xr===null)throw Error(i(349));T||(zr&127)!==0||cl(y,s,h)}return h}function cl(o,s,h){o.flags|=16384,o={getSnapshot:s,value:h},s=bn.updateQueue,s===null?(s=cu(),bn.updateQueue=s,s.stores=[o]):(h=s.stores,h===null?s.stores=[o]:h.push(o))}function Gd(o,s,h,y){s.value=h,s.getSnapshot=y,ah(s)&&Yd(o)}function Vd(o,s,h){return h(function(){ah(s)&&Yd(o)})}function ah(o){var s=o.getSnapshot;o=o.value;try{var h=s();return!vr(o,h)}catch{return!0}}function Yd(o){var s=li(o,2);s!==null&&Es(s,o,2)}function Pl(o){var s=qa();if(typeof o=="function"){var h=o;if(o=h(),Mo){gn(!0);try{h()}finally{gn(!1)}}}return s.memoizedState=s.baseState=o,s.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:o},s}function oh(o,s,h,y){return o.baseState=h,Rc(o,_n,typeof y=="function"?y:el)}function sh(o,s,h,y,C){if(dh(o))throw Error(i(485));if(o=s.action,o!==null){var T={payload:C,action:o,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(q){T.listeners.push(q)}};oe.T!==null?h(!0):T.isTransition=!1,y(T),h=s.pending,h===null?(T.next=s.pending=T,lh(s,T)):(T.next=h.next,s.pending=h.next=T)}}function lh(o,s){var h=s.action,y=s.payload,C=o.state;if(s.isTransition){var T=oe.T,q={};oe.T=q;try{var le=h(C,y),Oe=oe.S;Oe!==null&&Oe(q,le),Zd(o,s,le)}catch(at){nc(o,s,at)}finally{T!==null&&q.types!==null&&(T.types=q.types),oe.T=T}}else try{T=h(C,y),Zd(o,s,T)}catch(at){nc(o,s,at)}}function Zd(o,s,h){h!==null&&typeof h=="object"&&typeof h.then=="function"?h.then(function(y){ch(o,s,y)},function(y){return nc(o,s,y)}):ch(o,s,h)}function ch(o,s,h){s.status="fulfilled",s.value=h,Ku(s),o.state=h,s=o.pending,s!==null&&(h=s.next,h===s?o.pending=null:(h=h.next,s.next=h,lh(o,h)))}function nc(o,s,h){var y=o.pending;if(o.pending=null,y!==null){y=y.next;do s.status="rejected",s.reason=h,Ku(s),s=s.next;while(s!==y)}o.action=null}function Ku(o){o=o.listeners;for(var s=0;s<o.length;s++)(0,o[s])()}function uu(o,s){return s}function tl(o,s){if(ci){var h=xr.formState;if(h!==null){e:{var y=bn;if(ci){if(Ti){t:{for(var C=Ti,T=Sr;C.nodeType!==8;){if(!T){C=null;break t}if(C=nl(C.nextSibling),C===null){C=null;break t}}T=C.data,C=T==="F!"||T==="F"?C:null}if(C){Ti=nl(C.nextSibling),y=C.data==="F!";break e}}Js(y)}y=!1}y&&(s=h[0])}}return h=qa(),h.memoizedState=h.baseState=s,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:uu,lastRenderedState:s},h.queue=y,h=ex.bind(null,bn,y),y.dispatch=h,y=Pl(!1),T=zg.bind(null,bn,!1,y.queue),y=qa(),C={state:s,dispatch:null,action:o,pending:null},y.queue=C,h=sh.bind(null,bn,C,T,h),C.dispatch=h,y.memoizedState=o,[s,h,!1]}function ul(o){var s=Br();return dl(s,_n,o)}function dl(o,s,h){if(s=Rc(o,s,uu)[0],o=Vu(el)[0],typeof s=="object"&&s!==null&&typeof s.then=="function")try{var y=Ol(s)}catch(q){throw q===qe?Ce:q}else y=s;s=Br();var C=s.queue,T=C.dispatch;return h!==s.memoizedState&&(bn.flags|=2048,ic(9,{destroy:void 0},Xu.bind(null,C,h),null)),[y,T,o]}function Xu(o,s){o.action=s}function Qu(o){var s=Br(),h=_n;if(h!==null)return dl(s,h,o);Br(),s=s.memoizedState,h=Br();var y=h.queue.dispatch;return h.memoizedState=o,[s,y,!1]}function ic(o,s,h,y){return o={tag:o,create:h,deps:y,inst:s,next:null},s=bn.updateQueue,s===null&&(s=cu(),bn.updateQueue=s),h=s.lastEffect,h===null?s.lastEffect=o.next=o:(y=h.next,h.next=o,o.next=y,s.lastEffect=o),o}function uh(){return Br().memoizedState}function Nc(o,s,h,y){var C=qa();bn.flags|=o,C.memoizedState=ic(1|s,{destroy:void 0},h,y===void 0?null:y)}function Dc(o,s,h,y){var C=Br();y=y===void 0?null:y;var T=C.memoizedState.inst;_n!==null&&y!==null&&Ud(y,_n.memoizedState.deps)?C.memoizedState=ic(s,T,h,y):(bn.flags|=o,C.memoizedState=ic(1|s,T,h,y))}function F0(o,s){Nc(8390656,8,o,s)}function Dg(o,s){Dc(2048,8,o,s)}function EE(o){bn.flags|=4;var s=bn.updateQueue;if(s===null)s=cu(),bn.updateQueue=s,s.events=[o];else{var h=s.events;h===null?s.events=[o]:h.push(o)}}function U0(o){var s=Br().memoizedState;return EE({ref:s,nextImpl:o}),function(){if((Yi&2)!==0)throw Error(i(440));return s.impl.apply(void 0,arguments)}}function H0(o,s){return Dc(4,2,o,s)}function q0(o,s){return Dc(4,4,o,s)}function W0(o,s){if(typeof s=="function"){o=o();var h=s(o);return function(){typeof h=="function"?h():s(null)}}if(s!=null)return o=o(),s.current=o,function(){s.current=null}}function G0(o,s,h){h=h!=null?h.concat([o]):null,Dc(4,4,W0.bind(null,s,o),h)}function Mg(){}function V0(o,s){var h=Br();s=s===void 0?null:s;var y=h.memoizedState;return s!==null&&Ud(s,y[1])?y[0]:(h.memoizedState=[o,s],o)}function Y0(o,s){var h=Br();s=s===void 0?null:s;var y=h.memoizedState;if(s!==null&&Ud(s,y[1]))return y[0];if(y=o(),Mo){gn(!0);try{o()}finally{gn(!1)}}return h.memoizedState=[y,s],y}function Og(o,s,h){return h===void 0||(zr&1073741824)!==0&&(_i&261930)===0?o.memoizedState=s:(o.memoizedState=h,o=Zx(),bn.lanes|=o,Pc|=o,h)}function Z0(o,s,h,y){return vr(h,s)?h:oi.current!==null?(o=Og(o,h,y),vr(o,s)||(Wa=!0),o):(zr&42)===0||(zr&1073741824)!==0&&(_i&261930)===0?(Wa=!0,o.memoizedState=h):(o=Zx(),bn.lanes|=o,Pc|=o,s)}function K0(o,s,h,y,C){var T=ae.p;ae.p=T!==0&&8>T?T:8;var q=oe.T,le={};oe.T=le,zg(o,!1,s,h);try{var Oe=C(),at=oe.S;if(at!==null&&at(le,Oe),Oe!==null&&typeof Oe=="object"&&typeof Oe.then=="function"){var yt=X(Oe,y);Kd(o,s,yt,Ws(o))}else Kd(o,s,y,Ws(o))}catch(St){Kd(o,s,{then:function(){},status:"rejected",reason:St},Ws())}finally{ae.p=T,q!==null&&le.types!==null&&(q.types=le.types),oe.T=q}}function AE(){}function Pg(o,s,h,y){if(o.tag!==5)throw Error(i(476));var C=X0(o).queue;K0(o,C,s,he,h===null?AE:function(){return Q0(o),h(y)})}function X0(o){var s=o.memoizedState;if(s!==null)return s;s={memoizedState:he,baseState:he,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:he},next:null};var h={};return s.next={memoizedState:h,baseState:h,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:el,lastRenderedState:h},next:null},o.memoizedState=s,o=o.alternate,o!==null&&(o.memoizedState=s),s}function Q0(o){var s=X0(o);s.next===null&&(s=o.alternate.memoizedState),Kd(o,s.next.queue,{},Ws())}function Ig(){return oo(hf)}function $0(){return Br().memoizedState}function J0(){return Br().memoizedState}function LE(o){for(var s=o.return;s!==null;){switch(s.tag){case 24:case 3:var h=Ws();o=Tn(h);var y=Jn(s,o,h);y!==null&&(Es(y,s,h),Gi(y,s,h)),s={cache:jc()},o.payload=s;return}s=s.return}}function TE(o,s,h){var y=Ws();h={lane:y,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null},dh(o)?tx(s,h):(h=Ea(o,s,h,y),h!==null&&(Es(h,o,y),nx(h,s,y)))}function ex(o,s,h){var y=Ws();Kd(o,s,h,y)}function Kd(o,s,h,y){var C={lane:y,revertLane:0,gesture:null,action:h,hasEagerState:!1,eagerState:null,next:null};if(dh(o))tx(s,C);else{var T=o.alternate;if(o.lanes===0&&(T===null||T.lanes===0)&&(T=s.lastRenderedReducer,T!==null))try{var q=s.lastRenderedState,le=T(q,h);if(C.hasEagerState=!0,C.eagerState=le,vr(le,q))return gi(o,s,C,0),xr===null&&On(),!1}catch{}if(h=Ea(o,s,C,y),h!==null)return Es(h,o,y),nx(h,s,y),!0}return!1}function zg(o,s,h,y){if(y={lane:2,revertLane:mm(),gesture:null,action:y,hasEagerState:!1,eagerState:null,next:null},dh(o)){if(s)throw Error(i(479))}else s=Ea(o,h,y,2),s!==null&&Es(s,o,2)}function dh(o){var s=o.alternate;return o===bn||s!==null&&s===bn}function tx(o,s){bs=Wo=!0;var h=o.pending;h===null?s.next=s:(s.next=h.next,h.next=s),o.pending=s}function nx(o,s,h){if((h&4194048)!==0){var y=s.lanes;y&=o.pendingLanes,h|=y,s.lanes=h,ei(o,h)}}var Xd={readContext:oo,use:kc,useCallback:ur,useContext:ur,useEffect:ur,useImperativeHandle:ur,useLayoutEffect:ur,useInsertionEffect:ur,useMemo:ur,useReducer:ur,useRef:ur,useState:ur,useDebugValue:ur,useDeferredValue:ur,useTransition:ur,useSyncExternalStore:ur,useId:ur,useHostTransitionStatus:ur,useFormState:ur,useActionState:ur,useOptimistic:ur,useMemoCache:ur,useCacheRefresh:ur};Xd.useEffectEvent=ur;var ix={readContext:oo,use:kc,useCallback:function(o,s){return qa().memoizedState=[o,s===void 0?null:s],o},useContext:oo,useEffect:F0,useImperativeHandle:function(o,s,h){h=h!=null?h.concat([o]):null,Nc(4194308,4,W0.bind(null,s,o),h)},useLayoutEffect:function(o,s){return Nc(4194308,4,o,s)},useInsertionEffect:function(o,s){Nc(4,2,o,s)},useMemo:function(o,s){var h=qa();s=s===void 0?null:s;var y=o();if(Mo){gn(!0);try{o()}finally{gn(!1)}}return h.memoizedState=[y,s],y},useReducer:function(o,s,h){var y=qa();if(h!==void 0){var C=h(s);if(Mo){gn(!0);try{h(s)}finally{gn(!1)}}}else C=s;return y.memoizedState=y.baseState=C,o={pending:null,lanes:0,dispatch:null,lastRenderedReducer:o,lastRenderedState:C},y.queue=o,o=o.dispatch=TE.bind(null,bn,o),[y.memoizedState,o]},useRef:function(o){var s=qa();return o={current:o},s.memoizedState=o},useState:function(o){o=Pl(o);var s=o.queue,h=ex.bind(null,bn,s);return s.dispatch=h,[o.memoizedState,h]},useDebugValue:Mg,useDeferredValue:function(o,s){var h=qa();return Og(h,o,s)},useTransition:function(){var o=Pl(!1);return o=K0.bind(null,bn,o.queue,!0,!1),qa().memoizedState=o,[!1,o]},useSyncExternalStore:function(o,s,h){var y=bn,C=qa();if(ci){if(h===void 0)throw Error(i(407));h=h()}else{if(h=s(),xr===null)throw Error(i(349));(_i&127)!==0||cl(y,s,h)}C.memoizedState=h;var T={value:h,getSnapshot:s};return C.queue=T,F0(Vd.bind(null,y,T,o),[o]),y.flags|=2048,ic(9,{destroy:void 0},Gd.bind(null,y,T,h,s),null),h},useId:function(){var o=qa(),s=xr.identifierPrefix;if(ci){var h=Ft,y=bt;h=(y&~(1<<32-Nt(y)-1)).toString(32)+h,s="_"+s+"R_"+h,h=pa++,0<h&&(s+="H"+h.toString(32)),s+="_"}else h=qu++,s="_"+s+"r_"+h.toString(32)+"_";return o.memoizedState=s},useHostTransitionStatus:Ig,useFormState:tl,useActionState:tl,useOptimistic:function(o){var s=qa();s.memoizedState=s.baseState=o;var h={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return s.queue=h,s=zg.bind(null,bn,!0,h),h.dispatch=s,[o,s]},useMemoCache:tc,useCacheRefresh:function(){return qa().memoizedState=LE.bind(null,bn)},useEffectEvent:function(o){var s=qa(),h={impl:o};return s.memoizedState=h,function(){if((Yi&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}},Bg={readContext:oo,use:kc,useCallback:V0,useContext:oo,useEffect:Dg,useImperativeHandle:G0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:Y0,useReducer:Vu,useRef:uh,useState:function(){return Vu(el)},useDebugValue:Mg,useDeferredValue:function(o,s){var h=Br();return Z0(h,_n.memoizedState,o,s)},useTransition:function(){var o=Vu(el)[0],s=Br().memoizedState;return[typeof o=="boolean"?o:Ol(o),s]},useSyncExternalStore:Zu,useId:$0,useHostTransitionStatus:Ig,useFormState:ul,useActionState:ul,useOptimistic:function(o,s){var h=Br();return oh(h,_n,o,s)},useMemoCache:tc,useCacheRefresh:J0};Bg.useEffectEvent=U0;var rx={readContext:oo,use:kc,useCallback:V0,useContext:oo,useEffect:Dg,useImperativeHandle:G0,useInsertionEffect:H0,useLayoutEffect:q0,useMemo:Y0,useReducer:Yu,useRef:uh,useState:function(){return Yu(el)},useDebugValue:Mg,useDeferredValue:function(o,s){var h=Br();return _n===null?Og(h,o,s):Z0(h,_n.memoizedState,o,s)},useTransition:function(){var o=Yu(el)[0],s=Br().memoizedState;return[typeof o=="boolean"?o:Ol(o),s]},useSyncExternalStore:Zu,useId:$0,useHostTransitionStatus:Ig,useFormState:Qu,useActionState:Qu,useOptimistic:function(o,s){var h=Br();return _n!==null?oh(h,_n,o,s):(h.baseState=o,[o,h.queue.dispatch])},useMemoCache:tc,useCacheRefresh:J0};rx.useEffectEvent=U0;function Fg(o,s,h,y){s=o.memoizedState,h=h(y,s),h=h==null?s:_({},s,h),o.memoizedState=h,o.lanes===0&&(o.updateQueue.baseState=h)}var Ug={enqueueSetState:function(o,s,h){o=o._reactInternals;var y=Ws(),C=Tn(y);C.payload=s,h!=null&&(C.callback=h),s=Jn(o,C,y),s!==null&&(Es(s,o,y),Gi(s,o,y))},enqueueReplaceState:function(o,s,h){o=o._reactInternals;var y=Ws(),C=Tn(y);C.tag=1,C.payload=s,h!=null&&(C.callback=h),s=Jn(o,C,y),s!==null&&(Es(s,o,y),Gi(s,o,y))},enqueueForceUpdate:function(o,s){o=o._reactInternals;var h=Ws(),y=Tn(h);y.tag=2,s!=null&&(y.callback=s),s=Jn(o,y,h),s!==null&&(Es(s,o,h),Gi(s,o,h))}};function ax(o,s,h,y,C,T,q){return o=o.stateNode,typeof o.shouldComponentUpdate=="function"?o.shouldComponentUpdate(y,T,q):s.prototype&&s.prototype.isPureReactComponent?!w(h,y)||!w(C,T):!0}function ox(o,s,h,y){o=s.state,typeof s.componentWillReceiveProps=="function"&&s.componentWillReceiveProps(h,y),typeof s.UNSAFE_componentWillReceiveProps=="function"&&s.UNSAFE_componentWillReceiveProps(h,y),s.state!==o&&Ug.enqueueReplaceState(s,s.state,null)}function du(o,s){var h=s;if("ref"in s){h={};for(var y in s)y!=="ref"&&(h[y]=s[y])}if(o=o.defaultProps){h===s&&(h=_({},h));for(var C in o)h[C]===void 0&&(h[C]=o[C])}return h}function sx(o){Wt(o)}function lx(o){console.error(o)}function cx(o){Wt(o)}function fh(o,s){try{var h=o.onUncaughtError;h(s.value,{componentStack:s.stack})}catch(y){setTimeout(function(){throw y})}}function ux(o,s,h){try{var y=o.onCaughtError;y(h.value,{componentStack:h.stack,errorBoundary:s.tag===1?s.stateNode:null})}catch(C){setTimeout(function(){throw C})}}function Hg(o,s,h){return h=Tn(h),h.tag=3,h.payload={element:null},h.callback=function(){fh(o,s)},h}function dx(o){return o=Tn(o),o.tag=3,o}function fx(o,s,h,y){var C=h.type.getDerivedStateFromError;if(typeof C=="function"){var T=y.value;o.payload=function(){return C(T)},o.callback=function(){ux(s,h,y)}}var q=h.stateNode;q!==null&&typeof q.componentDidCatch=="function"&&(o.callback=function(){ux(s,h,y),typeof C!="function"&&(Ic===null?Ic=new Set([this]):Ic.add(this));var le=y.stack;this.componentDidCatch(y.value,{componentStack:le!==null?le:""})})}function jE(o,s,h,y,C){if(h.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(s=h.alternate,s!==null&&Rl(s,h,C,!0),h=Rr.current,h!==null){switch(h.tag){case 31:case 13:return ki===null?Ch():h.alternate===null&&ga===0&&(ga=3),h.flags&=-257,h.flags|=65536,h.lanes=C,y===Ve?h.flags|=16384:(s=h.updateQueue,s===null?h.updateQueue=new Set([y]):s.add(y),hm(o,y,C)),!1;case 22:return h.flags|=65536,y===Ve?h.flags|=16384:(s=h.updateQueue,s===null?(s={transitions:null,markerInstances:null,retryQueue:new Set([y])},h.updateQueue=s):(h=s.retryQueue,h===null?s.retryQueue=new Set([y]):h.add(y)),hm(o,y,C)),!1}throw Error(i(435,h.tag))}return hm(o,y,C),Ch(),!1}if(ci)return s=Rr.current,s!==null?((s.flags&65536)===0&&(s.flags|=256),s.flags|=65536,s.lanes=C,y!==qo&&(o=Error(i(422),{cause:y}),Tl(v(o,h)))):(y!==qo&&(s=Error(i(423),{cause:y}),Tl(v(s,h))),o=o.current.alternate,o.flags|=65536,C&=-C,o.lanes|=C,y=v(y,h),C=Hg(o.stateNode,y,C),ja(o,C),ga!==4&&(ga=2)),!1;var T=Error(i(520),{cause:y});if(T=v(T,h),af===null?af=[T]:af.push(T),ga!==4&&(ga=2),s===null)return!0;y=v(y,h),h=s;do{switch(h.tag){case 3:return h.flags|=65536,o=C&-C,h.lanes|=o,o=Hg(h.stateNode,y,o),ja(h,o),!1;case 1:if(s=h.type,T=h.stateNode,(h.flags&128)===0&&(typeof s.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(Ic===null||!Ic.has(T))))return h.flags|=65536,C&=-C,h.lanes|=C,C=dx(C),fx(C,o,h,y),ja(h,C),!1}h=h.return}while(h!==null);return!1}var qg=Error(i(461)),Wa=!1;function Oo(o,s,h,y){s.child=o===null?Yn(s,null,h,y):yr(s,o.child,h,y)}function hx(o,s,h,y,C){h=h.render;var T=s.ref;if("ref"in y){var q={};for(var le in y)le!=="ref"&&(q[le]=y[le])}else q=y;return Nl(s),y=Hd(o,s,h,q,T,C),le=qd(),o!==null&&!Wa?(Wd(o,s,C),rc(o,s,C)):(ci&&le&&Ta(s),s.flags|=1,Oo(o,s,y,C),s.child)}function px(o,s,h,y,C){if(o===null){var T=h.type;return typeof T=="function"&&!$l(T)&&T.defaultProps===void 0&&h.compare===null?(s.tag=15,s.type=T,gx(o,s,T,y,C)):(o=ol(h.type,null,y,s,s.mode,C),o.ref=s.ref,o.return=s,s.child=o)}if(T=o.child,!Qg(o,C)){var q=T.memoizedProps;if(h=h.compare,h=h!==null?h:w,h(q,y)&&o.ref===s.ref)return rc(o,s,C)}return s.flags|=1,o=No(T,y),o.ref=s.ref,o.return=s,s.child=o}function gx(o,s,h,y,C){if(o!==null){var T=o.memoizedProps;if(w(T,y)&&o.ref===s.ref)if(Wa=!1,s.pendingProps=y=T,Qg(o,C))(o.flags&131072)!==0&&(Wa=!0);else return s.lanes=o.lanes,rc(o,s,C)}return Wg(o,s,h,y,C)}function mx(o,s,h,y){var C=y.children,T=o!==null?o.memoizedState:null;if(o===null&&s.stateNode===null&&(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),y.mode==="hidden"){if((s.flags&128)!==0){if(T=T!==null?T.baseLanes|h:h,o!==null){for(y=s.child=o.child,C=0;y!==null;)C=C|y.lanes|y.childLanes,y=y.sibling;y=C&~T}else y=0,s.child=null;return vx(o,s,T,h,y)}if((h&536870912)!==0)s.memoizedState={baseLanes:0,cachePool:null},o!==null&&ve(s,T!==null?T.cachePool:null),T!==null?kr(s,T):Oi(),fa(s);else return y=s.lanes=536870912,vx(o,s,T!==null?T.baseLanes|h:h,h,y)}else T!==null?(ve(s,T.cachePool),kr(s,T),ha(),s.memoizedState=null):(o!==null&&ve(s,null),Oi(),ha());return Oo(o,s,C,h),s.child}function Qd(o,s){return o!==null&&o.tag===22||s.stateNode!==null||(s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),s.sibling}function vx(o,s,h,y,C){var T=pe();return T=T===null?null:{parent:$r._currentValue,pool:T},s.memoizedState={baseLanes:h,cachePool:T},o!==null&&ve(s,null),Oi(),fa(s),o!==null&&Rl(o,s,y,!0),s.childLanes=C,null}function hh(o,s){return s=gh({mode:s.mode,children:s.children},o.mode),s.ref=o.ref,o.child=s,s.return=o,s}function yx(o,s,h){return yr(s,o.child,null,h),o=hh(s,s.pendingProps),o.flags|=2,$i(s),s.memoizedState=null,o}function kE(o,s,h){var y=s.pendingProps,C=(s.flags&128)!==0;if(s.flags&=-129,o===null){if(ci){if(y.mode==="hidden")return o=hh(s,y),s.lanes=536870912,Qd(null,o);if(Vi(s),(o=Ti)?(o=k1(o,Sr),o=o!==null&&o.data==="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:ot!==null?{id:bt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},h=Jl(o),h.return=s,s.child=h,Li=s,Ti=null)):o=null,o===null)throw Js(s);return s.lanes=536870912,null}return hh(s,y)}var T=o.memoizedState;if(T!==null){var q=T.dehydrated;if(Vi(s),C)if(s.flags&256)s.flags&=-257,s=yx(o,s,h);else if(s.memoizedState!==null)s.child=o.child,s.flags|=128,s=null;else throw Error(i(558));else if(Wa||Rl(o,s,h,!1),C=(h&o.childLanes)!==0,Wa||C){if(y=xr,y!==null&&(q=xi(y,h),q!==0&&q!==T.retryLane))throw T.retryLane=q,li(o,q),Es(y,o,q),qg;Ch(),s=yx(o,s,h)}else o=T.treeContext,Ti=nl(q.nextSibling),Li=s,ci=!0,ao=null,Sr=!1,o!==null&&Do(s,o),s=hh(s,y),s.flags|=4096;return s}return o=No(o.child,{mode:y.mode,children:y.children}),o.ref=s.ref,s.child=o,o.return=s,o}function ph(o,s){var h=s.ref;if(h===null)o!==null&&o.ref!==null&&(s.flags|=4194816);else{if(typeof h!="function"&&typeof h!="object")throw Error(i(284));(o===null||o.ref!==h)&&(s.flags|=4194816)}}function Wg(o,s,h,y,C){return Nl(s),h=Hd(o,s,h,y,void 0,C),y=qd(),o!==null&&!Wa?(Wd(o,s,C),rc(o,s,C)):(ci&&y&&Ta(s),s.flags|=1,Oo(o,s,h,C),s.child)}function xx(o,s,h,y,C,T){return Nl(s),s.updateQueue=null,h=ll(s,y,h,C),Wu(o),y=qd(),o!==null&&!Wa?(Wd(o,s,T),rc(o,s,T)):(ci&&y&&Ta(s),s.flags|=1,Oo(o,s,h,T),s.child)}function bx(o,s,h,y,C){if(Nl(s),s.stateNode===null){var T=ca,q=h.contextType;typeof q=="object"&&q!==null&&(T=oo(q)),T=new h(y,T),s.memoizedState=T.state!==null&&T.state!==void 0?T.state:null,T.updater=Ug,s.stateNode=T,T._reactInternals=s,T=s.stateNode,T.props=y,T.state=s.memoizedState,T.refs={},qt(s),q=h.contextType,T.context=typeof q=="object"&&q!==null?oo(q):ca,T.state=s.memoizedState,q=h.getDerivedStateFromProps,typeof q=="function"&&(Fg(s,h,q,y),T.state=s.memoizedState),typeof h.getDerivedStateFromProps=="function"||typeof T.getSnapshotBeforeUpdate=="function"||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(q=T.state,typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount(),q!==T.state&&Ug.enqueueReplaceState(T,T.state,null),ua(s,y,T,C),cr(),T.state=s.memoizedState),typeof T.componentDidMount=="function"&&(s.flags|=4194308),y=!0}else if(o===null){T=s.stateNode;var le=s.memoizedProps,Oe=du(h,le);T.props=Oe;var at=T.context,yt=h.contextType;q=ca,typeof yt=="object"&&yt!==null&&(q=oo(yt));var St=h.getDerivedStateFromProps;yt=typeof St=="function"||typeof T.getSnapshotBeforeUpdate=="function",le=s.pendingProps!==le,yt||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(le||at!==q)&&ox(s,T,y,q),Qt=!1;var st=s.memoizedState;T.state=st,ua(s,y,T,C),cr(),at=s.memoizedState,le||st!==at||Qt?(typeof St=="function"&&(Fg(s,h,St,y),at=s.memoizedState),(Oe=Qt||ax(s,h,Oe,y,st,at,q))?(yt||typeof T.UNSAFE_componentWillMount!="function"&&typeof T.componentWillMount!="function"||(typeof T.componentWillMount=="function"&&T.componentWillMount(),typeof T.UNSAFE_componentWillMount=="function"&&T.UNSAFE_componentWillMount()),typeof T.componentDidMount=="function"&&(s.flags|=4194308)):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),s.memoizedProps=y,s.memoizedState=at),T.props=y,T.state=at,T.context=q,y=Oe):(typeof T.componentDidMount=="function"&&(s.flags|=4194308),y=!1)}else{T=s.stateNode,jr(o,s),q=s.memoizedProps,yt=du(h,q),T.props=yt,St=s.pendingProps,st=T.context,at=h.contextType,Oe=ca,typeof at=="object"&&at!==null&&(Oe=oo(at)),le=h.getDerivedStateFromProps,(at=typeof le=="function"||typeof T.getSnapshotBeforeUpdate=="function")||typeof T.UNSAFE_componentWillReceiveProps!="function"&&typeof T.componentWillReceiveProps!="function"||(q!==St||st!==Oe)&&ox(s,T,y,Oe),Qt=!1,st=s.memoizedState,T.state=st,ua(s,y,T,C),cr();var ct=s.memoizedState;q!==St||st!==ct||Qt||o!==null&&o.dependencies!==null&&Fu(o.dependencies)?(typeof le=="function"&&(Fg(s,h,le,y),ct=s.memoizedState),(yt=Qt||ax(s,h,yt,y,st,ct,Oe)||o!==null&&o.dependencies!==null&&Fu(o.dependencies))?(at||typeof T.UNSAFE_componentWillUpdate!="function"&&typeof T.componentWillUpdate!="function"||(typeof T.componentWillUpdate=="function"&&T.componentWillUpdate(y,ct,Oe),typeof T.UNSAFE_componentWillUpdate=="function"&&T.UNSAFE_componentWillUpdate(y,ct,Oe)),typeof T.componentDidUpdate=="function"&&(s.flags|=4),typeof T.getSnapshotBeforeUpdate=="function"&&(s.flags|=1024)):(typeof T.componentDidUpdate!="function"||q===o.memoizedProps&&st===o.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&st===o.memoizedState||(s.flags|=1024),s.memoizedProps=y,s.memoizedState=ct),T.props=y,T.state=ct,T.context=Oe,y=yt):(typeof T.componentDidUpdate!="function"||q===o.memoizedProps&&st===o.memoizedState||(s.flags|=4),typeof T.getSnapshotBeforeUpdate!="function"||q===o.memoizedProps&&st===o.memoizedState||(s.flags|=1024),y=!1)}return T=y,ph(o,s),y=(s.flags&128)!==0,T||y?(T=s.stateNode,h=y&&typeof h.getDerivedStateFromError!="function"?null:T.render(),s.flags|=1,o!==null&&y?(s.child=yr(s,o.child,null,C),s.child=yr(s,null,h,C)):Oo(o,s,h,C),s.memoizedState=T.state,o=s.child):o=rc(o,s,C),o}function _x(o,s,h,y){return sl(),s.flags|=256,Oo(o,s,h,y),s.child}var Gg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Vg(o){return{baseLanes:o,cachePool:Ae()}}function Yg(o,s,h){return o=o!==null?o.childLanes&~h:0,s&&(o|=qs),o}function wx(o,s,h){var y=s.pendingProps,C=!1,T=(s.flags&128)!==0,q;if((q=T)||(q=o!==null&&o.memoizedState===null?!1:(Ci.current&2)!==0),q&&(C=!0,s.flags&=-129),q=(s.flags&32)!==0,s.flags&=-33,o===null){if(ci){if(C?Jr(s):ha(),(o=Ti)?(o=k1(o,Sr),o=o!==null&&o.data!=="&"?o:null,o!==null&&(s.memoizedState={dehydrated:o,treeContext:ot!==null?{id:bt,overflow:Ft}:null,retryLane:536870912,hydrationErrors:null},h=Jl(o),h.return=s,s.child=h,Li=s,Ti=null)):o=null,o===null)throw Js(s);return jm(o)?s.lanes=32:s.lanes=536870912,null}var le=y.children;return y=y.fallback,C?(ha(),C=s.mode,le=gh({mode:"hidden",children:le},C),y=$s(y,C,h,null),le.return=s,y.return=s,le.sibling=y,s.child=le,y=s.child,y.memoizedState=Vg(h),y.childLanes=Yg(o,q,h),s.memoizedState=Gg,Qd(null,y)):(Jr(s),Zg(s,le))}var Oe=o.memoizedState;if(Oe!==null&&(le=Oe.dehydrated,le!==null)){if(T)s.flags&256?(Jr(s),s.flags&=-257,s=Kg(o,s,h)):s.memoizedState!==null?(ha(),s.child=o.child,s.flags|=128,s=null):(ha(),le=y.fallback,C=s.mode,y=gh({mode:"visible",children:y.children},C),le=$s(le,C,h,null),le.flags|=2,y.return=s,le.return=s,y.sibling=le,s.child=y,yr(s,o.child,null,h),y=s.child,y.memoizedState=Vg(h),y.childLanes=Yg(o,q,h),s.memoizedState=Gg,s=Qd(null,y));else if(Jr(s),jm(le)){if(q=le.nextSibling&&le.nextSibling.dataset,q)var at=q.dgst;q=at,y=Error(i(419)),y.stack="",y.digest=q,Tl({value:y,source:null,stack:null}),s=Kg(o,s,h)}else if(Wa||Rl(o,s,h,!1),q=(h&o.childLanes)!==0,Wa||q){if(q=xr,q!==null&&(y=xi(q,h),y!==0&&y!==Oe.retryLane))throw Oe.retryLane=y,li(o,y),Es(q,o,y),qg;Tm(le)||Ch(),s=Kg(o,s,h)}else Tm(le)?(s.flags|=192,s.child=o.child,s=null):(o=Oe.treeContext,Ti=nl(le.nextSibling),Li=s,ci=!0,ao=null,Sr=!1,o!==null&&Do(s,o),s=Zg(s,y.children),s.flags|=4096);return s}return C?(ha(),le=y.fallback,C=s.mode,Oe=o.child,at=Oe.sibling,y=No(Oe,{mode:"hidden",children:y.children}),y.subtreeFlags=Oe.subtreeFlags&65011712,at!==null?le=No(at,le):(le=$s(le,C,h,null),le.flags|=2),le.return=s,y.return=s,y.sibling=le,s.child=y,Qd(null,y),y=s.child,le=o.child.memoizedState,le===null?le=Vg(h):(C=le.cachePool,C!==null?(Oe=$r._currentValue,C=C.parent!==Oe?{parent:Oe,pool:Oe}:C):C=Ae(),le={baseLanes:le.baseLanes|h,cachePool:C}),y.memoizedState=le,y.childLanes=Yg(o,q,h),s.memoizedState=Gg,Qd(o.child,y)):(Jr(s),h=o.child,o=h.sibling,h=No(h,{mode:"visible",children:y.children}),h.return=s,h.sibling=null,o!==null&&(q=s.deletions,q===null?(s.deletions=[o],s.flags|=16):q.push(o)),s.child=h,s.memoizedState=null,h)}function Zg(o,s){return s=gh({mode:"visible",children:s},o.mode),s.return=o,o.child=s}function gh(o,s){return o=La(22,o,null,s),o.lanes=0,o}function Kg(o,s,h){return yr(s,o.child,null,h),o=Zg(s,s.pendingProps.children),o.flags|=2,s.memoizedState=null,o}function Sx(o,s,h){o.lanes|=s;var y=o.alternate;y!==null&&(y.lanes|=s),Tc(o.return,s,h)}function Xg(o,s,h,y,C,T){var q=o.memoizedState;q===null?o.memoizedState={isBackwards:s,rendering:null,renderingStartTime:0,last:y,tail:h,tailMode:C,treeForkCount:T}:(q.isBackwards=s,q.rendering=null,q.renderingStartTime=0,q.last=y,q.tail=h,q.tailMode=C,q.treeForkCount=T)}function Cx(o,s,h){var y=s.pendingProps,C=y.revealOrder,T=y.tail;y=y.children;var q=Ci.current,le=(q&2)!==0;if(le?(q=q&1|2,s.flags|=128):q&=1,te(Ci,q),Oo(o,s,y,h),y=ci?re:0,!le&&o!==null&&(o.flags&128)!==0)e:for(o=s.child;o!==null;){if(o.tag===13)o.memoizedState!==null&&Sx(o,h,s);else if(o.tag===19)Sx(o,h,s);else if(o.child!==null){o.child.return=o,o=o.child;continue}if(o===s)break e;for(;o.sibling===null;){if(o.return===null||o.return===s)break e;o=o.return}o.sibling.return=o.return,o=o.sibling}switch(C){case"forwards":for(h=s.child,C=null;h!==null;)o=h.alternate,o!==null&&wo(o)===null&&(C=h),h=h.sibling;h=C,h===null?(C=s.child,s.child=null):(C=h.sibling,h.sibling=null),Xg(s,!1,C,h,T,y);break;case"backwards":case"unstable_legacy-backwards":for(h=null,C=s.child,s.child=null;C!==null;){if(o=C.alternate,o!==null&&wo(o)===null){s.child=C;break}o=C.sibling,C.sibling=h,h=C,C=o}Xg(s,!0,h,null,T,y);break;case"together":Xg(s,!1,null,null,void 0,y);break;default:s.memoizedState=null}return s.child}function rc(o,s,h){if(o!==null&&(s.dependencies=o.dependencies),Pc|=s.lanes,(h&s.childLanes)===0)if(o!==null){if(Rl(o,s,h,!1),(h&s.childLanes)===0)return null}else return null;if(o!==null&&s.child!==o.child)throw Error(i(153));if(s.child!==null){for(o=s.child,h=No(o,o.pendingProps),s.child=h,h.return=s;o.sibling!==null;)o=o.sibling,h=h.sibling=No(o,o.pendingProps),h.return=s;h.sibling=null}return s.child}function Qg(o,s){return(o.lanes&s)!==0?!0:(o=o.dependencies,!!(o!==null&&Fu(o)))}function RE(o,s,h){switch(s.tag){case 3:Le(s,s.stateNode.containerInfo),kl(s,$r,o.memoizedState.cache),sl();break;case 27:case 5:Re(s);break;case 4:Le(s,s.stateNode.containerInfo);break;case 10:kl(s,s.type,s.memoizedProps.value);break;case 31:if(s.memoizedState!==null)return s.flags|=128,Vi(s),null;break;case 13:var y=s.memoizedState;if(y!==null)return y.dehydrated!==null?(Jr(s),s.flags|=128,null):(h&s.child.childLanes)!==0?wx(o,s,h):(Jr(s),o=rc(o,s,h),o!==null?o.sibling:null);Jr(s);break;case 19:var C=(o.flags&128)!==0;if(y=(h&s.childLanes)!==0,y||(Rl(o,s,h,!1),y=(h&s.childLanes)!==0),C){if(y)return Cx(o,s,h);s.flags|=128}if(C=s.memoizedState,C!==null&&(C.rendering=null,C.tail=null,C.lastEffect=null),te(Ci,Ci.current),y)break;return null;case 22:return s.lanes=0,mx(o,s,h,s.pendingProps);case 24:kl(s,$r,o.memoizedState.cache)}return rc(o,s,h)}function Ex(o,s,h){if(o!==null)if(o.memoizedProps!==s.pendingProps)Wa=!0;else{if(!Qg(o,h)&&(s.flags&128)===0)return Wa=!1,RE(o,s,h);Wa=(o.flags&131072)!==0}else Wa=!1,ci&&(s.flags&1048576)!==0&&$n(s,re,s.index);switch(s.lanes=0,s.tag){case 16:e:{var y=s.pendingProps;if(o=tt(s.elementType),s.type=o,typeof o=="function")$l(o)?(y=du(o,y),s.tag=1,s=bx(null,s,o,y,h)):(s.tag=0,s=Wg(null,s,o,y,h));else{if(o!=null){var C=o.$$typeof;if(C===V){s.tag=11,s=hx(null,s,o,y,h);break e}else if(C===_e){s.tag=14,s=px(null,s,o,y,h);break e}}throw s=Ee(o)||o,Error(i(306,s,""))}}return s;case 0:return Wg(o,s,s.type,s.pendingProps,h);case 1:return y=s.type,C=du(y,s.pendingProps),bx(o,s,y,C,h);case 3:e:{if(Le(s,s.stateNode.containerInfo),o===null)throw Error(i(387));y=s.pendingProps;var T=s.memoizedState;C=T.element,jr(o,s),ua(s,y,null,h);var q=s.memoizedState;if(y=q.cache,kl(s,$r,y),y!==T.cache&&ec(s,[$r],h,!0),cr(),y=q.element,T.isDehydrated)if(T={element:y,isDehydrated:!1,cache:q.cache},s.updateQueue.baseState=T,s.memoizedState=T,s.flags&256){s=_x(o,s,y,h);break e}else if(y!==C){C=v(Error(i(424)),s),Tl(C),s=_x(o,s,y,h);break e}else for(o=s.stateNode.containerInfo,o.nodeType===9?o=o.body:o=o.nodeName==="HTML"?o.ownerDocument.body:o,Ti=nl(o.firstChild),Li=s,ci=!0,ao=null,Sr=!0,h=Yn(s,null,y,h),s.child=h;h;)h.flags=h.flags&-3|4096,h=h.sibling;else{if(sl(),y===C){s=rc(o,s,h);break e}Oo(o,s,y,h)}s=s.child}return s;case 26:return ph(o,s),o===null?(h=P1(s.type,null,s.pendingProps,null))?s.memoizedState=h:ci||(h=s.type,o=s.pendingProps,y=Rh(xe.current).createElement(h),y[ti]=s,y[bi]=o,Po(y,h,o),ir(y),s.stateNode=y):s.memoizedState=P1(s.type,o.memoizedProps,s.pendingProps,o.memoizedState),null;case 27:return Re(s),o===null&&ci&&(y=s.stateNode=D1(s.type,s.pendingProps,xe.current),Li=s,Sr=!0,C=Ti,Uc(s.type)?(km=C,Ti=nl(y.firstChild)):Ti=C),Oo(o,s,s.pendingProps.children,h),ph(o,s),o===null&&(s.flags|=4194304),s.child;case 5:return o===null&&ci&&((C=y=Ti)&&(y=sA(y,s.type,s.pendingProps,Sr),y!==null?(s.stateNode=y,Li=s,Ti=nl(y.firstChild),Sr=!1,C=!0):C=!1),C||Js(s)),Re(s),C=s.type,T=s.pendingProps,q=o!==null?o.memoizedProps:null,y=T.children,Em(C,T)?y=null:q!==null&&Em(C,q)&&(s.flags|=32),s.memoizedState!==null&&(C=Hd(o,s,Ng,null,null,h),hf._currentValue=C),ph(o,s),Oo(o,s,y,h),s.child;case 6:return o===null&&ci&&((o=h=Ti)&&(h=lA(h,s.pendingProps,Sr),h!==null?(s.stateNode=h,Li=s,Ti=null,o=!0):o=!1),o||Js(s)),null;case 13:return wx(o,s,h);case 4:return Le(s,s.stateNode.containerInfo),y=s.pendingProps,o===null?s.child=yr(s,null,y,h):Oo(o,s,y,h),s.child;case 11:return hx(o,s,s.type,s.pendingProps,h);case 7:return Oo(o,s,s.pendingProps,h),s.child;case 8:return Oo(o,s,s.pendingProps.children,h),s.child;case 12:return Oo(o,s,s.pendingProps.children,h),s.child;case 10:return y=s.pendingProps,kl(s,s.type,y.value),Oo(o,s,y.children,h),s.child;case 9:return C=s.type._context,y=s.pendingProps.children,Nl(s),C=oo(C),y=y(C),s.flags|=1,Oo(o,s,y,h),s.child;case 14:return px(o,s,s.type,s.pendingProps,h);case 15:return gx(o,s,s.type,s.pendingProps,h);case 19:return Cx(o,s,h);case 31:return kE(o,s,h);case 22:return mx(o,s,h,s.pendingProps);case 24:return Nl(s),y=oo($r),o===null?(C=pe(),C===null&&(C=xr,T=jc(),C.pooledCache=T,T.refCount++,T!==null&&(C.pooledCacheLanes|=h),C=T),s.memoizedState={parent:y,cache:C},qt(s),kl(s,$r,C)):((o.lanes&h)!==0&&(jr(o,s),ua(s,null,null,h),cr()),C=o.memoizedState,T=s.memoizedState,C.parent!==y?(C={parent:y,cache:y},s.memoizedState=C,s.lanes===0&&(s.memoizedState=s.updateQueue.baseState=C),kl(s,$r,y)):(y=T.cache,kl(s,$r,y),y!==C.cache&&ec(s,[$r],h,!0))),Oo(o,s,s.pendingProps.children,h),s.child;case 29:throw s.pendingProps}throw Error(i(156,s.tag))}function ac(o){o.flags|=4}function $g(o,s,h,y,C){if((s=(o.mode&32)!==0)&&(s=!1),s){if(o.flags|=16777216,(C&335544128)===C)if(o.stateNode.complete)o.flags|=8192;else if($x())o.flags|=8192;else throw ht=Ve,it}else o.flags&=-16777217}function Ax(o,s){if(s.type!=="stylesheet"||(s.state.loading&4)!==0)o.flags&=-16777217;else if(o.flags|=16777216,!U1(s))if($x())o.flags|=8192;else throw ht=Ve,it}function mh(o,s){s!==null&&(o.flags|=4),o.flags&16384&&(s=o.tag!==22?zo():536870912,o.lanes|=s,td|=s)}function $d(o,s){if(!ci)switch(o.tailMode){case"hidden":s=o.tail;for(var h=null;s!==null;)s.alternate!==null&&(h=s),s=s.sibling;h===null?o.tail=null:h.sibling=null;break;case"collapsed":h=o.tail;for(var y=null;h!==null;)h.alternate!==null&&(y=h),h=h.sibling;y===null?s||o.tail===null?o.tail=null:o.tail.sibling=null:y.sibling=null}}function Nr(o){var s=o.alternate!==null&&o.alternate.child===o.child,h=0,y=0;if(s)for(var C=o.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags&65011712,y|=C.flags&65011712,C.return=o,C=C.sibling;else for(C=o.child;C!==null;)h|=C.lanes|C.childLanes,y|=C.subtreeFlags,y|=C.flags,C.return=o,C=C.sibling;return o.subtreeFlags|=y,o.childLanes=h,s}function NE(o,s,h){var y=s.pendingProps;switch(Tr(s),s.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Nr(s),null;case 1:return Nr(s),null;case 3:return h=s.stateNode,y=null,o!==null&&(y=o.memoizedState.cache),s.memoizedState.cache!==y&&(s.flags|=2048),xs($r),Ge(),h.pendingContext&&(h.context=h.pendingContext,h.pendingContext=null),(o===null||o.child===null)&&(Ir(s)?ac(s):o===null||o.memoizedState.isDehydrated&&(s.flags&256)===0||(s.flags|=1024,ou())),Nr(s),null;case 26:var C=s.type,T=s.memoizedState;return o===null?(ac(s),T!==null?(Nr(s),Ax(s,T)):(Nr(s),$g(s,C,null,y,h))):T?T!==o.memoizedState?(ac(s),Nr(s),Ax(s,T)):(Nr(s),s.flags&=-16777217):(o=o.memoizedProps,o!==y&&ac(s),Nr(s),$g(s,C,o,y,h)),null;case 27:if(gt(s),h=xe.current,C=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==y&&ac(s);else{if(!y){if(s.stateNode===null)throw Error(i(166));return Nr(s),null}o=ce.current,Ir(s)?Lc(s):(o=D1(C,y,h),s.stateNode=o,ac(s))}return Nr(s),null;case 5:if(gt(s),C=s.type,o!==null&&s.stateNode!=null)o.memoizedProps!==y&&ac(s);else{if(!y){if(s.stateNode===null)throw Error(i(166));return Nr(s),null}if(T=ce.current,Ir(s))Lc(s);else{var q=Rh(xe.current);switch(T){case 1:T=q.createElementNS("http://www.w3.org/2000/svg",C);break;case 2:T=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;default:switch(C){case"svg":T=q.createElementNS("http://www.w3.org/2000/svg",C);break;case"math":T=q.createElementNS("http://www.w3.org/1998/Math/MathML",C);break;case"script":T=q.createElement("div"),T.innerHTML="<script><\/script>",T=T.removeChild(T.firstChild);break;case"select":T=typeof y.is=="string"?q.createElement("select",{is:y.is}):q.createElement("select"),y.multiple?T.multiple=!0:y.size&&(T.size=y.size);break;default:T=typeof y.is=="string"?q.createElement(C,{is:y.is}):q.createElement(C)}}T[ti]=s,T[bi]=y;e:for(q=s.child;q!==null;){if(q.tag===5||q.tag===6)T.appendChild(q.stateNode);else if(q.tag!==4&&q.tag!==27&&q.child!==null){q.child.return=q,q=q.child;continue}if(q===s)break e;for(;q.sibling===null;){if(q.return===null||q.return===s)break e;q=q.return}q.sibling.return=q.return,q=q.sibling}s.stateNode=T;e:switch(Po(T,C,y),C){case"button":case"input":case"select":case"textarea":y=!!y.autoFocus;break e;case"img":y=!0;break e;default:y=!1}y&&ac(s)}}return Nr(s),$g(s,s.type,o===null?null:o.memoizedProps,s.pendingProps,h),null;case 6:if(o&&s.stateNode!=null)o.memoizedProps!==y&&ac(s);else{if(typeof y!="string"&&s.stateNode===null)throw Error(i(166));if(o=xe.current,Ir(s)){if(o=s.stateNode,h=s.memoizedProps,y=null,C=Li,C!==null)switch(C.tag){case 27:case 5:y=C.memoizedProps}o[ti]=s,o=!!(o.nodeValue===h||y!==null&&y.suppressHydrationWarning===!0||w1(o.nodeValue,h)),o||Js(s,!0)}else o=Rh(o).createTextNode(y),o[ti]=s,s.stateNode=o}return Nr(s),null;case 31:if(h=s.memoizedState,o===null||o.memoizedState!==null){if(y=Ir(s),h!==null){if(o===null){if(!y)throw Error(i(318));if(o=s.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(i(557));o[ti]=s}else sl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nr(s),o=!1}else h=ou(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=h),o=!0;if(!o)return s.flags&256?($i(s),s):($i(s),null);if((s.flags&128)!==0)throw Error(i(558))}return Nr(s),null;case 13:if(y=s.memoizedState,o===null||o.memoizedState!==null&&o.memoizedState.dehydrated!==null){if(C=Ir(s),y!==null&&y.dehydrated!==null){if(o===null){if(!C)throw Error(i(318));if(C=s.memoizedState,C=C!==null?C.dehydrated:null,!C)throw Error(i(317));C[ti]=s}else sl(),(s.flags&128)===0&&(s.memoizedState=null),s.flags|=4;Nr(s),C=!1}else C=ou(),o!==null&&o.memoizedState!==null&&(o.memoizedState.hydrationErrors=C),C=!0;if(!C)return s.flags&256?($i(s),s):($i(s),null)}return $i(s),(s.flags&128)!==0?(s.lanes=h,s):(h=y!==null,o=o!==null&&o.memoizedState!==null,h&&(y=s.child,C=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(C=y.alternate.memoizedState.cachePool.pool),T=null,y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(T=y.memoizedState.cachePool.pool),T!==C&&(y.flags|=2048)),h!==o&&h&&(s.child.flags|=8192),mh(s,s.updateQueue),Nr(s),null);case 4:return Ge(),o===null&&bm(s.stateNode.containerInfo),Nr(s),null;case 10:return xs(s.type),Nr(s),null;case 19:if(H(Ci),y=s.memoizedState,y===null)return Nr(s),null;if(C=(s.flags&128)!==0,T=y.rendering,T===null)if(C)$d(y,!1);else{if(ga!==0||o!==null&&(o.flags&128)!==0)for(o=s.child;o!==null;){if(T=wo(o),T!==null){for(s.flags|=128,$d(y,!1),o=T.updateQueue,s.updateQueue=o,mh(s,o),s.subtreeFlags=0,o=h,h=s.child;h!==null;)El(h,o),h=h.sibling;return te(Ci,Ci.current&1|2),ci&&an(s,y.treeForkCount),s.child}o=o.sibling}y.tail!==null&&xn()>_h&&(s.flags|=128,C=!0,$d(y,!1),s.lanes=4194304)}else{if(!C)if(o=wo(T),o!==null){if(s.flags|=128,C=!0,o=o.updateQueue,s.updateQueue=o,mh(s,o),$d(y,!0),y.tail===null&&y.tailMode==="hidden"&&!T.alternate&&!ci)return Nr(s),null}else 2*xn()-y.renderingStartTime>_h&&h!==536870912&&(s.flags|=128,C=!0,$d(y,!1),s.lanes=4194304);y.isBackwards?(T.sibling=s.child,s.child=T):(o=y.last,o!==null?o.sibling=T:s.child=T,y.last=T)}return y.tail!==null?(o=y.tail,y.rendering=o,y.tail=o.sibling,y.renderingStartTime=xn(),o.sibling=null,h=Ci.current,te(Ci,C?h&1|2:h&1),ci&&an(s,y.treeForkCount),o):(Nr(s),null);case 22:case 23:return $i(s),ka(),y=s.memoizedState!==null,o!==null?o.memoizedState!==null!==y&&(s.flags|=8192):y&&(s.flags|=8192),y?(h&536870912)!==0&&(s.flags&128)===0&&(Nr(s),s.subtreeFlags&6&&(s.flags|=8192)):Nr(s),h=s.updateQueue,h!==null&&mh(s,h.retryQueue),h=null,o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),y=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(y=s.memoizedState.cachePool.pool),y!==h&&(s.flags|=2048),o!==null&&H(se),null;case 24:return h=null,o!==null&&(h=o.memoizedState.cache),s.memoizedState.cache!==h&&(s.flags|=2048),xs($r),Nr(s),null;case 25:return null;case 30:return null}throw Error(i(156,s.tag))}function DE(o,s){switch(Tr(s),s.tag){case 1:return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 3:return xs($r),Ge(),o=s.flags,(o&65536)!==0&&(o&128)===0?(s.flags=o&-65537|128,s):null;case 26:case 27:case 5:return gt(s),null;case 31:if(s.memoizedState!==null){if($i(s),s.alternate===null)throw Error(i(340));sl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 13:if($i(s),o=s.memoizedState,o!==null&&o.dehydrated!==null){if(s.alternate===null)throw Error(i(340));sl()}return o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 19:return H(Ci),null;case 4:return Ge(),null;case 10:return xs(s.type),null;case 22:case 23:return $i(s),ka(),o!==null&&H(se),o=s.flags,o&65536?(s.flags=o&-65537|128,s):null;case 24:return xs($r),null;case 25:return null;default:return null}}function Lx(o,s){switch(Tr(s),s.tag){case 3:xs($r),Ge();break;case 26:case 27:case 5:gt(s);break;case 4:Ge();break;case 31:s.memoizedState!==null&&$i(s);break;case 13:$i(s);break;case 19:H(Ci);break;case 10:xs(s.type);break;case 22:case 23:$i(s),ka(),o!==null&&H(se);break;case 24:xs($r)}}function Jd(o,s){try{var h=s.updateQueue,y=h!==null?h.lastEffect:null;if(y!==null){var C=y.next;h=C;do{if((h.tag&o)===o){y=void 0;var T=h.create,q=h.inst;y=T(),q.destroy=y}h=h.next}while(h!==C)}}catch(le){er(s,s.return,le)}}function Mc(o,s,h){try{var y=s.updateQueue,C=y!==null?y.lastEffect:null;if(C!==null){var T=C.next;y=T;do{if((y.tag&o)===o){var q=y.inst,le=q.destroy;if(le!==void 0){q.destroy=void 0,C=s;var Oe=h,at=le;try{at()}catch(yt){er(C,Oe,yt)}}}y=y.next}while(y!==T)}}catch(yt){er(s,s.return,yt)}}function Tx(o){var s=o.updateQueue;if(s!==null){var h=o.stateNode;try{da(s,h)}catch(y){er(o,o.return,y)}}}function jx(o,s,h){h.props=du(o.type,o.memoizedProps),h.state=o.memoizedState;try{h.componentWillUnmount()}catch(y){er(o,s,y)}}function ef(o,s){try{var h=o.ref;if(h!==null){switch(o.tag){case 26:case 27:case 5:var y=o.stateNode;break;case 30:y=o.stateNode;break;default:y=o.stateNode}typeof h=="function"?o.refCleanup=h(y):h.current=y}}catch(C){er(o,s,C)}}function Il(o,s){var h=o.ref,y=o.refCleanup;if(h!==null)if(typeof y=="function")try{y()}catch(C){er(o,s,C)}finally{o.refCleanup=null,o=o.alternate,o!=null&&(o.refCleanup=null)}else if(typeof h=="function")try{h(null)}catch(C){er(o,s,C)}else h.current=null}function kx(o){var s=o.type,h=o.memoizedProps,y=o.stateNode;try{e:switch(s){case"button":case"input":case"select":case"textarea":h.autoFocus&&y.focus();break e;case"img":h.src?y.src=h.src:h.srcSet&&(y.srcset=h.srcSet)}}catch(C){er(o,o.return,C)}}function Jg(o,s,h){try{var y=o.stateNode;tA(y,o.type,h,s),y[bi]=s}catch(C){er(o,o.return,C)}}function Rx(o){return o.tag===5||o.tag===3||o.tag===26||o.tag===27&&Uc(o.type)||o.tag===4}function em(o){e:for(;;){for(;o.sibling===null;){if(o.return===null||Rx(o.return))return null;o=o.return}for(o.sibling.return=o.return,o=o.sibling;o.tag!==5&&o.tag!==6&&o.tag!==18;){if(o.tag===27&&Uc(o.type)||o.flags&2||o.child===null||o.tag===4)continue e;o.child.return=o,o=o.child}if(!(o.flags&2))return o.stateNode}}function tm(o,s,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,s?(h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h).insertBefore(o,s):(s=h.nodeType===9?h.body:h.nodeName==="HTML"?h.ownerDocument.body:h,s.appendChild(o),h=h._reactRootContainer,h!=null||s.onclick!==null||(s.onclick=Vr));else if(y!==4&&(y===27&&Uc(o.type)&&(h=o.stateNode,s=null),o=o.child,o!==null))for(tm(o,s,h),o=o.sibling;o!==null;)tm(o,s,h),o=o.sibling}function vh(o,s,h){var y=o.tag;if(y===5||y===6)o=o.stateNode,s?h.insertBefore(o,s):h.appendChild(o);else if(y!==4&&(y===27&&Uc(o.type)&&(h=o.stateNode),o=o.child,o!==null))for(vh(o,s,h),o=o.sibling;o!==null;)vh(o,s,h),o=o.sibling}function Nx(o){var s=o.stateNode,h=o.memoizedProps;try{for(var y=o.type,C=s.attributes;C.length;)s.removeAttributeNode(C[0]);Po(s,y,h),s[ti]=o,s[bi]=h}catch(T){er(o,o.return,T)}}var oc=!1,Ga=!1,nm=!1,Dx=typeof WeakSet=="function"?WeakSet:Set,So=null;function ME(o,s){if(o=o.containerInfo,Sm=zh,o=W(o),$(o)){if("selectionStart"in o)var h={start:o.selectionStart,end:o.selectionEnd};else e:{h=(h=o.ownerDocument)&&h.defaultView||window;var y=h.getSelection&&h.getSelection();if(y&&y.rangeCount!==0){h=y.anchorNode;var C=y.anchorOffset,T=y.focusNode;y=y.focusOffset;try{h.nodeType,T.nodeType}catch{h=null;break e}var q=0,le=-1,Oe=-1,at=0,yt=0,St=o,st=null;t:for(;;){for(var ct;St!==h||C!==0&&St.nodeType!==3||(le=q+C),St!==T||y!==0&&St.nodeType!==3||(Oe=q+y),St.nodeType===3&&(q+=St.nodeValue.length),(ct=St.firstChild)!==null;)st=St,St=ct;for(;;){if(St===o)break t;if(st===h&&++at===C&&(le=q),st===T&&++yt===y&&(Oe=q),(ct=St.nextSibling)!==null)break;St=st,st=St.parentNode}St=ct}h=le===-1||Oe===-1?null:{start:le,end:Oe}}else h=null}h=h||{start:0,end:0}}else h=null;for(Cm={focusedElem:o,selectionRange:h},zh=!1,So=s;So!==null;)if(s=So,o=s.child,(s.subtreeFlags&1028)!==0&&o!==null)o.return=s,So=o;else for(;So!==null;){switch(s=So,T=s.alternate,o=s.flags,s.tag){case 0:if((o&4)!==0&&(o=s.updateQueue,o=o!==null?o.events:null,o!==null))for(h=0;h<o.length;h++)C=o[h],C.ref.impl=C.nextImpl;break;case 11:case 15:break;case 1:if((o&1024)!==0&&T!==null){o=void 0,h=s,C=T.memoizedProps,T=T.memoizedState,y=h.stateNode;try{var on=du(h.type,C);o=y.getSnapshotBeforeUpdate(on,T),y.__reactInternalSnapshotBeforeUpdate=o}catch(Rn){er(h,h.return,Rn)}}break;case 3:if((o&1024)!==0){if(o=s.stateNode.containerInfo,h=o.nodeType,h===9)Lm(o);else if(h===1)switch(o.nodeName){case"HEAD":case"HTML":case"BODY":Lm(o);break;default:o.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((o&1024)!==0)throw Error(i(163))}if(o=s.sibling,o!==null){o.return=s.return,So=o;break}So=s.return}}function Mx(o,s,h){var y=h.flags;switch(h.tag){case 0:case 11:case 15:lc(o,h),y&4&&Jd(5,h);break;case 1:if(lc(o,h),y&4)if(o=h.stateNode,s===null)try{o.componentDidMount()}catch(q){er(h,h.return,q)}else{var C=du(h.type,s.memoizedProps);s=s.memoizedState;try{o.componentDidUpdate(C,s,o.__reactInternalSnapshotBeforeUpdate)}catch(q){er(h,h.return,q)}}y&64&&Tx(h),y&512&&ef(h,h.return);break;case 3:if(lc(o,h),y&64&&(o=h.updateQueue,o!==null)){if(s=null,h.child!==null)switch(h.child.tag){case 27:case 5:s=h.child.stateNode;break;case 1:s=h.child.stateNode}try{da(o,s)}catch(q){er(h,h.return,q)}}break;case 27:s===null&&y&4&&Nx(h);case 26:case 5:lc(o,h),s===null&&y&4&&kx(h),y&512&&ef(h,h.return);break;case 12:lc(o,h);break;case 31:lc(o,h),y&4&&Ix(o,h);break;case 13:lc(o,h),y&4&&zx(o,h),y&64&&(o=h.memoizedState,o!==null&&(o=o.dehydrated,o!==null&&(h=qE.bind(null,h),cA(o,h))));break;case 22:if(y=h.memoizedState!==null||oc,!y){s=s!==null&&s.memoizedState!==null||Ga,C=oc;var T=Ga;oc=y,(Ga=s)&&!T?cc(o,h,(h.subtreeFlags&8772)!==0):lc(o,h),oc=C,Ga=T}break;case 30:break;default:lc(o,h)}}function Ox(o){var s=o.alternate;s!==null&&(o.alternate=null,Ox(s)),o.child=null,o.deletions=null,o.sibling=null,o.tag===5&&(s=o.stateNode,s!==null&&Jo(s)),o.stateNode=null,o.return=null,o.dependencies=null,o.memoizedProps=null,o.memoizedState=null,o.pendingProps=null,o.stateNode=null,o.updateQueue=null}var Fr=null,_s=!1;function sc(o,s,h){for(h=h.child;h!==null;)Px(o,s,h),h=h.sibling}function Px(o,s,h){if(hn&&typeof hn.onCommitFiberUnmount=="function")try{hn.onCommitFiberUnmount(Hn,h)}catch{}switch(h.tag){case 26:Ga||Il(h,s),sc(o,s,h),h.memoizedState?h.memoizedState.count--:h.stateNode&&(h=h.stateNode,h.parentNode.removeChild(h));break;case 27:Ga||Il(h,s);var y=Fr,C=_s;Uc(h.type)&&(Fr=h.stateNode,_s=!1),sc(o,s,h),uf(h.stateNode),Fr=y,_s=C;break;case 5:Ga||Il(h,s);case 6:if(y=Fr,C=_s,Fr=null,sc(o,s,h),Fr=y,_s=C,Fr!==null)if(_s)try{(Fr.nodeType===9?Fr.body:Fr.nodeName==="HTML"?Fr.ownerDocument.body:Fr).removeChild(h.stateNode)}catch(T){er(h,s,T)}else try{Fr.removeChild(h.stateNode)}catch(T){er(h,s,T)}break;case 18:Fr!==null&&(_s?(o=Fr,T1(o.nodeType===9?o.body:o.nodeName==="HTML"?o.ownerDocument.body:o,h.stateNode),cd(o)):T1(Fr,h.stateNode));break;case 4:y=Fr,C=_s,Fr=h.stateNode.containerInfo,_s=!0,sc(o,s,h),Fr=y,_s=C;break;case 0:case 11:case 14:case 15:Mc(2,h,s),Ga||Mc(4,h,s),sc(o,s,h);break;case 1:Ga||(Il(h,s),y=h.stateNode,typeof y.componentWillUnmount=="function"&&jx(h,s,y)),sc(o,s,h);break;case 21:sc(o,s,h);break;case 22:Ga=(y=Ga)||h.memoizedState!==null,sc(o,s,h),Ga=y;break;default:sc(o,s,h)}}function Ix(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null))){o=o.dehydrated;try{cd(o)}catch(h){er(s,s.return,h)}}}function zx(o,s){if(s.memoizedState===null&&(o=s.alternate,o!==null&&(o=o.memoizedState,o!==null&&(o=o.dehydrated,o!==null))))try{cd(o)}catch(h){er(s,s.return,h)}}function OE(o){switch(o.tag){case 31:case 13:case 19:var s=o.stateNode;return s===null&&(s=o.stateNode=new Dx),s;case 22:return o=o.stateNode,s=o._retryCache,s===null&&(s=o._retryCache=new Dx),s;default:throw Error(i(435,o.tag))}}function yh(o,s){var h=OE(o);s.forEach(function(y){if(!h.has(y)){h.add(y);var C=WE.bind(null,o,y);y.then(C,C)}})}function ws(o,s){var h=s.deletions;if(h!==null)for(var y=0;y<h.length;y++){var C=h[y],T=o,q=s,le=q;e:for(;le!==null;){switch(le.tag){case 27:if(Uc(le.type)){Fr=le.stateNode,_s=!1;break e}break;case 5:Fr=le.stateNode,_s=!1;break e;case 3:case 4:Fr=le.stateNode.containerInfo,_s=!0;break e}le=le.return}if(Fr===null)throw Error(i(160));Px(T,q,C),Fr=null,_s=!1,T=C.alternate,T!==null&&(T.return=null),C.return=null}if(s.subtreeFlags&13886)for(s=s.child;s!==null;)Bx(s,o),s=s.sibling}var fl=null;function Bx(o,s){var h=o.alternate,y=o.flags;switch(o.tag){case 0:case 11:case 14:case 15:ws(s,o),Ss(o),y&4&&(Mc(3,o,o.return),Jd(3,o),Mc(5,o,o.return));break;case 1:ws(s,o),Ss(o),y&512&&(Ga||h===null||Il(h,h.return)),y&64&&oc&&(o=o.updateQueue,o!==null&&(y=o.callbacks,y!==null&&(h=o.shared.hiddenCallbacks,o.shared.hiddenCallbacks=h===null?y:h.concat(y))));break;case 26:var C=fl;if(ws(s,o),Ss(o),y&512&&(Ga||h===null||Il(h,h.return)),y&4){var T=h!==null?h.memoizedState:null;if(y=o.memoizedState,h===null)if(y===null)if(o.stateNode===null){e:{y=o.type,h=o.memoizedProps,C=C.ownerDocument||C;t:switch(y){case"title":T=C.getElementsByTagName("title")[0],(!T||T[Gr]||T[ti]||T.namespaceURI==="http://www.w3.org/2000/svg"||T.hasAttribute("itemprop"))&&(T=C.createElement(y),C.head.insertBefore(T,C.querySelector("head > title"))),Po(T,y,h),T[ti]=o,ir(T),y=T;break e;case"link":var q=B1("link","href",C).get(y+(h.href||""));if(q){for(var le=0;le<q.length;le++)if(T=q[le],T.getAttribute("href")===(h.href==null||h.href===""?null:h.href)&&T.getAttribute("rel")===(h.rel==null?null:h.rel)&&T.getAttribute("title")===(h.title==null?null:h.title)&&T.getAttribute("crossorigin")===(h.crossOrigin==null?null:h.crossOrigin)){q.splice(le,1);break t}}T=C.createElement(y),Po(T,y,h),C.head.appendChild(T);break;case"meta":if(q=B1("meta","content",C).get(y+(h.content||""))){for(le=0;le<q.length;le++)if(T=q[le],T.getAttribute("content")===(h.content==null?null:""+h.content)&&T.getAttribute("name")===(h.name==null?null:h.name)&&T.getAttribute("property")===(h.property==null?null:h.property)&&T.getAttribute("http-equiv")===(h.httpEquiv==null?null:h.httpEquiv)&&T.getAttribute("charset")===(h.charSet==null?null:h.charSet)){q.splice(le,1);break t}}T=C.createElement(y),Po(T,y,h),C.head.appendChild(T);break;default:throw Error(i(468,y))}T[ti]=o,ir(T),y=T}o.stateNode=y}else F1(C,o.type,o.stateNode);else o.stateNode=z1(C,y,o.memoizedProps);else T!==y?(T===null?h.stateNode!==null&&(h=h.stateNode,h.parentNode.removeChild(h)):T.count--,y===null?F1(C,o.type,o.stateNode):z1(C,y,o.memoizedProps)):y===null&&o.stateNode!==null&&Jg(o,o.memoizedProps,h.memoizedProps)}break;case 27:ws(s,o),Ss(o),y&512&&(Ga||h===null||Il(h,h.return)),h!==null&&y&4&&Jg(o,o.memoizedProps,h.memoizedProps);break;case 5:if(ws(s,o),Ss(o),y&512&&(Ga||h===null||Il(h,h.return)),o.flags&32){C=o.stateNode;try{sa(C,"")}catch(on){er(o,o.return,on)}}y&4&&o.stateNode!=null&&(C=o.memoizedProps,Jg(o,C,h!==null?h.memoizedProps:C)),y&1024&&(nm=!0);break;case 6:if(ws(s,o),Ss(o),y&4){if(o.stateNode===null)throw Error(i(162));y=o.memoizedProps,h=o.stateNode;try{h.nodeValue=y}catch(on){er(o,o.return,on)}}break;case 3:if(Mh=null,C=fl,fl=Nh(s.containerInfo),ws(s,o),fl=C,Ss(o),y&4&&h!==null&&h.memoizedState.isDehydrated)try{cd(s.containerInfo)}catch(on){er(o,o.return,on)}nm&&(nm=!1,Fx(o));break;case 4:y=fl,fl=Nh(o.stateNode.containerInfo),ws(s,o),Ss(o),fl=y;break;case 12:ws(s,o),Ss(o);break;case 31:ws(s,o),Ss(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,yh(o,y)));break;case 13:ws(s,o),Ss(o),o.child.flags&8192&&o.memoizedState!==null!=(h!==null&&h.memoizedState!==null)&&(bh=xn()),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,yh(o,y)));break;case 22:C=o.memoizedState!==null;var Oe=h!==null&&h.memoizedState!==null,at=oc,yt=Ga;if(oc=at||C,Ga=yt||Oe,ws(s,o),Ga=yt,oc=at,Ss(o),y&8192)e:for(s=o.stateNode,s._visibility=C?s._visibility&-2:s._visibility|1,C&&(h===null||Oe||oc||Ga||fu(o)),h=null,s=o;;){if(s.tag===5||s.tag===26){if(h===null){Oe=h=s;try{if(T=Oe.stateNode,C)q=T.style,typeof q.setProperty=="function"?q.setProperty("display","none","important"):q.display="none";else{le=Oe.stateNode;var St=Oe.memoizedProps.style,st=St!=null&&St.hasOwnProperty("display")?St.display:null;le.style.display=st==null||typeof st=="boolean"?"":(""+st).trim()}}catch(on){er(Oe,Oe.return,on)}}}else if(s.tag===6){if(h===null){Oe=s;try{Oe.stateNode.nodeValue=C?"":Oe.memoizedProps}catch(on){er(Oe,Oe.return,on)}}}else if(s.tag===18){if(h===null){Oe=s;try{var ct=Oe.stateNode;C?j1(ct,!0):j1(Oe.stateNode,!1)}catch(on){er(Oe,Oe.return,on)}}}else if((s.tag!==22&&s.tag!==23||s.memoizedState===null||s===o)&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===o)break e;for(;s.sibling===null;){if(s.return===null||s.return===o)break e;h===s&&(h=null),s=s.return}h===s&&(h=null),s.sibling.return=s.return,s=s.sibling}y&4&&(y=o.updateQueue,y!==null&&(h=y.retryQueue,h!==null&&(y.retryQueue=null,yh(o,h))));break;case 19:ws(s,o),Ss(o),y&4&&(y=o.updateQueue,y!==null&&(o.updateQueue=null,yh(o,y)));break;case 30:break;case 21:break;default:ws(s,o),Ss(o)}}function Ss(o){var s=o.flags;if(s&2){try{for(var h,y=o.return;y!==null;){if(Rx(y)){h=y;break}y=y.return}if(h==null)throw Error(i(160));switch(h.tag){case 27:var C=h.stateNode,T=em(o);vh(o,T,C);break;case 5:var q=h.stateNode;h.flags&32&&(sa(q,""),h.flags&=-33);var le=em(o);vh(o,le,q);break;case 3:case 4:var Oe=h.stateNode.containerInfo,at=em(o);tm(o,at,Oe);break;default:throw Error(i(161))}}catch(yt){er(o,o.return,yt)}o.flags&=-3}s&4096&&(o.flags&=-4097)}function Fx(o){if(o.subtreeFlags&1024)for(o=o.child;o!==null;){var s=o;Fx(s),s.tag===5&&s.flags&1024&&s.stateNode.reset(),o=o.sibling}}function lc(o,s){if(s.subtreeFlags&8772)for(s=s.child;s!==null;)Mx(o,s.alternate,s),s=s.sibling}function fu(o){for(o=o.child;o!==null;){var s=o;switch(s.tag){case 0:case 11:case 14:case 15:Mc(4,s,s.return),fu(s);break;case 1:Il(s,s.return);var h=s.stateNode;typeof h.componentWillUnmount=="function"&&jx(s,s.return,h),fu(s);break;case 27:uf(s.stateNode);case 26:case 5:Il(s,s.return),fu(s);break;case 22:s.memoizedState===null&&fu(s);break;case 30:fu(s);break;default:fu(s)}o=o.sibling}}function cc(o,s,h){for(h=h&&(s.subtreeFlags&8772)!==0,s=s.child;s!==null;){var y=s.alternate,C=o,T=s,q=T.flags;switch(T.tag){case 0:case 11:case 15:cc(C,T,h),Jd(4,T);break;case 1:if(cc(C,T,h),y=T,C=y.stateNode,typeof C.componentDidMount=="function")try{C.componentDidMount()}catch(at){er(y,y.return,at)}if(y=T,C=y.updateQueue,C!==null){var le=y.stateNode;try{var Oe=C.shared.hiddenCallbacks;if(Oe!==null)for(C.shared.hiddenCallbacks=null,C=0;C<Oe.length;C++)_o(Oe[C],le)}catch(at){er(y,y.return,at)}}h&&q&64&&Tx(T),ef(T,T.return);break;case 27:Nx(T);case 26:case 5:cc(C,T,h),h&&y===null&&q&4&&kx(T),ef(T,T.return);break;case 12:cc(C,T,h);break;case 31:cc(C,T,h),h&&q&4&&Ix(C,T);break;case 13:cc(C,T,h),h&&q&4&&zx(C,T);break;case 22:T.memoizedState===null&&cc(C,T,h),ef(T,T.return);break;case 30:break;default:cc(C,T,h)}s=s.sibling}}function im(o,s){var h=null;o!==null&&o.memoizedState!==null&&o.memoizedState.cachePool!==null&&(h=o.memoizedState.cachePool.pool),o=null,s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(o=s.memoizedState.cachePool.pool),o!==h&&(o!=null&&o.refCount++,h!=null&&su(h))}function rm(o,s){o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&su(o))}function hl(o,s,h,y){if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Ux(o,s,h,y),s=s.sibling}function Ux(o,s,h,y){var C=s.flags;switch(s.tag){case 0:case 11:case 15:hl(o,s,h,y),C&2048&&Jd(9,s);break;case 1:hl(o,s,h,y);break;case 3:hl(o,s,h,y),C&2048&&(o=null,s.alternate!==null&&(o=s.alternate.memoizedState.cache),s=s.memoizedState.cache,s!==o&&(s.refCount++,o!=null&&su(o)));break;case 12:if(C&2048){hl(o,s,h,y),o=s.stateNode;try{var T=s.memoizedProps,q=T.id,le=T.onPostCommit;typeof le=="function"&&le(q,s.alternate===null?"mount":"update",o.passiveEffectDuration,-0)}catch(Oe){er(s,s.return,Oe)}}else hl(o,s,h,y);break;case 31:hl(o,s,h,y);break;case 13:hl(o,s,h,y);break;case 23:break;case 22:T=s.stateNode,q=s.alternate,s.memoizedState!==null?T._visibility&2?hl(o,s,h,y):tf(o,s):T._visibility&2?hl(o,s,h,y):(T._visibility|=2,$u(o,s,h,y,(s.subtreeFlags&10256)!==0||!1)),C&2048&&im(q,s);break;case 24:hl(o,s,h,y),C&2048&&rm(s.alternate,s);break;default:hl(o,s,h,y)}}function $u(o,s,h,y,C){for(C=C&&((s.subtreeFlags&10256)!==0||!1),s=s.child;s!==null;){var T=o,q=s,le=h,Oe=y,at=q.flags;switch(q.tag){case 0:case 11:case 15:$u(T,q,le,Oe,C),Jd(8,q);break;case 23:break;case 22:var yt=q.stateNode;q.memoizedState!==null?yt._visibility&2?$u(T,q,le,Oe,C):tf(T,q):(yt._visibility|=2,$u(T,q,le,Oe,C)),C&&at&2048&&im(q.alternate,q);break;case 24:$u(T,q,le,Oe,C),C&&at&2048&&rm(q.alternate,q);break;default:$u(T,q,le,Oe,C)}s=s.sibling}}function tf(o,s){if(s.subtreeFlags&10256)for(s=s.child;s!==null;){var h=o,y=s,C=y.flags;switch(y.tag){case 22:tf(h,y),C&2048&&im(y.alternate,y);break;case 24:tf(h,y),C&2048&&rm(y.alternate,y);break;default:tf(h,y)}s=s.sibling}}var nf=8192;function Ju(o,s,h){if(o.subtreeFlags&nf)for(o=o.child;o!==null;)Hx(o,s,h),o=o.sibling}function Hx(o,s,h){switch(o.tag){case 26:Ju(o,s,h),o.flags&nf&&o.memoizedState!==null&&_A(h,fl,o.memoizedState,o.memoizedProps);break;case 5:Ju(o,s,h);break;case 3:case 4:var y=fl;fl=Nh(o.stateNode.containerInfo),Ju(o,s,h),fl=y;break;case 22:o.memoizedState===null&&(y=o.alternate,y!==null&&y.memoizedState!==null?(y=nf,nf=16777216,Ju(o,s,h),nf=y):Ju(o,s,h));break;default:Ju(o,s,h)}}function qx(o){var s=o.alternate;if(s!==null&&(o=s.child,o!==null)){s.child=null;do s=o.sibling,o.sibling=null,o=s;while(o!==null)}}function rf(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var y=s[h];So=y,Gx(y,o)}qx(o)}if(o.subtreeFlags&10256)for(o=o.child;o!==null;)Wx(o),o=o.sibling}function Wx(o){switch(o.tag){case 0:case 11:case 15:rf(o),o.flags&2048&&Mc(9,o,o.return);break;case 3:rf(o);break;case 12:rf(o);break;case 22:var s=o.stateNode;o.memoizedState!==null&&s._visibility&2&&(o.return===null||o.return.tag!==13)?(s._visibility&=-3,xh(o)):rf(o);break;default:rf(o)}}function xh(o){var s=o.deletions;if((o.flags&16)!==0){if(s!==null)for(var h=0;h<s.length;h++){var y=s[h];So=y,Gx(y,o)}qx(o)}for(o=o.child;o!==null;){switch(s=o,s.tag){case 0:case 11:case 15:Mc(8,s,s.return),xh(s);break;case 22:h=s.stateNode,h._visibility&2&&(h._visibility&=-3,xh(s));break;default:xh(s)}o=o.sibling}}function Gx(o,s){for(;So!==null;){var h=So;switch(h.tag){case 0:case 11:case 15:Mc(8,h,s);break;case 23:case 22:if(h.memoizedState!==null&&h.memoizedState.cachePool!==null){var y=h.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:su(h.memoizedState.cache)}if(y=h.child,y!==null)y.return=h,So=y;else e:for(h=o;So!==null;){y=So;var C=y.sibling,T=y.return;if(Ox(y),y===h){So=null;break e}if(C!==null){C.return=T,So=C;break e}So=T}}}var PE={getCacheForType:function(o){var s=oo($r),h=s.data.get(o);return h===void 0&&(h=o(),s.data.set(o,h)),h},cacheSignal:function(){return oo($r).controller.signal}},IE=typeof WeakMap=="function"?WeakMap:Map,Yi=0,xr=null,mi=null,_i=0,Ji=0,Hs=null,Oc=!1,ed=!1,am=!1,uc=0,ga=0,Pc=0,hu=0,om=0,qs=0,td=0,af=null,Cs=null,sm=!1,bh=0,Vx=0,_h=1/0,wh=null,Ic=null,lo=0,zc=null,nd=null,dc=0,lm=0,cm=null,Yx=null,of=0,um=null;function Ws(){return(Yi&2)!==0&&_i!==0?_i&-_i:oe.T!==null?mm():nr()}function Zx(){if(qs===0)if((_i&536870912)===0||ci){var o=yi;yi<<=1,(yi&3932160)===0&&(yi=262144),qs=o}else qs=536870912;return o=Rr.current,o!==null&&(o.flags|=32),qs}function Es(o,s,h){(o===xr&&(Ji===2||Ji===9)||o.cancelPendingCommit!==null)&&(id(o,0),Bc(o,_i,qs,!1)),nn(o,h),((Yi&2)===0||o!==xr)&&(o===xr&&((Yi&2)===0&&(hu|=h),ga===4&&Bc(o,_i,qs,!1)),zl(o))}function Kx(o,s,h){if((Yi&6)!==0)throw Error(i(327));var y=!h&&(s&127)===0&&(s&o.expiredLanes)===0||Ya(o,s),C=y?FE(o,s):fm(o,s,!0),T=y;do{if(C===0){ed&&!y&&Bc(o,s,0,!1);break}else{if(h=o.current.alternate,T&&!zE(h)){C=fm(o,s,!1),T=!1;continue}if(C===2){if(T=s,o.errorRecoveryDisabledLanes&T)var q=0;else q=o.pendingLanes&-536870913,q=q!==0?q:q&536870912?536870912:0;if(q!==0){s=q;e:{var le=o;C=af;var Oe=le.current.memoizedState.isDehydrated;if(Oe&&(id(le,q).flags|=256),q=fm(le,q,!1),q!==2){if(am&&!Oe){le.errorRecoveryDisabledLanes|=T,hu|=T,C=4;break e}T=Cs,Cs=C,T!==null&&(Cs===null?Cs=T:Cs.push.apply(Cs,T))}C=q}if(T=!1,C!==2)continue}}if(C===1){id(o,0),Bc(o,s,0,!0);break}e:{switch(y=o,T=C,T){case 0:case 1:throw Error(i(345));case 4:if((s&4194048)!==s)break;case 6:Bc(y,s,qs,!Oc);break e;case 2:Cs=null;break;case 3:case 5:break;default:throw Error(i(329))}if((s&62914560)===s&&(C=bh+300-xn(),10<C)){if(Bc(y,s,qs,!Oc),ri(y,0,!0)!==0)break e;dc=s,y.timeoutHandle=A1(Xx.bind(null,y,h,Cs,wh,sm,s,qs,hu,td,Oc,T,"Throttled",-0,0),C);break e}Xx(y,h,Cs,wh,sm,s,qs,hu,td,Oc,T,null,-0,0)}}break}while(!0);zl(o)}function Xx(o,s,h,y,C,T,q,le,Oe,at,yt,St,st,ct){if(o.timeoutHandle=-1,St=s.subtreeFlags,St&8192||(St&16785408)===16785408){St={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Vr},Hx(s,T,St);var on=(T&62914560)===T?bh-xn():(T&4194048)===T?Vx-xn():0;if(on=wA(St,on),on!==null){dc=T,o.cancelPendingCommit=on(r1.bind(null,o,s,T,h,y,C,q,le,Oe,yt,St,null,st,ct)),Bc(o,T,q,!at);return}}r1(o,s,T,h,y,C,q,le,Oe)}function zE(o){for(var s=o;;){var h=s.tag;if((h===0||h===11||h===15)&&s.flags&16384&&(h=s.updateQueue,h!==null&&(h=h.stores,h!==null)))for(var y=0;y<h.length;y++){var C=h[y],T=C.getSnapshot;C=C.value;try{if(!vr(T(),C))return!1}catch{return!1}}if(h=s.child,s.subtreeFlags&16384&&h!==null)h.return=s,s=h;else{if(s===o)break;for(;s.sibling===null;){if(s.return===null||s.return===o)return!0;s=s.return}s.sibling.return=s.return,s=s.sibling}}return!0}function Bc(o,s,h,y){s&=~om,s&=~hu,o.suspendedLanes|=s,o.pingedLanes&=~s,y&&(o.warmLanes|=s),y=o.expirationTimes;for(var C=s;0<C;){var T=31-Nt(C),q=1<<T;y[T]=-1,C&=~q}h!==0&&Za(o,h,s)}function Sh(){return(Yi&6)===0?(sf(0),!1):!0}function dm(){if(mi!==null){if(Ji===0)var o=mi.return;else o=mi,ys=Us=null,Gu(o),Et=null,cn=0,o=mi;for(;o!==null;)Lx(o.alternate,o),o=o.return;mi=null}}function id(o,s){var h=o.timeoutHandle;h!==-1&&(o.timeoutHandle=-1,rA(h)),h=o.cancelPendingCommit,h!==null&&(o.cancelPendingCommit=null,h()),dc=0,dm(),xr=o,mi=h=No(o.current,null),_i=s,Ji=0,Hs=null,Oc=!1,ed=Ya(o,s),am=!1,td=qs=om=hu=Pc=ga=0,Cs=af=null,sm=!1,(s&8)!==0&&(s|=s&32);var y=o.entangledLanes;if(y!==0)for(o=o.entanglements,y&=s;0<y;){var C=31-Nt(y),T=1<<C;s|=o[C],y&=~T}return uc=s,On(),h}function Qx(o,s){bn=null,oe.H=Xd,s===qe||s===Ce?(s=xt(),Ji=3):s===it?(s=xt(),Ji=4):Ji=s===qg?8:s!==null&&typeof s=="object"&&typeof s.then=="function"?6:1,Hs=s,mi===null&&(ga=1,fh(o,v(s,o.current)))}function $x(){var o=Rr.current;return o===null?!0:(_i&4194048)===_i?ki===null:(_i&62914560)===_i||(_i&536870912)!==0?o===ki:!1}function Jx(){var o=oe.H;return oe.H=Xd,o===null?Xd:o}function e1(){var o=oe.A;return oe.A=PE,o}function Ch(){ga=4,Oc||(_i&4194048)!==_i&&Rr.current!==null||(ed=!0),(Pc&134217727)===0&&(hu&134217727)===0||xr===null||Bc(xr,_i,qs,!1)}function fm(o,s,h){var y=Yi;Yi|=2;var C=Jx(),T=e1();(xr!==o||_i!==s)&&(wh=null,id(o,s)),s=!1;var q=ga;e:do try{if(Ji!==0&&mi!==null){var le=mi,Oe=Hs;switch(Ji){case 8:dm(),q=6;break e;case 3:case 2:case 9:case 6:Rr.current===null&&(s=!0);var at=Ji;if(Ji=0,Hs=null,rd(o,le,Oe,at),h&&ed){q=0;break e}break;default:at=Ji,Ji=0,Hs=null,rd(o,le,Oe,at)}}BE(),q=ga;break}catch(yt){Qx(o,yt)}while(!0);return s&&o.shellSuspendCounter++,ys=Us=null,Yi=y,oe.H=C,oe.A=T,mi===null&&(xr=null,_i=0,On()),q}function BE(){for(;mi!==null;)t1(mi)}function FE(o,s){var h=Yi;Yi|=2;var y=Jx(),C=e1();xr!==o||_i!==s?(wh=null,_h=xn()+500,id(o,s)):ed=Ya(o,s);e:do try{if(Ji!==0&&mi!==null){s=mi;var T=Hs;t:switch(Ji){case 1:Ji=0,Hs=null,rd(o,s,T,1);break;case 2:case 9:if(et(T)){Ji=0,Hs=null,n1(s);break}s=function(){Ji!==2&&Ji!==9||xr!==o||(Ji=7),zl(o)},T.then(s,s);break e;case 3:Ji=7;break e;case 4:Ji=5;break e;case 7:et(T)?(Ji=0,Hs=null,n1(s)):(Ji=0,Hs=null,rd(o,s,T,7));break;case 5:var q=null;switch(mi.tag){case 26:q=mi.memoizedState;case 5:case 27:var le=mi;if(q?U1(q):le.stateNode.complete){Ji=0,Hs=null;var Oe=le.sibling;if(Oe!==null)mi=Oe;else{var at=le.return;at!==null?(mi=at,Eh(at)):mi=null}break t}}Ji=0,Hs=null,rd(o,s,T,5);break;case 6:Ji=0,Hs=null,rd(o,s,T,6);break;case 8:dm(),ga=6;break e;default:throw Error(i(462))}}UE();break}catch(yt){Qx(o,yt)}while(!0);return ys=Us=null,oe.H=y,oe.A=C,Yi=h,mi!==null?0:(xr=null,_i=0,On(),ga)}function UE(){for(;mi!==null&&!Yt();)t1(mi)}function t1(o){var s=Ex(o.alternate,o,uc);o.memoizedProps=o.pendingProps,s===null?Eh(o):mi=s}function n1(o){var s=o,h=s.alternate;switch(s.tag){case 15:case 0:s=xx(h,s,s.pendingProps,s.type,void 0,_i);break;case 11:s=xx(h,s,s.pendingProps,s.type.render,s.ref,_i);break;case 5:Gu(s);default:Lx(h,s),s=mi=El(s,uc),s=Ex(h,s,uc)}o.memoizedProps=o.pendingProps,s===null?Eh(o):mi=s}function rd(o,s,h,y){ys=Us=null,Gu(s),Et=null,cn=0;var C=s.return;try{if(jE(o,C,s,h,_i)){ga=1,fh(o,v(h,o.current)),mi=null;return}}catch(T){if(C!==null)throw mi=C,T;ga=1,fh(o,v(h,o.current)),mi=null;return}s.flags&32768?(ci||y===1?o=!0:ed||(_i&536870912)!==0?o=!1:(Oc=o=!0,(y===2||y===9||y===3||y===6)&&(y=Rr.current,y!==null&&y.tag===13&&(y.flags|=16384))),i1(s,o)):Eh(s)}function Eh(o){var s=o;do{if((s.flags&32768)!==0){i1(s,Oc);return}o=s.return;var h=NE(s.alternate,s,uc);if(h!==null){mi=h;return}if(s=s.sibling,s!==null){mi=s;return}mi=s=o}while(s!==null);ga===0&&(ga=5)}function i1(o,s){do{var h=DE(o.alternate,o);if(h!==null){h.flags&=32767,mi=h;return}if(h=o.return,h!==null&&(h.flags|=32768,h.subtreeFlags=0,h.deletions=null),!s&&(o=o.sibling,o!==null)){mi=o;return}mi=o=h}while(o!==null);ga=6,mi=null}function r1(o,s,h,y,C,T,q,le,Oe){o.cancelPendingCommit=null;do Ah();while(lo!==0);if((Yi&6)!==0)throw Error(i(327));if(s!==null){if(s===o.current)throw Error(i(177));if(T=s.lanes|s.childLanes,T|=fn,Ao(o,h,T,q,le,Oe),o===xr&&(mi=xr=null,_i=0),nd=s,zc=o,dc=h,lm=T,cm=C,Yx=y,(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?(o.callbackNode=null,o.callbackPriority=0,GE(In,function(){return c1(),null})):(o.callbackNode=null,o.callbackPriority=0),y=(s.flags&13878)!==0,(s.subtreeFlags&13878)!==0||y){y=oe.T,oe.T=null,C=ae.p,ae.p=2,q=Yi,Yi|=4;try{ME(o,s,h)}finally{Yi=q,ae.p=C,oe.T=y}}lo=1,a1(),o1(),s1()}}function a1(){if(lo===1){lo=0;var o=zc,s=nd,h=(s.flags&13878)!==0;if((s.subtreeFlags&13878)!==0||h){h=oe.T,oe.T=null;var y=ae.p;ae.p=2;var C=Yi;Yi|=4;try{Bx(s,o);var T=Cm,q=W(o.containerInfo),le=T.focusedElem,Oe=T.selectionRange;if(q!==le&&le&&le.ownerDocument&&z(le.ownerDocument.documentElement,le)){if(Oe!==null&&$(le)){var at=Oe.start,yt=Oe.end;if(yt===void 0&&(yt=at),"selectionStart"in le)le.selectionStart=at,le.selectionEnd=Math.min(yt,le.value.length);else{var St=le.ownerDocument||document,st=St&&St.defaultView||window;if(st.getSelection){var ct=st.getSelection(),on=le.textContent.length,Rn=Math.min(Oe.start,on),fr=Oe.end===void 0?Rn:Math.min(Oe.end,on);!ct.extend&&Rn>fr&&(q=fr,fr=Rn,Rn=q);var Je=P(le,Rn),We=P(le,fr);if(Je&&We&&(ct.rangeCount!==1||ct.anchorNode!==Je.node||ct.anchorOffset!==Je.offset||ct.focusNode!==We.node||ct.focusOffset!==We.offset)){var rt=St.createRange();rt.setStart(Je.node,Je.offset),ct.removeAllRanges(),Rn>fr?(ct.addRange(rt),ct.extend(We.node,We.offset)):(rt.setEnd(We.node,We.offset),ct.addRange(rt))}}}}for(St=[],ct=le;ct=ct.parentNode;)ct.nodeType===1&&St.push({element:ct,left:ct.scrollLeft,top:ct.scrollTop});for(typeof le.focus=="function"&&le.focus(),le=0;le<St.length;le++){var _t=St[le];_t.element.scrollLeft=_t.left,_t.element.scrollTop=_t.top}}zh=!!Sm,Cm=Sm=null}finally{Yi=C,ae.p=y,oe.T=h}}o.current=s,lo=2}}function o1(){if(lo===2){lo=0;var o=zc,s=nd,h=(s.flags&8772)!==0;if((s.subtreeFlags&8772)!==0||h){h=oe.T,oe.T=null;var y=ae.p;ae.p=2;var C=Yi;Yi|=4;try{Mx(o,s.alternate,s)}finally{Yi=C,ae.p=y,oe.T=h}}lo=3}}function s1(){if(lo===4||lo===3){lo=0,Vt();var o=zc,s=nd,h=dc,y=Yx;(s.subtreeFlags&10256)!==0||(s.flags&10256)!==0?lo=5:(lo=0,nd=zc=null,l1(o,o.pendingLanes));var C=o.pendingLanes;if(C===0&&(Ic=null),Ut(h),s=s.stateNode,hn&&typeof hn.onCommitFiberRoot=="function")try{hn.onCommitFiberRoot(Hn,s,void 0,(s.current.flags&128)===128)}catch{}if(y!==null){s=oe.T,C=ae.p,ae.p=2,oe.T=null;try{for(var T=o.onRecoverableError,q=0;q<y.length;q++){var le=y[q];T(le.value,{componentStack:le.stack})}}finally{oe.T=s,ae.p=C}}(dc&3)!==0&&Ah(),zl(o),C=o.pendingLanes,(h&261930)!==0&&(C&42)!==0?o===um?of++:(of=0,um=o):of=0,sf(0)}}function l1(o,s){(o.pooledCacheLanes&=s)===0&&(s=o.pooledCache,s!=null&&(o.pooledCache=null,su(s)))}function Ah(){return a1(),o1(),s1(),c1()}function c1(){if(lo!==5)return!1;var o=zc,s=lm;lm=0;var h=Ut(dc),y=oe.T,C=ae.p;try{ae.p=32>h?32:h,oe.T=null,h=cm,cm=null;var T=zc,q=dc;if(lo=0,nd=zc=null,dc=0,(Yi&6)!==0)throw Error(i(331));var le=Yi;if(Yi|=4,Wx(T.current),Ux(T,T.current,q,h),Yi=le,sf(0,!1),hn&&typeof hn.onPostCommitFiberRoot=="function")try{hn.onPostCommitFiberRoot(Hn,T)}catch{}return!0}finally{ae.p=C,oe.T=y,l1(o,s)}}function u1(o,s,h){s=v(h,s),s=Hg(o.stateNode,s,2),o=Jn(o,s,2),o!==null&&(nn(o,2),zl(o))}function er(o,s,h){if(o.tag===3)u1(o,o,h);else for(;s!==null;){if(s.tag===3){u1(s,o,h);break}else if(s.tag===1){var y=s.stateNode;if(typeof s.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(Ic===null||!Ic.has(y))){o=v(h,o),h=dx(2),y=Jn(s,h,2),y!==null&&(fx(h,y,s,o),nn(y,2),zl(y));break}}s=s.return}}function hm(o,s,h){var y=o.pingCache;if(y===null){y=o.pingCache=new IE;var C=new Set;y.set(s,C)}else C=y.get(s),C===void 0&&(C=new Set,y.set(s,C));C.has(h)||(am=!0,C.add(h),o=HE.bind(null,o,s,h),s.then(o,o))}function HE(o,s,h){var y=o.pingCache;y!==null&&y.delete(s),o.pingedLanes|=o.suspendedLanes&h,o.warmLanes&=~h,xr===o&&(_i&h)===h&&(ga===4||ga===3&&(_i&62914560)===_i&&300>xn()-bh?(Yi&2)===0&&id(o,0):om|=h,td===_i&&(td=0)),zl(o)}function d1(o,s){s===0&&(s=zo()),o=li(o,s),o!==null&&(nn(o,s),zl(o))}function qE(o){var s=o.memoizedState,h=0;s!==null&&(h=s.retryLane),d1(o,h)}function WE(o,s){var h=0;switch(o.tag){case 31:case 13:var y=o.stateNode,C=o.memoizedState;C!==null&&(h=C.retryLane);break;case 19:y=o.stateNode;break;case 22:y=o.stateNode._retryCache;break;default:throw Error(i(314))}y!==null&&y.delete(s),d1(o,h)}function GE(o,s){return sn(o,s)}var Lh=null,ad=null,pm=!1,Th=!1,gm=!1,Fc=0;function zl(o){o!==ad&&o.next===null&&(ad===null?Lh=ad=o:ad=ad.next=o),Th=!0,pm||(pm=!0,YE())}function sf(o,s){if(!gm&&Th){gm=!0;do for(var h=!1,y=Lh;y!==null;){if(o!==0){var C=y.pendingLanes;if(C===0)var T=0;else{var q=y.suspendedLanes,le=y.pingedLanes;T=(1<<31-Nt(42|o)+1)-1,T&=C&~(q&~le),T=T&201326741?T&201326741|1:T?T|2:0}T!==0&&(h=!0,g1(y,T))}else T=_i,T=ri(y,y===xr?T:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(T&3)===0||Ya(y,T)||(h=!0,g1(y,T));y=y.next}while(h);gm=!1}}function VE(){f1()}function f1(){Th=pm=!1;var o=0;Fc!==0&&iA()&&(o=Fc);for(var s=xn(),h=null,y=Lh;y!==null;){var C=y.next,T=h1(y,s);T===0?(y.next=null,h===null?Lh=C:h.next=C,C===null&&(ad=h)):(h=y,(o!==0||(T&3)!==0)&&(Th=!0)),y=C}lo!==0&&lo!==5||sf(o),Fc!==0&&(Fc=0)}function h1(o,s){for(var h=o.suspendedLanes,y=o.pingedLanes,C=o.expirationTimes,T=o.pendingLanes&-62914561;0<T;){var q=31-Nt(T),le=1<<q,Oe=C[q];Oe===-1?((le&h)===0||(le&y)!==0)&&(C[q]=ia(le,s)):Oe<=s&&(o.expiredLanes|=le),T&=~le}if(s=xr,h=_i,h=ri(o,o===s?h:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y=o.callbackNode,h===0||o===s&&(Ji===2||Ji===9)||o.cancelPendingCommit!==null)return y!==null&&y!==null&&kt(y),o.callbackNode=null,o.callbackPriority=0;if((h&3)===0||Ya(o,h)){if(s=h&-h,s===o.callbackPriority)return s;switch(y!==null&&kt(y),Ut(h)){case 2:case 8:h=Cn;break;case 32:h=In;break;case 268435456:h=En;break;default:h=In}return y=p1.bind(null,o),h=sn(h,y),o.callbackPriority=s,o.callbackNode=h,s}return y!==null&&y!==null&&kt(y),o.callbackPriority=2,o.callbackNode=null,2}function p1(o,s){if(lo!==0&&lo!==5)return o.callbackNode=null,o.callbackPriority=0,null;var h=o.callbackNode;if(Ah()&&o.callbackNode!==h)return null;var y=_i;return y=ri(o,o===xr?y:0,o.cancelPendingCommit!==null||o.timeoutHandle!==-1),y===0?null:(Kx(o,y,s),h1(o,xn()),o.callbackNode!=null&&o.callbackNode===h?p1.bind(null,o):null)}function g1(o,s){if(Ah())return null;Kx(o,s,!0)}function YE(){aA(function(){(Yi&6)!==0?sn($t,VE):f1()})}function mm(){if(Fc===0){var o=b;o===0&&(o=vt,vt<<=1,(vt&261888)===0&&(vt=256)),Fc=o}return Fc}function m1(o){return o==null||typeof o=="symbol"||typeof o=="boolean"?null:typeof o=="function"?o:gr(""+o)}function v1(o,s){var h=s.ownerDocument.createElement("input");return h.name=s.name,h.value=s.value,o.id&&h.setAttribute("form",o.id),s.parentNode.insertBefore(h,s),o=new FormData(o),h.parentNode.removeChild(h),o}function ZE(o,s,h,y,C){if(s==="submit"&&h&&h.stateNode===C){var T=m1((C[bi]||null).action),q=y.submitter;q&&(s=(s=q[bi]||null)?m1(s.formAction):q.getAttribute("formAction"),s!==null&&(T=s,q=null));var le=new yo("action","action",null,y,C);o.push({event:le,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(Fc!==0){var Oe=q?v1(C,q):new FormData(C);Pg(h,{pending:!0,data:Oe,method:C.method,action:T},null,Oe)}}else typeof T=="function"&&(le.preventDefault(),Oe=q?v1(C,q):new FormData(C),Pg(h,{pending:!0,data:Oe,method:C.method,action:T},T,Oe))},currentTarget:C}]})}}for(var vm=0;vm<Mt.length;vm++){var ym=Mt[vm],KE=ym.toLowerCase(),XE=ym[0].toUpperCase()+ym.slice(1);jt(KE,"on"+XE)}jt(nt,"onAnimationEnd"),jt(Qe,"onAnimationIteration"),jt(ft,"onAnimationStart"),jt("dblclick","onDoubleClick"),jt("focusin","onFocus"),jt("focusout","onBlur"),jt(Tt,"onTransitionRun"),jt(Dt,"onTransitionStart"),jt(It,"onTransitionCancel"),jt(Lt,"onTransitionEnd"),Qa("onMouseEnter",["mouseout","mouseover"]),Qa("onMouseLeave",["mouseout","mouseover"]),Qa("onPointerEnter",["pointerout","pointerover"]),Qa("onPointerLeave",["pointerout","pointerover"]),Xa("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Xa("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Xa("onBeforeInput",["compositionend","keypress","textInput","paste"]),Xa("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Xa("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var lf="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),QE=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(lf));function y1(o,s){s=(s&4)!==0;for(var h=0;h<o.length;h++){var y=o[h],C=y.event;y=y.listeners;e:{var T=void 0;if(s)for(var q=y.length-1;0<=q;q--){var le=y[q],Oe=le.instance,at=le.currentTarget;if(le=le.listener,Oe!==T&&C.isPropagationStopped())break e;T=le,C.currentTarget=at;try{T(C)}catch(yt){Wt(yt)}C.currentTarget=null,T=Oe}else for(q=0;q<y.length;q++){if(le=y[q],Oe=le.instance,at=le.currentTarget,le=le.listener,Oe!==T&&C.isPropagationStopped())break e;T=le,C.currentTarget=at;try{T(C)}catch(yt){Wt(yt)}C.currentTarget=null,T=Oe}}}}function vi(o,s){var h=s[pr];h===void 0&&(h=s[pr]=new Set);var y=o+"__bubble";h.has(y)||(x1(s,o,2,!1),h.add(y))}function xm(o,s,h){var y=0;s&&(y|=4),x1(h,o,y,s)}var jh="_reactListening"+Math.random().toString(36).slice(2);function bm(o){if(!o[jh]){o[jh]=!0,Bo.forEach(function(h){h!=="selectionchange"&&(QE.has(h)||xm(h,!1,o),xm(h,!0,o))});var s=o.nodeType===9?o:o.ownerDocument;s===null||s[jh]||(s[jh]=!0,xm("selectionchange",!1,s))}}function x1(o,s,h,y){switch(Z1(s)){case 2:var C=EA;break;case 8:C=AA;break;default:C=Om}h=C.bind(null,s,h,o),C=void 0,!Os||s!=="touchstart"&&s!=="touchmove"&&s!=="wheel"||(C=!0),y?C!==void 0?o.addEventListener(s,h,{capture:!0,passive:C}):o.addEventListener(s,h,!0):C!==void 0?o.addEventListener(s,h,{passive:C}):o.addEventListener(s,h,!1)}function _m(o,s,h,y,C){var T=y;if((s&1)===0&&(s&2)===0&&y!==null)e:for(;;){if(y===null)return;var q=y.tag;if(q===3||q===4){var le=y.stateNode.containerInfo;if(le===C)break;if(q===4)for(q=y.return;q!==null;){var Oe=q.tag;if((Oe===3||Oe===4)&&q.stateNode.containerInfo===C)return;q=q.return}for(;le!==null;){if(q=Pa(le),q===null)return;if(Oe=q.tag,Oe===5||Oe===6||Oe===26||Oe===27){y=T=q;continue e}le=le.parentNode}}y=y.return}as(function(){var at=T,yt=Fo(h),St=[];e:{var st=Gt.get(o);if(st!==void 0){var ct=yo,on=o;switch(o){case"keypress":if(xa(h)===0)break e;case"keydown":case"keyup":ct=Qn;break;case"focusin":on="focus",ct=xo;break;case"focusout":on="blur",ct=xo;break;case"beforeblur":case"afterblur":ct=xo;break;case"click":if(h.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ct=Ps;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ct=Uo;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ct=mr;break;case nt:case Qe:case ft:ct=D;break;case Lt:ct=_r;break;case"scroll":case"scrollend":ct=Bn;break;case"wheel":ct=wr;break;case"copy":case"cut":case"paste":ct=we;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ct=or;break;case"toggle":case"beforetoggle":ct=Ho}var Rn=(s&4)!==0,fr=!Rn&&(o==="scroll"||o==="scrollend"),Je=Rn?st!==null?st+"Capture":null:st;Rn=[];for(var We=at,rt;We!==null;){var _t=We;if(rt=_t.stateNode,_t=_t.tag,_t!==5&&_t!==26&&_t!==27||rt===null||Je===null||(_t=Zr(We,Je),_t!=null&&Rn.push(cf(We,_t,rt))),fr)break;We=We.return}0<Rn.length&&(st=new ct(st,on,null,h,yt),St.push({event:st,listeners:Rn}))}}if((s&7)===0){e:{if(st=o==="mouseover"||o==="pointerover",ct=o==="mouseout"||o==="pointerout",st&&h!==Yr&&(on=h.relatedTarget||h.fromElement)&&(Pa(on)||on[Zi]))break e;if((ct||st)&&(st=yt.window===yt?yt:(st=yt.ownerDocument)?st.defaultView||st.parentWindow:window,ct?(on=h.relatedTarget||h.toElement,ct=at,on=on?Pa(on):null,on!==null&&(fr=a(on),Rn=on.tag,on!==fr||Rn!==5&&Rn!==27&&Rn!==6)&&(on=null)):(ct=null,on=at),ct!==on)){if(Rn=Ps,_t="onMouseLeave",Je="onMouseEnter",We="mouse",(o==="pointerout"||o==="pointerover")&&(Rn=or,_t="onPointerLeave",Je="onPointerEnter",We="pointer"),fr=ct==null?st:aa(ct),rt=on==null?st:aa(on),st=new Rn(_t,We+"leave",ct,h,yt),st.target=fr,st.relatedTarget=rt,_t=null,Pa(yt)===at&&(Rn=new Rn(Je,We+"enter",on,h,yt),Rn.target=rt,Rn.relatedTarget=fr,_t=Rn),fr=_t,ct&&on)t:{for(Rn=$E,Je=ct,We=on,rt=0,_t=Je;_t;_t=Rn(_t))rt++;_t=0;for(var wn=We;wn;wn=Rn(wn))_t++;for(;0<rt-_t;)Je=Rn(Je),rt--;for(;0<_t-rt;)We=Rn(We),_t--;for(;rt--;){if(Je===We||We!==null&&Je===We.alternate){Rn=Je;break t}Je=Rn(Je),We=Rn(We)}Rn=null}else Rn=null;ct!==null&&b1(St,st,ct,Rn,!1),on!==null&&fr!==null&&b1(St,fr,on,Rn,!0)}}e:{if(st=at?aa(at):window,ct=st.nodeName&&st.nodeName.toLowerCase(),ct==="select"||ct==="input"&&st.type==="file")var Hi=Ha;else if(_a(st))if(lr)Hi=Ca;else{Hi=Mi;var pn=Sa}else ct=st.nodeName,!ct||ct.toLowerCase()!=="input"||st.type!=="checkbox"&&st.type!=="radio"?at&&Ms(at.elementType)&&(Hi=Ha):Hi=Ro;if(Hi&&(Hi=Hi(o,at))){Ua(St,Hi,h,yt);break e}pn&&pn(o,st,at),o==="focusout"&&at&&st.type==="number"&&at.memoizedProps.value!=null&&Ja(st,"number",st.value)}switch(pn=at?aa(at):window,o){case"focusin":(_a(pn)||pn.contentEditable==="true")&&(be=pn,He=at,Ze=null);break;case"focusout":Ze=He=be=null;break;case"mousedown":Be=!0;break;case"contextmenu":case"mouseup":case"dragend":Be=!1,je(St,h,yt);break;case"selectionchange":if(ge)break;case"keydown":case"keyup":je(St,h,yt)}var ii;if(io)e:{switch(o){case"compositionstart":var wi="onCompositionStart";break e;case"compositionend":wi="onCompositionEnd";break e;case"compositionupdate":wi="onCompositionUpdate";break e}wi=void 0}else jo?ss(o,h)&&(wi="onCompositionEnd"):o==="keydown"&&h.keyCode===229&&(wi="onCompositionStart");wi&&(ro&&h.locale!=="ko"&&(jo||wi!=="onCompositionStart"?wi==="onCompositionEnd"&&jo&&(ii=za()):(Kr=yt,mo="value"in Kr?Kr.value:Kr.textContent,jo=!0)),pn=kh(at,wi),0<pn.length&&(wi=new Ke(wi,o,null,h,yt),St.push({event:wi,listeners:pn}),ii?wi.data=ii:(ii=Bs(h),ii!==null&&(wi.data=ii)))),(ii=zs?Fi(o,h):Fa(o,h))&&(wi=kh(at,"onBeforeInput"),0<wi.length&&(pn=new Ke("onBeforeInput","beforeinput",null,h,yt),St.push({event:pn,listeners:wi}),pn.data=ii)),ZE(St,o,at,h,yt)}y1(St,s)})}function cf(o,s,h){return{instance:o,listener:s,currentTarget:h}}function kh(o,s){for(var h=s+"Capture",y=[];o!==null;){var C=o,T=C.stateNode;if(C=C.tag,C!==5&&C!==26&&C!==27||T===null||(C=Zr(o,h),C!=null&&y.unshift(cf(o,C,T)),C=Zr(o,s),C!=null&&y.push(cf(o,C,T))),o.tag===3)return y;o=o.return}return[]}function $E(o){if(o===null)return null;do o=o.return;while(o&&o.tag!==5&&o.tag!==27);return o||null}function b1(o,s,h,y,C){for(var T=s._reactName,q=[];h!==null&&h!==y;){var le=h,Oe=le.alternate,at=le.stateNode;if(le=le.tag,Oe!==null&&Oe===y)break;le!==5&&le!==26&&le!==27||at===null||(Oe=at,C?(at=Zr(h,T),at!=null&&q.unshift(cf(h,at,Oe))):C||(at=Zr(h,T),at!=null&&q.push(cf(h,at,Oe)))),h=h.return}q.length!==0&&o.push({event:s,listeners:q})}var JE=/\r\n?/g,eA=/\u0000|\uFFFD/g;function _1(o){return(typeof o=="string"?o:""+o).replace(JE,`
`).replace(eA,"")}function w1(o,s){return s=_1(s),_1(o)===s}function dr(o,s,h,y,C,T){switch(h){case"children":typeof y=="string"?s==="body"||s==="textarea"&&y===""||sa(o,y):(typeof y=="number"||typeof y=="bigint")&&s!=="body"&&sa(o,""+y);break;case"className":di(o,"class",y);break;case"tabIndex":di(o,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":di(o,h,y);break;case"style":Ds(o,y,T);break;case"data":if(s!=="object"){di(o,"data",y);break}case"src":case"href":if(y===""&&(s!=="a"||h!=="href")){o.removeAttribute(h);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(h);break}y=gr(""+y),o.setAttribute(h,y);break;case"action":case"formAction":if(typeof y=="function"){o.setAttribute(h,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof T=="function"&&(h==="formAction"?(s!=="input"&&dr(o,s,"name",C.name,C,null),dr(o,s,"formEncType",C.formEncType,C,null),dr(o,s,"formMethod",C.formMethod,C,null),dr(o,s,"formTarget",C.formTarget,C,null)):(dr(o,s,"encType",C.encType,C,null),dr(o,s,"method",C.method,C,null),dr(o,s,"target",C.target,C,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){o.removeAttribute(h);break}y=gr(""+y),o.setAttribute(h,y);break;case"onClick":y!=null&&(o.onclick=Vr);break;case"onScroll":y!=null&&vi("scroll",o);break;case"onScrollEnd":y!=null&&vi("scrollend",o);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(C.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"multiple":o.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":o.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){o.removeAttribute("xlink:href");break}h=gr(""+y),o.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",h);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,""+y):o.removeAttribute(h);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,""):o.removeAttribute(h);break;case"capture":case"download":y===!0?o.setAttribute(h,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?o.setAttribute(h,y):o.removeAttribute(h);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?o.setAttribute(h,y):o.removeAttribute(h);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?o.removeAttribute(h):o.setAttribute(h,y);break;case"popover":vi("beforetoggle",o),vi("toggle",o),Ht(o,"popover",y);break;case"xlinkActuate":ya(o,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":ya(o,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":ya(o,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":ya(o,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":ya(o,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":ya(o,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":ya(o,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":ya(o,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":ya(o,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Ht(o,"is",y);break;case"innerText":case"textContent":break;default:(!(2<h.length)||h[0]!=="o"&&h[0]!=="O"||h[1]!=="n"&&h[1]!=="N")&&(h=fs.get(h)||h,Ht(o,h,y))}}function wm(o,s,h,y,C,T){switch(h){case"style":Ds(o,y,T);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(i(61));if(h=y.__html,h!=null){if(C.children!=null)throw Error(i(60));o.innerHTML=h}}break;case"children":typeof y=="string"?sa(o,y):(typeof y=="number"||typeof y=="bigint")&&sa(o,""+y);break;case"onScroll":y!=null&&vi("scroll",o);break;case"onScrollEnd":y!=null&&vi("scrollend",o);break;case"onClick":y!=null&&(o.onclick=Vr);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!oa.hasOwnProperty(h))e:{if(h[0]==="o"&&h[1]==="n"&&(C=h.endsWith("Capture"),s=h.slice(2,C?h.length-7:void 0),T=o[bi]||null,T=T!=null?T[h]:null,typeof T=="function"&&o.removeEventListener(s,T,C),typeof y=="function")){typeof T!="function"&&T!==null&&(h in o?o[h]=null:o.hasAttribute(h)&&o.removeAttribute(h)),o.addEventListener(s,y,C);break e}h in o?o[h]=y:y===!0?o.setAttribute(h,""):Ht(o,h,y)}}}function Po(o,s,h){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":vi("error",o),vi("load",o);var y=!1,C=!1,T;for(T in h)if(h.hasOwnProperty(T)){var q=h[T];if(q!=null)switch(T){case"src":y=!0;break;case"srcSet":C=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:dr(o,s,T,q,h,null)}}C&&dr(o,s,"srcSet",h.srcSet,h,null),y&&dr(o,s,"src",h.src,h,null);return;case"input":vi("invalid",o);var le=T=q=C=null,Oe=null,at=null;for(y in h)if(h.hasOwnProperty(y)){var yt=h[y];if(yt!=null)switch(y){case"name":C=yt;break;case"type":q=yt;break;case"checked":Oe=yt;break;case"defaultChecked":at=yt;break;case"value":T=yt;break;case"defaultValue":le=yt;break;case"children":case"dangerouslySetInnerHTML":if(yt!=null)throw Error(i(137,s));break;default:dr(o,s,y,yt,h,null)}}ns(o,T,le,Oe,at,q,C,!1);return;case"select":vi("invalid",o),y=q=T=null;for(C in h)if(h.hasOwnProperty(C)&&(le=h[C],le!=null))switch(C){case"value":T=le;break;case"defaultValue":q=le;break;case"multiple":y=le;default:dr(o,s,C,le,h,null)}s=T,h=q,o.multiple=!!y,s!=null?Xn(o,!!y,s,!1):h!=null&&Xn(o,!!y,h,!0);return;case"textarea":vi("invalid",o),T=C=y=null;for(q in h)if(h.hasOwnProperty(q)&&(le=h[q],le!=null))switch(q){case"value":y=le;break;case"defaultValue":C=le;break;case"children":T=le;break;case"dangerouslySetInnerHTML":if(le!=null)throw Error(i(91));break;default:dr(o,s,q,le,h,null)}go(o,y,C,T);return;case"option":for(Oe in h)h.hasOwnProperty(Oe)&&(y=h[Oe],y!=null)&&(Oe==="selected"?o.selected=y&&typeof y!="function"&&typeof y!="symbol":dr(o,s,Oe,y,h,null));return;case"dialog":vi("beforetoggle",o),vi("toggle",o),vi("cancel",o),vi("close",o);break;case"iframe":case"object":vi("load",o);break;case"video":case"audio":for(y=0;y<lf.length;y++)vi(lf[y],o);break;case"image":vi("error",o),vi("load",o);break;case"details":vi("toggle",o);break;case"embed":case"source":case"link":vi("error",o),vi("load",o);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(at in h)if(h.hasOwnProperty(at)&&(y=h[at],y!=null))switch(at){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,s));default:dr(o,s,at,y,h,null)}return;default:if(Ms(s)){for(yt in h)h.hasOwnProperty(yt)&&(y=h[yt],y!==void 0&&wm(o,s,yt,y,h,void 0));return}}for(le in h)h.hasOwnProperty(le)&&(y=h[le],y!=null&&dr(o,s,le,y,h,null))}function tA(o,s,h,y){switch(s){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var C=null,T=null,q=null,le=null,Oe=null,at=null,yt=null;for(ct in h){var St=h[ct];if(h.hasOwnProperty(ct)&&St!=null)switch(ct){case"checked":break;case"value":break;case"defaultValue":Oe=St;default:y.hasOwnProperty(ct)||dr(o,s,ct,null,y,St)}}for(var st in y){var ct=y[st];if(St=h[st],y.hasOwnProperty(st)&&(ct!=null||St!=null))switch(st){case"type":T=ct;break;case"name":C=ct;break;case"checked":at=ct;break;case"defaultChecked":yt=ct;break;case"value":q=ct;break;case"defaultValue":le=ct;break;case"children":case"dangerouslySetInnerHTML":if(ct!=null)throw Error(i(137,s));break;default:ct!==St&&dr(o,s,st,ct,y,St)}}Lo(o,q,le,Oe,at,yt,T,C);return;case"select":ct=q=le=st=null;for(T in h)if(Oe=h[T],h.hasOwnProperty(T)&&Oe!=null)switch(T){case"value":break;case"multiple":ct=Oe;default:y.hasOwnProperty(T)||dr(o,s,T,null,y,Oe)}for(C in y)if(T=y[C],Oe=h[C],y.hasOwnProperty(C)&&(T!=null||Oe!=null))switch(C){case"value":st=T;break;case"defaultValue":le=T;break;case"multiple":q=T;default:T!==Oe&&dr(o,s,C,T,y,Oe)}s=le,h=q,y=ct,st!=null?Xn(o,!!h,st,!1):!!y!=!!h&&(s!=null?Xn(o,!!h,s,!0):Xn(o,!!h,h?[]:"",!1));return;case"textarea":ct=st=null;for(le in h)if(C=h[le],h.hasOwnProperty(le)&&C!=null&&!y.hasOwnProperty(le))switch(le){case"value":break;case"children":break;default:dr(o,s,le,null,y,C)}for(q in y)if(C=y[q],T=h[q],y.hasOwnProperty(q)&&(C!=null||T!=null))switch(q){case"value":st=C;break;case"defaultValue":ct=C;break;case"children":break;case"dangerouslySetInnerHTML":if(C!=null)throw Error(i(91));break;default:C!==T&&dr(o,s,q,C,y,T)}po(o,st,ct);return;case"option":for(var on in h)st=h[on],h.hasOwnProperty(on)&&st!=null&&!y.hasOwnProperty(on)&&(on==="selected"?o.selected=!1:dr(o,s,on,null,y,st));for(Oe in y)st=y[Oe],ct=h[Oe],y.hasOwnProperty(Oe)&&st!==ct&&(st!=null||ct!=null)&&(Oe==="selected"?o.selected=st&&typeof st!="function"&&typeof st!="symbol":dr(o,s,Oe,st,y,ct));return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Rn in h)st=h[Rn],h.hasOwnProperty(Rn)&&st!=null&&!y.hasOwnProperty(Rn)&&dr(o,s,Rn,null,y,st);for(at in y)if(st=y[at],ct=h[at],y.hasOwnProperty(at)&&st!==ct&&(st!=null||ct!=null))switch(at){case"children":case"dangerouslySetInnerHTML":if(st!=null)throw Error(i(137,s));break;default:dr(o,s,at,st,y,ct)}return;default:if(Ms(s)){for(var fr in h)st=h[fr],h.hasOwnProperty(fr)&&st!==void 0&&!y.hasOwnProperty(fr)&&wm(o,s,fr,void 0,y,st);for(yt in y)st=y[yt],ct=h[yt],!y.hasOwnProperty(yt)||st===ct||st===void 0&&ct===void 0||wm(o,s,yt,st,y,ct);return}}for(var Je in h)st=h[Je],h.hasOwnProperty(Je)&&st!=null&&!y.hasOwnProperty(Je)&&dr(o,s,Je,null,y,st);for(St in y)st=y[St],ct=h[St],!y.hasOwnProperty(St)||st===ct||st==null&&ct==null||dr(o,s,St,st,y,ct)}function S1(o){switch(o){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function nA(){if(typeof performance.getEntriesByType=="function"){for(var o=0,s=0,h=performance.getEntriesByType("resource"),y=0;y<h.length;y++){var C=h[y],T=C.transferSize,q=C.initiatorType,le=C.duration;if(T&&le&&S1(q)){for(q=0,le=C.responseEnd,y+=1;y<h.length;y++){var Oe=h[y],at=Oe.startTime;if(at>le)break;var yt=Oe.transferSize,St=Oe.initiatorType;yt&&S1(St)&&(Oe=Oe.responseEnd,q+=yt*(Oe<le?1:(le-at)/(Oe-at)))}if(--y,s+=8*(T+q)/(C.duration/1e3),o++,10<o)break}}if(0<o)return s/o/1e6}return navigator.connection&&(o=navigator.connection.downlink,typeof o=="number")?o:5}var Sm=null,Cm=null;function Rh(o){return o.nodeType===9?o:o.ownerDocument}function C1(o){switch(o){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function E1(o,s){if(o===0)switch(s){case"svg":return 1;case"math":return 2;default:return 0}return o===1&&s==="foreignObject"?0:o}function Em(o,s){return o==="textarea"||o==="noscript"||typeof s.children=="string"||typeof s.children=="number"||typeof s.children=="bigint"||typeof s.dangerouslySetInnerHTML=="object"&&s.dangerouslySetInnerHTML!==null&&s.dangerouslySetInnerHTML.__html!=null}var Am=null;function iA(){var o=window.event;return o&&o.type==="popstate"?o===Am?!1:(Am=o,!0):(Am=null,!1)}var A1=typeof setTimeout=="function"?setTimeout:void 0,rA=typeof clearTimeout=="function"?clearTimeout:void 0,L1=typeof Promise=="function"?Promise:void 0,aA=typeof queueMicrotask=="function"?queueMicrotask:typeof L1<"u"?function(o){return L1.resolve(null).then(o).catch(oA)}:A1;function oA(o){setTimeout(function(){throw o})}function Uc(o){return o==="head"}function T1(o,s){var h=s,y=0;do{var C=h.nextSibling;if(o.removeChild(h),C&&C.nodeType===8)if(h=C.data,h==="/$"||h==="/&"){if(y===0){o.removeChild(C),cd(s);return}y--}else if(h==="$"||h==="$?"||h==="$~"||h==="$!"||h==="&")y++;else if(h==="html")uf(o.ownerDocument.documentElement);else if(h==="head"){h=o.ownerDocument.head,uf(h);for(var T=h.firstChild;T;){var q=T.nextSibling,le=T.nodeName;T[Gr]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&T.rel.toLowerCase()==="stylesheet"||h.removeChild(T),T=q}}else h==="body"&&uf(o.ownerDocument.body);h=C}while(h);cd(s)}function j1(o,s){var h=o;o=0;do{var y=h.nextSibling;if(h.nodeType===1?s?(h._stashedDisplay=h.style.display,h.style.display="none"):(h.style.display=h._stashedDisplay||"",h.getAttribute("style")===""&&h.removeAttribute("style")):h.nodeType===3&&(s?(h._stashedText=h.nodeValue,h.nodeValue=""):h.nodeValue=h._stashedText||""),y&&y.nodeType===8)if(h=y.data,h==="/$"){if(o===0)break;o--}else h!=="$"&&h!=="$?"&&h!=="$~"&&h!=="$!"||o++;h=y}while(h)}function Lm(o){var s=o.firstChild;for(s&&s.nodeType===10&&(s=s.nextSibling);s;){var h=s;switch(s=s.nextSibling,h.nodeName){case"HTML":case"HEAD":case"BODY":Lm(h),Jo(h);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(h.rel.toLowerCase()==="stylesheet")continue}o.removeChild(h)}}function sA(o,s,h,y){for(;o.nodeType===1;){var C=h;if(o.nodeName.toLowerCase()!==s.toLowerCase()){if(!y&&(o.nodeName!=="INPUT"||o.type!=="hidden"))break}else if(y){if(!o[Gr])switch(s){case"meta":if(!o.hasAttribute("itemprop"))break;return o;case"link":if(T=o.getAttribute("rel"),T==="stylesheet"&&o.hasAttribute("data-precedence"))break;if(T!==C.rel||o.getAttribute("href")!==(C.href==null||C.href===""?null:C.href)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin)||o.getAttribute("title")!==(C.title==null?null:C.title))break;return o;case"style":if(o.hasAttribute("data-precedence"))break;return o;case"script":if(T=o.getAttribute("src"),(T!==(C.src==null?null:C.src)||o.getAttribute("type")!==(C.type==null?null:C.type)||o.getAttribute("crossorigin")!==(C.crossOrigin==null?null:C.crossOrigin))&&T&&o.hasAttribute("async")&&!o.hasAttribute("itemprop"))break;return o;default:return o}}else if(s==="input"&&o.type==="hidden"){var T=C.name==null?null:""+C.name;if(C.type==="hidden"&&o.getAttribute("name")===T)return o}else return o;if(o=nl(o.nextSibling),o===null)break}return null}function lA(o,s,h){if(s==="")return null;for(;o.nodeType!==3;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!h||(o=nl(o.nextSibling),o===null))return null;return o}function k1(o,s){for(;o.nodeType!==8;)if((o.nodeType!==1||o.nodeName!=="INPUT"||o.type!=="hidden")&&!s||(o=nl(o.nextSibling),o===null))return null;return o}function Tm(o){return o.data==="$?"||o.data==="$~"}function jm(o){return o.data==="$!"||o.data==="$?"&&o.ownerDocument.readyState!=="loading"}function cA(o,s){var h=o.ownerDocument;if(o.data==="$~")o._reactRetry=s;else if(o.data!=="$?"||h.readyState!=="loading")s();else{var y=function(){s(),h.removeEventListener("DOMContentLoaded",y)};h.addEventListener("DOMContentLoaded",y),o._reactRetry=y}}function nl(o){for(;o!=null;o=o.nextSibling){var s=o.nodeType;if(s===1||s===3)break;if(s===8){if(s=o.data,s==="$"||s==="$!"||s==="$?"||s==="$~"||s==="&"||s==="F!"||s==="F")break;if(s==="/$"||s==="/&")return null}}return o}var km=null;function R1(o){o=o.nextSibling;for(var s=0;o;){if(o.nodeType===8){var h=o.data;if(h==="/$"||h==="/&"){if(s===0)return nl(o.nextSibling);s--}else h!=="$"&&h!=="$!"&&h!=="$?"&&h!=="$~"&&h!=="&"||s++}o=o.nextSibling}return null}function N1(o){o=o.previousSibling;for(var s=0;o;){if(o.nodeType===8){var h=o.data;if(h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"){if(s===0)return o;s--}else h!=="/$"&&h!=="/&"||s++}o=o.previousSibling}return null}function D1(o,s,h){switch(s=Rh(h),o){case"html":if(o=s.documentElement,!o)throw Error(i(452));return o;case"head":if(o=s.head,!o)throw Error(i(453));return o;case"body":if(o=s.body,!o)throw Error(i(454));return o;default:throw Error(i(451))}}function uf(o){for(var s=o.attributes;s.length;)o.removeAttributeNode(s[0]);Jo(o)}var il=new Map,M1=new Set;function Nh(o){return typeof o.getRootNode=="function"?o.getRootNode():o.nodeType===9?o:o.ownerDocument}var fc=ae.d;ae.d={f:uA,r:dA,D:fA,C:hA,L:pA,m:gA,X:vA,S:mA,M:yA};function uA(){var o=fc.f(),s=Sh();return o||s}function dA(o){var s=hi(o);s!==null&&s.tag===5&&s.type==="form"?Q0(s):fc.r(o)}var od=typeof document>"u"?null:document;function O1(o,s,h){var y=od;if(y&&typeof s=="string"&&s){var C=ni(s);C='link[rel="'+o+'"][href="'+C+'"]',typeof h=="string"&&(C+='[crossorigin="'+h+'"]'),M1.has(C)||(M1.add(C),o={rel:o,crossOrigin:h,href:s},y.querySelector(C)===null&&(s=y.createElement("link"),Po(s,"link",o),ir(s),y.head.appendChild(s)))}}function fA(o){fc.D(o),O1("dns-prefetch",o,null)}function hA(o,s){fc.C(o,s),O1("preconnect",o,s)}function pA(o,s,h){fc.L(o,s,h);var y=od;if(y&&o&&s){var C='link[rel="preload"][as="'+ni(s)+'"]';s==="image"&&h&&h.imageSrcSet?(C+='[imagesrcset="'+ni(h.imageSrcSet)+'"]',typeof h.imageSizes=="string"&&(C+='[imagesizes="'+ni(h.imageSizes)+'"]')):C+='[href="'+ni(o)+'"]';var T=C;switch(s){case"style":T=sd(o);break;case"script":T=ld(o)}il.has(T)||(o=_({rel:"preload",href:s==="image"&&h&&h.imageSrcSet?void 0:o,as:s},h),il.set(T,o),y.querySelector(C)!==null||s==="style"&&y.querySelector(df(T))||s==="script"&&y.querySelector(ff(T))||(s=y.createElement("link"),Po(s,"link",o),ir(s),y.head.appendChild(s)))}}function gA(o,s){fc.m(o,s);var h=od;if(h&&o){var y=s&&typeof s.as=="string"?s.as:"script",C='link[rel="modulepreload"][as="'+ni(y)+'"][href="'+ni(o)+'"]',T=C;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":T=ld(o)}if(!il.has(T)&&(o=_({rel:"modulepreload",href:o},s),il.set(T,o),h.querySelector(C)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(h.querySelector(ff(T)))return}y=h.createElement("link"),Po(y,"link",o),ir(y),h.head.appendChild(y)}}}function mA(o,s,h){fc.S(o,s,h);var y=od;if(y&&o){var C=Or(y).hoistableStyles,T=sd(o);s=s||"default";var q=C.get(T);if(!q){var le={loading:0,preload:null};if(q=y.querySelector(df(T)))le.loading=5;else{o=_({rel:"stylesheet",href:o,"data-precedence":s},h),(h=il.get(T))&&Rm(o,h);var Oe=q=y.createElement("link");ir(Oe),Po(Oe,"link",o),Oe._p=new Promise(function(at,yt){Oe.onload=at,Oe.onerror=yt}),Oe.addEventListener("load",function(){le.loading|=1}),Oe.addEventListener("error",function(){le.loading|=2}),le.loading|=4,Dh(q,s,y)}q={type:"stylesheet",instance:q,count:1,state:le},C.set(T,q)}}}function vA(o,s){fc.X(o,s);var h=od;if(h&&o){var y=Or(h).hoistableScripts,C=ld(o),T=y.get(C);T||(T=h.querySelector(ff(C)),T||(o=_({src:o,async:!0},s),(s=il.get(C))&&Nm(o,s),T=h.createElement("script"),ir(T),Po(T,"link",o),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},y.set(C,T))}}function yA(o,s){fc.M(o,s);var h=od;if(h&&o){var y=Or(h).hoistableScripts,C=ld(o),T=y.get(C);T||(T=h.querySelector(ff(C)),T||(o=_({src:o,async:!0,type:"module"},s),(s=il.get(C))&&Nm(o,s),T=h.createElement("script"),ir(T),Po(T,"link",o),h.head.appendChild(T)),T={type:"script",instance:T,count:1,state:null},y.set(C,T))}}function P1(o,s,h,y){var C=(C=xe.current)?Nh(C):null;if(!C)throw Error(i(446));switch(o){case"meta":case"title":return null;case"style":return typeof h.precedence=="string"&&typeof h.href=="string"?(s=sd(h.href),h=Or(C).hoistableStyles,y=h.get(s),y||(y={type:"style",instance:null,count:0,state:null},h.set(s,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(h.rel==="stylesheet"&&typeof h.href=="string"&&typeof h.precedence=="string"){o=sd(h.href);var T=Or(C).hoistableStyles,q=T.get(o);if(q||(C=C.ownerDocument||C,q={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},T.set(o,q),(T=C.querySelector(df(o)))&&!T._p&&(q.instance=T,q.state.loading=5),il.has(o)||(h={rel:"preload",as:"style",href:h.href,crossOrigin:h.crossOrigin,integrity:h.integrity,media:h.media,hrefLang:h.hrefLang,referrerPolicy:h.referrerPolicy},il.set(o,h),T||xA(C,o,h,q.state))),s&&y===null)throw Error(i(528,""));return q}if(s&&y!==null)throw Error(i(529,""));return null;case"script":return s=h.async,h=h.src,typeof h=="string"&&s&&typeof s!="function"&&typeof s!="symbol"?(s=ld(h),h=Or(C).hoistableScripts,y=h.get(s),y||(y={type:"script",instance:null,count:0,state:null},h.set(s,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,o))}}function sd(o){return'href="'+ni(o)+'"'}function df(o){return'link[rel="stylesheet"]['+o+"]"}function I1(o){return _({},o,{"data-precedence":o.precedence,precedence:null})}function xA(o,s,h,y){o.querySelector('link[rel="preload"][as="style"]['+s+"]")?y.loading=1:(s=o.createElement("link"),y.preload=s,s.addEventListener("load",function(){return y.loading|=1}),s.addEventListener("error",function(){return y.loading|=2}),Po(s,"link",h),ir(s),o.head.appendChild(s))}function ld(o){return'[src="'+ni(o)+'"]'}function ff(o){return"script[async]"+o}function z1(o,s,h){if(s.count++,s.instance===null)switch(s.type){case"style":var y=o.querySelector('style[data-href~="'+ni(h.href)+'"]');if(y)return s.instance=y,ir(y),y;var C=_({},h,{"data-href":h.href,"data-precedence":h.precedence,href:null,precedence:null});return y=(o.ownerDocument||o).createElement("style"),ir(y),Po(y,"style",C),Dh(y,h.precedence,o),s.instance=y;case"stylesheet":C=sd(h.href);var T=o.querySelector(df(C));if(T)return s.state.loading|=4,s.instance=T,ir(T),T;y=I1(h),(C=il.get(C))&&Rm(y,C),T=(o.ownerDocument||o).createElement("link"),ir(T);var q=T;return q._p=new Promise(function(le,Oe){q.onload=le,q.onerror=Oe}),Po(T,"link",y),s.state.loading|=4,Dh(T,h.precedence,o),s.instance=T;case"script":return T=ld(h.src),(C=o.querySelector(ff(T)))?(s.instance=C,ir(C),C):(y=h,(C=il.get(T))&&(y=_({},h),Nm(y,C)),o=o.ownerDocument||o,C=o.createElement("script"),ir(C),Po(C,"link",y),o.head.appendChild(C),s.instance=C);case"void":return null;default:throw Error(i(443,s.type))}else s.type==="stylesheet"&&(s.state.loading&4)===0&&(y=s.instance,s.state.loading|=4,Dh(y,h.precedence,o));return s.instance}function Dh(o,s,h){for(var y=h.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),C=y.length?y[y.length-1]:null,T=C,q=0;q<y.length;q++){var le=y[q];if(le.dataset.precedence===s)T=le;else if(T!==C)break}T?T.parentNode.insertBefore(o,T.nextSibling):(s=h.nodeType===9?h.head:h,s.insertBefore(o,s.firstChild))}function Rm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.title==null&&(o.title=s.title)}function Nm(o,s){o.crossOrigin==null&&(o.crossOrigin=s.crossOrigin),o.referrerPolicy==null&&(o.referrerPolicy=s.referrerPolicy),o.integrity==null&&(o.integrity=s.integrity)}var Mh=null;function B1(o,s,h){if(Mh===null){var y=new Map,C=Mh=new Map;C.set(h,y)}else C=Mh,y=C.get(h),y||(y=new Map,C.set(h,y));if(y.has(o))return y;for(y.set(o,null),h=h.getElementsByTagName(o),C=0;C<h.length;C++){var T=h[C];if(!(T[Gr]||T[ti]||o==="link"&&T.getAttribute("rel")==="stylesheet")&&T.namespaceURI!=="http://www.w3.org/2000/svg"){var q=T.getAttribute(s)||"";q=o+q;var le=y.get(q);le?le.push(T):y.set(q,[T])}}return y}function F1(o,s,h){o=o.ownerDocument||o,o.head.insertBefore(h,s==="title"?o.querySelector("head > title"):null)}function bA(o,s,h){if(h===1||s.itemProp!=null)return!1;switch(o){case"meta":case"title":return!0;case"style":if(typeof s.precedence!="string"||typeof s.href!="string"||s.href==="")break;return!0;case"link":if(typeof s.rel!="string"||typeof s.href!="string"||s.href===""||s.onLoad||s.onError)break;return s.rel==="stylesheet"?(o=s.disabled,typeof s.precedence=="string"&&o==null):!0;case"script":if(s.async&&typeof s.async!="function"&&typeof s.async!="symbol"&&!s.onLoad&&!s.onError&&s.src&&typeof s.src=="string")return!0}return!1}function U1(o){return!(o.type==="stylesheet"&&(o.state.loading&3)===0)}function _A(o,s,h,y){if(h.type==="stylesheet"&&(typeof y.media!="string"||matchMedia(y.media).matches!==!1)&&(h.state.loading&4)===0){if(h.instance===null){var C=sd(y.href),T=s.querySelector(df(C));if(T){s=T._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(o.count++,o=Oh.bind(o),s.then(o,o)),h.state.loading|=4,h.instance=T,ir(T);return}T=s.ownerDocument||s,y=I1(y),(C=il.get(C))&&Rm(y,C),T=T.createElement("link"),ir(T);var q=T;q._p=new Promise(function(le,Oe){q.onload=le,q.onerror=Oe}),Po(T,"link",y),h.instance=T}o.stylesheets===null&&(o.stylesheets=new Map),o.stylesheets.set(h,s),(s=h.state.preload)&&(h.state.loading&3)===0&&(o.count++,h=Oh.bind(o),s.addEventListener("load",h),s.addEventListener("error",h))}}var Dm=0;function wA(o,s){return o.stylesheets&&o.count===0&&Ih(o,o.stylesheets),0<o.count||0<o.imgCount?function(h){var y=setTimeout(function(){if(o.stylesheets&&Ih(o,o.stylesheets),o.unsuspend){var T=o.unsuspend;o.unsuspend=null,T()}},6e4+s);0<o.imgBytes&&Dm===0&&(Dm=62500*nA());var C=setTimeout(function(){if(o.waitingForImages=!1,o.count===0&&(o.stylesheets&&Ih(o,o.stylesheets),o.unsuspend)){var T=o.unsuspend;o.unsuspend=null,T()}},(o.imgBytes>Dm?50:800)+s);return o.unsuspend=h,function(){o.unsuspend=null,clearTimeout(y),clearTimeout(C)}}:null}function Oh(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)Ih(this,this.stylesheets);else if(this.unsuspend){var o=this.unsuspend;this.unsuspend=null,o()}}}var Ph=null;function Ih(o,s){o.stylesheets=null,o.unsuspend!==null&&(o.count++,Ph=new Map,s.forEach(SA,o),Ph=null,Oh.call(o))}function SA(o,s){if(!(s.state.loading&4)){var h=Ph.get(o);if(h)var y=h.get(null);else{h=new Map,Ph.set(o,h);for(var C=o.querySelectorAll("link[data-precedence],style[data-precedence]"),T=0;T<C.length;T++){var q=C[T];(q.nodeName==="LINK"||q.getAttribute("media")!=="not all")&&(h.set(q.dataset.precedence,q),y=q)}y&&h.set(null,y)}C=s.instance,q=C.getAttribute("data-precedence"),T=h.get(q)||y,T===y&&h.set(null,C),h.set(q,C),this.count++,y=Oh.bind(this),C.addEventListener("load",y),C.addEventListener("error",y),T?T.parentNode.insertBefore(C,T.nextSibling):(o=o.nodeType===9?o.head:o,o.insertBefore(C,o.firstChild)),s.state.loading|=4}}var hf={$$typeof:B,Provider:null,Consumer:null,_currentValue:he,_currentValue2:he,_threadCount:0};function CA(o,s,h,y,C,T,q,le,Oe){this.tag=1,this.containerInfo=o,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Wr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Wr(0),this.hiddenUpdates=Wr(null),this.identifierPrefix=y,this.onUncaughtError=C,this.onCaughtError=T,this.onRecoverableError=q,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=Oe,this.incompleteTransitions=new Map}function H1(o,s,h,y,C,T,q,le,Oe,at,yt,St){return o=new CA(o,s,h,q,Oe,at,yt,St,le),s=1,T===!0&&(s|=24),T=La(3,null,null,s),o.current=T,T.stateNode=o,s=jc(),s.refCount++,o.pooledCache=s,s.refCount++,T.memoizedState={element:y,isDehydrated:h,cache:s},qt(T),o}function q1(o){return o?(o=ca,o):ca}function W1(o,s,h,y,C,T){C=q1(C),y.context===null?y.context=C:y.pendingContext=C,y=Tn(s),y.payload={element:h},T=T===void 0?null:T,T!==null&&(y.callback=T),h=Jn(o,y,s),h!==null&&(Es(h,o,s),Gi(h,o,s))}function G1(o,s){if(o=o.memoizedState,o!==null&&o.dehydrated!==null){var h=o.retryLane;o.retryLane=h!==0&&h<s?h:s}}function Mm(o,s){G1(o,s),(o=o.alternate)&&G1(o,s)}function V1(o){if(o.tag===13||o.tag===31){var s=li(o,67108864);s!==null&&Es(s,o,67108864),Mm(o,67108864)}}function Y1(o){if(o.tag===13||o.tag===31){var s=Ws();s=si(s);var h=li(o,s);h!==null&&Es(h,o,s),Mm(o,s)}}var zh=!0;function EA(o,s,h,y){var C=oe.T;oe.T=null;var T=ae.p;try{ae.p=2,Om(o,s,h,y)}finally{ae.p=T,oe.T=C}}function AA(o,s,h,y){var C=oe.T;oe.T=null;var T=ae.p;try{ae.p=8,Om(o,s,h,y)}finally{ae.p=T,oe.T=C}}function Om(o,s,h,y){if(zh){var C=Pm(y);if(C===null)_m(o,s,y,Bh,h),K1(o,y);else if(TA(C,o,s,h,y))y.stopPropagation();else if(K1(o,y),s&4&&-1<LA.indexOf(o)){for(;C!==null;){var T=hi(C);if(T!==null)switch(T.tag){case 3:if(T=T.stateNode,T.current.memoizedState.isDehydrated){var q=ln(T.pendingLanes);if(q!==0){var le=T;for(le.pendingLanes|=2,le.entangledLanes|=2;q;){var Oe=1<<31-Nt(q);le.entanglements[1]|=Oe,q&=~Oe}zl(T),(Yi&6)===0&&(_h=xn()+500,sf(0))}}break;case 31:case 13:le=li(T,2),le!==null&&Es(le,T,2),Sh(),Mm(T,2)}if(T=Pm(y),T===null&&_m(o,s,y,Bh,h),T===C)break;C=T}C!==null&&y.stopPropagation()}else _m(o,s,y,null,h)}}function Pm(o){return o=Fo(o),Im(o)}var Bh=null;function Im(o){if(Bh=null,o=Pa(o),o!==null){var s=a(o);if(s===null)o=null;else{var h=s.tag;if(h===13){if(o=l(s),o!==null)return o;o=null}else if(h===31){if(o=d(s),o!==null)return o;o=null}else if(h===3){if(s.stateNode.current.memoizedState.isDehydrated)return s.tag===3?s.stateNode.containerInfo:null;o=null}else s!==o&&(o=null)}}return Bh=o,null}function Z1(o){switch(o){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(kn()){case $t:return 2;case Cn:return 8;case In:case Jt:return 32;case En:return 268435456;default:return 32}default:return 32}}var zm=!1,Hc=null,qc=null,Wc=null,pf=new Map,gf=new Map,Gc=[],LA="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function K1(o,s){switch(o){case"focusin":case"focusout":Hc=null;break;case"dragenter":case"dragleave":qc=null;break;case"mouseover":case"mouseout":Wc=null;break;case"pointerover":case"pointerout":pf.delete(s.pointerId);break;case"gotpointercapture":case"lostpointercapture":gf.delete(s.pointerId)}}function mf(o,s,h,y,C,T){return o===null||o.nativeEvent!==T?(o={blockedOn:s,domEventName:h,eventSystemFlags:y,nativeEvent:T,targetContainers:[C]},s!==null&&(s=hi(s),s!==null&&V1(s)),o):(o.eventSystemFlags|=y,s=o.targetContainers,C!==null&&s.indexOf(C)===-1&&s.push(C),o)}function TA(o,s,h,y,C){switch(s){case"focusin":return Hc=mf(Hc,o,s,h,y,C),!0;case"dragenter":return qc=mf(qc,o,s,h,y,C),!0;case"mouseover":return Wc=mf(Wc,o,s,h,y,C),!0;case"pointerover":var T=C.pointerId;return pf.set(T,mf(pf.get(T)||null,o,s,h,y,C)),!0;case"gotpointercapture":return T=C.pointerId,gf.set(T,mf(gf.get(T)||null,o,s,h,y,C)),!0}return!1}function X1(o){var s=Pa(o.target);if(s!==null){var h=a(s);if(h!==null){if(s=h.tag,s===13){if(s=l(h),s!==null){o.blockedOn=s,fo(o.priority,function(){Y1(h)});return}}else if(s===31){if(s=d(h),s!==null){o.blockedOn=s,fo(o.priority,function(){Y1(h)});return}}else if(s===3&&h.stateNode.current.memoizedState.isDehydrated){o.blockedOn=h.tag===3?h.stateNode.containerInfo:null;return}}}o.blockedOn=null}function Fh(o){if(o.blockedOn!==null)return!1;for(var s=o.targetContainers;0<s.length;){var h=Pm(o.nativeEvent);if(h===null){h=o.nativeEvent;var y=new h.constructor(h.type,h);Yr=y,h.target.dispatchEvent(y),Yr=null}else return s=hi(h),s!==null&&V1(s),o.blockedOn=h,!1;s.shift()}return!0}function Q1(o,s,h){Fh(o)&&h.delete(s)}function jA(){zm=!1,Hc!==null&&Fh(Hc)&&(Hc=null),qc!==null&&Fh(qc)&&(qc=null),Wc!==null&&Fh(Wc)&&(Wc=null),pf.forEach(Q1),gf.forEach(Q1)}function Uh(o,s){o.blockedOn===s&&(o.blockedOn=null,zm||(zm=!0,t.unstable_scheduleCallback(t.unstable_NormalPriority,jA)))}var Hh=null;function $1(o){Hh!==o&&(Hh=o,t.unstable_scheduleCallback(t.unstable_NormalPriority,function(){Hh===o&&(Hh=null);for(var s=0;s<o.length;s+=3){var h=o[s],y=o[s+1],C=o[s+2];if(typeof y!="function"){if(Im(y||h)===null)continue;break}var T=hi(h);T!==null&&(o.splice(s,3),s-=3,Pg(T,{pending:!0,data:C,method:h.method,action:y},y,C))}}))}function cd(o){function s(Oe){return Uh(Oe,o)}Hc!==null&&Uh(Hc,o),qc!==null&&Uh(qc,o),Wc!==null&&Uh(Wc,o),pf.forEach(s),gf.forEach(s);for(var h=0;h<Gc.length;h++){var y=Gc[h];y.blockedOn===o&&(y.blockedOn=null)}for(;0<Gc.length&&(h=Gc[0],h.blockedOn===null);)X1(h),h.blockedOn===null&&Gc.shift();if(h=(o.ownerDocument||o).$$reactFormReplay,h!=null)for(y=0;y<h.length;y+=3){var C=h[y],T=h[y+1],q=C[bi]||null;if(typeof T=="function")q||$1(h);else if(q){var le=null;if(T&&T.hasAttribute("formAction")){if(C=T,q=T[bi]||null)le=q.formAction;else if(Im(C)!==null)continue}else le=q.action;typeof le=="function"?h[y+1]=le:(h.splice(y,3),y-=3),$1(h)}}}function J1(){function o(T){T.canIntercept&&T.info==="react-transition"&&T.intercept({handler:function(){return new Promise(function(q){return C=q})},focusReset:"manual",scroll:"manual"})}function s(){C!==null&&(C(),C=null),y||setTimeout(h,20)}function h(){if(!y&&!navigation.transition){var T=navigation.currentEntry;T&&T.url!=null&&navigation.navigate(T.url,{state:T.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var y=!1,C=null;return navigation.addEventListener("navigate",o),navigation.addEventListener("navigatesuccess",s),navigation.addEventListener("navigateerror",s),setTimeout(h,100),function(){y=!0,navigation.removeEventListener("navigate",o),navigation.removeEventListener("navigatesuccess",s),navigation.removeEventListener("navigateerror",s),C!==null&&(C(),C=null)}}}function Bm(o){this._internalRoot=o}qh.prototype.render=Bm.prototype.render=function(o){var s=this._internalRoot;if(s===null)throw Error(i(409));var h=s.current,y=Ws();W1(h,y,o,s,null,null)},qh.prototype.unmount=Bm.prototype.unmount=function(){var o=this._internalRoot;if(o!==null){this._internalRoot=null;var s=o.containerInfo;W1(o.current,2,null,o,null,null),Sh(),s[Zi]=null}};function qh(o){this._internalRoot=o}qh.prototype.unstable_scheduleHydration=function(o){if(o){var s=nr();o={blockedOn:null,target:o,priority:s};for(var h=0;h<Gc.length&&s!==0&&s<Gc[h].priority;h++);Gc.splice(h,0,o),h===0&&X1(o)}};var eb=e.version;if(eb!=="19.2.4")throw Error(i(527,eb,"19.2.4"));ae.findDOMNode=function(o){var s=o._reactInternals;if(s===void 0)throw typeof o.render=="function"?Error(i(188)):(o=Object.keys(o).join(","),Error(i(268,o)));return o=g(s),o=o!==null?m(o):null,o=o===null?null:o.stateNode,o};var kA={bundleType:0,version:"19.2.4",rendererPackageName:"react-dom",currentDispatcherRef:oe,reconcilerVersion:"19.2.4"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Wh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Wh.isDisabled&&Wh.supportsFiber)try{Hn=Wh.inject(kA),hn=Wh}catch{}}return yf.createRoot=function(o,s){if(!r(o))throw Error(i(299));var h=!1,y="",C=sx,T=lx,q=cx;return s!=null&&(s.unstable_strictMode===!0&&(h=!0),s.identifierPrefix!==void 0&&(y=s.identifierPrefix),s.onUncaughtError!==void 0&&(C=s.onUncaughtError),s.onCaughtError!==void 0&&(T=s.onCaughtError),s.onRecoverableError!==void 0&&(q=s.onRecoverableError)),s=H1(o,1,!1,null,null,h,y,null,C,T,q,J1),o[Zi]=s.current,bm(o),new Bm(s)},yf.hydrateRoot=function(o,s,h){if(!r(o))throw Error(i(299));var y=!1,C="",T=sx,q=lx,le=cx,Oe=null;return h!=null&&(h.unstable_strictMode===!0&&(y=!0),h.identifierPrefix!==void 0&&(C=h.identifierPrefix),h.onUncaughtError!==void 0&&(T=h.onUncaughtError),h.onCaughtError!==void 0&&(q=h.onCaughtError),h.onRecoverableError!==void 0&&(le=h.onRecoverableError),h.formState!==void 0&&(Oe=h.formState)),s=H1(o,1,!0,s,h??null,y,C,Oe,T,q,le,J1),s.context=q1(null),h=s.current,y=Ws(),y=si(y),C=Tn(y),C.callback=null,Jn(h,C,y),h=y,s.current.lanes=h,nn(s,h),zl(s),o[Zi]=s.current,bm(o),new qh(s)},yf.version="19.2.4",yf}var ub;function FA(){if(ub)return Hm.exports;ub=1;function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(e){console.error(e)}}return t(),Hm.exports=BA(),Hm.exports}var UA=FA();var db="popstate";function HA(t={}){function e(i,r){let{pathname:a,search:l,hash:d}=i.location;return Zv("",{pathname:a,search:l,hash:d},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function n(i,r){return typeof r=="string"?r:Mf(r)}return WA(e,n,null,t)}function qr(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function rl(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function qA(){return Math.random().toString(36).substring(2,10)}function fb(t,e){return{usr:t.state,key:t.key,idx:e}}function Zv(t,e,n=null,i){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Dd(e):e,state:n,key:e&&e.key||i||qA()}}function Mf({pathname:t="/",search:e="",hash:n=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),n&&n!=="#"&&(t+=n.charAt(0)==="#"?n:"#"+n),t}function Dd(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substring(n),t=t.substring(0,n));let i=t.indexOf("?");i>=0&&(e.search=t.substring(i),t=t.substring(0,i)),t&&(e.pathname=t)}return e}function WA(t,e,n,i={}){let{window:r=document.defaultView,v5Compat:a=!1}=i,l=r.history,d="POP",p=null,g=m();g==null&&(g=0,l.replaceState({...l.state,idx:g},""));function m(){return(l.state||{idx:null}).idx}function _(){d="POP";let k=m(),I=k==null?null:k-g;g=k,p&&p({action:d,location:M.location,delta:I})}function A(k,I){d="PUSH";let Y=Zv(M.location,k,I);g=m()+1;let B=fb(Y,g),V=M.createHref(Y);try{l.pushState(B,"",V)}catch(ee){if(ee instanceof DOMException&&ee.name==="DataCloneError")throw ee;r.location.assign(V)}a&&p&&p({action:d,location:M.location,delta:1})}function x(k,I){d="REPLACE";let Y=Zv(M.location,k,I);g=m();let B=fb(Y,g),V=M.createHref(Y);l.replaceState(B,"",V),a&&p&&p({action:d,location:M.location,delta:0})}function R(k){return GA(k)}let M={get action(){return d},get location(){return t(r,l)},listen(k){if(p)throw new Error("A history only accepts one active listener");return r.addEventListener(db,_),p=k,()=>{r.removeEventListener(db,_),p=null}},createHref(k){return e(r,k)},createURL:R,encodeLocation(k){let I=R(k);return{pathname:I.pathname,search:I.search,hash:I.hash}},push:A,replace:x,go(k){return l.go(k)}};return M}function GA(t,e=!1){let n="http://localhost";typeof window<"u"&&(n=window.location.origin!=="null"?window.location.origin:window.location.href),qr(n,"No window.location.(origin|href) available to create URL");let i=typeof t=="string"?t:Mf(t);return i=i.replace(/ $/,"%20"),!e&&i.startsWith("//")&&(i=n+i),new URL(i,n)}function Ew(t,e,n="/"){return VA(t,e,n,!1)}function VA(t,e,n,i){let r=typeof e=="string"?Dd(e):e,a=_c(r.pathname||"/",n);if(a==null)return null;let l=Aw(t);YA(l);let d=null;for(let p=0;d==null&&p<l.length;++p){let g=r4(a);d=n4(l[p],g,i)}return d}function Aw(t,e=[],n=[],i="",r=!1){let a=(l,d,p=r,g)=>{let m={relativePath:g===void 0?l.path||"":g,caseSensitive:l.caseSensitive===!0,childrenIndex:d,route:l};if(m.relativePath.startsWith("/")){if(!m.relativePath.startsWith(i)&&p)return;qr(m.relativePath.startsWith(i),`Absolute route path "${m.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),m.relativePath=m.relativePath.slice(i.length)}let _=yc([i,m.relativePath]),A=n.concat(m);l.children&&l.children.length>0&&(qr(l.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${_}".`),Aw(l.children,e,A,_,p)),!(l.path==null&&!l.index)&&e.push({path:_,score:e4(_,l.index),routesMeta:A})};return t.forEach((l,d)=>{if(l.path===""||!l.path?.includes("?"))a(l,d);else for(let p of Lw(l.path))a(l,d,!0,p)}),e}function Lw(t){let e=t.split("/");if(e.length===0)return[];let[n,...i]=e,r=n.endsWith("?"),a=n.replace(/\?$/,"");if(i.length===0)return r?[a,""]:[a];let l=Lw(i.join("/")),d=[];return d.push(...l.map(p=>p===""?a:[a,p].join("/"))),r&&d.push(...l),d.map(p=>t.startsWith("/")&&p===""?"/":p)}function YA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:t4(e.routesMeta.map(i=>i.childrenIndex),n.routesMeta.map(i=>i.childrenIndex)))}var ZA=/^:[\w-]+$/,KA=3,XA=2,QA=1,$A=10,JA=-2,hb=t=>t==="*";function e4(t,e){let n=t.split("/"),i=n.length;return n.some(hb)&&(i+=JA),e&&(i+=XA),n.filter(r=>!hb(r)).reduce((r,a)=>r+(ZA.test(a)?KA:a===""?QA:$A),i)}function t4(t,e){return t.length===e.length&&t.slice(0,-1).every((i,r)=>i===e[r])?t[t.length-1]-e[e.length-1]:0}function n4(t,e,n=!1){let{routesMeta:i}=t,r={},a="/",l=[];for(let d=0;d<i.length;++d){let p=i[d],g=d===i.length-1,m=a==="/"?e:e.slice(a.length)||"/",_=Dp({path:p.relativePath,caseSensitive:p.caseSensitive,end:g},m),A=p.route;if(!_&&g&&n&&!i[i.length-1].route.index&&(_=Dp({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},m)),!_)return null;Object.assign(r,_.params),l.push({params:r,pathname:yc([a,_.pathname]),pathnameBase:l4(yc([a,_.pathnameBase])),route:A}),_.pathnameBase!=="/"&&(a=yc([a,_.pathnameBase]))}return l}function Dp(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,i]=i4(t.path,t.caseSensitive,t.end),r=e.match(n);if(!r)return null;let a=r[0],l=a.replace(/(.)\/+$/,"$1"),d=r.slice(1);return{params:i.reduce((g,{paramName:m,isOptional:_},A)=>{if(m==="*"){let R=d[A]||"";l=a.slice(0,a.length-R.length).replace(/(.)\/+$/,"$1")}const x=d[A];return _&&!x?g[m]=void 0:g[m]=(x||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:l,pattern:t}}function i4(t,e=!1,n=!0){rl(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let i=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(l,d,p)=>(i.push({paramName:d,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return t.endsWith("*")?(i.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),i]}function r4(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return rl(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function _c(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,i=t.charAt(n);return i&&i!=="/"?null:t.slice(n)||"/"}var a4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i;function o4(t,e="/"){let{pathname:n,search:i="",hash:r=""}=typeof t=="string"?Dd(t):t,a;return n?(n=n.replace(/\/\/+/g,"/"),n.startsWith("/")?a=pb(n.substring(1),"/"):a=pb(n,e)):a=e,{pathname:a,search:c4(i),hash:u4(r)}}function pb(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?n.length>1&&n.pop():r!=="."&&n.push(r)}),n.length>1?n.join("/"):"/"}function Vm(t,e,n,i){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${n}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function s4(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function Py(t){let e=s4(t);return e.map((n,i)=>i===e.length-1?n.pathname:n.pathnameBase)}function Iy(t,e,n,i=!1){let r;typeof t=="string"?r=Dd(t):(r={...t},qr(!r.pathname||!r.pathname.includes("?"),Vm("?","pathname","search",r)),qr(!r.pathname||!r.pathname.includes("#"),Vm("#","pathname","hash",r)),qr(!r.search||!r.search.includes("#"),Vm("#","search","hash",r)));let a=t===""||r.pathname==="",l=a?"/":r.pathname,d;if(l==null)d=n;else{let _=e.length-1;if(!i&&l.startsWith("..")){let A=l.split("/");for(;A[0]==="..";)A.shift(),_-=1;r.pathname=A.join("/")}d=_>=0?e[_]:"/"}let p=o4(r,d),g=l&&l!=="/"&&l.endsWith("/"),m=(a||l===".")&&n.endsWith("/");return!p.pathname.endsWith("/")&&(g||m)&&(p.pathname+="/"),p}var yc=t=>t.join("/").replace(/\/\/+/g,"/"),l4=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),c4=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,u4=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t,d4=class{constructor(t,e,n,i=!1){this.status=t,this.statusText=e||"",this.internal=i,n instanceof Error?(this.data=n.toString(),this.error=n):this.data=n}};function f4(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}function h4(t){return t.map(e=>e.route.path).filter(Boolean).join("/").replace(/\/\/*/g,"/")||"/"}var Tw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function jw(t,e){let n=t;if(typeof n!="string"||!a4.test(n))return{absoluteURL:void 0,isExternal:!1,to:n};let i=n,r=!1;if(Tw)try{let a=new URL(window.location.href),l=n.startsWith("//")?new URL(a.protocol+n):new URL(n),d=_c(l.pathname,e);l.origin===a.origin&&d!=null?n=d+l.search+l.hash:r=!0}catch{rl(!1,`<Link to="${n}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}return{absoluteURL:i,isExternal:r,to:n}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var kw=["POST","PUT","PATCH","DELETE"];new Set(kw);var p4=["GET",...kw];new Set(p4);var Md=de.createContext(null);Md.displayName="DataRouter";var sg=de.createContext(null);sg.displayName="DataRouterState";var g4=de.createContext(!1),Rw=de.createContext({isTransitioning:!1});Rw.displayName="ViewTransition";var m4=de.createContext(new Map);m4.displayName="Fetchers";var v4=de.createContext(null);v4.displayName="Await";var Ks=de.createContext(null);Ks.displayName="Navigation";var Gf=de.createContext(null);Gf.displayName="Location";var Vl=de.createContext({outlet:null,matches:[],isDataRoute:!1});Vl.displayName="Route";var zy=de.createContext(null);zy.displayName="RouteError";var Nw="REACT_ROUTER_ERROR",y4="REDIRECT",x4="ROUTE_ERROR_RESPONSE";function b4(t){if(t.startsWith(`${Nw}:${y4}:{`))try{let e=JSON.parse(t.slice(28));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.location=="string"&&typeof e.reloadDocument=="boolean"&&typeof e.replace=="boolean")return e}catch{}}function _4(t){if(t.startsWith(`${Nw}:${x4}:{`))try{let e=JSON.parse(t.slice(40));if(typeof e=="object"&&e&&typeof e.status=="number"&&typeof e.statusText=="string")return new d4(e.status,e.statusText,e.data)}catch{}}function w4(t,{relative:e}={}){qr(Od(),"useHref() may be used only in the context of a <Router> component.");let{basename:n,navigator:i}=de.useContext(Ks),{hash:r,pathname:a,search:l}=Vf(t,{relative:e}),d=a;return n!=="/"&&(d=a==="/"?n:yc([n,a])),i.createHref({pathname:d,search:l,hash:r})}function Od(){return de.useContext(Gf)!=null}function Yl(){return qr(Od(),"useLocation() may be used only in the context of a <Router> component."),de.useContext(Gf).location}var Dw="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Mw(t){de.useContext(Ks).static||de.useLayoutEffect(t)}function bl(){let{isDataRoute:t}=de.useContext(Vl);return t?O4():S4()}function S4(){qr(Od(),"useNavigate() may be used only in the context of a <Router> component.");let t=de.useContext(Md),{basename:e,navigator:n}=de.useContext(Ks),{matches:i}=de.useContext(Vl),{pathname:r}=Yl(),a=JSON.stringify(Py(i)),l=de.useRef(!1);return Mw(()=>{l.current=!0}),de.useCallback((p,g={})=>{if(rl(l.current,Dw),!l.current)return;if(typeof p=="number"){n.go(p);return}let m=Iy(p,JSON.parse(a),r,g.relative==="path");t==null&&e!=="/"&&(m.pathname=m.pathname==="/"?e:yc([e,m.pathname])),(g.replace?n.replace:n.push)(m,g.state,g)},[e,n,a,r,t])}de.createContext(null);function Vf(t,{relative:e}={}){let{matches:n}=de.useContext(Vl),{pathname:i}=Yl(),r=JSON.stringify(Py(n));return de.useMemo(()=>Iy(t,JSON.parse(r),i,e==="path"),[t,r,i,e])}function C4(t,e){return Ow(t,e)}function Ow(t,e,n,i,r){qr(Od(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:a}=de.useContext(Ks),{matches:l}=de.useContext(Vl),d=l[l.length-1],p=d?d.params:{},g=d?d.pathname:"/",m=d?d.pathnameBase:"/",_=d&&d.route;{let Y=_&&_.path||"";Iw(g,!_||Y.endsWith("*")||Y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${g}" (under <Route path="${Y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${Y}"> to <Route path="${Y==="/"?"*":`${Y}/*`}">.`)}let A=Yl(),x;if(e){let Y=typeof e=="string"?Dd(e):e;qr(m==="/"||Y.pathname?.startsWith(m),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${m}" but pathname "${Y.pathname}" was given in the \`location\` prop.`),x=Y}else x=A;let R=x.pathname||"/",M=R;if(m!=="/"){let Y=m.replace(/^\//,"").split("/");M="/"+R.replace(/^\//,"").split("/").slice(Y.length).join("/")}let k=Ew(t,{pathname:M});rl(_||k!=null,`No routes matched location "${x.pathname}${x.search}${x.hash}" `),rl(k==null||k[k.length-1].route.element!==void 0||k[k.length-1].route.Component!==void 0||k[k.length-1].route.lazy!==void 0,`Matched leaf route at location "${x.pathname}${x.search}${x.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let I=j4(k&&k.map(Y=>Object.assign({},Y,{params:Object.assign({},p,Y.params),pathname:yc([m,a.encodeLocation?a.encodeLocation(Y.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathname]),pathnameBase:Y.pathnameBase==="/"?m:yc([m,a.encodeLocation?a.encodeLocation(Y.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:Y.pathnameBase])})),l,n,i,r);return e&&I?de.createElement(Gf.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...x},navigationType:"POP"}},I):I}function E4(){let t=M4(),e=f4(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:i},a={padding:"2px 4px",backgroundColor:i},l=null;return console.error("Error handled by React Router default ErrorBoundary:",t),l=de.createElement(de.Fragment,null,de.createElement("p",null," Hey developer "),de.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",de.createElement("code",{style:a},"ErrorBoundary")," or"," ",de.createElement("code",{style:a},"errorElement")," prop on your route.")),de.createElement(de.Fragment,null,de.createElement("h2",null,"Unexpected Application Error!"),de.createElement("h3",{style:{fontStyle:"italic"}},e),n?de.createElement("pre",{style:r},n):null,l)}var A4=de.createElement(E4,null),Pw=class extends de.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){this.props.onError?this.props.onError(t,e):console.error("React Router caught the following error during render",t)}render(){let t=this.state.error;if(this.context&&typeof t=="object"&&t&&"digest"in t&&typeof t.digest=="string"){const n=_4(t.digest);n&&(t=n)}let e=t!==void 0?de.createElement(Vl.Provider,{value:this.props.routeContext},de.createElement(zy.Provider,{value:t,children:this.props.component})):this.props.children;return this.context?de.createElement(L4,{error:t},e):e}};Pw.contextType=g4;var Ym=new WeakMap;function L4({children:t,error:e}){let{basename:n}=de.useContext(Ks);if(typeof e=="object"&&e&&"digest"in e&&typeof e.digest=="string"){let i=b4(e.digest);if(i){let r=Ym.get(e);if(r)throw r;let a=jw(i.location,n);if(Tw&&!Ym.get(e))if(a.isExternal||i.reloadDocument)window.location.href=a.absoluteURL||a.to;else{const l=Promise.resolve().then(()=>window.__reactRouterDataRouter.navigate(a.to,{replace:i.replace}));throw Ym.set(e,l),l}return de.createElement("meta",{httpEquiv:"refresh",content:`0;url=${a.absoluteURL||a.to}`})}}return t}function T4({routeContext:t,match:e,children:n}){let i=de.useContext(Md);return i&&i.static&&i.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=e.route.id),de.createElement(Vl.Provider,{value:t},n)}function j4(t,e=[],n=null,i=null,r=null){if(t==null){if(!n)return null;if(n.errors)t=n.matches;else if(e.length===0&&!n.initialized&&n.matches.length>0)t=n.matches;else return null}let a=t,l=n?.errors;if(l!=null){let m=a.findIndex(_=>_.route.id&&l?.[_.route.id]!==void 0);qr(m>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(l).join(",")}`),a=a.slice(0,Math.min(a.length,m+1))}let d=!1,p=-1;if(n)for(let m=0;m<a.length;m++){let _=a[m];if((_.route.HydrateFallback||_.route.hydrateFallbackElement)&&(p=m),_.route.id){let{loaderData:A,errors:x}=n,R=_.route.loader&&!A.hasOwnProperty(_.route.id)&&(!x||x[_.route.id]===void 0);if(_.route.lazy||R){d=!0,p>=0?a=a.slice(0,p+1):a=[a[0]];break}}}let g=n&&i?(m,_)=>{i(m,{location:n.location,params:n.matches?.[0]?.params??{},unstable_pattern:h4(n.matches),errorInfo:_})}:void 0;return a.reduceRight((m,_,A)=>{let x,R=!1,M=null,k=null;n&&(x=l&&_.route.id?l[_.route.id]:void 0,M=_.route.errorElement||A4,d&&(p<0&&A===0?(Iw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),R=!0,k=null):p===A&&(R=!0,k=_.route.hydrateFallbackElement||null)));let I=e.concat(a.slice(0,A+1)),Y=()=>{let B;return x?B=M:R?B=k:_.route.Component?B=de.createElement(_.route.Component,null):_.route.element?B=_.route.element:B=m,de.createElement(T4,{match:_,routeContext:{outlet:m,matches:I,isDataRoute:n!=null},children:B})};return n&&(_.route.ErrorBoundary||_.route.errorElement||A===0)?de.createElement(Pw,{location:n.location,revalidation:n.revalidation,component:M,error:x,children:Y(),routeContext:{outlet:null,matches:I,isDataRoute:!0},onError:g}):Y()},null)}function By(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function k4(t){let e=de.useContext(Md);return qr(e,By(t)),e}function R4(t){let e=de.useContext(sg);return qr(e,By(t)),e}function N4(t){let e=de.useContext(Vl);return qr(e,By(t)),e}function Fy(t){let e=N4(t),n=e.matches[e.matches.length-1];return qr(n.route.id,`${t} can only be used on routes that contain a unique "id"`),n.route.id}function D4(){return Fy("useRouteId")}function M4(){let t=de.useContext(zy),e=R4("useRouteError"),n=Fy("useRouteError");return t!==void 0?t:e.errors?.[n]}function O4(){let{router:t}=k4("useNavigate"),e=Fy("useNavigate"),n=de.useRef(!1);return Mw(()=>{n.current=!0}),de.useCallback(async(r,a={})=>{rl(n.current,Dw),n.current&&(typeof r=="number"?await t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var gb={};function Iw(t,e,n){!e&&!gb[t]&&(gb[t]=!0,rl(!1,n))}de.memo(P4);function P4({routes:t,future:e,state:n,onError:i}){return Ow(t,void 0,n,i,e)}function zw({to:t,replace:e,state:n,relative:i}){qr(Od(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=de.useContext(Ks);rl(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=de.useContext(Vl),{pathname:l}=Yl(),d=bl(),p=Iy(t,Py(a),l,i==="path"),g=JSON.stringify(p);return de.useEffect(()=>{d(JSON.parse(g),{replace:e,state:n,relative:i})},[d,g,i,e,n]),null}function ea(t){qr(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function I4({basename:t="/",children:e=null,location:n,navigationType:i="POP",navigator:r,static:a=!1,unstable_useTransitions:l}){qr(!Od(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let d=t.replace(/^\/*/,"/"),p=de.useMemo(()=>({basename:d,navigator:r,static:a,unstable_useTransitions:l,future:{}}),[d,r,a,l]);typeof n=="string"&&(n=Dd(n));let{pathname:g="/",search:m="",hash:_="",state:A=null,key:x="default"}=n,R=de.useMemo(()=>{let M=_c(g,d);return M==null?null:{location:{pathname:M,search:m,hash:_,state:A,key:x},navigationType:i}},[d,g,m,_,A,x,i]);return rl(R!=null,`<Router basename="${d}"> is not able to match the URL "${g}${m}${_}" because it does not start with the basename, so the <Router> won't render anything.`),R==null?null:de.createElement(Ks.Provider,{value:p},de.createElement(Gf.Provider,{children:e,value:R}))}function z4({children:t,location:e}){return C4(Kv(t),e)}function Kv(t,e=[]){let n=[];return de.Children.forEach(t,(i,r)=>{if(!de.isValidElement(i))return;let a=[...e,r];if(i.type===de.Fragment){n.push.apply(n,Kv(i.props.children,a));return}qr(i.type===ea,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),qr(!i.props.index||!i.props.children,"An index route cannot have child routes.");let l={id:i.props.id||a.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(l.children=Kv(i.props.children,a)),n.push(l)}),n}var pp="get",gp="application/x-www-form-urlencoded";function lg(t){return typeof HTMLElement<"u"&&t instanceof HTMLElement}function B4(t){return lg(t)&&t.tagName.toLowerCase()==="button"}function F4(t){return lg(t)&&t.tagName.toLowerCase()==="form"}function U4(t){return lg(t)&&t.tagName.toLowerCase()==="input"}function H4(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function q4(t,e){return t.button===0&&(!e||e==="_self")&&!H4(t)}function Xv(t=""){return new URLSearchParams(typeof t=="string"||Array.isArray(t)||t instanceof URLSearchParams?t:Object.keys(t).reduce((e,n)=>{let i=t[n];return e.concat(Array.isArray(i)?i.map(r=>[n,r]):[[n,i]])},[]))}function W4(t,e){let n=Xv(t);return e&&e.forEach((i,r)=>{n.has(r)||e.getAll(r).forEach(a=>{n.append(r,a)})}),n}var Gh=null;function G4(){if(Gh===null)try{new FormData(document.createElement("form"),0),Gh=!1}catch{Gh=!0}return Gh}var V4=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Zm(t){return t!=null&&!V4.has(t)?(rl(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${gp}"`),null):t}function Y4(t,e){let n,i,r,a,l;if(F4(t)){let d=t.getAttribute("action");i=d?_c(d,e):null,n=t.getAttribute("method")||pp,r=Zm(t.getAttribute("enctype"))||gp,a=new FormData(t)}else if(B4(t)||U4(t)&&(t.type==="submit"||t.type==="image")){let d=t.form;if(d==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=t.getAttribute("formaction")||d.getAttribute("action");if(i=p?_c(p,e):null,n=t.getAttribute("formmethod")||d.getAttribute("method")||pp,r=Zm(t.getAttribute("formenctype"))||Zm(d.getAttribute("enctype"))||gp,a=new FormData(d,t),!G4()){let{name:g,type:m,value:_}=t;if(m==="image"){let A=g?`${g}.`:"";a.append(`${A}x`,"0"),a.append(`${A}y`,"0")}else g&&a.append(g,_)}}else{if(lg(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');n=pp,i=null,r=gp,l=t}return a&&r==="text/plain"&&(l=a,a=void 0),{action:i,method:n.toLowerCase(),encType:r,formData:a,body:l}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uy(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function Z4(t,e,n,i){let r=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return n?r.pathname.endsWith("/")?r.pathname=`${r.pathname}_.${i}`:r.pathname=`${r.pathname}.${i}`:r.pathname==="/"?r.pathname=`_root.${i}`:e&&_c(r.pathname,e)==="/"?r.pathname=`${e.replace(/\/$/,"")}/_root.${i}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${i}`,r}async function K4(t,e){if(t.id in e)return e[t.id];try{let n=await import(t.module);return e[t.id]=n,n}catch(n){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(n),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function X4(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function Q4(t,e,n){let i=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let l=await K4(a,n);return l.links?l.links():[]}return[]}));return tL(i.flat(1).filter(X4).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function mb(t,e,n,i,r,a){let l=(p,g)=>n[g]?p.route.id!==n[g].route.id:!0,d=(p,g)=>n[g].pathname!==p.pathname||n[g].route.path?.endsWith("*")&&n[g].params["*"]!==p.params["*"];return a==="assets"?e.filter((p,g)=>l(p,g)||d(p,g)):a==="data"?e.filter((p,g)=>{let m=i.routes[p.route.id];if(!m||!m.hasLoader)return!1;if(l(p,g)||d(p,g))return!0;if(p.route.shouldRevalidate){let _=p.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:n[0]?.params||{},nextUrl:new URL(t,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof _=="boolean")return _}return!0}):[]}function $4(t,e,{includeHydrateFallback:n}={}){return J4(t.map(i=>{let r=e.routes[i.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),n&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function J4(t){return[...new Set(t)]}function eL(t){let e={},n=Object.keys(t).sort();for(let i of n)e[i]=t[i];return e}function tL(t,e){let n=new Set;return new Set(e),t.reduce((i,r)=>{let a=JSON.stringify(eL(r));return n.has(a)||(n.add(a),i.push({key:a,link:r})),i},[])}function Bw(){let t=de.useContext(Md);return Uy(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function nL(){let t=de.useContext(sg);return Uy(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Hy=de.createContext(void 0);Hy.displayName="FrameworkContext";function Fw(){let t=de.useContext(Hy);return Uy(t,"You must render this element inside a <HydratedRouter> element"),t}function iL(t,e){let n=de.useContext(Hy),[i,r]=de.useState(!1),[a,l]=de.useState(!1),{onFocus:d,onBlur:p,onMouseEnter:g,onMouseLeave:m,onTouchStart:_}=e,A=de.useRef(null);de.useEffect(()=>{if(t==="render"&&l(!0),t==="viewport"){let M=I=>{I.forEach(Y=>{l(Y.isIntersecting)})},k=new IntersectionObserver(M,{threshold:.5});return A.current&&k.observe(A.current),()=>{k.disconnect()}}},[t]),de.useEffect(()=>{if(i){let M=setTimeout(()=>{l(!0)},100);return()=>{clearTimeout(M)}}},[i]);let x=()=>{r(!0)},R=()=>{r(!1),l(!1)};return n?t!=="intent"?[a,A,{}]:[a,A,{onFocus:xf(d,x),onBlur:xf(p,R),onMouseEnter:xf(g,x),onMouseLeave:xf(m,R),onTouchStart:xf(_,x)}]:[!1,A,{}]}function xf(t,e){return n=>{t&&t(n),n.defaultPrevented||e(n)}}function rL({page:t,...e}){let{router:n}=Bw(),i=de.useMemo(()=>Ew(n.routes,t,n.basename),[n.routes,t,n.basename]);return i?de.createElement(oL,{page:t,matches:i,...e}):null}function aL(t){let{manifest:e,routeModules:n}=Fw(),[i,r]=de.useState([]);return de.useEffect(()=>{let a=!1;return Q4(t,e,n).then(l=>{a||r(l)}),()=>{a=!0}},[t,e,n]),i}function oL({page:t,matches:e,...n}){let i=Yl(),{future:r,manifest:a,routeModules:l}=Fw(),{basename:d}=Bw(),{loaderData:p,matches:g}=nL(),m=de.useMemo(()=>mb(t,e,g,a,i,"data"),[t,e,g,a,i]),_=de.useMemo(()=>mb(t,e,g,a,i,"assets"),[t,e,g,a,i]),A=de.useMemo(()=>{if(t===i.pathname+i.search+i.hash)return[];let M=new Set,k=!1;if(e.forEach(Y=>{let B=a.routes[Y.route.id];!B||!B.hasLoader||(!m.some(V=>V.route.id===Y.route.id)&&Y.route.id in p&&l[Y.route.id]?.shouldRevalidate||B.hasClientLoader?k=!0:M.add(Y.route.id))}),M.size===0)return[];let I=Z4(t,d,r.unstable_trailingSlashAwareDataRequests,"data");return k&&M.size>0&&I.searchParams.set("_routes",e.filter(Y=>M.has(Y.route.id)).map(Y=>Y.route.id).join(",")),[I.pathname+I.search]},[d,r.unstable_trailingSlashAwareDataRequests,p,i,a,m,e,t,l]),x=de.useMemo(()=>$4(_,a),[_,a]),R=aL(_);return de.createElement(de.Fragment,null,A.map(M=>de.createElement("link",{key:M,rel:"prefetch",as:"fetch",href:M,...n})),x.map(M=>de.createElement("link",{key:M,rel:"modulepreload",href:M,...n})),R.map(({key:M,link:k})=>de.createElement("link",{key:M,nonce:n.nonce,...k,crossOrigin:k.crossOrigin??n.crossOrigin})))}function sL(...t){return e=>{t.forEach(n=>{typeof n=="function"?n(e):n!=null&&(n.current=e)})}}var lL=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{lL&&(window.__reactRouterVersion="7.13.0")}catch{}function cL({basename:t,children:e,unstable_useTransitions:n,window:i}){let r=de.useRef();r.current==null&&(r.current=HA({window:i,v5Compat:!0}));let a=r.current,[l,d]=de.useState({action:a.action,location:a.location}),p=de.useCallback(g=>{n===!1?d(g):de.startTransition(()=>d(g))},[n]);return de.useLayoutEffect(()=>a.listen(p),[a,p]),de.createElement(I4,{basename:t,children:e,location:l.location,navigationType:l.action,navigator:a,unstable_useTransitions:n})}var Uw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Of=de.forwardRef(function({onClick:e,discover:n="render",prefetch:i="none",relative:r,reloadDocument:a,replace:l,state:d,target:p,to:g,preventScrollReset:m,viewTransition:_,unstable_defaultShouldRevalidate:A,...x},R){let{basename:M,unstable_useTransitions:k}=de.useContext(Ks),I=typeof g=="string"&&Uw.test(g),Y=jw(g,M);g=Y.to;let B=w4(g,{relative:r}),[V,ee,ue]=iL(i,x),_e=fL(g,{replace:l,state:d,target:p,preventScrollReset:m,relative:r,viewTransition:_,unstable_defaultShouldRevalidate:A,unstable_useTransitions:k});function fe(me){e&&e(me),me.defaultPrevented||_e(me)}let G=de.createElement("a",{...x,...ue,href:Y.absoluteURL||B,onClick:Y.isExternal||a?e:fe,ref:sL(R,ee),target:p,"data-discover":!I&&n==="render"?"true":void 0});return V&&!I?de.createElement(de.Fragment,null,G,de.createElement(rL,{page:B})):G});Of.displayName="Link";var Hw=de.forwardRef(function({"aria-current":e="page",caseSensitive:n=!1,className:i="",end:r=!1,style:a,to:l,viewTransition:d,children:p,...g},m){let _=Vf(l,{relative:g.relative}),A=Yl(),x=de.useContext(sg),{navigator:R,basename:M}=de.useContext(Ks),k=x!=null&&yL(_)&&d===!0,I=R.encodeLocation?R.encodeLocation(_).pathname:_.pathname,Y=A.pathname,B=x&&x.navigation&&x.navigation.location?x.navigation.location.pathname:null;n||(Y=Y.toLowerCase(),B=B?B.toLowerCase():null,I=I.toLowerCase()),B&&M&&(B=_c(B,M)||B);const V=I!=="/"&&I.endsWith("/")?I.length-1:I.length;let ee=Y===I||!r&&Y.startsWith(I)&&Y.charAt(V)==="/",ue=B!=null&&(B===I||!r&&B.startsWith(I)&&B.charAt(I.length)==="/"),_e={isActive:ee,isPending:ue,isTransitioning:k},fe=ee?e:void 0,G;typeof i=="function"?G=i(_e):G=[i,ee?"active":null,ue?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let me=typeof a=="function"?a(_e):a;return de.createElement(Of,{...g,"aria-current":fe,className:G,ref:m,style:me,to:l,viewTransition:d},typeof p=="function"?p(_e):p)});Hw.displayName="NavLink";var uL=de.forwardRef(({discover:t="render",fetcherKey:e,navigate:n,reloadDocument:i,replace:r,state:a,method:l=pp,action:d,onSubmit:p,relative:g,preventScrollReset:m,viewTransition:_,unstable_defaultShouldRevalidate:A,...x},R)=>{let{unstable_useTransitions:M}=de.useContext(Ks),k=mL(),I=vL(d,{relative:g}),Y=l.toLowerCase()==="get"?"get":"post",B=typeof d=="string"&&Uw.test(d),V=ee=>{if(p&&p(ee),ee.defaultPrevented)return;ee.preventDefault();let ue=ee.nativeEvent.submitter,_e=ue?.getAttribute("formmethod")||l,fe=()=>k(ue||ee.currentTarget,{fetcherKey:e,method:_e,navigate:n,replace:r,state:a,relative:g,preventScrollReset:m,viewTransition:_,unstable_defaultShouldRevalidate:A});M&&n!==!1?de.startTransition(()=>fe()):fe()};return de.createElement("form",{ref:R,method:Y,action:I,onSubmit:i?p:V,...x,"data-discover":!B&&t==="render"?"true":void 0})});uL.displayName="Form";function dL(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function qw(t){let e=de.useContext(Md);return qr(e,dL(t)),e}function fL(t,{target:e,replace:n,state:i,preventScrollReset:r,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:d,unstable_useTransitions:p}={}){let g=bl(),m=Yl(),_=Vf(t,{relative:a});return de.useCallback(A=>{if(q4(A,e)){A.preventDefault();let x=n!==void 0?n:Mf(m)===Mf(_),R=()=>g(t,{replace:x,state:i,preventScrollReset:r,relative:a,viewTransition:l,unstable_defaultShouldRevalidate:d});p?de.startTransition(()=>R()):R()}},[m,g,_,n,i,e,t,r,a,l,d,p])}function hL(t){rl(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let e=de.useRef(Xv(t)),n=de.useRef(!1),i=Yl(),r=de.useMemo(()=>W4(i.search,n.current?null:e.current),[i.search]),a=bl(),l=de.useCallback((d,p)=>{const g=Xv(typeof d=="function"?d(new URLSearchParams(r)):d);n.current=!0,a("?"+g,p)},[a,r]);return[r,l]}var pL=0,gL=()=>`__${String(++pL)}__`;function mL(){let{router:t}=qw("useSubmit"),{basename:e}=de.useContext(Ks),n=D4(),i=t.fetch,r=t.navigate;return de.useCallback(async(a,l={})=>{let{action:d,method:p,encType:g,formData:m,body:_}=Y4(a,e);if(l.navigate===!1){let A=l.fetcherKey||gL();await i(A,n,l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:_,formMethod:l.method||p,formEncType:l.encType||g,flushSync:l.flushSync})}else await r(l.action||d,{unstable_defaultShouldRevalidate:l.unstable_defaultShouldRevalidate,preventScrollReset:l.preventScrollReset,formData:m,body:_,formMethod:l.method||p,formEncType:l.encType||g,replace:l.replace,state:l.state,fromRouteId:n,flushSync:l.flushSync,viewTransition:l.viewTransition})},[i,r,e,n])}function vL(t,{relative:e}={}){let{basename:n}=de.useContext(Ks),i=de.useContext(Vl);qr(i,"useFormAction must be used inside a RouteContext");let[r]=i.matches.slice(-1),a={...Vf(t||".",{relative:e})},l=Yl();if(t==null){a.search=l.search;let d=new URLSearchParams(a.search),p=d.getAll("index");if(p.some(m=>m==="")){d.delete("index"),p.filter(_=>_).forEach(_=>d.append("index",_));let m=d.toString();a.search=m?`?${m}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),n!=="/"&&(a.pathname=a.pathname==="/"?n:yc([n,a.pathname])),Mf(a)}function yL(t,{relative:e}={}){let n=de.useContext(Rw);qr(n!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=qw("useViewTransitionState"),r=Vf(t,{relative:e});if(!n.isTransitioning)return!1;let a=_c(n.currentLocation.pathname,i)||n.currentLocation.pathname,l=_c(n.nextLocation.pathname,i)||n.nextLocation.pathname;return Dp(r.pathname,l)!=null||Dp(r.pathname,a)!=null}var Mp=Cw();const vb=t=>{let e;const n=new Set,i=(g,m)=>{const _=typeof g=="function"?g(e):g;if(!Object.is(_,e)){const A=e;e=m??(typeof _!="object"||_===null)?_:Object.assign({},e,_),n.forEach(x=>x(e,A))}},r=()=>e,d={setState:i,getState:r,getInitialState:()=>p,subscribe:g=>(n.add(g),()=>n.delete(g))},p=e=t(i,r,d);return d},xL=(t=>t?vb(t):vb),bL=t=>t;function _L(t,e=bL){const n=ta.useSyncExternalStore(t.subscribe,ta.useCallback(()=>e(t.getState()),[t,e]),ta.useCallback(()=>e(t.getInitialState()),[t,e]));return ta.useDebugValue(n),n}const yb=t=>{const e=xL(t),n=i=>_L(e,i);return Object.assign(n,e),n},$o=(t=>t?yb(t):yb),wL="modulepreload",SL=function(t){return"/"+t},xb={},Mr=function(e,n,i){let r=Promise.resolve();if(n&&n.length>0){let p=function(g){return Promise.all(g.map(m=>Promise.resolve(m).then(_=>({status:"fulfilled",value:_}),_=>({status:"rejected",reason:_}))))};document.getElementsByTagName("link");const l=document.querySelector("meta[property=csp-nonce]"),d=l?.nonce||l?.getAttribute("nonce");r=p(n.map(g=>{if(g=SL(g),g in xb)return;xb[g]=!0;const m=g.endsWith(".css"),_=m?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${g}"]${_}`))return;const A=document.createElement("link");if(A.rel=m?"stylesheet":wL,m||(A.as="script"),A.crossOrigin="",A.href=g,d&&A.setAttribute("nonce",d),document.head.appendChild(A),m)return new Promise((x,R)=>{A.addEventListener("load",x),A.addEventListener("error",()=>R(new Error(`Unable to preload CSS for ${g}`)))})}))}function a(l){const d=new Event("vite:preloadError",{cancelable:!0});if(d.payload=l,window.dispatchEvent(d),!d.defaultPrevented)throw l}return r.then(l=>{for(const d of l||[])d.status==="rejected"&&a(d.reason);return e().catch(a)})};function Ww(t,e){return function(){return t.apply(e,arguments)}}const{toString:CL}=Object.prototype,{getPrototypeOf:qy}=Object,{iterator:cg,toStringTag:Gw}=Symbol,ug=(t=>e=>{const n=CL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),_l=t=>(t=t.toLowerCase(),e=>ug(e)===t),dg=t=>e=>typeof e===t,{isArray:Pd}=Array,Td=dg("undefined");function Yf(t){return t!==null&&!Td(t)&&t.constructor!==null&&!Td(t.constructor)&&js(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const Vw=_l("ArrayBuffer");function EL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&Vw(t.buffer),e}const AL=dg("string"),js=dg("function"),Yw=dg("number"),Zf=t=>t!==null&&typeof t=="object",LL=t=>t===!0||t===!1,mp=t=>{if(ug(t)!=="object")return!1;const e=qy(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Gw in t)&&!(cg in t)},TL=t=>{if(!Zf(t)||Yf(t))return!1;try{return Object.keys(t).length===0&&Object.getPrototypeOf(t)===Object.prototype}catch{return!1}},jL=_l("Date"),kL=_l("File"),RL=_l("Blob"),NL=_l("FileList"),DL=t=>Zf(t)&&js(t.pipe),ML=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||js(t.append)&&((e=ug(t))==="formdata"||e==="object"&&js(t.toString)&&t.toString()==="[object FormData]"))},OL=_l("URLSearchParams"),[PL,IL,zL,BL]=["ReadableStream","Request","Response","Headers"].map(_l),FL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Kf(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let i,r;if(typeof t!="object"&&(t=[t]),Pd(t))for(i=0,r=t.length;i<r;i++)e.call(null,t[i],i,t);else{if(Yf(t))return;const a=n?Object.getOwnPropertyNames(t):Object.keys(t),l=a.length;let d;for(i=0;i<l;i++)d=a[i],e.call(null,t[d],d,t)}}function Zw(t,e){if(Yf(t))return null;e=e.toLowerCase();const n=Object.keys(t);let i=n.length,r;for(;i-- >0;)if(r=n[i],e===r.toLowerCase())return r;return null}const _u=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,Kw=t=>!Td(t)&&t!==_u;function Qv(){const{caseless:t,skipUndefined:e}=Kw(this)&&this||{},n={},i=(r,a)=>{const l=t&&Zw(n,a)||a;mp(n[l])&&mp(r)?n[l]=Qv(n[l],r):mp(r)?n[l]=Qv({},r):Pd(r)?n[l]=r.slice():(!e||!Td(r))&&(n[l]=r)};for(let r=0,a=arguments.length;r<a;r++)arguments[r]&&Kf(arguments[r],i);return n}const UL=(t,e,n,{allOwnKeys:i}={})=>(Kf(e,(r,a)=>{n&&js(r)?Object.defineProperty(t,a,{value:Ww(r,n),writable:!0,enumerable:!0,configurable:!0}):Object.defineProperty(t,a,{value:r,writable:!0,enumerable:!0,configurable:!0})},{allOwnKeys:i}),t),HL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),qL=(t,e,n,i)=>{t.prototype=Object.create(e.prototype,i),Object.defineProperty(t.prototype,"constructor",{value:t,writable:!0,enumerable:!1,configurable:!0}),Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},WL=(t,e,n,i)=>{let r,a,l;const d={};if(e=e||{},t==null)return e;do{for(r=Object.getOwnPropertyNames(t),a=r.length;a-- >0;)l=r[a],(!i||i(l,t,e))&&!d[l]&&(e[l]=t[l],d[l]=!0);t=n!==!1&&qy(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},GL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const i=t.indexOf(e,n);return i!==-1&&i===n},VL=t=>{if(!t)return null;if(Pd(t))return t;let e=t.length;if(!Yw(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},YL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&qy(Uint8Array)),ZL=(t,e)=>{const i=(t&&t[cg]).call(t);let r;for(;(r=i.next())&&!r.done;){const a=r.value;e.call(t,a[0],a[1])}},KL=(t,e)=>{let n;const i=[];for(;(n=t.exec(e))!==null;)i.push(n);return i},XL=_l("HTMLFormElement"),QL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,i,r){return i.toUpperCase()+r}),bb=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),$L=_l("RegExp"),Xw=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),i={};Kf(n,(r,a)=>{let l;(l=e(r,a,t))!==!1&&(i[a]=l||r)}),Object.defineProperties(t,i)},JL=t=>{Xw(t,(e,n)=>{if(js(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const i=t[n];if(js(i)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},eT=(t,e)=>{const n={},i=r=>{r.forEach(a=>{n[a]=!0})};return Pd(t)?i(t):i(String(t).split(e)),n},tT=()=>{},nT=(t,e)=>t!=null&&Number.isFinite(t=+t)?t:e;function iT(t){return!!(t&&js(t.append)&&t[Gw]==="FormData"&&t[cg])}const rT=t=>{const e=new Array(10),n=(i,r)=>{if(Zf(i)){if(e.indexOf(i)>=0)return;if(Yf(i))return i;if(!("toJSON"in i)){e[r]=i;const a=Pd(i)?[]:{};return Kf(i,(l,d)=>{const p=n(l,r+1);!Td(p)&&(a[d]=p)}),e[r]=void 0,a}}return i};return n(t,0)},aT=_l("AsyncFunction"),oT=t=>t&&(Zf(t)||js(t))&&js(t.then)&&js(t.catch),Qw=((t,e)=>t?setImmediate:e?((n,i)=>(_u.addEventListener("message",({source:r,data:a})=>{r===_u&&a===n&&i.length&&i.shift()()},!1),r=>{i.push(r),_u.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",js(_u.postMessage)),sT=typeof queueMicrotask<"u"?queueMicrotask.bind(_u):typeof process<"u"&&process.nextTick||Qw,lT=t=>t!=null&&js(t[cg]),ut={isArray:Pd,isArrayBuffer:Vw,isBuffer:Yf,isFormData:ML,isArrayBufferView:EL,isString:AL,isNumber:Yw,isBoolean:LL,isObject:Zf,isPlainObject:mp,isEmptyObject:TL,isReadableStream:PL,isRequest:IL,isResponse:zL,isHeaders:BL,isUndefined:Td,isDate:jL,isFile:kL,isBlob:RL,isRegExp:$L,isFunction:js,isStream:DL,isURLSearchParams:OL,isTypedArray:YL,isFileList:NL,forEach:Kf,merge:Qv,extend:UL,trim:FL,stripBOM:HL,inherits:qL,toFlatObject:WL,kindOf:ug,kindOfTest:_l,endsWith:GL,toArray:VL,forEachEntry:ZL,matchAll:KL,isHTMLForm:XL,hasOwnProperty:bb,hasOwnProp:bb,reduceDescriptors:Xw,freezeMethods:JL,toObjectSet:eT,toCamelCase:QL,noop:tT,toFiniteNumber:nT,findKey:Zw,global:_u,isContextDefined:Kw,isSpecCompliantForm:iT,toJSONObject:rT,isAsyncFn:aT,isThenable:oT,setImmediate:Qw,asap:sT,isIterable:lT};let Un=class $w extends Error{static from(e,n,i,r,a,l){const d=new $w(e.message,n||e.code,i,r,a);return d.cause=e,d.name=e.name,l&&Object.assign(d,l),d}constructor(e,n,i,r,a){super(e),this.name="AxiosError",this.isAxiosError=!0,n&&(this.code=n),i&&(this.config=i),r&&(this.request=r),a&&(this.response=a,this.status=a.status)}toJSON(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ut.toJSONObject(this.config),code:this.code,status:this.status}}};Un.ERR_BAD_OPTION_VALUE="ERR_BAD_OPTION_VALUE";Un.ERR_BAD_OPTION="ERR_BAD_OPTION";Un.ECONNABORTED="ECONNABORTED";Un.ETIMEDOUT="ETIMEDOUT";Un.ERR_NETWORK="ERR_NETWORK";Un.ERR_FR_TOO_MANY_REDIRECTS="ERR_FR_TOO_MANY_REDIRECTS";Un.ERR_DEPRECATED="ERR_DEPRECATED";Un.ERR_BAD_RESPONSE="ERR_BAD_RESPONSE";Un.ERR_BAD_REQUEST="ERR_BAD_REQUEST";Un.ERR_CANCELED="ERR_CANCELED";Un.ERR_NOT_SUPPORT="ERR_NOT_SUPPORT";Un.ERR_INVALID_URL="ERR_INVALID_URL";const cT=null;function $v(t){return ut.isPlainObject(t)||ut.isArray(t)}function Jw(t){return ut.endsWith(t,"[]")?t.slice(0,-2):t}function _b(t,e,n){return t?t.concat(e).map(function(r,a){return r=Jw(r),!n&&a?"["+r+"]":r}).join(n?".":""):e}function uT(t){return ut.isArray(t)&&!t.some($v)}const dT=ut.toFlatObject(ut,{},null,function(e){return/^is[A-Z]/.test(e)});function fg(t,e,n){if(!ut.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=ut.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(M,k){return!ut.isUndefined(k[M])});const i=n.metaTokens,r=n.visitor||m,a=n.dots,l=n.indexes,p=(n.Blob||typeof Blob<"u"&&Blob)&&ut.isSpecCompliantForm(e);if(!ut.isFunction(r))throw new TypeError("visitor must be a function");function g(R){if(R===null)return"";if(ut.isDate(R))return R.toISOString();if(ut.isBoolean(R))return R.toString();if(!p&&ut.isBlob(R))throw new Un("Blob is not supported. Use a Buffer instead.");return ut.isArrayBuffer(R)||ut.isTypedArray(R)?p&&typeof Blob=="function"?new Blob([R]):Buffer.from(R):R}function m(R,M,k){let I=R;if(R&&!k&&typeof R=="object"){if(ut.endsWith(M,"{}"))M=i?M:M.slice(0,-2),R=JSON.stringify(R);else if(ut.isArray(R)&&uT(R)||(ut.isFileList(R)||ut.endsWith(M,"[]"))&&(I=ut.toArray(R)))return M=Jw(M),I.forEach(function(B,V){!(ut.isUndefined(B)||B===null)&&e.append(l===!0?_b([M],V,a):l===null?M:M+"[]",g(B))}),!1}return $v(R)?!0:(e.append(_b(k,M,a),g(R)),!1)}const _=[],A=Object.assign(dT,{defaultVisitor:m,convertValue:g,isVisitable:$v});function x(R,M){if(!ut.isUndefined(R)){if(_.indexOf(R)!==-1)throw Error("Circular reference detected in "+M.join("."));_.push(R),ut.forEach(R,function(I,Y){(!(ut.isUndefined(I)||I===null)&&r.call(e,I,ut.isString(Y)?Y.trim():Y,M,A))===!0&&x(I,M?M.concat(Y):[Y])}),_.pop()}}if(!ut.isObject(t))throw new TypeError("data must be an object");return x(t),e}function wb(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(i){return e[i]})}function Wy(t,e){this._pairs=[],t&&fg(t,this,e)}const e5=Wy.prototype;e5.append=function(e,n){this._pairs.push([e,n])};e5.toString=function(e){const n=e?function(i){return e.call(this,i,wb)}:wb;return this._pairs.map(function(r){return n(r[0])+"="+n(r[1])},"").join("&")};function fT(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function t5(t,e,n){if(!e)return t;const i=n&&n.encode||fT,r=ut.isFunction(n)?{serialize:n}:n,a=r&&r.serialize;let l;if(a?l=a(e,r):l=ut.isURLSearchParams(e)?e.toString():new Wy(e,r).toString(i),l){const d=t.indexOf("#");d!==-1&&(t=t.slice(0,d)),t+=(t.indexOf("?")===-1?"?":"&")+l}return t}class Sb{constructor(){this.handlers=[]}use(e,n,i){return this.handlers.push({fulfilled:e,rejected:n,synchronous:i?i.synchronous:!1,runWhen:i?i.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){ut.forEach(this.handlers,function(i){i!==null&&e(i)})}}const n5={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},hT=typeof URLSearchParams<"u"?URLSearchParams:Wy,pT=typeof FormData<"u"?FormData:null,gT=typeof Blob<"u"?Blob:null,mT={isBrowser:!0,classes:{URLSearchParams:hT,FormData:pT,Blob:gT},protocols:["http","https","file","blob","url","data"]},Gy=typeof window<"u"&&typeof document<"u",Jv=typeof navigator=="object"&&navigator||void 0,vT=Gy&&(!Jv||["ReactNative","NativeScript","NS"].indexOf(Jv.product)<0),yT=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",xT=Gy&&window.location.href||"http://localhost",bT=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:Gy,hasStandardBrowserEnv:vT,hasStandardBrowserWebWorkerEnv:yT,navigator:Jv,origin:xT},Symbol.toStringTag,{value:"Module"})),Xo={...bT,...mT};function _T(t,e){return fg(t,new Xo.classes.URLSearchParams,{visitor:function(n,i,r,a){return Xo.isNode&&ut.isBuffer(n)?(this.append(i,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)},...e})}function wT(t){return ut.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function ST(t){const e={},n=Object.keys(t);let i;const r=n.length;let a;for(i=0;i<r;i++)a=n[i],e[a]=t[a];return e}function i5(t){function e(n,i,r,a){let l=n[a++];if(l==="__proto__")return!0;const d=Number.isFinite(+l),p=a>=n.length;return l=!l&&ut.isArray(r)?r.length:l,p?(ut.hasOwnProp(r,l)?r[l]=[r[l],i]:r[l]=i,!d):((!r[l]||!ut.isObject(r[l]))&&(r[l]=[]),e(n,i,r[l],a)&&ut.isArray(r[l])&&(r[l]=ST(r[l])),!d)}if(ut.isFormData(t)&&ut.isFunction(t.entries)){const n={};return ut.forEachEntry(t,(i,r)=>{e(wT(i),r,n,0)}),n}return null}function CT(t,e,n){if(ut.isString(t))try{return(e||JSON.parse)(t),ut.trim(t)}catch(i){if(i.name!=="SyntaxError")throw i}return(n||JSON.stringify)(t)}const Xf={transitional:n5,adapter:["xhr","http","fetch"],transformRequest:[function(e,n){const i=n.getContentType()||"",r=i.indexOf("application/json")>-1,a=ut.isObject(e);if(a&&ut.isHTMLForm(e)&&(e=new FormData(e)),ut.isFormData(e))return r?JSON.stringify(i5(e)):e;if(ut.isArrayBuffer(e)||ut.isBuffer(e)||ut.isStream(e)||ut.isFile(e)||ut.isBlob(e)||ut.isReadableStream(e))return e;if(ut.isArrayBufferView(e))return e.buffer;if(ut.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let d;if(a){if(i.indexOf("application/x-www-form-urlencoded")>-1)return _T(e,this.formSerializer).toString();if((d=ut.isFileList(e))||i.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return fg(d?{"files[]":e}:e,p&&new p,this.formSerializer)}}return a||r?(n.setContentType("application/json",!1),CT(e)):e}],transformResponse:[function(e){const n=this.transitional||Xf.transitional,i=n&&n.forcedJSONParsing,r=this.responseType==="json";if(ut.isResponse(e)||ut.isReadableStream(e))return e;if(e&&ut.isString(e)&&(i&&!this.responseType||r)){const l=!(n&&n.silentJSONParsing)&&r;try{return JSON.parse(e,this.parseReviver)}catch(d){if(l)throw d.name==="SyntaxError"?Un.from(d,Un.ERR_BAD_RESPONSE,this,null,this.response):d}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Xo.classes.FormData,Blob:Xo.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ut.forEach(["delete","get","head","post","put","patch"],t=>{Xf.headers[t]={}});const ET=ut.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),AT=t=>{const e={};let n,i,r;return t&&t.split(`
`).forEach(function(l){r=l.indexOf(":"),n=l.substring(0,r).trim().toLowerCase(),i=l.substring(r+1).trim(),!(!n||e[n]&&ET[n])&&(n==="set-cookie"?e[n]?e[n].push(i):e[n]=[i]:e[n]=e[n]?e[n]+", "+i:i)}),e},Cb=Symbol("internals");function bf(t){return t&&String(t).trim().toLowerCase()}function vp(t){return t===!1||t==null?t:ut.isArray(t)?t.map(vp):String(t)}function LT(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let i;for(;i=n.exec(t);)e[i[1]]=i[2];return e}const TT=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Km(t,e,n,i,r){if(ut.isFunction(i))return i.call(this,e,n);if(r&&(e=n),!!ut.isString(e)){if(ut.isString(i))return e.indexOf(i)!==-1;if(ut.isRegExp(i))return i.test(e)}}function jT(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,i)=>n.toUpperCase()+i)}function kT(t,e){const n=ut.toCamelCase(" "+e);["get","set","has"].forEach(i=>{Object.defineProperty(t,i+n,{value:function(r,a,l){return this[i].call(this,e,r,a,l)},configurable:!0})})}let ks=class{constructor(e){e&&this.set(e)}set(e,n,i){const r=this;function a(d,p,g){const m=bf(p);if(!m)throw new Error("header name must be a non-empty string");const _=ut.findKey(r,m);(!_||r[_]===void 0||g===!0||g===void 0&&r[_]!==!1)&&(r[_||p]=vp(d))}const l=(d,p)=>ut.forEach(d,(g,m)=>a(g,m,p));if(ut.isPlainObject(e)||e instanceof this.constructor)l(e,n);else if(ut.isString(e)&&(e=e.trim())&&!TT(e))l(AT(e),n);else if(ut.isObject(e)&&ut.isIterable(e)){let d={},p,g;for(const m of e){if(!ut.isArray(m))throw TypeError("Object iterator must return a key-value pair");d[g=m[0]]=(p=d[g])?ut.isArray(p)?[...p,m[1]]:[p,m[1]]:m[1]}l(d,n)}else e!=null&&a(n,e,i);return this}get(e,n){if(e=bf(e),e){const i=ut.findKey(this,e);if(i){const r=this[i];if(!n)return r;if(n===!0)return LT(r);if(ut.isFunction(n))return n.call(this,r,i);if(ut.isRegExp(n))return n.exec(r);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=bf(e),e){const i=ut.findKey(this,e);return!!(i&&this[i]!==void 0&&(!n||Km(this,this[i],i,n)))}return!1}delete(e,n){const i=this;let r=!1;function a(l){if(l=bf(l),l){const d=ut.findKey(i,l);d&&(!n||Km(i,i[d],d,n))&&(delete i[d],r=!0)}}return ut.isArray(e)?e.forEach(a):a(e),r}clear(e){const n=Object.keys(this);let i=n.length,r=!1;for(;i--;){const a=n[i];(!e||Km(this,this[a],a,e,!0))&&(delete this[a],r=!0)}return r}normalize(e){const n=this,i={};return ut.forEach(this,(r,a)=>{const l=ut.findKey(i,a);if(l){n[l]=vp(r),delete n[a];return}const d=e?jT(a):String(a).trim();d!==a&&delete n[a],n[d]=vp(r),i[d]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return ut.forEach(this,(i,r)=>{i!=null&&i!==!1&&(n[r]=e&&ut.isArray(i)?i.join(", "):i)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const i=new this(e);return n.forEach(r=>i.set(r)),i}static accessor(e){const i=(this[Cb]=this[Cb]={accessors:{}}).accessors,r=this.prototype;function a(l){const d=bf(l);i[d]||(kT(r,l),i[d]=!0)}return ut.isArray(e)?e.forEach(a):a(e),this}};ks.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ut.reduceDescriptors(ks.prototype,({value:t},e)=>{let n=e[0].toUpperCase()+e.slice(1);return{get:()=>t,set(i){this[n]=i}}});ut.freezeMethods(ks);function Xm(t,e){const n=this||Xf,i=e||n,r=ks.from(i.headers);let a=i.data;return ut.forEach(t,function(d){a=d.call(n,a,r.normalize(),e?e.status:void 0)}),r.normalize(),a}function r5(t){return!!(t&&t.__CANCEL__)}let Qf=class extends Un{constructor(e,n,i){super(e??"canceled",Un.ERR_CANCELED,n,i),this.name="CanceledError",this.__CANCEL__=!0}};function a5(t,e,n){const i=n.config.validateStatus;!n.status||!i||i(n.status)?t(n):e(new Un("Request failed with status code "+n.status,[Un.ERR_BAD_REQUEST,Un.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function RT(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function NT(t,e){t=t||10;const n=new Array(t),i=new Array(t);let r=0,a=0,l;return e=e!==void 0?e:1e3,function(p){const g=Date.now(),m=i[a];l||(l=g),n[r]=p,i[r]=g;let _=a,A=0;for(;_!==r;)A+=n[_++],_=_%t;if(r=(r+1)%t,r===a&&(a=(a+1)%t),g-l<e)return;const x=m&&g-m;return x?Math.round(A*1e3/x):void 0}}function DT(t,e){let n=0,i=1e3/e,r,a;const l=(g,m=Date.now())=>{n=m,r=null,a&&(clearTimeout(a),a=null),t(...g)};return[(...g)=>{const m=Date.now(),_=m-n;_>=i?l(g,m):(r=g,a||(a=setTimeout(()=>{a=null,l(r)},i-_)))},()=>r&&l(r)]}const Op=(t,e,n=3)=>{let i=0;const r=NT(50,250);return DT(a=>{const l=a.loaded,d=a.lengthComputable?a.total:void 0,p=l-i,g=r(p),m=l<=d;i=l;const _={loaded:l,total:d,progress:d?l/d:void 0,bytes:p,rate:g||void 0,estimated:g&&d&&m?(d-l)/g:void 0,event:a,lengthComputable:d!=null,[e?"download":"upload"]:!0};t(_)},n)},Eb=(t,e)=>{const n=t!=null;return[i=>e[0]({lengthComputable:n,total:t,loaded:i}),e[1]]},Ab=t=>(...e)=>ut.asap(()=>t(...e)),MT=Xo.hasStandardBrowserEnv?((t,e)=>n=>(n=new URL(n,Xo.origin),t.protocol===n.protocol&&t.host===n.host&&(e||t.port===n.port)))(new URL(Xo.origin),Xo.navigator&&/(msie|trident)/i.test(Xo.navigator.userAgent)):()=>!0,OT=Xo.hasStandardBrowserEnv?{write(t,e,n,i,r,a,l){if(typeof document>"u")return;const d=[`${t}=${encodeURIComponent(e)}`];ut.isNumber(n)&&d.push(`expires=${new Date(n).toUTCString()}`),ut.isString(i)&&d.push(`path=${i}`),ut.isString(r)&&d.push(`domain=${r}`),a===!0&&d.push("secure"),ut.isString(l)&&d.push(`SameSite=${l}`),document.cookie=d.join("; ")},read(t){if(typeof document>"u")return null;const e=document.cookie.match(new RegExp("(?:^|; )"+t+"=([^;]*)"));return e?decodeURIComponent(e[1]):null},remove(t){this.write(t,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function PT(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function IT(t,e){return e?t.replace(/\/?\/$/,"")+"/"+e.replace(/^\/+/,""):t}function o5(t,e,n){let i=!PT(e);return t&&(i||n==!1)?IT(t,e):e}const Lb=t=>t instanceof ks?{...t}:t;function Tu(t,e){e=e||{};const n={};function i(g,m,_,A){return ut.isPlainObject(g)&&ut.isPlainObject(m)?ut.merge.call({caseless:A},g,m):ut.isPlainObject(m)?ut.merge({},m):ut.isArray(m)?m.slice():m}function r(g,m,_,A){if(ut.isUndefined(m)){if(!ut.isUndefined(g))return i(void 0,g,_,A)}else return i(g,m,_,A)}function a(g,m){if(!ut.isUndefined(m))return i(void 0,m)}function l(g,m){if(ut.isUndefined(m)){if(!ut.isUndefined(g))return i(void 0,g)}else return i(void 0,m)}function d(g,m,_){if(_ in e)return i(g,m);if(_ in t)return i(void 0,g)}const p={url:a,method:a,data:a,baseURL:l,transformRequest:l,transformResponse:l,paramsSerializer:l,timeout:l,timeoutMessage:l,withCredentials:l,withXSRFToken:l,adapter:l,responseType:l,xsrfCookieName:l,xsrfHeaderName:l,onUploadProgress:l,onDownloadProgress:l,decompress:l,maxContentLength:l,maxBodyLength:l,beforeRedirect:l,transport:l,httpAgent:l,httpsAgent:l,cancelToken:l,socketPath:l,responseEncoding:l,validateStatus:d,headers:(g,m,_)=>r(Lb(g),Lb(m),_,!0)};return ut.forEach(Object.keys({...t,...e}),function(m){const _=p[m]||r,A=_(t[m],e[m],m);ut.isUndefined(A)&&_!==d||(n[m]=A)}),n}const s5=t=>{const e=Tu({},t);let{data:n,withXSRFToken:i,xsrfHeaderName:r,xsrfCookieName:a,headers:l,auth:d}=e;if(e.headers=l=ks.from(l),e.url=t5(o5(e.baseURL,e.url,e.allowAbsoluteUrls),t.params,t.paramsSerializer),d&&l.set("Authorization","Basic "+btoa((d.username||"")+":"+(d.password?unescape(encodeURIComponent(d.password)):""))),ut.isFormData(n)){if(Xo.hasStandardBrowserEnv||Xo.hasStandardBrowserWebWorkerEnv)l.setContentType(void 0);else if(ut.isFunction(n.getHeaders)){const p=n.getHeaders(),g=["content-type","content-length"];Object.entries(p).forEach(([m,_])=>{g.includes(m.toLowerCase())&&l.set(m,_)})}}if(Xo.hasStandardBrowserEnv&&(i&&ut.isFunction(i)&&(i=i(e)),i||i!==!1&&MT(e.url))){const p=r&&a&&OT.read(a);p&&l.set(r,p)}return e},zT=typeof XMLHttpRequest<"u",BT=zT&&function(t){return new Promise(function(n,i){const r=s5(t);let a=r.data;const l=ks.from(r.headers).normalize();let{responseType:d,onUploadProgress:p,onDownloadProgress:g}=r,m,_,A,x,R;function M(){x&&x(),R&&R(),r.cancelToken&&r.cancelToken.unsubscribe(m),r.signal&&r.signal.removeEventListener("abort",m)}let k=new XMLHttpRequest;k.open(r.method.toUpperCase(),r.url,!0),k.timeout=r.timeout;function I(){if(!k)return;const B=ks.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),ee={data:!d||d==="text"||d==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:B,config:t,request:k};a5(function(_e){n(_e),M()},function(_e){i(_e),M()},ee),k=null}"onloadend"in k?k.onloadend=I:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(I)},k.onabort=function(){k&&(i(new Un("Request aborted",Un.ECONNABORTED,t,k)),k=null)},k.onerror=function(V){const ee=V&&V.message?V.message:"Network Error",ue=new Un(ee,Un.ERR_NETWORK,t,k);ue.event=V||null,i(ue),k=null},k.ontimeout=function(){let V=r.timeout?"timeout of "+r.timeout+"ms exceeded":"timeout exceeded";const ee=r.transitional||n5;r.timeoutErrorMessage&&(V=r.timeoutErrorMessage),i(new Un(V,ee.clarifyTimeoutError?Un.ETIMEDOUT:Un.ECONNABORTED,t,k)),k=null},a===void 0&&l.setContentType(null),"setRequestHeader"in k&&ut.forEach(l.toJSON(),function(V,ee){k.setRequestHeader(ee,V)}),ut.isUndefined(r.withCredentials)||(k.withCredentials=!!r.withCredentials),d&&d!=="json"&&(k.responseType=r.responseType),g&&([A,R]=Op(g,!0),k.addEventListener("progress",A)),p&&k.upload&&([_,x]=Op(p),k.upload.addEventListener("progress",_),k.upload.addEventListener("loadend",x)),(r.cancelToken||r.signal)&&(m=B=>{k&&(i(!B||B.type?new Qf(null,t,k):B),k.abort(),k=null)},r.cancelToken&&r.cancelToken.subscribe(m),r.signal&&(r.signal.aborted?m():r.signal.addEventListener("abort",m)));const Y=RT(r.url);if(Y&&Xo.protocols.indexOf(Y)===-1){i(new Un("Unsupported protocol "+Y+":",Un.ERR_BAD_REQUEST,t));return}k.send(a||null)})},FT=(t,e)=>{const{length:n}=t=t?t.filter(Boolean):[];if(e||n){let i=new AbortController,r;const a=function(g){if(!r){r=!0,d();const m=g instanceof Error?g:this.reason;i.abort(m instanceof Un?m:new Qf(m instanceof Error?m.message:m))}};let l=e&&setTimeout(()=>{l=null,a(new Un(`timeout of ${e}ms exceeded`,Un.ETIMEDOUT))},e);const d=()=>{t&&(l&&clearTimeout(l),l=null,t.forEach(g=>{g.unsubscribe?g.unsubscribe(a):g.removeEventListener("abort",a)}),t=null)};t.forEach(g=>g.addEventListener("abort",a));const{signal:p}=i;return p.unsubscribe=()=>ut.asap(d),p}},UT=function*(t,e){let n=t.byteLength;if(n<e){yield t;return}let i=0,r;for(;i<n;)r=i+e,yield t.slice(i,r),i=r},HT=async function*(t,e){for await(const n of qT(t))yield*UT(n,e)},qT=async function*(t){if(t[Symbol.asyncIterator]){yield*t;return}const e=t.getReader();try{for(;;){const{done:n,value:i}=await e.read();if(n)break;yield i}}finally{await e.cancel()}},Tb=(t,e,n,i)=>{const r=HT(t,e);let a=0,l,d=p=>{l||(l=!0,i&&i(p))};return new ReadableStream({async pull(p){try{const{done:g,value:m}=await r.next();if(g){d(),p.close();return}let _=m.byteLength;if(n){let A=a+=_;n(A)}p.enqueue(new Uint8Array(m))}catch(g){throw d(g),g}},cancel(p){return d(p),r.return()}},{highWaterMark:2})},jb=64*1024,{isFunction:Vh}=ut,WT=(({Request:t,Response:e})=>({Request:t,Response:e}))(ut.global),{ReadableStream:kb,TextEncoder:Rb}=ut.global,Nb=(t,...e)=>{try{return!!t(...e)}catch{return!1}},GT=t=>{t=ut.merge.call({skipUndefined:!0},WT,t);const{fetch:e,Request:n,Response:i}=t,r=e?Vh(e):typeof fetch=="function",a=Vh(n),l=Vh(i);if(!r)return!1;const d=r&&Vh(kb),p=r&&(typeof Rb=="function"?(R=>M=>R.encode(M))(new Rb):async R=>new Uint8Array(await new n(R).arrayBuffer())),g=a&&d&&Nb(()=>{let R=!1;const M=new n(Xo.origin,{body:new kb,method:"POST",get duplex(){return R=!0,"half"}}).headers.has("Content-Type");return R&&!M}),m=l&&d&&Nb(()=>ut.isReadableStream(new i("").body)),_={stream:m&&(R=>R.body)};r&&["text","arrayBuffer","blob","formData","stream"].forEach(R=>{!_[R]&&(_[R]=(M,k)=>{let I=M&&M[R];if(I)return I.call(M);throw new Un(`Response type '${R}' is not supported`,Un.ERR_NOT_SUPPORT,k)})});const A=async R=>{if(R==null)return 0;if(ut.isBlob(R))return R.size;if(ut.isSpecCompliantForm(R))return(await new n(Xo.origin,{method:"POST",body:R}).arrayBuffer()).byteLength;if(ut.isArrayBufferView(R)||ut.isArrayBuffer(R))return R.byteLength;if(ut.isURLSearchParams(R)&&(R=R+""),ut.isString(R))return(await p(R)).byteLength},x=async(R,M)=>{const k=ut.toFiniteNumber(R.getContentLength());return k??A(M)};return async R=>{let{url:M,method:k,data:I,signal:Y,cancelToken:B,timeout:V,onDownloadProgress:ee,onUploadProgress:ue,responseType:_e,headers:fe,withCredentials:G="same-origin",fetchOptions:me}=s5(R),Z=e||fetch;_e=_e?(_e+"").toLowerCase():"text";let J=FT([Y,B&&B.toAbortSignal()],V),Se=null;const Ee=J&&J.unsubscribe&&(()=>{J.unsubscribe()});let Ye;try{if(ue&&g&&k!=="get"&&k!=="head"&&(Ye=await x(fe,I))!==0){let ne=new n(M,{method:"POST",body:I,duplex:"half"}),H;if(ut.isFormData(I)&&(H=ne.headers.get("content-type"))&&fe.setContentType(H),ne.body){const[te,ce]=Eb(Ye,Op(Ab(ue)));I=Tb(ne.body,jb,te,ce)}}ut.isString(G)||(G=G?"include":"omit");const oe=a&&"credentials"in n.prototype,ae={...me,signal:J,method:k.toUpperCase(),headers:fe.normalize().toJSON(),body:I,duplex:"half",credentials:oe?G:void 0};Se=a&&new n(M,ae);let he=await(a?Z(Se,me):Z(M,ae));const De=m&&(_e==="stream"||_e==="response");if(m&&(ee||De&&Ee)){const ne={};["status","statusText","headers"].forEach(Q=>{ne[Q]=he[Q]});const H=ut.toFiniteNumber(he.headers.get("content-length")),[te,ce]=ee&&Eb(H,Op(Ab(ee),!0))||[];he=new i(Tb(he.body,jb,te,()=>{ce&&ce(),Ee&&Ee()}),ne)}_e=_e||"text";let ze=await _[ut.findKey(_,_e)||"text"](he,R);return!De&&Ee&&Ee(),await new Promise((ne,H)=>{a5(ne,H,{data:ze,headers:ks.from(he.headers),status:he.status,statusText:he.statusText,config:R,request:Se})})}catch(oe){throw Ee&&Ee(),oe&&oe.name==="TypeError"&&/Load failed|fetch/i.test(oe.message)?Object.assign(new Un("Network Error",Un.ERR_NETWORK,R,Se),{cause:oe.cause||oe}):Un.from(oe,oe&&oe.code,R,Se)}}},VT=new Map,l5=t=>{let e=t&&t.env||{};const{fetch:n,Request:i,Response:r}=e,a=[i,r,n];let l=a.length,d=l,p,g,m=VT;for(;d--;)p=a[d],g=m.get(p),g===void 0&&m.set(p,g=d?new Map:GT(e)),m=g;return g};l5();const Vy={http:cT,xhr:BT,fetch:{get:l5}};ut.forEach(Vy,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const Db=t=>`- ${t}`,YT=t=>ut.isFunction(t)||t===null||t===!1;function ZT(t,e){t=ut.isArray(t)?t:[t];const{length:n}=t;let i,r;const a={};for(let l=0;l<n;l++){i=t[l];let d;if(r=i,!YT(i)&&(r=Vy[(d=String(i)).toLowerCase()],r===void 0))throw new Un(`Unknown adapter '${d}'`);if(r&&(ut.isFunction(r)||(r=r.get(e))))break;a[d||"#"+l]=r}if(!r){const l=Object.entries(a).map(([p,g])=>`adapter ${p} `+(g===!1?"is not supported by the environment":"is not available in the build"));let d=n?l.length>1?`since :
`+l.map(Db).join(`
`):" "+Db(l[0]):"as no adapter specified";throw new Un("There is no suitable adapter to dispatch the request "+d,"ERR_NOT_SUPPORT")}return r}const c5={getAdapter:ZT,adapters:Vy};function Qm(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Qf(null,t)}function Mb(t){return Qm(t),t.headers=ks.from(t.headers),t.data=Xm.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),c5.getAdapter(t.adapter||Xf.adapter,t)(t).then(function(i){return Qm(t),i.data=Xm.call(t,t.transformResponse,i),i.headers=ks.from(i.headers),i},function(i){return r5(i)||(Qm(t),i&&i.response&&(i.response.data=Xm.call(t,t.transformResponse,i.response),i.response.headers=ks.from(i.response.headers))),Promise.reject(i)})}const u5="1.13.4",hg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{hg[t]=function(i){return typeof i===t||"a"+(e<1?"n ":" ")+t}});const Ob={};hg.transitional=function(e,n,i){function r(a,l){return"[Axios v"+u5+"] Transitional option '"+a+"'"+l+(i?". "+i:"")}return(a,l,d)=>{if(e===!1)throw new Un(r(l," has been removed"+(n?" in "+n:"")),Un.ERR_DEPRECATED);return n&&!Ob[l]&&(Ob[l]=!0,console.warn(r(l," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(a,l,d):!0}};hg.spelling=function(e){return(n,i)=>(console.warn(`${i} is likely a misspelling of ${e}`),!0)};function KT(t,e,n){if(typeof t!="object")throw new Un("options must be an object",Un.ERR_BAD_OPTION_VALUE);const i=Object.keys(t);let r=i.length;for(;r-- >0;){const a=i[r],l=e[a];if(l){const d=t[a],p=d===void 0||l(d,a,t);if(p!==!0)throw new Un("option "+a+" must be "+p,Un.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Un("Unknown option "+a,Un.ERR_BAD_OPTION)}}const yp={assertOptions:KT,validators:hg},Bl=yp.validators;let wu=class{constructor(e){this.defaults=e||{},this.interceptors={request:new Sb,response:new Sb}}async request(e,n){try{return await this._request(e,n)}catch(i){if(i instanceof Error){let r={};Error.captureStackTrace?Error.captureStackTrace(r):r=new Error;const a=r.stack?r.stack.replace(/^.+\n/,""):"";try{i.stack?a&&!String(i.stack).endsWith(a.replace(/^.+\n.+\n/,""))&&(i.stack+=`
`+a):i.stack=a}catch{}}throw i}}_request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Tu(this.defaults,n);const{transitional:i,paramsSerializer:r,headers:a}=n;i!==void 0&&yp.assertOptions(i,{silentJSONParsing:Bl.transitional(Bl.boolean),forcedJSONParsing:Bl.transitional(Bl.boolean),clarifyTimeoutError:Bl.transitional(Bl.boolean)},!1),r!=null&&(ut.isFunction(r)?n.paramsSerializer={serialize:r}:yp.assertOptions(r,{encode:Bl.function,serialize:Bl.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),yp.assertOptions(n,{baseUrl:Bl.spelling("baseURL"),withXsrfToken:Bl.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let l=a&&ut.merge(a.common,a[n.method]);a&&ut.forEach(["delete","get","head","post","put","patch","common"],R=>{delete a[R]}),n.headers=ks.concat(l,a);const d=[];let p=!0;this.interceptors.request.forEach(function(M){typeof M.runWhen=="function"&&M.runWhen(n)===!1||(p=p&&M.synchronous,d.unshift(M.fulfilled,M.rejected))});const g=[];this.interceptors.response.forEach(function(M){g.push(M.fulfilled,M.rejected)});let m,_=0,A;if(!p){const R=[Mb.bind(this),void 0];for(R.unshift(...d),R.push(...g),A=R.length,m=Promise.resolve(n);_<A;)m=m.then(R[_++],R[_++]);return m}A=d.length;let x=n;for(;_<A;){const R=d[_++],M=d[_++];try{x=R(x)}catch(k){M.call(this,k);break}}try{m=Mb.call(this,x)}catch(R){return Promise.reject(R)}for(_=0,A=g.length;_<A;)m=m.then(g[_++],g[_++]);return m}getUri(e){e=Tu(this.defaults,e);const n=o5(e.baseURL,e.url,e.allowAbsoluteUrls);return t5(n,e.params,e.paramsSerializer)}};ut.forEach(["delete","get","head","options"],function(e){wu.prototype[e]=function(n,i){return this.request(Tu(i||{},{method:e,url:n,data:(i||{}).data}))}});ut.forEach(["post","put","patch"],function(e){function n(i){return function(a,l,d){return this.request(Tu(d||{},{method:e,headers:i?{"Content-Type":"multipart/form-data"}:{},url:a,data:l}))}}wu.prototype[e]=n(),wu.prototype[e+"Form"]=n(!0)});let XT=class d5{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(a){n=a});const i=this;this.promise.then(r=>{if(!i._listeners)return;let a=i._listeners.length;for(;a-- >0;)i._listeners[a](r);i._listeners=null}),this.promise.then=r=>{let a;const l=new Promise(d=>{i.subscribe(d),a=d}).then(r);return l.cancel=function(){i.unsubscribe(a)},l},e(function(a,l,d){i.reason||(i.reason=new Qf(a,l,d),n(i.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const e=new AbortController,n=i=>{e.abort(i)};return this.subscribe(n),e.signal.unsubscribe=()=>this.unsubscribe(n),e.signal}static source(){let e;return{token:new d5(function(r){e=r}),cancel:e}}};function QT(t){return function(n){return t.apply(null,n)}}function $T(t){return ut.isObject(t)&&t.isAxiosError===!0}const ey={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(ey).forEach(([t,e])=>{ey[e]=t});function f5(t){const e=new wu(t),n=Ww(wu.prototype.request,e);return ut.extend(n,wu.prototype,e,{allOwnKeys:!0}),ut.extend(n,e,null,{allOwnKeys:!0}),n.create=function(r){return f5(Tu(t,r))},n}const Ma=f5(Xf);Ma.Axios=wu;Ma.CanceledError=Qf;Ma.CancelToken=XT;Ma.isCancel=r5;Ma.VERSION=u5;Ma.toFormData=fg;Ma.AxiosError=Un;Ma.Cancel=Ma.CanceledError;Ma.all=function(e){return Promise.all(e)};Ma.spread=QT;Ma.isAxiosError=$T;Ma.mergeConfig=Tu;Ma.AxiosHeaders=ks;Ma.formToJSON=t=>i5(ut.isHTMLForm(t)?new FormData(t):t);Ma.getAdapter=c5.getAdapter;Ma.HttpStatusCode=ey;Ma.default=Ma;const{Axios:uz,AxiosError:dz,CanceledError:fz,isCancel:hz,CancelToken:pz,VERSION:gz,all:mz,Cancel:vz,isAxiosError:yz,spread:xz,toFormData:bz,AxiosHeaders:_z,HttpStatusCode:wz,formToJSON:Sz,getAdapter:Cz,mergeConfig:Ez}=Ma;var xp={exports:{}},JT=xp.exports,Pb;function e3(){return Pb||(Pb=1,(function(t,e){((n,i)=>{t.exports=i()})(JT,function(){var n=function(w,j){return(n=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(P,z){P.__proto__=z}:function(P,z){for(var W in z)Object.prototype.hasOwnProperty.call(z,W)&&(P[W]=z[W])}))(w,j)},i=function(){return(i=Object.assign||function(w){for(var j,P=1,z=arguments.length;P<z;P++)for(var W in j=arguments[P])Object.prototype.hasOwnProperty.call(j,W)&&(w[W]=j[W]);return w}).apply(this,arguments)};function r(w,j,P){for(var z,W=0,$=j.length;W<$;W++)!z&&W in j||((z=z||Array.prototype.slice.call(j,0,W))[W]=j[W]);return w.concat(z||Array.prototype.slice.call(j))}var a=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:NA,l=Object.keys,d=Array.isArray;function p(w,j){return typeof j=="object"&&l(j).forEach(function(P){w[P]=j[P]}),w}typeof Promise>"u"||a.Promise||(a.Promise=Promise);var g=Object.getPrototypeOf,m={}.hasOwnProperty;function _(w,j){return m.call(w,j)}function A(w,j){typeof j=="function"&&(j=j(g(w))),(typeof Reflect>"u"?l:Reflect.ownKeys)(j).forEach(function(P){R(w,P,j[P])})}var x=Object.defineProperty;function R(w,j,P,z){x(w,j,p(P&&_(P,"get")&&typeof P.get=="function"?{get:P.get,set:P.set,configurable:!0}:{value:P,configurable:!0,writable:!0},z))}function M(w){return{from:function(j){return w.prototype=Object.create(j.prototype),R(w.prototype,"constructor",w),{extend:A.bind(null,w.prototype)}}}}var k=Object.getOwnPropertyDescriptor,I=[].slice;function Y(w,j,P){return I.call(w,j,P)}function B(w,j){return j(w)}function V(w){if(!w)throw new Error("Assertion Failed")}function ee(w){a.setImmediate?setImmediate(w):setTimeout(w,0)}function ue(w,j){if(typeof j=="string"&&_(w,j))return w[j];if(!j)return w;if(typeof j!="string"){for(var P=[],z=0,W=j.length;z<W;++z){var $=ue(w,j[z]);P.push($)}return P}var ge,be=j.indexOf(".");return be===-1||(ge=w[j.substr(0,be)])==null?void 0:ue(ge,j.substr(be+1))}function _e(w,j,P){if(w&&j!==void 0&&!("isFrozen"in Object&&Object.isFrozen(w)))if(typeof j!="string"&&"length"in j){V(typeof P!="string"&&"length"in P);for(var z=0,W=j.length;z<W;++z)_e(w,j[z],P[z])}else{var $,ge,be=j.indexOf(".");be!==-1?($=j.substr(0,be),(be=j.substr(be+1))===""?P===void 0?d(w)&&!isNaN(parseInt($))?w.splice($,1):delete w[$]:w[$]=P:_e(ge=(ge=w[$])&&_(w,$)?ge:w[$]={},be,P)):P===void 0?d(w)&&!isNaN(parseInt(j))?w.splice(j,1):delete w[j]:w[j]=P}}function fe(w){var j,P={};for(j in w)_(w,j)&&(P[j]=w[j]);return P}var G=[].concat;function me(w){return G.apply([],w)}var H="BigUint64Array,BigInt64Array,Array,Boolean,String,Date,RegExp,Blob,File,FileList,FileSystemFileHandle,FileSystemDirectoryHandle,ArrayBuffer,DataView,Uint8ClampedArray,ImageBitmap,ImageData,Map,Set,CryptoKey".split(",").concat(me([8,16,32,64].map(function(w){return["Int","Uint","Float"].map(function(j){return j+w+"Array"})}))).filter(function(w){return a[w]}),Z=new Set(H.map(function(w){return a[w]})),J=null;function Se(w){return J=new WeakMap,w=(function j(P){if(!P||typeof P!="object")return P;var z=J.get(P);if(z)return z;if(d(P)){z=[],J.set(P,z);for(var W=0,$=P.length;W<$;++W)z.push(j(P[W]))}else if(Z.has(P.constructor))z=P;else{var ge,be=g(P);for(ge in z=be===Object.prototype?{}:Object.create(be),J.set(P,z),P)_(P,ge)&&(z[ge]=j(P[ge]))}return z})(w),J=null,w}var Ee={}.toString;function Ye(w){return Ee.call(w).slice(8,-1)}var oe=typeof Symbol<"u"?Symbol.iterator:"@@iterator",ae=typeof oe=="symbol"?function(w){var j;return w!=null&&(j=w[oe])&&j.apply(w)}:function(){return null};function he(w,j){j=w.indexOf(j),0<=j&&w.splice(j,1)}var De={};function ze(w){var j,P,z,W;if(arguments.length===1){if(d(w))return w.slice();if(this===De&&typeof w=="string")return[w];if(W=ae(w))for(P=[];!(z=W.next()).done;)P.push(z.value);else{if(w==null)return[w];if(typeof(j=w.length)!="number")return[w];for(P=new Array(j);j--;)P[j]=w[j]}}else for(j=arguments.length,P=new Array(j);j--;)P[j]=arguments[j];return P}var ne=typeof Symbol<"u"?function(w){return w[Symbol.toStringTag]==="AsyncFunction"}:function(){return!1},H=["Unknown","Constraint","Data","TransactionInactive","ReadOnly","Version","NotFound","InvalidState","InvalidAccess","Abort","Timeout","QuotaExceeded","Syntax","DataClone"],$t=["Modify","Bulk","OpenFailed","VersionChange","Schema","Upgrade","InvalidTable","MissingAPI","NoSuchDatabase","InvalidArgument","SubTransaction","Unsupported","Internal","DatabaseClosed","PrematureCommit","ForeignAwait"].concat(H),te={VersionChanged:"Database version changed by other database connection",DatabaseClosed:"Database has been closed",Abort:"Transaction aborted",TransactionInactive:"Transaction has already completed or failed",MissingAPI:"IndexedDB API missing. Please visit https://tinyurl.com/y2uuvskb"};function ce(w,j){this.name=w,this.message=j}function Q(w,j){return w+". Errors: "+Object.keys(j).map(function(P){return j[P].toString()}).filter(function(P,z,W){return W.indexOf(P)===z}).join(`
`)}function xe(w,j,P,z){this.failures=j,this.failedKeys=z,this.successCount=P,this.message=Q(w,j)}function Te(w,j){this.name="BulkError",this.failures=Object.keys(j).map(function(P){return j[P]}),this.failuresByPos=j,this.message=Q(w,this.failures)}M(ce).from(Error).extend({toString:function(){return this.name+": "+this.message}}),M(xe).from(ce),M(Te).from(ce);var Le=$t.reduce(function(w,j){return w[j]=j+"Error",w},{}),Ge=ce,Re=$t.reduce(function(w,j){var P=j+"Error";function z(W,$){this.name=P,W?typeof W=="string"?(this.message="".concat(W).concat($?`
 `+$:""),this.inner=$||null):typeof W=="object"&&(this.message="".concat(W.name," ").concat(W.message),this.inner=W):(this.message=te[j]||P,this.inner=null)}return M(z).from(Ge),w[j]=z,w},{}),gt=(Re.Syntax=SyntaxError,Re.Type=TypeError,Re.Range=RangeError,H.reduce(function(w,j){return w[j+"Error"]=Re[j],w},{}));H=$t.reduce(function(w,j){return["Syntax","Type","Range"].indexOf(j)===-1&&(w[j+"Error"]=Re[j]),w},{});function mt(){}function Ot(w){return w}function Kt(w,j){return w==null||w===Ot?j:function(P){return j(w(P))}}function ye(w,j){return function(){w.apply(this,arguments),j.apply(this,arguments)}}function Pt(w,j){return w===mt?j:function(){var P=w.apply(this,arguments),z=(P!==void 0&&(arguments[0]=P),this.onsuccess),W=this.onerror,$=(this.onsuccess=null,this.onerror=null,j.apply(this,arguments));return z&&(this.onsuccess=this.onsuccess?ye(z,this.onsuccess):z),W&&(this.onerror=this.onerror?ye(W,this.onerror):W),$!==void 0?$:P}}function Dn(w,j){return w===mt?j:function(){w.apply(this,arguments);var P=this.onsuccess,z=this.onerror;this.onsuccess=this.onerror=null,j.apply(this,arguments),P&&(this.onsuccess=this.onsuccess?ye(P,this.onsuccess):P),z&&(this.onerror=this.onerror?ye(z,this.onerror):z)}}function dn(w,j){return w===mt?j:function(W){var z=w.apply(this,arguments),W=(p(W,z),this.onsuccess),$=this.onerror,ge=(this.onsuccess=null,this.onerror=null,j.apply(this,arguments));return W&&(this.onsuccess=this.onsuccess?ye(W,this.onsuccess):W),$&&(this.onerror=this.onerror?ye($,this.onerror):$),z===void 0?ge===void 0?void 0:ge:p(z,ge)}}function At(w,j){return w===mt?j:function(){return j.apply(this,arguments)!==!1&&w.apply(this,arguments)}}function sn(w,j){return w===mt?j:function(){var P=w.apply(this,arguments);if(P&&typeof P.then=="function"){for(var z=this,W=arguments.length,$=new Array(W);W--;)$[W]=arguments[W];return P.then(function(){return j.apply(z,$)})}return j.apply(this,arguments)}}H.ModifyError=xe,H.DexieError=ce,H.BulkError=Te;var kt=typeof location<"u"&&/^(http|https):\/\/(localhost|127\.0\.0\.1)/.test(location.href);function Yt(w){kt=w}var Vt={},xn=100,kn=typeof Promise>"u"?[]:($t=Promise.resolve(),typeof crypto<"u"&&crypto.subtle?[kn=crypto.subtle.digest("SHA-512",new Uint8Array([0])),g(kn),$t]:[$t,g($t),$t]),$t=kn[0],wa=kn[1],wa=wa&&wa.then,Cn=$t&&$t.constructor,In=!!kn[2],Jt=function(w,j){tn.push([w,j]),en&&(queueMicrotask(zo),en=!1)},En=!0,en=!0,Ni=[],Hn=[],hn=Ot,gn={id:"global",global:!0,ref:0,unhandleds:[],onunhandled:mt,pgp:!1,env:{},finalize:mt},Nt=gn,tn=[],ui=0,vn=[];function vt(w){if(typeof this!="object")throw new TypeError("Promises must be constructed via new");this._listeners=[],this._lib=!1;var j=this._PSD=Nt;if(typeof w!="function"){if(w!==Vt)throw new TypeError("Not a function");this._state=arguments[1],this._value=arguments[2],this._state===!1&&ln(this,this._value)}else this._state=null,this._value=null,++j.ref,(function P(z,W){try{W(function($){if(z._state===null){if($===z)throw new TypeError("A promise cannot be resolved with itself.");var ge=z._lib&&Wr();$&&typeof $.then=="function"?P(z,function(be,He){$ instanceof vt?$._then(be,He):$.then(be,He)}):(z._state=!0,z._value=$,ri(z)),ge&&nn()}},ln.bind(null,z))}catch($){ln(z,$)}})(this,w)}var yi={get:function(){var w=Nt,j=fo;function P(z,W){var $=this,ge=!w.global&&(w!==Nt||j!==fo),be=ge&&!Zi(),He=new vt(function(Ze,Be){Ya($,new Pn(Jo(z,w,ge,be),Jo(W,w,ge,be),Ze,Be,w))});return this._consoleTask&&(He._consoleTask=this._consoleTask),He}return P.prototype=Vt,P},set:function(w){R(this,"then",w&&w.prototype===Vt?yi:{get:function(){return w},set:yi.set})}};function Pn(w,j,P,z,W){this.onFulfilled=typeof w=="function"?w:null,this.onRejected=typeof j=="function"?j:null,this.resolve=P,this.reject=z,this.psd=W}function ln(w,j){var P,z;Hn.push(j),w._state===null&&(P=w._lib&&Wr(),j=hn(j),w._state=!1,w._value=j,z=w,Ni.some(function(W){return W._value===z._value})||Ni.push(z),ri(w),P)&&nn()}function ri(w){var j=w._listeners;w._listeners=[];for(var P=0,z=j.length;P<z;++P)Ya(w,j[P]);var W=w._PSD;--W.ref||W.finalize(),ui===0&&(++ui,Jt(function(){--ui==0&&Ao()},[]))}function Ya(w,j){if(w._state===null)w._listeners.push(j);else{var P=w._state?j.onFulfilled:j.onRejected;if(P===null)return(w._state?j.resolve:j.reject)(w._value);++j.psd.ref,++ui,Jt(ia,[P,w,j])}}function ia(w,j,P){try{var z,W=j._value;!j._state&&Hn.length&&(Hn=[]),z=kt&&j._consoleTask?j._consoleTask.run(function(){return w(W)}):w(W),j._state||Hn.indexOf(W)!==-1||($=>{for(var ge=Ni.length;ge;)if(Ni[--ge]._value===$._value)return Ni.splice(ge,1)})(j),P.resolve(z)}catch($){P.reject($)}finally{--ui==0&&Ao(),--P.psd.ref||P.psd.finalize()}}function zo(){Gr(gn,function(){Wr()&&nn()})}function Wr(){var w=En;return en=En=!1,w}function nn(){var w,j,P;do for(;0<tn.length;)for(w=tn,tn=[],P=w.length,j=0;j<P;++j){var z=w[j];z[0].apply(null,z[1])}while(0<tn.length);en=En=!0}function Ao(){for(var w=Ni,j=(Ni=[],w.forEach(function(z){z._PSD.onunhandled.call(null,z._value,z)}),vn.slice(0)),P=j.length;P;)j[--P]()}function Za(w){return new vt(Vt,!1,w)}function ei(w,j){var P=Nt;return function(){var z=Wr(),W=Nt;try{return Oa(P,!0),w.apply(this,arguments)}catch($){j&&j($)}finally{Oa(W,!1),z&&nn()}}}A(vt.prototype,{then:yi,_then:function(w,j){Ya(this,new Pn(null,null,w,j,Nt))},catch:function(w){var j,P;return arguments.length===1?this.then(null,w):(j=w,P=arguments[1],typeof j=="function"?this.then(null,function(z){return(z instanceof j?P:Za)(z)}):this.then(null,function(z){return(z&&z.name===j?P:Za)(z)}))},finally:function(w){return this.then(function(j){return vt.resolve(w()).then(function(){return j})},function(j){return vt.resolve(w()).then(function(){return Za(j)})})},timeout:function(w,j){var P=this;return w<1/0?new vt(function(z,W){var $=setTimeout(function(){return W(new Re.Timeout(j))},w);P.then(z,W).finally(clearTimeout.bind(null,$))}):this}}),typeof Symbol<"u"&&Symbol.toStringTag&&R(vt.prototype,Symbol.toStringTag,"Dexie.Promise"),gn.env=ho(),A(vt,{all:function(){var w=ze.apply(null,arguments).map(pr);return new vt(function(j,P){w.length===0&&j([]);var z=w.length;w.forEach(function(W,$){return vt.resolve(W).then(function(ge){w[$]=ge,--z||j(w)},P)})})},resolve:function(w){return w instanceof vt?w:w&&typeof w.then=="function"?new vt(function(j,P){w.then(j,P)}):new vt(Vt,!0,w)},reject:Za,race:function(){var w=ze.apply(null,arguments).map(pr);return new vt(function(j,P){w.map(function(z){return vt.resolve(z).then(j,P)})})},PSD:{get:function(){return Nt},set:function(w){return Nt=w}},totalEchoes:{get:function(){return fo}},newPSD:ti,usePSD:Gr,scheduler:{get:function(){return Jt},set:function(w){Jt=w}},rejectionMapper:{get:function(){return hn},set:function(w){hn=w}},follow:function(w,j){return new vt(function(P,z){return ti(function(W,$){var ge=Nt;ge.unhandleds=[],ge.onunhandled=$,ge.finalize=ye(function(){var be,He=this;be=function(){He.unhandleds.length===0?W():$(He.unhandleds[0])},vn.push(function Ze(){be(),vn.splice(vn.indexOf(Ze),1)}),++ui,Jt(function(){--ui==0&&Ao()},[])},ge.finalize),w()},j,P,z)})}}),Cn&&(Cn.allSettled&&R(vt,"allSettled",function(){var w=ze.apply(null,arguments).map(pr);return new vt(function(j){w.length===0&&j([]);var P=w.length,z=new Array(P);w.forEach(function(W,$){return vt.resolve(W).then(function(ge){return z[$]={status:"fulfilled",value:ge}},function(ge){return z[$]={status:"rejected",reason:ge}}).then(function(){return--P||j(z)})})})}),Cn.any&&typeof AggregateError<"u"&&R(vt,"any",function(){var w=ze.apply(null,arguments).map(pr);return new vt(function(j,P){w.length===0&&P(new AggregateError([]));var z=w.length,W=new Array(z);w.forEach(function($,ge){return vt.resolve($).then(function(be){return j(be)},function(be){W[ge]=be,--z||P(new AggregateError(W))})})})}),Cn.withResolvers)&&(vt.withResolvers=Cn.withResolvers);var xi={awaits:0,echoes:0,id:0},si=0,Ut=[],nr=0,fo=0,ra=0;function ti(w,ge,P,z){var W=Nt,$=Object.create(W),ge=($.parent=W,$.ref=0,$.global=!1,$.id=++ra,gn.env,$.env=In?{Promise:vt,PromiseProp:{value:vt,configurable:!0,writable:!0},all:vt.all,race:vt.race,allSettled:vt.allSettled,any:vt.any,resolve:vt.resolve,reject:vt.reject}:{},ge&&p($,ge),++W.ref,$.finalize=function(){--this.parent.ref||this.parent.finalize()},Gr($,w,P,z));return $.ref===0&&$.finalize(),ge}function bi(){return xi.id||(xi.id=++si),++xi.awaits,xi.echoes+=xn,xi.id}function Zi(){return!!xi.awaits&&(--xi.awaits==0&&(xi.id=0),xi.echoes=xi.awaits*xn,!0)}function pr(w){return xi.echoes&&w&&w.constructor===Cn?(bi(),w.then(function(j){return Zi(),j},function(j){return Zi(),hi(j)})):w}function Ka(){var w=Ut[Ut.length-1];Ut.pop(),Oa(w,!1)}function Oa(w,j){var P,z,W=Nt;(j?!xi.echoes||nr++&&w===Nt:!nr||--nr&&w===Nt)||queueMicrotask(j?(function($){++fo,xi.echoes&&--xi.echoes!=0||(xi.echoes=xi.awaits=xi.id=0),Ut.push(Nt),Oa($,!0)}).bind(null,w):Ka),w!==Nt&&(Nt=w,W===gn&&(gn.env=ho()),In)&&(P=gn.env.Promise,z=w.env,W.global||w.global)&&(Object.defineProperty(a,"Promise",z.PromiseProp),P.all=z.all,P.race=z.race,P.resolve=z.resolve,P.reject=z.reject,z.allSettled&&(P.allSettled=z.allSettled),z.any)&&(P.any=z.any)}function ho(){var w=a.Promise;return In?{Promise:w,PromiseProp:Object.getOwnPropertyDescriptor(a,"Promise"),all:w.all,race:w.race,allSettled:w.allSettled,any:w.any,resolve:w.resolve,reject:w.reject}:{}}function Gr(w,j,P,z,W){var $=Nt;try{return Oa(w,!0),j(P,z,W)}finally{Oa($,!1)}}function Jo(w,j,P,z){return typeof w!="function"?w:function(){var W=Nt;P&&bi(),Oa(j,!0);try{return w.apply(this,arguments)}finally{Oa(W,!1),z&&queueMicrotask(Zi)}}}function Pa(w){Promise===Cn&&xi.echoes===0?nr===0?w():enqueueNativeMicroTask(w):setTimeout(w,0)}(""+wa).indexOf("[native code]")===-1&&(bi=Zi=mt);var hi=vt.reject,aa="",Or="Invalid key provided. Keys must be of type string, number, Date or Array<string | number | Date>.",ir="String expected.",Bo=[],oa="__dbnames",Xa="readonly",Qa="readwrite";function va(w,j){return w?j?function(){return w.apply(this,arguments)&&j.apply(this,arguments)}:w:j}var Ns={type:3,lower:-1/0,lowerOpen:!1,upper:[[]],upperOpen:!1};function es(w){return typeof w!="string"||/\./.test(w)?function(j){return j}:function(j){return j[w]===void 0&&w in j&&delete(j=Se(j))[w],j}}function ts(){throw Re.Type("Entity instances must never be new:ed. Instances are generated by the framework bypassing the constructor.")}function Ht(w,j){try{var P=di(w),z=di(j);if(P!==z)return P==="Array"?1:z==="Array"?-1:P==="binary"?1:z==="binary"?-1:P==="string"?1:z==="string"?-1:P==="Date"?1:z!=="Date"?NaN:-1;switch(P){case"number":case"Date":case"string":return j<w?1:w<j?-1:0;case"binary":for(var W=ya(w),$=ya(j),ge=W.length,be=$.length,He=ge<be?ge:be,Ze=0;Ze<He;++Ze)if(W[Ze]!==$[Ze])return W[Ze]<$[Ze]?-1:1;return ge===be?0:ge<be?-1:1;case"Array":for(var Be=w,je=j,Ne=Be.length,Pe=je.length,Me=Ne<Pe?Ne:Pe,Ue=0;Ue<Me;++Ue){var Xe=Ht(Be[Ue],je[Ue]);if(Xe!==0)return Xe}return Ne===Pe?0:Ne<Pe?-1:1}}catch{}return NaN}function di(w){var j=typeof w;return j=="object"&&(ArrayBuffer.isView(w)||(j=Ye(w))==="ArrayBuffer")?"binary":j}function ya(w){return w instanceof Uint8Array?w:ArrayBuffer.isView(w)?new Uint8Array(w.buffer,w.byteOffset,w.byteLength):new Uint8Array(w)}function Gn(w,j,P){var z=w.schema.yProps;return z?(j&&0<P.numFailures&&(j=j.filter(function(W,$){return!P.failures[$]})),Promise.all(z.map(function(W){return W=W.updatesTable,j?w.db.table(W).where("k").anyOf(j).delete():w.db.table(W).clear()})).then(function(){return P})):P}$a.prototype.execute=function(w){var j=this["@@propmod"];if(j.add!==void 0){var P=j.add;if(d(P))return r(r([],d(w)?w:[],!0),P).sort();if(typeof P=="number")return(Number(w)||0)+P;if(typeof P=="bigint")try{return BigInt(w)+P}catch{return BigInt(0)+P}throw new TypeError("Invalid term ".concat(P))}if(j.remove!==void 0){var z=j.remove;if(d(z))return d(w)?w.filter(function(W){return!z.includes(W)}).sort():[];if(typeof z=="number")return Number(w)-z;if(typeof z=="bigint")try{return BigInt(w)-z}catch{return BigInt(0)-z}throw new TypeError("Invalid subtrahend ".concat(z))}return P=(P=j.replacePrefix)==null?void 0:P[0],P&&typeof w=="string"&&w.startsWith(P)?j.replacePrefix[1]+w.substring(P.length):w};var Ia=$a;function $a(w){this["@@propmod"]=w}function Sn(w,j){for(var P=l(j),z=P.length,W=!1,$=0;$<z;++$){var ge=P[$],be=j[ge],He=ue(w,ge);be instanceof Ia?(_e(w,ge,be.execute(He)),W=!0):He!==be&&(_e(w,ge,be),W=!0)}return W}zn.prototype._trans=function(w,j,P){var z=this._tx||Nt.trans,W=this.name,$=kt&&typeof console<"u"&&console.createTask&&console.createTask("Dexie: ".concat(w==="readonly"?"read":"write"," ").concat(this.name));function ge(Ze,Be,je){if(je.schema[W])return j(je.idbtrans,je);throw new Re.NotFound("Table "+W+" not part of transaction")}var be=Wr();try{var He=z&&z.db._novip===this.db._novip?z===Nt.trans?z._promise(w,ge,P):ti(function(){return z._promise(w,ge,P)},{trans:z,transless:Nt.transless||Nt}):(function Ze(Be,je,Ne,Pe){if(Be.idbdb&&(Be._state.openComplete||Nt.letThrough||Be._vip)){var Me=Be._createTransaction(je,Ne,Be._dbSchema);try{Me.create(),Be._state.PR1398_maxLoop=3}catch(Ue){return Ue.name===Le.InvalidState&&Be.isOpen()&&0<--Be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Be.close({disableAutoOpen:!1}),Be.open().then(function(){return Ze(Be,je,Ne,Pe)})):hi(Ue)}return Me._promise(je,function(Ue,Xe){return ti(function(){return Nt.trans=Me,Pe(Ue,Xe,Me)})}).then(function(Ue){if(je==="readwrite")try{Me.idbtrans.commit()}catch{}return je==="readonly"?Ue:Me._completion.then(function(){return Ue})})}if(Be._state.openComplete)return hi(new Re.DatabaseClosed(Be._state.dbOpenError));if(!Be._state.isBeingOpened){if(!Be._state.autoOpen)return hi(new Re.DatabaseClosed);Be.open().catch(mt)}return Be._state.dbReadyPromise.then(function(){return Ze(Be,je,Ne,Pe)})})(this.db,w,[this.name],ge);return $&&(He._consoleTask=$,He=He.catch(function(Ze){return console.trace(Ze),hi(Ze)})),He}finally{be&&nn()}},zn.prototype.get=function(w,j){var P=this;return w&&w.constructor===Object?this.where(w).first(j):w==null?hi(new Re.Type("Invalid argument to Table.get()")):this._trans("readonly",function(z){return P.core.get({trans:z,key:w}).then(function(W){return P.hook.reading.fire(W)})}).then(j)},zn.prototype.where=function(w){if(typeof w=="string")return new this.db.WhereClause(this,w);if(d(w))return new this.db.WhereClause(this,"[".concat(w.join("+"),"]"));var j=l(w);if(j.length===1)return this.where(j[0]).equals(w[j[0]]);var P=this.schema.indexes.concat(this.schema.primKey).filter(function(be){if(be.compound&&j.every(function(Ze){return 0<=be.keyPath.indexOf(Ze)})){for(var He=0;He<j.length;++He)if(j.indexOf(be.keyPath[He])===-1)return!1;return!0}return!1}).sort(function(be,He){return be.keyPath.length-He.keyPath.length})[0];if(P&&this.db._maxKey!==aa)return ge=P.keyPath.slice(0,j.length),this.where(ge).equals(ge.map(function(be){return w[be]}));!P&&kt&&console.warn("The query ".concat(JSON.stringify(w)," on ").concat(this.name," would benefit from a ")+"compound index [".concat(j.join("+"),"]"));var z=this.schema.idxByName;function W(be,He){return Ht(be,He)===0}var ge=j.reduce(function(Be,He){var Ze=Be[0],Be=Be[1],je=z[He],Ne=w[He];return[Ze||je,Ze||!je?va(Be,je&&je.multi?function(Pe){return Pe=ue(Pe,He),d(Pe)&&Pe.some(function(Me){return W(Ne,Me)})}:function(Pe){return W(Ne,ue(Pe,He))}):Be]},[null,null]),$=ge[0],ge=ge[1];return $?this.where($.name).equals(w[$.keyPath]).filter(ge):P?this.filter(ge):this.where(j).equals("")},zn.prototype.filter=function(w){return this.toCollection().and(w)},zn.prototype.count=function(w){return this.toCollection().count(w)},zn.prototype.offset=function(w){return this.toCollection().offset(w)},zn.prototype.limit=function(w){return this.toCollection().limit(w)},zn.prototype.each=function(w){return this.toCollection().each(w)},zn.prototype.toArray=function(w){return this.toCollection().toArray(w)},zn.prototype.toCollection=function(){return new this.db.Collection(new this.db.WhereClause(this))},zn.prototype.orderBy=function(w){return new this.db.Collection(new this.db.WhereClause(this,d(w)?"[".concat(w.join("+"),"]"):w))},zn.prototype.reverse=function(){return this.toCollection().reverse()},zn.prototype.mapToClass=function(w){for(var j=this.db,P=this.name,z=((this.schema.mappedClass=w).prototype instanceof ts&&(w=(ge=>{var be=Be,He=ge;if(typeof He!="function"&&He!==null)throw new TypeError("Class extends value "+String(He)+" is not a constructor or null");function Ze(){this.constructor=be}function Be(){return ge!==null&&ge.apply(this,arguments)||this}return n(be,He),be.prototype=He===null?Object.create(He):(Ze.prototype=He.prototype,new Ze),Object.defineProperty(Be.prototype,"db",{get:function(){return j},enumerable:!1,configurable:!0}),Be.prototype.table=function(){return P},Be})(w)),new Set),W=w.prototype;W;W=g(W))Object.getOwnPropertyNames(W).forEach(function(ge){return z.add(ge)});function $(ge){if(!ge)return ge;var be,He=Object.create(w.prototype);for(be in ge)if(!z.has(be))try{He[be]=ge[be]}catch{}return He}return this.schema.readHook&&this.hook.reading.unsubscribe(this.schema.readHook),this.schema.readHook=$,this.hook("reading",$),w},zn.prototype.defineClass=function(){return this.mapToClass(function(w){p(this,w)})},zn.prototype.add=function(w,j){var P=this,z=this.schema.primKey,W=z.auto,$=z.keyPath,ge=w;return $&&W&&(ge=es($)(w)),this._trans("readwrite",function(be){return P.core.mutate({trans:be,type:"add",keys:j!=null?[j]:null,values:[ge]})}).then(function(be){return be.numFailures?vt.reject(be.failures[0]):be.lastResult}).then(function(be){if($)try{_e(w,$,be)}catch{}return be})},zn.prototype.upsert=function(w,j){var P=this,z=this.schema.primKey.keyPath;return this._trans("readwrite",function(W){return P.core.get({trans:W,key:w}).then(function($){var ge=$??{};return Sn(ge,j),z&&_e(ge,z,w),P.core.mutate({trans:W,type:"put",values:[ge],keys:[w],upsert:!0,updates:{keys:[w],changeSpecs:[j]}}).then(function(be){return be.numFailures?vt.reject(be.failures[0]):!!$})})})},zn.prototype.update=function(w,j){return typeof w!="object"||d(w)?this.where(":id").equals(w).modify(j):(w=ue(w,this.schema.primKey.keyPath))===void 0?hi(new Re.InvalidArgument("Given object does not contain its primary key")):this.where(":id").equals(w).modify(j)},zn.prototype.put=function(w,j){var P=this,z=this.schema.primKey,W=z.auto,$=z.keyPath,ge=w;return $&&W&&(ge=es($)(w)),this._trans("readwrite",function(be){return P.core.mutate({trans:be,type:"put",values:[ge],keys:j!=null?[j]:null})}).then(function(be){return be.numFailures?vt.reject(be.failures[0]):be.lastResult}).then(function(be){if($)try{_e(w,$,be)}catch{}return be})},zn.prototype.delete=function(w){var j=this;return this._trans("readwrite",function(P){return j.core.mutate({trans:P,type:"delete",keys:[w]}).then(function(z){return Gn(j,[w],z)}).then(function(z){return z.numFailures?vt.reject(z.failures[0]):void 0})})},zn.prototype.clear=function(){var w=this;return this._trans("readwrite",function(j){return w.core.mutate({trans:j,type:"deleteRange",range:Ns}).then(function(P){return Gn(w,null,P)})}).then(function(j){return j.numFailures?vt.reject(j.failures[0]):void 0})},zn.prototype.bulkGet=function(w){var j=this;return this._trans("readonly",function(P){return j.core.getMany({keys:w,trans:P}).then(function(z){return z.map(function(W){return j.hook.reading.fire(W)})})})},zn.prototype.bulkAdd=function(w,j,P){var z=this,W=Array.isArray(j)?j:void 0,$=(P=P||(W?void 0:j))?P.allKeys:void 0;return this._trans("readwrite",function(ge){var be=z.schema.primKey,Ze=be.auto,be=be.keyPath;if(be&&W)throw new Re.InvalidArgument("bulkAdd(): keys argument invalid on tables with inbound keys");if(W&&W.length!==w.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var He=w.length,Ze=be&&Ze?w.map(es(be)):w;return z.core.mutate({trans:ge,type:"add",keys:W,values:Ze,wantResults:$}).then(function(Be){var je=Be.numFailures,Ne=Be.failures;if(je===0)return $?Be.results:Be.lastResult;throw new Te("".concat(z.name,".bulkAdd(): ").concat(je," of ").concat(He," operations failed"),Ne)})})},zn.prototype.bulkPut=function(w,j,P){var z=this,W=Array.isArray(j)?j:void 0,$=(P=P||(W?void 0:j))?P.allKeys:void 0;return this._trans("readwrite",function(ge){var be=z.schema.primKey,Ze=be.auto,be=be.keyPath;if(be&&W)throw new Re.InvalidArgument("bulkPut(): keys argument invalid on tables with inbound keys");if(W&&W.length!==w.length)throw new Re.InvalidArgument("Arguments objects and keys must have the same length");var He=w.length,Ze=be&&Ze?w.map(es(be)):w;return z.core.mutate({trans:ge,type:"put",keys:W,values:Ze,wantResults:$}).then(function(Be){var je=Be.numFailures,Ne=Be.failures;if(je===0)return $?Be.results:Be.lastResult;throw new Te("".concat(z.name,".bulkPut(): ").concat(je," of ").concat(He," operations failed"),Ne)})})},zn.prototype.bulkUpdate=function(w){var j=this,P=this.core,z=w.map(function(ge){return ge.key}),W=w.map(function(ge){return ge.changes}),$=[];return this._trans("readwrite",function(ge){return P.getMany({trans:ge,keys:z,cache:"clone"}).then(function(be){var He=[],Ze=[],Be=(w.forEach(function(je,Ne){var Pe=je.key,Me=je.changes,Ue=be[Ne];if(Ue){for(var Xe=0,nt=Object.keys(Me);Xe<nt.length;Xe++){var Qe=nt[Xe],ft=Me[Qe];if(Qe===j.schema.primKey.keyPath){if(Ht(ft,Pe)!==0)throw new Re.Constraint("Cannot update primary key in bulkUpdate()")}else _e(Ue,Qe,ft)}$.push(Ne),He.push(Pe),Ze.push(Ue)}}),He.length);return P.mutate({trans:ge,type:"put",keys:He,values:Ze,updates:{keys:z,changeSpecs:W}}).then(function(je){var Ne=je.numFailures,Pe=je.failures;if(Ne===0)return Be;for(var Me=0,Ue=Object.keys(Pe);Me<Ue.length;Me++){var Xe,nt=Ue[Me],Qe=$[Number(nt)];Qe!=null&&(Xe=Pe[nt],delete Pe[nt],Pe[Qe]=Xe)}throw new Te("".concat(j.name,".bulkUpdate(): ").concat(Ne," of ").concat(Be," operations failed"),Pe)})})})},zn.prototype.bulkDelete=function(w){var j=this,P=w.length;return this._trans("readwrite",function(z){return j.core.mutate({trans:z,type:"delete",keys:w}).then(function(W){return Gn(j,w,W)})}).then(function(z){var W=z.numFailures,$=z.failures;if(W===0)return z.lastResult;throw new Te("".concat(j.name,".bulkDelete(): ").concat(W," of ").concat(P," operations failed"),$)})};var Ii=zn;function zn(){}function zi(w){function j(ge,be){if(be){for(var He=arguments.length,Ze=new Array(He-1);--He;)Ze[He-1]=arguments[He];return P[ge].subscribe.apply(null,Ze),w}if(typeof ge=="string")return P[ge]}var P={};j.addEventType=$;for(var z=1,W=arguments.length;z<W;++z)$(arguments[z]);return j;function $(ge,be,He){var Ze,Be;if(typeof ge!="object")return be=be||At,Be={subscribers:[],fire:He=He||mt,subscribe:function(je){Be.subscribers.indexOf(je)===-1&&(Be.subscribers.push(je),Be.fire=be(Be.fire,je))},unsubscribe:function(je){Be.subscribers=Be.subscribers.filter(function(Ne){return Ne!==je}),Be.fire=Be.subscribers.reduce(be,He)}},P[ge]=j[ge]=Be;l(Ze=ge).forEach(function(je){var Ne=Ze[je];if(d(Ne))$(je,Ze[je][0],Ze[je][1]);else{if(Ne!=="asap")throw new Re.InvalidArgument("Invalid event config");var Pe=$(je,Ot,function(){for(var Me=arguments.length,Ue=new Array(Me);Me--;)Ue[Me]=arguments[Me];Pe.subscribers.forEach(function(Xe){ee(function(){Xe.apply(null,Ue)})})})}})}}function ni(w,j){return M(j).from({prototype:w}),j}function Lo(w,j){return!(w.filter||w.algorithm||w.or)&&(j?w.justLimit:!w.replayFilter)}function ns(w,j){w.filter=va(w.filter,j)}function Ja(w,j,P){var z=w.replayFilter;w.replayFilter=z?function(){return va(z(),j())}:j,w.justLimit=P&&!z}function Xn(w,j){if(w.isPrimKey)return j.primaryKey;var P=j.getIndexByKeyPath(w.index);if(P)return P;throw new Re.Schema("KeyPath "+w.index+" on object store "+j.name+" is not indexed")}function po(w,j,P){var z=Xn(w,j.schema);return j.openCursor({trans:P,values:!w.keysOnly,reverse:w.dir==="prev",unique:!!w.unique,query:{index:z,range:w.range}})}function go(w,j,P,z){var W,$,ge=w.replayFilter?va(w.filter,w.replayFilter()):w.filter;return w.or?(W={},$=function(be,He,Ze){var Be,je;ge&&!ge(He,Ze,function(Ne){return He.stop(Ne)},function(Ne){return He.fail(Ne)})||((je=""+(Be=He.primaryKey))=="[object ArrayBuffer]"&&(je=""+new Uint8Array(Be)),_(W,je))||(W[je]=!0,j(be,He,Ze))},Promise.all([w.or._iterate($,P),sa(po(w,z,P),w.algorithm,$,!w.keysOnly&&w.valueMapper)])):sa(po(w,z,P),va(w.algorithm,ge),j,!w.keysOnly&&w.valueMapper)}function sa(w,j,P,z){var W=ei(z?function($,ge,be){return P(z($),ge,be)}:P);return w.then(function($){if($)return $.start(function(){var ge=function(){return $.continue()};j&&!j($,function(be){return ge=be},function(be){$.stop(be),ge=mt},function(be){$.fail(be),ge=mt})||W($.value,$,function(be){return ge=be}),ge()})})}Vn.prototype._read=function(w,j){var P=this._ctx;return P.error?P.table._trans(null,hi.bind(null,P.error)):P.table._trans("readonly",w).then(j)},Vn.prototype._write=function(w){var j=this._ctx;return j.error?j.table._trans(null,hi.bind(null,j.error)):j.table._trans("readwrite",w,"locked")},Vn.prototype._addAlgorithm=function(w){var j=this._ctx;j.algorithm=va(j.algorithm,w)},Vn.prototype._iterate=function(w,j){return go(this._ctx,w,j,this._ctx.table.core)},Vn.prototype.clone=function(w){var j=Object.create(this.constructor.prototype),P=Object.create(this._ctx);return w&&p(P,w),j._ctx=P,j},Vn.prototype.raw=function(){return this._ctx.valueMapper=null,this},Vn.prototype.each=function(w){var j=this._ctx;return this._read(function(P){return go(j,w,P,j.table.core)})},Vn.prototype.count=function(w){var j=this;return this._read(function(P){var z,W=j._ctx,$=W.table.core;return Lo(W,!0)?$.count({trans:P,query:{index:Xn(W,$.schema),range:W.range}}).then(function(ge){return Math.min(ge,W.limit)}):(z=0,go(W,function(){return++z,!1},P,$).then(function(){return z}))}).then(w)},Vn.prototype.sortBy=function(w,j){var P=w.split(".").reverse(),z=P[0],W=P.length-1;function $(He,Ze){return Ze?$(He[P[Ze]],Ze-1):He[z]}var ge=this._ctx.dir==="next"?1:-1;function be(He,Ze){return Ht($(He,W),$(Ze,W))*ge}return this.toArray(function(He){return He.sort(be)}).then(j)},Vn.prototype.toArray=function(w){var j=this;return this._read(function(P){var z,W,$,ge=j._ctx;return ge.dir==="next"&&Lo(ge,!0)&&0<ge.limit?(z=ge.valueMapper,W=Xn(ge,ge.table.core.schema),ge.table.core.query({trans:P,limit:ge.limit,values:!0,query:{index:W,range:ge.range}}).then(function(be){return be=be.result,z?be.map(z):be})):($=[],go(ge,function(be){return $.push(be)},P,ge.table.core).then(function(){return $}))},w)},Vn.prototype.offset=function(w){var j=this._ctx;return w<=0||(j.offset+=w,Lo(j)?Ja(j,function(){var P=w;return function(z,W){return P===0||(P===1?--P:W(function(){z.advance(P),P=0}),!1)}}):Ja(j,function(){var P=w;return function(){return--P<0}})),this},Vn.prototype.limit=function(w){return this._ctx.limit=Math.min(this._ctx.limit,w),Ja(this._ctx,function(){var j=w;return function(P,z,W){return--j<=0&&z(W),0<=j}},!0),this},Vn.prototype.until=function(w,j){return ns(this._ctx,function(P,z,W){return!w(P.value)||(z(W),j)}),this},Vn.prototype.first=function(w){return this.limit(1).toArray(function(j){return j[0]}).then(w)},Vn.prototype.last=function(w){return this.reverse().first(w)},Vn.prototype.filter=function(w){var j;return ns(this._ctx,function(P){return w(P.value)}),(j=this._ctx).isMatch=va(j.isMatch,w),this},Vn.prototype.and=function(w){return this.filter(w)},Vn.prototype.or=function(w){return new this.db.WhereClause(this._ctx.table,w,this)},Vn.prototype.reverse=function(){return this._ctx.dir=this._ctx.dir==="prev"?"next":"prev",this._ondirectionchange&&this._ondirectionchange(this._ctx.dir),this},Vn.prototype.desc=function(){return this.reverse()},Vn.prototype.eachKey=function(w){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(P,z){w(z.key,z)})},Vn.prototype.eachUniqueKey=function(w){return this._ctx.unique="unique",this.eachKey(w)},Vn.prototype.eachPrimaryKey=function(w){var j=this._ctx;return j.keysOnly=!j.isMatch,this.each(function(P,z){w(z.primaryKey,z)})},Vn.prototype.keys=function(w){var j=this._ctx,P=(j.keysOnly=!j.isMatch,[]);return this.each(function(z,W){P.push(W.key)}).then(function(){return P}).then(w)},Vn.prototype.primaryKeys=function(w){var j=this._ctx;if(j.dir==="next"&&Lo(j,!0)&&0<j.limit)return this._read(function(z){var W=Xn(j,j.table.core.schema);return j.table.core.query({trans:z,values:!1,limit:j.limit,query:{index:W,range:j.range}})}).then(function(z){return z.result}).then(w);j.keysOnly=!j.isMatch;var P=[];return this.each(function(z,W){P.push(W.primaryKey)}).then(function(){return P}).then(w)},Vn.prototype.uniqueKeys=function(w){return this._ctx.unique="unique",this.keys(w)},Vn.prototype.firstKey=function(w){return this.limit(1).keys(function(j){return j[0]}).then(w)},Vn.prototype.lastKey=function(w){return this.reverse().firstKey(w)},Vn.prototype.distinct=function(){var w,j=this._ctx,j=j.index&&j.table.schema.idxByName[j.index];return j&&j.multi&&(w={},ns(this._ctx,function(z){var z=z.primaryKey.toString(),W=_(w,z);return w[z]=!0,!W})),this},Vn.prototype.modify=function(w){var j=this,P=this._ctx;return this._write(function(z){function W(Ue,Xe){var nt=Xe.failures;Ne+=Ue-Xe.numFailures;for(var Qe=0,ft=l(nt);Qe<ft.length;Qe++){var Tt=ft[Qe];je.push(nt[Tt])}}var $=typeof w=="function"?w:function(Ue){return Sn(Ue,w)},ge=P.table.core,Be=ge.schema.primaryKey,be=Be.outbound,He=Be.extractKey,Ze=200,Be=j.db._options.modifyChunkSize,je=(Be&&(Ze=typeof Be=="object"?Be[ge.name]||Be["*"]||200:Be),[]),Ne=0,Pe=[],Me=w===Ds;return j.clone().primaryKeys().then(function(Ue){function Xe(Qe){var ft=Math.min(Ze,Ue.length-Qe),Tt=Ue.slice(Qe,Qe+ft);return(Me?Promise.resolve([]):ge.getMany({trans:z,keys:Tt,cache:"immutable"})).then(function(Dt){var It=[],Lt=[],Gt=be?[]:null,Mt=Me?Tt:[];if(!Me)for(var jt=0;jt<ft;++jt){var Wt=Dt[jt],An={value:Se(Wt),primKey:Ue[Qe+jt]};$.call(An,An.value,An)!==!1&&(An.value==null?Mt.push(Ue[Qe+jt]):be||Ht(He(Wt),He(An.value))===0?(Lt.push(An.value),be&&Gt.push(Ue[Qe+jt])):(Mt.push(Ue[Qe+jt]),It.push(An.value)))}return Promise.resolve(0<It.length&&ge.mutate({trans:z,type:"add",values:It}).then(function(Ln){for(var fn in Ln.failures)Mt.splice(parseInt(fn),1);W(It.length,Ln)})).then(function(){return(0<Lt.length||nt&&typeof w=="object")&&ge.mutate({trans:z,type:"put",keys:Gt,values:Lt,criteria:nt,changeSpec:typeof w!="function"&&w,isAdditionalChunk:0<Qe}).then(function(Ln){return W(Lt.length,Ln)})}).then(function(){return(0<Mt.length||nt&&Me)&&ge.mutate({trans:z,type:"delete",keys:Mt,criteria:nt,isAdditionalChunk:0<Qe}).then(function(Ln){return Gn(P.table,Mt,Ln)}).then(function(Ln){return W(Mt.length,Ln)})}).then(function(){return Ue.length>Qe+ft&&Xe(Qe+Ze)})})}var nt=Lo(P)&&P.limit===1/0&&(typeof w!="function"||Me)&&{index:P.index,range:P.range};return Xe(0).then(function(){if(0<je.length)throw new xe("Error modifying one or more objects",je,Ne,Pe);return Ue.length})})})},Vn.prototype.delete=function(){var w=this._ctx,j=w.range;return!Lo(w)||w.table.schema.yProps||!w.isPrimKey&&j.type!==3?this.modify(Ds):this._write(function(P){var z=w.table.core.schema.primaryKey,W=j;return w.table.core.count({trans:P,query:{index:z,range:W}}).then(function($){return w.table.core.mutate({trans:P,type:"deleteRange",range:W}).then(function(He){var be=He.failures,He=He.numFailures;if(He)throw new xe("Could not delete some values",Object.keys(be).map(function(Ze){return be[Ze]}),$-He);return $-He})})})};var is=Vn;function Vn(){}var Ds=function(w,j){return j.value=null};function Ms(w,j){return w<j?-1:w===j?0:1}function fs(w,j){return j<w?-1:w===j?0:1}function Pr(w,j,P){return w=w instanceof rs?new w.Collection(w):w,w._ctx.error=new(P||TypeError)(j),w}function gr(w){return new w.Collection(w,function(){return Fo("")}).limit(0)}function Vr(Pe,j,P,z){var W,$,ge,be,He,Ze,Be,je=P.length;if(!P.every(function(Ue){return typeof Ue=="string"}))return Pr(Pe,ir);function Ne(Ue){W=Ue==="next"?function(nt){return nt.toUpperCase()}:function(nt){return nt.toLowerCase()},$=Ue==="next"?function(nt){return nt.toLowerCase()}:function(nt){return nt.toUpperCase()},ge=Ue==="next"?Ms:fs;var Xe=P.map(function(nt){return{lower:$(nt),upper:W(nt)}}).sort(function(nt,Qe){return ge(nt.lower,Qe.lower)});be=Xe.map(function(nt){return nt.upper}),He=Xe.map(function(nt){return nt.lower}),Be=(Ze=Ue)==="next"?"":z}Ne("next");var Pe=new Pe.Collection(Pe,function(){return Yr(be[0],He[je-1]+z)}),Me=(Pe._ondirectionchange=function(Ue){Ne(Ue)},0);return Pe._addAlgorithm(function(Ue,Xe,nt){var Qe=Ue.key;if(typeof Qe=="string"){var ft=$(Qe);if(j(ft,He,Me))return!0;for(var Tt=null,Dt=Me;Dt<je;++Dt){var It=((Lt,Gt,Mt,jt,Wt,An)=>{for(var Ln=Math.min(Lt.length,jt.length),fn=-1,On=0;On<Ln;++On){var gi=Gt[On];if(gi!==jt[On])return Wt(Lt[On],Mt[On])<0?Lt.substr(0,On)+Mt[On]+Mt.substr(On+1):Wt(Lt[On],jt[On])<0?Lt.substr(0,On)+jt[On]+Mt.substr(On+1):0<=fn?Lt.substr(0,fn)+Gt[fn]+Mt.substr(fn+1):null;Wt(Lt[On],gi)<0&&(fn=On)}return Ln<jt.length&&An==="next"?Lt+Mt.substr(Lt.length):Ln<Lt.length&&An==="prev"?Lt.substr(0,Mt.length):fn<0?null:Lt.substr(0,fn)+jt[fn]+Mt.substr(fn+1)})(Qe,ft,be[Dt],He[Dt],ge,Ze);It===null&&Tt===null?Me=Dt+1:(Tt===null||0<ge(Tt,It))&&(Tt=It)}Xe(Tt!==null?function(){Ue.continue(Tt+Be)}:nt)}return!1}),Pe}function Yr(w,j,P,z){return{type:2,lower:w,upper:j,lowerOpen:P,upperOpen:z}}function Fo(w){return{type:1,lower:w,upper:w}}Object.defineProperty(Ct.prototype,"Collection",{get:function(){return this._ctx.table.db.Collection},enumerable:!1,configurable:!0}),Ct.prototype.between=function(w,j,P,z){P=P!==!1,z=z===!0;try{return 0<this._cmp(w,j)||this._cmp(w,j)===0&&(P||z)&&(!P||!z)?gr(this):new this.Collection(this,function(){return Yr(w,j,!P,!z)})}catch{return Pr(this,Or)}},Ct.prototype.equals=function(w){return w==null?Pr(this,Or):new this.Collection(this,function(){return Fo(w)})},Ct.prototype.above=function(w){return w==null?Pr(this,Or):new this.Collection(this,function(){return Yr(w,void 0,!0)})},Ct.prototype.aboveOrEqual=function(w){return w==null?Pr(this,Or):new this.Collection(this,function(){return Yr(w,void 0,!1)})},Ct.prototype.below=function(w){return w==null?Pr(this,Or):new this.Collection(this,function(){return Yr(void 0,w,!1,!0)})},Ct.prototype.belowOrEqual=function(w){return w==null?Pr(this,Or):new this.Collection(this,function(){return Yr(void 0,w)})},Ct.prototype.startsWith=function(w){return typeof w!="string"?Pr(this,ir):this.between(w,w+aa,!0,!0)},Ct.prototype.startsWithIgnoreCase=function(w){return w===""?this.startsWith(w):Vr(this,function(j,P){return j.indexOf(P[0])===0},[w],aa)},Ct.prototype.equalsIgnoreCase=function(w){return Vr(this,function(j,P){return j===P[0]},[w],"")},Ct.prototype.anyOfIgnoreCase=function(){var w=ze.apply(De,arguments);return w.length===0?gr(this):Vr(this,function(j,P){return P.indexOf(j)!==-1},w,"")},Ct.prototype.startsWithAnyOfIgnoreCase=function(){var w=ze.apply(De,arguments);return w.length===0?gr(this):Vr(this,function(j,P){return P.some(function(z){return j.indexOf(z)===0})},w,aa)},Ct.prototype.anyOf=function(){var w,j,P=this,z=ze.apply(De,arguments),W=this._cmp;try{z.sort(W)}catch{return Pr(this,Or)}return z.length===0?gr(this):((w=new this.Collection(this,function(){return Yr(z[0],z[z.length-1])}))._ondirectionchange=function($){W=$==="next"?P._ascending:P._descending,z.sort(W)},j=0,w._addAlgorithm(function($,ge,be){for(var He=$.key;0<W(He,z[j]);)if(++j===z.length)return ge(be),!1;return W(He,z[j])===0||(ge(function(){$.continue(z[j])}),!1)}),w)},Ct.prototype.notEqual=function(w){return this.inAnyRange([[-1/0,w],[w,this.db._maxKey]],{includeLowers:!1,includeUppers:!1})},Ct.prototype.noneOf=function(){var w=ze.apply(De,arguments);if(w.length===0)return new this.Collection(this);try{w.sort(this._ascending)}catch{return Pr(this,Or)}var j=w.reduce(function(P,z){return P?P.concat([[P[P.length-1][1],z]]):[[-1/0,z]]},null);return j.push([w[w.length-1],this.db._maxKey]),this.inAnyRange(j,{includeLowers:!1,includeUppers:!1})},Ct.prototype.inAnyRange=function(w,nt){var P=this,z=this._cmp,W=this._ascending,$=this._descending,ge=this._min,be=this._max;if(w.length===0)return gr(this);if(!w.every(function(Qe){return Qe[0]!==void 0&&Qe[1]!==void 0&&W(Qe[0],Qe[1])<=0}))return Pr(this,"First argument to inAnyRange() must be an Array of two-value Arrays [lower,upper] where upper must not be lower than lower",Re.InvalidArgument);var He=!nt||nt.includeLowers!==!1,Ze=nt&&nt.includeUppers===!0,Be,je=W;function Ne(Qe,ft){return je(Qe[0],ft[0])}try{(Be=w.reduce(function(Qe,ft){for(var Tt=0,Dt=Qe.length;Tt<Dt;++Tt){var It=Qe[Tt];if(z(ft[0],It[1])<0&&0<z(ft[1],It[0])){It[0]=ge(It[0],ft[0]),It[1]=be(It[1],ft[1]);break}}return Tt===Dt&&Qe.push(ft),Qe},[])).sort(Ne)}catch{return Pr(this,Or)}var Pe=0,Me=Ze?function(Qe){return 0<W(Qe,Be[Pe][1])}:function(Qe){return 0<=W(Qe,Be[Pe][1])},Ue=He?function(Qe){return 0<$(Qe,Be[Pe][0])}:function(Qe){return 0<=$(Qe,Be[Pe][0])},Xe=Me,nt=new this.Collection(this,function(){return Yr(Be[0][0],Be[Be.length-1][1],!He,!Ze)});return nt._ondirectionchange=function(Qe){je=Qe==="next"?(Xe=Me,W):(Xe=Ue,$),Be.sort(Ne)},nt._addAlgorithm(function(Qe,ft,Tt){for(var Dt,It=Qe.key;Xe(It);)if(++Pe===Be.length)return ft(Tt),!1;return!Me(Dt=It)&&!Ue(Dt)||(P._cmp(It,Be[Pe][1])===0||P._cmp(It,Be[Pe][0])===0||ft(function(){je===W?Qe.continue(Be[Pe][0]):Qe.continue(Be[Pe][1])}),!1)}),nt},Ct.prototype.startsWithAnyOf=function(){var w=ze.apply(De,arguments);return w.every(function(j){return typeof j=="string"})?w.length===0?gr(this):this.inAnyRange(w.map(function(j){return[j,j+aa]})):Pr(this,"startsWithAnyOf() only works with strings")};var rs=Ct;function Ct(){}function rr(w){return ei(function(j){return ai(j),w(j.target.error),!1})}function ai(w){w.stopPropagation&&w.stopPropagation(),w.preventDefault&&w.preventDefault()}var as="storagemutated",Zr="x-storagemutated-1",Bi=zi(null,as),Os=(ar.prototype._lock=function(){return V(!Nt.global),++this._reculock,this._reculock!==1||Nt.global||(Nt.lockOwnerFor=this),this},ar.prototype._unlock=function(){if(V(!Nt.global),--this._reculock==0)for(Nt.global||(Nt.lockOwnerFor=null);0<this._blockedFuncs.length&&!this._locked();){var w=this._blockedFuncs.shift();try{Gr(w[1],w[0])}catch{}}return this},ar.prototype._locked=function(){return this._reculock&&Nt.lockOwnerFor!==this},ar.prototype.create=function(w){var j=this;if(this.mode){var P=this.db.idbdb,z=this.db._state.dbOpenError;if(V(!this.idbtrans),!w&&!P)switch(z&&z.name){case"DatabaseClosedError":throw new Re.DatabaseClosed(z);case"MissingAPIError":throw new Re.MissingAPI(z.message,z);default:throw new Re.OpenFailed(z)}if(!this.active)throw new Re.TransactionInactive;V(this._completion._state===null),(w=this.idbtrans=w||(this.db.core||P).transaction(this.storeNames,this.mode,{durability:this.chromeTransactionDurability})).onerror=ei(function(W){ai(W),j._reject(w.error)}),w.onabort=ei(function(W){ai(W),j.active&&j._reject(new Re.Abort(w.error)),j.active=!1,j.on("abort").fire(W)}),w.oncomplete=ei(function(){j.active=!1,j._resolve(),"mutatedParts"in w&&Bi.storagemutated.fire(w.mutatedParts)})}return this},ar.prototype._promise=function(w,j,P){var z,W=this;return w==="readwrite"&&this.mode!=="readwrite"?hi(new Re.ReadOnly("Transaction is readonly")):this.active?this._locked()?new vt(function($,ge){W._blockedFuncs.push([function(){W._promise(w,j,P).then($,ge)},Nt])}):P?ti(function(){var $=new vt(function(ge,be){W._lock();var He=j(ge,be,W);He&&He.then&&He.then(ge,be)});return $.finally(function(){return W._unlock()}),$._lib=!0,$}):((z=new vt(function($,ge){var be=j($,ge,W);be&&be.then&&be.then($,ge)}))._lib=!0,z):hi(new Re.TransactionInactive)},ar.prototype._root=function(){return this.parent?this.parent._root():this},ar.prototype.waitFor=function(w){var j,P=this._root(),z=vt.resolve(w),W=(P._waitingFor?P._waitingFor=P._waitingFor.then(function(){return z}):(P._waitingFor=z,P._waitingQueue=[],j=P.idbtrans.objectStore(P.storeNames[0]),(function $(){for(++P._spinCount;P._waitingQueue.length;)P._waitingQueue.shift()();P._waitingFor&&(j.get(-1/0).onsuccess=$)})()),P._waitingFor);return new vt(function($,ge){z.then(function(be){return P._waitingQueue.push(ei($.bind(null,be)))},function(be){return P._waitingQueue.push(ei(ge.bind(null,be)))}).finally(function(){P._waitingFor===W&&(P._waitingFor=null)})})},ar.prototype.abort=function(){this.active&&(this.active=!1,this.idbtrans&&this.idbtrans.abort(),this._reject(new Re.Abort))},ar.prototype.table=function(w){var j=this._memoizedTables||(this._memoizedTables={});if(_(j,w))return j[w];var P=this.schema[w];if(P)return(P=new this.db.Table(w,P,this)).core=this.db.core.table(w),j[w]=P;throw new Re.NotFound("Table "+w+" not part of transaction")},ar);function ar(){}function Kr(w,j,P,z,W,$,ge,be){return{name:w,keyPath:j,unique:P,multi:z,auto:W,compound:$,src:(P&&!ge?"&":"")+(z?"*":"")+(W?"++":"")+mo(j),type:be}}function mo(w){return typeof w=="string"?w:w?"["+[].join.call(w,"+")+"]":""}function Ai(w,j,P){return{name:w,primKey:j,indexes:P,mappedClass:null,idxByName:(z=function(W){return[W.name,W]},P.reduce(function(W,$,ge){return $=z($,ge),$&&(W[$[0]]=$[1]),W},{}))};var z}var za=function(w){try{return w.only([[]]),za=function(){return[[]]},[[]]}catch{return za=function(){return aa},aa}};function xa(w){return w==null?function(){}:typeof w=="string"?(j=w).split(".").length===1?function(P){return P[j]}:function(P){return ue(P,j)}:function(P){return ue(P,w)};var j}function hs(w){return[].slice.call(w)}var Qs=0;function Qi(w){return w==null?":id":typeof w=="string"?w:"[".concat(w.join("+"),"]")}function vo(w,j,He){function z(Me){if(Me.type===3)return null;if(Me.type===4)throw new Error("Cannot convert never type to IDBKeyRange");var je=Me.lower,Ne=Me.upper,Pe=Me.lowerOpen,Me=Me.upperOpen;return je===void 0?Ne===void 0?null:j.upperBound(Ne,!!Me):Ne===void 0?j.lowerBound(je,!!Pe):j.bound(je,Ne,!!Pe,!!Me)}function W(Be){var je,Ne=Be.name;return{name:Ne,schema:Be,mutate:function(Pe){var Me=Pe.trans,Ue=Pe.type,Xe=Pe.keys,nt=Pe.values,Qe=Pe.range;return new Promise(function(ft,Tt){ft=ei(ft);var Dt=Me.objectStore(Ne),It=Dt.keyPath==null,Lt=Ue==="put"||Ue==="add";if(!Lt&&Ue!=="delete"&&Ue!=="deleteRange")throw new Error("Invalid operation type: "+Ue);var Gt,Mt=(Xe||nt||{length:1}).length;if(Xe&&nt&&Xe.length!==nt.length)throw new Error("Given keys array must have same length as given values array.");if(Mt===0)return ft({numFailures:0,failures:{},results:[],lastResult:void 0});function jt(li){++Ln,ai(li)}var Wt=[],An=[],Ln=0;if(Ue==="deleteRange"){if(Qe.type===4)return ft({numFailures:Ln,failures:An,results:[],lastResult:void 0});Qe.type===3?Wt.push(Gt=Dt.clear()):Wt.push(Gt=Dt.delete(z(Qe)))}else{var It=Lt?It?[nt,Xe]:[nt,null]:[Xe,null],fn=It[0],On=It[1];if(Lt)for(var gi=0;gi<Mt;++gi)Wt.push(Gt=On&&On[gi]!==void 0?Dt[Ue](fn[gi],On[gi]):Dt[Ue](fn[gi])),Gt.onerror=jt;else for(gi=0;gi<Mt;++gi)Wt.push(Gt=Dt[Ue](fn[gi])),Gt.onerror=jt}function Ea(li){li=li.target.result,Wt.forEach(function(Aa,Lr){return Aa.error!=null&&(An[Lr]=Aa.error)}),ft({numFailures:Ln,failures:An,results:Ue==="delete"?Xe:Wt.map(function(Aa){return Aa.result}),lastResult:li})}Gt.onerror=function(li){jt(li),Ea(li)},Gt.onsuccess=Ea})},getMany:function(Pe){var Me=Pe.trans,Ue=Pe.keys;return new Promise(function(Xe,nt){Xe=ei(Xe);for(var Qe,ft=Me.objectStore(Ne),Tt=Ue.length,Dt=new Array(Tt),It=0,Lt=0,Gt=function(Wt){Wt=Wt.target,Dt[Wt._pos]=Wt.result,++Lt===It&&Xe(Dt)},Mt=rr(nt),jt=0;jt<Tt;++jt)Ue[jt]!=null&&((Qe=ft.get(Ue[jt]))._pos=jt,Qe.onsuccess=Gt,Qe.onerror=Mt,++It);It===0&&Xe(Dt)})},get:function(Pe){var Me=Pe.trans,Ue=Pe.key;return new Promise(function(Xe,nt){Xe=ei(Xe);var Qe=Me.objectStore(Ne).get(Ue);Qe.onsuccess=function(ft){return Xe(ft.target.result)},Qe.onerror=rr(nt)})},query:(je=be,function(Pe){return new Promise(function(Me,Ue){Me=ei(Me);var Xe,nt,Qe,Lt=Pe.trans,ft=Pe.values,Tt=Pe.limit,It=Pe.query,Dt=Tt===1/0?void 0:Tt,Gt=It.index,It=It.range,Lt=Lt.objectStore(Ne),Lt=Gt.isPrimaryKey?Lt:Lt.index(Gt.name),Gt=z(It);if(Tt===0)return Me({result:[]});je?((It=ft?Lt.getAll(Gt,Dt):Lt.getAllKeys(Gt,Dt)).onsuccess=function(Mt){return Me({result:Mt.target.result})},It.onerror=rr(Ue)):(Xe=0,nt=!ft&&"openKeyCursor"in Lt?Lt.openKeyCursor(Gt):Lt.openCursor(Gt),Qe=[],nt.onsuccess=function(Mt){var jt=nt.result;return!jt||(Qe.push(ft?jt.value:jt.primaryKey),++Xe===Tt)?Me({result:Qe}):void jt.continue()},nt.onerror=rr(Ue))})}),openCursor:function(Pe){var Me=Pe.trans,Ue=Pe.values,Xe=Pe.query,nt=Pe.reverse,Qe=Pe.unique;return new Promise(function(ft,Tt){ft=ei(ft);var Lt=Xe.index,Dt=Xe.range,It=Me.objectStore(Ne),It=Lt.isPrimaryKey?It:It.index(Lt.name),Lt=nt?Qe?"prevunique":"prev":Qe?"nextunique":"next",Gt=!Ue&&"openKeyCursor"in It?It.openKeyCursor(z(Dt),Lt):It.openCursor(z(Dt),Lt);Gt.onerror=rr(Tt),Gt.onsuccess=ei(function(Mt){var jt,Wt,An,Ln,fn=Gt.result;fn?(fn.___id=++Qs,fn.done=!1,jt=fn.continue.bind(fn),Wt=(Wt=fn.continuePrimaryKey)&&Wt.bind(fn),An=fn.advance.bind(fn),Ln=function(){throw new Error("Cursor not stopped")},fn.trans=Me,fn.stop=fn.continue=fn.continuePrimaryKey=fn.advance=function(){throw new Error("Cursor not started")},fn.fail=ei(Tt),fn.next=function(){var On=this,gi=1;return this.start(function(){return gi--?On.continue():On.stop()}).then(function(){return On})},fn.start=function(On){function gi(){if(Gt.result)try{On()}catch(li){fn.fail(li)}else fn.done=!0,fn.start=function(){throw new Error("Cursor behind last entry")},fn.stop()}var Ea=new Promise(function(li,Aa){li=ei(li),Gt.onerror=rr(Aa),fn.fail=Aa,fn.stop=function(Lr){fn.stop=fn.continue=fn.continuePrimaryKey=fn.advance=Ln,li(Lr)}});return Gt.onsuccess=ei(function(li){Gt.onsuccess=gi,gi()}),fn.continue=jt,fn.continuePrimaryKey=Wt,fn.advance=An,gi(),Ea},ft(fn)):ft(null)},Tt)})},count:function(Pe){var Me=Pe.query,Ue=Pe.trans,Xe=Me.index,nt=Me.range;return new Promise(function(Qe,ft){var Tt=Ue.objectStore(Ne),Tt=Xe.isPrimaryKey?Tt:Tt.index(Xe.name),Dt=z(nt),Dt=Dt?Tt.count(Dt):Tt.count();Dt.onsuccess=ei(function(It){return Qe(It.target.result)}),Dt.onerror=rr(ft)})}}}$=He,ge=hs((He=w).objectStoreNames);var $,He={schema:{name:He.name,tables:ge.map(function(Be){return $.objectStore(Be)}).map(function(Be){var je=Be.keyPath,Ne=Be.autoIncrement,Me=d(je),Pe={},Me={name:Be.name,primaryKey:{name:null,isPrimaryKey:!0,outbound:je==null,compound:Me,keyPath:je,autoIncrement:Ne,unique:!0,extractKey:xa(je)},indexes:hs(Be.indexNames).map(function(Ue){return Be.index(Ue)}).map(function(Qe){var ft=Qe.name,Xe=Qe.unique,nt=Qe.multiEntry,Qe=Qe.keyPath,ft={name:ft,compound:d(Qe),keyPath:Qe,unique:Xe,multiEntry:nt,extractKey:xa(Qe)};return Pe[Qi(Qe)]=ft}),getIndexByKeyPath:function(Ue){return Pe[Qi(Ue)]}};return Pe[":id"]=Me.primaryKey,je!=null&&(Pe[Qi(je)]=Me.primaryKey),Me})},hasGetAll:0<ge.length&&"getAll"in $.objectStore(ge[0])&&!(typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604)},ge=He.schema,be=He.hasGetAll,He=ge.tables.map(W),Ze={};return He.forEach(function(Be){return Ze[Be.name]=Be}),{stack:"dbcore",transaction:w.transaction.bind(w),table:function(Be){if(Ze[Be])return Ze[Be];throw new Error("Table '".concat(Be,"' not found"))},MIN_KEY:-1/0,MAX_KEY:za(j),schema:ge}}function yo(w,j,P,z){return P=P.IDBKeyRange,j=vo(j,P,z),{dbcore:w.dbcore.reduce(function(W,$){return $=$.create,i(i({},W),$(W))},j)}}function eo(w,j){var P=j.db,P=yo(w._middlewares,P,w._deps,j);w.core=P.dbcore,w.tables.forEach(function(z){var W=z.name;w.core.schema.tables.some(function($){return $.name===W})&&(z.core=w.core.table(W),w[W]instanceof w.Table)&&(w[W].core=z.core)})}function Bn(w,j,P,z){P.forEach(function(W){var $=z[W];j.forEach(function(ge){var be=(function He(Ze,Be){return k(Ze,Be)||(Ze=g(Ze))&&He(Ze,Be)})(ge,W);(!be||"value"in be&&be.value===void 0)&&(ge===w.Transaction.prototype||ge instanceof w.Transaction?R(ge,W,{get:function(){return this.table(W)},set:function(He){x(this,W,{value:He,writable:!0,configurable:!0,enumerable:!0})}}):ge[W]=new w.Table(W,$))})})}function os(w,j){j.forEach(function(P){for(var z in P)P[z]instanceof w.Table&&delete P[z]})}function Ar(w,j){return w._cfg.version-j._cfg.version}function to(w,j,P,z){var W=w._dbSchema,$=(P.objectStoreNames.contains("$meta")&&!W.$meta&&(W.$meta=Ai("$meta",D("")[0],[]),w._storeNames.push("$meta")),w._createTransaction("readwrite",w._storeNames,W)),ge=($.create(P),$._completion.catch(z),$._reject.bind($)),be=Nt.transless||Nt;ti(function(){if(Nt.trans=$,Nt.transless=be,j!==0)return eo(w,P),Ze=j,((He=$).storeNames.includes("$meta")?He.table("$meta").get("version").then(function(Be){return Be??Ze}):vt.resolve(Ze)).then(function(Xe){var je=w,Ne=Xe,Pe=$,Me=P,Ue=[],Xe=je._versions,nt=je._dbSchema=xo(0,je.idbdb,Me);return(Xe=Xe.filter(function(Qe){return Qe._cfg.version>=Ne})).length===0?vt.resolve():(Xe.forEach(function(Qe){Ue.push(function(){var ft,Tt,Dt,It=nt,Lt=Qe._cfg.dbschema,Gt=(Is(je,It,Me),Is(je,Lt,Me),nt=je._dbSchema=Lt,Ps(It,Lt)),Mt=(Gt.add.forEach(function(jt){no(Me,jt[0],jt[1].primKey,jt[1].indexes)}),Gt.change.forEach(function(jt){if(jt.recreate)throw new Re.Upgrade("Not yet support for changing primary key");var Wt=Me.objectStore(jt.name);jt.add.forEach(function(An){return gs(Wt,An)}),jt.change.forEach(function(An){Wt.deleteIndex(An.name),gs(Wt,An)}),jt.del.forEach(function(An){return Wt.deleteIndex(An)})}),Qe._cfg.contentUpgrade);if(Mt&&Qe._cfg.version>Ne)return eo(je,Me),Pe._memoizedTables={},ft=fe(Lt),Gt.del.forEach(function(jt){ft[jt]=It[jt]}),os(je,[je.Transaction.prototype]),Bn(je,[je.Transaction.prototype],l(ft),ft),Pe.schema=ft,(Tt=ne(Mt))&&bi(),Lt=vt.follow(function(){var jt;(Dt=Mt(Pe))&&Tt&&(jt=Zi.bind(null,null),Dt.then(jt,jt))}),Dt&&typeof Dt.then=="function"?vt.resolve(Dt):Lt.then(function(){return Dt})}),Ue.push(function(ft){var Tt,Dt,It=Qe._cfg.dbschema;Tt=It,Dt=ft,[].slice.call(Dt.db.objectStoreNames).forEach(function(Lt){return Tt[Lt]==null&&Dt.db.deleteObjectStore(Lt)}),os(je,[je.Transaction.prototype]),Bn(je,[je.Transaction.prototype],je._storeNames,je._dbSchema),Pe.schema=je._dbSchema}),Ue.push(function(ft){je.idbdb.objectStoreNames.contains("$meta")&&(Math.ceil(je.idbdb.version/10)===Qe._cfg.version?(je.idbdb.deleteObjectStore("$meta"),delete je._dbSchema.$meta,je._storeNames=je._storeNames.filter(function(Tt){return Tt!=="$meta"})):ft.objectStore("$meta").put(Qe._cfg.version,"version"))})}),(function Qe(){return Ue.length?vt.resolve(Ue.shift()(Pe.idbtrans)).then(Qe):vt.resolve()})().then(function(){Uo(nt,Me)}))}).catch(ge);var He,Ze;l(W).forEach(function(Be){no(P,Be,W[Be].primKey,W[Be].indexes)}),eo(w,P),vt.follow(function(){return w.on.populate.fire($)}).catch(ge)})}function ps(w,j){Uo(w._dbSchema,j),j.db.version%10!=0||j.objectStoreNames.contains("$meta")||j.db.createObjectStore("$meta").add(Math.ceil(j.db.version/10-1),"version");var P=xo(0,w.idbdb,j);Is(w,w._dbSchema,j);for(var z=0,W=Ps(P,w._dbSchema).change;z<W.length;z++){var $=(ge=>{if(ge.change.length||ge.recreate)return console.warn("Unable to patch indexes of table ".concat(ge.name," because it has changes on the type of index or primary key.")),{value:void 0};var be=j.objectStore(ge.name);ge.add.forEach(function(He){kt&&console.debug("Dexie upgrade patch: Creating missing index ".concat(ge.name,".").concat(He.src)),gs(be,He)})})(W[z]);if(typeof $=="object")return $.value}}function Ps(w,j){var P,z={del:[],add:[],change:[]};for(P in w)j[P]||z.del.push(P);for(P in j){var W=w[P],$=j[P];if(W){var ge={name:P,def:$,recreate:!1,del:[],add:[],change:[]};if(""+(W.primKey.keyPath||"")!=""+($.primKey.keyPath||"")||W.primKey.auto!==$.primKey.auto)ge.recreate=!0,z.change.push(ge);else{var be=W.idxByName,He=$.idxByName,Ze=void 0;for(Ze in be)He[Ze]||ge.del.push(Ze);for(Ze in He){var Be=be[Ze],je=He[Ze];Be?Be.src!==je.src&&ge.change.push(je):ge.add.push(je)}(0<ge.del.length||0<ge.add.length||0<ge.change.length)&&z.change.push(ge)}}else z.add.push([P,$])}return z}function no(w,j,P,z){var W=w.db.createObjectStore(j,P.keyPath?{keyPath:P.keyPath,autoIncrement:P.auto}:{autoIncrement:P.auto});z.forEach(function($){return gs(W,$)})}function Uo(w,j){l(w).forEach(function(P){j.db.objectStoreNames.contains(P)||(kt&&console.debug("Dexie: Creating missing table",P),no(j,P,w[P].primKey,w[P].indexes))})}function gs(w,j){w.createIndex(j.name,j.keyPath,{unique:j.unique,multiEntry:j.multi})}function xo(w,j,P){var z={};return Y(j.objectStoreNames,0).forEach(function(W){for(var $=P.objectStore(W),ge=Kr(mo(Ze=$.keyPath),Ze||"",!0,!1,!!$.autoIncrement,Ze&&typeof Ze!="string",!0),be=[],He=0;He<$.indexNames.length;++He){var Be=$.index($.indexNames[He]),Ze=Be.keyPath,Be=Kr(Be.name,Ze,!!Be.unique,!!Be.multiEntry,!1,Ze&&typeof Ze!="string",!1);be.push(Be)}z[W]=Ai(W,ge,be)}),z}function Is(w,j,P){for(var z=P.db.objectStoreNames,W=0;W<z.length;++W){var $=z[W],ge=P.objectStore($);w._hasGetAll="getAll"in ge;for(var be=0;be<ge.indexNames.length;++be){var He,Ze=ge.indexNames[be],Be=ge.index(Ze).keyPath,Be=typeof Be=="string"?Be:"["+Y(Be).join("+")+"]";j[$]&&(He=j[$].idxByName[Be])&&(He.name=Ze,delete j[$].idxByName[Be],j[$].idxByName[Ze]=He)}}typeof navigator<"u"&&/Safari/.test(navigator.userAgent)&&!/(Chrome\/|Edge\/)/.test(navigator.userAgent)&&a.WorkerGlobalScope&&a instanceof a.WorkerGlobalScope&&[].concat(navigator.userAgent.match(/Safari\/(\d*)/))[1]<604&&(w._hasGetAll=!1)}function D(w){return w.split(",").map(function(j,P){var W=j.split(":"),z=(z=W[1])==null?void 0:z.trim(),W=(j=W[0].trim()).replace(/([&*]|\+\+)/g,""),$=/^\[/.test(W)?W.match(/^\[(.*)\]$/)[1].split("+"):W;return Kr(W,$||null,/\&/.test(j),/\*/.test(j),/\+\+/.test(j),d($),P===0,z)})}we.prototype._createTableSchema=Ai,we.prototype._parseIndexSyntax=D,we.prototype._parseStoresSpec=function(w,j){var P=this;l(w).forEach(function(z){if(w[z]!==null){var W=P._parseIndexSyntax(w[z]),$=W.shift();if(!$)throw new Re.Schema("Invalid schema for table "+z+": "+w[z]);if($.unique=!0,$.multi)throw new Re.Schema("Primary key cannot be multiEntry*");W.forEach(function(ge){if(ge.auto)throw new Re.Schema("Only primary key can be marked as autoIncrement (++)");if(!ge.keyPath)throw new Re.Schema("Index must have a name and cannot be an empty string")}),$=P._createTableSchema(z,$,W),j[z]=$}})},we.prototype.stores=function(P){var j=this.db,P=(this._cfg.storesSource=this._cfg.storesSource?p(this._cfg.storesSource,P):P,j._versions),z={},W={};return P.forEach(function($){p(z,$._cfg.storesSource),W=$._cfg.dbschema={},$._parseStoresSpec(z,W)}),j._dbSchema=W,os(j,[j._allTables,j,j.Transaction.prototype]),Bn(j,[j._allTables,j,j.Transaction.prototype,this._cfg.tables],l(W),W),j._storeNames=l(W),this},we.prototype.upgrade=function(w){return this._cfg.contentUpgrade=sn(this._cfg.contentUpgrade||mt,w),this};var K=we;function we(){}function Ie(w,j){var P=w._dbNamesDB;return P||(P=w._dbNamesDB=new lr(oa,{addons:[],indexedDB:w,IDBKeyRange:j})).version(1).stores({dbnames:"name"}),P.table("dbnames")}function Ke(w){return w&&typeof w.databases=="function"}function dt(w){return ti(function(){return Nt.letThrough=!0,w()})}function wt(w){return!("from"in w)}var Bt=function(w,j){var P;if(!this)return P=new Bt,w&&"d"in w&&p(P,w),P;p(this,arguments.length?{d:1,from:w,to:1<arguments.length?j:w}:{d:0})};function Zt(w,j,P){var z=Ht(j,P);if(!isNaN(z)){if(0<z)throw RangeError();if(wt(w))return p(w,{from:j,to:P,d:1});var z=w.l,W=w.r;if(Ht(P,w.from)<0)return z?Zt(z,j,P):w.l={from:j,to:P,d:1,l:null,r:null},Ki(w);if(0<Ht(j,w.to))return W?Zt(W,j,P):w.r={from:j,to:P,d:1,l:null,r:null},Ki(w);Ht(j,w.from)<0&&(w.from=j,w.l=null,w.d=W?W.d+1:1),0<Ht(P,w.to)&&(w.to=P,w.r=null,w.d=w.l?w.l.d+1:1),j=!w.r,z&&!w.l&&yn(w,z),W&&j&&yn(w,W)}}function yn(w,j){wt(j)||(function P(z,W){var $=W.from,ge=W.l,be=W.r;Zt(z,$,W.to),ge&&P(z,ge),be&&P(z,be)})(w,j)}function Mn(w,j){var P=Qn(j),z=P.next();if(!z.done)for(var W=z.value,$=Qn(w),ge=$.next(W.from),be=ge.value;!z.done&&!ge.done;){if(Ht(be.from,W.to)<=0&&0<=Ht(be.to,W.from))return!0;Ht(W.from,be.from)<0?W=(z=P.next(be.from)).value:be=(ge=$.next(W.from)).value}return!1}function Qn(w){var j=wt(w)?null:{s:0,n:w};return{next:function(P){for(var z=0<arguments.length;j;)switch(j.s){case 0:if(j.s=1,z)for(;j.n.l&&Ht(P,j.n.from)<0;)j={up:j,n:j.n.l,s:1};else for(;j.n.l;)j={up:j,n:j.n.l,s:1};case 1:if(j.s=2,!z||Ht(P,j.n.to)<=0)return{value:j.n,done:!1};case 2:if(j.n.r){j.s=3,j={up:j,n:j.n.r,s:0};continue}case 3:j=j.up}return{done:!0}}}}function Ki(w){var j,P,z,W=(((W=w.r)==null?void 0:W.d)||0)-(((W=w.l)==null?void 0:W.d)||0),W=1<W?"r":W<-1?"l":"";W&&(j=W=="r"?"l":"r",P=i({},w),z=w[W],w.from=z.from,w.to=z.to,w[W]=z[W],P[W]=z[j],(w[j]=P).d=or(P)),w.d=or(w)}function or(P){var j=P.r,P=P.l;return(j?P?Math.max(j.d,P.d):j.d:P?P.d:0)+1}function pi(w,j){return l(j).forEach(function(P){w[P]?yn(w[P],j[P]):w[P]=(function z(W){var $,ge,be={};for($ in W)_(W,$)&&(ge=W[$],be[$]=!ge||typeof ge!="object"||Z.has(ge.constructor)?ge:z(ge));return be})(j[P])}),w}function mr(w,j){return w.all||j.all||Object.keys(w).some(function(P){return j[P]&&Mn(j[P],w[P])})}A(Bt.prototype,(($t={add:function(w){return yn(this,w),this},addKey:function(w){return Zt(this,w,w),this},addKeys:function(w){var j=this;return w.forEach(function(P){return Zt(j,P,P)}),this},hasKey:function(w){var j=Qn(this).next(w).value;return j&&Ht(j.from,w)<=0&&0<=Ht(j.to,w)}})[oe]=function(){return Qn(this)},$t));var Di={},_r={},Ba=!1;function wr(w){pi(_r,w),Ba||(Ba=!0,setTimeout(function(){Ba=!1,To(_r,!(_r={}))},0))}function To(w,j){j===void 0&&(j=!1);var P=new Set;if(w.all)for(var z=0,W=Object.values(Di);z<W.length;z++)Ho(be=W[z],w,P,j);else for(var $ in w){var ge,be,$=/^idb\:\/\/(.*)\/(.*)\//.exec($);$&&(ge=$[1],$=$[2],be=Di["idb://".concat(ge,"/").concat($)])&&Ho(be,w,P,j)}P.forEach(function(He){return He()})}function Ho(w,j,P,z){for(var W=[],$=0,ge=Object.entries(w.queries.query);$<ge.length;$++){for(var be=ge[$],He=be[0],Ze=[],Be=0,je=be[1];Be<je.length;Be++){var Ne=je[Be];mr(j,Ne.obsSet)?Ne.subscribers.forEach(function(Xe){return P.add(Xe)}):z&&Ze.push(Ne)}z&&W.push([He,Ze])}if(z)for(var Pe=0,Me=W;Pe<Me.length;Pe++){var Ue=Me[Pe],He=Ue[0],Ze=Ue[1];w.queries.query[He]=Ze}}function Xr(w){var j=w._state,P=w._deps.indexedDB;if(j.isBeingOpened||w.idbdb)return j.dbReadyPromise.then(function(){return j.dbOpenError?hi(j.dbOpenError):w});j.isBeingOpened=!0,j.dbOpenError=null,j.openComplete=!1;var z=j.openCanceller,W=Math.round(10*w.verno),$=!1;function ge(){if(j.openCanceller!==z)throw new Re.DatabaseClosed("db.open() was cancelled")}function be(){return new vt(function(Ne,Pe){if(ge(),!P)throw new Re.MissingAPI;var Me=w.name,Ue=j.autoSchema||!W?P.open(Me):P.open(Me,W);if(!Ue)throw new Re.MissingAPI;Ue.onerror=rr(Pe),Ue.onblocked=ei(w._fireOnBlocked),Ue.onupgradeneeded=ei(function(Xe){var nt;Be=Ue.transaction,j.autoSchema&&!w._options.allowEmptyDB?(Ue.onerror=ai,Be.abort(),Ue.result.close(),(nt=P.deleteDatabase(Me)).onsuccess=nt.onerror=ei(function(){Pe(new Re.NoSuchDatabase("Database ".concat(Me," doesnt exist")))})):(Be.onerror=rr(Pe),nt=Xe.oldVersion>Math.pow(2,62)?0:Xe.oldVersion,je=nt<1,w.idbdb=Ue.result,$&&ps(w,Be),to(w,nt/10,Be,Pe))},Pe),Ue.onsuccess=ei(function(){Be=null;var Xe,nt,Qe,ft,Tt,Dt,It=w.idbdb=Ue.result,Lt=Y(It.objectStoreNames);if(0<Lt.length)try{var Gt=It.transaction((Tt=Lt).length===1?Tt[0]:Tt,"readonly");if(j.autoSchema)Dt=It,ft=Gt,(Qe=w).verno=Dt.version/10,ft=Qe._dbSchema=xo(0,Dt,ft),Qe._storeNames=Y(Dt.objectStoreNames,0),Bn(Qe,[Qe._allTables],l(ft),ft);else if(Is(w,w._dbSchema,Gt),nt=Gt,((nt=Ps(xo(0,(Xe=w).idbdb,nt),Xe._dbSchema)).add.length||nt.change.some(function(Mt){return Mt.add.length||Mt.change.length}))&&!$)return console.warn("Dexie SchemaDiff: Schema was extended without increasing the number passed to db.version(). Dexie will add missing parts and increment native version number to workaround this."),It.close(),W=It.version+1,$=!0,Ne(be());eo(w,Gt)}catch{}Bo.push(w),It.onversionchange=ei(function(Mt){j.vcFired=!0,w.on("versionchange").fire(Mt)}),It.onclose=ei(function(){w.close({disableAutoOpen:!1})}),je&&(Lt=w._deps,Tt=Me,Ke(Dt=Lt.indexedDB)||Tt===oa||Ie(Dt,Lt.IDBKeyRange).put({name:Tt}).catch(mt)),Ne()},Pe)}).catch(function(Ne){switch(Ne?.name){case"UnknownError":if(0<j.PR1398_maxLoop)return j.PR1398_maxLoop--,console.warn("Dexie: Workaround for Chrome UnknownError on open()"),be();break;case"VersionError":if(0<W)return W=0,be()}return vt.reject(Ne)})}var He,Ze=j.dbReadyResolve,Be=null,je=!1;return vt.race([z,(typeof navigator>"u"?vt.resolve():!navigator.userAgentData&&/Safari\//.test(navigator.userAgent)&&!/Chrom(e|ium)\//.test(navigator.userAgent)&&indexedDB.databases?new Promise(function(Ne){function Pe(){return indexedDB.databases().finally(Ne)}He=setInterval(Pe,100),Pe()}).finally(function(){return clearInterval(He)}):Promise.resolve()).then(be)]).then(function(){return ge(),j.onReadyBeingFired=[],vt.resolve(dt(function(){return w.on.ready.fire(w.vip)})).then(function Ne(){var Pe;if(0<j.onReadyBeingFired.length)return Pe=j.onReadyBeingFired.reduce(sn,mt),j.onReadyBeingFired=[],vt.resolve(dt(function(){return Pe(w.vip)})).then(Ne)})}).finally(function(){j.openCanceller===z&&(j.onReadyBeingFired=null,j.isBeingOpened=!1)}).catch(function(Ne){j.dbOpenError=Ne;try{Be&&Be.abort()}catch{}return z===j.openCanceller&&w._close(),hi(Ne)}).finally(function(){j.openComplete=!0,Ze()}).then(function(){var Ne;return je&&(Ne={},w.tables.forEach(function(Pe){Pe.schema.indexes.forEach(function(Me){Me.name&&(Ne["idb://".concat(w.name,"/").concat(Pe.name,"/").concat(Me.name)]=new Bt(-1/0,[[[]]]))}),Ne["idb://".concat(w.name,"/").concat(Pe.name,"/")]=Ne["idb://".concat(w.name,"/").concat(Pe.name,"/:dels")]=new Bt(-1/0,[[[]]])}),Bi(as).fire(Ne),To(Ne,!0)),w})}function io(w){function j($){return w.next($)}var P=W(j),z=W(function($){return w.throw($)});function W($){return function(be){var be=$(be),He=be.value;return be.done?He:He&&typeof He.then=="function"?He.then(P,z):d(He)?Promise.all(He).then(P,z):P(He)}}return W(j)()}function ba(w,j,P){for(var z=d(w)?w.slice():[w],W=0;W<P;++W)z.push(j);return z}var zs={stack:"dbcore",name:"VirtualIndexMiddleware",level:1,create:function(w){return i(i({},w),{table:function(z){var P=w.table(z),z=P.schema,W={},$=[];function ge(Ne,Pe,Me){var Qe=Qi(Ne),Ue=W[Qe]=W[Qe]||[],Xe=Ne==null?0:typeof Ne=="string"?1:Ne.length,nt=0<Pe,Qe=i(i({},Me),{name:nt?"".concat(Qe,"(virtual-from:").concat(Me.name,")"):Me.name,lowLevelIndex:Me,isVirtual:nt,keyTail:Pe,keyLength:Xe,extractKey:xa(Ne),unique:!nt&&Me.unique});return Ue.push(Qe),Qe.isPrimaryKey||$.push(Qe),1<Xe&&ge(Xe===2?Ne[0]:Ne.slice(0,Xe-1),Pe+1,Me),Ue.sort(function(ft,Tt){return ft.keyTail-Tt.keyTail}),Qe}var be=ge(z.primaryKey.keyPath,0,z.primaryKey);W[":id"]=[be];for(var He=0,Ze=z.indexes;He<Ze.length;He++){var Be=Ze[He];ge(Be.keyPath,0,Be)}function je(Ne){var Pe,Me=Ne.query.index;return Me.isVirtual?i(i({},Ne),{query:{index:Me.lowLevelIndex,range:(Pe=Ne.query.range,Me=Me.keyTail,{type:Pe.type===1?2:Pe.type,lower:ba(Pe.lower,Pe.lowerOpen?w.MAX_KEY:w.MIN_KEY,Me),lowerOpen:!0,upper:ba(Pe.upper,Pe.upperOpen?w.MIN_KEY:w.MAX_KEY,Me),upperOpen:!0})}}):Ne}return i(i({},P),{schema:i(i({},z),{primaryKey:be,indexes:$,getIndexByKeyPath:function(Ne){return(Ne=W[Qi(Ne)])&&Ne[0]}}),count:function(Ne){return P.count(je(Ne))},query:function(Ne){return P.query(je(Ne))},openCursor:function(Ne){var Pe=Ne.query.index,Me=Pe.keyTail,Ue=Pe.keyLength;return Pe.isVirtual?P.openCursor(je(Ne)).then(function(nt){return nt&&Xe(nt)}):P.openCursor(Ne);function Xe(nt){return Object.create(nt,{continue:{value:function(Qe){Qe!=null?nt.continue(ba(Qe,Ne.reverse?w.MAX_KEY:w.MIN_KEY,Me)):Ne.unique?nt.continue(nt.key.slice(0,Ue).concat(Ne.reverse?w.MIN_KEY:w.MAX_KEY,Me)):nt.continue()}},continuePrimaryKey:{value:function(Qe,ft){nt.continuePrimaryKey(ba(Qe,w.MAX_KEY,Me),ft)}},primaryKey:{get:function(){return nt.primaryKey}},key:{get:function(){var Qe=nt.key;return Ue===1?Qe[0]:Qe.slice(0,Ue)}},value:{get:function(){return nt.value}}})}}})}})}};function ro(w,j,P,z){return P=P||{},z=z||"",l(w).forEach(function(W){var $,ge,be;_(j,W)?($=w[W],ge=j[W],typeof $=="object"&&typeof ge=="object"&&$&&ge?(be=Ye($))!==Ye(ge)?P[z+W]=j[W]:be==="Object"?ro($,ge,P,z+W+"."):$!==ge&&(P[z+W]=j[W]):$!==ge&&(P[z+W]=j[W])):P[z+W]=void 0}),l(j).forEach(function(W){_(w,W)||(P[z+W]=j[W])}),P}function sr(w,j){return j.type==="delete"?j.keys:j.keys||j.values.map(w.extractKey)}var ms={stack:"dbcore",name:"HooksMiddleware",level:2,create:function(w){return i(i({},w),{table:function(j){var P=w.table(j),z=P.schema.primaryKey;return i(i({},P),{mutate:function(W){var $=Nt.trans,ge=$.table(j).hook,be=ge.deleting,He=ge.creating,Ze=ge.updating;switch(W.type){case"add":if(He.fire===mt)break;return $._promise("readwrite",function(){return Be(W)},!0);case"put":if(He.fire===mt&&Ze.fire===mt)break;return $._promise("readwrite",function(){return Be(W)},!0);case"delete":if(be.fire===mt)break;return $._promise("readwrite",function(){return Be(W)},!0);case"deleteRange":if(be.fire===mt)break;return $._promise("readwrite",function(){return(function je(Ne,Pe,Me){return P.query({trans:Ne,values:!1,query:{index:z,range:Pe},limit:Me}).then(function(Ue){var Xe=Ue.result;return Be({type:"delete",keys:Xe,trans:Ne}).then(function(nt){return 0<nt.numFailures?Promise.reject(nt.failures[0]):Xe.length<Me?{failures:[],numFailures:0,lastResult:void 0}:je(Ne,i(i({},Pe),{lower:Xe[Xe.length-1],lowerOpen:!0}),Me)})})})(W.trans,W.range,1e4)},!0)}return P.mutate(W);function Be(je){var Ne,Pe,Me,Ue=Nt.trans,Xe=je.keys||sr(z,je);if(Xe)return(je=je.type==="add"||je.type==="put"?i(i({},je),{keys:Xe}):i({},je)).type!=="delete"&&(je.values=r([],je.values)),je.keys&&(je.keys=r([],je.keys)),Ne=P,Me=Xe,((Pe=je).type==="add"?Promise.resolve([]):Ne.getMany({trans:Pe.trans,keys:Me,cache:"immutable"})).then(function(nt){var Qe=Xe.map(function(ft,Tt){var Dt,It,Lt,Gt=nt[Tt],Mt={onerror:null,onsuccess:null};return je.type==="delete"?be.fire.call(Mt,ft,Gt,Ue):je.type==="add"||Gt===void 0?(Dt=He.fire.call(Mt,ft,je.values[Tt],Ue),ft==null&&Dt!=null&&(je.keys[Tt]=ft=Dt,z.outbound||_e(je.values[Tt],z.keyPath,ft))):(Dt=ro(Gt,je.values[Tt]),(It=Ze.fire.call(Mt,Dt,ft,Gt,Ue))&&(Lt=je.values[Tt],Object.keys(It).forEach(function(jt){_(Lt,jt)?Lt[jt]=It[jt]:_e(Lt,jt,It[jt])}))),Mt});return P.mutate(je).then(function(ft){for(var Tt=ft.failures,Dt=ft.results,It=ft.numFailures,ft=ft.lastResult,Lt=0;Lt<Xe.length;++Lt){var Gt=(Dt||Xe)[Lt],Mt=Qe[Lt];Gt==null?Mt.onerror&&Mt.onerror(Tt[Lt]):Mt.onsuccess&&Mt.onsuccess(je.type==="put"&&nt[Lt]?je.values[Lt]:Gt)}return{failures:Tt,results:Dt,numFailures:It,lastResult:ft}}).catch(function(ft){return Qe.forEach(function(Tt){return Tt.onerror&&Tt.onerror(ft)}),Promise.reject(ft)})});throw new Error("Keys missing")}}})}})}};function ss(w,j,P){try{if(!j||j.keys.length<w.length)return null;for(var z=[],W=0,$=0;W<j.keys.length&&$<w.length;++W)Ht(j.keys[W],w[$])===0&&(z.push(P?Se(j.values[W]):j.values[W]),++$);return z.length===w.length?z:null}catch{return null}}var Bs={stack:"dbcore",level:-1,create:function(w){return{table:function(j){var P=w.table(j);return i(i({},P),{getMany:function(z){var W;return z.cache?(W=ss(z.keys,z.trans._cache,z.cache==="clone"))?vt.resolve(W):P.getMany(z).then(function($){return z.trans._cache={keys:z.keys,values:z.cache==="clone"?Se($):$},$}):P.getMany(z)},mutate:function(z){return z.type!=="add"&&(z.trans._cache=null),P.mutate(z)}})}}}};function jo(w,j){return w.trans.mode==="readonly"&&!!w.subscr&&!w.trans.explicit&&w.trans.db._options.cache!=="disabled"&&!j.schema.primaryKey.outbound}function Fi(w,j){switch(w){case"query":return j.values&&!j.unique;case"get":case"getMany":case"count":case"openCursor":return!1}}var Fa={stack:"dbcore",level:0,name:"Observability",create:function(w){var j=w.schema.name,P=new Bt(w.MIN_KEY,w.MAX_KEY);return i(i({},w),{transaction:function(z,W,$){if(Nt.subscr&&W!=="readonly")throw new Re.ReadOnly("Readwrite transaction in liveQuery context. Querier source: ".concat(Nt.querier));return w.transaction(z,W,$)},table:function(z){function W(Xe){var Ue,Xe=Xe.query;return[Ue=Xe.index,new Bt((Ue=(Xe=Xe.range).lower)!=null?Ue:w.MIN_KEY,(Ue=Xe.upper)!=null?Ue:w.MAX_KEY)]}var $=w.table(z),ge=$.schema,be=ge.primaryKey,He=ge.indexes,Ze=be.extractKey,Be=be.outbound,je=be.autoIncrement&&He.filter(function(Me){return Me.compound&&Me.keyPath.includes(be.keyPath)}),Ne=i(i({},$),{mutate:function(Me){function Ue(Wt){return Wt="idb://".concat(j,"/").concat(z,"/").concat(Wt),Tt[Wt]||(Tt[Wt]=new Bt)}var Xe,nt,Qe,ft=Me.trans,Tt=Me.mutatedParts||(Me.mutatedParts={}),Dt=Ue(""),It=Ue(":dels"),Lt=Me.type,Mt=Me.type==="deleteRange"?[Me.range]:Me.type==="delete"?[Me.keys]:Me.values.length<50?[sr(be,Me).filter(function(Wt){return Wt}),Me.values]:[],Gt=Mt[0],Mt=Mt[1],jt=Me.trans._cache;return d(Gt)?(Dt.addKeys(Gt),(Lt=Lt==="delete"||Gt.length===Mt.length?ss(Gt,jt):null)||It.addKeys(Gt),(Lt||Mt)&&(Xe=Ue,nt=Lt,Qe=Mt,ge.indexes.forEach(function(Wt){var An=Xe(Wt.name||"");function Ln(On){return On!=null?Wt.extractKey(On):null}function fn(On){Wt.multiEntry&&d(On)?On.forEach(function(gi){return An.addKey(gi)}):An.addKey(On)}(nt||Qe).forEach(function(On,li){var Ea=nt&&Ln(nt[li]),li=Qe&&Ln(Qe[li]);Ht(Ea,li)!==0&&(Ea!=null&&fn(Ea),li!=null)&&fn(li)})}))):Gt?(Mt={from:(jt=Gt.lower)!=null?jt:w.MIN_KEY,to:(Lt=Gt.upper)!=null?Lt:w.MAX_KEY},It.add(Mt),Dt.add(Mt)):(Dt.add(P),It.add(P),ge.indexes.forEach(function(Wt){return Ue(Wt.name).add(P)})),$.mutate(Me).then(function(Wt){return!Gt||Me.type!=="add"&&Me.type!=="put"||(Dt.addKeys(Wt.results),je&&je.forEach(function(An){for(var Ln=Me.values.map(function(Ea){return An.extractKey(Ea)}),fn=An.keyPath.findIndex(function(Ea){return Ea===be.keyPath}),On=0,gi=Wt.results.length;On<gi;++On)Ln[On][fn]=Wt.results[On];Ue(An.name).addKeys(Ln)})),ft.mutatedParts=pi(ft.mutatedParts||{},Tt),Wt})}}),Pe={get:function(Me){return[be,new Bt(Me.key)]},getMany:function(Me){return[be,new Bt().addKeys(Me.keys)]},count:W,query:W,openCursor:W};return l(Pe).forEach(function(Me){Ne[Me]=function(Ue){var Xe=Nt.subscr,nt=!!Xe,Qe=jo(Nt,$)&&Fi(Me,Ue)?Ue.obsSet={}:Xe;if(nt){var ft,Xe=function(Mt){return Mt="idb://".concat(j,"/").concat(z,"/").concat(Mt),Qe[Mt]||(Qe[Mt]=new Bt)},Tt=Xe(""),Dt=Xe(":dels"),nt=Pe[Me](Ue),It=nt[0],nt=nt[1];if((Me==="query"&&It.isPrimaryKey&&!Ue.values?Dt:Xe(It.name||"")).add(nt),!It.isPrimaryKey){if(Me!=="count")return ft=Me==="query"&&Be&&Ue.values&&$.query(i(i({},Ue),{values:!1})),$[Me].apply(this,arguments).then(function(Mt){if(Me==="query"){if(Be&&Ue.values)return ft.then(function(Ln){return Ln=Ln.result,Tt.addKeys(Ln),Mt});var jt=Ue.values?Mt.result.map(Ze):Mt.result;(Ue.values?Tt:Dt).addKeys(jt)}else{var Wt,An;if(Me==="openCursor")return An=Ue.values,(Wt=Mt)&&Object.create(Wt,{key:{get:function(){return Dt.addKey(Wt.primaryKey),Wt.key}},primaryKey:{get:function(){var Ln=Wt.primaryKey;return Dt.addKey(Ln),Ln}},value:{get:function(){return An&&Tt.addKey(Wt.primaryKey),Wt.value}}})}return Mt});Dt.add(P)}}return $[Me].apply(this,arguments)}}),Ne}})}};function Fs(w,j,P){var z;return P.numFailures===0?j:j.type==="deleteRange"||(z=j.keys?j.keys.length:"values"in j&&j.values?j.values.length:1,P.numFailures===z)?null:(z=i({},j),d(z.keys)&&(z.keys=z.keys.filter(function(W,$){return!($ in P.failures)})),"values"in z&&d(z.values)&&(z.values=z.values.filter(function(W,$){return!($ in P.failures)})),z)}function _a(w,j){return P=w,((z=j).lower===void 0||(z.lowerOpen?0<Ht(P,z.lower):0<=Ht(P,z.lower)))&&(P=w,(z=j).upper===void 0||(z.upperOpen?Ht(P,z.upper)<0:Ht(P,z.upper)<=0));var P,z}function Ua(w,j,P,z,W,$){var ge,be,He,Ze,Be,je;return!P||P.length===0||(ge=j.query.index,be=ge.multiEntry,He=j.query.range,Ze=z.schema.primaryKey.extractKey,Be=ge.extractKey,je=(ge.lowLevelIndex||ge).extractKey,(z=P.reduce(function(Ne,Pe){var Me=Ne,Ue=[];if(Pe.type==="add"||Pe.type==="put")for(var Xe=new Bt,nt=Pe.values.length-1;0<=nt;--nt){var Qe,ft=Pe.values[nt],Tt=Ze(ft);!Xe.hasKey(Tt)&&(Qe=Be(ft),be&&d(Qe)?Qe.some(function(Mt){return _a(Mt,He)}):_a(Qe,He))&&(Xe.addKey(Tt),Ue.push(ft))}switch(Pe.type){case"add":var Dt=new Bt().addKeys(j.values?Ne.map(function(jt){return Ze(jt)}):Ne),Me=Ne.concat(j.values?Ue.filter(function(jt){return jt=Ze(jt),!Dt.hasKey(jt)&&(Dt.addKey(jt),!0)}):Ue.map(function(jt){return Ze(jt)}).filter(function(jt){return!Dt.hasKey(jt)&&(Dt.addKey(jt),!0)}));break;case"put":var It=new Bt().addKeys(Pe.values.map(function(jt){return Ze(jt)}));Me=Ne.filter(function(jt){return!It.hasKey(j.values?Ze(jt):jt)}).concat(j.values?Ue:Ue.map(function(jt){return Ze(jt)}));break;case"delete":var Lt=new Bt().addKeys(Pe.keys);Me=Ne.filter(function(jt){return!Lt.hasKey(j.values?Ze(jt):jt)});break;case"deleteRange":var Gt=Pe.range;Me=Ne.filter(function(jt){return!_a(Ze(jt),Gt)})}return Me},w))===w)?w:(z.sort(function(Ne,Pe){return Ht(je(Ne),je(Pe))||Ht(Ze(Ne),Ze(Pe))}),j.limit&&j.limit<1/0&&(z.length>j.limit?z.length=j.limit:w.length===j.limit&&z.length<j.limit&&(W.dirty=!0)),$?Object.freeze(z):z)}function Qr(w,j){return Ht(w.lower,j.lower)===0&&Ht(w.upper,j.upper)===0&&!!w.lowerOpen==!!j.lowerOpen&&!!w.upperOpen==!!j.upperOpen}function ls(w,j){return((P,z,W,$)=>{if(P===void 0)return z!==void 0?-1:0;if(z===void 0)return 1;if((P=Ht(P,z))===0){if(W&&$)return 0;if(W)return 1;if($)return-1}return P})(w.lower,j.lower,w.lowerOpen,j.lowerOpen)<=0&&0<=((P,z,W,$)=>{if(P===void 0)return z!==void 0?1:0;if(z===void 0)return-1;if((P=Ht(P,z))===0){if(W&&$)return 0;if(W)return-1;if($)return 1}return P})(w.upper,j.upper,w.upperOpen,j.upperOpen)}function cs(w,j,P,z){w.subscribers.add(P),z.addEventListener("abort",function(){var W,$;w.subscribers.delete(P),w.subscribers.size===0&&(W=w,$=j,setTimeout(function(){W.subscribers.size===0&&he($,W)},3e3))})}var bo={stack:"dbcore",level:0,name:"Cache",create:function(w){var j=w.schema.name;return i(i({},w),{transaction:function(P,z,W){var $,ge,be=w.transaction(P,z,W);return z==="readwrite"&&(W=($=new AbortController).signal,be.addEventListener("abort",(ge=function(He){return function(){if($.abort(),z==="readwrite"){for(var Ze=new Set,Be=0,je=P;Be<je.length;Be++){var Ne=je[Be],Pe=Di["idb://".concat(j,"/").concat(Ne)];if(Pe){var Me=w.table(Ne),Ue=Pe.optimisticOps.filter(function(Wt){return Wt.trans===be});if(be._explicit&&He&&be.mutatedParts)for(var Xe=0,nt=Object.values(Pe.queries.query);Xe<nt.length;Xe++)for(var Qe=0,ft=(It=nt[Xe]).slice();Qe<ft.length;Qe++)mr((Lt=ft[Qe]).obsSet,be.mutatedParts)&&(he(It,Lt),Lt.subscribers.forEach(function(Wt){return Ze.add(Wt)}));else if(0<Ue.length){Pe.optimisticOps=Pe.optimisticOps.filter(function(Wt){return Wt.trans!==be});for(var Tt=0,Dt=Object.values(Pe.queries.query);Tt<Dt.length;Tt++)for(var It,Lt,Gt,Mt=0,jt=(It=Dt[Tt]).slice();Mt<jt.length;Mt++)(Lt=jt[Mt]).res!=null&&be.mutatedParts&&(He&&!Lt.dirty?(Gt=Object.isFrozen(Lt.res),Gt=Ua(Lt.res,Lt.req,Ue,Me,Lt,Gt),Lt.dirty?(he(It,Lt),Lt.subscribers.forEach(function(Wt){return Ze.add(Wt)})):Gt!==Lt.res&&(Lt.res=Gt,Lt.promise=vt.resolve({result:Gt}))):(Lt.dirty&&he(It,Lt),Lt.subscribers.forEach(function(Wt){return Ze.add(Wt)})))}}}Ze.forEach(function(Wt){return Wt()})}}})(!1),{signal:W}),be.addEventListener("error",ge(!1),{signal:W}),be.addEventListener("complete",ge(!0),{signal:W})),be},table:function(P){var z=w.table(P),W=z.schema.primaryKey;return i(i({},z),{mutate:function($){var ge,be=Nt.trans;return!W.outbound&&be.db._options.cache!=="disabled"&&!be.explicit&&be.idbtrans.mode==="readwrite"&&(ge=Di["idb://".concat(j,"/").concat(P)])?(be=z.mutate($),$.type!=="add"&&$.type!=="put"||!(50<=$.values.length||sr(W,$).some(function(He){return He==null}))?(ge.optimisticOps.push($),$.mutatedParts&&wr($.mutatedParts),be.then(function(He){0<He.numFailures&&(he(ge.optimisticOps,$),(He=Fs(0,$,He))&&ge.optimisticOps.push(He),$.mutatedParts)&&wr($.mutatedParts)}),be.catch(function(){he(ge.optimisticOps,$),$.mutatedParts&&wr($.mutatedParts)})):be.then(function(He){var Ze=Fs(0,i(i({},$),{values:$.values.map(function(Be,je){var Ne;return He.failures[je]?Be:(_e(Ne=(Ne=W.keyPath)!=null&&Ne.includes(".")?Se(Be):i({},Be),W.keyPath,He.results[je]),Ne)})}),He);ge.optimisticOps.push(Ze),queueMicrotask(function(){return $.mutatedParts&&wr($.mutatedParts)})}),be):z.mutate($)},query:function($){var ge,be,He,Ze,Be,je,Ne;return jo(Nt,z)&&Fi("query",$)?(ge=((He=Nt.trans)==null?void 0:He.db._options.cache)==="immutable",be=(He=Nt).requery,He=He.signal,je=((Pe,Me,Ue,Xe)=>{var nt=Di["idb://".concat(Pe,"/").concat(Me)];if(!nt)return[];if(!(Pe=nt.queries[Ue]))return[null,!1,nt,null];var Qe=Pe[(Xe.query?Xe.query.index.name:null)||""];if(!Qe)return[null,!1,nt,null];switch(Ue){case"query":var ft=Qe.find(function(Tt){return Tt.req.limit===Xe.limit&&Tt.req.values===Xe.values&&Qr(Tt.req.query.range,Xe.query.range)});return ft?[ft,!0,nt,Qe]:[Qe.find(function(Tt){return("limit"in Tt.req?Tt.req.limit:1/0)>=Xe.limit&&(!Xe.values||Tt.req.values)&&ls(Tt.req.query.range,Xe.query.range)}),!1,nt,Qe];case"count":return ft=Qe.find(function(Tt){return Qr(Tt.req.query.range,Xe.query.range)}),[ft,!!ft,nt,Qe]}})(j,P,"query",$),Ne=je[0],Ze=je[2],Be=je[3],Ne&&je[1]?Ne.obsSet=$.obsSet:(je=z.query($).then(function(Pe){var Me=Pe.result;if(Ne&&(Ne.res=Me),ge){for(var Ue=0,Xe=Me.length;Ue<Xe;++Ue)Object.freeze(Me[Ue]);Object.freeze(Me)}else Pe.result=Se(Me);return Pe}).catch(function(Pe){return Be&&Ne&&he(Be,Ne),Promise.reject(Pe)}),Ne={obsSet:$.obsSet,promise:je,subscribers:new Set,type:"query",req:$,dirty:!1},Be?Be.push(Ne):(Be=[Ne],(Ze=Ze||(Di["idb://".concat(j,"/").concat(P)]={queries:{query:{},count:{}},objs:new Map,optimisticOps:[],unsignaledParts:{}})).queries.query[$.query.index.name||""]=Be)),cs(Ne,Be,be,He),Ne.promise.then(function(Pe){return{result:Ua(Pe.result,$,Ze?.optimisticOps,z,Ne,ge)}})):z.query($)}})}})}};function Ha(w,j){return new Proxy(w,{get:function(P,z,W){return z==="db"?j:Reflect.get(P,z,W)}})}Fn.prototype.version=function(w){if(isNaN(w)||w<.1)throw new Re.Type("Given version is not a positive number");if(w=Math.round(10*w)/10,this.idbdb||this._state.isBeingOpened)throw new Re.Schema("Cannot add version when database is open");this.verno=Math.max(this.verno,w);var j=this._versions,P=j.filter(function(z){return z._cfg.version===w})[0];return P||(P=new this.Version(w),j.push(P),j.sort(Ar),P.stores({}),this._state.autoSchema=!1),P},Fn.prototype._whenReady=function(w){var j=this;return this.idbdb&&(this._state.openComplete||Nt.letThrough||this._vip)?w():new vt(function(P,z){if(j._state.openComplete)return z(new Re.DatabaseClosed(j._state.dbOpenError));if(!j._state.isBeingOpened){if(!j._state.autoOpen)return void z(new Re.DatabaseClosed);j.open().catch(mt)}j._state.dbReadyPromise.then(P,z)}).then(w)},Fn.prototype.use=function(W){var j=W.stack,P=W.create,z=W.level,W=W.name,$=(W&&this.unuse({stack:j,name:W}),this._middlewares[j]||(this._middlewares[j]=[]));return $.push({stack:j,create:P,level:z??10,name:W}),$.sort(function(ge,be){return ge.level-be.level}),this},Fn.prototype.unuse=function(w){var j=w.stack,P=w.name,z=w.create;return j&&this._middlewares[j]&&(this._middlewares[j]=this._middlewares[j].filter(function(W){return z?W.create!==z:!!P&&W.name!==P})),this},Fn.prototype.open=function(){var w=this;return Gr(gn,function(){return Xr(w)})},Fn.prototype._close=function(){this.on.close.fire(new CustomEvent("close"));var w=this._state,j=Bo.indexOf(this);if(0<=j&&Bo.splice(j,1),this.idbdb){try{this.idbdb.close()}catch{}this.idbdb=null}w.isBeingOpened||(w.dbReadyPromise=new vt(function(P){w.dbReadyResolve=P}),w.openCanceller=new vt(function(P,z){w.cancelOpen=z}))},Fn.prototype.close=function(j){var j=(j===void 0?{disableAutoOpen:!0}:j).disableAutoOpen,P=this._state;j?(P.isBeingOpened&&P.cancelOpen(new Re.DatabaseClosed),this._close(),P.autoOpen=!1,P.dbOpenError=new Re.DatabaseClosed):(this._close(),P.autoOpen=this._options.autoOpen||P.isBeingOpened,P.openComplete=!1,P.dbOpenError=null)},Fn.prototype.delete=function(w){var j=this,P=(w===void 0&&(w={disableAutoOpen:!0}),0<arguments.length&&typeof arguments[0]!="object"),z=this._state;return new vt(function(W,$){function ge(){j.close(w);var be=j._deps.indexedDB.deleteDatabase(j.name);be.onsuccess=ei(function(){var He,Ze,Be;He=j._deps,Ze=j.name,Ke(Be=He.indexedDB)||Ze===oa||Ie(Be,He.IDBKeyRange).delete(Ze).catch(mt),W()}),be.onerror=rr($),be.onblocked=j._fireOnBlocked}if(P)throw new Re.InvalidArgument("Invalid closeOptions argument to db.delete()");z.isBeingOpened?z.dbReadyPromise.then(ge):ge()})},Fn.prototype.backendDB=function(){return this.idbdb},Fn.prototype.isOpen=function(){return this.idbdb!==null},Fn.prototype.hasBeenClosed=function(){var w=this._state.dbOpenError;return w&&w.name==="DatabaseClosed"},Fn.prototype.hasFailed=function(){return this._state.dbOpenError!==null},Fn.prototype.dynamicallyOpened=function(){return this._state.autoSchema},Object.defineProperty(Fn.prototype,"tables",{get:function(){var w=this;return l(this._allTables).map(function(j){return w._allTables[j]})},enumerable:!1,configurable:!0}),Fn.prototype.transaction=function(){var w=(function(j,P,z){var W=arguments.length;if(W<2)throw new Re.InvalidArgument("Too few arguments");for(var $=new Array(W-1);--W;)$[W-1]=arguments[W];return z=$.pop(),[j,me($),z]}).apply(this,arguments);return this._transaction.apply(this,w)},Fn.prototype._transaction=function(w,j,P){var z,W,$=this,ge=Nt.trans,be=(ge&&ge.db===this&&w.indexOf("!")===-1||(ge=null),w.indexOf("?")!==-1);w=w.replace("!","").replace("?","");try{if(W=j.map(function(Ze){if(Ze=Ze instanceof $.Table?Ze.name:Ze,typeof Ze!="string")throw new TypeError("Invalid table argument to Dexie.transaction(). Only Table or String are allowed");return Ze}),w=="r"||w===Xa)z=Xa;else{if(w!="rw"&&w!=Qa)throw new Re.InvalidArgument("Invalid transaction mode: "+w);z=Qa}if(ge){if(ge.mode===Xa&&z===Qa){if(!be)throw new Re.SubTransaction("Cannot enter a sub-transaction with READWRITE mode when parent transaction is READONLY");ge=null}ge&&W.forEach(function(Ze){if(ge&&ge.storeNames.indexOf(Ze)===-1){if(!be)throw new Re.SubTransaction("Table "+Ze+" not included in parent transaction.");ge=null}}),be&&ge&&!ge.active&&(ge=null)}}catch(Ze){return ge?ge._promise(null,function(Be,je){je(Ze)}):hi(Ze)}var He=(function Ze(Be,je,Ne,Pe,Me){return vt.resolve().then(function(){var Qe=Nt.transless||Nt,Ue=Be._createTransaction(je,Ne,Be._dbSchema,Pe),Qe=(Ue.explicit=!0,{trans:Ue,transless:Qe});if(Pe)Ue.idbtrans=Pe.idbtrans;else try{Ue.create(),Ue.idbtrans._explicit=!0,Be._state.PR1398_maxLoop=3}catch(ft){return ft.name===Le.InvalidState&&Be.isOpen()&&0<--Be._state.PR1398_maxLoop?(console.warn("Dexie: Need to reopen db"),Be.close({disableAutoOpen:!1}),Be.open().then(function(){return Ze(Be,je,Ne,null,Me)})):hi(ft)}var Xe,nt=ne(Me),Qe=(nt&&bi(),vt.follow(function(){var ft;(Xe=Me.call(Ue,Ue))&&(nt?(ft=Zi.bind(null,null),Xe.then(ft,ft)):typeof Xe.next=="function"&&typeof Xe.throw=="function"&&(Xe=io(Xe)))},Qe));return(Xe&&typeof Xe.then=="function"?vt.resolve(Xe).then(function(ft){return Ue.active?ft:hi(new Re.PrematureCommit("Transaction committed too early. See http://bit.ly/2kdckMn"))}):Qe.then(function(){return Xe})).then(function(ft){return Pe&&Ue._resolve(),Ue._completion.then(function(){return ft})}).catch(function(ft){return Ue._reject(ft),hi(ft)})})}).bind(null,this,z,W,ge,P);return ge?ge._promise(z,He,"lock"):Nt.trans?Gr(Nt.transless,function(){return $._whenReady(He)}):this._whenReady(He)},Fn.prototype.table=function(w){if(_(this._allTables,w))return this._allTables[w];throw new Re.InvalidTable("Table ".concat(w," does not exist"))};var lr=Fn;function Fn(w,j){var P,z,W,$,ge,be=this,He=(this._middlewares={},this.verno=0,Fn.dependencies),He=(this._options=j=i({addons:Fn.addons,autoOpen:!0,indexedDB:He.indexedDB,IDBKeyRange:He.IDBKeyRange,cache:"cloned"},j),this._deps={indexedDB:j.indexedDB,IDBKeyRange:j.IDBKeyRange},j.addons),Ze=(this._dbSchema={},this._versions=[],this._storeNames=[],this._allTables={},this.idbdb=null,this._novip=this,{dbOpenError:null,isBeingOpened:!1,onReadyBeingFired:null,openComplete:!1,dbReadyResolve:mt,dbReadyPromise:null,cancelOpen:mt,openCanceller:null,autoSchema:!0,PR1398_maxLoop:3,autoOpen:j.autoOpen}),Be=(Ze.dbReadyPromise=new vt(function(je){Ze.dbReadyResolve=je}),Ze.openCanceller=new vt(function(je,Ne){Ze.cancelOpen=Ne}),this._state=Ze,this.name=w,this.on=zi(this,"populate","blocked","versionchange","close",{ready:[sn,mt]}),this.once=function(je,Ne){var Pe=function(){for(var Me=[],Ue=0;Ue<arguments.length;Ue++)Me[Ue]=arguments[Ue];be.on(je).unsubscribe(Pe),Ne.apply(be,Me)};return be.on(je,Pe)},this.on.ready.subscribe=B(this.on.ready.subscribe,function(je){return function(Ne,Pe){Fn.vip(function(){var Me,Ue=be._state;Ue.openComplete?(Ue.dbOpenError||vt.resolve().then(Ne),Pe&&je(Ne)):Ue.onReadyBeingFired?(Ue.onReadyBeingFired.push(Ne),Pe&&je(Ne)):(je(Ne),Me=be,Pe||je(function Xe(){Me.on.ready.unsubscribe(Ne),Me.on.ready.unsubscribe(Xe)}))})}}),this.Collection=(P=this,ni(is.prototype,function(Xe,Ue){this.db=P;var Pe=Ns,Me=null;if(Ue)try{Pe=Ue()}catch(Qe){Me=Qe}var Ue=Xe._ctx,Xe=Ue.table,nt=Xe.hook.reading.fire;this._ctx={table:Xe,index:Ue.index,isPrimKey:!Ue.index||Xe.schema.primKey.keyPath&&Ue.index===Xe.schema.primKey.name,range:Pe,keysOnly:!1,dir:"next",unique:"",algorithm:null,filter:null,replayFilter:null,justLimit:!0,isMatch:null,offset:0,limit:1/0,error:Me,or:Ue.or,valueMapper:nt!==Ot?nt:null}})),this.Table=(z=this,ni(Ii.prototype,function(je,Ne,Pe){this.db=z,this._tx=Pe,this.name=je,this.schema=Ne,this.hook=z._allTables[je]?z._allTables[je].hook:zi(null,{creating:[Pt,mt],reading:[Kt,Ot],updating:[dn,mt],deleting:[Dn,mt]})})),this.Transaction=(W=this,ni(Os.prototype,function(je,Ne,Pe,Me,Ue){var Xe=this;je!=="readonly"&&Ne.forEach(function(nt){nt=(nt=Pe[nt])==null?void 0:nt.yProps,nt&&(Ne=Ne.concat(nt.map(function(Qe){return Qe.updatesTable})))}),this.db=W,this.mode=je,this.storeNames=Ne,this.schema=Pe,this.chromeTransactionDurability=Me,this.idbtrans=null,this.on=zi(this,"complete","error","abort"),this.parent=Ue||null,this.active=!0,this._reculock=0,this._blockedFuncs=[],this._resolve=null,this._reject=null,this._waitingFor=null,this._waitingQueue=null,this._spinCount=0,this._completion=new vt(function(nt,Qe){Xe._resolve=nt,Xe._reject=Qe}),this._completion.then(function(){Xe.active=!1,Xe.on.complete.fire()},function(nt){var Qe=Xe.active;return Xe.active=!1,Xe.on.error.fire(nt),Xe.parent?Xe.parent._reject(nt):Qe&&Xe.idbtrans&&Xe.idbtrans.abort(),hi(nt)})})),this.Version=($=this,ni(K.prototype,function(je){this.db=$,this._cfg={version:je,storesSource:null,dbschema:{},tables:{},contentUpgrade:null}})),this.WhereClause=(ge=this,ni(rs.prototype,function(je,Ne,Pe){if(this.db=ge,this._ctx={table:je,index:Ne===":id"?null:Ne,or:Pe},this._cmp=this._ascending=Ht,this._descending=function(Me,Ue){return Ht(Ue,Me)},this._max=function(Me,Ue){return 0<Ht(Me,Ue)?Me:Ue},this._min=function(Me,Ue){return Ht(Me,Ue)<0?Me:Ue},this._IDBKeyRange=ge._deps.IDBKeyRange,!this._IDBKeyRange)throw new Re.MissingAPI})),this.on("versionchange",function(je){0<je.newVersion?console.warn("Another connection wants to upgrade database '".concat(be.name,"'. Closing db now to resume the upgrade.")):console.warn("Another connection wants to delete database '".concat(be.name,"'. Closing db now to resume the delete request.")),be.close({disableAutoOpen:!1})}),this.on("blocked",function(je){!je.newVersion||je.newVersion<je.oldVersion?console.warn("Dexie.delete('".concat(be.name,"') was blocked")):console.warn("Upgrade '".concat(be.name,"' blocked by other connection holding version ").concat(je.oldVersion/10))}),this._maxKey=za(j.IDBKeyRange),this._createTransaction=function(je,Ne,Pe,Me){return new be.Transaction(je,Ne,Pe,be._options.chromeTransactionDurability,Me)},this._fireOnBlocked=function(je){be.on("blocked").fire(je),Bo.filter(function(Ne){return Ne.name===be.name&&Ne!==be&&!Ne._state.vcFired}).map(function(Ne){return Ne.on("versionchange").fire(je)})},this.use(Bs),this.use(bo),this.use(Fa),this.use(zs),this.use(ms),new Proxy(this,{get:function(je,Ne,Pe){var Me;return Ne==="_vip"||(Ne==="table"?function(Ue){return Ha(be.table(Ue),Be)}:(Me=Reflect.get(je,Ne,Pe))instanceof Ii?Ha(Me,Be):Ne==="tables"?Me.map(function(Ue){return Ha(Ue,Be)}):Ne==="_createTransaction"?function(){return Ha(Me.apply(this,arguments),Be)}:Me)}}));this.vip=Be,He.forEach(function(je){return je(be)})}var la,wa=typeof Symbol<"u"&&"observable"in Symbol?Symbol.observable:"@@observable",ko=(vs.prototype.subscribe=function(w,j,P){return this._subscribe(w&&typeof w!="function"?w:{next:w,error:j,complete:P})},vs.prototype[wa]=function(){return this},vs);function vs(w){this._subscribe=w}try{la={indexedDB:a.indexedDB||a.mozIndexedDB||a.webkitIndexedDB||a.msIndexedDB,IDBKeyRange:a.IDBKeyRange||a.webkitIDBKeyRange}}catch{la={indexedDB:null,IDBKeyRange:null}}function Sa(w){var j,P=!1,z=new ko(function(W){var $=ne(w),ge,be=!1,He={},Ze={},Be={get closed(){return be},unsubscribe:function(){be||(be=!0,ge&&ge.abort(),je&&Bi.storagemutated.unsubscribe(Pe))}},je=(W.start&&W.start(Be),!1),Ne=function(){return Pa(Me)},Pe=function(Ue){pi(He,Ue),mr(Ze,He)&&Ne()},Me=function(){var Ue,Xe,nt;!be&&la.indexedDB&&(He={},Ue={},ge&&ge.abort(),ge=new AbortController,nt=(Qe=>{var ft=Wr();try{$&&bi();var Tt=ti(w,Qe);return Tt=$?Tt.finally(Zi):Tt}finally{ft&&nn()}})(Xe={subscr:Ue,signal:ge.signal,requery:Ne,querier:w,trans:null}),Promise.resolve(nt).then(function(Qe){P=!0,j=Qe,be||Xe.signal.aborted||(He={},(ft=>{for(var Tt in ft)if(_(ft,Tt))return;return 1})(Ze=Ue)||je||(Bi(as,Pe),je=!0),Pa(function(){return!be&&W.next&&W.next(Qe)}))},function(Qe){P=!1,["DatabaseClosedError","AbortError"].includes(Qe?.name)||be||Pa(function(){be||W.error&&W.error(Qe)})}))};return setTimeout(Ne,0),Be});return z.hasValue=function(){return P},z.getValue=function(){return j},z}var Mi=lr;function Ro(w){var j=Wi;try{Wi=!0,Bi.storagemutated.fire(w),To(w,!0)}finally{Wi=j}}A(Mi,i(i({},H),{delete:function(w){return new Mi(w,{addons:[]}).delete()},exists:function(w){return new Mi(w,{addons:[]}).open().then(function(j){return j.close(),!0}).catch("NoSuchDatabaseError",function(){return!1})},getDatabaseNames:function(w){try{return j=Mi.dependencies,P=j.indexedDB,j=j.IDBKeyRange,(Ke(P)?Promise.resolve(P.databases()).then(function(z){return z.map(function(W){return W.name}).filter(function(W){return W!==oa})}):Ie(P,j).toCollection().primaryKeys()).then(w)}catch{return hi(new Re.MissingAPI)}var j,P},defineClass:function(){return function(w){p(this,w)}},ignoreTransaction:function(w){return Nt.trans?Gr(Nt.transless,w):w()},vip:dt,async:function(w){return function(){try{var j=io(w.apply(this,arguments));return j&&typeof j.then=="function"?j:vt.resolve(j)}catch(P){return hi(P)}}},spawn:function(w,j,P){try{var z=io(w.apply(P,j||[]));return z&&typeof z.then=="function"?z:vt.resolve(z)}catch(W){return hi(W)}},currentTransaction:{get:function(){return Nt.trans||null}},waitFor:function(w,j){return w=vt.resolve(typeof w=="function"?Mi.ignoreTransaction(w):w).timeout(j||6e4),Nt.trans?Nt.trans.waitFor(w):w},Promise:vt,debug:{get:function(){return kt},set:function(w){Yt(w)}},derive:M,extend:p,props:A,override:B,Events:zi,on:Bi,liveQuery:Sa,extendObservabilitySet:pi,getByKeyPath:ue,setByKeyPath:_e,delByKeyPath:function(w,j){typeof j=="string"?_e(w,j,void 0):"length"in j&&[].map.call(j,function(P){_e(w,P,void 0)})},shallowClone:fe,deepClone:Se,getObjectDiff:ro,cmp:Ht,asap:ee,minKey:-1/0,addons:[],connections:Bo,errnames:Le,dependencies:la,cache:Di,semVer:"4.3.0",version:"4.3.0".split(".").map(function(w){return parseInt(w)}).reduce(function(w,j,P){return w+j/Math.pow(10,2*P)})})),Mi.maxKey=za(Mi.dependencies.IDBKeyRange),typeof dispatchEvent<"u"&&typeof addEventListener<"u"&&(Bi(as,function(w){Wi||(w=new CustomEvent(Zr,{detail:w}),Wi=!0,dispatchEvent(w),Wi=!1)}),addEventListener(Zr,function(w){w=w.detail,Wi||Ro(w)}));var Ca,Wi=!1,vr=function(){};return typeof BroadcastChannel<"u"&&((vr=function(){(Ca=new BroadcastChannel(Zr)).onmessage=function(w){return w.data&&Ro(w.data)}})(),typeof Ca.unref=="function"&&Ca.unref(),Bi(as,function(w){Wi||Ca.postMessage(w)})),typeof addEventListener<"u"&&(addEventListener("pagehide",function(w){if(!lr.disableBfCache&&w.persisted){kt&&console.debug("Dexie: handling persisted pagehide"),Ca?.close();for(var j=0,P=Bo;j<P.length;j++)P[j].close({disableAutoOpen:!1})}}),addEventListener("pageshow",function(w){!lr.disableBfCache&&w.persisted&&(kt&&console.debug("Dexie: handling persisted pageshow"),vr(),Ro({all:new Bt(-1/0,[[]])}))})),vt.rejectionMapper=function(w,j){return!w||w instanceof ce||w instanceof TypeError||w instanceof SyntaxError||!w.name||!gt[w.name]?w:(j=new gt[w.name](j||w.message,w),"stack"in w&&R(j,"stack",{get:function(){return this.inner.stack}}),j)},Yt(kt),i(lr,Object.freeze({__proto__:null,Dexie:lr,Entity:ts,PropModification:Ia,RangeSet:Bt,add:function(w){return new Ia({add:w})},cmp:Ht,default:lr,liveQuery:Sa,mergeRanges:yn,rangesOverlap:Mn,remove:function(w){return new Ia({remove:w})},replacePrefix:function(w,j){return new Ia({replacePrefix:[w,j]})}}),{default:lr}),lr})})(xp)),xp.exports}var t3=e3();const ty=og(t3),Ib=Symbol.for("Dexie"),Pp=globalThis[Ib]||(globalThis[Ib]=ty);if(ty.semVer!==Pp.semVer)throw new Error(`Two different versions of Dexie loaded in the same app: ${ty.semVer} and ${Pp.semVer}`);const{liveQuery:Az,mergeRanges:Lz,rangesOverlap:Tz,RangeSet:jz,cmp:kz,Entity:Rz,PropModification:Nz,replacePrefix:Dz,add:Mz,remove:Oz,DexieYProvider:Pz}=Pp,Wl=new Pp("FarmManagementDB");Wl.version(3).stores({farms:"id, name",activities:"id, farm_id, activity_type, activity_date, status",crops:"id, farm_id, crop_type, status",fields:"id, farm_id, name",infrastructure:"id, farm_id, name, type",cost_settings:"id, farm_id, category, name",sync_outbox:"++id, method, url, data, timestamp, status"});const Io=async(t,e)=>{let n=e;if(e&&e.data&&!Array.isArray(e)&&(n=e.data),Array.isArray(n)){const i=n.filter(r=>r&&(r.id||r._id));return i.length>0?await Wl[t].bulkPut(i):void 0}if(n&&(n.id||n._id))return await Wl[t].put(n);n&&console.warn(`[DB] Save to ${t} skipped: Object missing primary key (id)`,n)},Pf=async(t,e={})=>{const n=Wl[t],i=Object.keys(e);if(i.length===0)return await n.toArray();const r={};for(const a of i)e[a]!==void 0&&e[a]!==null&&(r[a]=e[a]);return Object.keys(r).length===0?[]:await n.where(r).toArray()},n3=async(t,e,n)=>await Wl.sync_outbox.add({method:t,url:e,data:n,timestamp:new Date().toISOString(),status:"pending"}),i3="/api",zt=Ma.create({baseURL:i3,timeout:6e4,headers:{"Content-Type":"application/json"}});zt.interceptors.request.use(async t=>{const e=localStorage.getItem("token");return e&&(t.headers.Authorization=`Bearer ${e}`),t.data instanceof FormData&&delete t.headers["Content-Type"],!navigator.onLine&&t.method!=="get"&&!t.skipQueue?(console.warn(`[API] Offline detected. Queuing ${t.method.toUpperCase()} ${t.url}`),t.data instanceof FormData?(console.warn("[API] FormData detected while offline. This request will fail and not be queued."),Promise.reject({isOfflineQueue:!1,message:"Cannot process FormData while offline. Please try again when online.",config:t})):(await n3(t.method,t.url,t.data),Promise.reject({isOfflineQueue:!0,message:"Request queued for synchronization"}))):t},t=>Promise.reject(t));zt.interceptors.response.use(async t=>{if(typeof t.data=="string"&&t.data.includes("<html>")&&t.data.includes("__test")){console.error("[API] InfinityFree Security Challenge detected. Handshake required.");const e=new Error("Security Handshake Required");return e.isInfinityFreeChallenge=!0,Promise.reject(e)}if(t.data?.notification){const{showNotification:e}=(await Mr(async()=>{const{default:n}=await Promise.resolve().then(()=>Su);return{default:n}},[])).default.getState();e(t.data.notification.message,t.data.notification.type||"success")}return t},async t=>{if(t.response?.data?.notification){const{showNotification:e,showAlert:n}=(await Mr(async()=>{const{default:r}=await Promise.resolve().then(()=>Su);return{default:r}},void 0)).default.getState(),i=t.response.data.notification;i.type==="error"?n("PROTOCOL ALERT",i.message):e(i.message,i.type)}if(t.response&&t.response.status===401&&(window.location.pathname.includes("/login")||(console.warn("[API] 401 Unauthorized detected. Clearing token and redirecting to login."),localStorage.removeItem("token"),window.location.href="/login")),!t.response&&(console.error("[API] Network Error or Server Unreachable:",t.message),t.code==="ECONNABORTED"||t.message.includes("Network Error"))){const e=new Error("The backend is waking up or unreachable. Please wait 30 seconds and try again.");return e.isColdStart=!0,Promise.reject(e)}if(t.isInfinityFreeChallenge){const{showAlert:e}=(await Mr(async()=>{const{default:n}=await Promise.resolve().then(()=>Su);return{default:n}},void 0)).default.getState();return e("PROTOCOL BREAK: SECURITY HANDSHAKE REQUIRED",`InfinityFree requires a one-time browser verification. Please click the button below to verify your connection, then refresh this page.

After clicking, you should see a "Checking your browser" message for a few seconds.`),Promise.reject(t)}return Promise.reject(t)});const r3=Object.freeze(Object.defineProperty({__proto__:null,default:zt},Symbol.toStringTag,{value:"Module"})),Yh={register:async t=>{const e=await zt.post("/auth/register",t);return e.data.token&&localStorage.setItem("token",e.data.token),e.data},login:async t=>{const e=await zt.post("/auth/login",t);return e.data.token&&localStorage.setItem("token",e.data.token),e.data},logout:()=>{localStorage.removeItem("token")},getCurrentUser:async()=>(await zt.get("/auth/me")).data},tu=$o(t=>({user:null,isAuthenticated:!!localStorage.getItem("token"),loading:!1,error:null,login:async e=>{t({loading:!0,error:null});try{const{user:n}=await Yh.login(e);t({user:n,isAuthenticated:!0,loading:!1})}catch(n){t({error:n.response?.data?.message||n.message||"Login failed",loading:!1})}},register:async e=>{t({loading:!0,error:null});try{const{user:n}=await Yh.register(e);t({user:n,isAuthenticated:!0,loading:!1})}catch(n){t({error:n.response?.data?.message||n.message||"Registration failed",loading:!1})}},logout:()=>{Yh.logout(),t({user:null,isAuthenticated:!1})},checkAuth:async()=>{if(localStorage.getItem("token")){t({loading:!0});try{const e=await Yh.getCurrentUser();t({user:e,isAuthenticated:!0,loading:!1})}catch{t({user:null,isAuthenticated:!1,loading:!1})}}}})),hr=$o((t,e)=>({notification:null,systemMessages:null,modal:{isOpen:!1,type:"alert",title:"",body:"",onConfirm:null,singleAction:!1},fetchSystemMessages:async()=>{try{const i=await(await Mr(async()=>{const{default:r}=await Promise.resolve().then(()=>r3);return{default:r}},void 0)).default.get("/system/messages");t({systemMessages:i.data})}catch(n){console.error("[UIStore] Failed to fetch system messages:",n)}},getConfirmation:n=>{const i=e();return i.systemMessages?.CONFIRMATIONS?i.systemMessages.CONFIRMATIONS[n?.toUpperCase()||"DEFAULT"]:null},getAlert:n=>{const i=e();return i.systemMessages?.ALERTS?i.systemMessages.ALERTS[n?.toUpperCase()||"DEFAULT"]:null},openModal:n=>{t({modal:{isOpen:!0,type:n.type||"alert",title:n.title||"",body:n.body||"",onConfirm:n.onConfirm||null,singleAction:n.singleAction||!1}})},closeModal:()=>{t(n=>({modal:{...n.modal,isOpen:!1,onConfirm:null}}))},confirmAction:()=>{const{modal:n}=e();n.onConfirm&&n.onConfirm(),e().closeModal()},showConfirm:(n,i)=>{const r=e(),a=r.getConfirmation(n);r.openModal({type:"confirm",title:a?a.title:"CONFIRM ACTION",body:a?a.body:"Are you sure you want to proceed?",onConfirm:i,singleAction:!1})},showAlert:(n,i=null)=>{const r=e(),a=r.getAlert(n);a?r.openModal({type:"alert",title:a.title,body:a.body,singleAction:!0}):r.openModal({type:"alert",title:typeof n=="string"?n:"SYSTEM ALERT",body:i||"An unexpected event occurred.",singleAction:!0})},showNotification:(n,i="info")=>{const r=e().notification;r?.timeoutId&&clearTimeout(r.timeoutId);const a=setTimeout(()=>{e().hideNotification()},5e3);t({notification:{message:n,type:i,visible:!0,timeoutId:a}})},hideNotification:()=>{t(n=>({notification:n.notification?{...n.notification,visible:!1}:null}))},clearNotification:()=>{t({notification:null})}})),Su=Object.freeze(Object.defineProperty({__proto__:null,default:hr},Symbol.toStringTag,{value:"Module"})),a3=()=>{const[t,e]=de.useState({email:"",password:""}),{login:n,loading:i,error:r}=tu(),a=bl(),l=p=>{e({...t,[p.target.name]:p.target.value})},d=async p=>{p.preventDefault(),await n(t),tu.getState().isAuthenticated&&a("/")};return u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh",backgroundColor:"var(--bg-main)"},children:u.jsxs("div",{className:"card animate-fade-in",style:{width:"100%",maxWidth:"400px",padding:"40px"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",justifyContent:"center",gap:"8px",marginBottom:"8px"},children:[u.jsx("div",{style:{backgroundColor:"var(--primary)",color:"white",padding:"4px 10px",borderRadius:"6px",fontWeight:"800",fontSize:"20px",letterSpacing:"0.5px"},children:"PRO"}),u.jsx("h2",{style:{fontSize:"24px",fontWeight:"800",color:"var(--text-main)",margin:0,letterSpacing:"-0.5px"},children:"FARMER"})]}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"12px",fontWeight:"600",letterSpacing:"2px",textTransform:"uppercase"},children:"Intelligent Agriculture"})]}),r&&u.jsx("div",{style:{color:"var(--error)",marginBottom:"20px",textAlign:"center",fontSize:"14px",padding:"10px",backgroundColor:"#fee2e2",borderRadius:"4px"},children:r}),u.jsxs("form",{onSubmit:d,children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{htmlFor:"email",children:"Email Address"}),u.jsx("input",{id:"email",type:"email",name:"email",placeholder:"your@email.com",value:t.email,onChange:l,required:!0})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"6px"},children:[u.jsx("label",{htmlFor:"password",style:{margin:0},children:"Password"}),u.jsx(Of,{to:"#",style:{fontSize:"12px",color:"var(--primary)",textDecoration:"none"},children:"Forgot password?"})]}),u.jsx("input",{id:"password",type:"password",name:"password",placeholder:"",value:t.password,onChange:l,required:!0})]}),i?u.jsxs("div",{style:{textAlign:"center",marginTop:"20px"},className:"animate-fade-in",children:[u.jsx("div",{className:"progress-container",children:u.jsx("div",{className:"progress-bar-loading"})}),u.jsxs("p",{style:{fontSize:"12px",color:"var(--primary)",fontWeight:"600",marginTop:"10px",lineHeight:"1.4"},children:["PRO FARMER is preparing your fields.",u.jsx("br",{}),"Please wait while the backend initializes..."]})]}):u.jsx("button",{type:"submit",className:"primary",style:{width:"100%",padding:"12px"},disabled:i,children:"Sign In"})]}),u.jsxs("p",{style:{marginTop:"32px",textAlign:"center",fontSize:"14px",color:"var(--text-muted)"},children:["Don't have an account? ",u.jsx(Of,{to:"/register",style:{color:"var(--primary)",textDecoration:"none",fontWeight:"600"},children:"Create account"})]})]})})},o3=()=>{const[t,e]=de.useState({email:"",password:"",first_name:"",last_name:"",phone:""}),{register:n,loading:i,error:r}=tu(),a=bl(),l=p=>{e({...t,[p.target.name]:p.target.value})},d=async p=>{p.preventDefault(),await n(t),tu.getState().isAuthenticated&&a("/")};return u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh",backgroundColor:"var(--bg-main)",padding:"40px 0"},children:u.jsxs("div",{className:"card animate-fade-in",style:{width:"100%",maxWidth:"480px",padding:"40px"},children:[u.jsxs("div",{style:{textAlign:"center",marginBottom:"32px"},children:[u.jsx("h2",{style:{fontSize:"28px",color:"var(--primary)",marginBottom:"8px"},children:"FARMER PRO"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Join AgriXP to start tracking your farm data"})]}),r&&u.jsx("div",{style:{color:"var(--error)",marginBottom:"20px",textAlign:"center",fontSize:"14px",padding:"10px",backgroundColor:"#fee2e2",borderRadius:"4px"},children:r}),u.jsxs("form",{onSubmit:d,children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"first_name",children:"First Name"}),u.jsx("input",{id:"first_name",type:"text",name:"first_name",value:t.first_name,onChange:l,required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"last_name",children:"Last Name"}),u.jsx("input",{id:"last_name",type:"text",name:"last_name",value:t.last_name,onChange:l,required:!0})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{htmlFor:"email",children:"Email Address"}),u.jsx("input",{id:"email",type:"email",name:"email",value:t.email,onChange:l,required:!0})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{htmlFor:"phone",children:"Phone Number"}),u.jsx("input",{id:"phone",type:"text",name:"phone",value:t.phone,onChange:l})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{htmlFor:"password",children:"Password"}),u.jsx("input",{id:"password",type:"password",name:"password",placeholder:"At least 8 characters",value:t.password,onChange:l,required:!0})]}),u.jsx("button",{type:"submit",className:"primary",style:{width:"100%",padding:"12px"},disabled:i,children:i?"Creating Account...":"Continue to Dashboard"})]}),u.jsxs("p",{style:{marginTop:"32px",textAlign:"center",fontSize:"14px",color:"var(--text-muted)"},children:["Already have an account? ",u.jsx(Of,{to:"/login",style:{color:"var(--primary)",textDecoration:"none",fontWeight:"600"},children:"Sign In here"})]})]})})};function h5(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var a;const l=p=>p===null?null:JSON.parse(p,void 0),d=(a=n.getItem(r))!=null?a:null;return d instanceof Promise?d.then(l):l(d)},setItem:(r,a)=>n.setItem(r,JSON.stringify(a,void 0)),removeItem:r=>n.removeItem(r)}}const ny=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(i){return ny(i)(n)},catch(i){return this}}}catch(n){return{then(i){return this},catch(i){return ny(i)(n)}}}},s3=(t,e)=>(n,i,r)=>{let a={storage:h5(()=>localStorage),partialize:k=>k,version:0,merge:(k,I)=>({...I,...k}),...e},l=!1,d=0;const p=new Set,g=new Set;let m=a.storage;if(!m)return t((...k)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...k)},i,r);const _=()=>{const k=a.partialize({...i()});return m.setItem(a.name,{state:k,version:a.version})},A=r.setState;r.setState=(k,I)=>(A(k,I),_());const x=t((...k)=>(n(...k),_()),i,r);r.getInitialState=()=>x;let R;const M=()=>{var k,I;if(!m)return;const Y=++d;l=!1,p.forEach(V=>{var ee;return V((ee=i())!=null?ee:x)});const B=((I=a.onRehydrateStorage)==null?void 0:I.call(a,(k=i())!=null?k:x))||void 0;return ny(m.getItem.bind(m))(a.name).then(V=>{if(V)if(typeof V.version=="number"&&V.version!==a.version){if(a.migrate){const ee=a.migrate(V.state,V.version);return ee instanceof Promise?ee.then(ue=>[!0,ue]):[!0,ee]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,V.state];return[!1,void 0]}).then(V=>{var ee;if(Y!==d)return;const[ue,_e]=V;if(R=a.merge(_e,(ee=i())!=null?ee:x),n(R,!0),ue)return _()}).then(()=>{Y===d&&(B?.(R,void 0),R=i(),l=!0,g.forEach(V=>V(R)))}).catch(V=>{Y===d&&B?.(void 0,V)})};return r.persist={setOptions:k=>{a={...a,...k},k.storage&&(m=k.storage)},clearStorage:()=>{m?.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>M(),hasHydrated:()=>l,onHydrate:k=>(p.add(k),()=>{p.delete(k)}),onFinishHydration:k=>(g.add(k),()=>{g.delete(k)})},a.skipHydration||M(),R||x},l3=s3,Pi=$o(l3((t,e)=>({farms:[],currentFarm:null,fields:[],loading:!1,fetchFarms:async()=>{t({loading:!0});const n=await Pf("farms");n.length>0&&t(i=>({farms:n,loading:!1,currentFarm:i.currentFarm||n[0]}));try{const i=await zt.get("/farms");await Io("farms",i.data),t(a=>({farms:i.data,loading:!1,currentFarm:a.currentFarm&&i.data.find(l=>l.id===a.currentFarm.id)||i.data[0]}));const r=e().currentFarm;r&&e().fetchFields(r.id)}catch{t({loading:!1})}},setCurrentFarm:n=>{t({currentFarm:n}),n&&e().fetchFields(n.id)},loadFarm:n=>{const i=e().farms.find(r=>r.id===n);i&&e().setCurrentFarm(i)},fetchFields:async(n,i=!1)=>{i||t({loading:!0});const r=await Pf("fields",{farm_id:n});r.length>0&&t(a=>({fields:[...a.fields.filter(l=>l.farm_id!==n),...r],loading:!1}));try{const a=await zt.get(`/farms/${n}/fields`);await Io("fields",a.data),t(l=>({fields:[...l.fields.filter(d=>d.farm_id!==n),...a.data],loading:!1}))}catch{t({loading:!1})}},createFarm:async n=>{try{const i=await zt.post("/farms",n),r=i.data.data||i.data;return t(a=>({farms:[...a.farms,r]})),e().currentFarm||t({currentFarm:r}),i.data}catch(i){throw i}},updateFarm:async(n,i)=>{try{const r=await zt.put(`/farms/${n}`,i),a=r.data.data||r.data;if(!a||!a.id)throw console.error("[Store] updateFarm: Invalid response from API",a),new Error("Invalid response from server");const d=e().farms.map(p=>p.id===n?a:p);return await Io("farms",d),t(p=>({farms:d,currentFarm:p.currentFarm?.id===n?a:p.currentFarm})),r.data}catch(r){throw console.error("[Store] updateFarm error:",r),r}},createField:async(n,i)=>{try{const r=await zt.post(`/farms/${n}/fields`,i),a=r.data.data||r.data;return t(l=>({fields:[...l.fields,a]})),await Io("fields",a),a}catch(r){if(r.isOfflineQueue){const a={...i,id:`temp-${Date.now()}`,farm_id:n,status:"syncing"};return t(l=>({fields:[...l.fields,a]})),await Io("fields",a),a}throw r}},updateField:async(n,i)=>{try{const r=await zt.put(`/fields/${n}`,i),a=r.data.data||r.data;if(!a||!a.id)throw console.error("[Store] updateField: Invalid response from API",a),new Error("Invalid response from server");return t(l=>({fields:l.fields.map(d=>d.id===n?a:d)})),await Io("fields",a),a}catch(r){throw console.error("[Store] updateField error:",r),r}},deleteField:async n=>{try{const i=await zt.delete(`/fields/${n}`);return t(r=>({fields:r.fields.filter(a=>a.id!==n)})),i.data}catch(i){throw i}},deleteFarm:async n=>{try{const i=await zt.delete(`/farms/${n}`),r=e().farms.filter(a=>a.id!==n);return await Io("farms",r),t(a=>({farms:r,currentFarm:a.currentFarm?.id===n?r[0]||null:a.currentFarm,fields:a.fields.filter(l=>l.farm_id!==n)})),i.data}catch(i){throw i}}}),{name:"farm-storage",storage:h5(()=>localStorage),partialize:t=>({currentFarm:t.currentFarm})})),Ls=Object.freeze(Object.defineProperty({__proto__:null,default:Pi},Symbol.toStringTag,{value:"Module"})),vl=$o((t,e)=>({crops:[],currentCrop:null,loading:!1,error:null,fetchCropsByField:async n=>{t({loading:!0,error:null});try{const i=await zt.get(`/fields/${n}/crops`);t({crops:i.data,loading:!1})}catch(i){console.error("[CropStore] Fetch by field error:",i),t({error:i.response?.data?.message||"Failed to fetch crops",loading:!1})}},fetchCropsByFarm:async n=>{t({loading:!0,error:null});try{const i=await zt.get(`/farms/${n}/crops`);t({crops:i.data,loading:!1})}catch(i){console.error("[CropStore] Fetch by farm error:",i),t({error:i.response?.data?.message||"Failed to fetch crops",loading:!1})}},fetchAllCrops:async()=>{t({loading:!0,error:null});try{const n=await zt.get("/crops/all");t({crops:n.data,loading:!1})}catch(n){console.error("[CropStore] Fetch all error:",n),t({error:n.response?.data?.message||"Failed to fetch all crops",loading:!1})}},fetchCropDetails:async n=>{t({loading:!0});try{const i=await zt.get(`/crops/${n}`);return t({currentCrop:i.data,loading:!1}),i.data}catch(i){throw t({loading:!1}),i}},fetchCropTimeline:async n=>{t({loading:!0});try{const i=await zt.get(`/crops/${n}/timeline`);return t({loading:!1}),i.data}catch(i){throw t({loading:!1}),i}},fetchCropProductionCost:async n=>{try{return(await zt.get(`/reports/production-cost/${n}`)).data}catch(i){throw i}},createCrop:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.post(`/fields/${n}/crops`,i),a=r.data.data||r.data,l=(await Mr(async()=>{const{default:d}=await Promise.resolve().then(()=>Ls);return{default:d}},void 0)).default.getState().currentFarm?.id;return l&&await e().fetchCropsByFarm(l),a}catch(r){throw console.error("[CropStore] Create error:",r),t({error:r.response?.data?.message||"Failed to create crop"}),r}finally{t({loading:!1})}},updateCrop:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.put(`/crops/${n}`,i),a=r.data.data||r.data,l=(await Mr(async()=>{const{default:d}=await Promise.resolve().then(()=>Ls);return{default:d}},void 0)).default.getState().currentFarm?.id;return l&&await e().fetchCropsByFarm(l),a}catch(r){throw console.error("[CropStore] Update error:",r),t({error:r.response?.data?.message||"Failed to update crop"}),r}finally{t({loading:!1})}},deleteCrop:async n=>{t({loading:!0,error:null});try{const i=await zt.delete(`/crops/${n}`),r=(await Mr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ls);return{default:a}},void 0)).default.getState().currentFarm?.id;return r&&await e().fetchCropsByFarm(r),i.data}catch(i){throw console.error("[CropStore] Delete error:",i),t({error:i.response?.data?.message||"Failed to delete crop"}),i}finally{t({loading:!1})}}})),Zl=$o((t,e)=>({infrastructure:[],loading:!1,error:null,fetchInfrastructure:async n=>{t({loading:!0,error:null});try{const i=await zt.get(`/infrastructure/farm/${n}`);t({infrastructure:i.data})}catch(i){console.error("[InfrastructureStore] Fetch error:",i),t({error:i.response?.data?.message||"Failed to fetch infrastructure"})}finally{t({loading:!1})}},createInfrastructure:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.post(`/infrastructure/farm/${n}`,i),a=r.data.data||r.data;return await e().fetchInfrastructure(n),a}catch(r){throw console.error("[InfrastructureStore] Create error:",r),t({error:r.response?.data?.message||"Failed to create infrastructure"}),r}finally{t({loading:!1})}},deleteInfrastructure:async n=>{t({loading:!0,error:null});try{const i=await zt.delete(`/infrastructure/${n}`),r=(await Mr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ls);return{default:a}},void 0)).default.getState().currentFarm?.id;return r&&await e().fetchInfrastructure(r),i.data}catch(i){throw console.error("[InfrastructureStore] Delete error:",i),t({error:i.response?.data?.message||"Failed to delete infrastructure"}),i}finally{t({loading:!1})}},updateInfrastructure:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.put(`/infrastructure/${n}`,i),a=r.data.data||r.data,l=(await Mr(async()=>{const{default:d}=await Promise.resolve().then(()=>Ls);return{default:d}},void 0)).default.getState().currentFarm?.id;return l&&await e().fetchInfrastructure(l),a}catch(r){throw console.error("[InfrastructureStore] Update error:",r),t({error:r.response?.data?.message||"Failed to update infrastructure"}),r}finally{t({loading:!1})}}})),Yy=$o((t,e)=>({harvests:[],loading:!1,error:null,fetchHarvestsByCrop:async n=>{t({loading:!0,error:null});try{const i=await zt.get(`/crops/${n}/harvests`);t({harvests:i.data,loading:!1})}catch(i){console.error("[HarvestStore] Fetch by crop error:",i),t({error:i.response?.data?.message||"Failed to fetch harvests",loading:!1})}},fetchHarvestsByFarm:async n=>{t({loading:!0,error:null});try{const i=await zt.get(`/farms/${n}/harvests`);t({harvests:i.data,loading:!1})}catch(i){console.error("[HarvestStore] Fetch by farm error:",i),t({error:i.response?.data?.message||"Failed to fetch harvests",loading:!1})}},fetchAllHarvests:async()=>{t({loading:!0,error:null});try{const n=await zt.get("/harvests/all");t({harvests:n.data||[],loading:!1})}catch(n){console.error("[HarvestStore] Fetch all harvests error:",n),t({error:n.response?.data?.message||"Failed to fetch all harvests",loading:!1,harvests:[]})}},createHarvest:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.post(`/crops/${n}/harvests`,i),a=(await Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ls);return{default:l}},void 0)).default.getState().currentFarm?.id;return a&&await e().fetchHarvestsByFarm(a),r.data}catch(r){throw console.error("[HarvestStore] Create error:",r),t({error:r.response?.data?.message||"Failed to create harvest"}),r}finally{t({loading:!1})}},updateHarvest:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.put(`/harvests/${n}`,i),a=(await Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ls);return{default:l}},void 0)).default.getState().currentFarm?.id;return a&&await e().fetchHarvestsByFarm(a),r.data}catch(r){throw console.error("[HarvestStore] Update error:",r),t({error:r.response?.data?.message||"Failed to update harvest"}),r}finally{t({loading:!1})}},deleteHarvest:async n=>{t({loading:!0,error:null});try{const i=await zt.delete(`/harvests/${n}`);t(a=>({harvests:a.harvests.filter(l=>l.id!==n)}));const r=(await Mr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ls);return{default:a}},void 0)).default.getState().currentFarm?.id;return r&&await e().fetchHarvestsByFarm(r),i.data}catch(i){throw console.error("[HarvestStore] Delete error:",i),t({error:i.response?.data?.message||"Failed to delete harvest"}),i}finally{t({loading:!1})}}})),ml=$o((t,e)=>({activities:[],loading:!1,fetchActivitiesByCrop:async n=>{t({loading:!0});const i=await Pf("activities",{crop_id:n});i.length>0&&t({activities:i,loading:!1});try{const r=await zt.get(`/crops/${n}/activities`);await Io("activities",r.data),t({activities:r.data,loading:!1})}catch{t({loading:!1})}},fetchAllActivities:async()=>{t({loading:!0});try{const n=await zt.get("/activities/all");t({activities:n.data,loading:!1})}catch(n){console.error("[ActivityStore] Fetch all error:",n),t({loading:!1})}},fetchActivitiesByFarm:async n=>{t({loading:!0});const i=await Pf("activities",{farm_id:n});i.length>0&&t({activities:i,loading:!1});try{const r=await zt.get(`/farms/${n}/activities`);await Io("activities",r.data),t({activities:r.data,loading:!1})}catch{t({loading:!1})}},createActivity:async(n,i)=>{try{const r=await zt.post(`/crops/${n}/activities`,i),a=(await Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ls);return{default:l}},void 0)).default.getState().currentFarm?.id;return a&&await e().fetchActivitiesByFarm(a),r.data}catch(r){if(r.isOfflineQueue){const a={...i,id:`temp-${Date.now()}`,crop_id:n,status:"syncing"};return t(l=>({activities:[...l.activities,a]})),await Io("activities",a),a}throw r}},logActivity:async n=>{try{const i=await zt.post("/activities",n),r=(await Mr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ls);return{default:a}},void 0)).default.getState().currentFarm?.id;return r&&await e().fetchActivitiesByFarm(r),i.data}catch(i){if(i.isOfflineQueue){const r={...n,id:`temp-${Date.now()}`,status:"syncing"};return t(a=>({activities:[...a.activities,r]})),await Io("activities",r),r}throw console.error("[ActivityStore] logActivity error details:",{status:i.response?.status,data:i.response?.data,message:i.message}),i}},updateActivity:async(n,i)=>{try{const r=await zt.put(`/activities/${n}`,i),a=(await Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ls);return{default:l}},void 0)).default.getState().currentFarm?.id;return a&&await e().fetchActivitiesByFarm(a),r.data}catch(r){throw console.error("[ActivityStore] updateActivity error details:",{status:r.response?.status,data:r.response?.data,message:r.message}),r}},deleteActivity:async n=>{try{const i=await zt.delete(`/activities/${n}`),r=(await Mr(async()=>{const{default:a}=await Promise.resolve().then(()=>Ls);return{default:a}},void 0)).default.getState().currentFarm?.id;return r&&await e().fetchActivitiesByFarm(r),i.data}catch(i){throw i}},bulkUploadActivities:async(n,i)=>{t({loading:!0});try{if(!n)throw new Error("Farm ID is required for bulk upload");const r=new FormData;r.append("file",i);const a=await zt.post(`/activities/bulk-upload/${n}`,r,{skipQueue:!0});try{const l=await zt.get(`/farms/${n}/activities`);t({activities:l.data,loading:!1})}catch(l){console.error("[ActivityStore] Post-upload sync failed:",l),t({loading:!1})}return a.data}catch(r){throw console.error("[ActivityStore] Bulk upload error details:",{status:r.response?.status,data:r.response?.data,message:r.message}),t({loading:!1}),r}}})),c3=$o(t=>({budgetData:[],loading:!1,error:null,fetchCropBudgets:async e=>{t({loading:!0});try{const n=await zt.get("/reports/crop-budget",{params:{farmId:e}});t({budgetData:n.data,loading:!1})}catch(n){t({error:n.message,loading:!1})}}}));function p5(t,e){const n=de.useRef(e);de.useEffect(function(){e!==n.current&&t.attributionControl!=null&&(n.current!=null&&t.attributionControl.removeAttribution(n.current),e!=null&&t.attributionControl.addAttribution(e)),n.current=e},[t,e])}function u3(t,e,n){e.center!==n.center&&t.setLatLng(e.center),e.radius!=null&&e.radius!==n.radius&&t.setRadius(e.radius)}const d3=1;function f3(t){return Object.freeze({__version:d3,map:t})}function $f(t,e){return Object.freeze({...t,...e})}const Zy=de.createContext(null);function Jf(){const t=de.use(Zy);if(t==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return t}function g5(t){function e(n,i){const{instance:r,context:a}=t(n).current;de.useImperativeHandle(i,()=>r);const{children:l}=n;return l==null?null:ta.createElement(Zy,{value:a},l)}return de.forwardRef(e)}function h3(t){function e(n,i){const[r,a]=de.useState(!1),{instance:l}=t(n,a).current;de.useImperativeHandle(i,()=>l),de.useEffect(function(){r&&l.update()},[l,r,n.children]);const d=l._contentNode;return d?Mp.createPortal(n.children,d):null}return de.forwardRef(e)}function p3(t){function e(n,i){const{instance:r}=t(n).current;return de.useImperativeHandle(i,()=>r),null}return de.forwardRef(e)}function Ky(t,e){const n=de.useRef(void 0);de.useEffect(function(){return e!=null&&t.instance.on(e),n.current=e,function(){n.current!=null&&t.instance.off(n.current),n.current=null}},[t,e])}function pg(t,e){const n=t.pane??e.pane;return n?{...t,pane:n}:t}function g3(t,e){return function(i,r){const a=Jf(),l=t(pg(i,a),a);return p5(a.map,i.attribution),Ky(l.current,i.eventHandlers),e(l.current,a,i,r),l}}var Ef={exports:{}};var m3=Ef.exports,zb;function v3(){return zb||(zb=1,(function(t,e){(function(n,i){i(e)})(m3,(function(n){var i="1.9.4";function r(c){var v,S,N,U;for(S=1,N=arguments.length;S<N;S++){U=arguments[S];for(v in U)c[v]=U[v]}return c}var a=Object.create||(function(){function c(){}return function(v){return c.prototype=v,new c}})();function l(c,v){var S=Array.prototype.slice;if(c.bind)return c.bind.apply(c,S.call(arguments,1));var N=S.call(arguments,2);return function(){return c.apply(v,N.length?N.concat(S.call(arguments)):arguments)}}var d=0;function p(c){return"_leaflet_id"in c||(c._leaflet_id=++d),c._leaflet_id}function g(c,v,S){var N,U,re,ke;return ke=function(){N=!1,U&&(re.apply(S,U),U=!1)},re=function(){N?U=arguments:(c.apply(S,arguments),setTimeout(ke,v),N=!0)},re}function m(c,v,S){var N=v[1],U=v[0],re=N-U;return c===N&&S?c:((c-U)%re+re)%re+U}function _(){return!1}function A(c,v){if(v===!1)return c;var S=Math.pow(10,v===void 0?6:v);return Math.round(c*S)/S}function x(c){return c.trim?c.trim():c.replace(/^\s+|\s+$/g,"")}function R(c){return x(c).split(/\s+/)}function M(c,v){Object.prototype.hasOwnProperty.call(c,"options")||(c.options=c.options?a(c.options):{});for(var S in v)c.options[S]=v[S];return c.options}function k(c,v,S){var N=[];for(var U in c)N.push(encodeURIComponent(S?U.toUpperCase():U)+"="+encodeURIComponent(c[U]));return(!v||v.indexOf("?")===-1?"?":"&")+N.join("&")}var I=/\{ *([\w_ -]+) *\}/g;function Y(c,v){return c.replace(I,function(S,N){var U=v[N];if(U===void 0)throw new Error("No value provided for variable "+S);return typeof U=="function"&&(U=U(v)),U})}var B=Array.isArray||function(c){return Object.prototype.toString.call(c)==="[object Array]"};function V(c,v){for(var S=0;S<c.length;S++)if(c[S]===v)return S;return-1}var ee="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function ue(c){return window["webkit"+c]||window["moz"+c]||window["ms"+c]}var _e=0;function fe(c){var v=+new Date,S=Math.max(0,16-(v-_e));return _e=v+S,window.setTimeout(c,S)}var G=window.requestAnimationFrame||ue("RequestAnimationFrame")||fe,me=window.cancelAnimationFrame||ue("CancelAnimationFrame")||ue("CancelRequestAnimationFrame")||function(c){window.clearTimeout(c)};function Z(c,v,S){if(S&&G===fe)c.call(v);else return G.call(window,l(c,v))}function J(c){c&&me.call(window,c)}var Se={__proto__:null,extend:r,create:a,bind:l,get lastId(){return d},stamp:p,throttle:g,wrapNum:m,falseFn:_,formatNum:A,trim:x,splitWords:R,setOptions:M,getParamString:k,template:Y,isArray:B,indexOf:V,emptyImageUrl:ee,requestFn:G,cancelFn:me,requestAnimFrame:Z,cancelAnimFrame:J};function Ee(){}Ee.extend=function(c){var v=function(){M(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},S=v.__super__=this.prototype,N=a(S);N.constructor=v,v.prototype=N;for(var U in this)Object.prototype.hasOwnProperty.call(this,U)&&U!=="prototype"&&U!=="__super__"&&(v[U]=this[U]);return c.statics&&r(v,c.statics),c.includes&&(Ye(c.includes),r.apply(null,[N].concat(c.includes))),r(N,c),delete N.statics,delete N.includes,N.options&&(N.options=S.options?a(S.options):{},r(N.options,c.options)),N._initHooks=[],N.callInitHooks=function(){if(!this._initHooksCalled){S.callInitHooks&&S.callInitHooks.call(this),this._initHooksCalled=!0;for(var re=0,ke=N._initHooks.length;re<ke;re++)N._initHooks[re].call(this)}},v},Ee.include=function(c){var v=this.prototype.options;return r(this.prototype,c),c.options&&(this.prototype.options=v,this.mergeOptions(c.options)),this},Ee.mergeOptions=function(c){return r(this.prototype.options,c),this},Ee.addInitHook=function(c){var v=Array.prototype.slice.call(arguments,1),S=typeof c=="function"?c:function(){this[c].apply(this,v)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(S),this};function Ye(c){if(!(typeof L>"u"||!L||!L.Mixin)){c=B(c)?c:[c];for(var v=0;v<c.length;v++)c[v]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var oe={on:function(c,v,S){if(typeof c=="object")for(var N in c)this._on(N,c[N],v);else{c=R(c);for(var U=0,re=c.length;U<re;U++)this._on(c[U],v,S)}return this},off:function(c,v,S){if(!arguments.length)delete this._events;else if(typeof c=="object")for(var N in c)this._off(N,c[N],v);else{c=R(c);for(var U=arguments.length===1,re=0,ke=c.length;re<ke;re++)U?this._off(c[re]):this._off(c[re],v,S)}return this},_on:function(c,v,S,N){if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}if(this._listens(c,v,S)===!1){S===this&&(S=void 0);var U={fn:v,ctx:S};N&&(U.once=!0),this._events=this._events||{},this._events[c]=this._events[c]||[],this._events[c].push(U)}},_off:function(c,v,S){var N,U,re;if(this._events&&(N=this._events[c],!!N)){if(arguments.length===1){if(this._firingCount)for(U=0,re=N.length;U<re;U++)N[U].fn=_;delete this._events[c];return}if(typeof v!="function"){console.warn("wrong listener type: "+typeof v);return}var ke=this._listens(c,v,S);if(ke!==!1){var $e=N[ke];this._firingCount&&($e.fn=_,this._events[c]=N=N.slice()),N.splice(ke,1)}}},fire:function(c,v,S){if(!this.listens(c,S))return this;var N=r({},v,{type:c,target:this,sourceTarget:v&&v.sourceTarget||this});if(this._events){var U=this._events[c];if(U){this._firingCount=this._firingCount+1||1;for(var re=0,ke=U.length;re<ke;re++){var $e=U[re],ot=$e.fn;$e.once&&this.off(c,ot,$e.ctx),ot.call($e.ctx||this,N)}this._firingCount--}}return S&&this._propagateEvent(N),this},listens:function(c,v,S,N){typeof c!="string"&&console.warn('"string" type argument expected');var U=v;typeof v!="function"&&(N=!!v,U=void 0,S=void 0);var re=this._events&&this._events[c];if(re&&re.length&&this._listens(c,U,S)!==!1)return!0;if(N){for(var ke in this._eventParents)if(this._eventParents[ke].listens(c,v,S,N))return!0}return!1},_listens:function(c,v,S){if(!this._events)return!1;var N=this._events[c]||[];if(!v)return!!N.length;S===this&&(S=void 0);for(var U=0,re=N.length;U<re;U++)if(N[U].fn===v&&N[U].ctx===S)return U;return!1},once:function(c,v,S){if(typeof c=="object")for(var N in c)this._on(N,c[N],v,!0);else{c=R(c);for(var U=0,re=c.length;U<re;U++)this._on(c[U],v,S,!0)}return this},addEventParent:function(c){return this._eventParents=this._eventParents||{},this._eventParents[p(c)]=c,this},removeEventParent:function(c){return this._eventParents&&delete this._eventParents[p(c)],this},_propagateEvent:function(c){for(var v in this._eventParents)this._eventParents[v].fire(c.type,r({layer:c.target,propagatedFrom:c.target},c),!0)}};oe.addEventListener=oe.on,oe.removeEventListener=oe.clearAllEventListeners=oe.off,oe.addOneTimeEventListener=oe.once,oe.fireEvent=oe.fire,oe.hasEventListeners=oe.listens;var ae=Ee.extend(oe);function he(c,v,S){this.x=S?Math.round(c):c,this.y=S?Math.round(v):v}var De=Math.trunc||function(c){return c>0?Math.floor(c):Math.ceil(c)};he.prototype={clone:function(){return new he(this.x,this.y)},add:function(c){return this.clone()._add(ze(c))},_add:function(c){return this.x+=c.x,this.y+=c.y,this},subtract:function(c){return this.clone()._subtract(ze(c))},_subtract:function(c){return this.x-=c.x,this.y-=c.y,this},divideBy:function(c){return this.clone()._divideBy(c)},_divideBy:function(c){return this.x/=c,this.y/=c,this},multiplyBy:function(c){return this.clone()._multiplyBy(c)},_multiplyBy:function(c){return this.x*=c,this.y*=c,this},scaleBy:function(c){return new he(this.x*c.x,this.y*c.y)},unscaleBy:function(c){return new he(this.x/c.x,this.y/c.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=De(this.x),this.y=De(this.y),this},distanceTo:function(c){c=ze(c);var v=c.x-this.x,S=c.y-this.y;return Math.sqrt(v*v+S*S)},equals:function(c){return c=ze(c),c.x===this.x&&c.y===this.y},contains:function(c){return c=ze(c),Math.abs(c.x)<=Math.abs(this.x)&&Math.abs(c.y)<=Math.abs(this.y)},toString:function(){return"Point("+A(this.x)+", "+A(this.y)+")"}};function ze(c,v,S){return c instanceof he?c:B(c)?new he(c[0],c[1]):c==null?c:typeof c=="object"&&"x"in c&&"y"in c?new he(c.x,c.y):new he(c,v,S)}function ne(c,v){if(c)for(var S=v?[c,v]:c,N=0,U=S.length;N<U;N++)this.extend(S[N])}ne.prototype={extend:function(c){var v,S;if(!c)return this;if(c instanceof he||typeof c[0]=="number"||"x"in c)v=S=ze(c);else if(c=H(c),v=c.min,S=c.max,!v||!S)return this;return!this.min&&!this.max?(this.min=v.clone(),this.max=S.clone()):(this.min.x=Math.min(v.x,this.min.x),this.max.x=Math.max(S.x,this.max.x),this.min.y=Math.min(v.y,this.min.y),this.max.y=Math.max(S.y,this.max.y)),this},getCenter:function(c){return ze((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,c)},getBottomLeft:function(){return ze(this.min.x,this.max.y)},getTopRight:function(){return ze(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(c){var v,S;return typeof c[0]=="number"||c instanceof he?c=ze(c):c=H(c),c instanceof ne?(v=c.min,S=c.max):v=S=c,v.x>=this.min.x&&S.x<=this.max.x&&v.y>=this.min.y&&S.y<=this.max.y},intersects:function(c){c=H(c);var v=this.min,S=this.max,N=c.min,U=c.max,re=U.x>=v.x&&N.x<=S.x,ke=U.y>=v.y&&N.y<=S.y;return re&&ke},overlaps:function(c){c=H(c);var v=this.min,S=this.max,N=c.min,U=c.max,re=U.x>v.x&&N.x<S.x,ke=U.y>v.y&&N.y<S.y;return re&&ke},isValid:function(){return!!(this.min&&this.max)},pad:function(c){var v=this.min,S=this.max,N=Math.abs(v.x-S.x)*c,U=Math.abs(v.y-S.y)*c;return H(ze(v.x-N,v.y-U),ze(S.x+N,S.y+U))},equals:function(c){return c?(c=H(c),this.min.equals(c.getTopLeft())&&this.max.equals(c.getBottomRight())):!1}};function H(c,v){return!c||c instanceof ne?c:new ne(c,v)}function te(c,v){if(c)for(var S=v?[c,v]:c,N=0,U=S.length;N<U;N++)this.extend(S[N])}te.prototype={extend:function(c){var v=this._southWest,S=this._northEast,N,U;if(c instanceof Q)N=c,U=c;else if(c instanceof te){if(N=c._southWest,U=c._northEast,!N||!U)return this}else return c?this.extend(xe(c)||ce(c)):this;return!v&&!S?(this._southWest=new Q(N.lat,N.lng),this._northEast=new Q(U.lat,U.lng)):(v.lat=Math.min(N.lat,v.lat),v.lng=Math.min(N.lng,v.lng),S.lat=Math.max(U.lat,S.lat),S.lng=Math.max(U.lng,S.lng)),this},pad:function(c){var v=this._southWest,S=this._northEast,N=Math.abs(v.lat-S.lat)*c,U=Math.abs(v.lng-S.lng)*c;return new te(new Q(v.lat-N,v.lng-U),new Q(S.lat+N,S.lng+U))},getCenter:function(){return new Q((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new Q(this.getNorth(),this.getWest())},getSouthEast:function(){return new Q(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(c){typeof c[0]=="number"||c instanceof Q||"lat"in c?c=xe(c):c=ce(c);var v=this._southWest,S=this._northEast,N,U;return c instanceof te?(N=c.getSouthWest(),U=c.getNorthEast()):N=U=c,N.lat>=v.lat&&U.lat<=S.lat&&N.lng>=v.lng&&U.lng<=S.lng},intersects:function(c){c=ce(c);var v=this._southWest,S=this._northEast,N=c.getSouthWest(),U=c.getNorthEast(),re=U.lat>=v.lat&&N.lat<=S.lat,ke=U.lng>=v.lng&&N.lng<=S.lng;return re&&ke},overlaps:function(c){c=ce(c);var v=this._southWest,S=this._northEast,N=c.getSouthWest(),U=c.getNorthEast(),re=U.lat>v.lat&&N.lat<S.lat,ke=U.lng>v.lng&&N.lng<S.lng;return re&&ke},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(c,v){return c?(c=ce(c),this._southWest.equals(c.getSouthWest(),v)&&this._northEast.equals(c.getNorthEast(),v)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ce(c,v){return c instanceof te?c:new te(c,v)}function Q(c,v,S){if(isNaN(c)||isNaN(v))throw new Error("Invalid LatLng object: ("+c+", "+v+")");this.lat=+c,this.lng=+v,S!==void 0&&(this.alt=+S)}Q.prototype={equals:function(c,v){if(!c)return!1;c=xe(c);var S=Math.max(Math.abs(this.lat-c.lat),Math.abs(this.lng-c.lng));return S<=(v===void 0?1e-9:v)},toString:function(c){return"LatLng("+A(this.lat,c)+", "+A(this.lng,c)+")"},distanceTo:function(c){return Le.distance(this,xe(c))},wrap:function(){return Le.wrapLatLng(this)},toBounds:function(c){var v=180*c/40075017,S=v/Math.cos(Math.PI/180*this.lat);return ce([this.lat-v,this.lng-S],[this.lat+v,this.lng+S])},clone:function(){return new Q(this.lat,this.lng,this.alt)}};function xe(c,v,S){return c instanceof Q?c:B(c)&&typeof c[0]!="object"?c.length===3?new Q(c[0],c[1],c[2]):c.length===2?new Q(c[0],c[1]):null:c==null?c:typeof c=="object"&&"lat"in c?new Q(c.lat,"lng"in c?c.lng:c.lon,c.alt):v===void 0?null:new Q(c,v,S)}var Te={latLngToPoint:function(c,v){var S=this.projection.project(c),N=this.scale(v);return this.transformation._transform(S,N)},pointToLatLng:function(c,v){var S=this.scale(v),N=this.transformation.untransform(c,S);return this.projection.unproject(N)},project:function(c){return this.projection.project(c)},unproject:function(c){return this.projection.unproject(c)},scale:function(c){return 256*Math.pow(2,c)},zoom:function(c){return Math.log(c/256)/Math.LN2},getProjectedBounds:function(c){if(this.infinite)return null;var v=this.projection.bounds,S=this.scale(c),N=this.transformation.transform(v.min,S),U=this.transformation.transform(v.max,S);return new ne(N,U)},infinite:!1,wrapLatLng:function(c){var v=this.wrapLng?m(c.lng,this.wrapLng,!0):c.lng,S=this.wrapLat?m(c.lat,this.wrapLat,!0):c.lat,N=c.alt;return new Q(S,v,N)},wrapLatLngBounds:function(c){var v=c.getCenter(),S=this.wrapLatLng(v),N=v.lat-S.lat,U=v.lng-S.lng;if(N===0&&U===0)return c;var re=c.getSouthWest(),ke=c.getNorthEast(),$e=new Q(re.lat-N,re.lng-U),ot=new Q(ke.lat-N,ke.lng-U);return new te($e,ot)}},Le=r({},Te,{wrapLng:[-180,180],R:6371e3,distance:function(c,v){var S=Math.PI/180,N=c.lat*S,U=v.lat*S,re=Math.sin((v.lat-c.lat)*S/2),ke=Math.sin((v.lng-c.lng)*S/2),$e=re*re+Math.cos(N)*Math.cos(U)*ke*ke,ot=2*Math.atan2(Math.sqrt($e),Math.sqrt(1-$e));return this.R*ot}}),Ge=6378137,Re={R:Ge,MAX_LATITUDE:85.0511287798,project:function(c){var v=Math.PI/180,S=this.MAX_LATITUDE,N=Math.max(Math.min(S,c.lat),-S),U=Math.sin(N*v);return new he(this.R*c.lng*v,this.R*Math.log((1+U)/(1-U))/2)},unproject:function(c){var v=180/Math.PI;return new Q((2*Math.atan(Math.exp(c.y/this.R))-Math.PI/2)*v,c.x*v/this.R)},bounds:(function(){var c=Ge*Math.PI;return new ne([-c,-c],[c,c])})()};function gt(c,v,S,N){if(B(c)){this._a=c[0],this._b=c[1],this._c=c[2],this._d=c[3];return}this._a=c,this._b=v,this._c=S,this._d=N}gt.prototype={transform:function(c,v){return this._transform(c.clone(),v)},_transform:function(c,v){return v=v||1,c.x=v*(this._a*c.x+this._b),c.y=v*(this._c*c.y+this._d),c},untransform:function(c,v){return v=v||1,new he((c.x/v-this._b)/this._a,(c.y/v-this._d)/this._c)}};function mt(c,v,S,N){return new gt(c,v,S,N)}var Ot=r({},Le,{code:"EPSG:3857",projection:Re,transformation:(function(){var c=.5/(Math.PI*Re.R);return mt(c,.5,-c,.5)})()}),Kt=r({},Ot,{code:"EPSG:900913"});function ye(c){return document.createElementNS("http://www.w3.org/2000/svg",c)}function Pt(c,v){var S="",N,U,re,ke,$e,ot;for(N=0,re=c.length;N<re;N++){for($e=c[N],U=0,ke=$e.length;U<ke;U++)ot=$e[U],S+=(U?"L":"M")+ot.x+" "+ot.y;S+=v?Ut.svg?"z":"x":""}return S||"M0 0"}var Dn=document.documentElement.style,dn="ActiveXObject"in window,At=dn&&!document.addEventListener,sn="msLaunchUri"in navigator&&!("documentMode"in document),kt=si("webkit"),Yt=si("android"),Vt=si("android 2")||si("android 3"),xn=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),kn=Yt&&si("Google")&&xn<537&&!("AudioNode"in window),$t=!!window.opera,Cn=!sn&&si("chrome"),In=si("gecko")&&!kt&&!$t&&!dn,Jt=!Cn&&si("safari"),En=si("phantom"),en="OTransition"in Dn,Ni=navigator.platform.indexOf("Win")===0,Hn=dn&&"transition"in Dn,hn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!Vt,gn="MozPerspective"in Dn,Nt=!window.L_DISABLE_3D&&(Hn||hn||gn)&&!en&&!En,tn=typeof orientation<"u"||si("mobile"),ui=tn&&kt,vn=tn&&hn,vt=!window.PointerEvent&&window.MSPointerEvent,yi=!!(window.PointerEvent||vt),Pn="ontouchstart"in window||!!window.TouchEvent,ln=!window.L_NO_TOUCH&&(Pn||yi),ri=tn&&$t,Ya=tn&&In,ia=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,zo=(function(){var c=!1;try{var v=Object.defineProperty({},"passive",{get:function(){c=!0}});window.addEventListener("testPassiveEventSupport",_,v),window.removeEventListener("testPassiveEventSupport",_,v)}catch{}return c})(),Wr=(function(){return!!document.createElement("canvas").getContext})(),nn=!!(document.createElementNS&&ye("svg").createSVGRect),Ao=!!nn&&(function(){var c=document.createElement("div");return c.innerHTML="<svg/>",(c.firstChild&&c.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"})(),Za=!nn&&(function(){try{var c=document.createElement("div");c.innerHTML='<v:shape adj="1"/>';var v=c.firstChild;return v.style.behavior="url(#default#VML)",v&&typeof v.adj=="object"}catch{return!1}})(),ei=navigator.platform.indexOf("Mac")===0,xi=navigator.platform.indexOf("Linux")===0;function si(c){return navigator.userAgent.toLowerCase().indexOf(c)>=0}var Ut={ie:dn,ielt9:At,edge:sn,webkit:kt,android:Yt,android23:Vt,androidStock:kn,opera:$t,chrome:Cn,gecko:In,safari:Jt,phantom:En,opera12:en,win:Ni,ie3d:Hn,webkit3d:hn,gecko3d:gn,any3d:Nt,mobile:tn,mobileWebkit:ui,mobileWebkit3d:vn,msPointer:vt,pointer:yi,touch:ln,touchNative:Pn,mobileOpera:ri,mobileGecko:Ya,retina:ia,passiveEvents:zo,canvas:Wr,svg:nn,vml:Za,inlineSvg:Ao,mac:ei,linux:xi},nr=Ut.msPointer?"MSPointerDown":"pointerdown",fo=Ut.msPointer?"MSPointerMove":"pointermove",ra=Ut.msPointer?"MSPointerUp":"pointerup",ti=Ut.msPointer?"MSPointerCancel":"pointercancel",bi={touchstart:nr,touchmove:fo,touchend:ra,touchcancel:ti},Zi={touchstart:Or,touchmove:aa,touchend:aa,touchcancel:aa},pr={},Ka=!1;function Oa(c,v,S){return v==="touchstart"&&hi(),Zi[v]?(S=Zi[v].bind(this,S),c.addEventListener(bi[v],S,!1),S):(console.warn("wrong event specified:",v),_)}function ho(c,v,S){if(!bi[v]){console.warn("wrong event specified:",v);return}c.removeEventListener(bi[v],S,!1)}function Gr(c){pr[c.pointerId]=c}function Jo(c){pr[c.pointerId]&&(pr[c.pointerId]=c)}function Pa(c){delete pr[c.pointerId]}function hi(){Ka||(document.addEventListener(nr,Gr,!0),document.addEventListener(fo,Jo,!0),document.addEventListener(ra,Pa,!0),document.addEventListener(ti,Pa,!0),Ka=!0)}function aa(c,v){if(v.pointerType!==(v.MSPOINTER_TYPE_MOUSE||"mouse")){v.touches=[];for(var S in pr)v.touches.push(pr[S]);v.changedTouches=[v],c(v)}}function Or(c,v){v.MSPOINTER_TYPE_TOUCH&&v.pointerType===v.MSPOINTER_TYPE_TOUCH&&Ai(v),aa(c,v)}function ir(c){var v={},S,N;for(N in c)S=c[N],v[N]=S&&S.bind?S.bind(c):S;return c=v,v.type="dblclick",v.detail=2,v.isTrusted=!1,v._simulated=!0,v}var Bo=200;function oa(c,v){c.addEventListener("dblclick",v);var S=0,N;function U(re){if(re.detail!==1){N=re.detail;return}if(!(re.pointerType==="mouse"||re.sourceCapabilities&&!re.sourceCapabilities.firesTouchEvents)){var ke=xa(re);if(!(ke.some(function(ot){return ot instanceof HTMLLabelElement&&ot.attributes.for})&&!ke.some(function(ot){return ot instanceof HTMLInputElement||ot instanceof HTMLSelectElement}))){var $e=Date.now();$e-S<=Bo?(N++,N===2&&v(ir(re))):N=1,S=$e}}}return c.addEventListener("click",U),{dblclick:v,simDblclick:U}}function Xa(c,v){c.removeEventListener("dblclick",v.dblclick),c.removeEventListener("click",v.simDblclick)}var Qa=ns(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),va=ns(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),Ns=va==="webkitTransition"||va==="OTransition"?va+"End":"transitionend";function es(c){return typeof c=="string"?document.getElementById(c):c}function ts(c,v){var S=c.style[v]||c.currentStyle&&c.currentStyle[v];if((!S||S==="auto")&&document.defaultView){var N=document.defaultView.getComputedStyle(c,null);S=N?N[v]:null}return S==="auto"?null:S}function Ht(c,v,S){var N=document.createElement(c);return N.className=v||"",S&&S.appendChild(N),N}function di(c){var v=c.parentNode;v&&v.removeChild(c)}function ya(c){for(;c.firstChild;)c.removeChild(c.firstChild)}function Gn(c){var v=c.parentNode;v&&v.lastChild!==c&&v.appendChild(c)}function Ia(c){var v=c.parentNode;v&&v.firstChild!==c&&v.insertBefore(c,v.firstChild)}function $a(c,v){if(c.classList!==void 0)return c.classList.contains(v);var S=zi(c);return S.length>0&&new RegExp("(^|\\s)"+v+"(\\s|$)").test(S)}function Sn(c,v){if(c.classList!==void 0)for(var S=R(v),N=0,U=S.length;N<U;N++)c.classList.add(S[N]);else if(!$a(c,v)){var re=zi(c);zn(c,(re?re+" ":"")+v)}}function Ii(c,v){c.classList!==void 0?c.classList.remove(v):zn(c,x((" "+zi(c)+" ").replace(" "+v+" "," ")))}function zn(c,v){c.className.baseVal===void 0?c.className=v:c.className.baseVal=v}function zi(c){return c.correspondingElement&&(c=c.correspondingElement),c.className.baseVal===void 0?c.className:c.className.baseVal}function ni(c,v){"opacity"in c.style?c.style.opacity=v:"filter"in c.style&&Lo(c,v)}function Lo(c,v){var S=!1,N="DXImageTransform.Microsoft.Alpha";try{S=c.filters.item(N)}catch{if(v===1)return}v=Math.round(v*100),S?(S.Enabled=v!==100,S.Opacity=v):c.style.filter+=" progid:"+N+"(opacity="+v+")"}function ns(c){for(var v=document.documentElement.style,S=0;S<c.length;S++)if(c[S]in v)return c[S];return!1}function Ja(c,v,S){var N=v||new he(0,0);c.style[Qa]=(Ut.ie3d?"translate("+N.x+"px,"+N.y+"px)":"translate3d("+N.x+"px,"+N.y+"px,0)")+(S?" scale("+S+")":"")}function Xn(c,v){c._leaflet_pos=v,Ut.any3d?Ja(c,v):(c.style.left=v.x+"px",c.style.top=v.y+"px")}function po(c){return c._leaflet_pos||new he(0,0)}var go,sa,is;if("onselectstart"in document)go=function(){Ct(window,"selectstart",Ai)},sa=function(){ai(window,"selectstart",Ai)};else{var Vn=ns(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);go=function(){if(Vn){var c=document.documentElement.style;is=c[Vn],c[Vn]="none"}},sa=function(){Vn&&(document.documentElement.style[Vn]=is,is=void 0)}}function Ds(){Ct(window,"dragstart",Ai)}function Ms(){ai(window,"dragstart",Ai)}var fs,Pr;function gr(c){for(;c.tabIndex===-1;)c=c.parentNode;c.style&&(Vr(),fs=c,Pr=c.style.outlineStyle,c.style.outlineStyle="none",Ct(window,"keydown",Vr))}function Vr(){fs&&(fs.style.outlineStyle=Pr,fs=void 0,Pr=void 0,ai(window,"keydown",Vr))}function Yr(c){do c=c.parentNode;while((!c.offsetWidth||!c.offsetHeight)&&c!==document.body);return c}function Fo(c){var v=c.getBoundingClientRect();return{x:v.width/c.offsetWidth||1,y:v.height/c.offsetHeight||1,boundingClientRect:v}}var rs={__proto__:null,TRANSFORM:Qa,TRANSITION:va,TRANSITION_END:Ns,get:es,getStyle:ts,create:Ht,remove:di,empty:ya,toFront:Gn,toBack:Ia,hasClass:$a,addClass:Sn,removeClass:Ii,setClass:zn,getClass:zi,setOpacity:ni,testProp:ns,setTransform:Ja,setPosition:Xn,getPosition:po,get disableTextSelection(){return go},get enableTextSelection(){return sa},disableImageDrag:Ds,enableImageDrag:Ms,preventOutline:gr,restoreOutline:Vr,getSizedParentNode:Yr,getScale:Fo};function Ct(c,v,S,N){if(v&&typeof v=="object")for(var U in v)Bi(c,U,v[U],S);else{v=R(v);for(var re=0,ke=v.length;re<ke;re++)Bi(c,v[re],S,N)}return this}var rr="_leaflet_events";function ai(c,v,S,N){if(arguments.length===1)as(c),delete c[rr];else if(v&&typeof v=="object")for(var U in v)Os(c,U,v[U],S);else if(v=R(v),arguments.length===2)as(c,function($e){return V(v,$e)!==-1});else for(var re=0,ke=v.length;re<ke;re++)Os(c,v[re],S,N);return this}function as(c,v){for(var S in c[rr]){var N=S.split(/\d/)[0];(!v||v(N))&&Os(c,N,null,null,S)}}var Zr={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Bi(c,v,S,N){var U=v+p(S)+(N?"_"+p(N):"");if(c[rr]&&c[rr][U])return this;var re=function($e){return S.call(N||c,$e||window.event)},ke=re;!Ut.touchNative&&Ut.pointer&&v.indexOf("touch")===0?re=Oa(c,v,re):Ut.touch&&v==="dblclick"?re=oa(c,re):"addEventListener"in c?v==="touchstart"||v==="touchmove"||v==="wheel"||v==="mousewheel"?c.addEventListener(Zr[v]||v,re,Ut.passiveEvents?{passive:!1}:!1):v==="mouseenter"||v==="mouseleave"?(re=function($e){$e=$e||window.event,vo(c,$e)&&ke($e)},c.addEventListener(Zr[v],re,!1)):c.addEventListener(v,ke,!1):c.attachEvent("on"+v,re),c[rr]=c[rr]||{},c[rr][U]=re}function Os(c,v,S,N,U){U=U||v+p(S)+(N?"_"+p(N):"");var re=c[rr]&&c[rr][U];if(!re)return this;!Ut.touchNative&&Ut.pointer&&v.indexOf("touch")===0?ho(c,v,re):Ut.touch&&v==="dblclick"?Xa(c,re):"removeEventListener"in c?c.removeEventListener(Zr[v]||v,re,!1):c.detachEvent("on"+v,re),c[rr][U]=null}function ar(c){return c.stopPropagation?c.stopPropagation():c.originalEvent?c.originalEvent._stopped=!0:c.cancelBubble=!0,this}function Kr(c){return Bi(c,"wheel",ar),this}function mo(c){return Ct(c,"mousedown touchstart dblclick contextmenu",ar),c._leaflet_disable_click=!0,this}function Ai(c){return c.preventDefault?c.preventDefault():c.returnValue=!1,this}function za(c){return Ai(c),ar(c),this}function xa(c){if(c.composedPath)return c.composedPath();for(var v=[],S=c.target;S;)v.push(S),S=S.parentNode;return v}function hs(c,v){if(!v)return new he(c.clientX,c.clientY);var S=Fo(v),N=S.boundingClientRect;return new he((c.clientX-N.left)/S.x-v.clientLeft,(c.clientY-N.top)/S.y-v.clientTop)}var Qs=Ut.linux&&Ut.chrome?window.devicePixelRatio:Ut.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function Qi(c){return Ut.edge?c.wheelDeltaY/2:c.deltaY&&c.deltaMode===0?-c.deltaY/Qs:c.deltaY&&c.deltaMode===1?-c.deltaY*20:c.deltaY&&c.deltaMode===2?-c.deltaY*60:c.deltaX||c.deltaZ?0:c.wheelDelta?(c.wheelDeltaY||c.wheelDelta)/2:c.detail&&Math.abs(c.detail)<32765?-c.detail*20:c.detail?c.detail/-32765*60:0}function vo(c,v){var S=v.relatedTarget;if(!S)return!0;try{for(;S&&S!==c;)S=S.parentNode}catch{return!1}return S!==c}var yo={__proto__:null,on:Ct,off:ai,stopPropagation:ar,disableScrollPropagation:Kr,disableClickPropagation:mo,preventDefault:Ai,stop:za,getPropagationPath:xa,getMousePosition:hs,getWheelDelta:Qi,isExternalTarget:vo,addListener:Ct,removeListener:ai},eo=ae.extend({run:function(c,v,S,N){this.stop(),this._el=c,this._inProgress=!0,this._duration=S||.25,this._easeOutPower=1/Math.max(N||.5,.2),this._startPos=po(c),this._offset=v.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Z(this._animate,this),this._step()},_step:function(c){var v=+new Date-this._startTime,S=this._duration*1e3;v<S?this._runFrame(this._easeOut(v/S),c):(this._runFrame(1),this._complete())},_runFrame:function(c,v){var S=this._startPos.add(this._offset.multiplyBy(c));v&&S._round(),Xn(this._el,S),this.fire("step")},_complete:function(){J(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(c){return 1-Math.pow(1-c,this._easeOutPower)}}),Bn=ae.extend({options:{crs:Ot,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(c,v){v=M(this,v),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(c),this._initLayout(),this._onResize=l(this._onResize,this),this._initEvents(),v.maxBounds&&this.setMaxBounds(v.maxBounds),v.zoom!==void 0&&(this._zoom=this._limitZoom(v.zoom)),v.center&&v.zoom!==void 0&&this.setView(xe(v.center),v.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=va&&Ut.any3d&&!Ut.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),Ct(this._proxy,Ns,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(c,v,S){if(v=v===void 0?this._zoom:this._limitZoom(v),c=this._limitCenter(xe(c),v,this.options.maxBounds),S=S||{},this._stop(),this._loaded&&!S.reset&&S!==!0){S.animate!==void 0&&(S.zoom=r({animate:S.animate},S.zoom),S.pan=r({animate:S.animate,duration:S.duration},S.pan));var N=this._zoom!==v?this._tryAnimatedZoom&&this._tryAnimatedZoom(c,v,S.zoom):this._tryAnimatedPan(c,S.pan);if(N)return clearTimeout(this._sizeTimer),this}return this._resetView(c,v,S.pan&&S.pan.noMoveStart),this},setZoom:function(c,v){return this._loaded?this.setView(this.getCenter(),c,{zoom:v}):(this._zoom=c,this)},zoomIn:function(c,v){return c=c||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+c,v)},zoomOut:function(c,v){return c=c||(Ut.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-c,v)},setZoomAround:function(c,v,S){var N=this.getZoomScale(v),U=this.getSize().divideBy(2),re=c instanceof he?c:this.latLngToContainerPoint(c),ke=re.subtract(U).multiplyBy(1-1/N),$e=this.containerPointToLatLng(U.add(ke));return this.setView($e,v,{zoom:S})},_getBoundsCenterZoom:function(c,v){v=v||{},c=c.getBounds?c.getBounds():ce(c);var S=ze(v.paddingTopLeft||v.padding||[0,0]),N=ze(v.paddingBottomRight||v.padding||[0,0]),U=this.getBoundsZoom(c,!1,S.add(N));if(U=typeof v.maxZoom=="number"?Math.min(v.maxZoom,U):U,U===1/0)return{center:c.getCenter(),zoom:U};var re=N.subtract(S).divideBy(2),ke=this.project(c.getSouthWest(),U),$e=this.project(c.getNorthEast(),U),ot=this.unproject(ke.add($e).divideBy(2).add(re),U);return{center:ot,zoom:U}},fitBounds:function(c,v){if(c=ce(c),!c.isValid())throw new Error("Bounds are not valid.");var S=this._getBoundsCenterZoom(c,v);return this.setView(S.center,S.zoom,v)},fitWorld:function(c){return this.fitBounds([[-90,-180],[90,180]],c)},panTo:function(c,v){return this.setView(c,this._zoom,{pan:v})},panBy:function(c,v){if(c=ze(c).round(),v=v||{},!c.x&&!c.y)return this.fire("moveend");if(v.animate!==!0&&!this.getSize().contains(c))return this._resetView(this.unproject(this.project(this.getCenter()).add(c)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new eo,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),v.noMoveStart||this.fire("movestart"),v.animate!==!1){Sn(this._mapPane,"leaflet-pan-anim");var S=this._getMapPanePos().subtract(c).round();this._panAnim.run(this._mapPane,S,v.duration||.25,v.easeLinearity)}else this._rawPanBy(c),this.fire("move").fire("moveend");return this},flyTo:function(c,v,S){if(S=S||{},S.animate===!1||!Ut.any3d)return this.setView(c,v,S);this._stop();var N=this.project(this.getCenter()),U=this.project(c),re=this.getSize(),ke=this._zoom;c=xe(c),v=v===void 0?ke:v;var $e=Math.max(re.x,re.y),ot=$e*this.getZoomScale(ke,v),bt=U.distanceTo(N)||1,Ft=1.42,an=Ft*Ft;function $n(Ui){var Ir=Ui?-1:1,sl=Ui?ot:$e,ou=ot*ot-$e*$e+Ir*an*an*bt*bt,Tl=2*sl*an*bt,jl=ou/Tl,Us=Math.sqrt(jl*jl+1)-jl,ys=Us<1e-9?-18:Math.log(Us);return ys}function Ta(Ui){return(Math.exp(Ui)-Math.exp(-Ui))/2}function Tr(Ui){return(Math.exp(Ui)+Math.exp(-Ui))/2}function Do(Ui){return Ta(Ui)/Tr(Ui)}var Li=$n(0);function Ti(Ui){return $e*(Tr(Li)/Tr(Li+Ft*Ui))}function ci(Ui){return $e*(Tr(Li)*Do(Li+Ft*Ui)-Ta(Li))/an}function ao(Ui){return 1-Math.pow(1-Ui,1.5)}var Sr=Date.now(),qo=($n(1)-Li)/Ft,Js=S.duration?1e3*S.duration:1e3*qo*.8;function Lc(){var Ui=(Date.now()-Sr)/Js,Ir=ao(Ui)*qo;Ui<=1?(this._flyToFrame=Z(Lc,this),this._move(this.unproject(N.add(U.subtract(N).multiplyBy(ci(Ir)/bt)),ke),this.getScaleZoom($e/Ti(Ir),ke),{flyTo:!0})):this._move(c,v)._moveEnd(!0)}return this._moveStart(!0,S.noMoveStart),Lc.call(this),this},flyToBounds:function(c,v){var S=this._getBoundsCenterZoom(c,v);return this.flyTo(S.center,S.zoom,v)},setMaxBounds:function(c){return c=ce(c),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),c.isValid()?(this.options.maxBounds=c,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(c){var v=this.options.minZoom;return this.options.minZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(c):this},setMaxZoom:function(c){var v=this.options.maxZoom;return this.options.maxZoom=c,this._loaded&&v!==c&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(c):this},panInsideBounds:function(c,v){this._enforcingBounds=!0;var S=this.getCenter(),N=this._limitCenter(S,this._zoom,ce(c));return S.equals(N)||this.panTo(N,v),this._enforcingBounds=!1,this},panInside:function(c,v){v=v||{};var S=ze(v.paddingTopLeft||v.padding||[0,0]),N=ze(v.paddingBottomRight||v.padding||[0,0]),U=this.project(this.getCenter()),re=this.project(c),ke=this.getPixelBounds(),$e=H([ke.min.add(S),ke.max.subtract(N)]),ot=$e.getSize();if(!$e.contains(re)){this._enforcingBounds=!0;var bt=re.subtract($e.getCenter()),Ft=$e.extend(re).getSize().subtract(ot);U.x+=bt.x<0?-Ft.x:Ft.x,U.y+=bt.y<0?-Ft.y:Ft.y,this.panTo(this.unproject(U),v),this._enforcingBounds=!1}return this},invalidateSize:function(c){if(!this._loaded)return this;c=r({animate:!1,pan:!0},c===!0?{animate:!0}:c);var v=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var S=this.getSize(),N=v.divideBy(2).round(),U=S.divideBy(2).round(),re=N.subtract(U);return!re.x&&!re.y?this:(c.animate&&c.pan?this.panBy(re):(c.pan&&this._rawPanBy(re),this.fire("move"),c.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(l(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:v,newSize:S}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(c){if(c=this._locateOptions=r({timeout:1e4,watch:!1},c),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var v=l(this._handleGeolocationResponse,this),S=l(this._handleGeolocationError,this);return c.watch?this._locationWatchId=navigator.geolocation.watchPosition(v,S,c):navigator.geolocation.getCurrentPosition(v,S,c),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(c){if(this._container._leaflet_id){var v=c.code,S=c.message||(v===1?"permission denied":v===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:v,message:"Geolocation error: "+S+"."})}},_handleGeolocationResponse:function(c){if(this._container._leaflet_id){var v=c.coords.latitude,S=c.coords.longitude,N=new Q(v,S),U=N.toBounds(c.coords.accuracy*2),re=this._locateOptions;if(re.setView){var ke=this.getBoundsZoom(U);this.setView(N,re.maxZoom?Math.min(ke,re.maxZoom):ke)}var $e={latlng:N,bounds:U,timestamp:c.timestamp};for(var ot in c.coords)typeof c.coords[ot]=="number"&&($e[ot]=c.coords[ot]);this.fire("locationfound",$e)}},addHandler:function(c,v){if(!v)return this;var S=this[c]=new v(this);return this._handlers.push(S),this.options[c]&&S.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),di(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(J(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var c;for(c in this._layers)this._layers[c].remove();for(c in this._panes)di(this._panes[c]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(c,v){var S="leaflet-pane"+(c?" leaflet-"+c.replace("Pane","")+"-pane":""),N=Ht("div",S,v||this._mapPane);return c&&(this._panes[c]=N),N},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var c=this.getPixelBounds(),v=this.unproject(c.getBottomLeft()),S=this.unproject(c.getTopRight());return new te(v,S)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(c,v,S){c=ce(c),S=ze(S||[0,0]);var N=this.getZoom()||0,U=this.getMinZoom(),re=this.getMaxZoom(),ke=c.getNorthWest(),$e=c.getSouthEast(),ot=this.getSize().subtract(S),bt=H(this.project($e,N),this.project(ke,N)).getSize(),Ft=Ut.any3d?this.options.zoomSnap:1,an=ot.x/bt.x,$n=ot.y/bt.y,Ta=v?Math.max(an,$n):Math.min(an,$n);return N=this.getScaleZoom(Ta,N),Ft&&(N=Math.round(N/(Ft/100))*(Ft/100),N=v?Math.ceil(N/Ft)*Ft:Math.floor(N/Ft)*Ft),Math.max(U,Math.min(re,N))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new he(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(c,v){var S=this._getTopLeftPoint(c,v);return new ne(S,S.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(c){return this.options.crs.getProjectedBounds(c===void 0?this.getZoom():c)},getPane:function(c){return typeof c=="string"?this._panes[c]:c},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(c,v){var S=this.options.crs;return v=v===void 0?this._zoom:v,S.scale(c)/S.scale(v)},getScaleZoom:function(c,v){var S=this.options.crs;v=v===void 0?this._zoom:v;var N=S.zoom(c*S.scale(v));return isNaN(N)?1/0:N},project:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.latLngToPoint(xe(c),v)},unproject:function(c,v){return v=v===void 0?this._zoom:v,this.options.crs.pointToLatLng(ze(c),v)},layerPointToLatLng:function(c){var v=ze(c).add(this.getPixelOrigin());return this.unproject(v)},latLngToLayerPoint:function(c){var v=this.project(xe(c))._round();return v._subtract(this.getPixelOrigin())},wrapLatLng:function(c){return this.options.crs.wrapLatLng(xe(c))},wrapLatLngBounds:function(c){return this.options.crs.wrapLatLngBounds(ce(c))},distance:function(c,v){return this.options.crs.distance(xe(c),xe(v))},containerPointToLayerPoint:function(c){return ze(c).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(c){return ze(c).add(this._getMapPanePos())},containerPointToLatLng:function(c){var v=this.containerPointToLayerPoint(ze(c));return this.layerPointToLatLng(v)},latLngToContainerPoint:function(c){return this.layerPointToContainerPoint(this.latLngToLayerPoint(xe(c)))},mouseEventToContainerPoint:function(c){return hs(c,this._container)},mouseEventToLayerPoint:function(c){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(c))},mouseEventToLatLng:function(c){return this.layerPointToLatLng(this.mouseEventToLayerPoint(c))},_initContainer:function(c){var v=this._container=es(c);if(v){if(v._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");Ct(v,"scroll",this._onScroll,this),this._containerId=p(v)},_initLayout:function(){var c=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ut.any3d,Sn(c,"leaflet-container"+(Ut.touch?" leaflet-touch":"")+(Ut.retina?" leaflet-retina":"")+(Ut.ielt9?" leaflet-oldie":"")+(Ut.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var v=ts(c,"position");v!=="absolute"&&v!=="relative"&&v!=="fixed"&&v!=="sticky"&&(c.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var c=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),Xn(this._mapPane,new he(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(Sn(c.markerPane,"leaflet-zoom-hide"),Sn(c.shadowPane,"leaflet-zoom-hide"))},_resetView:function(c,v,S){Xn(this._mapPane,new he(0,0));var N=!this._loaded;this._loaded=!0,v=this._limitZoom(v),this.fire("viewprereset");var U=this._zoom!==v;this._moveStart(U,S)._move(c,v)._moveEnd(U),this.fire("viewreset"),N&&this.fire("load")},_moveStart:function(c,v){return c&&this.fire("zoomstart"),v||this.fire("movestart"),this},_move:function(c,v,S,N){v===void 0&&(v=this._zoom);var U=this._zoom!==v;return this._zoom=v,this._lastCenter=c,this._pixelOrigin=this._getNewPixelOrigin(c),N?S&&S.pinch&&this.fire("zoom",S):((U||S&&S.pinch)&&this.fire("zoom",S),this.fire("move",S)),this},_moveEnd:function(c){return c&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return J(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(c){Xn(this._mapPane,this._getMapPanePos().subtract(c))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(c){this._targets={},this._targets[p(this._container)]=this;var v=c?ai:Ct;v(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&v(window,"resize",this._onResize,this),Ut.any3d&&this.options.transform3DLimit&&(c?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){J(this._resizeRequest),this._resizeRequest=Z(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var c=this._getMapPanePos();Math.max(Math.abs(c.x),Math.abs(c.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(c,v){for(var S=[],N,U=v==="mouseout"||v==="mouseover",re=c.target||c.srcElement,ke=!1;re;){if(N=this._targets[p(re)],N&&(v==="click"||v==="preclick")&&this._draggableMoved(N)){ke=!0;break}if(N&&N.listens(v,!0)&&(U&&!vo(re,c)||(S.push(N),U))||re===this._container)break;re=re.parentNode}return!S.length&&!ke&&!U&&this.listens(v,!0)&&(S=[this]),S},_isClickDisabled:function(c){for(;c&&c!==this._container;){if(c._leaflet_disable_click)return!0;c=c.parentNode}},_handleDOMEvent:function(c){var v=c.target||c.srcElement;if(!(!this._loaded||v._leaflet_disable_events||c.type==="click"&&this._isClickDisabled(v))){var S=c.type;S==="mousedown"&&gr(v),this._fireDOMEvent(c,S)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(c,v,S){if(c.type==="click"){var N=r({},c);N.type="preclick",this._fireDOMEvent(N,N.type,S)}var U=this._findEventTargets(c,v);if(S){for(var re=[],ke=0;ke<S.length;ke++)S[ke].listens(v,!0)&&re.push(S[ke]);U=re.concat(U)}if(U.length){v==="contextmenu"&&Ai(c);var $e=U[0],ot={originalEvent:c};if(c.type!=="keypress"&&c.type!=="keydown"&&c.type!=="keyup"){var bt=$e.getLatLng&&(!$e._radius||$e._radius<=10);ot.containerPoint=bt?this.latLngToContainerPoint($e.getLatLng()):this.mouseEventToContainerPoint(c),ot.layerPoint=this.containerPointToLayerPoint(ot.containerPoint),ot.latlng=bt?$e.getLatLng():this.layerPointToLatLng(ot.layerPoint)}for(ke=0;ke<U.length;ke++)if(U[ke].fire(v,ot,!0),ot.originalEvent._stopped||U[ke].options.bubblingMouseEvents===!1&&V(this._mouseEvents,v)!==-1)return}},_draggableMoved:function(c){return c=c.dragging&&c.dragging.enabled()?c:this,c.dragging&&c.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var c=0,v=this._handlers.length;c<v;c++)this._handlers[c].disable()},whenReady:function(c,v){return this._loaded?c.call(v||this,{target:this}):this.on("load",c,v),this},_getMapPanePos:function(){return po(this._mapPane)||new he(0,0)},_moved:function(){var c=this._getMapPanePos();return c&&!c.equals([0,0])},_getTopLeftPoint:function(c,v){var S=c&&v!==void 0?this._getNewPixelOrigin(c,v):this.getPixelOrigin();return S.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(c,v){var S=this.getSize()._divideBy(2);return this.project(c,v)._subtract(S)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(c,v,S){var N=this._getNewPixelOrigin(S,v);return this.project(c,v)._subtract(N)},_latLngBoundsToNewLayerBounds:function(c,v,S){var N=this._getNewPixelOrigin(S,v);return H([this.project(c.getSouthWest(),v)._subtract(N),this.project(c.getNorthWest(),v)._subtract(N),this.project(c.getSouthEast(),v)._subtract(N),this.project(c.getNorthEast(),v)._subtract(N)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(c){return this.latLngToLayerPoint(c).subtract(this._getCenterLayerPoint())},_limitCenter:function(c,v,S){if(!S)return c;var N=this.project(c,v),U=this.getSize().divideBy(2),re=new ne(N.subtract(U),N.add(U)),ke=this._getBoundsOffset(re,S,v);return Math.abs(ke.x)<=1&&Math.abs(ke.y)<=1?c:this.unproject(N.add(ke),v)},_limitOffset:function(c,v){if(!v)return c;var S=this.getPixelBounds(),N=new ne(S.min.add(c),S.max.add(c));return c.add(this._getBoundsOffset(N,v))},_getBoundsOffset:function(c,v,S){var N=H(this.project(v.getNorthEast(),S),this.project(v.getSouthWest(),S)),U=N.min.subtract(c.min),re=N.max.subtract(c.max),ke=this._rebound(U.x,-re.x),$e=this._rebound(U.y,-re.y);return new he(ke,$e)},_rebound:function(c,v){return c+v>0?Math.round(c-v)/2:Math.max(0,Math.ceil(c))-Math.max(0,Math.floor(v))},_limitZoom:function(c){var v=this.getMinZoom(),S=this.getMaxZoom(),N=Ut.any3d?this.options.zoomSnap:1;return N&&(c=Math.round(c/N)*N),Math.max(v,Math.min(S,c))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){Ii(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(c,v){var S=this._getCenterOffset(c)._trunc();return(v&&v.animate)!==!0&&!this.getSize().contains(S)?!1:(this.panBy(S,v),!0)},_createAnimProxy:function(){var c=this._proxy=Ht("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(c),this.on("zoomanim",function(v){var S=Qa,N=this._proxy.style[S];Ja(this._proxy,this.project(v.center,v.zoom),this.getZoomScale(v.zoom,1)),N===this._proxy.style[S]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){di(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var c=this.getCenter(),v=this.getZoom();Ja(this._proxy,this.project(c,v),this.getZoomScale(v,1))},_catchTransitionEnd:function(c){this._animatingZoom&&c.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(c,v,S){if(this._animatingZoom)return!0;if(S=S||{},!this._zoomAnimated||S.animate===!1||this._nothingToAnimate()||Math.abs(v-this._zoom)>this.options.zoomAnimationThreshold)return!1;var N=this.getZoomScale(v),U=this._getCenterOffset(c)._divideBy(1-1/N);return S.animate!==!0&&!this.getSize().contains(U)?!1:(Z(function(){this._moveStart(!0,S.noMoveStart||!1)._animateZoom(c,v,!0)},this),!0)},_animateZoom:function(c,v,S,N){this._mapPane&&(S&&(this._animatingZoom=!0,this._animateToCenter=c,this._animateToZoom=v,Sn(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:c,zoom:v,noUpdate:N}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(l(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&Ii(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function os(c,v){return new Bn(c,v)}var Ar=Ee.extend({options:{position:"topright"},initialize:function(c){M(this,c)},getPosition:function(){return this.options.position},setPosition:function(c){var v=this._map;return v&&v.removeControl(this),this.options.position=c,v&&v.addControl(this),this},getContainer:function(){return this._container},addTo:function(c){this.remove(),this._map=c;var v=this._container=this.onAdd(c),S=this.getPosition(),N=c._controlCorners[S];return Sn(v,"leaflet-control"),S.indexOf("bottom")!==-1?N.insertBefore(v,N.firstChild):N.appendChild(v),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(di(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(c){this._map&&c&&c.screenX>0&&c.screenY>0&&this._map.getContainer().focus()}}),to=function(c){return new Ar(c)};Bn.include({addControl:function(c){return c.addTo(this),this},removeControl:function(c){return c.remove(),this},_initControlPos:function(){var c=this._controlCorners={},v="leaflet-",S=this._controlContainer=Ht("div",v+"control-container",this._container);function N(U,re){var ke=v+U+" "+v+re;c[U+re]=Ht("div",ke,S)}N("top","left"),N("top","right"),N("bottom","left"),N("bottom","right")},_clearControlPos:function(){for(var c in this._controlCorners)di(this._controlCorners[c]);di(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var ps=Ar.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(c,v,S,N){return S<N?-1:N<S?1:0}},initialize:function(c,v,S){M(this,S),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var N in c)this._addLayer(c[N],N);for(N in v)this._addLayer(v[N],N,!0)},onAdd:function(c){this._initLayout(),this._update(),this._map=c,c.on("zoomend",this._checkDisabledLayers,this);for(var v=0;v<this._layers.length;v++)this._layers[v].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(c){return Ar.prototype.addTo.call(this,c),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var c=0;c<this._layers.length;c++)this._layers[c].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(c,v){return this._addLayer(c,v),this._map?this._update():this},addOverlay:function(c,v){return this._addLayer(c,v,!0),this._map?this._update():this},removeLayer:function(c){c.off("add remove",this._onLayerChange,this);var v=this._getLayer(p(c));return v&&this._layers.splice(this._layers.indexOf(v),1),this._map?this._update():this},expand:function(){Sn(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var c=this._map.getSize().y-(this._container.offsetTop+50);return c<this._section.clientHeight?(Sn(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=c+"px"):Ii(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return Ii(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var c="leaflet-control-layers",v=this._container=Ht("div",c),S=this.options.collapsed;v.setAttribute("aria-haspopup",!0),mo(v),Kr(v);var N=this._section=Ht("section",c+"-list");S&&(this._map.on("click",this.collapse,this),Ct(v,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var U=this._layersLink=Ht("a",c+"-toggle",v);U.href="#",U.title="Layers",U.setAttribute("role","button"),Ct(U,{keydown:function(re){re.keyCode===13&&this._expandSafely()},click:function(re){Ai(re),this._expandSafely()}},this),S||this.expand(),this._baseLayersList=Ht("div",c+"-base",N),this._separator=Ht("div",c+"-separator",N),this._overlaysList=Ht("div",c+"-overlays",N),v.appendChild(N)},_getLayer:function(c){for(var v=0;v<this._layers.length;v++)if(this._layers[v]&&p(this._layers[v].layer)===c)return this._layers[v]},_addLayer:function(c,v,S){this._map&&c.on("add remove",this._onLayerChange,this),this._layers.push({layer:c,name:v,overlay:S}),this.options.sortLayers&&this._layers.sort(l(function(N,U){return this.options.sortFunction(N.layer,U.layer,N.name,U.name)},this)),this.options.autoZIndex&&c.setZIndex&&(this._lastZIndex++,c.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ya(this._baseLayersList),ya(this._overlaysList),this._layerControlInputs=[];var c,v,S,N,U=0;for(S=0;S<this._layers.length;S++)N=this._layers[S],this._addItem(N),v=v||N.overlay,c=c||!N.overlay,U+=N.overlay?0:1;return this.options.hideSingleBase&&(c=c&&U>1,this._baseLayersList.style.display=c?"":"none"),this._separator.style.display=v&&c?"":"none",this},_onLayerChange:function(c){this._handlingClick||this._update();var v=this._getLayer(p(c.target)),S=v.overlay?c.type==="add"?"overlayadd":"overlayremove":c.type==="add"?"baselayerchange":null;S&&this._map.fire(S,v)},_createRadioElement:function(c,v){var S='<input type="radio" class="leaflet-control-layers-selector" name="'+c+'"'+(v?' checked="checked"':"")+"/>",N=document.createElement("div");return N.innerHTML=S,N.firstChild},_addItem:function(c){var v=document.createElement("label"),S=this._map.hasLayer(c.layer),N;c.overlay?(N=document.createElement("input"),N.type="checkbox",N.className="leaflet-control-layers-selector",N.defaultChecked=S):N=this._createRadioElement("leaflet-base-layers_"+p(this),S),this._layerControlInputs.push(N),N.layerId=p(c.layer),Ct(N,"click",this._onInputClick,this);var U=document.createElement("span");U.innerHTML=" "+c.name;var re=document.createElement("span");v.appendChild(re),re.appendChild(N),re.appendChild(U);var ke=c.overlay?this._overlaysList:this._baseLayersList;return ke.appendChild(v),this._checkDisabledLayers(),v},_onInputClick:function(){if(!this._preventClick){var c=this._layerControlInputs,v,S,N=[],U=[];this._handlingClick=!0;for(var re=c.length-1;re>=0;re--)v=c[re],S=this._getLayer(v.layerId).layer,v.checked?N.push(S):v.checked||U.push(S);for(re=0;re<U.length;re++)this._map.hasLayer(U[re])&&this._map.removeLayer(U[re]);for(re=0;re<N.length;re++)this._map.hasLayer(N[re])||this._map.addLayer(N[re]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var c=this._layerControlInputs,v,S,N=this._map.getZoom(),U=c.length-1;U>=0;U--)v=c[U],S=this._getLayer(v.layerId).layer,v.disabled=S.options.minZoom!==void 0&&N<S.options.minZoom||S.options.maxZoom!==void 0&&N>S.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var c=this._section;this._preventClick=!0,Ct(c,"click",Ai),this.expand();var v=this;setTimeout(function(){ai(c,"click",Ai),v._preventClick=!1})}}),Ps=function(c,v,S){return new ps(c,v,S)},no=Ar.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(c){var v="leaflet-control-zoom",S=Ht("div",v+" leaflet-bar"),N=this.options;return this._zoomInButton=this._createButton(N.zoomInText,N.zoomInTitle,v+"-in",S,this._zoomIn),this._zoomOutButton=this._createButton(N.zoomOutText,N.zoomOutTitle,v+"-out",S,this._zoomOut),this._updateDisabled(),c.on("zoomend zoomlevelschange",this._updateDisabled,this),S},onRemove:function(c){c.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(c){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(c.shiftKey?3:1))},_zoomOut:function(c){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(c.shiftKey?3:1))},_createButton:function(c,v,S,N,U){var re=Ht("a",S,N);return re.innerHTML=c,re.href="#",re.title=v,re.setAttribute("role","button"),re.setAttribute("aria-label",v),mo(re),Ct(re,"click",za),Ct(re,"click",U,this),Ct(re,"click",this._refocusOnMap,this),re},_updateDisabled:function(){var c=this._map,v="leaflet-disabled";Ii(this._zoomInButton,v),Ii(this._zoomOutButton,v),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||c._zoom===c.getMinZoom())&&(Sn(this._zoomOutButton,v),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||c._zoom===c.getMaxZoom())&&(Sn(this._zoomInButton,v),this._zoomInButton.setAttribute("aria-disabled","true"))}});Bn.mergeOptions({zoomControl:!0}),Bn.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new no,this.addControl(this.zoomControl))});var Uo=function(c){return new no(c)},gs=Ar.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(c){var v="leaflet-control-scale",S=Ht("div",v),N=this.options;return this._addScales(N,v+"-line",S),c.on(N.updateWhenIdle?"moveend":"move",this._update,this),c.whenReady(this._update,this),S},onRemove:function(c){c.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(c,v,S){c.metric&&(this._mScale=Ht("div",v,S)),c.imperial&&(this._iScale=Ht("div",v,S))},_update:function(){var c=this._map,v=c.getSize().y/2,S=c.distance(c.containerPointToLatLng([0,v]),c.containerPointToLatLng([this.options.maxWidth,v]));this._updateScales(S)},_updateScales:function(c){this.options.metric&&c&&this._updateMetric(c),this.options.imperial&&c&&this._updateImperial(c)},_updateMetric:function(c){var v=this._getRoundNum(c),S=v<1e3?v+" m":v/1e3+" km";this._updateScale(this._mScale,S,v/c)},_updateImperial:function(c){var v=c*3.2808399,S,N,U;v>5280?(S=v/5280,N=this._getRoundNum(S),this._updateScale(this._iScale,N+" mi",N/S)):(U=this._getRoundNum(v),this._updateScale(this._iScale,U+" ft",U/v))},_updateScale:function(c,v,S){c.style.width=Math.round(this.options.maxWidth*S)+"px",c.innerHTML=v},_getRoundNum:function(c){var v=Math.pow(10,(Math.floor(c)+"").length-1),S=c/v;return S=S>=10?10:S>=5?5:S>=3?3:S>=2?2:1,v*S}}),xo=function(c){return new gs(c)},Is='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',D=Ar.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ut.inlineSvg?Is+" ":"")+"Leaflet</a>"},initialize:function(c){M(this,c),this._attributions={}},onAdd:function(c){c.attributionControl=this,this._container=Ht("div","leaflet-control-attribution"),mo(this._container);for(var v in c._layers)c._layers[v].getAttribution&&this.addAttribution(c._layers[v].getAttribution());return this._update(),c.on("layeradd",this._addAttribution,this),this._container},onRemove:function(c){c.off("layeradd",this._addAttribution,this)},_addAttribution:function(c){c.layer.getAttribution&&(this.addAttribution(c.layer.getAttribution()),c.layer.once("remove",function(){this.removeAttribution(c.layer.getAttribution())},this))},setPrefix:function(c){return this.options.prefix=c,this._update(),this},addAttribution:function(c){return c?(this._attributions[c]||(this._attributions[c]=0),this._attributions[c]++,this._update(),this):this},removeAttribution:function(c){return c?(this._attributions[c]&&(this._attributions[c]--,this._update()),this):this},_update:function(){if(this._map){var c=[];for(var v in this._attributions)this._attributions[v]&&c.push(v);var S=[];this.options.prefix&&S.push(this.options.prefix),c.length&&S.push(c.join(", ")),this._container.innerHTML=S.join(' <span aria-hidden="true">|</span> ')}}});Bn.mergeOptions({attributionControl:!0}),Bn.addInitHook(function(){this.options.attributionControl&&new D().addTo(this)});var K=function(c){return new D(c)};Ar.Layers=ps,Ar.Zoom=no,Ar.Scale=gs,Ar.Attribution=D,to.layers=Ps,to.zoom=Uo,to.scale=xo,to.attribution=K;var we=Ee.extend({initialize:function(c){this._map=c},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});we.addTo=function(c,v){return c.addHandler(v,this),this};var Ie={Events:oe},Ke=Ut.touch?"touchstart mousedown":"mousedown",dt=ae.extend({options:{clickTolerance:3},initialize:function(c,v,S,N){M(this,N),this._element=c,this._dragStartTarget=v||c,this._preventOutline=S},enable:function(){this._enabled||(Ct(this._dragStartTarget,Ke,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(dt._dragging===this&&this.finishDrag(!0),ai(this._dragStartTarget,Ke,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(c){if(this._enabled&&(this._moved=!1,!$a(this._element,"leaflet-zoom-anim"))){if(c.touches&&c.touches.length!==1){dt._dragging===this&&this.finishDrag();return}if(!(dt._dragging||c.shiftKey||c.which!==1&&c.button!==1&&!c.touches)&&(dt._dragging=this,this._preventOutline&&gr(this._element),Ds(),go(),!this._moving)){this.fire("down");var v=c.touches?c.touches[0]:c,S=Yr(this._element);this._startPoint=new he(v.clientX,v.clientY),this._startPos=po(this._element),this._parentScale=Fo(S);var N=c.type==="mousedown";Ct(document,N?"mousemove":"touchmove",this._onMove,this),Ct(document,N?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(c){if(this._enabled){if(c.touches&&c.touches.length>1){this._moved=!0;return}var v=c.touches&&c.touches.length===1?c.touches[0]:c,S=new he(v.clientX,v.clientY)._subtract(this._startPoint);!S.x&&!S.y||Math.abs(S.x)+Math.abs(S.y)<this.options.clickTolerance||(S.x/=this._parentScale.x,S.y/=this._parentScale.y,Ai(c),this._moved||(this.fire("dragstart"),this._moved=!0,Sn(document.body,"leaflet-dragging"),this._lastTarget=c.target||c.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),Sn(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(S),this._moving=!0,this._lastEvent=c,this._updatePosition())}},_updatePosition:function(){var c={originalEvent:this._lastEvent};this.fire("predrag",c),Xn(this._element,this._newPos),this.fire("drag",c)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(c){Ii(document.body,"leaflet-dragging"),this._lastTarget&&(Ii(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),ai(document,"mousemove touchmove",this._onMove,this),ai(document,"mouseup touchend touchcancel",this._onUp,this),Ms(),sa();var v=this._moved&&this._moving;this._moving=!1,dt._dragging=!1,v&&this.fire("dragend",{noInertia:c,distance:this._newPos.distanceTo(this._startPos)})}});function wt(c,v,S){var N,U=[1,4,2,8],re,ke,$e,ot,bt,Ft,an,$n;for(re=0,Ft=c.length;re<Ft;re++)c[re]._code=wr(c[re],v);for($e=0;$e<4;$e++){for(an=U[$e],N=[],re=0,Ft=c.length,ke=Ft-1;re<Ft;ke=re++)ot=c[re],bt=c[ke],ot._code&an?bt._code&an||($n=Ba(bt,ot,an,v,S),$n._code=wr($n,v),N.push($n)):(bt._code&an&&($n=Ba(bt,ot,an,v,S),$n._code=wr($n,v),N.push($n)),N.push(ot));c=N}return c}function Bt(c,v){var S,N,U,re,ke,$e,ot,bt,Ft;if(!c||c.length===0)throw new Error("latlngs not passed");Xr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var an=xe([0,0]),$n=ce(c),Ta=$n.getNorthWest().distanceTo($n.getSouthWest())*$n.getNorthEast().distanceTo($n.getNorthWest());Ta<1700&&(an=Zt(c));var Tr=c.length,Do=[];for(S=0;S<Tr;S++){var Li=xe(c[S]);Do.push(v.project(xe([Li.lat-an.lat,Li.lng-an.lng])))}for($e=ot=bt=0,S=0,N=Tr-1;S<Tr;N=S++)U=Do[S],re=Do[N],ke=U.y*re.x-re.y*U.x,ot+=(U.x+re.x)*ke,bt+=(U.y+re.y)*ke,$e+=ke*3;$e===0?Ft=Do[0]:Ft=[ot/$e,bt/$e];var Ti=v.unproject(ze(Ft));return xe([Ti.lat+an.lat,Ti.lng+an.lng])}function Zt(c){for(var v=0,S=0,N=0,U=0;U<c.length;U++){var re=xe(c[U]);v+=re.lat,S+=re.lng,N++}return xe([v/N,S/N])}var yn={__proto__:null,clipPolygon:wt,polygonCenter:Bt,centroid:Zt};function Mn(c,v){if(!v||!c.length)return c.slice();var S=v*v;return c=mr(c,S),c=or(c,S),c}function Qn(c,v,S){return Math.sqrt(Ho(c,v,S,!0))}function Ki(c,v,S){return Ho(c,v,S)}function or(c,v){var S=c.length,N=typeof Uint8Array<"u"?Uint8Array:Array,U=new N(S);U[0]=U[S-1]=1,pi(c,U,v,0,S-1);var re,ke=[];for(re=0;re<S;re++)U[re]&&ke.push(c[re]);return ke}function pi(c,v,S,N,U){var re=0,ke,$e,ot;for($e=N+1;$e<=U-1;$e++)ot=Ho(c[$e],c[N],c[U],!0),ot>re&&(ke=$e,re=ot);re>S&&(v[ke]=1,pi(c,v,S,N,ke),pi(c,v,S,ke,U))}function mr(c,v){for(var S=[c[0]],N=1,U=0,re=c.length;N<re;N++)To(c[N],c[U])>v&&(S.push(c[N]),U=N);return U<re-1&&S.push(c[re-1]),S}var Di;function _r(c,v,S,N,U){var re=N?Di:wr(c,S),ke=wr(v,S),$e,ot,bt;for(Di=ke;;){if(!(re|ke))return[c,v];if(re&ke)return!1;$e=re||ke,ot=Ba(c,v,$e,S,U),bt=wr(ot,S),$e===re?(c=ot,re=bt):(v=ot,ke=bt)}}function Ba(c,v,S,N,U){var re=v.x-c.x,ke=v.y-c.y,$e=N.min,ot=N.max,bt,Ft;return S&8?(bt=c.x+re*(ot.y-c.y)/ke,Ft=ot.y):S&4?(bt=c.x+re*($e.y-c.y)/ke,Ft=$e.y):S&2?(bt=ot.x,Ft=c.y+ke*(ot.x-c.x)/re):S&1&&(bt=$e.x,Ft=c.y+ke*($e.x-c.x)/re),new he(bt,Ft,U)}function wr(c,v){var S=0;return c.x<v.min.x?S|=1:c.x>v.max.x&&(S|=2),c.y<v.min.y?S|=4:c.y>v.max.y&&(S|=8),S}function To(c,v){var S=v.x-c.x,N=v.y-c.y;return S*S+N*N}function Ho(c,v,S,N){var U=v.x,re=v.y,ke=S.x-U,$e=S.y-re,ot=ke*ke+$e*$e,bt;return ot>0&&(bt=((c.x-U)*ke+(c.y-re)*$e)/ot,bt>1?(U=S.x,re=S.y):bt>0&&(U+=ke*bt,re+=$e*bt)),ke=c.x-U,$e=c.y-re,N?ke*ke+$e*$e:new he(U,re)}function Xr(c){return!B(c[0])||typeof c[0][0]!="object"&&typeof c[0][0]<"u"}function io(c){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),Xr(c)}function ba(c,v){var S,N,U,re,ke,$e,ot,bt;if(!c||c.length===0)throw new Error("latlngs not passed");Xr(c)||(console.warn("latlngs are not flat! Only the first ring will be used"),c=c[0]);var Ft=xe([0,0]),an=ce(c),$n=an.getNorthWest().distanceTo(an.getSouthWest())*an.getNorthEast().distanceTo(an.getNorthWest());$n<1700&&(Ft=Zt(c));var Ta=c.length,Tr=[];for(S=0;S<Ta;S++){var Do=xe(c[S]);Tr.push(v.project(xe([Do.lat-Ft.lat,Do.lng-Ft.lng])))}for(S=0,N=0;S<Ta-1;S++)N+=Tr[S].distanceTo(Tr[S+1])/2;if(N===0)bt=Tr[0];else for(S=0,re=0;S<Ta-1;S++)if(ke=Tr[S],$e=Tr[S+1],U=ke.distanceTo($e),re+=U,re>N){ot=(re-N)/U,bt=[$e.x-ot*($e.x-ke.x),$e.y-ot*($e.y-ke.y)];break}var Li=v.unproject(ze(bt));return xe([Li.lat+Ft.lat,Li.lng+Ft.lng])}var zs={__proto__:null,simplify:Mn,pointToSegmentDistance:Qn,closestPointOnSegment:Ki,clipSegment:_r,_getEdgeIntersection:Ba,_getBitCode:wr,_sqClosestPointOnSegment:Ho,isFlat:Xr,_flat:io,polylineCenter:ba},ro={project:function(c){return new he(c.lng,c.lat)},unproject:function(c){return new Q(c.y,c.x)},bounds:new ne([-180,-90],[180,90])},sr={R:6378137,R_MINOR:6356752314245179e-9,bounds:new ne([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(c){var v=Math.PI/180,S=this.R,N=c.lat*v,U=this.R_MINOR/S,re=Math.sqrt(1-U*U),ke=re*Math.sin(N),$e=Math.tan(Math.PI/4-N/2)/Math.pow((1-ke)/(1+ke),re/2);return N=-S*Math.log(Math.max($e,1e-10)),new he(c.lng*v*S,N)},unproject:function(c){for(var v=180/Math.PI,S=this.R,N=this.R_MINOR/S,U=Math.sqrt(1-N*N),re=Math.exp(-c.y/S),ke=Math.PI/2-2*Math.atan(re),$e=0,ot=.1,bt;$e<15&&Math.abs(ot)>1e-7;$e++)bt=U*Math.sin(ke),bt=Math.pow((1-bt)/(1+bt),U/2),ot=Math.PI/2-2*Math.atan(re*bt)-ke,ke+=ot;return new Q(ke*v,c.x*v/S)}},ms={__proto__:null,LonLat:ro,Mercator:sr,SphericalMercator:Re},ss=r({},Le,{code:"EPSG:3395",projection:sr,transformation:(function(){var c=.5/(Math.PI*sr.R);return mt(c,.5,-c,.5)})()}),Bs=r({},Le,{code:"EPSG:4326",projection:ro,transformation:mt(1/180,1,-1/180,.5)}),jo=r({},Te,{projection:ro,transformation:mt(1,0,-1,0),scale:function(c){return Math.pow(2,c)},zoom:function(c){return Math.log(c)/Math.LN2},distance:function(c,v){var S=v.lng-c.lng,N=v.lat-c.lat;return Math.sqrt(S*S+N*N)},infinite:!0});Te.Earth=Le,Te.EPSG3395=ss,Te.EPSG3857=Ot,Te.EPSG900913=Kt,Te.EPSG4326=Bs,Te.Simple=jo;var Fi=ae.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(c){return c.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(c){return c&&c.removeLayer(this),this},getPane:function(c){return this._map.getPane(c?this.options[c]||c:this.options.pane)},addInteractiveTarget:function(c){return this._map._targets[p(c)]=this,this},removeInteractiveTarget:function(c){return delete this._map._targets[p(c)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(c){var v=c.target;if(v.hasLayer(this)){if(this._map=v,this._zoomAnimated=v._zoomAnimated,this.getEvents){var S=this.getEvents();v.on(S,this),this.once("remove",function(){v.off(S,this)},this)}this.onAdd(v),this.fire("add"),v.fire("layeradd",{layer:this})}}});Bn.include({addLayer:function(c){if(!c._layerAdd)throw new Error("The provided object is not a Layer.");var v=p(c);return this._layers[v]?this:(this._layers[v]=c,c._mapToAdd=this,c.beforeAdd&&c.beforeAdd(this),this.whenReady(c._layerAdd,c),this)},removeLayer:function(c){var v=p(c);return this._layers[v]?(this._loaded&&c.onRemove(this),delete this._layers[v],this._loaded&&(this.fire("layerremove",{layer:c}),c.fire("remove")),c._map=c._mapToAdd=null,this):this},hasLayer:function(c){return p(c)in this._layers},eachLayer:function(c,v){for(var S in this._layers)c.call(v,this._layers[S]);return this},_addLayers:function(c){c=c?B(c)?c:[c]:[];for(var v=0,S=c.length;v<S;v++)this.addLayer(c[v])},_addZoomLimit:function(c){(!isNaN(c.options.maxZoom)||!isNaN(c.options.minZoom))&&(this._zoomBoundLayers[p(c)]=c,this._updateZoomLevels())},_removeZoomLimit:function(c){var v=p(c);this._zoomBoundLayers[v]&&(delete this._zoomBoundLayers[v],this._updateZoomLevels())},_updateZoomLevels:function(){var c=1/0,v=-1/0,S=this._getZoomSpan();for(var N in this._zoomBoundLayers){var U=this._zoomBoundLayers[N].options;c=U.minZoom===void 0?c:Math.min(c,U.minZoom),v=U.maxZoom===void 0?v:Math.max(v,U.maxZoom)}this._layersMaxZoom=v===-1/0?void 0:v,this._layersMinZoom=c===1/0?void 0:c,S!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Fa=Fi.extend({initialize:function(c,v){M(this,v),this._layers={};var S,N;if(c)for(S=0,N=c.length;S<N;S++)this.addLayer(c[S])},addLayer:function(c){var v=this.getLayerId(c);return this._layers[v]=c,this._map&&this._map.addLayer(c),this},removeLayer:function(c){var v=c in this._layers?c:this.getLayerId(c);return this._map&&this._layers[v]&&this._map.removeLayer(this._layers[v]),delete this._layers[v],this},hasLayer:function(c){var v=typeof c=="number"?c:this.getLayerId(c);return v in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(c){var v=Array.prototype.slice.call(arguments,1),S,N;for(S in this._layers)N=this._layers[S],N[c]&&N[c].apply(N,v);return this},onAdd:function(c){this.eachLayer(c.addLayer,c)},onRemove:function(c){this.eachLayer(c.removeLayer,c)},eachLayer:function(c,v){for(var S in this._layers)c.call(v,this._layers[S]);return this},getLayer:function(c){return this._layers[c]},getLayers:function(){var c=[];return this.eachLayer(c.push,c),c},setZIndex:function(c){return this.invoke("setZIndex",c)},getLayerId:function(c){return p(c)}}),Fs=function(c,v){return new Fa(c,v)},_a=Fa.extend({addLayer:function(c){return this.hasLayer(c)?this:(c.addEventParent(this),Fa.prototype.addLayer.call(this,c),this.fire("layeradd",{layer:c}))},removeLayer:function(c){return this.hasLayer(c)?(c in this._layers&&(c=this._layers[c]),c.removeEventParent(this),Fa.prototype.removeLayer.call(this,c),this.fire("layerremove",{layer:c})):this},setStyle:function(c){return this.invoke("setStyle",c)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var c=new te;for(var v in this._layers){var S=this._layers[v];c.extend(S.getBounds?S.getBounds():S.getLatLng())}return c}}),Ua=function(c,v){return new _a(c,v)},Qr=Ee.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(c){M(this,c)},createIcon:function(c){return this._createIcon("icon",c)},createShadow:function(c){return this._createIcon("shadow",c)},_createIcon:function(c,v){var S=this._getIconUrl(c);if(!S){if(c==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var N=this._createImg(S,v&&v.tagName==="IMG"?v:null);return this._setIconStyles(N,c),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),N},_setIconStyles:function(c,v){var S=this.options,N=S[v+"Size"];typeof N=="number"&&(N=[N,N]);var U=ze(N),re=ze(v==="shadow"&&S.shadowAnchor||S.iconAnchor||U&&U.divideBy(2,!0));c.className="leaflet-marker-"+v+" "+(S.className||""),re&&(c.style.marginLeft=-re.x+"px",c.style.marginTop=-re.y+"px"),U&&(c.style.width=U.x+"px",c.style.height=U.y+"px")},_createImg:function(c,v){return v=v||document.createElement("img"),v.src=c,v},_getIconUrl:function(c){return Ut.retina&&this.options[c+"RetinaUrl"]||this.options[c+"Url"]}});function ls(c){return new Qr(c)}var cs=Qr.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(c){return typeof cs.imagePath!="string"&&(cs.imagePath=this._detectIconPath()),(this.options.imagePath||cs.imagePath)+Qr.prototype._getIconUrl.call(this,c)},_stripUrl:function(c){var v=function(S,N,U){var re=N.exec(S);return re&&re[U]};return c=v(c,/^url\((['"])?(.+)\1\)$/,2),c&&v(c,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var c=Ht("div","leaflet-default-icon-path",document.body),v=ts(c,"background-image")||ts(c,"backgroundImage");if(document.body.removeChild(c),v=this._stripUrl(v),v)return v;var S=document.querySelector('link[href$="leaflet.css"]');return S?S.href.substring(0,S.href.length-11-1):""}}),bo=we.extend({initialize:function(c){this._marker=c},addHooks:function(){var c=this._marker._icon;this._draggable||(this._draggable=new dt(c,c,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),Sn(c,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&Ii(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(c){var v=this._marker,S=v._map,N=this._marker.options.autoPanSpeed,U=this._marker.options.autoPanPadding,re=po(v._icon),ke=S.getPixelBounds(),$e=S.getPixelOrigin(),ot=H(ke.min._subtract($e).add(U),ke.max._subtract($e).subtract(U));if(!ot.contains(re)){var bt=ze((Math.max(ot.max.x,re.x)-ot.max.x)/(ke.max.x-ot.max.x)-(Math.min(ot.min.x,re.x)-ot.min.x)/(ke.min.x-ot.min.x),(Math.max(ot.max.y,re.y)-ot.max.y)/(ke.max.y-ot.max.y)-(Math.min(ot.min.y,re.y)-ot.min.y)/(ke.min.y-ot.min.y)).multiplyBy(N);S.panBy(bt,{animate:!1}),this._draggable._newPos._add(bt),this._draggable._startPos._add(bt),Xn(v._icon,this._draggable._newPos),this._onDrag(c),this._panRequest=Z(this._adjustPan.bind(this,c))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(c){this._marker.options.autoPan&&(J(this._panRequest),this._panRequest=Z(this._adjustPan.bind(this,c)))},_onDrag:function(c){var v=this._marker,S=v._shadow,N=po(v._icon),U=v._map.layerPointToLatLng(N);S&&Xn(S,N),v._latlng=U,c.latlng=U,c.oldLatLng=this._oldLatLng,v.fire("move",c).fire("drag",c)},_onDragEnd:function(c){J(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",c)}}),Ha=Fi.extend({options:{icon:new cs,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(c,v){M(this,v),this._latlng=xe(c)},onAdd:function(c){this._zoomAnimated=this._zoomAnimated&&c.options.markerZoomAnimation,this._zoomAnimated&&c.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(c){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&c.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(c){var v=this._latlng;return this._latlng=xe(c),this.update(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},setZIndexOffset:function(c){return this.options.zIndexOffset=c,this.update()},getIcon:function(){return this.options.icon},setIcon:function(c){return this.options.icon=c,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var c=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(c)}return this},_initIcon:function(){var c=this.options,v="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),S=c.icon.createIcon(this._icon),N=!1;S!==this._icon&&(this._icon&&this._removeIcon(),N=!0,c.title&&(S.title=c.title),S.tagName==="IMG"&&(S.alt=c.alt||"")),Sn(S,v),c.keyboard&&(S.tabIndex="0",S.setAttribute("role","button")),this._icon=S,c.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Ct(S,"focus",this._panOnFocus,this);var U=c.icon.createShadow(this._shadow),re=!1;U!==this._shadow&&(this._removeShadow(),re=!0),U&&(Sn(U,v),U.alt=""),this._shadow=U,c.opacity<1&&this._updateOpacity(),N&&this.getPane().appendChild(this._icon),this._initInteraction(),U&&re&&this.getPane(c.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&ai(this._icon,"focus",this._panOnFocus,this),di(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&di(this._shadow),this._shadow=null},_setPos:function(c){this._icon&&Xn(this._icon,c),this._shadow&&Xn(this._shadow,c),this._zIndex=c.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(c){this._icon&&(this._icon.style.zIndex=this._zIndex+c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center).round();this._setPos(v)},_initInteraction:function(){if(this.options.interactive&&(Sn(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),bo)){var c=this.options.draggable;this.dragging&&(c=this.dragging.enabled(),this.dragging.disable()),this.dragging=new bo(this),c&&this.dragging.enable()}},setOpacity:function(c){return this.options.opacity=c,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var c=this.options.opacity;this._icon&&ni(this._icon,c),this._shadow&&ni(this._shadow,c)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var c=this._map;if(c){var v=this.options.icon.options,S=v.iconSize?ze(v.iconSize):ze(0,0),N=v.iconAnchor?ze(v.iconAnchor):ze(0,0);c.panInside(this._latlng,{paddingTopLeft:N,paddingBottomRight:S.subtract(N)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function lr(c,v){return new Ha(c,v)}var Fn=Fi.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(c){this._renderer=c.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(c){return M(this,c),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&c&&Object.prototype.hasOwnProperty.call(c,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),la=Fn.extend({options:{fill:!0,radius:10},initialize:function(c,v){M(this,v),this._latlng=xe(c),this._radius=this.options.radius},setLatLng:function(c){var v=this._latlng;return this._latlng=xe(c),this.redraw(),this.fire("move",{oldLatLng:v,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(c){return this.options.radius=this._radius=c,this.redraw()},getRadius:function(){return this._radius},setStyle:function(c){var v=c&&c.radius||this._radius;return Fn.prototype.setStyle.call(this,c),this.setRadius(v),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var c=this._radius,v=this._radiusY||c,S=this._clickTolerance(),N=[c+S,v+S];this._pxBounds=new ne(this._point.subtract(N),this._point.add(N))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(c){return c.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function wa(c,v){return new la(c,v)}var ko=la.extend({initialize:function(c,v,S){if(typeof v=="number"&&(v=r({},S,{radius:v})),M(this,v),this._latlng=xe(c),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(c){return this._mRadius=c,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var c=[this._radius,this._radiusY||this._radius];return new te(this._map.layerPointToLatLng(this._point.subtract(c)),this._map.layerPointToLatLng(this._point.add(c)))},setStyle:Fn.prototype.setStyle,_project:function(){var c=this._latlng.lng,v=this._latlng.lat,S=this._map,N=S.options.crs;if(N.distance===Le.distance){var U=Math.PI/180,re=this._mRadius/Le.R/U,ke=S.project([v+re,c]),$e=S.project([v-re,c]),ot=ke.add($e).divideBy(2),bt=S.unproject(ot).lat,Ft=Math.acos((Math.cos(re*U)-Math.sin(v*U)*Math.sin(bt*U))/(Math.cos(v*U)*Math.cos(bt*U)))/U;(isNaN(Ft)||Ft===0)&&(Ft=re/Math.cos(Math.PI/180*v)),this._point=ot.subtract(S.getPixelOrigin()),this._radius=isNaN(Ft)?0:ot.x-S.project([bt,c-Ft]).x,this._radiusY=ot.y-ke.y}else{var an=N.unproject(N.project(this._latlng).subtract([this._mRadius,0]));this._point=S.latLngToLayerPoint(this._latlng),this._radius=this._point.x-S.latLngToLayerPoint(an).x}this._updateBounds()}});function vs(c,v,S){return new ko(c,v,S)}var Sa=Fn.extend({options:{smoothFactor:1,noClip:!1},initialize:function(c,v){M(this,v),this._setLatLngs(c)},getLatLngs:function(){return this._latlngs},setLatLngs:function(c){return this._setLatLngs(c),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(c){for(var v=1/0,S=null,N=Ho,U,re,ke=0,$e=this._parts.length;ke<$e;ke++)for(var ot=this._parts[ke],bt=1,Ft=ot.length;bt<Ft;bt++){U=ot[bt-1],re=ot[bt];var an=N(c,U,re,!0);an<v&&(v=an,S=N(c,U,re))}return S&&(S.distance=Math.sqrt(v)),S},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ba(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(c,v){return v=v||this._defaultShape(),c=xe(c),v.push(c),this._bounds.extend(c),this.redraw()},_setLatLngs:function(c){this._bounds=new te,this._latlngs=this._convertLatLngs(c)},_defaultShape:function(){return Xr(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(c){for(var v=[],S=Xr(c),N=0,U=c.length;N<U;N++)S?(v[N]=xe(c[N]),this._bounds.extend(v[N])):v[N]=this._convertLatLngs(c[N]);return v},_project:function(){var c=new ne;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,c),this._bounds.isValid()&&c.isValid()&&(this._rawPxBounds=c,this._updateBounds())},_updateBounds:function(){var c=this._clickTolerance(),v=new he(c,c);this._rawPxBounds&&(this._pxBounds=new ne([this._rawPxBounds.min.subtract(v),this._rawPxBounds.max.add(v)]))},_projectLatlngs:function(c,v,S){var N=c[0]instanceof Q,U=c.length,re,ke;if(N){for(ke=[],re=0;re<U;re++)ke[re]=this._map.latLngToLayerPoint(c[re]),S.extend(ke[re]);v.push(ke)}else for(re=0;re<U;re++)this._projectLatlngs(c[re],v,S)},_clipPoints:function(){var c=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}var v=this._parts,S,N,U,re,ke,$e,ot;for(S=0,U=0,re=this._rings.length;S<re;S++)for(ot=this._rings[S],N=0,ke=ot.length;N<ke-1;N++)$e=_r(ot[N],ot[N+1],c,N,!0),$e&&(v[U]=v[U]||[],v[U].push($e[0]),($e[1]!==ot[N+1]||N===ke-2)&&(v[U].push($e[1]),U++))}},_simplifyPoints:function(){for(var c=this._parts,v=this.options.smoothFactor,S=0,N=c.length;S<N;S++)c[S]=Mn(c[S],v)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(c,v){var S,N,U,re,ke,$e,ot=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(S=0,re=this._parts.length;S<re;S++)for($e=this._parts[S],N=0,ke=$e.length,U=ke-1;N<ke;U=N++)if(!(!v&&N===0)&&Qn(c,$e[U],$e[N])<=ot)return!0;return!1}});function Mi(c,v){return new Sa(c,v)}Sa._flat=io;var Ro=Sa.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Bt(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(c){var v=Sa.prototype._convertLatLngs.call(this,c),S=v.length;return S>=2&&v[0]instanceof Q&&v[0].equals(v[S-1])&&v.pop(),v},_setLatLngs:function(c){Sa.prototype._setLatLngs.call(this,c),Xr(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return Xr(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var c=this._renderer._bounds,v=this.options.weight,S=new he(v,v);if(c=new ne(c.min.subtract(S),c.max.add(S)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(c))){if(this.options.noClip){this._parts=this._rings;return}for(var N=0,U=this._rings.length,re;N<U;N++)re=wt(this._rings[N],c,!0),re.length&&this._parts.push(re)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(c){var v=!1,S,N,U,re,ke,$e,ot,bt;if(!this._pxBounds||!this._pxBounds.contains(c))return!1;for(re=0,ot=this._parts.length;re<ot;re++)for(S=this._parts[re],ke=0,bt=S.length,$e=bt-1;ke<bt;$e=ke++)N=S[ke],U=S[$e],N.y>c.y!=U.y>c.y&&c.x<(U.x-N.x)*(c.y-N.y)/(U.y-N.y)+N.x&&(v=!v);return v||Sa.prototype._containsPoint.call(this,c,!0)}});function Ca(c,v){return new Ro(c,v)}var Wi=_a.extend({initialize:function(c,v){M(this,v),this._layers={},c&&this.addData(c)},addData:function(c){var v=B(c)?c:c.features,S,N,U;if(v){for(S=0,N=v.length;S<N;S++)U=v[S],(U.geometries||U.geometry||U.features||U.coordinates)&&this.addData(U);return this}var re=this.options;if(re.filter&&!re.filter(c))return this;var ke=vr(c,re);return ke?(ke.feature=ge(c),ke.defaultOptions=ke.options,this.resetStyle(ke),re.onEachFeature&&re.onEachFeature(c,ke),this.addLayer(ke)):this},resetStyle:function(c){return c===void 0?this.eachLayer(this.resetStyle,this):(c.options=r({},c.defaultOptions),this._setLayerStyle(c,this.options.style),this)},setStyle:function(c){return this.eachLayer(function(v){this._setLayerStyle(v,c)},this)},_setLayerStyle:function(c,v){c.setStyle&&(typeof v=="function"&&(v=v(c.feature)),c.setStyle(v))}});function vr(c,v){var S=c.type==="Feature"?c.geometry:c,N=S?S.coordinates:null,U=[],re=v&&v.pointToLayer,ke=v&&v.coordsToLatLng||j,$e,ot,bt,Ft;if(!N&&!S)return null;switch(S.type){case"Point":return $e=ke(N),w(re,c,$e,v);case"MultiPoint":for(bt=0,Ft=N.length;bt<Ft;bt++)$e=ke(N[bt]),U.push(w(re,c,$e,v));return new _a(U);case"LineString":case"MultiLineString":return ot=P(N,S.type==="LineString"?0:1,ke),new Sa(ot,v);case"Polygon":case"MultiPolygon":return ot=P(N,S.type==="Polygon"?1:2,ke),new Ro(ot,v);case"GeometryCollection":for(bt=0,Ft=S.geometries.length;bt<Ft;bt++){var an=vr({geometry:S.geometries[bt],type:"Feature",properties:c.properties},v);an&&U.push(an)}return new _a(U);case"FeatureCollection":for(bt=0,Ft=S.features.length;bt<Ft;bt++){var $n=vr(S.features[bt],v);$n&&U.push($n)}return new _a(U);default:throw new Error("Invalid GeoJSON object.")}}function w(c,v,S,N){return c?c(v,S):new Ha(S,N&&N.markersInheritOptions&&N)}function j(c){return new Q(c[1],c[0],c[2])}function P(c,v,S){for(var N=[],U=0,re=c.length,ke;U<re;U++)ke=v?P(c[U],v-1,S):(S||j)(c[U]),N.push(ke);return N}function z(c,v){return c=xe(c),c.alt!==void 0?[A(c.lng,v),A(c.lat,v),A(c.alt,v)]:[A(c.lng,v),A(c.lat,v)]}function W(c,v,S,N){for(var U=[],re=0,ke=c.length;re<ke;re++)U.push(v?W(c[re],Xr(c[re])?0:v-1,S,N):z(c[re],N));return!v&&S&&U.length>0&&U.push(U[0].slice()),U}function $(c,v){return c.feature?r({},c.feature,{geometry:v}):ge(v)}function ge(c){return c.type==="Feature"||c.type==="FeatureCollection"?c:{type:"Feature",properties:{},geometry:c}}var be={toGeoJSON:function(c){return $(this,{type:"Point",coordinates:z(this.getLatLng(),c)})}};Ha.include(be),ko.include(be),la.include(be),Sa.include({toGeoJSON:function(c){var v=!Xr(this._latlngs),S=W(this._latlngs,v?1:0,!1,c);return $(this,{type:(v?"Multi":"")+"LineString",coordinates:S})}}),Ro.include({toGeoJSON:function(c){var v=!Xr(this._latlngs),S=v&&!Xr(this._latlngs[0]),N=W(this._latlngs,S?2:v?1:0,!0,c);return v||(N=[N]),$(this,{type:(S?"Multi":"")+"Polygon",coordinates:N})}}),Fa.include({toMultiPoint:function(c){var v=[];return this.eachLayer(function(S){v.push(S.toGeoJSON(c).geometry.coordinates)}),$(this,{type:"MultiPoint",coordinates:v})},toGeoJSON:function(c){var v=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(v==="MultiPoint")return this.toMultiPoint(c);var S=v==="GeometryCollection",N=[];return this.eachLayer(function(U){if(U.toGeoJSON){var re=U.toGeoJSON(c);if(S)N.push(re.geometry);else{var ke=ge(re);ke.type==="FeatureCollection"?N.push.apply(N,ke.features):N.push(ke)}}}),S?$(this,{geometries:N,type:"GeometryCollection"}):{type:"FeatureCollection",features:N}}});function He(c,v){return new Wi(c,v)}var Ze=He,Be=Fi.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(c,v,S){this._url=c,this._bounds=ce(v),M(this,S)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(Sn(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){di(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(c){return this.options.opacity=c,this._image&&this._updateOpacity(),this},setStyle:function(c){return c.opacity&&this.setOpacity(c.opacity),this},bringToFront:function(){return this._map&&Gn(this._image),this},bringToBack:function(){return this._map&&Ia(this._image),this},setUrl:function(c){return this._url=c,this._image&&(this._image.src=c),this},setBounds:function(c){return this._bounds=ce(c),this._map&&this._reset(),this},getEvents:function(){var c={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var c=this._url.tagName==="IMG",v=this._image=c?this._url:Ht("img");if(Sn(v,"leaflet-image-layer"),this._zoomAnimated&&Sn(v,"leaflet-zoom-animated"),this.options.className&&Sn(v,this.options.className),v.onselectstart=_,v.onmousemove=_,v.onload=l(this.fire,this,"load"),v.onerror=l(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(v.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),c){this._url=v.src;return}v.src=this._url,v.alt=this.options.alt},_animateZoom:function(c){var v=this._map.getZoomScale(c.zoom),S=this._map._latLngBoundsToNewLayerBounds(this._bounds,c.zoom,c.center).min;Ja(this._image,S,v)},_reset:function(){var c=this._image,v=new ne(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),S=v.getSize();Xn(c,v.min),c.style.width=S.x+"px",c.style.height=S.y+"px"},_updateOpacity:function(){ni(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var c=this.options.errorOverlayUrl;c&&this._url!==c&&(this._url=c,this._image.src=c)},getCenter:function(){return this._bounds.getCenter()}}),je=function(c,v,S){return new Be(c,v,S)},Ne=Be.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var c=this._url.tagName==="VIDEO",v=this._image=c?this._url:Ht("video");if(Sn(v,"leaflet-image-layer"),this._zoomAnimated&&Sn(v,"leaflet-zoom-animated"),this.options.className&&Sn(v,this.options.className),v.onselectstart=_,v.onmousemove=_,v.onloadeddata=l(this.fire,this,"load"),c){for(var S=v.getElementsByTagName("source"),N=[],U=0;U<S.length;U++)N.push(S[U].src);this._url=S.length>0?N:[v.src];return}B(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(v.style,"objectFit")&&(v.style.objectFit="fill"),v.autoplay=!!this.options.autoplay,v.loop=!!this.options.loop,v.muted=!!this.options.muted,v.playsInline=!!this.options.playsInline;for(var re=0;re<this._url.length;re++){var ke=Ht("source");ke.src=this._url[re],v.appendChild(ke)}}});function Pe(c,v,S){return new Ne(c,v,S)}var Me=Be.extend({_initImage:function(){var c=this._image=this._url;Sn(c,"leaflet-image-layer"),this._zoomAnimated&&Sn(c,"leaflet-zoom-animated"),this.options.className&&Sn(c,this.options.className),c.onselectstart=_,c.onmousemove=_}});function Ue(c,v,S){return new Me(c,v,S)}var Xe=Fi.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(c,v){c&&(c instanceof Q||B(c))?(this._latlng=xe(c),M(this,v)):(M(this,c),this._source=v),this.options.content&&(this._content=this.options.content)},openOn:function(c){return c=arguments.length?c:this._source._map,c.hasLayer(this)||c.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(c){return this._map?this.close():(arguments.length?this._source=c:c=this._source,this._prepareOpen(),this.openOn(c._map)),this},onAdd:function(c){this._zoomAnimated=c._zoomAnimated,this._container||this._initLayout(),c._fadeAnimated&&ni(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),c._fadeAnimated&&ni(this._container,1),this.bringToFront(),this.options.interactive&&(Sn(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(c){c._fadeAnimated?(ni(this._container,0),this._removeTimeout=setTimeout(l(di,void 0,this._container),200)):di(this._container),this.options.interactive&&(Ii(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(c){return this._latlng=xe(c),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(c){return this._content=c,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var c={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&Gn(this._container),this},bringToBack:function(){return this._map&&Ia(this._container),this},_prepareOpen:function(c){var v=this._source;if(!v._map)return!1;if(v instanceof _a){v=null;var S=this._source._layers;for(var N in S)if(S[N]._map){v=S[N];break}if(!v)return!1;this._source=v}if(!c)if(v.getCenter)c=v.getCenter();else if(v.getLatLng)c=v.getLatLng();else if(v.getBounds)c=v.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(c),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var c=this._contentNode,v=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof v=="string")c.innerHTML=v;else{for(;c.hasChildNodes();)c.removeChild(c.firstChild);c.appendChild(v)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var c=this._map.latLngToLayerPoint(this._latlng),v=ze(this.options.offset),S=this._getAnchor();this._zoomAnimated?Xn(this._container,c.add(S)):v=v.add(c).add(S);var N=this._containerBottom=-v.y,U=this._containerLeft=-Math.round(this._containerWidth/2)+v.x;this._container.style.bottom=N+"px",this._container.style.left=U+"px"}},_getAnchor:function(){return[0,0]}});Bn.include({_initOverlay:function(c,v,S,N){var U=v;return U instanceof c||(U=new c(N).setContent(v)),S&&U.setLatLng(S),U}}),Fi.include({_initOverlay:function(c,v,S,N){var U=S;return U instanceof c?(M(U,N),U._source=this):(U=v&&!N?v:new c(N,this),U.setContent(S)),U}});var nt=Xe.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(c){return c=arguments.length?c:this._source._map,!c.hasLayer(this)&&c._popup&&c._popup.options.autoClose&&c.removeLayer(c._popup),c._popup=this,Xe.prototype.openOn.call(this,c)},onAdd:function(c){Xe.prototype.onAdd.call(this,c),c.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Fn||this._source.on("preclick",ar))},onRemove:function(c){Xe.prototype.onRemove.call(this,c),c.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Fn||this._source.off("preclick",ar))},getEvents:function(){var c=Xe.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(c.preclick=this.close),this.options.keepInView&&(c.moveend=this._adjustPan),c},_initLayout:function(){var c="leaflet-popup",v=this._container=Ht("div",c+" "+(this.options.className||"")+" leaflet-zoom-animated"),S=this._wrapper=Ht("div",c+"-content-wrapper",v);if(this._contentNode=Ht("div",c+"-content",S),mo(v),Kr(this._contentNode),Ct(v,"contextmenu",ar),this._tipContainer=Ht("div",c+"-tip-container",v),this._tip=Ht("div",c+"-tip",this._tipContainer),this.options.closeButton){var N=this._closeButton=Ht("a",c+"-close-button",v);N.setAttribute("role","button"),N.setAttribute("aria-label","Close popup"),N.href="#close",N.innerHTML='<span aria-hidden="true">&#215;</span>',Ct(N,"click",function(U){Ai(U),this.close()},this)}},_updateLayout:function(){var c=this._contentNode,v=c.style;v.width="",v.whiteSpace="nowrap";var S=c.offsetWidth;S=Math.min(S,this.options.maxWidth),S=Math.max(S,this.options.minWidth),v.width=S+1+"px",v.whiteSpace="",v.height="";var N=c.offsetHeight,U=this.options.maxHeight,re="leaflet-popup-scrolled";U&&N>U?(v.height=U+"px",Sn(c,re)):Ii(c,re),this._containerWidth=this._container.offsetWidth},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center),S=this._getAnchor();Xn(this._container,v.add(S))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var c=this._map,v=parseInt(ts(this._container,"marginBottom"),10)||0,S=this._container.offsetHeight+v,N=this._containerWidth,U=new he(this._containerLeft,-S-this._containerBottom);U._add(po(this._container));var re=c.layerPointToContainerPoint(U),ke=ze(this.options.autoPanPadding),$e=ze(this.options.autoPanPaddingTopLeft||ke),ot=ze(this.options.autoPanPaddingBottomRight||ke),bt=c.getSize(),Ft=0,an=0;re.x+N+ot.x>bt.x&&(Ft=re.x+N-bt.x+ot.x),re.x-Ft-$e.x<0&&(Ft=re.x-$e.x),re.y+S+ot.y>bt.y&&(an=re.y+S-bt.y+ot.y),re.y-an-$e.y<0&&(an=re.y-$e.y),(Ft||an)&&(this.options.keepInView&&(this._autopanning=!0),c.fire("autopanstart").panBy([Ft,an]))}},_getAnchor:function(){return ze(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Qe=function(c,v){return new nt(c,v)};Bn.mergeOptions({closePopupOnClick:!0}),Bn.include({openPopup:function(c,v,S){return this._initOverlay(nt,c,v,S).openOn(this),this},closePopup:function(c){return c=arguments.length?c:this._popup,c&&c.close(),this}}),Fi.include({bindPopup:function(c,v){return this._popup=this._initOverlay(nt,this._popup,c,v),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(c){return this._popup&&(this instanceof _a||(this._popup._source=this),this._popup._prepareOpen(c||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(c){return this._popup&&this._popup.setContent(c),this},getPopup:function(){return this._popup},_openPopup:function(c){if(!(!this._popup||!this._map)){za(c);var v=c.layer||c.target;if(this._popup._source===v&&!(v instanceof Fn)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(c.latlng);return}this._popup._source=v,this.openPopup(c.latlng)}},_movePopup:function(c){this._popup.setLatLng(c.latlng)},_onKeyPress:function(c){c.originalEvent.keyCode===13&&this._openPopup(c)}});var ft=Xe.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(c){Xe.prototype.onAdd.call(this,c),this.setOpacity(this.options.opacity),c.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(c){Xe.prototype.onRemove.call(this,c),c.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var c=Xe.prototype.getEvents.call(this);return this.options.permanent||(c.preclick=this.close),c},_initLayout:function(){var c="leaflet-tooltip",v=c+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=Ht("div",v),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(c){var v,S,N=this._map,U=this._container,re=N.latLngToContainerPoint(N.getCenter()),ke=N.layerPointToContainerPoint(c),$e=this.options.direction,ot=U.offsetWidth,bt=U.offsetHeight,Ft=ze(this.options.offset),an=this._getAnchor();$e==="top"?(v=ot/2,S=bt):$e==="bottom"?(v=ot/2,S=0):$e==="center"?(v=ot/2,S=bt/2):$e==="right"?(v=0,S=bt/2):$e==="left"?(v=ot,S=bt/2):ke.x<re.x?($e="right",v=0,S=bt/2):($e="left",v=ot+(Ft.x+an.x)*2,S=bt/2),c=c.subtract(ze(v,S,!0)).add(Ft).add(an),Ii(U,"leaflet-tooltip-right"),Ii(U,"leaflet-tooltip-left"),Ii(U,"leaflet-tooltip-top"),Ii(U,"leaflet-tooltip-bottom"),Sn(U,"leaflet-tooltip-"+$e),Xn(U,c)},_updatePosition:function(){var c=this._map.latLngToLayerPoint(this._latlng);this._setPosition(c)},setOpacity:function(c){this.options.opacity=c,this._container&&ni(this._container,c)},_animateZoom:function(c){var v=this._map._latLngToNewLayerPoint(this._latlng,c.zoom,c.center);this._setPosition(v)},_getAnchor:function(){return ze(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Tt=function(c,v){return new ft(c,v)};Bn.include({openTooltip:function(c,v,S){return this._initOverlay(ft,c,v,S).openOn(this),this},closeTooltip:function(c){return c.close(),this}}),Fi.include({bindTooltip:function(c,v){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(ft,this._tooltip,c,v),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(c){if(!(!c&&this._tooltipHandlersAdded)){var v=c?"off":"on",S={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?S.add=this._openTooltip:(S.mouseover=this._openTooltip,S.mouseout=this.closeTooltip,S.click=this._openTooltip,this._map?this._addFocusListeners():S.add=this._addFocusListeners),this._tooltip.options.sticky&&(S.mousemove=this._moveTooltip),this[v](S),this._tooltipHandlersAdded=!c}},openTooltip:function(c){return this._tooltip&&(this instanceof _a||(this._tooltip._source=this),this._tooltip._prepareOpen(c)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(c){return this._tooltip&&this._tooltip.setContent(c),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&(Ct(v,"focus",function(){this._tooltip._source=c,this.openTooltip()},this),Ct(v,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(c){var v=typeof c.getElement=="function"&&c.getElement();v&&v.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(c){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var v=this;this._map.once("moveend",function(){v._openOnceFlag=!1,v._openTooltip(c)});return}this._tooltip._source=c.layer||c.target,this.openTooltip(this._tooltip.options.sticky?c.latlng:void 0)}},_moveTooltip:function(c){var v=c.latlng,S,N;this._tooltip.options.sticky&&c.originalEvent&&(S=this._map.mouseEventToContainerPoint(c.originalEvent),N=this._map.containerPointToLayerPoint(S),v=this._map.layerPointToLatLng(N)),this._tooltip.setLatLng(v)}});var Dt=Qr.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(c){var v=c&&c.tagName==="DIV"?c:document.createElement("div"),S=this.options;if(S.html instanceof Element?(ya(v),v.appendChild(S.html)):v.innerHTML=S.html!==!1?S.html:"",S.bgPos){var N=ze(S.bgPos);v.style.backgroundPosition=-N.x+"px "+-N.y+"px"}return this._setIconStyles(v,"icon"),v},createShadow:function(){return null}});function It(c){return new Dt(c)}Qr.Default=cs;var Lt=Fi.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ut.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(c){M(this,c)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(c){c._addZoomLimit(this)},onRemove:function(c){this._removeAllTiles(),di(this._container),c._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(Gn(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(Ia(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(c){return this.options.opacity=c,this._updateOpacity(),this},setZIndex:function(c){return this.options.zIndex=c,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var c=this._clampZoom(this._map.getZoom());c!==this._tileZoom&&(this._tileZoom=c,this._updateLevels()),this._update()}return this},getEvents:function(){var c={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=g(this._onMoveEnd,this.options.updateInterval,this)),c.move=this._onMove),this._zoomAnimated&&(c.zoomanim=this._animateZoom),c},createTile:function(){return document.createElement("div")},getTileSize:function(){var c=this.options.tileSize;return c instanceof he?c:new he(c,c)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(c){for(var v=this.getPane().children,S=-c(-1/0,1/0),N=0,U=v.length,re;N<U;N++)re=v[N].style.zIndex,v[N]!==this._container&&re&&(S=c(S,+re));isFinite(S)&&(this.options.zIndex=S+c(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ut.ielt9){ni(this._container,this.options.opacity);var c=+new Date,v=!1,S=!1;for(var N in this._tiles){var U=this._tiles[N];if(!(!U.current||!U.loaded)){var re=Math.min(1,(c-U.loaded)/200);ni(U.el,re),re<1?v=!0:(U.active?S=!0:this._onOpaqueTile(U),U.active=!0)}}S&&!this._noPrune&&this._pruneTiles(),v&&(J(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this))}},_onOpaqueTile:_,_initContainer:function(){this._container||(this._container=Ht("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var c=this._tileZoom,v=this.options.maxZoom;if(c!==void 0){for(var S in this._levels)S=Number(S),this._levels[S].el.children.length||S===c?(this._levels[S].el.style.zIndex=v-Math.abs(c-S),this._onUpdateLevel(S)):(di(this._levels[S].el),this._removeTilesAtZoom(S),this._onRemoveLevel(S),delete this._levels[S]);var N=this._levels[c],U=this._map;return N||(N=this._levels[c]={},N.el=Ht("div","leaflet-tile-container leaflet-zoom-animated",this._container),N.el.style.zIndex=v,N.origin=U.project(U.unproject(U.getPixelOrigin()),c).round(),N.zoom=c,this._setZoomTransform(N,U.getCenter(),U.getZoom()),_(N.el.offsetWidth),this._onCreateLevel(N)),this._level=N,N}},_onUpdateLevel:_,_onRemoveLevel:_,_onCreateLevel:_,_pruneTiles:function(){if(this._map){var c,v,S=this._map.getZoom();if(S>this.options.maxZoom||S<this.options.minZoom){this._removeAllTiles();return}for(c in this._tiles)v=this._tiles[c],v.retain=v.current;for(c in this._tiles)if(v=this._tiles[c],v.current&&!v.active){var N=v.coords;this._retainParent(N.x,N.y,N.z,N.z-5)||this._retainChildren(N.x,N.y,N.z,N.z+2)}for(c in this._tiles)this._tiles[c].retain||this._removeTile(c)}},_removeTilesAtZoom:function(c){for(var v in this._tiles)this._tiles[v].coords.z===c&&this._removeTile(v)},_removeAllTiles:function(){for(var c in this._tiles)this._removeTile(c)},_invalidateAll:function(){for(var c in this._levels)di(this._levels[c].el),this._onRemoveLevel(Number(c)),delete this._levels[c];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(c,v,S,N){var U=Math.floor(c/2),re=Math.floor(v/2),ke=S-1,$e=new he(+U,+re);$e.z=+ke;var ot=this._tileCoordsToKey($e),bt=this._tiles[ot];return bt&&bt.active?(bt.retain=!0,!0):(bt&&bt.loaded&&(bt.retain=!0),ke>N?this._retainParent(U,re,ke,N):!1)},_retainChildren:function(c,v,S,N){for(var U=2*c;U<2*c+2;U++)for(var re=2*v;re<2*v+2;re++){var ke=new he(U,re);ke.z=S+1;var $e=this._tileCoordsToKey(ke),ot=this._tiles[$e];if(ot&&ot.active){ot.retain=!0;continue}else ot&&ot.loaded&&(ot.retain=!0);S+1<N&&this._retainChildren(U,re,S+1,N)}},_resetView:function(c){var v=c&&(c.pinch||c.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),v,v)},_animateZoom:function(c){this._setView(c.center,c.zoom,!0,c.noUpdate)},_clampZoom:function(c){var v=this.options;return v.minNativeZoom!==void 0&&c<v.minNativeZoom?v.minNativeZoom:v.maxNativeZoom!==void 0&&v.maxNativeZoom<c?v.maxNativeZoom:c},_setView:function(c,v,S,N){var U=Math.round(v);this.options.maxZoom!==void 0&&U>this.options.maxZoom||this.options.minZoom!==void 0&&U<this.options.minZoom?U=void 0:U=this._clampZoom(U);var re=this.options.updateWhenZooming&&U!==this._tileZoom;(!N||re)&&(this._tileZoom=U,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),U!==void 0&&this._update(c),S||this._pruneTiles(),this._noPrune=!!S),this._setZoomTransforms(c,v)},_setZoomTransforms:function(c,v){for(var S in this._levels)this._setZoomTransform(this._levels[S],c,v)},_setZoomTransform:function(c,v,S){var N=this._map.getZoomScale(S,c.zoom),U=c.origin.multiplyBy(N).subtract(this._map._getNewPixelOrigin(v,S)).round();Ut.any3d?Ja(c.el,U,N):Xn(c.el,U)},_resetGrid:function(){var c=this._map,v=c.options.crs,S=this._tileSize=this.getTileSize(),N=this._tileZoom,U=this._map.getPixelWorldBounds(this._tileZoom);U&&(this._globalTileRange=this._pxBoundsToTileRange(U)),this._wrapX=v.wrapLng&&!this.options.noWrap&&[Math.floor(c.project([0,v.wrapLng[0]],N).x/S.x),Math.ceil(c.project([0,v.wrapLng[1]],N).x/S.y)],this._wrapY=v.wrapLat&&!this.options.noWrap&&[Math.floor(c.project([v.wrapLat[0],0],N).y/S.x),Math.ceil(c.project([v.wrapLat[1],0],N).y/S.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(c){var v=this._map,S=v._animatingZoom?Math.max(v._animateToZoom,v.getZoom()):v.getZoom(),N=v.getZoomScale(S,this._tileZoom),U=v.project(c,this._tileZoom).floor(),re=v.getSize().divideBy(N*2);return new ne(U.subtract(re),U.add(re))},_update:function(c){var v=this._map;if(v){var S=this._clampZoom(v.getZoom());if(c===void 0&&(c=v.getCenter()),this._tileZoom!==void 0){var N=this._getTiledPixelBounds(c),U=this._pxBoundsToTileRange(N),re=U.getCenter(),ke=[],$e=this.options.keepBuffer,ot=new ne(U.getBottomLeft().subtract([$e,-$e]),U.getTopRight().add([$e,-$e]));if(!(isFinite(U.min.x)&&isFinite(U.min.y)&&isFinite(U.max.x)&&isFinite(U.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var bt in this._tiles){var Ft=this._tiles[bt].coords;(Ft.z!==this._tileZoom||!ot.contains(new he(Ft.x,Ft.y)))&&(this._tiles[bt].current=!1)}if(Math.abs(S-this._tileZoom)>1){this._setView(c,S);return}for(var an=U.min.y;an<=U.max.y;an++)for(var $n=U.min.x;$n<=U.max.x;$n++){var Ta=new he($n,an);if(Ta.z=this._tileZoom,!!this._isValidTile(Ta)){var Tr=this._tiles[this._tileCoordsToKey(Ta)];Tr?Tr.current=!0:ke.push(Ta)}}if(ke.sort(function(Li,Ti){return Li.distanceTo(re)-Ti.distanceTo(re)}),ke.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var Do=document.createDocumentFragment();for($n=0;$n<ke.length;$n++)this._addTile(ke[$n],Do);this._level.el.appendChild(Do)}}}},_isValidTile:function(c){var v=this._map.options.crs;if(!v.infinite){var S=this._globalTileRange;if(!v.wrapLng&&(c.x<S.min.x||c.x>S.max.x)||!v.wrapLat&&(c.y<S.min.y||c.y>S.max.y))return!1}if(!this.options.bounds)return!0;var N=this._tileCoordsToBounds(c);return ce(this.options.bounds).overlaps(N)},_keyToBounds:function(c){return this._tileCoordsToBounds(this._keyToTileCoords(c))},_tileCoordsToNwSe:function(c){var v=this._map,S=this.getTileSize(),N=c.scaleBy(S),U=N.add(S),re=v.unproject(N,c.z),ke=v.unproject(U,c.z);return[re,ke]},_tileCoordsToBounds:function(c){var v=this._tileCoordsToNwSe(c),S=new te(v[0],v[1]);return this.options.noWrap||(S=this._map.wrapLatLngBounds(S)),S},_tileCoordsToKey:function(c){return c.x+":"+c.y+":"+c.z},_keyToTileCoords:function(c){var v=c.split(":"),S=new he(+v[0],+v[1]);return S.z=+v[2],S},_removeTile:function(c){var v=this._tiles[c];v&&(di(v.el),delete this._tiles[c],this.fire("tileunload",{tile:v.el,coords:this._keyToTileCoords(c)}))},_initTile:function(c){Sn(c,"leaflet-tile");var v=this.getTileSize();c.style.width=v.x+"px",c.style.height=v.y+"px",c.onselectstart=_,c.onmousemove=_,Ut.ielt9&&this.options.opacity<1&&ni(c,this.options.opacity)},_addTile:function(c,v){var S=this._getTilePos(c),N=this._tileCoordsToKey(c),U=this.createTile(this._wrapCoords(c),l(this._tileReady,this,c));this._initTile(U),this.createTile.length<2&&Z(l(this._tileReady,this,c,null,U)),Xn(U,S),this._tiles[N]={el:U,coords:c,current:!0},v.appendChild(U),this.fire("tileloadstart",{tile:U,coords:c})},_tileReady:function(c,v,S){v&&this.fire("tileerror",{error:v,tile:S,coords:c});var N=this._tileCoordsToKey(c);S=this._tiles[N],S&&(S.loaded=+new Date,this._map._fadeAnimated?(ni(S.el,0),J(this._fadeFrame),this._fadeFrame=Z(this._updateOpacity,this)):(S.active=!0,this._pruneTiles()),v||(Sn(S.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:S.el,coords:c})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ut.ielt9||!this._map._fadeAnimated?Z(this._pruneTiles,this):setTimeout(l(this._pruneTiles,this),250)))},_getTilePos:function(c){return c.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(c){var v=new he(this._wrapX?m(c.x,this._wrapX):c.x,this._wrapY?m(c.y,this._wrapY):c.y);return v.z=c.z,v},_pxBoundsToTileRange:function(c){var v=this.getTileSize();return new ne(c.min.unscaleBy(v).floor(),c.max.unscaleBy(v).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var c in this._tiles)if(!this._tiles[c].loaded)return!1;return!0}});function Gt(c){return new Lt(c)}var Mt=Lt.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(c,v){this._url=c,v=M(this,v),v.detectRetina&&Ut.retina&&v.maxZoom>0?(v.tileSize=Math.floor(v.tileSize/2),v.zoomReverse?(v.zoomOffset--,v.minZoom=Math.min(v.maxZoom,v.minZoom+1)):(v.zoomOffset++,v.maxZoom=Math.max(v.minZoom,v.maxZoom-1)),v.minZoom=Math.max(0,v.minZoom)):v.zoomReverse?v.minZoom=Math.min(v.maxZoom,v.minZoom):v.maxZoom=Math.max(v.minZoom,v.maxZoom),typeof v.subdomains=="string"&&(v.subdomains=v.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(c,v){return this._url===c&&v===void 0&&(v=!0),this._url=c,v||this.redraw(),this},createTile:function(c,v){var S=document.createElement("img");return Ct(S,"load",l(this._tileOnLoad,this,v,S)),Ct(S,"error",l(this._tileOnError,this,v,S)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(S.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(S.referrerPolicy=this.options.referrerPolicy),S.alt="",S.src=this.getTileUrl(c),S},getTileUrl:function(c){var v={r:Ut.retina?"@2x":"",s:this._getSubdomain(c),x:c.x,y:c.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var S=this._globalTileRange.max.y-c.y;this.options.tms&&(v.y=S),v["-y"]=S}return Y(this._url,r(v,this.options))},_tileOnLoad:function(c,v){Ut.ielt9?setTimeout(l(c,this,null,v),0):c(null,v)},_tileOnError:function(c,v,S){var N=this.options.errorTileUrl;N&&v.getAttribute("src")!==N&&(v.src=N),c(S,v)},_onTileRemove:function(c){c.tile.onload=null},_getZoomForUrl:function(){var c=this._tileZoom,v=this.options.maxZoom,S=this.options.zoomReverse,N=this.options.zoomOffset;return S&&(c=v-c),c+N},_getSubdomain:function(c){var v=Math.abs(c.x+c.y)%this.options.subdomains.length;return this.options.subdomains[v]},_abortLoading:function(){var c,v;for(c in this._tiles)if(this._tiles[c].coords.z!==this._tileZoom&&(v=this._tiles[c].el,v.onload=_,v.onerror=_,!v.complete)){v.src=ee;var S=this._tiles[c].coords;di(v),delete this._tiles[c],this.fire("tileabort",{tile:v,coords:S})}},_removeTile:function(c){var v=this._tiles[c];if(v)return v.el.setAttribute("src",ee),Lt.prototype._removeTile.call(this,c)},_tileReady:function(c,v,S){if(!(!this._map||S&&S.getAttribute("src")===ee))return Lt.prototype._tileReady.call(this,c,v,S)}});function jt(c,v){return new Mt(c,v)}var Wt=Mt.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(c,v){this._url=c;var S=r({},this.defaultWmsParams);for(var N in v)N in this.options||(S[N]=v[N]);v=M(this,v);var U=v.detectRetina&&Ut.retina?2:1,re=this.getTileSize();S.width=re.x*U,S.height=re.y*U,this.wmsParams=S},onAdd:function(c){this._crs=this.options.crs||c.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var v=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[v]=this._crs.code,Mt.prototype.onAdd.call(this,c)},getTileUrl:function(c){var v=this._tileCoordsToNwSe(c),S=this._crs,N=H(S.project(v[0]),S.project(v[1])),U=N.min,re=N.max,ke=(this._wmsVersion>=1.3&&this._crs===Bs?[U.y,U.x,re.y,re.x]:[U.x,U.y,re.x,re.y]).join(","),$e=Mt.prototype.getTileUrl.call(this,c);return $e+k(this.wmsParams,$e,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ke},setParams:function(c,v){return r(this.wmsParams,c),v||this.redraw(),this}});function An(c,v){return new Wt(c,v)}Mt.WMS=Wt,jt.wms=An;var Ln=Fi.extend({options:{padding:.1},initialize:function(c){M(this,c),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),Sn(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var c={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(c.zoomanim=this._onAnimZoom),c},_onAnimZoom:function(c){this._updateTransform(c.center,c.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(c,v){var S=this._map.getZoomScale(v,this._zoom),N=this._map.getSize().multiplyBy(.5+this.options.padding),U=this._map.project(this._center,v),re=N.multiplyBy(-S).add(U).subtract(this._map._getNewPixelOrigin(c,v));Ut.any3d?Ja(this._container,re,S):Xn(this._container,re)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var c in this._layers)this._layers[c]._reset()},_onZoomEnd:function(){for(var c in this._layers)this._layers[c]._project()},_updatePaths:function(){for(var c in this._layers)this._layers[c]._update()},_update:function(){var c=this.options.padding,v=this._map.getSize(),S=this._map.containerPointToLayerPoint(v.multiplyBy(-c)).round();this._bounds=new ne(S,S.add(v.multiplyBy(1+c*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),fn=Ln.extend({options:{tolerance:0},getEvents:function(){var c=Ln.prototype.getEvents.call(this);return c.viewprereset=this._onViewPreReset,c},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ln.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var c=this._container=document.createElement("canvas");Ct(c,"mousemove",this._onMouseMove,this),Ct(c,"click dblclick mousedown mouseup contextmenu",this._onClick,this),Ct(c,"mouseout",this._handleMouseOut,this),c._leaflet_disable_events=!0,this._ctx=c.getContext("2d")},_destroyContainer:function(){J(this._redrawRequest),delete this._ctx,di(this._container),ai(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var c;this._redrawBounds=null;for(var v in this._layers)c=this._layers[v],c._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var c=this._bounds,v=this._container,S=c.getSize(),N=Ut.retina?2:1;Xn(v,c.min),v.width=N*S.x,v.height=N*S.y,v.style.width=S.x+"px",v.style.height=S.y+"px",Ut.retina&&this._ctx.scale(2,2),this._ctx.translate(-c.min.x,-c.min.y),this.fire("update")}},_reset:function(){Ln.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(c){this._updateDashArray(c),this._layers[p(c)]=c;var v=c._order={layer:c,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=v),this._drawLast=v,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(c){this._requestRedraw(c)},_removePath:function(c){var v=c._order,S=v.next,N=v.prev;S?S.prev=N:this._drawLast=N,N?N.next=S:this._drawFirst=S,delete c._order,delete this._layers[p(c)],this._requestRedraw(c)},_updatePath:function(c){this._extendRedrawBounds(c),c._project(),c._update(),this._requestRedraw(c)},_updateStyle:function(c){this._updateDashArray(c),this._requestRedraw(c)},_updateDashArray:function(c){if(typeof c.options.dashArray=="string"){var v=c.options.dashArray.split(/[, ]+/),S=[],N,U;for(U=0;U<v.length;U++){if(N=Number(v[U]),isNaN(N))return;S.push(N)}c.options._dashArray=S}else c.options._dashArray=c.options.dashArray},_requestRedraw:function(c){this._map&&(this._extendRedrawBounds(c),this._redrawRequest=this._redrawRequest||Z(this._redraw,this))},_extendRedrawBounds:function(c){if(c._pxBounds){var v=(c.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new ne,this._redrawBounds.extend(c._pxBounds.min.subtract([v,v])),this._redrawBounds.extend(c._pxBounds.max.add([v,v]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var c=this._redrawBounds;if(c){var v=c.getSize();this._ctx.clearRect(c.min.x,c.min.y,v.x,v.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var c,v=this._redrawBounds;if(this._ctx.save(),v){var S=v.getSize();this._ctx.beginPath(),this._ctx.rect(v.min.x,v.min.y,S.x,S.y),this._ctx.clip()}this._drawing=!0;for(var N=this._drawFirst;N;N=N.next)c=N.layer,(!v||c._pxBounds&&c._pxBounds.intersects(v))&&c._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(c,v){if(this._drawing){var S,N,U,re,ke=c._parts,$e=ke.length,ot=this._ctx;if($e){for(ot.beginPath(),S=0;S<$e;S++){for(N=0,U=ke[S].length;N<U;N++)re=ke[S][N],ot[N?"lineTo":"moveTo"](re.x,re.y);v&&ot.closePath()}this._fillStroke(ot,c)}}},_updateCircle:function(c){if(!(!this._drawing||c._empty())){var v=c._point,S=this._ctx,N=Math.max(Math.round(c._radius),1),U=(Math.max(Math.round(c._radiusY),1)||N)/N;U!==1&&(S.save(),S.scale(1,U)),S.beginPath(),S.arc(v.x,v.y/U,N,0,Math.PI*2,!1),U!==1&&S.restore(),this._fillStroke(S,c)}},_fillStroke:function(c,v){var S=v.options;S.fill&&(c.globalAlpha=S.fillOpacity,c.fillStyle=S.fillColor||S.color,c.fill(S.fillRule||"evenodd")),S.stroke&&S.weight!==0&&(c.setLineDash&&c.setLineDash(v.options&&v.options._dashArray||[]),c.globalAlpha=S.opacity,c.lineWidth=S.weight,c.strokeStyle=S.color,c.lineCap=S.lineCap,c.lineJoin=S.lineJoin,c.stroke())},_onClick:function(c){for(var v=this._map.mouseEventToLayerPoint(c),S,N,U=this._drawFirst;U;U=U.next)S=U.layer,S.options.interactive&&S._containsPoint(v)&&(!(c.type==="click"||c.type==="preclick")||!this._map._draggableMoved(S))&&(N=S);this._fireEvent(N?[N]:!1,c)},_onMouseMove:function(c){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var v=this._map.mouseEventToLayerPoint(c);this._handleMouseHover(c,v)}},_handleMouseOut:function(c){var v=this._hoveredLayer;v&&(Ii(this._container,"leaflet-interactive"),this._fireEvent([v],c,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(c,v){if(!this._mouseHoverThrottled){for(var S,N,U=this._drawFirst;U;U=U.next)S=U.layer,S.options.interactive&&S._containsPoint(v)&&(N=S);N!==this._hoveredLayer&&(this._handleMouseOut(c),N&&(Sn(this._container,"leaflet-interactive"),this._fireEvent([N],c,"mouseover"),this._hoveredLayer=N)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,c),this._mouseHoverThrottled=!0,setTimeout(l(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(c,v,S){this._map._fireDOMEvent(v,S||v.type,c)},_bringToFront:function(c){var v=c._order;if(v){var S=v.next,N=v.prev;if(S)S.prev=N;else return;N?N.next=S:S&&(this._drawFirst=S),v.prev=this._drawLast,this._drawLast.next=v,v.next=null,this._drawLast=v,this._requestRedraw(c)}},_bringToBack:function(c){var v=c._order;if(v){var S=v.next,N=v.prev;if(N)N.next=S;else return;S?S.prev=N:N&&(this._drawLast=N),v.prev=null,v.next=this._drawFirst,this._drawFirst.prev=v,this._drawFirst=v,this._requestRedraw(c)}}});function On(c){return Ut.canvas?new fn(c):null}var gi=(function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(c){return document.createElement("<lvml:"+c+' class="lvml">')}}catch{}return function(c){return document.createElement("<"+c+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}})(),Ea={_initContainer:function(){this._container=Ht("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ln.prototype._update.call(this),this.fire("update"))},_initPath:function(c){var v=c._container=gi("shape");Sn(v,"leaflet-vml-shape "+(this.options.className||"")),v.coordsize="1 1",c._path=gi("path"),v.appendChild(c._path),this._updateStyle(c),this._layers[p(c)]=c},_addPath:function(c){var v=c._container;this._container.appendChild(v),c.options.interactive&&c.addInteractiveTarget(v)},_removePath:function(c){var v=c._container;di(v),c.removeInteractiveTarget(v),delete this._layers[p(c)]},_updateStyle:function(c){var v=c._stroke,S=c._fill,N=c.options,U=c._container;U.stroked=!!N.stroke,U.filled=!!N.fill,N.stroke?(v||(v=c._stroke=gi("stroke")),U.appendChild(v),v.weight=N.weight+"px",v.color=N.color,v.opacity=N.opacity,N.dashArray?v.dashStyle=B(N.dashArray)?N.dashArray.join(" "):N.dashArray.replace(/( *, *)/g," "):v.dashStyle="",v.endcap=N.lineCap.replace("butt","flat"),v.joinstyle=N.lineJoin):v&&(U.removeChild(v),c._stroke=null),N.fill?(S||(S=c._fill=gi("fill")),U.appendChild(S),S.color=N.fillColor||N.color,S.opacity=N.fillOpacity):S&&(U.removeChild(S),c._fill=null)},_updateCircle:function(c){var v=c._point.round(),S=Math.round(c._radius),N=Math.round(c._radiusY||S);this._setPath(c,c._empty()?"M0 0":"AL "+v.x+","+v.y+" "+S+","+N+" 0,"+65535*360)},_setPath:function(c,v){c._path.v=v},_bringToFront:function(c){Gn(c._container)},_bringToBack:function(c){Ia(c._container)}},li=Ut.vml?gi:ye,Aa=Ln.extend({_initContainer:function(){this._container=li("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=li("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){di(this._container),ai(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ln.prototype._update.call(this);var c=this._bounds,v=c.getSize(),S=this._container;(!this._svgSize||!this._svgSize.equals(v))&&(this._svgSize=v,S.setAttribute("width",v.x),S.setAttribute("height",v.y)),Xn(S,c.min),S.setAttribute("viewBox",[c.min.x,c.min.y,v.x,v.y].join(" ")),this.fire("update")}},_initPath:function(c){var v=c._path=li("path");c.options.className&&Sn(v,c.options.className),c.options.interactive&&Sn(v,"leaflet-interactive"),this._updateStyle(c),this._layers[p(c)]=c},_addPath:function(c){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(c._path),c.addInteractiveTarget(c._path)},_removePath:function(c){di(c._path),c.removeInteractiveTarget(c._path),delete this._layers[p(c)]},_updatePath:function(c){c._project(),c._update()},_updateStyle:function(c){var v=c._path,S=c.options;v&&(S.stroke?(v.setAttribute("stroke",S.color),v.setAttribute("stroke-opacity",S.opacity),v.setAttribute("stroke-width",S.weight),v.setAttribute("stroke-linecap",S.lineCap),v.setAttribute("stroke-linejoin",S.lineJoin),S.dashArray?v.setAttribute("stroke-dasharray",S.dashArray):v.removeAttribute("stroke-dasharray"),S.dashOffset?v.setAttribute("stroke-dashoffset",S.dashOffset):v.removeAttribute("stroke-dashoffset")):v.setAttribute("stroke","none"),S.fill?(v.setAttribute("fill",S.fillColor||S.color),v.setAttribute("fill-opacity",S.fillOpacity),v.setAttribute("fill-rule",S.fillRule||"evenodd")):v.setAttribute("fill","none"))},_updatePoly:function(c,v){this._setPath(c,Pt(c._parts,v))},_updateCircle:function(c){var v=c._point,S=Math.max(Math.round(c._radius),1),N=Math.max(Math.round(c._radiusY),1)||S,U="a"+S+","+N+" 0 1,0 ",re=c._empty()?"M0 0":"M"+(v.x-S)+","+v.y+U+S*2+",0 "+U+-S*2+",0 ";this._setPath(c,re)},_setPath:function(c,v){c._path.setAttribute("d",v)},_bringToFront:function(c){Gn(c._path)},_bringToBack:function(c){Ia(c._path)}});Ut.vml&&Aa.include(Ea);function Lr(c){return Ut.svg||Ut.vml?new Aa(c):null}Bn.include({getRenderer:function(c){var v=c.options.renderer||this._getPaneRenderer(c.options.pane)||this.options.renderer||this._renderer;return v||(v=this._renderer=this._createRenderer()),this.hasLayer(v)||this.addLayer(v),v},_getPaneRenderer:function(c){if(c==="overlayPane"||c===void 0)return!1;var v=this._paneRenderers[c];return v===void 0&&(v=this._createRenderer({pane:c}),this._paneRenderers[c]=v),v},_createRenderer:function(c){return this.options.preferCanvas&&On(c)||Lr(c)}});var ca=Ro.extend({initialize:function(c,v){Ro.prototype.initialize.call(this,this._boundsToLatLngs(c),v)},setBounds:function(c){return this.setLatLngs(this._boundsToLatLngs(c))},_boundsToLatLngs:function(c){return c=ce(c),[c.getSouthWest(),c.getNorthWest(),c.getNorthEast(),c.getSouthEast()]}});function Ac(c,v){return new ca(c,v)}Aa.create=li,Aa.pointsToPath=Pt,Wi.geometryToLayer=vr,Wi.coordsToLatLng=j,Wi.coordsToLatLngs=P,Wi.latLngToCoords=z,Wi.latLngsToCoords=W,Wi.getFeature=$,Wi.asFeature=ge,Bn.mergeOptions({boxZoom:!0});var La=we.extend({initialize:function(c){this._map=c,this._container=c._container,this._pane=c._panes.overlayPane,this._resetStateTimeout=0,c.on("unload",this._destroy,this)},addHooks:function(){Ct(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){ai(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){di(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(c){if(!c.shiftKey||c.which!==1&&c.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),go(),Ds(),this._startPoint=this._map.mouseEventToContainerPoint(c),Ct(document,{contextmenu:za,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(c){this._moved||(this._moved=!0,this._box=Ht("div","leaflet-zoom-box",this._container),Sn(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(c);var v=new ne(this._point,this._startPoint),S=v.getSize();Xn(this._box,v.min),this._box.style.width=S.x+"px",this._box.style.height=S.y+"px"},_finish:function(){this._moved&&(di(this._box),Ii(this._container,"leaflet-crosshair")),sa(),Ms(),ai(document,{contextmenu:za,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(c){if(!(c.which!==1&&c.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(l(this._resetState,this),0);var v=new te(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(v).fire("boxzoomend",{boxZoomBounds:v})}},_onKeyDown:function(c){c.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});Bn.addInitHook("addHandler","boxZoom",La),Bn.mergeOptions({doubleClickZoom:!0});var $l=we.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(c){var v=this._map,S=v.getZoom(),N=v.options.zoomDelta,U=c.originalEvent.shiftKey?S-N:S+N;v.options.doubleClickZoom==="center"?v.setZoom(U):v.setZoomAround(c.containerPoint,U)}});Bn.addInitHook("addHandler","doubleClickZoom",$l),Bn.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var No=we.extend({addHooks:function(){if(!this._draggable){var c=this._map;this._draggable=new dt(c._mapPane,c._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),c.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),c.on("zoomend",this._onZoomEnd,this),c.whenReady(this._onZoomEnd,this))}Sn(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){Ii(this._map._container,"leaflet-grab"),Ii(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var c=this._map;if(c._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var v=ce(this._map.options.maxBounds);this._offsetLimit=H(this._map.latLngToContainerPoint(v.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(v.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;c.fire("movestart").fire("dragstart"),c.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(c){if(this._map.options.inertia){var v=this._lastTime=+new Date,S=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(S),this._times.push(v),this._prunePositions(v)}this._map.fire("move",c).fire("drag",c)},_prunePositions:function(c){for(;this._positions.length>1&&c-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var c=this._map.getSize().divideBy(2),v=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=v.subtract(c).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(c,v){return c-(c-v)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var c=this._draggable._newPos.subtract(this._draggable._startPos),v=this._offsetLimit;c.x<v.min.x&&(c.x=this._viscousLimit(c.x,v.min.x)),c.y<v.min.y&&(c.y=this._viscousLimit(c.y,v.min.y)),c.x>v.max.x&&(c.x=this._viscousLimit(c.x,v.max.x)),c.y>v.max.y&&(c.y=this._viscousLimit(c.y,v.max.y)),this._draggable._newPos=this._draggable._startPos.add(c)}},_onPreDragWrap:function(){var c=this._worldWidth,v=Math.round(c/2),S=this._initialWorldOffset,N=this._draggable._newPos.x,U=(N-v+S)%c+v-S,re=(N+v+S)%c-v-S,ke=Math.abs(U+S)<Math.abs(re+S)?U:re;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ke},_onDragEnd:function(c){var v=this._map,S=v.options,N=!S.inertia||c.noInertia||this._times.length<2;if(v.fire("dragend",c),N)v.fire("moveend");else{this._prunePositions(+new Date);var U=this._lastPos.subtract(this._positions[0]),re=(this._lastTime-this._times[0])/1e3,ke=S.easeLinearity,$e=U.multiplyBy(ke/re),ot=$e.distanceTo([0,0]),bt=Math.min(S.inertiaMaxSpeed,ot),Ft=$e.multiplyBy(bt/ot),an=bt/(S.inertiaDeceleration*ke),$n=Ft.multiplyBy(-an/2).round();!$n.x&&!$n.y?v.fire("moveend"):($n=v._limitOffset($n,v.options.maxBounds),Z(function(){v.panBy($n,{duration:an,easeLinearity:ke,noMoveStart:!0,animate:!0})}))}}});Bn.addInitHook("addHandler","dragging",No),Bn.mergeOptions({keyboard:!0,keyboardPanDelta:80});var El=we.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(c){this._map=c,this._setPanDelta(c.options.keyboardPanDelta),this._setZoomDelta(c.options.zoomDelta)},addHooks:function(){var c=this._map._container;c.tabIndex<=0&&(c.tabIndex="0"),Ct(c,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),ai(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var c=document.body,v=document.documentElement,S=c.scrollTop||v.scrollTop,N=c.scrollLeft||v.scrollLeft;this._map._container.focus(),window.scrollTo(N,S)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(c){var v=this._panKeys={},S=this.keyCodes,N,U;for(N=0,U=S.left.length;N<U;N++)v[S.left[N]]=[-1*c,0];for(N=0,U=S.right.length;N<U;N++)v[S.right[N]]=[c,0];for(N=0,U=S.down.length;N<U;N++)v[S.down[N]]=[0,c];for(N=0,U=S.up.length;N<U;N++)v[S.up[N]]=[0,-1*c]},_setZoomDelta:function(c){var v=this._zoomKeys={},S=this.keyCodes,N,U;for(N=0,U=S.zoomIn.length;N<U;N++)v[S.zoomIn[N]]=c;for(N=0,U=S.zoomOut.length;N<U;N++)v[S.zoomOut[N]]=-c},_addHooks:function(){Ct(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){ai(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(c){if(!(c.altKey||c.ctrlKey||c.metaKey)){var v=c.keyCode,S=this._map,N;if(v in this._panKeys){if(!S._panAnim||!S._panAnim._inProgress)if(N=this._panKeys[v],c.shiftKey&&(N=ze(N).multiplyBy(3)),S.options.maxBounds&&(N=S._limitOffset(ze(N),S.options.maxBounds)),S.options.worldCopyJump){var U=S.wrapLatLng(S.unproject(S.project(S.getCenter()).add(N)));S.panTo(U)}else S.panBy(N)}else if(v in this._zoomKeys)S.setZoom(S.getZoom()+(c.shiftKey?3:1)*this._zoomKeys[v]);else if(v===27&&S._popup&&S._popup.options.closeOnEscapeKey)S.closePopup();else return;za(c)}}});Bn.addInitHook("addHandler","keyboard",El),Bn.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var ol=we.extend({addHooks:function(){Ct(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){ai(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(c){var v=Qi(c),S=this._map.options.wheelDebounceTime;this._delta+=v,this._lastMousePos=this._map.mouseEventToContainerPoint(c),this._startTime||(this._startTime=+new Date);var N=Math.max(S-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(l(this._performZoom,this),N),za(c)},_performZoom:function(){var c=this._map,v=c.getZoom(),S=this._map.options.zoomSnap||0;c._stop();var N=this._delta/(this._map.options.wheelPxPerZoomLevel*4),U=4*Math.log(2/(1+Math.exp(-Math.abs(N))))/Math.LN2,re=S?Math.ceil(U/S)*S:U,ke=c._limitZoom(v+(this._delta>0?re:-re))-v;this._delta=0,this._startTime=null,ke&&(c.options.scrollWheelZoom==="center"?c.setZoom(v+ke):c.setZoomAround(this._lastMousePos,v+ke))}});Bn.addInitHook("addHandler","scrollWheelZoom",ol);var $s=600;Bn.mergeOptions({tapHold:Ut.touchNative&&Ut.safari&&Ut.mobile,tapTolerance:15});var Al=we.extend({addHooks:function(){Ct(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){ai(this._map._container,"touchstart",this._onDown,this)},_onDown:function(c){if(clearTimeout(this._holdTimeout),c.touches.length===1){var v=c.touches[0];this._startPos=this._newPos=new he(v.clientX,v.clientY),this._holdTimeout=setTimeout(l(function(){this._cancel(),this._isTapValid()&&(Ct(document,"touchend",Ai),Ct(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",v))},this),$s),Ct(document,"touchend touchcancel contextmenu",this._cancel,this),Ct(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function c(){ai(document,"touchend",Ai),ai(document,"touchend touchcancel",c)},_cancel:function(){clearTimeout(this._holdTimeout),ai(document,"touchend touchcancel contextmenu",this._cancel,this),ai(document,"touchmove",this._onMove,this)},_onMove:function(c){var v=c.touches[0];this._newPos=new he(v.clientX,v.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(c,v){var S=new MouseEvent(c,{bubbles:!0,cancelable:!0,view:window,screenX:v.screenX,screenY:v.screenY,clientX:v.clientX,clientY:v.clientY});S._simulated=!0,v.target.dispatchEvent(S)}});Bn.addInitHook("addHandler","tapHold",Al),Bn.mergeOptions({touchZoom:Ut.touch,bounceAtZoomLimits:!0});var Jl=we.extend({addHooks:function(){Sn(this._map._container,"leaflet-touch-zoom"),Ct(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){Ii(this._map._container,"leaflet-touch-zoom"),ai(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(c){var v=this._map;if(!(!c.touches||c.touches.length!==2||v._animatingZoom||this._zooming)){var S=v.mouseEventToContainerPoint(c.touches[0]),N=v.mouseEventToContainerPoint(c.touches[1]);this._centerPoint=v.getSize()._divideBy(2),this._startLatLng=v.containerPointToLatLng(this._centerPoint),v.options.touchZoom!=="center"&&(this._pinchStartLatLng=v.containerPointToLatLng(S.add(N)._divideBy(2))),this._startDist=S.distanceTo(N),this._startZoom=v.getZoom(),this._moved=!1,this._zooming=!0,v._stop(),Ct(document,"touchmove",this._onTouchMove,this),Ct(document,"touchend touchcancel",this._onTouchEnd,this),Ai(c)}},_onTouchMove:function(c){if(!(!c.touches||c.touches.length!==2||!this._zooming)){var v=this._map,S=v.mouseEventToContainerPoint(c.touches[0]),N=v.mouseEventToContainerPoint(c.touches[1]),U=S.distanceTo(N)/this._startDist;if(this._zoom=v.getScaleZoom(U,this._startZoom),!v.options.bounceAtZoomLimits&&(this._zoom<v.getMinZoom()&&U<1||this._zoom>v.getMaxZoom()&&U>1)&&(this._zoom=v._limitZoom(this._zoom)),v.options.touchZoom==="center"){if(this._center=this._startLatLng,U===1)return}else{var re=S._add(N)._divideBy(2)._subtract(this._centerPoint);if(U===1&&re.x===0&&re.y===0)return;this._center=v.unproject(v.project(this._pinchStartLatLng,this._zoom).subtract(re),this._zoom)}this._moved||(v._moveStart(!0,!1),this._moved=!0),J(this._animRequest);var ke=l(v._move,v,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Z(ke,this,!0),Ai(c)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,J(this._animRequest),ai(document,"touchmove",this._onTouchMove,this),ai(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});Bn.addInitHook("addHandler","touchZoom",Jl),Bn.BoxZoom=La,Bn.DoubleClickZoom=$l,Bn.Drag=No,Bn.Keyboard=El,Bn.ScrollWheelZoom=ol,Bn.TapHold=Al,Bn.TouchZoom=Jl,n.Bounds=ne,n.Browser=Ut,n.CRS=Te,n.Canvas=fn,n.Circle=ko,n.CircleMarker=la,n.Class=Ee,n.Control=Ar,n.DivIcon=Dt,n.DivOverlay=Xe,n.DomEvent=yo,n.DomUtil=rs,n.Draggable=dt,n.Evented=ae,n.FeatureGroup=_a,n.GeoJSON=Wi,n.GridLayer=Lt,n.Handler=we,n.Icon=Qr,n.ImageOverlay=Be,n.LatLng=Q,n.LatLngBounds=te,n.Layer=Fi,n.LayerGroup=Fa,n.LineUtil=zs,n.Map=Bn,n.Marker=Ha,n.Mixin=Ie,n.Path=Fn,n.Point=he,n.PolyUtil=yn,n.Polygon=Ro,n.Polyline=Sa,n.Popup=nt,n.PosAnimation=eo,n.Projection=ms,n.Rectangle=ca,n.Renderer=Ln,n.SVG=Aa,n.SVGOverlay=Me,n.TileLayer=Mt,n.Tooltip=ft,n.Transformation=gt,n.Util=Se,n.VideoOverlay=Ne,n.bind=l,n.bounds=H,n.canvas=On,n.circle=vs,n.circleMarker=wa,n.control=to,n.divIcon=It,n.extend=r,n.featureGroup=Ua,n.geoJSON=He,n.geoJson=Ze,n.gridLayer=Gt,n.icon=ls,n.imageOverlay=je,n.latLng=xe,n.latLngBounds=ce,n.layerGroup=Fs,n.map=os,n.marker=lr,n.point=ze,n.polygon=Ca,n.polyline=Mi,n.popup=Qe,n.rectangle=Ac,n.setOptions=M,n.stamp=p,n.svg=Lr,n.svgOverlay=Ue,n.tileLayer=jt,n.tooltip=Tt,n.transformation=mt,n.version=i,n.videoOverlay=Pe;var Ll=window.L;n.noConflict=function(){return window.L=Ll,this},window.L=n}))})(Ef,Ef.exports)),Ef.exports}var wl=v3();const jd=og(wl);function Mu(t,e,n){return Object.freeze({instance:t,context:e,container:n})}function gg(t,e){return e==null?function(i,r){const a=de.useRef(void 0);return a.current||(a.current=t(i,r)),a}:function(i,r){const a=de.useRef(void 0);a.current||(a.current=t(i,r));const l=de.useRef(i),{instance:d}=a.current;return de.useEffect(function(){l.current!==i&&(e(d,i,l.current),l.current=i)},[d,i,e]),a}}function m5(t,e){de.useEffect(function(){return(e.layerContainer??e.map).addLayer(t.instance),function(){e.layerContainer?.removeLayer(t.instance),e.map.removeLayer(t.instance)}},[e,t])}function v5(t){return function(n){const i=Jf(),r=t(pg(n,i),i);return p5(i.map,n.attribution),Ky(r.current,n.eventHandlers),m5(r.current,i),r}}function y3(t,e){const n=de.useRef(void 0);de.useEffect(function(){if(e.pathOptions!==n.current){const r=e.pathOptions??{};t.instance.setStyle(r),n.current=r}},[t,e])}function x3(t){return function(n){const i=Jf(),r=t(pg(n,i),i);return Ky(r.current,n.eventHandlers),m5(r.current,i),y3(r.current,n),r}}function b3(t,e){const n=gg(t,e),i=v5(n);return g5(i)}function _3(t,e){const n=gg(t),i=g3(n,e);return h3(i)}function mg(t,e){const n=gg(t,e),i=x3(n);return g5(i)}function w3(t,e){const n=gg(t,e),i=v5(n);return p3(i)}function S3(t,e,n){const{opacity:i,zIndex:r}=e;i!=null&&i!==n.opacity&&t.setOpacity(i),r!=null&&r!==n.zIndex&&t.setZIndex(r)}function C3(){return Jf().map}const E3=mg(function({center:e,children:n,...i},r){const a=new wl.CircleMarker(e,i);return Mu(a,$f(r,{overlayContainer:a}))},u3),A3=mg(function({children:e,...n},i){const r=new wl.FeatureGroup([],n);return Mu(r,$f(i,{layerContainer:r,overlayContainer:r}))});function L3({bounds:t,boundsOptions:e,center:n,children:i,className:r,id:a,placeholder:l,style:d,whenReady:p,zoom:g,...m},_){const[A]=de.useState({className:r,id:a,style:d}),[x,R]=de.useState(null),M=de.useRef(void 0);de.useImperativeHandle(_,()=>x?.map??null,[x]);const k=de.useCallback(Y=>{if(Y!==null&&!M.current){const B=new wl.Map(Y,m);M.current=B,n!=null&&g!=null?B.setView(n,g):t!=null&&B.fitBounds(t,e),p!=null&&B.whenReady(p),R(f3(B))}},[]);de.useEffect(()=>()=>{x?.map.remove()},[x]);const I=x?ta.createElement(Zy,{value:x},i):l??null;return ta.createElement("div",{...A,ref:k},I)}const T3=de.forwardRef(L3),y5=b3(function({position:e,...n},i){const r=new wl.Marker(e,n);return Mu(r,$f(i,{overlayContainer:r}))},function(e,n,i){n.position!==i.position&&e.setLatLng(n.position),n.icon!=null&&n.icon!==i.icon&&e.setIcon(n.icon),n.zIndexOffset!=null&&n.zIndexOffset!==i.zIndexOffset&&e.setZIndexOffset(n.zIndexOffset),n.opacity!=null&&n.opacity!==i.opacity&&e.setOpacity(n.opacity),e.dragging!=null&&n.draggable!==i.draggable&&(n.draggable===!0?e.dragging.enable():e.dragging.disable())}),ud=mg(function({positions:e,...n},i){const r=new wl.Polygon(e,n);return Mu(r,$f(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),j3=mg(function({positions:e,...n},i){const r=new wl.Polyline(e,n);return Mu(r,$f(i,{overlayContainer:r}))},function(e,n,i){n.positions!==i.positions&&e.setLatLngs(n.positions)}),$m=_3(function(e,n){const i=new wl.Popup(e,n.overlayContainer);return Mu(i,n)},function(e,n,{position:i},r){de.useEffect(function(){const{instance:l}=e;function d(g){g.popup===l&&(l.update(),r(!0))}function p(g){g.popup===l&&r(!1)}return n.map.on({popupopen:d,popupclose:p}),n.overlayContainer==null?(i!=null&&l.setLatLng(i),l.openOn(n.map)):n.overlayContainer.bindPopup(l),function(){n.map.off({popupopen:d,popupclose:p}),n.overlayContainer?.unbindPopup(),n.map.removeLayer(l)}},[e,n,r,i])}),k3=w3(function({url:e,...n},i){const r=new wl.TileLayer(e,pg(n,i));return Mu(r,i)},function(e,n,i){S3(e,n,i);const{url:r}=n;r!=null&&r!==i.url&&e.setUrl(r)});var Jm={exports:{}},ev,Bb;function R3(){if(Bb)return ev;Bb=1;var t="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return ev=t,ev}var tv,Fb;function N3(){if(Fb)return tv;Fb=1;var t=R3();function e(){}function n(){}return n.resetWarningCache=e,tv=function(){function i(l,d,p,g,m,_){if(_!==t){var A=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw A.name="Invariant Violation",A}}i.isRequired=i;function r(){return i}var a={array:i,bigint:i,bool:i,func:i,number:i,object:i,string:i,symbol:i,any:i,arrayOf:r,element:i,elementType:i,instanceOf:r,node:i,objectOf:r,oneOf:r,oneOfType:r,shape:r,exact:r,checkPropTypes:n,resetWarningCache:e};return a.PropTypes=a,a},tv}var Ub;function D3(){return Ub||(Ub=1,Jm.exports=N3()()),Jm.exports}var Si=D3();(function(t,e,n){function i(r,a){for(;(r=r.parentElement)&&!r.classList.contains(a););return r}L.drawVersion="1.0.4",L.Draw={},L.drawLocal={draw:{toolbar:{actions:{title:"Cancel drawing",text:"Cancel"},finish:{title:"Finish drawing",text:"Finish"},undo:{title:"Delete last point drawn",text:"Delete last point"},buttons:{polyline:"Draw a polyline",polygon:"Draw a polygon",rectangle:"Draw a rectangle",circle:"Draw a circle",marker:"Draw a marker",circlemarker:"Draw a circlemarker"}},handlers:{circle:{tooltip:{start:"Click and drag to draw circle."},radius:"Radius"},circlemarker:{tooltip:{start:"Click map to place circle marker."}},marker:{tooltip:{start:"Click map to place marker."}},polygon:{tooltip:{start:"Click to start drawing shape.",cont:"Click to continue drawing shape.",end:"Click first point to close this shape."}},polyline:{error:"<strong>Error:</strong> shape edges cannot cross!",tooltip:{start:"Click to start drawing line.",cont:"Click to continue drawing line.",end:"Click last point to finish line."}},rectangle:{tooltip:{start:"Click and drag to draw rectangle."}},simpleshape:{tooltip:{end:"Release mouse to finish drawing."}}}},edit:{toolbar:{actions:{save:{title:"Save changes",text:"Save"},cancel:{title:"Cancel editing, discards all changes",text:"Cancel"},clearAll:{title:"Clear all layers",text:"Clear All"}},buttons:{edit:"Edit layers",editDisabled:"No layers to edit",remove:"Delete layers",removeDisabled:"No layers to delete"}},handlers:{edit:{tooltip:{text:"Drag handles or markers to edit features.",subtext:"Click cancel to undo changes."}},remove:{tooltip:{text:"Click on a feature to remove."}}}}},L.Draw.Event={},L.Draw.Event.CREATED="draw:created",L.Draw.Event.EDITED="draw:edited",L.Draw.Event.DELETED="draw:deleted",L.Draw.Event.DRAWSTART="draw:drawstart",L.Draw.Event.DRAWSTOP="draw:drawstop",L.Draw.Event.DRAWVERTEX="draw:drawvertex",L.Draw.Event.EDITSTART="draw:editstart",L.Draw.Event.EDITMOVE="draw:editmove",L.Draw.Event.EDITRESIZE="draw:editresize",L.Draw.Event.EDITVERTEX="draw:editvertex",L.Draw.Event.EDITSTOP="draw:editstop",L.Draw.Event.DELETESTART="draw:deletestart",L.Draw.Event.DELETESTOP="draw:deletestop",L.Draw.Event.TOOLBAROPENED="draw:toolbaropened",L.Draw.Event.TOOLBARCLOSED="draw:toolbarclosed",L.Draw.Event.MARKERCONTEXT="draw:markercontext",L.Draw=L.Draw||{},L.Draw.Feature=L.Handler.extend({initialize:function(r,a){this._map=r,this._container=r._container,this._overlayPane=r._panes.overlayPane,this._popupPane=r._panes.popupPane,a&&a.shapeOptions&&(a.shapeOptions=L.Util.extend({},this.options.shapeOptions,a.shapeOptions)),L.setOptions(this,a);var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.Draw.Feature.include(L.Evented.prototype):L.Draw.Feature.include(L.Mixin.Events)},enable:function(){this._enabled||(L.Handler.prototype.enable.call(this),this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DRAWSTART,{layerType:this.type}))},disable:function(){this._enabled&&(L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DRAWSTOP,{layerType:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(L.DomUtil.disableTextSelection(),r.getContainer().focus(),this._tooltip=new L.Draw.Tooltip(this._map),L.DomEvent.on(this._container,"keyup",this._cancelDrawing,this))},removeHooks:function(){this._map&&(L.DomUtil.enableTextSelection(),this._tooltip.dispose(),this._tooltip=null,L.DomEvent.off(this._container,"keyup",this._cancelDrawing,this))},setOptions:function(r){L.setOptions(this,r)},_fireCreatedEvent:function(r){this._map.fire(L.Draw.Event.CREATED,{layer:r,layerType:this.type})},_cancelDrawing:function(r){r.keyCode===27&&(this._map.fire("draw:canceled",{layerType:this.type}),this.disable())}}),L.Draw.Polyline=L.Draw.Feature.extend({statics:{TYPE:"polyline"},Poly:L.Polyline,options:{allowIntersection:!0,repeatMode:!1,drawError:{color:"#b00b00",timeout:2500},icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),guidelineDistance:20,maxGuideLineLength:4e3,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!1,clickable:!0},metric:!0,feet:!0,nautic:!1,showLength:!0,zIndexOffset:2e3,factor:1,maxPoints:0},initialize:function(r,a){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this.options.drawError.message=L.drawLocal.draw.handlers.polyline.error,a&&a.drawError&&(a.drawError=L.Util.extend({},this.options.drawError,a.drawError)),this.type=L.Draw.Polyline.TYPE,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._markers=[],this._markerGroup=new L.LayerGroup,this._map.addLayer(this._markerGroup),this._poly=new L.Polyline([],this.options.shapeOptions),this._tooltip.updateContent(this._getTooltipText()),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("mouseout",this._onMouseOut,this).on("mousemove",this._onMouseMove,this).on("mousedown",this._onMouseDown,this).on("mouseup",this._onMouseUp,this).addTo(this._map),this._map.on("mouseup",this._onMouseUp,this).on("mousemove",this._onMouseMove,this).on("zoomlevelschange",this._onZoomEnd,this).on("touchstart",this._onTouch,this).on("zoomend",this._onZoomEnd,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._clearHideErrorTimeout(),this._cleanUpShape(),this._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers,this._map.removeLayer(this._poly),delete this._poly,this._mouseMarker.off("mousedown",this._onMouseDown,this).off("mouseout",this._onMouseOut,this).off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._clearGuides(),this._map.off("mouseup",this._onMouseUp,this).off("mousemove",this._onMouseMove,this).off("zoomlevelschange",this._onZoomEnd,this).off("zoomend",this._onZoomEnd,this).off("touchstart",this._onTouch,this).off("click",this._onTouch,this)},deleteLastVertex:function(){if(!(this._markers.length<=1)){var r=this._markers.pop(),a=this._poly,l=a.getLatLngs(),d=l.splice(-1,1)[0];this._poly.setLatLngs(l),this._markerGroup.removeLayer(r),a.getLatLngs().length<2&&this._map.removeLayer(a),this._vertexChanged(d,!1)}},addVertex:function(r){if(this._markers.length>=2&&!this.options.allowIntersection&&this._poly.newLatLngIntersects(r))return void this._showErrorTooltip();this._errorShown&&this._hideErrorTooltip(),this._markers.push(this._createMarker(r)),this._poly.addLatLng(r),this._poly.getLatLngs().length===2&&this._map.addLayer(this._poly),this._vertexChanged(r,!0)},completeShape:function(){this._markers.length<=1||!this._shapeIsValid()||(this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable())},_finishShape:function(){var r=this._poly._defaultShape?this._poly._defaultShape():this._poly.getLatLngs(),a=this._poly.newLatLngIntersects(r[r.length-1]);if(!this.options.allowIntersection&&a||!this._shapeIsValid())return void this._showErrorTooltip();this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_shapeIsValid:function(){return!0},_onZoomEnd:function(){this._markers!==null&&this._updateGuide()},_onMouseMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent),l=this._map.layerPointToLatLng(a);this._currentLatLng=l,this._updateTooltip(l),this._updateGuide(a),this._mouseMarker.setLatLng(l),L.DomEvent.preventDefault(r.originalEvent)},_vertexChanged:function(r,a){this._map.fire(L.Draw.Event.DRAWVERTEX,{layers:this._markerGroup}),this._updateFinishHandler(),this._updateRunningMeasure(r,a),this._clearGuides(),this._updateTooltip()},_onMouseDown:function(r){if(!this._clickHandled&&!this._touchHandled&&!this._disableMarkers){this._onMouseMove(r),this._clickHandled=!0,this._disableNewMarkers();var a=r.originalEvent,l=a.clientX,d=a.clientY;this._startPoint.call(this,l,d)}},_startPoint:function(r,a){this._mouseDownOrigin=L.point(r,a)},_onMouseUp:function(r){var a=r.originalEvent,l=a.clientX,d=a.clientY;this._endPoint.call(this,l,d,r),this._clickHandled=null},_endPoint:function(r,a,l){if(this._mouseDownOrigin){var d=L.point(r,a).distanceTo(this._mouseDownOrigin),p=this._calculateFinishDistance(l.latlng);this.options.maxPoints>1&&this.options.maxPoints==this._markers.length+1?(this.addVertex(l.latlng),this._finishShape()):p<10&&L.Browser.touch?this._finishShape():Math.abs(d)<9*(t.devicePixelRatio||1)&&this.addVertex(l.latlng),this._enableNewMarkers()}this._mouseDownOrigin=null},_onTouch:function(r){var a,l,d=r.originalEvent;!d.touches||!d.touches[0]||this._clickHandled||this._touchHandled||this._disableMarkers||(a=d.touches[0].clientX,l=d.touches[0].clientY,this._disableNewMarkers(),this._touchHandled=!0,this._startPoint.call(this,a,l),this._endPoint.call(this,a,l,r),this._touchHandled=null),this._clickHandled=null},_onMouseOut:function(){this._tooltip&&this._tooltip._onMouseOut.call(this._tooltip)},_calculateFinishDistance:function(r){var a;if(this._markers.length>0){var l;if(this.type===L.Draw.Polyline.TYPE)l=this._markers[this._markers.length-1];else{if(this.type!==L.Draw.Polygon.TYPE)return 1/0;l=this._markers[0]}var d=this._map.latLngToContainerPoint(l.getLatLng()),p=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset}),g=this._map.latLngToContainerPoint(p.getLatLng());a=d.distanceTo(g)}else a=1/0;return a},_updateFinishHandler:function(){var r=this._markers.length;r>1&&this._markers[r-1].on("click",this._finishShape,this),r>2&&this._markers[r-2].off("click",this._finishShape,this)},_createMarker:function(r){var a=new L.Marker(r,{icon:this.options.icon,zIndexOffset:2*this.options.zIndexOffset});return this._markerGroup.addLayer(a),a},_updateGuide:function(r){var a=this._markers?this._markers.length:0;a>0&&(r=r||this._map.latLngToLayerPoint(this._currentLatLng),this._clearGuides(),this._drawGuide(this._map.latLngToLayerPoint(this._markers[a-1].getLatLng()),r))},_updateTooltip:function(r){var a=this._getTooltipText();r&&this._tooltip.updatePosition(r),this._errorShown||this._tooltip.updateContent(a)},_drawGuide:function(r,a){var l,d,p,g=Math.floor(Math.sqrt(Math.pow(a.x-r.x,2)+Math.pow(a.y-r.y,2))),m=this.options.guidelineDistance,_=this.options.maxGuideLineLength,A=g>_?g-_:m;for(this._guidesContainer||(this._guidesContainer=L.DomUtil.create("div","leaflet-draw-guides",this._overlayPane));A<g;A+=this.options.guidelineDistance)l=A/g,d={x:Math.floor(r.x*(1-l)+l*a.x),y:Math.floor(r.y*(1-l)+l*a.y)},p=L.DomUtil.create("div","leaflet-draw-guide-dash",this._guidesContainer),p.style.backgroundColor=this._errorShown?this.options.drawError.color:this.options.shapeOptions.color,L.DomUtil.setPosition(p,d)},_updateGuideColor:function(r){if(this._guidesContainer)for(var a=0,l=this._guidesContainer.childNodes.length;a<l;a++)this._guidesContainer.childNodes[a].style.backgroundColor=r},_clearGuides:function(){if(this._guidesContainer)for(;this._guidesContainer.firstChild;)this._guidesContainer.removeChild(this._guidesContainer.firstChild)},_getTooltipText:function(){var r,a,l=this.options.showLength;return this._markers.length===0?r={text:L.drawLocal.draw.handlers.polyline.tooltip.start}:(a=l?this._getMeasurementString():"",r=this._markers.length===1?{text:L.drawLocal.draw.handlers.polyline.tooltip.cont,subtext:a}:{text:L.drawLocal.draw.handlers.polyline.tooltip.end,subtext:a}),r},_updateRunningMeasure:function(r,a){var l,d,p=this._markers.length;this._markers.length===1?this._measurementRunningTotal=0:(l=p-(a?2:1),d=L.GeometryUtil.isVersion07x()?r.distanceTo(this._markers[l].getLatLng())*(this.options.factor||1):this._map.distance(r,this._markers[l].getLatLng())*(this.options.factor||1),this._measurementRunningTotal+=d*(a?1:-1))},_getMeasurementString:function(){var r,a=this._currentLatLng,l=this._markers[this._markers.length-1].getLatLng();return r=L.GeometryUtil.isVersion07x()?l&&a&&a.distanceTo?this._measurementRunningTotal+a.distanceTo(l)*(this.options.factor||1):this._measurementRunningTotal||0:l&&a?this._measurementRunningTotal+this._map.distance(a,l)*(this.options.factor||1):this._measurementRunningTotal||0,L.GeometryUtil.readableDistance(r,this.options.metric,this.options.feet,this.options.nautic,this.options.precision)},_showErrorTooltip:function(){this._errorShown=!0,this._tooltip.showAsError().updateContent({text:this.options.drawError.message}),this._updateGuideColor(this.options.drawError.color),this._poly.setStyle({color:this.options.drawError.color}),this._clearHideErrorTimeout(),this._hideErrorTimeout=setTimeout(L.Util.bind(this._hideErrorTooltip,this),this.options.drawError.timeout)},_hideErrorTooltip:function(){this._errorShown=!1,this._clearHideErrorTimeout(),this._tooltip.removeError().updateContent(this._getTooltipText()),this._updateGuideColor(this.options.shapeOptions.color),this._poly.setStyle({color:this.options.shapeOptions.color})},_clearHideErrorTimeout:function(){this._hideErrorTimeout&&(clearTimeout(this._hideErrorTimeout),this._hideErrorTimeout=null)},_disableNewMarkers:function(){this._disableMarkers=!0},_enableNewMarkers:function(){setTimeout((function(){this._disableMarkers=!1}).bind(this),50)},_cleanUpShape:function(){this._markers.length>1&&this._markers[this._markers.length-1].off("click",this._finishShape,this)},_fireCreatedEvent:function(){var r=new this.Poly(this._poly.getLatLngs(),this.options.shapeOptions);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.Polygon=L.Draw.Polyline.extend({statics:{TYPE:"polygon"},Poly:L.Polygon,options:{showArea:!1,showLength:!1,shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},metric:!0,feet:!0,nautic:!1,precision:{}},initialize:function(r,a){L.Draw.Polyline.prototype.initialize.call(this,r,a),this.type=L.Draw.Polygon.TYPE},_updateFinishHandler:function(){var r=this._markers.length;r===1&&this._markers[0].on("click",this._finishShape,this),r>2&&(this._markers[r-1].on("dblclick",this._finishShape,this),r>3&&this._markers[r-2].off("dblclick",this._finishShape,this))},_getTooltipText:function(){var r,a;return this._markers.length===0?r=L.drawLocal.draw.handlers.polygon.tooltip.start:this._markers.length<3?(r=L.drawLocal.draw.handlers.polygon.tooltip.cont,a=this._getMeasurementString()):(r=L.drawLocal.draw.handlers.polygon.tooltip.end,a=this._getMeasurementString()),{text:r,subtext:a}},_getMeasurementString:function(){var r=this._area,a="";return r||this.options.showLength?(this.options.showLength&&(a=L.Draw.Polyline.prototype._getMeasurementString.call(this)),r&&(a+="<br>"+L.GeometryUtil.readableArea(r,this.options.metric,this.options.precision)),a):null},_shapeIsValid:function(){return this._markers.length>=3},_vertexChanged:function(r,a){var l;!this.options.allowIntersection&&this.options.showArea&&(l=this._poly.getLatLngs(),this._area=L.GeometryUtil.geodesicArea(l)),L.Draw.Polyline.prototype._vertexChanged.call(this,r,a)},_cleanUpShape:function(){var r=this._markers.length;r>0&&(this._markers[0].off("click",this._finishShape,this),r>2&&this._markers[r-1].off("dblclick",this._finishShape,this))}}),L.SimpleShape={},L.Draw.SimpleShape=L.Draw.Feature.extend({options:{repeatMode:!1},initialize:function(r,a){this._endLabelText=L.drawLocal.draw.handlers.simpleshape.tooltip.end,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._mapDraggable=this._map.dragging.enabled(),this._mapDraggable&&this._map.dragging.disable(),this._container.style.cursor="crosshair",this._tooltip.updateContent({text:this._initialLabelText}),this._map.on("mousedown",this._onMouseDown,this).on("mousemove",this._onMouseMove,this).on("touchstart",this._onMouseDown,this).on("touchmove",this._onMouseMove,this),e.addEventListener("touchstart",L.DomEvent.preventDefault,{passive:!1}))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._mapDraggable&&this._map.dragging.enable(),this._container.style.cursor="",this._map.off("mousedown",this._onMouseDown,this).off("mousemove",this._onMouseMove,this).off("touchstart",this._onMouseDown,this).off("touchmove",this._onMouseMove,this),L.DomEvent.off(e,"mouseup",this._onMouseUp,this),L.DomEvent.off(e,"touchend",this._onMouseUp,this),e.removeEventListener("touchstart",L.DomEvent.preventDefault),this._shape&&(this._map.removeLayer(this._shape),delete this._shape)),this._isDrawing=!1},_getTooltipText:function(){return{text:this._endLabelText}},_onMouseDown:function(r){this._isDrawing=!0,this._startLatLng=r.latlng,L.DomEvent.on(e,"mouseup",this._onMouseUp,this).on(e,"touchend",this._onMouseUp,this).preventDefault(r.originalEvent)},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._isDrawing&&(this._tooltip.updateContent(this._getTooltipText()),this._drawShape(a))},_onMouseUp:function(){this._shape&&this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()}}),L.Draw.Rectangle=L.Draw.SimpleShape.extend({statics:{TYPE:"rectangle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showArea:!0,metric:!0},initialize:function(r,a){this.type=L.Draw.Rectangle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.rectangle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},disable:function(){this._enabled&&(this._isCurrentlyTwoClickDrawing=!1,L.Draw.SimpleShape.prototype.disable.call(this))},_onMouseUp:function(r){if(!this._shape&&!this._isCurrentlyTwoClickDrawing)return void(this._isCurrentlyTwoClickDrawing=!0);this._isCurrentlyTwoClickDrawing&&!i(r.target,"leaflet-pane")||L.Draw.SimpleShape.prototype._onMouseUp.call(this)},_drawShape:function(r){this._shape?this._shape.setBounds(new L.LatLngBounds(this._startLatLng,r)):(this._shape=new L.Rectangle(new L.LatLngBounds(this._startLatLng,r),this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Rectangle(this._shape.getBounds(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_getTooltipText:function(){var r,a,l,d=L.Draw.SimpleShape.prototype._getTooltipText.call(this),p=this._shape,g=this.options.showArea;return p&&(r=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),a=L.GeometryUtil.geodesicArea(r),l=g?L.GeometryUtil.readableArea(a,this.options.metric):""),{text:d.text,subtext:l}}}),L.Draw.Marker=L.Draw.Feature.extend({statics:{TYPE:"marker"},options:{icon:new L.Icon.Default,repeatMode:!1,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.Marker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.marker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},addHooks:function(){L.Draw.Feature.prototype.addHooks.call(this),this._map&&(this._tooltip.updateContent({text:this._initialLabelText}),this._mouseMarker||(this._mouseMarker=L.marker(this._map.getCenter(),{icon:L.divIcon({className:"leaflet-mouse-marker",iconAnchor:[20,20],iconSize:[40,40]}),opacity:0,zIndexOffset:this.options.zIndexOffset})),this._mouseMarker.on("click",this._onClick,this).addTo(this._map),this._map.on("mousemove",this._onMouseMove,this),this._map.on("click",this._onTouch,this))},removeHooks:function(){L.Draw.Feature.prototype.removeHooks.call(this),this._map&&(this._map.off("click",this._onClick,this).off("click",this._onTouch,this),this._marker&&(this._marker.off("click",this._onClick,this),this._map.removeLayer(this._marker),delete this._marker),this._mouseMarker.off("click",this._onClick,this),this._map.removeLayer(this._mouseMarker),delete this._mouseMarker,this._map.off("mousemove",this._onMouseMove,this))},_onMouseMove:function(r){var a=r.latlng;this._tooltip.updatePosition(a),this._mouseMarker.setLatLng(a),this._marker?(a=this._mouseMarker.getLatLng(),this._marker.setLatLng(a)):(this._marker=this._createMarker(a),this._marker.on("click",this._onClick,this),this._map.on("click",this._onClick,this).addLayer(this._marker))},_createMarker:function(r){return new L.Marker(r,{icon:this.options.icon,zIndexOffset:this.options.zIndexOffset})},_onClick:function(){this._fireCreatedEvent(),this.disable(),this.options.repeatMode&&this.enable()},_onTouch:function(r){this._onMouseMove(r),this._onClick()},_fireCreatedEvent:function(){var r=new L.Marker.Touch(this._marker.getLatLng(),{icon:this.options.icon});L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)}}),L.Draw.CircleMarker=L.Draw.Marker.extend({statics:{TYPE:"circlemarker"},options:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0,zIndexOffset:2e3},initialize:function(r,a){this.type=L.Draw.CircleMarker.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circlemarker.tooltip.start,L.Draw.Feature.prototype.initialize.call(this,r,a)},_fireCreatedEvent:function(){var r=new L.CircleMarker(this._marker.getLatLng(),this.options);L.Draw.Feature.prototype._fireCreatedEvent.call(this,r)},_createMarker:function(r){return new L.CircleMarker(r,this.options)}}),L.Draw.Circle=L.Draw.SimpleShape.extend({statics:{TYPE:"circle"},options:{shapeOptions:{stroke:!0,color:"#3388ff",weight:4,opacity:.5,fill:!0,fillColor:null,fillOpacity:.2,clickable:!0},showRadius:!0,metric:!0,feet:!0,nautic:!1},initialize:function(r,a){this.type=L.Draw.Circle.TYPE,this._initialLabelText=L.drawLocal.draw.handlers.circle.tooltip.start,L.Draw.SimpleShape.prototype.initialize.call(this,r,a)},_drawShape:function(r){if(L.GeometryUtil.isVersion07x())var a=this._startLatLng.distanceTo(r);else var a=this._map.distance(this._startLatLng,r);this._shape?this._shape.setRadius(a):(this._shape=new L.Circle(this._startLatLng,a,this.options.shapeOptions),this._map.addLayer(this._shape))},_fireCreatedEvent:function(){var r=new L.Circle(this._startLatLng,this._shape.getRadius(),this.options.shapeOptions);L.Draw.SimpleShape.prototype._fireCreatedEvent.call(this,r)},_onMouseMove:function(r){var a,l=r.latlng,d=this.options.showRadius,p=this.options.metric;if(this._tooltip.updatePosition(l),this._isDrawing){this._drawShape(l),a=this._shape.getRadius().toFixed(1);var g="";d&&(g=L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(a,p,this.options.feet,this.options.nautic)),this._tooltip.updateContent({text:this._endLabelText,subtext:g})}}}),L.Edit=L.Edit||{},L.Edit.Marker=L.Handler.extend({initialize:function(r,a){this._marker=r,L.setOptions(this,a)},addHooks:function(){var r=this._marker;r.dragging.enable(),r.on("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},removeHooks:function(){var r=this._marker;r.dragging.disable(),r.off("dragend",this._onDragEnd,r),this._toggleMarkerHighlight()},_onDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_toggleMarkerHighlight:function(){var r=this._marker._icon;r&&(r.style.display="none",L.DomUtil.hasClass(r,"leaflet-edit-marker-selected")?(L.DomUtil.removeClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,-4)):(L.DomUtil.addClass(r,"leaflet-edit-marker-selected"),this._offsetMarker(r,4)),r.style.display="")},_offsetMarker:function(r,a){var l=parseInt(r.style.marginTop,10)-a,d=parseInt(r.style.marginLeft,10)-a;r.style.marginTop=l+"px",r.style.marginLeft=d+"px"}}),L.Marker.addInitHook(function(){L.Edit.Marker&&(this.editing=new L.Edit.Marker(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.Poly=L.Handler.extend({initialize:function(r){this.latlngs=[r._latlngs],r._holes&&(this.latlngs=this.latlngs.concat(r._holes)),this._poly=r,this._poly.on("revert-edited",this._updateLatLngs,this)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._poly._latlngs)?this._poly._latlngs:this._poly._latlngs[0]:this._poly._latlngs},_eachVertexHandler:function(r){for(var a=0;a<this._verticesHandlers.length;a++)r(this._verticesHandlers[a])},addHooks:function(){this._initHandlers(),this._eachVertexHandler(function(r){r.addHooks()})},removeHooks:function(){this._eachVertexHandler(function(r){r.removeHooks()})},updateMarkers:function(){this._eachVertexHandler(function(r){r.updateMarkers()})},_initHandlers:function(){this._verticesHandlers=[];for(var r=0;r<this.latlngs.length;r++)this._verticesHandlers.push(new L.Edit.PolyVerticesEdit(this._poly,this.latlngs[r],this._poly.options.poly))},_updateLatLngs:function(r){this.latlngs=[r.layer._latlngs],r.layer._holes&&(this.latlngs=this.latlngs.concat(r.layer._holes))}}),L.Edit.PolyVerticesEdit=L.Handler.extend({options:{icon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon"}),touchIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-touch-icon"}),drawError:{color:"#b00b00",timeout:1e3}},initialize:function(r,a,l){L.Browser.touch&&(this.options.icon=this.options.touchIcon),this._poly=r,l&&l.drawError&&(l.drawError=L.Util.extend({},this.options.drawError,l.drawError)),this._latlngs=a,L.setOptions(this,l)},_defaultShape:function(){return L.Polyline._flat?L.Polyline._flat(this._latlngs)?this._latlngs:this._latlngs[0]:this._latlngs},addHooks:function(){var r=this._poly,a=r._path;r instanceof L.Polygon||(r.options.fill=!1,r.options.editing&&(r.options.editing.fill=!1)),a&&r.options.editing&&r.options.editing.className&&(r.options.original.className&&r.options.original.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),r.options.editing.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),r.setStyle(r.options.editing),this._poly._map&&(this._map=this._poly._map,this._markerGroup||this._initMarkers(),this._poly._map.addLayer(this._markerGroup))},removeHooks:function(){var r=this._poly,a=r._path;a&&r.options.editing&&r.options.editing.className&&(r.options.editing.className.split(" ").forEach(function(l){L.DomUtil.removeClass(a,l)}),r.options.original.className&&r.options.original.className.split(" ").forEach(function(l){L.DomUtil.addClass(a,l)})),r.setStyle(r.options.original),r._map&&(r._map.removeLayer(this._markerGroup),delete this._markerGroup,delete this._markers)},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._markers=[];var r,a,l,d,p=this._defaultShape();for(r=0,l=p.length;r<l;r++)d=this._createMarker(p[r],r),d.on("click",this._onMarkerClick,this),d.on("contextmenu",this._onContextMenu,this),this._markers.push(d);var g,m;for(r=0,a=l-1;r<l;a=r++)(r!==0||L.Polygon&&this._poly instanceof L.Polygon)&&(g=this._markers[a],m=this._markers[r],this._createMiddleMarker(g,m),this._updatePrevNext(g,m))},_createMarker:function(r,a){var l=new L.Marker.Touch(r,{draggable:!0,icon:this.options.icon});return l._origLatLng=r,l._index=a,l.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._fireEdit,this).on("touchmove",this._onTouchMove,this).on("touchend",this._fireEdit,this).on("MSPointerMove",this._onTouchMove,this).on("MSPointerUp",this._fireEdit,this),this._markerGroup.addLayer(l),l},_onMarkerDragStart:function(){this._poly.fire("editstart")},_spliceLatLngs:function(){var r=this._defaultShape(),a=[].splice.apply(r,arguments);return this._poly._convertLatLngs(r,!0),this._poly.redraw(),a},_removeMarker:function(r){var a=r._index;this._markerGroup.removeLayer(r),this._markers.splice(a,1),this._spliceLatLngs(a,1),this._updateIndexes(a,-1),r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._fireEdit,this).off("touchmove",this._onMarkerDrag,this).off("touchend",this._fireEdit,this).off("click",this._onMarkerClick,this).off("MSPointerMove",this._onTouchMove,this).off("MSPointerUp",this._fireEdit,this)},_fireEdit:function(){this._poly.edited=!0,this._poly.fire("edit"),this._poly._map.fire(L.Draw.Event.EDITVERTEX,{layers:this._markerGroup,poly:this._poly})},_onMarkerDrag:function(r){var a=r.target,l=this._poly,d=L.LatLngUtil.cloneLatLng(a._origLatLng);if(L.extend(a._origLatLng,a._latlng),l.options.poly){var p=l._map._editTooltip;if(!l.options.poly.allowIntersection&&l.intersects()){L.extend(a._origLatLng,d),a.setLatLng(d);var g=l.options.color;l.setStyle({color:this.options.drawError.color}),p&&p.updateContent({text:L.drawLocal.draw.handlers.polyline.error}),setTimeout(function(){l.setStyle({color:g}),p&&p.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext})},1e3)}}a._middleLeft&&a._middleLeft.setLatLng(this._getMiddleLatLng(a._prev,a)),a._middleRight&&a._middleRight.setLatLng(this._getMiddleLatLng(a,a._next)),this._poly._bounds._southWest=L.latLng(1/0,1/0),this._poly._bounds._northEast=L.latLng(-1/0,-1/0);var m=this._poly.getLatLngs();this._poly._convertLatLngs(m,!0),this._poly.redraw(),this._poly.fire("editdrag")},_onMarkerClick:function(r){var a=L.Polygon&&this._poly instanceof L.Polygon?4:3,l=r.target;this._defaultShape().length<a||(this._removeMarker(l),this._updatePrevNext(l._prev,l._next),l._middleLeft&&this._markerGroup.removeLayer(l._middleLeft),l._middleRight&&this._markerGroup.removeLayer(l._middleRight),l._prev&&l._next?this._createMiddleMarker(l._prev,l._next):l._prev?l._next||(l._prev._middleRight=null):l._next._middleLeft=null,this._fireEdit())},_onContextMenu:function(r){var a=r.target;this._poly,this._poly._map.fire(L.Draw.Event.MARKERCONTEXT,{marker:a,layers:this._markerGroup,poly:this._poly}),L.DomEvent.stopPropagation},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a),d=r.target;L.extend(d._origLatLng,l),d._middleLeft&&d._middleLeft.setLatLng(this._getMiddleLatLng(d._prev,d)),d._middleRight&&d._middleRight.setLatLng(this._getMiddleLatLng(d,d._next)),this._poly.redraw(),this.updateMarkers()},_updateIndexes:function(r,a){this._markerGroup.eachLayer(function(l){l._index>r&&(l._index+=a)})},_createMiddleMarker:function(r,a){var l,d,p,g=this._getMiddleLatLng(r,a),m=this._createMarker(g);m.setOpacity(.6),r._middleRight=a._middleLeft=m,d=function(){m.off("touchmove",d,this);var _=a._index;m._index=_,m.off("click",l,this).on("click",this._onMarkerClick,this),g.lat=m.getLatLng().lat,g.lng=m.getLatLng().lng,this._spliceLatLngs(_,0,g),this._markers.splice(_,0,m),m.setOpacity(1),this._updateIndexes(_,1),a._index++,this._updatePrevNext(r,m),this._updatePrevNext(m,a),this._poly.fire("editstart")},p=function(){m.off("dragstart",d,this),m.off("dragend",p,this),m.off("touchmove",d,this),this._createMiddleMarker(r,m),this._createMiddleMarker(m,a)},l=function(){d.call(this),p.call(this),this._fireEdit()},m.on("click",l,this).on("dragstart",d,this).on("dragend",p,this).on("touchmove",d,this),this._markerGroup.addLayer(m)},_updatePrevNext:function(r,a){r&&(r._next=a),a&&(a._prev=r)},_getMiddleLatLng:function(r,a){var l=this._poly._map,d=l.project(r.getLatLng()),p=l.project(a.getLatLng());return l.unproject(d._add(p)._divideBy(2))}}),L.Polyline.addInitHook(function(){this.editing||(L.Edit.Poly&&(this.editing=new L.Edit.Poly(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()}))}),L.Edit=L.Edit||{},L.Edit.SimpleShape=L.Handler.extend({options:{moveIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move"}),resizeIcon:new L.DivIcon({iconSize:new L.Point(8,8),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize"}),touchMoveIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-move leaflet-touch-icon"}),touchResizeIcon:new L.DivIcon({iconSize:new L.Point(20,20),className:"leaflet-div-icon leaflet-editing-icon leaflet-edit-resize leaflet-touch-icon"})},initialize:function(r,a){L.Browser.touch&&(this.options.moveIcon=this.options.touchMoveIcon,this.options.resizeIcon=this.options.touchResizeIcon),this._shape=r,L.Util.setOptions(this,a)},addHooks:function(){var r=this._shape;this._shape._map&&(this._map=this._shape._map,r.setStyle(r.options.editing),r._map&&(this._map=r._map,this._markerGroup||this._initMarkers(),this._map.addLayer(this._markerGroup)))},removeHooks:function(){var r=this._shape;if(r.setStyle(r.options.original),r._map){this._unbindMarker(this._moveMarker);for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._unbindMarker(this._resizeMarkers[a]);this._resizeMarkers=null,this._map.removeLayer(this._markerGroup),delete this._markerGroup}this._map=null},updateMarkers:function(){this._markerGroup.clearLayers(),this._initMarkers()},_initMarkers:function(){this._markerGroup||(this._markerGroup=new L.LayerGroup),this._createMoveMarker(),this._createResizeMarker()},_createMoveMarker:function(){},_createResizeMarker:function(){},_createMarker:function(r,a){var l=new L.Marker.Touch(r,{draggable:!0,icon:a,zIndexOffset:10});return this._bindMarker(l),this._markerGroup.addLayer(l),l},_bindMarker:function(r){r.on("dragstart",this._onMarkerDragStart,this).on("drag",this._onMarkerDrag,this).on("dragend",this._onMarkerDragEnd,this).on("touchstart",this._onTouchStart,this).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onTouchEnd,this).on("MSPointerUp",this._onTouchEnd,this)},_unbindMarker:function(r){r.off("dragstart",this._onMarkerDragStart,this).off("drag",this._onMarkerDrag,this).off("dragend",this._onMarkerDragEnd,this).off("touchstart",this._onTouchStart,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onTouchEnd,this).off("MSPointerUp",this._onTouchEnd,this)},_onMarkerDragStart:function(r){r.target.setOpacity(0),this._shape.fire("editstart")},_fireEdit:function(){this._shape.edited=!0,this._shape.fire("edit")},_onMarkerDrag:function(r){var a=r.target,l=a.getLatLng();a===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),this._shape.fire("editdrag")},_onMarkerDragEnd:function(r){r.target.setOpacity(1),this._fireEdit()},_onTouchStart:function(r){if(L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r),typeof this._getCorners=="function"){var a=this._getCorners(),l=r.target,d=l._cornerIndex;l.setOpacity(0),this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)}this._shape.fire("editstart")},_onTouchMove:function(r){var a=this._map.mouseEventToLayerPoint(r.originalEvent.touches[0]),l=this._map.layerPointToLatLng(a);return r.target===this._moveMarker?this._move(l):this._resize(l),this._shape.redraw(),!1},_onTouchEnd:function(r){r.target.setOpacity(1),this.updateMarkers(),this._fireEdit()},_move:function(){},_resize:function(){}}),L.Edit=L.Edit||{},L.Edit.Rectangle=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getBounds(),a=r.getCenter();this._moveMarker=this._createMarker(a,this.options.moveIcon)},_createResizeMarker:function(){var r=this._getCorners();this._resizeMarkers=[];for(var a=0,l=r.length;a<l;a++)this._resizeMarkers.push(this._createMarker(r[a],this.options.resizeIcon)),this._resizeMarkers[a]._cornerIndex=a},_onMarkerDragStart:function(r){L.Edit.SimpleShape.prototype._onMarkerDragStart.call(this,r);var a=this._getCorners(),l=r.target,d=l._cornerIndex;this._oppositeCorner=a[(d+2)%4],this._toggleCornerMarkers(0,d)},_onMarkerDragEnd:function(r){var a,l,d=r.target;d===this._moveMarker&&(a=this._shape.getBounds(),l=a.getCenter(),d.setLatLng(l)),this._toggleCornerMarkers(1),this._repositionCornerMarkers(),L.Edit.SimpleShape.prototype._onMarkerDragEnd.call(this,r)},_move:function(r){for(var a,l=this._shape._defaultShape?this._shape._defaultShape():this._shape.getLatLngs(),d=this._shape.getBounds(),p=d.getCenter(),g=[],m=0,_=l.length;m<_;m++)a=[l[m].lat-p.lat,l[m].lng-p.lng],g.push([r.lat+a[0],r.lng+a[1]]);this._shape.setLatLngs(g),this._repositionCornerMarkers(),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})},_resize:function(r){var a;this._shape.setBounds(L.latLngBounds(r,this._oppositeCorner)),a=this._shape.getBounds(),this._moveMarker.setLatLng(a.getCenter()),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})},_getCorners:function(){var r=this._shape.getBounds();return[r.getNorthWest(),r.getNorthEast(),r.getSouthEast(),r.getSouthWest()]},_toggleCornerMarkers:function(r){for(var a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setOpacity(r)},_repositionCornerMarkers:function(){for(var r=this._getCorners(),a=0,l=this._resizeMarkers.length;a<l;a++)this._resizeMarkers[a].setLatLng(r[a])}}),L.Rectangle.addInitHook(function(){L.Edit.Rectangle&&(this.editing=new L.Edit.Rectangle(this),this.options.editable&&this.editing.enable())}),L.Edit=L.Edit||{},L.Edit.CircleMarker=L.Edit.SimpleShape.extend({_createMoveMarker:function(){var r=this._shape.getLatLng();this._moveMarker=this._createMarker(r,this.options.moveIcon)},_createResizeMarker:function(){this._resizeMarkers=[]},_move:function(r){if(this._resizeMarkers.length){var a=this._getResizeMarkerPoint(r);this._resizeMarkers[0].setLatLng(a)}this._shape.setLatLng(r),this._map.fire(L.Draw.Event.EDITMOVE,{layer:this._shape})}}),L.CircleMarker.addInitHook(function(){L.Edit.CircleMarker&&(this.editing=new L.Edit.CircleMarker(this),this.options.editable&&this.editing.enable()),this.on("add",function(){this.editing&&this.editing.enabled()&&this.editing.addHooks()}),this.on("remove",function(){this.editing&&this.editing.enabled()&&this.editing.removeHooks()})}),L.Edit=L.Edit||{},L.Edit.Circle=L.Edit.CircleMarker.extend({_createResizeMarker:function(){var r=this._shape.getLatLng(),a=this._getResizeMarkerPoint(r);this._resizeMarkers=[],this._resizeMarkers.push(this._createMarker(a,this.options.resizeIcon))},_getResizeMarkerPoint:function(r){var a=this._shape._radius*Math.cos(Math.PI/4),l=this._map.project(r);return this._map.unproject([l.x+a,l.y-a])},_resize:function(r){var a=this._moveMarker.getLatLng();L.GeometryUtil.isVersion07x()?radius=a.distanceTo(r):radius=this._map.distance(a,r),this._shape.setRadius(radius),this._map.editTooltip&&this._map._editTooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.subtext+"<br />"+L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.draw.handlers.circle.radius+": "+L.GeometryUtil.readableDistance(radius,!0,this.options.feet,this.options.nautic)}),this._shape.setRadius(radius),this._map.fire(L.Draw.Event.EDITRESIZE,{layer:this._shape})}}),L.Circle.addInitHook(function(){L.Edit.Circle&&(this.editing=new L.Edit.Circle(this),this.options.editable&&this.editing.enable())}),L.Map.mergeOptions({touchExtend:!0}),L.Map.TouchExtend=L.Handler.extend({initialize:function(r){this._map=r,this._container=r._container,this._pane=r._panes.overlayPane},addHooks:function(){L.DomEvent.on(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.on(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.on(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.on(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.on(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.on(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.on(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.on(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.on(this._container,"touchleave",this._onTouchLeave,this))},removeHooks:function(){L.DomEvent.off(this._container,"touchstart",this._onTouchStart,this),L.DomEvent.off(this._container,"touchend",this._onTouchEnd,this),L.DomEvent.off(this._container,"touchmove",this._onTouchMove,this),this._detectIE()?(L.DomEvent.off(this._container,"MSPointerDown",this._onTouchStart,this),L.DomEvent.off(this._container,"MSPointerUp",this._onTouchEnd,this),L.DomEvent.off(this._container,"MSPointerMove",this._onTouchMove,this),L.DomEvent.off(this._container,"MSPointerCancel",this._onTouchCancel,this)):(L.DomEvent.off(this._container,"touchcancel",this._onTouchCancel,this),L.DomEvent.off(this._container,"touchleave",this._onTouchLeave,this))},_touchEvent:function(r,a){var l={};if(r.touches!==void 0){if(!r.touches.length)return;l=r.touches[0]}else if(r.pointerType!=="touch"||(l=r,!this._filterClick(r)))return;var d=this._map.mouseEventToContainerPoint(l),p=this._map.mouseEventToLayerPoint(l),g=this._map.layerPointToLatLng(p);this._map.fire(a,{latlng:g,layerPoint:p,containerPoint:d,pageX:l.pageX,pageY:l.pageY,originalEvent:r})},_filterClick:function(r){var a=r.timeStamp||r.originalEvent.timeStamp,l=L.DomEvent._lastClick&&a-L.DomEvent._lastClick;return l&&l>100&&l<500||r.target._simulatedClick&&!r._simulated?(L.DomEvent.stop(r),!1):(L.DomEvent._lastClick=a,!0)},_onTouchStart:function(r){this._map._loaded&&this._touchEvent(r,"touchstart")},_onTouchEnd:function(r){this._map._loaded&&this._touchEvent(r,"touchend")},_onTouchCancel:function(r){if(this._map._loaded){var a="touchcancel";this._detectIE()&&(a="pointercancel"),this._touchEvent(r,a)}},_onTouchLeave:function(r){this._map._loaded&&this._touchEvent(r,"touchleave")},_onTouchMove:function(r){this._map._loaded&&this._touchEvent(r,"touchmove")},_detectIE:function(){var r=t.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var l=r.indexOf("rv:");return parseInt(r.substring(l+3,r.indexOf(".",l)),10)}var d=r.indexOf("Edge/");return d>0&&parseInt(r.substring(d+5,r.indexOf(".",d)),10)}}),L.Map.addInitHook("addHandler","touchExtend",L.Map.TouchExtend),L.Marker.Touch=L.Marker.extend({_initInteraction:function(){return this.addInteractiveTarget?L.Marker.prototype._initInteraction.apply(this):this._initInteractionLegacy()},_initInteractionLegacy:function(){if(this.options.clickable){var r=this._icon,a=["dblclick","mousedown","mouseover","mouseout","contextmenu","touchstart","touchend","touchmove"];this._detectIE?a.concat(["MSPointerDown","MSPointerUp","MSPointerMove","MSPointerCancel"]):a.concat(["touchcancel"]),L.DomUtil.addClass(r,"leaflet-clickable"),L.DomEvent.on(r,"click",this._onMouseClick,this),L.DomEvent.on(r,"keypress",this._onKeyPress,this);for(var l=0;l<a.length;l++)L.DomEvent.on(r,a[l],this._fireMouseEvent,this);L.Handler.MarkerDrag&&(this.dragging=new L.Handler.MarkerDrag(this),this.options.draggable&&this.dragging.enable())}},_detectIE:function(){var r=t.navigator.userAgent,a=r.indexOf("MSIE ");if(a>0)return parseInt(r.substring(a+5,r.indexOf(".",a)),10);if(r.indexOf("Trident/")>0){var l=r.indexOf("rv:");return parseInt(r.substring(l+3,r.indexOf(".",l)),10)}var d=r.indexOf("Edge/");return d>0&&parseInt(r.substring(d+5,r.indexOf(".",d)),10)}}),L.LatLngUtil={cloneLatLngs:function(r){for(var a=[],l=0,d=r.length;l<d;l++)Array.isArray(r[l])?a.push(L.LatLngUtil.cloneLatLngs(r[l])):a.push(this.cloneLatLng(r[l]));return a},cloneLatLng:function(r){return L.latLng(r.lat,r.lng)}},(function(){var r={km:2,ha:2,m:0,mi:2,ac:2,yd:0,ft:0,nm:2};L.GeometryUtil=L.extend(L.GeometryUtil||{},{geodesicArea:function(a){var l,d,p=a.length,g=0,m=Math.PI/180;if(p>2){for(var _=0;_<p;_++)l=a[_],d=a[(_+1)%p],g+=(d.lng-l.lng)*m*(2+Math.sin(l.lat*m)+Math.sin(d.lat*m));g=6378137*g*6378137/2}return Math.abs(g)},formattedNumber:function(a,l){var d=parseFloat(a).toFixed(l),p=L.drawLocal.format&&L.drawLocal.format.numeric,g=p&&p.delimiters,m=g&&g.thousands,_=g&&g.decimal;if(m||_){var A=d.split(".");d=m?A[0].replace(/(\d)(?=(\d{3})+(?!\d))/g,"$1"+m):A[0],_=_||".",A.length>1&&(d=d+_+A[1])}return d},readableArea:function(a,l,m){var p,g,m=L.Util.extend({},r,m);return l?(g=["ha","m"],type=typeof l,type==="string"?g=[l]:type!=="boolean"&&(g=l),p=a>=1e6&&g.indexOf("km")!==-1?L.GeometryUtil.formattedNumber(1e-6*a,m.km)+" km":a>=1e4&&g.indexOf("ha")!==-1?L.GeometryUtil.formattedNumber(1e-4*a,m.ha)+" ha":L.GeometryUtil.formattedNumber(a,m.m)+" m"):(a/=.836127,p=a>=3097600?L.GeometryUtil.formattedNumber(a/3097600,m.mi)+" mi":a>=4840?L.GeometryUtil.formattedNumber(a/4840,m.ac)+" acres":L.GeometryUtil.formattedNumber(a,m.yd)+" yd"),p},readableDistance:function(a,l,d,p,_){var m,_=L.Util.extend({},r,_);switch(l?typeof l=="string"?l:"metric":d?"feet":p?"nauticalMile":"yards"){case"metric":m=a>1e3?L.GeometryUtil.formattedNumber(a/1e3,_.km)+" km":L.GeometryUtil.formattedNumber(a,_.m)+" m";break;case"feet":a*=3.28083,m=L.GeometryUtil.formattedNumber(a,_.ft)+" ft";break;case"nauticalMile":a*=.53996,m=L.GeometryUtil.formattedNumber(a/1e3,_.nm)+" nm";break;default:a*=1.09361,m=a>1760?L.GeometryUtil.formattedNumber(a/1760,_.mi)+" miles":L.GeometryUtil.formattedNumber(a,_.yd)+" yd"}return m},isVersion07x:function(){var a=L.version.split(".");return parseInt(a[0],10)===0&&parseInt(a[1],10)===7}})})(),L.Util.extend(L.LineUtil,{segmentsIntersect:function(r,a,l,d){return this._checkCounterclockwise(r,l,d)!==this._checkCounterclockwise(a,l,d)&&this._checkCounterclockwise(r,a,l)!==this._checkCounterclockwise(r,a,d)},_checkCounterclockwise:function(r,a,l){return(l.y-r.y)*(a.x-r.x)>(a.y-r.y)*(l.x-r.x)}}),L.Polyline.include({intersects:function(){var r,a,l,d=this._getProjectedPoints(),p=d?d.length:0;if(this._tooFewPointsForIntersection())return!1;for(r=p-1;r>=3;r--)if(a=d[r-1],l=d[r],this._lineSegmentsIntersectsRange(a,l,r-2))return!0;return!1},newLatLngIntersects:function(r,a){return!!this._map&&this.newPointIntersects(this._map.latLngToLayerPoint(r),a)},newPointIntersects:function(r,a){var l=this._getProjectedPoints(),d=l?l.length:0,p=l?l[d-1]:null,g=d-2;return!this._tooFewPointsForIntersection(1)&&this._lineSegmentsIntersectsRange(p,r,g,a?1:0)},_tooFewPointsForIntersection:function(r){var a=this._getProjectedPoints(),l=a?a.length:0;return l+=r||0,!a||l<=3},_lineSegmentsIntersectsRange:function(r,a,l,d){var p,g,m=this._getProjectedPoints();d=d||0;for(var _=l;_>d;_--)if(p=m[_-1],g=m[_],L.LineUtil.segmentsIntersect(r,a,p,g))return!0;return!1},_getProjectedPoints:function(){if(!this._defaultShape)return this._originalPoints;for(var r=[],a=this._defaultShape(),l=0;l<a.length;l++)r.push(this._map.latLngToLayerPoint(a[l]));return r}}),L.Polygon.include({intersects:function(){var r,a,l,d,p=this._getProjectedPoints();return!this._tooFewPointsForIntersection()&&(!!L.Polyline.prototype.intersects.call(this)||(r=p.length,a=p[0],l=p[r-1],d=r-2,this._lineSegmentsIntersectsRange(l,a,d,1)))}}),L.Control.Draw=L.Control.extend({options:{position:"topleft",draw:{},edit:!1},initialize:function(r){if(L.version<"0.7")throw new Error("Leaflet.draw 0.2.3+ requires Leaflet 0.7.0+. Download latest from https://github.com/Leaflet/Leaflet/");L.Control.prototype.initialize.call(this,r);var a;this._toolbars={},L.DrawToolbar&&this.options.draw&&(a=new L.DrawToolbar(this.options.draw),this._toolbars[L.DrawToolbar.TYPE]=a,this._toolbars[L.DrawToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.EditToolbar&&this.options.edit&&(a=new L.EditToolbar(this.options.edit),this._toolbars[L.EditToolbar.TYPE]=a,this._toolbars[L.EditToolbar.TYPE].on("enable",this._toolbarEnabled,this)),L.toolbar=this},onAdd:function(r){var a,l=L.DomUtil.create("div","leaflet-draw"),d=!1;for(var p in this._toolbars)this._toolbars.hasOwnProperty(p)&&(a=this._toolbars[p].addToolbar(r))&&(d||(L.DomUtil.hasClass(a,"leaflet-draw-toolbar-top")||L.DomUtil.addClass(a.childNodes[0],"leaflet-draw-toolbar-top"),d=!0),l.appendChild(a));return l},onRemove:function(){for(var r in this._toolbars)this._toolbars.hasOwnProperty(r)&&this._toolbars[r].removeToolbar()},setDrawingOptions:function(r){for(var a in this._toolbars)this._toolbars[a]instanceof L.DrawToolbar&&this._toolbars[a].setOptions(r)},_toolbarEnabled:function(r){var a=r.target;for(var l in this._toolbars)this._toolbars[l]!==a&&this._toolbars[l].disable()}}),L.Map.mergeOptions({drawControlTooltips:!0,drawControl:!1}),L.Map.addInitHook(function(){this.options.drawControl&&(this.drawControl=new L.Control.Draw,this.addControl(this.drawControl))}),L.Toolbar=L.Class.extend({initialize:function(r){L.setOptions(this,r),this._modes={},this._actionButtons=[],this._activeMode=null;var a=L.version.split(".");parseInt(a[0],10)===1&&parseInt(a[1],10)>=2?L.Toolbar.include(L.Evented.prototype):L.Toolbar.include(L.Mixin.Events)},enabled:function(){return this._activeMode!==null},disable:function(){this.enabled()&&this._activeMode.handler.disable()},addToolbar:function(r){var a,l=L.DomUtil.create("div","leaflet-draw-section"),d=0,p=this._toolbarClass||"",g=this.getModeHandlers(r);for(this._toolbarContainer=L.DomUtil.create("div","leaflet-draw-toolbar leaflet-bar"),this._map=r,a=0;a<g.length;a++)g[a].enabled&&this._initModeHandler(g[a].handler,this._toolbarContainer,d++,p,g[a].title);if(d)return this._lastButtonIndex=--d,this._actionsContainer=L.DomUtil.create("ul","leaflet-draw-actions"),l.appendChild(this._toolbarContainer),l.appendChild(this._actionsContainer),l},removeToolbar:function(){for(var r in this._modes)this._modes.hasOwnProperty(r)&&(this._disposeButton(this._modes[r].button,this._modes[r].handler.enable,this._modes[r].handler),this._modes[r].handler.disable(),this._modes[r].handler.off("enabled",this._handlerActivated,this).off("disabled",this._handlerDeactivated,this));this._modes={};for(var a=0,l=this._actionButtons.length;a<l;a++)this._disposeButton(this._actionButtons[a].button,this._actionButtons[a].callback,this);this._actionButtons=[],this._actionsContainer=null},_initModeHandler:function(r,a,l,d,p){var g=r.type;this._modes[g]={},this._modes[g].handler=r,this._modes[g].button=this._createButton({type:g,title:p,className:d+"-"+g,container:a,callback:this._modes[g].handler.enable,context:this._modes[g].handler}),this._modes[g].buttonIndex=l,this._modes[g].handler.on("enabled",this._handlerActivated,this).on("disabled",this._handlerDeactivated,this)},_detectIOS:function(){return/iPad|iPhone|iPod/.test(navigator.userAgent)&&!t.MSStream},_createButton:function(r){var a=L.DomUtil.create("a",r.className||"",r.container),l=L.DomUtil.create("span","sr-only",r.container);a.href="#",a.appendChild(l),r.title&&(a.title=r.title,l.innerHTML=r.title),r.text&&(a.innerHTML=r.text,l.innerHTML=r.text);var d=this._detectIOS()?"touchstart":"click";return L.DomEvent.on(a,"click",L.DomEvent.stopPropagation).on(a,"mousedown",L.DomEvent.stopPropagation).on(a,"dblclick",L.DomEvent.stopPropagation).on(a,"touchstart",L.DomEvent.stopPropagation).on(a,"click",L.DomEvent.preventDefault).on(a,d,r.callback,r.context),a},_disposeButton:function(r,a){var l=this._detectIOS()?"touchstart":"click";L.DomEvent.off(r,"click",L.DomEvent.stopPropagation).off(r,"mousedown",L.DomEvent.stopPropagation).off(r,"dblclick",L.DomEvent.stopPropagation).off(r,"touchstart",L.DomEvent.stopPropagation).off(r,"click",L.DomEvent.preventDefault).off(r,l,a)},_handlerActivated:function(r){this.disable(),this._activeMode=this._modes[r.handler],L.DomUtil.addClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._showActionsToolbar(),this.fire("enable")},_handlerDeactivated:function(){this._hideActionsToolbar(),L.DomUtil.removeClass(this._activeMode.button,"leaflet-draw-toolbar-button-enabled"),this._activeMode=null,this.fire("disable")},_createActions:function(r){var a,l,d,p,g=this._actionsContainer,m=this.getActions(r),_=m.length;for(l=0,d=this._actionButtons.length;l<d;l++)this._disposeButton(this._actionButtons[l].button,this._actionButtons[l].callback);for(this._actionButtons=[];g.firstChild;)g.removeChild(g.firstChild);for(var A=0;A<_;A++)"enabled"in m[A]&&!m[A].enabled||(a=L.DomUtil.create("li","",g),p=this._createButton({title:m[A].title,text:m[A].text,container:a,callback:m[A].callback,context:m[A].context}),this._actionButtons.push({button:p,callback:m[A].callback}))},_showActionsToolbar:function(){var r=this._activeMode.buttonIndex,a=this._lastButtonIndex,l=this._activeMode.button.offsetTop-1;this._createActions(this._activeMode.handler),this._actionsContainer.style.top=l+"px",r===0&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-top")),r===a&&(L.DomUtil.addClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.addClass(this._actionsContainer,"leaflet-draw-actions-bottom")),this._actionsContainer.style.display="block",this._map.fire(L.Draw.Event.TOOLBAROPENED)},_hideActionsToolbar:function(){this._actionsContainer.style.display="none",L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-notop"),L.DomUtil.removeClass(this._toolbarContainer,"leaflet-draw-toolbar-nobottom"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-top"),L.DomUtil.removeClass(this._actionsContainer,"leaflet-draw-actions-bottom"),this._map.fire(L.Draw.Event.TOOLBARCLOSED)}}),L.Draw=L.Draw||{},L.Draw.Tooltip=L.Class.extend({initialize:function(r){this._map=r,this._popupPane=r._panes.popupPane,this._visible=!1,this._container=r.options.drawControlTooltips?L.DomUtil.create("div","leaflet-draw-tooltip",this._popupPane):null,this._singleLineLabel=!1,this._map.on("mouseout",this._onMouseOut,this)},dispose:function(){this._map.off("mouseout",this._onMouseOut,this),this._container&&(this._popupPane.removeChild(this._container),this._container=null)},updateContent:function(r){return this._container?(r.subtext=r.subtext||"",r.subtext.length!==0||this._singleLineLabel?r.subtext.length>0&&this._singleLineLabel&&(L.DomUtil.removeClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!1):(L.DomUtil.addClass(this._container,"leaflet-draw-tooltip-single"),this._singleLineLabel=!0),this._container.innerHTML=(r.subtext.length>0?'<span class="leaflet-draw-tooltip-subtext">'+r.subtext+"</span><br />":"")+"<span>"+r.text+"</span>",r.text||r.subtext?(this._visible=!0,this._container.style.visibility="inherit"):(this._visible=!1,this._container.style.visibility="hidden"),this):this},updatePosition:function(r){var a=this._map.latLngToLayerPoint(r),l=this._container;return this._container&&(this._visible&&(l.style.visibility="inherit"),L.DomUtil.setPosition(l,a)),this},showAsError:function(){return this._container&&L.DomUtil.addClass(this._container,"leaflet-error-draw-tooltip"),this},removeError:function(){return this._container&&L.DomUtil.removeClass(this._container,"leaflet-error-draw-tooltip"),this},_onMouseOut:function(){this._container&&(this._container.style.visibility="hidden")}}),L.DrawToolbar=L.Toolbar.extend({statics:{TYPE:"draw"},options:{polyline:{},polygon:{},rectangle:{},circle:{},marker:{},circlemarker:{}},initialize:function(r){for(var a in this.options)this.options.hasOwnProperty(a)&&r[a]&&(r[a]=L.extend({},this.options[a],r[a]));this._toolbarClass="leaflet-draw-draw",L.Toolbar.prototype.initialize.call(this,r)},getModeHandlers:function(r){return[{enabled:this.options.polyline,handler:new L.Draw.Polyline(r,this.options.polyline),title:L.drawLocal.draw.toolbar.buttons.polyline},{enabled:this.options.polygon,handler:new L.Draw.Polygon(r,this.options.polygon),title:L.drawLocal.draw.toolbar.buttons.polygon},{enabled:this.options.rectangle,handler:new L.Draw.Rectangle(r,this.options.rectangle),title:L.drawLocal.draw.toolbar.buttons.rectangle},{enabled:this.options.circle,handler:new L.Draw.Circle(r,this.options.circle),title:L.drawLocal.draw.toolbar.buttons.circle},{enabled:this.options.marker,handler:new L.Draw.Marker(r,this.options.marker),title:L.drawLocal.draw.toolbar.buttons.marker},{enabled:this.options.circlemarker,handler:new L.Draw.CircleMarker(r,this.options.circlemarker),title:L.drawLocal.draw.toolbar.buttons.circlemarker}]},getActions:function(r){return[{enabled:r.completeShape,title:L.drawLocal.draw.toolbar.finish.title,text:L.drawLocal.draw.toolbar.finish.text,callback:r.completeShape,context:r},{enabled:r.deleteLastVertex,title:L.drawLocal.draw.toolbar.undo.title,text:L.drawLocal.draw.toolbar.undo.text,callback:r.deleteLastVertex,context:r},{title:L.drawLocal.draw.toolbar.actions.title,text:L.drawLocal.draw.toolbar.actions.text,callback:this.disable,context:this}]},setOptions:function(r){L.setOptions(this,r);for(var a in this._modes)this._modes.hasOwnProperty(a)&&r.hasOwnProperty(a)&&this._modes[a].handler.setOptions(r[a])}}),L.EditToolbar=L.Toolbar.extend({statics:{TYPE:"edit"},options:{edit:{selectedPathOptions:{dashArray:"10, 10",fill:!0,fillColor:"#fe57a1",fillOpacity:.1,maintainColor:!1}},remove:{},poly:null,featureGroup:null},initialize:function(r){r.edit&&(r.edit.selectedPathOptions===void 0&&(r.edit.selectedPathOptions=this.options.edit.selectedPathOptions),r.edit.selectedPathOptions=L.extend({},this.options.edit.selectedPathOptions,r.edit.selectedPathOptions)),r.remove&&(r.remove=L.extend({},this.options.remove,r.remove)),r.poly&&(r.poly=L.extend({},this.options.poly,r.poly)),this._toolbarClass="leaflet-draw-edit",L.Toolbar.prototype.initialize.call(this,r),this._selectedFeatureCount=0},getModeHandlers:function(r){var a=this.options.featureGroup;return[{enabled:this.options.edit,handler:new L.EditToolbar.Edit(r,{featureGroup:a,selectedPathOptions:this.options.edit.selectedPathOptions,poly:this.options.poly}),title:L.drawLocal.edit.toolbar.buttons.edit},{enabled:this.options.remove,handler:new L.EditToolbar.Delete(r,{featureGroup:a}),title:L.drawLocal.edit.toolbar.buttons.remove}]},getActions:function(r){var a=[{title:L.drawLocal.edit.toolbar.actions.save.title,text:L.drawLocal.edit.toolbar.actions.save.text,callback:this._save,context:this},{title:L.drawLocal.edit.toolbar.actions.cancel.title,text:L.drawLocal.edit.toolbar.actions.cancel.text,callback:this.disable,context:this}];return r.removeAllLayers&&a.push({title:L.drawLocal.edit.toolbar.actions.clearAll.title,text:L.drawLocal.edit.toolbar.actions.clearAll.text,callback:this._clearAllLayers,context:this}),a},addToolbar:function(r){var a=L.Toolbar.prototype.addToolbar.call(this,r);return this._checkDisabled(),this.options.featureGroup.on("layeradd layerremove",this._checkDisabled,this),a},removeToolbar:function(){this.options.featureGroup.off("layeradd layerremove",this._checkDisabled,this),L.Toolbar.prototype.removeToolbar.call(this)},disable:function(){this.enabled()&&(this._activeMode.handler.revertLayers(),L.Toolbar.prototype.disable.call(this))},_save:function(){this._activeMode.handler.save(),this._activeMode&&this._activeMode.handler.disable()},_clearAllLayers:function(){this._activeMode.handler.removeAllLayers(),this._activeMode&&this._activeMode.handler.disable()},_checkDisabled:function(){var r,a=this.options.featureGroup,l=a.getLayers().length!==0;this.options.edit&&(r=this._modes[L.EditToolbar.Edit.TYPE].button,l?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.edit:L.drawLocal.edit.toolbar.buttons.editDisabled)),this.options.remove&&(r=this._modes[L.EditToolbar.Delete.TYPE].button,l?L.DomUtil.removeClass(r,"leaflet-disabled"):L.DomUtil.addClass(r,"leaflet-disabled"),r.setAttribute("title",l?L.drawLocal.edit.toolbar.buttons.remove:L.drawLocal.edit.toolbar.buttons.removeDisabled))}}),L.EditToolbar.Edit=L.Handler.extend({statics:{TYPE:"edit"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.setOptions(this,a),this._featureGroup=a.featureGroup,!(this._featureGroup instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this._uneditedLayerProps={},this.type=L.EditToolbar.Edit.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Edit.include(L.Evented.prototype):L.EditToolbar.Edit.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.EDITSTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._featureGroup.on("layeradd",this._enableLayerEdit,this).on("layerremove",this._disableLayerEdit,this))},disable:function(){this._enabled&&(this._featureGroup.off("layeradd",this._enableLayerEdit,this).off("layerremove",this._disableLayerEdit,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.EDITSTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._featureGroup.eachLayer(this._enableLayerEdit,this),this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}),r._editTooltip=this._tooltip,this._updateTooltip(),this._map.on("mousemove",this._onMouseMove,this).on("touchmove",this._onMouseMove,this).on("MSPointerMove",this._onMouseMove,this).on(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},removeHooks:function(){this._map&&(this._featureGroup.eachLayer(this._disableLayerEdit,this),this._uneditedLayerProps={},this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this).off("touchmove",this._onMouseMove,this).off("MSPointerMove",this._onMouseMove,this).off(L.Draw.Event.EDITVERTEX,this._updateTooltip,this))},revertLayers:function(){this._featureGroup.eachLayer(function(r){this._revertLayer(r)},this)},save:function(){var r=new L.LayerGroup;this._featureGroup.eachLayer(function(a){a.edited&&(r.addLayer(a),a.edited=!1)}),this._map.fire(L.Draw.Event.EDITED,{layers:r})},_backupLayer:function(r){var a=L.Util.stamp(r);this._uneditedLayerProps[a]||(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?this._uneditedLayerProps[a]={latlngs:L.LatLngUtil.cloneLatLngs(r.getLatLngs())}:r instanceof L.Circle?this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng()),radius:r.getRadius()}:(r instanceof L.Marker||r instanceof L.CircleMarker)&&(this._uneditedLayerProps[a]={latlng:L.LatLngUtil.cloneLatLng(r.getLatLng())}))},_getTooltipText:function(){return{text:L.drawLocal.edit.handlers.edit.tooltip.text,subtext:L.drawLocal.edit.handlers.edit.tooltip.subtext}},_updateTooltip:function(){this._tooltip.updateContent(this._getTooltipText())},_revertLayer:function(r){var a=L.Util.stamp(r);r.edited=!1,this._uneditedLayerProps.hasOwnProperty(a)&&(r instanceof L.Polyline||r instanceof L.Polygon||r instanceof L.Rectangle?r.setLatLngs(this._uneditedLayerProps[a].latlngs):r instanceof L.Circle?(r.setLatLng(this._uneditedLayerProps[a].latlng),r.setRadius(this._uneditedLayerProps[a].radius)):(r instanceof L.Marker||r instanceof L.CircleMarker)&&r.setLatLng(this._uneditedLayerProps[a].latlng),r.fire("revert-edited",{layer:r}))},_enableLayerEdit:function(r){var a,l,d=r.layer||r.target||r;this._backupLayer(d),this.options.poly&&(l=L.Util.extend({},this.options.poly),d.options.poly=l),this.options.selectedPathOptions&&(a=L.Util.extend({},this.options.selectedPathOptions),a.maintainColor&&(a.color=d.options.color,a.fillColor=d.options.fillColor),d.options.original=L.extend({},d.options),d.options.editing=a),d instanceof L.Marker?(d.editing&&d.editing.enable(),d.dragging.enable(),d.on("dragend",this._onMarkerDragEnd).on("touchmove",this._onTouchMove,this).on("MSPointerMove",this._onTouchMove,this).on("touchend",this._onMarkerDragEnd,this).on("MSPointerUp",this._onMarkerDragEnd,this)):d.editing.enable()},_disableLayerEdit:function(r){var a=r.layer||r.target||r;a.edited=!1,a.editing&&a.editing.disable(),delete a.options.editing,delete a.options.original,this._selectedPathOptions&&(a instanceof L.Marker?this._toggleMarkerHighlight(a):(a.setStyle(a.options.previousOptions),delete a.options.previousOptions)),a instanceof L.Marker?(a.dragging.disable(),a.off("dragend",this._onMarkerDragEnd,this).off("touchmove",this._onTouchMove,this).off("MSPointerMove",this._onTouchMove,this).off("touchend",this._onMarkerDragEnd,this).off("MSPointerUp",this._onMarkerDragEnd,this)):a.editing.disable()},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_onMarkerDragEnd:function(r){var a=r.target;a.edited=!0,this._map.fire(L.Draw.Event.EDITMOVE,{layer:a})},_onTouchMove:function(r){var a=r.originalEvent.changedTouches[0],l=this._map.mouseEventToLayerPoint(a),d=this._map.layerPointToLatLng(l);r.target.setLatLng(d)},_hasAvailableLayers:function(){return this._featureGroup.getLayers().length!==0}}),L.EditToolbar.Delete=L.Handler.extend({statics:{TYPE:"remove"},initialize:function(r,a){if(L.Handler.prototype.initialize.call(this,r),L.Util.setOptions(this,a),this._deletableLayers=this.options.featureGroup,!(this._deletableLayers instanceof L.FeatureGroup))throw new Error("options.featureGroup must be a L.FeatureGroup");this.type=L.EditToolbar.Delete.TYPE;var l=L.version.split(".");parseInt(l[0],10)===1&&parseInt(l[1],10)>=2?L.EditToolbar.Delete.include(L.Evented.prototype):L.EditToolbar.Delete.include(L.Mixin.Events)},enable:function(){!this._enabled&&this._hasAvailableLayers()&&(this.fire("enabled",{handler:this.type}),this._map.fire(L.Draw.Event.DELETESTART,{handler:this.type}),L.Handler.prototype.enable.call(this),this._deletableLayers.on("layeradd",this._enableLayerDelete,this).on("layerremove",this._disableLayerDelete,this))},disable:function(){this._enabled&&(this._deletableLayers.off("layeradd",this._enableLayerDelete,this).off("layerremove",this._disableLayerDelete,this),L.Handler.prototype.disable.call(this),this._map.fire(L.Draw.Event.DELETESTOP,{handler:this.type}),this.fire("disabled",{handler:this.type}))},addHooks:function(){var r=this._map;r&&(r.getContainer().focus(),this._deletableLayers.eachLayer(this._enableLayerDelete,this),this._deletedLayers=new L.LayerGroup,this._tooltip=new L.Draw.Tooltip(this._map),this._tooltip.updateContent({text:L.drawLocal.edit.handlers.remove.tooltip.text}),this._map.on("mousemove",this._onMouseMove,this))},removeHooks:function(){this._map&&(this._deletableLayers.eachLayer(this._disableLayerDelete,this),this._deletedLayers=null,this._tooltip.dispose(),this._tooltip=null,this._map.off("mousemove",this._onMouseMove,this))},revertLayers:function(){this._deletedLayers.eachLayer(function(r){this._deletableLayers.addLayer(r),r.fire("revert-deleted",{layer:r})},this)},save:function(){this._map.fire(L.Draw.Event.DELETED,{layers:this._deletedLayers})},removeAllLayers:function(){this._deletableLayers.eachLayer(function(r){this._removeLayer({layer:r})},this),this.save()},_enableLayerDelete:function(r){(r.layer||r.target||r).on("click",this._removeLayer,this)},_disableLayerDelete:function(r){var a=r.layer||r.target||r;a.off("click",this._removeLayer,this),this._deletedLayers.removeLayer(a)},_removeLayer:function(r){var a=r.layer||r.target||r;this._deletableLayers.removeLayer(a),this._deletedLayers.addLayer(a),a.fire("deleted")},_onMouseMove:function(r){this._tooltip.updatePosition(r.latlng)},_hasAvailableLayers:function(){return this._deletableLayers.getLayers().length!==0}})})(window,document);var nv,Hb;function M3(){return Hb||(Hb=1,nv=function t(e,n){if(e===n)return!0;if(e&&n&&typeof e=="object"&&typeof n=="object"){if(e.constructor!==n.constructor)return!1;var i,r,a;if(Array.isArray(e)){if(i=e.length,i!=n.length)return!1;for(r=i;r--!==0;)if(!t(e[r],n[r]))return!1;return!0}if(e.constructor===RegExp)return e.source===n.source&&e.flags===n.flags;if(e.valueOf!==Object.prototype.valueOf)return e.valueOf()===n.valueOf();if(e.toString!==Object.prototype.toString)return e.toString()===n.toString();if(a=Object.keys(e),i=a.length,i!==Object.keys(n).length)return!1;for(r=i;r--!==0;)if(!Object.prototype.hasOwnProperty.call(n,a[r]))return!1;for(r=i;r--!==0;){var l=a[r];if(!t(e[l],n[l]))return!1}return!0}return e!==e&&n!==n}),nv}var O3=M3();const qb=og(O3);function If(t){"@babel/helpers - typeof";return If=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},If(t)}function Wb(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function Lf(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?Wb(Object(n),!0).forEach(function(i){P3(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):Wb(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function P3(t,e,n){return(e=I3(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function I3(t){var e=z3(t,"string");return If(e)=="symbol"?e:e+""}function z3(t,e){if(If(t)!="object"||!t)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e);if(If(i)!="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var gu={onEdited:"draw:edited",onDrawStart:"draw:drawstart",onDrawStop:"draw:drawstop",onDrawVertex:"draw:drawvertex",onEditStart:"draw:editstart",onEditMove:"draw:editmove",onEditResize:"draw:editresize",onEditVertex:"draw:editvertex",onEditStop:"draw:editstop",onDeleted:"draw:deleted",onDeleteStart:"draw:deletestart",onDeleteStop:"draw:deletestop"};function x5(t){var e=Jf(),n=de.useRef(),i=de.useRef(t),r=function(l){var d=t.onCreated,p=e.layerContainer||e.map;p.addLayer(l.layer),d&&d(l)};return ta.useEffect(function(){var a=e.map,l=t.onMounted;for(var d in gu)a.on(gu[d],function(p){var g=Object.keys(gu).filter(function(_){return gu[_]===p.type});if(g.length===1){var m=g[0];t[m]&&t[m](p)}});return a.on(jd.Draw.Event.CREATED,r),n.current=Gb(t,e),a.addControl(n.current),l&&l(n.current),function(){a.off(jd.Draw.Event.CREATED,r);for(var p in gu)t[p]&&a.off(gu[p],t[p]);n.current.remove(a)}},[t.onCreated,t.onDeleted,t.onEdited]),ta.useEffect(function(){if(!(qb(t.draw,i.current.draw)&&qb(t.edit,i.current.edit)&&t.position===i.current.position)){var a=e.map;n.current.remove(a),n.current=Gb(t,e),n.current.addTo(a);var l=t.onMounted;return l&&l(n.current),function(){n.current.remove(a)}}},[t.draw,t.edit,t.position,t.onCreated,t.onDeleted,t.onEdited]),null}function Gb(t,e){var n=e.layerContainer,i=t.draw,r=t.edit,a=t.position,l={edit:Lf(Lf({},r),{},{featureGroup:n})};return i&&(l.draw=Lf({},i)),a&&(l.position=a),new wl.Control.Draw(l)}x5.propTypes=Lf(Lf({},Object.keys(gu).reduce(function(t,e){return t[e]=Si.PropTypes.func,t},{})),{},{onCreated:Si.PropTypes.func,onMounted:Si.PropTypes.func,draw:Si.PropTypes.shape({polyline:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),polygon:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),rectangle:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),circle:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),marker:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool])}),edit:Si.PropTypes.shape({edit:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),remove:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),poly:Si.PropTypes.oneOfType([Si.PropTypes.object,Si.PropTypes.bool]),allowIntersection:Si.PropTypes.bool}),position:Si.PropTypes.oneOf(["topright","topleft","bottomright","bottomleft"]),leaflet:Si.PropTypes.shape({map:Si.PropTypes.instanceOf(wl.Map),layerContainer:Si.PropTypes.shape({addLayer:Si.PropTypes.func.isRequired,removeLayer:Si.PropTypes.func.isRequired})})});var us=63710088e-1,B3={centimeters:us*100,centimetres:us*100,degrees:360/(2*Math.PI),feet:us*3.28084,inches:us*39.37,kilometers:us/1e3,kilometres:us/1e3,meters:us,metres:us,miles:us/1609.344,millimeters:us*1e3,millimetres:us*1e3,nauticalmiles:us/1852,radians:1,yards:us*1.0936};function zf(t,e,n={}){const i={type:"Feature"};return(n.id===0||n.id)&&(i.id=n.id),n.bbox&&(i.bbox=n.bbox),i.properties=e||{},i.geometry=t,i}function F3(t,e,n={}){if(!t)throw new Error("coordinates is required");if(!Array.isArray(t))throw new Error("coordinates must be an Array");if(t.length<2)throw new Error("coordinates must be at least 2 numbers long");if(!Vb(t[0])||!Vb(t[1]))throw new Error("coordinates must contain numbers");return zf({type:"Point",coordinates:t},e,n)}function xc(t,e,n={}){for(const r of t){if(r.length<4)throw new Error("Each LinearRing of a Polygon must have 4 or more Positions.");if(r[r.length-1].length!==r[0].length)throw new Error("First and last Position are not equivalent.");for(let a=0;a<r[r.length-1].length;a++)if(r[r.length-1][a]!==r[0][a])throw new Error("First and last Position are not equivalent.")}return zf({type:"Polygon",coordinates:t},e,n)}function U3(t,e,n={}){if(t.length<2)throw new Error("coordinates must be an array of two or more positions");return zf({type:"LineString",coordinates:t},e,n)}function H3(t,e="kilometers"){const n=B3[e];if(!n)throw new Error(e+" units is invalid");return t*n}function Zh(t){return t%360*Math.PI/180}function Vb(t){return!isNaN(t)&&t!==null&&!Array.isArray(t)}function Yb(t){if(!t)throw new Error("coord is required");if(!Array.isArray(t)){if(t.type==="Feature"&&t.geometry!==null&&t.geometry.type==="Point")return[...t.geometry.coordinates];if(t.type==="Point")return[...t.coordinates]}if(Array.isArray(t)&&t.length>=2&&!Array.isArray(t[0])&&!Array.isArray(t[1]))return[...t];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function q3(t,e,n={}){var i=Yb(t),r=Yb(e),a=Zh(r[1]-i[1]),l=Zh(r[0]-i[0]),d=Zh(i[1]),p=Zh(r[1]),g=Math.pow(Math.sin(a/2),2)+Math.pow(Math.sin(l/2),2)*Math.cos(d)*Math.cos(p);return H3(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)),n.units)}function Xy(t,e,n){if(t!==null)for(var i,r,a,l,d,p,g,m=0,_=0,A,x=t.type,R=x==="FeatureCollection",M=x==="Feature",k=R?t.features.length:1,I=0;I<k;I++){g=R?t.features[I].geometry:M?t.geometry:t,A=g?g.type==="GeometryCollection":!1,d=A?g.geometries.length:1;for(var Y=0;Y<d;Y++){var B=0,V=0;if(l=A?g.geometries[Y]:g,l!==null){p=l.coordinates;var ee=l.type;switch(m=n&&(ee==="Polygon"||ee==="MultiPolygon")?1:0,ee){case null:break;case"Point":if(e(p,_,I,B,V)===!1)return!1;_++,B++;break;case"LineString":case"MultiPoint":for(i=0;i<p.length;i++){if(e(p[i],_,I,B,V)===!1)return!1;_++,ee==="MultiPoint"&&B++}ee==="LineString"&&B++;break;case"Polygon":case"MultiLineString":for(i=0;i<p.length;i++){for(r=0;r<p[i].length-m;r++){if(e(p[i][r],_,I,B,V)===!1)return!1;_++}ee==="MultiLineString"&&B++,ee==="Polygon"&&V++}ee==="Polygon"&&B++;break;case"MultiPolygon":for(i=0;i<p.length;i++){for(V=0,r=0;r<p[i].length;r++){for(a=0;a<p[i][r].length-m;a++){if(e(p[i][r][a],_,I,B,V)===!1)return!1;_++}V++}B++}break;case"GeometryCollection":for(i=0;i<l.geometries.length;i++)if(Xy(l.geometries[i],e,n)===!1)return!1;break;default:throw new Error("Unknown Geometry Type")}}}}}function b5(t,e){var n,i,r,a,l,d,p,g,m,_,A=0,x=t.type==="FeatureCollection",R=t.type==="Feature",M=x?t.features.length:1;for(n=0;n<M;n++){for(d=x?t.features[n].geometry:R?t.geometry:t,g=x?t.features[n].properties:R?t.properties:{},m=x?t.features[n].bbox:R?t.bbox:void 0,_=x?t.features[n].id:R?t.id:void 0,p=d?d.type==="GeometryCollection":!1,l=p?d.geometries.length:1,r=0;r<l;r++){if(a=p?d.geometries[r]:d,a===null){if(e(null,A,g,m,_)===!1)return!1;continue}switch(a.type){case"Point":case"LineString":case"MultiPoint":case"Polygon":case"MultiLineString":case"MultiPolygon":{if(e(a,A,g,m,_)===!1)return!1;break}case"GeometryCollection":{for(i=0;i<a.geometries.length;i++)if(e(a.geometries[i],A,g,m,_)===!1)return!1;break}default:throw new Error("Unknown Geometry Type")}}A++}}function W3(t,e,n){var i=n;return b5(t,function(r,a,l,d,p){i=e(i,r,a,l,d,p)}),i}function G3(t,e){b5(t,function(n,i,r,a,l){var d=n===null?null:n.type;switch(d){case null:case"Point":case"LineString":case"Polygon":return e(zf(n,r,{bbox:a,id:l}),i,0)===!1?!1:void 0}var p;switch(d){case"MultiPoint":p="Point";break;case"MultiLineString":p="LineString";break;case"MultiPolygon":p="Polygon";break}for(var g=0;g<n.coordinates.length;g++){var m=n.coordinates[g],_={type:p,coordinates:m};if(e(zf(_,r),i,g)===!1)return!1}})}function V3(t,e){G3(t,function(n,i,r){var a=0;if(n.geometry){var l=n.geometry.type;if(!(l==="Point"||l==="MultiPoint")){var d,p=0,g=0,m=0;if(Xy(n,function(_,A,x,R,M){if(d===void 0||i>p||R>g||M>m){d=_,p=i,g=R,m=M,a=0;return}var k=U3([d,_],n.properties);if(e(k,i,r,M,a)===!1)return!1;a++,d=_})===!1)return!1}}})}function Y3(t,e,n){var i=n,r=!1;return V3(t,function(a,l,d,p,g){r===!1&&n===void 0?i=a:i=e(i,a,l,d,p,g),r=!0}),i}function Jc(t){return W3(t,(e,n)=>e+Z3(n),0)}function Z3(t){let e=0,n;switch(t.type){case"Polygon":return Zb(t.coordinates);case"MultiPolygon":for(n=0;n<t.coordinates.length;n++)e+=Zb(t.coordinates[n]);return e;case"Point":case"MultiPoint":case"LineString":case"MultiLineString":return 0}return 0}function Zb(t){let e=0;if(t&&t.length>0){e+=Math.abs(Kb(t[0]));for(let n=1;n<t.length;n++)e-=Math.abs(Kb(t[n]))}return e}var K3=us*us/2,iv=Math.PI/180;function Kb(t){const e=t.length-1;if(e<=2)return 0;let n=0,i=0;for(;i<e;){const r=t[i],a=t[i+1===e?0:i+1],l=t[i+2>=e?(i+2)%e:i+2],d=r[0]*iv,p=a[1]*iv,g=l[0]*iv;n+=(g-d)*Math.sin(p),i++}return n*K3}function X3(t,e={}){let n=0,i=0,r=0;return Xy(t,function(a){n+=a[0],i+=a[1],r++},!0),F3([n/r,i/r],e.properties)}function iy(t,e={}){return Y3(t,(n,i)=>{const r=i.geometry.coordinates;return n+q3(r[0],r[1],e)},0)}const Xb=[{name:"Far North",latRange:[10,13.1],lngRange:[13.5,15.2],center:[10.6,14.3]},{name:"North",latRange:[7.5,10],lngRange:[12.5,15.8],center:[9.3,13.4]},{name:"Adamaoua",latRange:[5.8,7.5],lngRange:[11.3,15],center:[7.3,13.6]},{name:"East",latRange:[2,5.8],lngRange:[12.5,16.2],center:[4.6,13.7]},{name:"Center",latRange:[3.2,5.2],lngRange:[10.5,12.8],center:[3.8,11.5]},{name:"South",latRange:[2,3.5],lngRange:[9.8,13.5],center:[2.9,11.1]},{name:"Littoral",latRange:[3.4,4.8],lngRange:[9,10.5],center:[4,9.7]},{name:"West",latRange:[4.9,6],lngRange:[9.8,11.2],center:[5.5,10.4]},{name:"Northwest",latRange:[5.7,7.2],lngRange:[9.3,11.2],center:[5.9,10.1]},{name:"Southwest",latRange:[3.9,6],lngRange:[8.5,9.8],center:[4.1,9.2]}],Q3=(t,e)=>Math.sqrt(Math.pow(t[0]-e[0],2)+Math.pow(t[1]-e[1],2)),Af=(t,e)=>{if(!t||!e)return"Unknown";const n=parseFloat(t),i=parseFloat(e);for(const l of Xb)if(n>=l.latRange[0]&&n<=l.latRange[1]&&i>=l.lngRange[0]&&i<=l.lngRange[1])return l.name;let r="Center",a=1/0;for(const l of Xb){const d=Q3([n,i],l.center);d<a&&(a=d,r=l.name)}return r},Qb=(t,e,n=[])=>{const r={"Maize (Mas)":{"Far North":["CMS 8501","Local Yellow"],North:["CMS 8501","Local Yellow"],West:["CMS 8704","CMS 9015"],Northwest:["CMS 8704","CMS 9015"],Center:["Composite White","CMS 8704"]},"Rice (Riz)":{North:["IRAD 342","Local Paddy"],Center:["NERICA 3","NERICA 8"],South:["Local Paddy"]},"Cassava (Manioc)":{Center:["TME 419","TMS 92/0326"],South:["White Skin","Red Skin"],Littoral:["TMS 96/0023"]}}[t];return r&&r[e]?r[e]:n.length>0?n:["Local Selection"]},$3=t=>{if(!t||t.length===0)return null;let e=0,n=0;return t.forEach(i=>{n+=i[0],e+=i[1]}),[e/t.length,n/t.length]};delete jd.Icon.Default.prototype._getIconUrl;jd.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const $b=({bounds:t})=>{const e=C3();return de.useEffect(()=>{if(t&&t.length>0)try{e.fitBounds(t)}catch(n){console.warn("Error fitting bounds:",n)}},[t,e]),null},Kh={maize:{color:"#FFEA00",font:"'Arial Black', sans-serif"},rice:{color:"#00E5FF",font:"'Impact', sans-serif"},sorghum:{color:"#FF3D00",font:"'Impact', sans-serif"},cassava:{color:"#C6FF00",font:"'Arial Black', sans-serif"},yam:{color:"#E040FB",font:"'Georgia', serif"},cocoyam:{color:"#FF4081",font:"'Georgia', serif"},cocoa:{color:"#8D6E63",font:"'Verdana', sans-serif"},coffee_robusta:{color:"#00E676",font:"'Verdana', sans-serif"},coffee_arabica:{color:"#1DE9B6",font:"'Verdana', sans-serif"},oil_palm:{color:"#76FF03",font:"'Verdana', sans-serif"},plantain:{color:"#FFEE58",font:"'Arial Black', sans-serif"},banana:{color:"#FFF176",font:"'Arial Black', sans-serif"},avocado:{color:"#64DD17",font:"'Impact', sans-serif"},pineapple:{color:"#FFAB00",font:"'Impact', sans-serif"},tomato:{color:"#FF1744",font:"'Arial Black', sans-serif"},pepper:{color:"#FF6D00",font:"'Arial Black', sans-serif"},penja_pepper:{color:"#FFFFFF",font:"'Courier New', monospace"},infrastructure:{color:"#2196F3",font:"'Impact', sans-serif"},storage:{color:"#607D8B",font:"'Impact', sans-serif"},farm_house:{color:"#795548",font:"'Impact', sans-serif"},poultry:{color:"#FF9800",font:"'Impact', sans-serif"},default:{color:"#FFFFFF",font:"sans-serif"}},bp=t=>{if(!t)return Kh.default;const e=t.toLowerCase();return Kh[e]||Object.entries(Kh).find(([n])=>e.includes(n))?.[1]||Kh.default},pu=({coordinates:t,label:e,area:n,perimeter:i,cropType:r})=>{if(!t||t.length<3)return null;try{const a=bp(r),l="#FFFFFF",d=a.font,p=xc([t]),g=X3(p),[m,_]=g.geometry.coordinates,A=n&&i?`<div style="text-align: center;">
                <div>${e}</div>
                <div style="font-size: 10px; opacity: 0.9; margin-top: 2px;">${n} HA | ${i} KM</div>
               </div>`:e,x=jd.divIcon({className:"polygon-label",html:`<div style="
                color: ${l}; 
                font-family: ${d}; 
                font-weight: 900; 
                text-shadow: 
                    -1.5px -1.5px 0 #000,  
                     1.5px -1.5px 0 #000,
                    -1.5px  1.5px 0 #000,
                     1.5px  1.5px 0 #000,
                     2px 2px 4px rgba(0,0,0,0.8);
                white-space: nowrap; 
                pointer-events: none; 
                font-size: 16px; 
                transform: translate(-50%, -50%); 
                text-transform: uppercase; 
                letter-spacing: 1.5px;
            ">${A}</div>`,iconSize:[0,0],iconAnchor:[0,0]});return u.jsx(y5,{position:[_,m],icon:x,interactive:!1})}catch{return null}},Id=({center:t,fields:e,crops:n=[],infrastructure:i=[],farms:r=[],manualCoordinates:a,onBoundaryCreate:l,onBoundaryUpdate:d,editable:p=!0,isMapEditable:g=!1,currentLabel:m,parcelName:_,parcelArea:A,parcelPerimeter:x,editingId:R,subAllocations:M=[]})=>{const k=de.useRef(),I=de.useRef(),Y=bl(),[B,V]=de.useState(!1),ee=()=>{document.fullscreenElement?document.exitFullscreen():I.current.requestFullscreen().catch(G=>{console.error(`Error attempting to enable full-screen mode: ${G.message}`)})};de.useEffect(()=>{const G=()=>{V(!!document.fullscreenElement),k.current&&setTimeout(()=>{k.current.invalidateSize()},100)};return document.addEventListener("fullscreenchange",G),()=>document.removeEventListener("fullscreenchange",G)},[]);const ue=G=>{const J=G.layer.toGeoJSON().geometry.coordinates[0],Se=xc([J]),Ee=Jc(Se)/1e4,Ye=iy(Se,{units:"meters"});l&&l({coordinates:J,area:Ee.toFixed(2),perimeter:(Ye/1e3).toFixed(2)})},_e=e?.filter(G=>G.id!==R).map(G=>({id:G.id,name:G.name,positions:G.boundary?.coordinates?.[0]?.map(me=>[me[1],me[0]])||[]}))||[],fe=r?.filter(G=>G.boundary&&G.boundary.coordinates).map(G=>({id:G.id,name:G.name,area:G.total_area,positions:G.boundary.coordinates[0].map(me=>[me[1],me[0]]),rawCoords:G.boundary.coordinates[0]}))||[];return u.jsxs("div",{ref:I,className:B?"":"glass-card",style:{height:B?"100vh":"500px",padding:"0",overflow:"hidden",position:"relative"},children:[u.jsx("button",{onClick:ee,type:"button",title:B?"Exit Full Screen":"Enter Full Screen",style:{position:"absolute",top:"12px",right:"12px",zIndex:1e3,width:"40px",height:"40px",backgroundColor:"white",color:"#000",border:"2px solid rgba(0,0,0,0.2)",borderRadius:"4px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",boxShadow:"0 2px 10px rgba(0,0,0,0.2)",transition:"all 0.2s"},children:B?u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M8 3v3a2 2 0 0 1-2 2H3m18 0h-3a2 2 0 0 1-2-2V3m0 18v-3a2 2 0 0 1 2-2h3M3 16h3a2 2 0 0 1 2 2v3"})}):u.jsx("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2.5",strokeLinecap:"round",strokeLinejoin:"round",children:u.jsx("path",{d:"M15 3h6v6M9 21H3v-6M21 15v6h-6M3 9V3h6"})})}),u.jsxs(T3,{center:t||[0,0],zoom:t?13:2,style:{height:"100%",width:"100%",cursor:"crosshair"},ref:k,attributionControl:!1,children:[u.jsx(k3,{url:"https://mt1.google.com/vt/lyrs=s&x={x}&y={y}&z={z}"}),u.jsxs(A3,{children:[p&&u.jsx(x5,{position:"topright",onCreated:ue,draw:{rectangle:{shapeOptions:{color:"var(--primary)"}},circle:!1,circlemarker:!1,marker:!1,polyline:!1,polygon:{allowIntersection:!1,showArea:!1,metric:!0,shapeOptions:{color:"var(--primary)"}}}}),(fe||[]).map(G=>u.jsxs(ta.Fragment,{children:[u.jsx(ud,{positions:G.positions,pathOptions:{color:"#ff9800",weight:6,fillOpacity:.1,fillColor:"#ff9800"},children:u.jsxs($m,{children:[G.name," Boundary"]})}),u.jsx(pu,{coordinates:G.rawCoords,label:`${G.name} (${parseFloat(G.area||0).toFixed(2)} HA)`,cropType:"infrastructure"})]},G.id)),(_e||[]).map(G=>{const me=e.find(J=>J.id===G.id);let Z=parseFloat(me?.area||0);if(Z===0&&me?.boundary?.coordinates?.[0])try{const J=xc(me.boundary.coordinates);Z=Jc(J)/1e4}catch{}return u.jsxs(ta.Fragment,{children:[u.jsx(ud,{positions:G.positions,pathOptions:{color:"var(--primary)",fillOpacity:.1,weight:4}}),u.jsx(pu,{coordinates:me?.boundary?.coordinates?.[0],label:`${G.name} (${Z.toFixed(2)} HA)`,cropType:"infrastructure"})]},G.id)}),_&&a?.length>0&&u.jsx(pu,{coordinates:a,label:_,cropType:"infrastructure"}),M.map((G,me)=>{const Z=bp(G.type),J=G.coordinates.map(Se=>[Se[1],Se[0]]);return u.jsxs(ta.Fragment,{children:[u.jsx(ud,{positions:J,pathOptions:{color:Z.color,fillColor:Z.color,fillOpacity:.4,weight:2}}),u.jsx(pu,{coordinates:G.coordinates,label:G.name,cropType:G.type})]},`sub-alloc-${me}`)}),n?.filter(G=>G?.boundary?.coordinates?.[0]).map(G=>{const me=bp(G.crop_type);return u.jsxs(ta.Fragment,{children:[u.jsx(ud,{positions:G.boundary.coordinates[0].map(Z=>[Z[1],Z[0]]),pathOptions:{color:me.color,fillColor:me.color,fillOpacity:.5,weight:2},children:u.jsx($m,{children:u.jsxs("div",{style:{fontSize:"13px",minWidth:"220px",padding:"5px"},children:[u.jsxs("div",{style:{borderBottom:`2px solid ${me.color}`,paddingBottom:"8px",marginBottom:"8px"},children:[u.jsx("div",{style:{fontSize:"15px",fontWeight:"bold",color:"#1a365d"},children:G.crop_type}),u.jsx("div",{style:{fontSize:"12px",color:"#718096"},children:G.variety})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"10px",backgroundColor:"#fffbe6",padding:"8px",borderRadius:"4px"},children:[u.jsx("span",{style:{fontWeight:"600"},children:"Surface Area:"}),u.jsxs("span",{style:{color:"#b7791f",fontWeight:"bold"},children:[G.planted_area," ha"]})]}),u.jsx("div",{style:{marginTop:"12px",textAlign:"center"},children:u.jsx("button",{onClick:()=>Y(`/crops?view=details&id=${G.id}`),style:{width:"100%",padding:"6px",backgroundColor:me.color,color:"#1a365d",border:"none",borderRadius:"4px",fontSize:"11px",fontWeight:"bold",cursor:"pointer"},children:"View Full Timeline"})})]})})}),u.jsx(pu,{coordinates:G.boundary.coordinates[0],label:G.crop_type,cropType:G.crop_type})]},G.id)}),i?.filter(G=>G?.boundary?.coordinates?.[0]).map(G=>u.jsxs(ta.Fragment,{children:[u.jsx(ud,{positions:G.boundary.coordinates[0].map(me=>[me[1],me[0]]),pathOptions:{color:"#2196f3",fillColor:"#2196f3",fillOpacity:.5,weight:2},children:u.jsx($m,{children:u.jsxs("div",{style:{fontSize:"13px",minWidth:"220px",padding:"5px"},children:[u.jsxs("div",{style:{borderBottom:"2px solid #2196f3",paddingBottom:"8px",marginBottom:"8px"},children:[u.jsx("div",{style:{fontSize:"15px",fontWeight:"bold",color:"#1a365d"},children:G.name}),u.jsxs("div",{style:{fontSize:"12px",color:"#718096"},children:[G.type," ",G.sub_type?`(${G.sub_type})`:""]})]}),u.jsxs("div",{style:{marginTop:"10px"},children:[u.jsx("div",{style:{fontSize:"11px",color:"#718096",fontWeight:"bold"},children:"CONDITION"}),u.jsx("div",{style:{fontSize:"13px",fontWeight:"600",color:G.condition==="poor"?"#e53e3e":"#2f855a"},children:G.condition?.toUpperCase()||"GOOD"})]}),G.material&&u.jsxs("div",{style:{marginTop:"8px"},children:[u.jsx("div",{style:{fontSize:"11px",color:"#718096",fontWeight:"bold"},children:"MATERIAL"}),u.jsx("div",{style:{fontSize:"12px"},children:G.material})]})]})})}),u.jsx(pu,{coordinates:G.boundary.coordinates[0],label:G.name,cropType:"infrastructure"})]},G.id)),a?.length>0&&(()=>{const G=bp(m),me=a.map(J=>[J[1],J[0]]),Z=(J,Se)=>{if(!d)return;const Ee=[...a],{lat:Ye,lng:oe}=Se.target.getLatLng();Ee[J]=[oe,Ye];const ae=xc([Ee.length>=3?[...Ee,Ee[0]]:Ee]),he=Jc(ae)/1e4,De=iy(ae,{units:"meters"});d({coordinates:Ee,area:he.toFixed(2),perimeter:De.toFixed(2)})};return u.jsxs(u.Fragment,{children:[g&&a.map((J,Se)=>u.jsx(y5,{position:[J[1],J[0]],draggable:!0,eventHandlers:{dragend:Ee=>Z(Se,Ee)},icon:jd.divIcon({className:"vertex-edit-icon",html:`<div style="width: 12px; height: 12px; background: white; border: 2px solid ${G.color}; border-radius: 50%; box-shadow: 0 0 5px rgba(0,0,0,0.5);"></div>`,iconSize:[12,12],iconAnchor:[6,6]})},`vertex-${Se}`)),!g&&a.filter(J=>J&&J.length>=2).map((J,Se)=>u.jsx(E3,{center:[J[1],J[0]],pathOptions:{color:G.color,fillColor:G.color,fillOpacity:1},radius:4},`manual-point-${Se}`)),a.length===2&&a.every(J=>J&&J.length>=2)&&u.jsx(j3,{positions:me,pathOptions:{color:G.color,weight:6,dashArray:"5, 5"}}),a.length>=3&&a.every(J=>J&&J.length>=2)&&u.jsx(ud,{positions:me,pathOptions:{color:G.color,weight:6,fillOpacity:.3}}),a.length>=3&&(_||m)&&u.jsx(pu,{coordinates:a,label:_||m,area:A,perimeter:x,cropType:m})]})})()]}),(()=>{if(a?.length>0){const me=a.filter(Z=>Z&&Z.length>=2).map(Z=>[Z[1],Z[0]]);if(me.length>0)return u.jsx($b,{bounds:me})}const G=[...fe.flatMap(me=>me.positions),..._e.flatMap(me=>me.positions)];return G.length>0?u.jsx($b,{bounds:G}):null})()]})]})},Kl=({title:t,subtitle:e,onBack:n,onClose:i,icon:r=""})=>{const a=bl(),l=()=>{n?n():window.history.back()},d=()=>{i?i():a("/")};return u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",padding:"16px 24px",backgroundColor:"#ffffff",borderBottom:"1px solid #e2e8f0",marginBottom:"24px",position:"sticky",top:0,zIndex:10,borderRadius:"12px 12px 0 0"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px"},children:[u.jsx("button",{onClick:l,style:{background:"#f8fafc",border:"1px solid #e2e8f0",borderRadius:"8px",width:"36px",height:"36px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"18px",color:"#4a5568",transition:"all 0.2s",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},onMouseOver:p=>{p.currentTarget.style.backgroundColor="#edf2f7",p.currentTarget.style.transform="translateX(-2px)"},onMouseOut:p=>{p.currentTarget.style.backgroundColor="#f8fafc",p.currentTarget.style.transform="translateX(0)"},title:"Go Back",children:""}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:r}),u.jsx("h2",{style:{margin:0,fontSize:"18px",fontWeight:"800",color:"#1a202c",textTransform:"uppercase",letterSpacing:"0.5px"},children:t})]}),e&&u.jsx("div",{style:{fontSize:"11px",color:"#718096",fontWeight:"600",marginTop:"2px"},children:e})]})]}),u.jsx("button",{onClick:d,style:{background:"transparent",border:"none",borderRadius:"8px",width:"32px",height:"32px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"20px",color:"#a0aec0",transition:"all 0.2s"},onMouseOver:p=>{p.currentTarget.style.color="#e53e3e",p.currentTarget.style.backgroundColor="#fff5f5"},onMouseOut:p=>{p.currentTarget.style.color="#a0aec0",p.currentTarget.style.backgroundColor="transparent"},title:"Close and Return to Dashboard",children:""})]})},Ip=({onComplete:t,initialData:e})=>{const{createFarm:n,updateFarm:i}=Pi(),{showAlert:r,showNotification:a}=hr(),l=()=>e?.boundary_coordinates&&Array.isArray(e.boundary_coordinates)?e.boundary_coordinates.map(k=>`${k.lat}, ${k.lng}`).join(`
`):"",[d,p]=de.useState({name:e?.name||"",address:e?.address||"",city:e?.city||"",state:e?.state||"",country:e?.country||"",postal_code:e?.postal_code||"",farm_type:e?.farm_type||"crop_production",total_area:e?.total_area||"",area_unit:e?.area_unit||"hectares",latitude:e?.latitude||e?.coordinates?.coordinates?.[1]||"",longitude:e?.longitude||e?.coordinates?.coordinates?.[0]||"",perimeter:e?.perimeter||"",boundary_coordinates:e?.boundary_coordinates||e?.boundary?.coordinates?.[0]?.map(k=>({lat:k[1],lng:k[0]}))||[]}),[g,m]=de.useState(l()),[_,A]=de.useState(!1);de.useEffect(()=>{e&&(p({name:e.name||"",address:e.address||"",city:e.city||"",state:e.state||"",country:e.country||"",postal_code:e.postal_code||"",farm_type:e.farm_type||"crop_production",total_area:e.total_area||"",area_unit:e.area_unit||"hectares",latitude:e.latitude||e.coordinates?.coordinates?.[1]||"",longitude:e.longitude||e.coordinates?.coordinates?.[0]||"",perimeter:e.perimeter||"",boundary_coordinates:e.boundary_coordinates||e.boundary?.coordinates?.[0]?.map(k=>({lat:k[1],lng:k[0]}))||[]}),m(l()))},[e]);const x=async k=>{k.preventDefault(),A(!0);try{const I={...d,country:"Cameroon",total_area:parseFloat(d.total_area),perimeter:parseFloat(d.perimeter)};if(e?.id)await i(e.id,I),a("Farm details updated successfully (Size/Boundary adjusted)","success");else{const Y=await n(I);a(Y?.notification?.message||"Farm registered successfully","success")}t&&t()}catch(I){console.error(I),r("SAVE_FAILURE")}finally{A(!1)}},R=["Adamaoua","Center","East","Far North","Littoral","North","Northwest","South","Southwest","West"],M=!e;return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"600px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:e?"Update Enterprise Profile":"Register New Agricultural Farm",subtitle:M?"Enter basic identity details to initialize your farm container.":"Refine enterprise details and high-level categorization.",icon:""}),u.jsx("p",{style:{padding:"0 24px",fontSize:"13px",color:"#666"},children:M?"Enter basic identity details to initialize your farm container.":"Refine enterprise details and high-level categorization."}),u.jsx("form",{onSubmit:x,children:u.jsxs("div",{style:{padding:"24px"},children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Business Name"}),u.jsx("input",{type:"text",value:d.name,onChange:k=>p({...d,name:k.target.value}),placeholder:"e.g. Green Valley Farm",required:!0})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Operation Type"}),u.jsxs("select",{value:d.farm_type,onChange:k=>p({...d,farm_type:k.target.value}),children:[u.jsx("option",{value:"crop_production",children:"Field Crops"}),u.jsx("option",{value:"livestock",children:"Livestock / Animals"}),u.jsx("option",{value:"mixed",children:"Mixed Operations"}),u.jsx("option",{value:"orchard",children:"Orchard / Fruit"}),u.jsx("option",{value:"vineyard",children:"Vineyard"})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Street Address"}),u.jsx("input",{type:"text",value:d.address,onChange:k=>p({...d,address:k.target.value}),placeholder:"Rural Route or Physical Address"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Region"}),u.jsxs("select",{value:R.find(k=>k.toLowerCase()===d.city?.toLowerCase())||"",onChange:k=>p({...d,city:k.target.value}),required:!0,children:[u.jsx("option",{value:"",children:"-- SELECT REGION --"}),R.map(k=>u.jsxs("option",{value:k,children:[k," Region"]},k))]})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Country"}),u.jsx("input",{type:"text",value:"Cameroon",disabled:!0,style:{backgroundColor:"#f5f5f5",cursor:"not-allowed"}})]})]}),!M&&u.jsx("div",{className:"animate-fade-in"}),u.jsxs("div",{style:{display:"flex",gap:"12px",marginTop:"30px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:1},disabled:_,children:_?"Processing...":e?"Update Profile":"Quick Register Farm"}),u.jsx("button",{type:"button",onClick:t,className:"outline",style:{flex:1},children:"Cancel"})]})]})})]})},Qy=$o((t,e)=>({definitions:[],loading:!1,error:null,fetchDefinitions:async()=>{t({loading:!0,error:null});try{const n=await zt.get("/crop-definitions");t({definitions:n.data,loading:!1})}catch(n){console.error("Fetch definitions error:",n),t({error:n.message,loading:!1})}},createDefinition:async n=>{t({loading:!0});try{const i=await zt.post("/crop-definitions",n);return t(r=>({definitions:[...r.definitions,i.data].sort((a,l)=>a.name.localeCompare(l.name)),loading:!1})),i.data}catch(i){throw t({loading:!1}),i}},updateDefinition:async(n,i)=>{t({loading:!0});try{const r=await zt.put(`/crop-definitions/${n}`,i);return t(a=>({definitions:a.definitions.map(l=>l.id===n?r.data:l),loading:!1})),r.data}catch(r){throw t({loading:!1}),r}},deleteDefinition:async n=>{t({loading:!0});try{await zt.delete(`/crop-definitions/${n}`),t(i=>({definitions:i.definitions.filter(r=>r.id!==n),loading:!1}))}catch(i){throw t({loading:!1}),i}},toggleStatus:async n=>{try{const i=await zt.patch(`/crop-definitions/${n}/toggle`);t(r=>({definitions:r.definitions.map(a=>a.id===n?i.data:a)}))}catch(i){throw console.error("Toggle status error:",i),i}}})),_5=$o((t,e)=>({definitions:[],loading:!1,error:null,fetchDefinitions:async()=>{t({loading:!0,error:null});try{const n=await zt.get("/infrastructure-definitions");t({definitions:n.data,loading:!1})}catch(n){console.error("Fetch definitions error:",n),t({error:n.message,loading:!1})}},createDefinition:async n=>{t({loading:!0});try{const i=await zt.post("/infrastructure-definitions",n);return t(r=>({definitions:[...r.definitions,i.data].sort((a,l)=>a.name.localeCompare(l.name)),loading:!1})),i.data}catch(i){throw t({loading:!1}),i}},updateDefinition:async(n,i)=>{t({loading:!0});try{const r=await zt.put(`/infrastructure-definitions/${n}`,i);return t(a=>({definitions:a.definitions.map(l=>l.id===n?r.data:l),loading:!1})),r.data}catch(r){throw t({loading:!1}),r}},deleteDefinition:async n=>{t({loading:!0});try{await zt.delete(`/infrastructure-definitions/${n}`),t(i=>({definitions:i.definitions.filter(r=>r.id!==n),loading:!1}))}catch(i){throw t({loading:!1}),i}},toggleStatus:async n=>{try{const i=await zt.patch(`/infrastructure-definitions/${n}/toggle`);t(r=>({definitions:r.definitions.map(a=>a.id===n?i.data:a)}))}catch(i){throw console.error("Toggle status error:",i),i}}})),ry=({onComplete:t,initialData:e})=>{const{farms:n,currentFarm:i,setCurrentFarm:r,createField:a,updateField:l,fetchFields:d}=Pi(),{showNotification:p,showAlert:g}=hr(),{createCrop:m}=vl(),{createInfrastructure:_}=Zl(),{definitions:A,fetchDefinitions:x}=Qy(),{definitions:R,fetchDefinitions:M}=_5(),[k,I]=de.useState(i?.id||(n.length===1?n[0].id:"")),[Y,B]=de.useState("main"),[V,ee]=de.useState([]),[ue,_e]=de.useState({name:"",type:"",sub_type:"",category:""});ta.useEffect(()=>{!k&&n.length===1&&I(n[0].id)},[n,k]);const[fe,G]=de.useState({name:"",field_number:"",status:"active",soil_type:"",drainage:"",slope:"",irrigation:!1,area_unit:"hectares",notes:"",boundary_coordinates:[],carbon_sequestration:0,water_efficiency:100});ta.useEffect(()=>{if(x(),M(),e){const Le=e.boundary?.coordinates?.[0]||[];if(G({...e,boundary_coordinates:Le}),Z(e.area||0),Le.length>0){const Ge=Le.map(mt=>`${mt[1].toFixed(6)},${mt[0].toFixed(6)}`).join(`
`);Ye(Ge);let Re=[...Le];Re.length>=3&&(Re[0][0]!==Re[Re.length-1][0]||Re[0][1]!==Re[Re.length-1][1])&&Re.push(Re[0]);try{const mt=turf.polygon([Re]),Ot=turf.length(mt,{units:"meters"});Se((Ot/1e3).toFixed(2))}catch(mt){console.warn("Invalid polygon for perimeter calculation:",mt)}const gt=Af(Le[0][1],Le[0][0]);De(gt)}}},[x,M,e]);const[me,Z]=de.useState(0),[J,Se]=de.useState(0),[Ee,Ye]=de.useState(""),[oe,ae]=de.useState(!1),[he,De]=de.useState("Center"),[ze,ne]=de.useState(!1),H=Le=>{G(Re=>({...Re,boundary_coordinates:Le.coordinates})),Z(Le.area),Se(Le.perimeter);const Ge=Le.coordinates.map(Re=>`${Re[1].toFixed(6)},${Re[0].toFixed(6)}`).join(`
`);if(Ye(Ge),Le.coordinates.length>0){const Re=Af(Le.coordinates[0][1],Le.coordinates[0][0]);De(Re)}},te=async Le=>{if(!k)return;const Re=n.find(gt=>gt.id===k)?.coordinates?.coordinates;if(!Re||Re[0]===0&&Re[1]===0){const gt=$3(Le);gt&&(await Pi.getState().updateFarm(k,{coordinates:{type:"Point",coordinates:[gt[1],gt[0]]}}),p(`Farm location updated to Parcel ${fe.name||""} centroid`,"info"))}},ce=Le=>{const Re=Le.trim().split(`
`).map(kt=>{const[Yt,Vt]=kt.split(",").map(xn=>parseFloat(xn.trim()));return{lat:Yt,lng:Vt}}).filter(kt=>!isNaN(kt.lat)&&!isNaN(kt.lng));if(Re.length<3)return;const gt=6371e3;let mt=0;for(let kt=0;kt<Re.length;kt++){const Yt=Re[kt],Vt=Re[(kt+1)%Re.length],xn=(Vt.lat-Yt.lat)*Math.PI/180,kn=(Vt.lng-Yt.lng)*Math.PI/180,$t=Math.sin(xn/2)*Math.sin(xn/2)+Math.cos(Yt.lat*Math.PI/180)*Math.cos(Vt.lat*Math.PI/180)*Math.sin(kn/2)*Math.sin(kn/2),Cn=2*Math.atan2(Math.sqrt($t),Math.sqrt(1-$t));mt+=gt*Cn}const Ot=Re.reduce((kt,Yt)=>kt+Yt.lat,0)/Re.length,Kt=111320,ye=111320*Math.cos(Ot*Math.PI/180);let Pt=0;for(let kt=0;kt<Re.length;kt++){const Yt=Re[kt],Vt=Re[(kt+1)%Re.length],xn=Yt.lng*ye,kn=Yt.lat*Kt,$t=Vt.lng*ye,Cn=Vt.lat*Kt;Pt+=xn*Cn-$t*kn}Pt=Math.abs(Pt)/2;const Dn=(Pt/1e4).toFixed(2),dn=(Pt/4046.86).toFixed(2);Z(fe.area_unit==="hectares"?Dn:dn),Se((mt/1e3).toFixed(2));const At=Re.map(kt=>[kt.lng,kt.lat]);G(kt=>({...kt,boundary_coordinates:At}));const sn=Af(Re[0].lat,Re[0].lng);De(sn),te(At)},Q=Le=>{const Ge=Le.target.value;Ye(Ge),ce(Ge)},xe=Le=>{if(Y==="main"){if(G({...fe,boundary_coordinates:Le.coordinates}),Z(Le.area),Se(Le.perimeter),Le.coordinates.length>0){const Ge=Af(Le.coordinates[0][1],Le.coordinates[0][0]);De(Ge),te(Le.coordinates)}}else{if(!ue.name){p("Please select a type from the library first","error");return}const Ge={...ue,coordinates:Le.coordinates,area:Le.area,mode:Y};ee([...V,Ge]),B("main"),_e({name:"",type:"",sub_type:"",category:""}),p(`${Ge.name} allocated to map!`,"success")}},Te=async Le=>{if(Le.preventDefault(),fe.boundary_coordinates.length===0){g("NO_BOUNDARY");return}ae(!0);try{let Ge;e?.id?Ge=await l(e.id,{...fe,area:me,perimeter:J}):Ge=await a(k,{...fe,area:me,perimeter:J});for(const Re of V)Re.mode==="crop"?await m(Ge.id,{crop_type:Re.name,variety:Re.sub_type||"Standard",planted_area:parseFloat(Re.area),boundary_coordinates:Re.coordinates,year:new Date().getFullYear(),planting_date:new Date().toISOString().split("T")[0],status:"planted"}):await _(k,{name:`${Re.name} - ${fe.name}`,type:Re.name,sub_type:Re.sub_type,field_id:Ge.id,area_sqm:parseFloat(Re.area)*1e4,boundary_coordinates:Re.coordinates,status:"operational",construction_date:new Date().toISOString().split("T")[0]});await d(k),p("Strategic Parcel and internal allocations created!","success"),t&&t(Ge)}catch(Ge){console.error(Ge),p("Failed to register strategic parcel","error")}finally{ae(!1)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"1100px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:`${e?"Update":"Register"} Strategic Parcel`,subtitle:`ENTERPRISE: ${n.find(Le=>Le.id===k)?.name||"UNASSIGNED"}`,icon:""}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"400px 1fr",gap:"30px"},children:[u.jsxs("form",{onSubmit:Te,children:[n.length>1&&u.jsxs("div",{style:{marginBottom:"16px",padding:"16px",backgroundColor:"#fffaf0",border:"1px solid #feebc8",borderRadius:"8px"},children:[u.jsx("label",{htmlFor:"farm_select",style:{color:"#9c4221",fontWeight:"bold"},children:"Assign to Enterprise"}),u.jsxs("select",{id:"farm_select",value:k,onChange:Le=>I(Le.target.value),required:!0,style:{borderColor:"#fbd38d"},children:[u.jsx("option",{value:"",children:"-- Choose Farm --"}),n.map(Le=>u.jsx("option",{value:Le.id,children:Le.name},Le.id))]})]}),u.jsxs("div",{style:{marginBottom:"16px",padding:"12px",backgroundColor:ze?"#f0fff4":"#f7fafc",border:`1px solid ${ze?"#68d391":"#e2e8f0"}`,borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"13px",fontWeight:"bold",color:ze?"#2f855a":"#4a5568"},children:ze?" INTERACTIVE EDITING ENABLED":" MAP INTERACTION DISABLED"}),u.jsx("div",{style:{fontSize:"10px",color:"#718096"},children:"Drag markers on the map to resize parcel"})]}),u.jsxs("label",{className:"switch",style:{position:"relative",display:"inline-block",width:"50px",height:"24px"},children:[u.jsx("input",{type:"checkbox",checked:ze,onChange:Le=>ne(Le.target.checked),style:{opacity:0,width:0,height:0}}),u.jsx("span",{style:{position:"absolute",cursor:"pointer",top:0,left:0,right:0,bottom:0,backgroundColor:ze?"#48bb78":"#cbd5e0",transition:".4s",borderRadius:"24px"},children:u.jsx("span",{style:{position:"absolute",content:'""',height:"18px",width:"18px",left:ze?"28px":"4px",bottom:"3px",backgroundColor:"white",transition:".4s",borderRadius:"50%"}})})]})]}),u.jsxs("div",{className:"card",style:{padding:"16px",marginBottom:"16px"},children:[u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{htmlFor:"name",children:"Parcel Name"}),u.jsx("input",{id:"name",type:"text",placeholder:"e.g. North Plot A",value:fe.name,onChange:Le=>G({...fe,name:Le.target.value}),required:!0})]}),u.jsxs("div",{style:{background:"var(--bg-main)",borderStyle:"dashed",padding:"16px",borderRadius:"8px",marginBottom:"12px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"var(--primary)",fontWeight:"bold",marginBottom:"8px",display:"block"},children:"PASTE BOUNDARY COORDINATES (lat,lng)"}),u.jsx("textarea",{id:"boundary_manual",rows:"3",value:Ee,onChange:Q,placeholder:`4.123,9.456
4.125,9.458...`,style:{fontSize:"12px",fontFamily:"monospace",marginBottom:"12px"}}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"10px"},children:[u.jsxs("div",{style:{background:"white",padding:"8px",borderRadius:"4px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:"AREA"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[me," ",fe.area_unit==="hectares"?"ha":"ac"]})]}),u.jsxs("div",{style:{background:"white",padding:"8px",borderRadius:"4px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)"},children:"PERIMETER"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[J," km"]})]})]})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsxs("label",{style:{fontSize:"11px",fontWeight:"bold",color:"var(--primary)",textTransform:"uppercase",marginBottom:"12px",display:"block"},children:["Registration Mode: ",Y==="main"?" Parcel Boundary":Y==="crop"?" Crop Allocation":" Infra Allocation"]}),u.jsx("div",{style:{display:"flex",backgroundColor:"#edf2f7",padding:"4px",borderRadius:"10px",gap:"4px"},children:["main","crop","infra"].map(Le=>u.jsx("button",{type:"button",onClick:()=>B(Le),style:{flex:1,padding:"10px",borderRadius:"8px",border:"none",fontSize:"11px",fontWeight:"bold",cursor:"pointer",backgroundColor:Y===Le?"var(--primary)":"transparent",color:Y===Le?"white":"#4a5568"},children:Le.toUpperCase()},Le))})]}),Y!=="main"&&u.jsxs("div",{className:"card animate-scale-in",style:{padding:"16px",backgroundColor:"#f0f9ff",border:"1px solid #bae6fd",marginBottom:"16px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:Y==="crop"?"Select Crop":"Select Infra"}),u.jsxs("select",{value:ue.name,onChange:Le=>{const Ge=Le.target.value;let Re="";if(Y==="crop"){const gt=A.find(mt=>mt.name===Ge);gt&&(Re=Qb(Ge,he,gt.varieties)[0]||"")}_e({...ue,name:Ge,sub_type:Re})},children:[u.jsx("option",{value:"",children:"-- Select --"}),Y==="crop"?A.map(Le=>u.jsxs("option",{value:Le.name,children:[Le.icon," ",Le.name]},Le.id)):R.map(Le=>u.jsxs("option",{value:Le.name,children:[Le.icon," ",Le.name]},Le.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{children:Y==="crop"?"Variety (Local)":"Label"}),Y==="crop"?u.jsxs("select",{value:ue.sub_type,onChange:Le=>_e({...ue,sub_type:Le.target.value}),children:[u.jsx("option",{value:"",children:"-- Select Variety --"}),Qb(ue.name,he,A.find(Le=>Le.name===ue.name)?.varieties||[]).map(Le=>u.jsx("option",{value:Le,children:Le},Le))]}):u.jsx("input",{type:"text",placeholder:"e.g. Area A",value:ue.sub_type,onChange:Le=>_e({...ue,sub_type:Le.target.value})})]})]}),u.jsxs("p",{style:{fontSize:"10px",color:"#0369a1",marginTop:"8px"},children:["Region: ",he," | Draw on map to allocate."]})]}),u.jsx("div",{className:"card",style:{padding:"16px",marginBottom:"16px"},children:u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Soil Type"}),u.jsxs("select",{value:fe.soil_type,onChange:Le=>G({...fe,soil_type:Le.target.value}),children:[u.jsx("option",{value:"",children:"-- Select Soil --"}),u.jsx("option",{value:"sandy",children:"Sandy"}),u.jsx("option",{value:"loamy",children:"Loamy"}),u.jsx("option",{value:"clay",children:"Clay"})]})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Drainage"}),u.jsxs("select",{value:fe.drainage,onChange:Le=>G({...fe,drainage:Le.target.value}),children:[u.jsx("option",{value:"",children:"-- Select Drainage --"}),u.jsx("option",{value:"excellent",children:"Excellent"}),u.jsx("option",{value:"good",children:"Good"})]})]})]})}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:1},disabled:oe,children:oe?"Saving...":e?"Update Parcel":"Register Parcel"}),u.jsx("button",{type:"button",onClick:t,className:"outline",style:{flex:1},children:"Discard"})]})]}),u.jsx("div",{style:{display:"flex",flexDirection:"column"},children:u.jsx("div",{style:{height:"550px",borderRadius:"8px",overflow:"hidden",border:"1px solid var(--border)"},children:u.jsx(Id,{center:i?.coordinates?.coordinates?[i.coordinates.coordinates[1],i.coordinates.coordinates[0]]:[37.7749,-122.4194],onBoundaryCreate:xe,onBoundaryUpdate:H,editable:!0,isMapEditable:ze,manualCoordinates:fe.boundary_coordinates,parcelName:fe.name,parcelArea:me,parcelPerimeter:J,editingId:e?.id,subAllocations:V,currentLabel:ue.sub_type||ue.name})})})]})]})},J3=[{lat:5.916982,lng:11.043742},{lat:5.9169,lng:11.043799},{lat:5.916782,lng:11.043831},{lat:5.916697,lng:11.043867},{lat:5.916613,lng:11.043936},{lat:5.916517,lng:11.043929},{lat:5.916437,lng:11.043976},{lat:5.916115,lng:11.044077},{lat:5.91602,lng:11.044109},{lat:5.915929,lng:11.044099},{lat:5.915125,lng:11.043647},{lat:5.915238,lng:11.043546},{lat:5.915256,lng:11.043455},{lat:5.915182,lng:11.04335},{lat:5.915284,lng:11.043182},{lat:5.915373,lng:11.043159},{lat:5.915403,lng:11.043061},{lat:5.915478,lng:11.042981},{lat:5.91554,lng:11.042902},{lat:5.915534,lng:11.042803},{lat:5.91559,lng:11.04272},{lat:5.915636,lng:11.042568},{lat:5.915782,lng:11.042593},{lat:5.915728,lng:11.04249},{lat:5.915781,lng:11.042401},{lat:5.915875,lng:11.042403},{lat:5.91601,lng:11.042282},{lat:5.916124,lng:11.042298},{lat:5.916186,lng:11.042372},{lat:5.916285,lng:11.042421},{lat:5.916379,lng:11.042475},{lat:5.916413,lng:11.042574},{lat:5.916504,lng:11.042636},{lat:5.916574,lng:11.042693},{lat:5.916661,lng:11.042756},{lat:5.91692,lng:11.043128},{lat:5.917008,lng:11.043099},{lat:5.917022,lng:11.043211},{lat:5.91705,lng:11.043316},{lat:5.91708,lng:11.043421},{lat:5.917047,lng:11.043509},{lat:5.917074,lng:11.043622},{lat:5.916943,lng:11.04374}],ej=t=>{let e=0,n=0;return t.forEach(i=>{e+=i.lat,n+=i.lng}),{lat:e/t.length,lng:n/t.length}},tj=ej(J3),Cu={Cereals:[{crop:"Maize",duration:"4 Months",campaigns:"2 Campaigns",window:"Mar - Jun / Aug - Nov",type:"Staple (Njimom)"},{crop:"Rice",duration:"5 Months",campaigns:"1-2 Campaigns",window:"Year-round (Noun Plain)",type:"Intensive"},{crop:"Sorghum",duration:"4 Months",campaigns:"1 Campaign",window:"Jun - Oct",type:"Minor/Traditional"}],Tubers:[{crop:"Irish Potato",duration:"3-4 Months",campaigns:"2 Campaigns",window:"Mar - Jun / Sep - Dec",type:"High Value"},{crop:"Cassava",duration:"12 Months",campaigns:"1-3 Campaigns",window:"Year-round",type:"Food Security"},{crop:"Macabo (Cocoyam)",duration:"9-12 Months",campaigns:"1 Campaign",window:"Mar - May",type:"Traditional"},{crop:"Yam",duration:"8 Months",campaigns:"1 Campaign",window:"Nov - Mar",type:"Seasonal"},{crop:"Sweet Potato",duration:"4-5 Months",campaigns:"2 Campaigns",window:"May - Sep",type:"Cover Crop"}],"Fruit Trees":[{crop:"Avocado",duration:"2-3 Years (Grafted)",campaigns:"Seasonal Harvest",window:"Mar - Aug",type:"High Demand"},{crop:"Safou (African Plum)",duration:"3-4 Years (Grafted)",campaigns:"Seasonal Harvest",window:"Jun - Sep",type:"Local Specialist"},{crop:"Coffee (Arabica)",duration:"2-3 Years",campaigns:"Annual Harvest",window:"Oct - Dec",type:"Cash Crop"},{crop:"Mango",duration:"2-4 Years (Grafted)",campaigns:"Seasonal Harvest",window:"Mar - May",type:"Tree Crop"},{crop:"Kola Nut",duration:"4-5 Years (Grafted)",campaigns:"Continuous",window:"Year-round",type:"Cultural"}],Fruits:[{crop:"Banana",duration:"9-12 Months",campaigns:"Continuous",window:"Year-round",type:"Staple Fruit"},{crop:"Plantain",duration:"12-14 Months",campaigns:"Continuous",window:"Year-round",type:"Food Crop"},{crop:"Pineapple",duration:"14-18 Months",campaigns:"1 Campaign",window:"Year-round",type:"Biennial"},{crop:"Papaya",duration:"6-9 Months",campaigns:"Continuous",window:"Year-round",type:"Fast Growth"},{crop:"Watermelon",duration:"3 Months",campaigns:"2-3 Campaigns",window:"Oct - Dec / Feb - Apr",type:"Short Cycle"}],Legumes:[{crop:"Common Bean",duration:"2-3 Months",campaigns:"2-3 Campaigns",window:"Mar - May / Aug - Nov",type:"Key Protein"},{crop:"Groundnut (Peanut)",duration:"4 Months",campaigns:"2 Campaigns",window:"Mar - Jul",type:"Oil/Food"},{crop:"Soybean",duration:"3-4 Months",campaigns:"1 Campaign",window:"Mar - Jun",type:"Industrial"}]},$y=({fieldId:t,onComplete:e,initialData:n})=>{const{createCrop:i,updateCrop:r,crops:a}=vl(),{fields:l}=Pi(),{infrastructure:d}=Zl(),{definitions:p,fetchDefinitions:g,loading:m}=Qy(),{showNotification:_,showAlert:A}=hr();de.useEffect(()=>{g()},[]);const[x,R]=de.useState(n?.field_id?n.field_id.toString():t?t.toString():""),M=(l||[]).find(ae=>ae?.id?.toString()===x),[k,I]=de.useState({crop_type:n?.crop_type||"",variety:n?.variety||"",planting_date:n?.planting_date?new Date(n.planting_date).toISOString().split("T")[0]:new Date().toISOString().split("T")[0],expected_harvest_date:n?.expected_harvest_date?new Date(n.expected_harvest_date).toISOString().split("T")[0]:"",planted_area:n?.planted_area||"",boundary_coordinates:n?.boundary_coordinates||[],perimeter:n?.perimeter||"",planting_rate:n?.planting_rate||"",row_spacing:n?.row_spacing||"",season:n?.season||"",year:n?.year||new Date().getFullYear(),estimated_cost:n?.estimated_cost||"",status:n?.status||"planted",notes:n?.notes||""}),[Y,B]=de.useState(!1),[V,ee]=de.useState({inWindow:!0,campaign:"",requiredIrrigation:!1}),[ue,_e]=de.useState(!1),G=p.filter(ae=>ae.is_active).reduce((ae,he)=>{const De=he.category||"Other";return ae[De]||(ae[De]=[]),ae[De].push(he),ae},{}),me=p.find(ae=>ae.name===k.crop_type),Z=me?.varieties||[],J=me?.name||k.crop_type,Se=ae=>{if(!ae)return null;for(const he in Cu){const De=Cu[he].find(ze=>ze.crop.toLowerCase()===ae.toLowerCase()||ae.toLowerCase().includes(ze.crop.toLowerCase()));if(De)return De}return null},Ee=(ae,he)=>{if(!ae||!he)return"";const De=new Date(he),ze=ae.toLowerCase();if(ze.includes("month")){const ne=parseInt(ae.match(/\d+/)[0],10);De.setMonth(De.getMonth()+ne)}else if(ze.includes("year")){const ne=parseInt(ae.match(/\d+/)[0],10);De.setFullYear(De.getFullYear()+ne)}else if(ze.includes("day")){const ne=parseInt(ae.match(/\d+/)[0],10);De.setDate(De.getDate()+ne)}return De.toISOString().split("T")[0]},Ye=(ae,he)=>{if(!he||he.toLowerCase().includes("year-round"))return{inWindow:!0,campaign:"Continuous / Year-Round"};const ze=new Date(ae).getMonth(),ne=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],H=he.split("/").map(te=>te.trim());for(let te=0;te<H.length;te++){const ce=H[te],[Q,xe]=ce.split("-").map(Ge=>Ge.trim()),Te=ne.findIndex(Ge=>Q.includes(Ge)),Le=ne.findIndex(Ge=>xe.includes(Ge));if(!(Te===-1||Le===-1)){if(Te<=Le){if(ze>=Te&&ze<=Le)return{inWindow:!0,campaign:te===0?"Major Campaign":"Minor Campaign"}}else if(ze>=Te||ze<=Le)return{inWindow:!0,campaign:te===0?"Major Campaign":"Minor Campaign"}}}return{inWindow:!1,campaign:"Off-Season"}};de.useEffect(()=>{if(!k.crop_type||!k.planting_date)return;const ae=Se(k.crop_type);if(ae){const he=Ee(ae.duration,k.planting_date);he&&(!n||k.expected_harvest_date===n?.expected_harvest_date)&&I(ze=>({...ze,expected_harvest_date:he}));const De=Ye(k.planting_date,ae.window);De.inWindow?ee({inWindow:!0,campaign:De.campaign,requiredIrrigation:!1}):ee({inWindow:!1,campaign:"Off-Season",requiredIrrigation:!0})}else ee({inWindow:!0,campaign:"",requiredIrrigation:!1})},[k.crop_type,k.planting_date]);const oe=async ae=>{if(ae.preventDefault(),B(!0),V.requiredIrrigation&&!ue){A("IRRIGATION_REQUIRED"),_("Planting date is outside regional window. You must confirm irrigation capabilities.","error"),B(!1);return}const he=x==="undefined"?null:x;if(!he){A("NO_FIELD_SELECTION"),B(!1);return}try{const De=ne=>{const H=parseFloat(ne);return isNaN(H)?null:H},ze={...k,planted_area:De(k.planted_area),planting_rate:De(k.planting_rate),row_spacing:De(k.row_spacing),estimated_cost:De(k.estimated_cost),year:parseInt(k.year,10)||new Date().getFullYear(),expected_harvest_date:k.expected_harvest_date||null,planting_date:k.planting_date||null,notes:`${k.notes||""}
[System Automated]: Campaign=${V.campaign}, Irrigation Override=${ue}`.trim()};n?.id?(await r(n.id,{...ze,field_id:he}),_("Crop record updated successfully","success")):(await i(he,ze),_("New crop record created","success")),e&&e()}catch(De){console.error("Submission failed:",De)}finally{B(!1)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"850px",margin:"0 auto",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",padding:"0"},children:[u.jsx(Kl,{title:n?"Update Cultivation Record":"Establish New Cultivation Record",subtitle:`FIELD: ${M?.name||"GENERIC"} | CROP: ${J||"UNSPECIFIED"}`,icon:""}),u.jsxs("form",{onSubmit:oe,style:{padding:"24px"},children:[u.jsxs("div",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid #edf2f7"},children:[u.jsx("label",{htmlFor:"field_id",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"TARGET FIELD FOR CULTIVATION"}),u.jsxs("select",{id:"field_id",name:"field_id",value:x,onChange:ae=>R(ae.target.value),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",backgroundColor:t?"#f7fafc":"white"},disabled:!!t,children:[u.jsx("option",{value:"",children:"-- Select Field --"}),(l||[]).map(ae=>u.jsxs("option",{value:ae.id,children:[ae.name," (",ae.area," ha)"]},ae.id))]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"crop_type",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Crop Type"}),u.jsxs("select",{id:"crop_type",name:"crop_type",value:k.crop_type,onChange:ae=>I({...k,crop_type:ae.target.value,variety:""}),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[u.jsx("option",{value:"",children:"-- Select Crop --"}),Object.entries(G).map(([ae,he])=>u.jsx("optgroup",{label:ae,children:(he||[]).map(De=>u.jsxs("option",{value:De.name,children:[De.icon," ",De.name]},De.id))},ae)),u.jsx("option",{value:"other",children:"Other / Custom"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"variety",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Variety / Hybrid"}),u.jsx("input",{id:"variety",name:"variety",list:"variety-presets",type:"text",placeholder:"Select or enter variety",value:k.variety,onChange:ae=>I({...k,variety:ae.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}}),u.jsx("datalist",{id:"variety-presets",children:(Z||[]).map(ae=>u.jsx("option",{value:ae},ae))})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"year",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Crop Year"}),u.jsx("input",{id:"year",name:"year",type:"number",value:k.year,onChange:ae=>I({...k,year:ae.target.value}),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]})]}),k.crop_type&&V.campaign&&u.jsxs("div",{className:"animate-fade-in",style:{marginBottom:"20px",padding:"12px 16px",backgroundColor:V.requiredIrrigation?"#fff5f5":"#f0fff4",borderLeft:`4px solid ${V.requiredIrrigation?"#c53030":"#2f855a"}`,borderRadius:"4px",display:"flex",alignItems:"center",justifyContent:"space-between"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"700",color:V.requiredIrrigation?"#c53030":"#22543d",fontSize:"13px"},children:V.requiredIrrigation?" OFF-SEASON PLANTING DETECTED":" OPTIMAL PLANTING WINDOW"}),u.jsxs("div",{style:{fontSize:"12px",color:"#555",marginTop:"4px"},children:["Detected Season: ",u.jsx("strong",{style:{color:"#000"},children:V.campaign})," based on Scheduler data."]})]}),V.requiredIrrigation&&u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px",backgroundColor:"white",padding:"6px 12px",borderRadius:"6px",border:"1px solid #fc8181"},children:[u.jsx("input",{type:"checkbox",id:"irrigation_override",checked:ue,onChange:ae=>_e(ae.target.checked),style:{width:"16px",height:"16px",cursor:"pointer"}}),u.jsx("label",{htmlFor:"irrigation_override",style:{fontSize:"11px",fontWeight:"700",cursor:"pointer",color:"#c53030"},children:"CONFIRM IRRIGATION SYSTEM ACTIVE"})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"season",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Season"}),u.jsx("input",{id:"season",name:"season",type:"text",placeholder:"e.g. Spring 2026",value:k.season,onChange:ae=>I({...k,season:ae.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"planting_date",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Planting Date"}),u.jsx("input",{id:"planting_date",name:"planting_date",type:"date",value:k.planting_date,onChange:ae=>I({...k,planting_date:ae.target.value}),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("label",{htmlFor:"expected_harvest_date",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Exp. Harvest Date"}),k.expected_harvest_date&&u.jsx("span",{style:{fontSize:"10px",color:"var(--primary)",fontWeight:"bold"},children:"AUTO-ESTIMATED"})]}),u.jsx("input",{id:"expected_harvest_date",name:"expected_harvest_date",type:"date",value:k.expected_harvest_date,onChange:ae=>I({...k,expected_harvest_date:ae.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#fcfcfc",marginBottom:"24px",border:"1px solid #e0e0e0",padding:"0",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("h4",{style:{margin:0,fontSize:"13px",color:"var(--primary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Land Allocation Map"}),u.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Draw rectangle or polygon to allocate space"})]}),u.jsx("div",{style:{height:"400px"},children:u.jsx(Id,{center:M?.boundary?.coordinates?.[0]?.[0]?[M.boundary.coordinates[0][0][1],M.boundary.coordinates[0][0][0]]:null,fields:l,crops:a,infrastructure:d,farmBoundary:M?.boundary,editable:!0,manualCoordinates:k.boundary_coordinates,currentLabel:J,onBoundaryCreate:ae=>{I(he=>({...he,boundary_coordinates:ae.coordinates,planted_area:ae.area,perimeter:ae.perimeter}))}})}),k.boundary_coordinates?.length>0&&u.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fffbe6",borderTop:"1px solid #ffe58f",fontSize:"12px",display:"flex",gap:"30px"},children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Allocated Area:"})," ",k.planted_area," ha"]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Perimeter:"})," ",k.perimeter||0," m"]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Geofence:"})," ",k.boundary_coordinates.length," points"]})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#f7fafc",marginBottom:"24px",border:"1px solid #edf2f7"},children:[u.jsx("h4",{style:{fontSize:"11px",color:"#2b6cb0",marginBottom:"16px",letterSpacing:"0.05em",textTransform:"uppercase",paddingBottom:"8px",borderBottom:"1px solid #e2e8f0"},children:"PLANTING SPECIFICATIONS"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"planted_area",style:{fontSize:"12px",color:"#4a5568",marginBottom:"6px",display:"block"},children:"Area (ha)"}),u.jsx("input",{id:"planted_area",name:"planted_area",type:"number",step:"0.01",value:k.planted_area,onChange:ae=>I({...k,planted_area:ae.target.value}),style:{padding:"8px",borderRadius:"6px",border:"1px solid #cbd5e0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"planting_rate",style:{fontSize:"12px",color:"#4a5568",marginBottom:"6px",display:"block"},children:"Rate (seeds/ha)"}),u.jsx("input",{id:"planting_rate",name:"planting_rate",type:"number",step:"0.01",value:k.planting_rate,onChange:ae=>I({...k,planting_rate:ae.target.value}),style:{padding:"8px",borderRadius:"6px",border:"1px solid #cbd5e0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"row_spacing",style:{fontSize:"12px",color:"#4a5568",marginBottom:"6px",display:"block"},children:"Spacing (cm)"}),u.jsx("input",{id:"row_spacing",name:"row_spacing",type:"number",step:"0.1",value:k.row_spacing,onChange:ae=>I({...k,row_spacing:ae.target.value}),style:{padding:"8px",borderRadius:"6px",border:"1px solid #cbd5e0",width:"100%"}})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"status",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Current Status"}),u.jsxs("select",{id:"status",name:"status",value:k.status,onChange:ae=>I({...k,status:ae.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[u.jsx("option",{value:"planted",children:"Recently Planted"}),u.jsx("option",{value:"growing",children:"Actively Growing"}),u.jsx("option",{value:"harvested",children:"Harvested / Completed"})]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"estimated_cost",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Budgeted Cost (XAF)"}),u.jsx("input",{id:"estimated_cost",name:"estimated_cost",type:"number",placeholder:"e.g. 500000",value:k.estimated_cost,onChange:ae=>I({...k,estimated_cost:ae.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{htmlFor:"notes",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Internal Monitoring Notes"}),u.jsx("textarea",{id:"notes",name:"notes",value:k.notes,onChange:ae=>I({...k,notes:ae.target.value}),placeholder:"Details about seed quality, depth, or moisture at planting...",rows:"3",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",resize:"vertical"}})]}),u.jsxs("div",{style:{display:"flex",gap:"16px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"14px",fontSize:"16px"},disabled:Y,children:Y?"Processing...":n?"Update Record":"Save Cultivation Record"}),u.jsx("button",{type:"button",onClick:e,className:"outline",style:{flex:1,padding:"14px"},children:"Discard"})]})]})]})},vg=$o((t,e)=>({inputs:[],loading:!1,fetchInputs:async n=>{t({loading:!0});try{const i=await zt.get(`/farms/${n}/inputs`);t({inputs:i.data,loading:!1})}catch{t({loading:!1})}},createInput:async(n,i)=>{try{const r=await zt.post(`/farms/${n}/inputs`,i);return t(a=>({inputs:[...a.inputs,r.data]})),r.data}catch(r){throw r}},updateInput:async(n,i)=>{try{const r=await zt.put(`/inputs/${n}`,i);return t(a=>({inputs:a.inputs.map(l=>l.id===n?r.data:l)})),r.data}catch(r){throw r}},adjustStock:async(n,i)=>{try{const r=await zt.post(`/inputs/${n}/adjust`,{quantity:i});return t(a=>({inputs:a.inputs.map(l=>l.id===n?r.data:l)})),r.data}catch(r){throw r}},deleteInput:async n=>{try{const i=await zt.delete(`/inputs/${n}`);return t(r=>({inputs:r.inputs.filter(a=>a.id!==n)})),i.data}catch(i){throw i}}})),Jy=$o((t,e)=>({costSettings:[],loading:!1,error:null,fetchSettings:async n=>{t({loading:!0,error:null});const i=await Pf("cost_settings",{farm_id:n});i.length>0&&t({costSettings:i,loading:!1});try{const r=await zt.get(`/farms/${n}/cost-settings`);await Io("cost_settings",r.data),t({costSettings:r.data,loading:!1})}catch(r){console.error("[CostStore] Fetch error:",r),t({loading:!1})}},createSetting:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.post(`/farms/${n}/cost-settings`,i);return await e().fetchSettings(n),r.data}catch(r){throw console.error("[CostStore] Create error:",r),t({error:r.response?.data?.message||"Failed to create setting",loading:!1}),r}},updateSetting:async(n,i)=>{t({loading:!0,error:null});try{const r=await zt.put(`/farms/cost-settings/${n}`,i),a=(await Mr(async()=>{const{default:l}=await Promise.resolve().then(()=>Ls);return{default:l}},void 0)).default.getState().currentFarm?.id;return a&&await e().fetchSettings(a),r.data}catch(r){throw console.error("[CostStore] Update error:",r),t({error:r.response?.data?.message||"Failed to update setting",loading:!1}),r}},deleteSetting:async n=>{t({loading:!0,error:null});try{await zt.delete(`/farms/cost-settings/${n}`);const i=(await Mr(async()=>{const{default:r}=await Promise.resolve().then(()=>Ls);return{default:r}},void 0)).default.getState().currentFarm?.id;i&&await e().fetchSettings(i)}catch(i){throw console.error("[CostStore] Delete error:",i),t({error:i.response?.data?.message||"Failed to delete setting",loading:!1}),i}}})),ay=[{id:"farm_house",label:"Farm House",icon:""},{id:"residential",label:"Residential Unit",icon:""},{id:"storage",label:"General Warehouse",icon:""},{id:"cocoa_dryer",label:"Cocoa/Coffee Dryer",icon:""},{id:"oil_press",label:"Oil Press / Mill",icon:""},{id:"poultry",label:"Poultry Pen",icon:""},{id:"livestock_pen",label:"Livestock Pen (Piggery/Shed)",icon:""},{id:"irrigation",label:"Irrigation System",icon:""},{id:"well",label:"Water Well / Borehole",icon:""},{id:"fence",label:"Fencing / Boundary",icon:""}],nj=({onComplete:t,initialData:e,initialActivityType:n,fieldName:i,categoryLabel:r})=>{const{logActivity:a,updateActivity:l}=ml(),{currentFarm:d}=Pi(),{showNotification:p,showAlert:g}=hr(),[m,_]=de.useState({activity_date:new Date().toISOString().split("T")[0],infrastructure_id:e?.infrastructure_id||"",activity_type:n||e?.activity_type||"maintenance",priority:"medium",work_status:"completed",performed_by_type:"farm_staff",description:"",component:"",labor_cost:0,material_cost:0,equipment_cost:0,service_cost:0,transport_cost:0,other_cost:0,total_cost:0,payment_method:"cash",start_time:"",end_time:"",duration_hours:0,num_workers:1,weather_conditions:"",next_maintenance:"",issues:"",materials_used:"",supplier_name:"",supplier_contact:"",invoice_number:"",warranty:"none",transaction_type:"expense",notes:""});de.useEffect(()=>{e&&_({...e,activity_date:e.activity_date||new Date().toISOString().split("T")[0]})},[e]),de.useEffect(()=>{const M=parseFloat(m.labor_cost||0)+parseFloat(m.material_cost||0)+parseFloat(m.equipment_cost||0)+parseFloat(m.service_cost||0)+parseFloat(m.transport_cost||0)+parseFloat(m.other_cost||0);_(k=>({...k,total_cost:M.toFixed(2)}))},[m.labor_cost,m.material_cost,m.equipment_cost,m.service_cost,m.transport_cost,m.other_cost]);const[A,x]=de.useState(!1),R=async M=>{if(M.preventDefault(),!m.description||m.description.trim()===""){g("INVALID_QUANTITY","Please provide a technical description of the actions performed to continue.");return}x(!0);try{const k={...m,field_id:e?.field_id||null,farm_id:d.id,labor_cost:parseFloat(m.labor_cost)||0,material_cost:parseFloat(m.material_cost)||0,equipment_cost:parseFloat(m.equipment_cost)||0,service_cost:parseFloat(m.service_cost)||0,transport_cost:parseFloat(m.transport_cost)||0,other_cost:parseFloat(m.other_cost)||0,total_cost:parseFloat(m.total_cost)||0,duration_hours:parseFloat(m.duration_hours)||0,num_workers:parseInt(m.num_workers)||1};e?.id?await l(e.id,k):await a(k),t&&t()}catch(k){console.error("[InfrastructureActivityForm] Submission error:",k)}finally{x(!1)}};return u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"950px",margin:"0 auto",padding:"0 0 40px 0"},children:[u.jsx(Kl,{title:"Log Infrastructure Operations",subtitle:`FARM: ${d?.name} | FIELD: ${i||"SOUTH"} | TYPE: INFRASTRUCTURE & CONSTRUCTION`,icon:""}),u.jsxs("form",{onSubmit:R,style:{padding:"40px",backgroundColor:"#fcfcfc"},children:[u.jsxs("div",{style:{backgroundColor:"#000",color:"#fff",padding:"12px 20px",marginBottom:"32px",display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:""}),u.jsx("p",{style:{fontSize:"13px",fontWeight:"600",margin:0,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Operational inputs will be capitalized into the total asset valuation."})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Field Intelligence"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr 1fr",gap:"30px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Field"}),u.jsx("input",{type:"text",value:i||"SOUTH",disabled:!0,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"700",backgroundColor:"#f9f9f9",color:"#333"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Infrastructure Asset"}),u.jsx("input",{type:"text",value:r||"GENERIC MAINTENANCE",disabled:!0,style:{width:"100%",borderRadius:"8px",border:"2px solid var(--border)",padding:"12px",fontWeight:"900",backgroundColor:"#f9f9f9",color:"var(--primary)"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"activity_date",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Log Date"}),u.jsx("input",{id:"activity_date",name:"activity_date",type:"date",value:m.activity_date,onChange:M=>_({...m,activity_date:M.target.value}),required:!0,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Detailed Activity Log"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginBottom:"24px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"priority",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Priority Matrix"}),u.jsxs("select",{id:"priority",name:"priority",value:m.priority,onChange:M=>_({...m,priority:M.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500"},children:[u.jsx("option",{value:"low",children:"Standard (Low)"}),u.jsx("option",{value:"medium",children:"Optimized (Medium)"}),u.jsx("option",{value:"high",children:"Urgent (High)"}),u.jsx("option",{value:"critical",children:"CRITICAL (Alert)"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"transaction_type",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Transaction Protocol"}),u.jsxs("select",{id:"transaction_type",name:"transaction_type",value:m.transaction_type,onChange:M=>_({...m,transaction_type:M.target.value}),required:!0,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500",backgroundColor:m.transaction_type==="income"?"var(--bg-success)":"var(--bg-error-light)"},children:[u.jsx("option",{value:"expense",children:" Operational Expense"}),u.jsx("option",{value:"income",children:" Operational Income"})]})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"DESCRIPTION"}),u.jsx("textarea",{id:"description",name:"description",value:m.description,onChange:M=>_({...m,description:M.target.value}),placeholder:"Provide a detailed technical description of the operation...",required:!0,style:{width:"100%",minHeight:"100px",borderRadius:"8px",border:"1px solid var(--border)",padding:"15px"}})]})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Financial Disbursement Ledger"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"32px"},children:["labor_cost","material_cost","equipment_cost","service_cost","transport_cost","other_cost"].map(M=>u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:M,style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:M.replace("_"," ")}),u.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[u.jsx("span",{style:{backgroundColor:"#f0f0f0",border:"1px solid var(--border)",borderRight:"none",padding:"12px",fontWeight:"900",fontSize:"12px",borderRadius:"8px 0 0 8px"},children:"XAF"}),u.jsx("input",{id:M,name:M,type:"number",value:m[M],onChange:k=>_({...m,[M]:k.target.value}),style:{width:"100%",borderRadius:"0 8px 8px 0",border:"1px solid var(--border)",padding:"12px"}})]})]},M))}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"30px",backgroundColor:"#fcfcfc",border:"1px solid var(--border)",padding:"24px",borderRadius:"12px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{style:{fontSize:"14px",fontWeight:"900",textTransform:"uppercase",color:"var(--primary)",marginBottom:"8px",display:"block"},children:"TOTAL AUDITED EXPENDITURE"}),u.jsxs("div",{style:{fontSize:"32px",fontWeight:"900",color:"#000"},children:[parseFloat(m.total_cost||0).toLocaleString()," ",u.jsx("span",{style:{fontSize:"16px"},children:"XAF"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"payment_method",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Payment Protocol"}),u.jsxs("select",{id:"payment_method",name:"payment_method",value:m.payment_method,onChange:M=>_({...m,payment_method:M.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500"},children:[u.jsx("option",{value:"cash",children:"Cash Settlement"}),u.jsx("option",{value:"bank_transfer",children:"Electronic Transfer"}),u.jsx("option",{value:"mobile_money",children:"Mobile Payment"}),u.jsx("option",{value:"check",children:"Certified Check"})]})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"50px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"16px",fontSize:"16px"},disabled:A,children:A?"SYNCING DATA...":"SAVE OPERATION RECORD"}),u.jsx("button",{type:"button",onClick:t,className:"outline",style:{flex:1,padding:"16px"},children:"CANCEL"})]})]})]})},Bf=({fieldId:t,cropId:e,onComplete:n,initialData:i})=>{const{logActivity:r,updateActivity:a}=ml(),{showNotification:l,showAlert:d}=hr(),{inputs:p,fetchInputs:g}=vg(),{crops:m,fetchCropsByFarm:_}=vl(),{currentFarm:A,fields:x,fetchFields:R}=Pi(),{infrastructure:M,fetchInfrastructure:k}=Zl(),{costSettings:I,fetchSettings:Y,createSetting:B}=Jy(),[V,ee]=de.useState(t||""),[ue,_e]=de.useState({activity_type:"planting",activity_date:new Date().toISOString().split("T")[0],start_time:"",end_time:"",duration_hours:"",area_covered:"",description:"",weather_conditions:"",temperature:"",equipment_used:"",labor_cost:"",notes:"",input_id:"",quantity_used:"",application_rate:"",transaction_type:"expense"});de.useEffect(()=>{A?.id&&Y(A.id)},[A?.id]),de.useEffect(()=>{i&&(_e({...i,activity_date:i.activity_date||new Date().toISOString().split("T")[0],input_id:i.Inputs?.[0]?.id||"",quantity_used:i.Inputs?.[0]?.ActivityInput?.quantity_used||"",application_rate:i.Inputs?.[0]?.ActivityInput?.application_rate||""}),i.field_id&&ee(i.field_id))},[i]);const[fe,G]=de.useState(!1),me=async oe=>{if(oe.preventDefault(),!V){d("NO_FIELD_SELECTION");return}G(!0);try{const ae={...ue,field_id:V,farm_id:A.id};if(ue.input_id&&ue.quantity_used){const he=p.find(De=>De.id===ue.input_id);ae.inputs=[{input_id:ue.input_id,quantity_used:parseFloat(ue.quantity_used)||0,unit:he?he.unit:"",application_rate:parseFloat(ue.application_rate)||null}]}else ae.inputs=[];i?.id?await a(i.id,ae):await r(ae),n&&n()}catch(ae){console.error("[ActivityForm] Submission error:",ae)}finally{G(!1)}};de.useMemo(()=>m?V?m.filter(oe=>oe.field_id===V):m:[],[m,V]);const Z=async oe=>{const ae=oe.target.value;if(ae==="NEW_FIELD_OP"||ae==="NEW_INFRA_OP"){const he=ae==="NEW_FIELD_OP"?"Field Operation":"Infrastructure Operation",De=ae==="NEW_FIELD_OP"?"FIELD_OP":"INFRA_OP",ze=prompt(`Enter new custom ${he} name:`);if(ze&&ze.trim()){G(!0);try{await B(A.id,{category:De,name:ze.trim(),unit:"operation",unit_cost:0,billing_frequency:"per_unit"}),_e(ne=>({...ne,activity_type:ze.trim()})),l(`New ${he} "${ze}" added successfully!`,"success")}catch(ne){console.error("Failed to create custom operation:",ne),l("Failed to create custom operation type.","error")}finally{G(!1)}}return}_e(he=>({...he,activity_type:ae}))},J=I.filter(oe=>oe.category==="FIELD_OP"),Se=I.filter(oe=>oe.category==="INFRA_OP"),Ee={planting:"Planting",harvesting:"Harvesting",fertilizing:"Fertilizing / Application of Fertilizers",spraying:"Spraying / Protection",irrigation:"Irrigation",tillage:"Tillage / Cultivation",scouting:"Scouting / Inspection",pruning:"Pruning",thinning:"Thinning",mowing:"Mowing",mulching:"Mulching",soil_sampling:"Soil Sampling",maintenance:"General Maintenance",infra_farm_house:"Farm House Construction",infra_residential:"Farm Residential Construction",infra_storage:"Storage Construction",infra_fencing:"Fencing / Boundary Work",infra_road:"Road Maintenance",infra_water_system:"Water System Installation",infra_solar:"Solar / Energy Work",infra_general:"General Infrastructure Maintenance"};return J.forEach(oe=>{Ee[oe.name]=oe.name}),Se.forEach(oe=>{Ee[oe.name]=oe.name}),ue.activity_type?.startsWith("infra_")||Se.some(oe=>oe.name===ue.activity_type)?u.jsx(nj,{onComplete:n,initialData:i,initialActivityType:ue.activity_type,fieldName:x.find(oe=>oe.id===V)?.name,categoryLabel:Ee[ue.activity_type]}):u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"950px",margin:"0 auto",padding:"0 0 40px 0"},children:[u.jsx(Kl,{title:"Log Field Operations",subtitle:`FARM: ${A?.name} | FIELD: ${x.find(oe=>oe.id===V)?.name||"NOT SELECTED"} | TYPE: CROP & LAND MAINTENANCE`,icon:""}),u.jsxs("form",{onSubmit:me,style:{padding:"40px",backgroundColor:"#fcfcfc"},children:[u.jsxs("div",{style:{backgroundColor:"#000",color:"#fff",padding:"12px 20px",marginBottom:"32px",display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:""}),u.jsx("p",{style:{fontSize:"13px",fontWeight:"600",margin:0,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Field operations are logged via the operational intelligence ledger."})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Field Intelligence"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"field_id",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Field"}),u.jsxs("select",{id:"field_id",name:"field_id",value:V,onChange:oe=>ee(oe.target.value),required:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px",fontWeight:"700"},children:[u.jsx("option",{value:"",children:"-- Select Field --"}),x.map(oe=>u.jsx("option",{value:oe.id,children:oe.name},oe.id))]})]})})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Detailed Activity Log"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"30px",marginBottom:"24px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"activity_type",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Operation Category"}),u.jsxs("select",{id:"activity_type",name:"activity_type",value:ue.activity_type,onChange:Z,onClick:()=>{V||d("NO_FIELD_SELECTION")},required:!0,disabled:!V,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500",opacity:V?1:.6,cursor:V?"pointer":"not-allowed"},children:[u.jsxs("optgroup",{label:"Crops / Field Operations",children:[u.jsx("option",{value:"planting",children:"Planting"}),u.jsx("option",{value:"harvesting",children:"Harvesting"}),u.jsx("option",{value:"fertilizing",children:"Fertilizing / Application of Fertilizers"}),u.jsx("option",{value:"spraying",children:"Spraying / Protection"}),u.jsx("option",{value:"irrigation",children:"Irrigation"}),u.jsx("option",{value:"tillage",children:"Tillage / Cultivation"}),u.jsx("option",{value:"scouting",children:"Scouting / Inspection"}),u.jsx("option",{value:"pruning",children:"Pruning"}),u.jsx("option",{value:"thinning",children:"Thinning"}),u.jsx("option",{value:"mowing",children:"Mowing"}),u.jsx("option",{value:"mulching",children:"Mulching"}),u.jsx("option",{value:"soil_sampling",children:"Soil Sampling"}),u.jsx("option",{value:"maintenance",children:"General Maintenance"}),J.map(oe=>u.jsx("option",{value:oe.name,children:oe.name},oe.id)),u.jsx("option",{value:"NEW_FIELD_OP",style:{fontWeight:"bold",color:"var(--primary)"},children:" CREATE NEW FIELD OPERATION..."})]}),u.jsxs("optgroup",{label:"Infrastructure / Construction",children:[u.jsx("option",{value:"infra_farm_house",children:"Farm House Construction"}),u.jsx("option",{value:"infra_residential",children:"Farm Residential Construction"}),u.jsx("option",{value:"infra_storage",children:"Storage Construction"}),u.jsx("option",{value:"infra_fencing",children:"Fencing / Boundary Work"}),u.jsx("option",{value:"infra_road",children:"Road Maintenance"}),u.jsx("option",{value:"infra_water_system",children:"Water System Installation"}),u.jsx("option",{value:"infra_solar",children:"Solar / Energy Work"}),u.jsx("option",{value:"infra_general",children:"General Infrastructure Maintenance"}),Se.map(oe=>u.jsx("option",{value:oe.name,children:oe.name},oe.id)),u.jsx("option",{value:"NEW_INFRA_OP",style:{fontWeight:"bold",color:"var(--primary)"},children:" CREATE NEW INFRASTRUCTURE OP..."})]})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"transaction_type",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Transaction Protocol"}),u.jsxs("select",{id:"transaction_type",name:"transaction_type",value:ue.transaction_type,onChange:oe=>_e({...ue,transaction_type:oe.target.value}),required:!0,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500",backgroundColor:ue.transaction_type==="income"?"var(--bg-success)":"var(--bg-error-light)"},children:[u.jsx("option",{value:"expense",children:" Operational Expense"}),u.jsx("option",{value:"income",children:" Operational Income"})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"activity_date",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Operational Date"}),u.jsx("input",{id:"activity_date",name:"activity_date",type:"date",value:ue.activity_date,onChange:oe=>_e({...ue,activity_date:oe.target.value}),required:!0,style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Timing & Environmental Matrix"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"start_time",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Start Time"}),u.jsx("input",{id:"start_time",name:"start_time",type:"time",value:ue.start_time,onChange:oe=>_e({...ue,start_time:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"end_time",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"End Time"}),u.jsx("input",{id:"end_time",name:"end_time",type:"time",value:ue.end_time,onChange:oe=>_e({...ue,end_time:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"duration_hours",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Duration (h)"}),u.jsx("input",{id:"duration_hours",name:"duration_hours",type:"number",step:"0.1",value:ue.duration_hours,onChange:oe=>_e({...ue,duration_hours:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"area_covered",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Area (ha)"}),u.jsx("input",{id:"area_covered",name:"area_covered",type:"number",step:"0.01",value:ue.area_covered,onChange:oe=>_e({...ue,area_covered:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 2fr",gap:"30px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"weather_conditions",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Weather Condition"}),u.jsx("input",{id:"weather_conditions",name:"weather_conditions",type:"text",placeholder:"Sunny",value:ue.weather_conditions,onChange:oe=>_e({...ue,weather_conditions:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"temperature",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Temp (C)"}),u.jsx("input",{id:"temperature",name:"temperature",type:"number",step:"0.1",value:ue.temperature,onChange:oe=>_e({...ue,temperature:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"equipment_used",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Machinery / Equipment"}),u.jsx("input",{id:"equipment_used",name:"equipment_used",type:"text",placeholder:"Tractor ID",value:ue.equipment_used,onChange:oe=>_e({...ue,equipment_used:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Input Application Ledger"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr 1fr",gap:"20px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"input_id",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Inventory Item"}),u.jsxs("select",{id:"input_id",name:"input_id",value:ue.input_id,onChange:oe=>_e({...ue,input_id:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px",fontWeight:"500"},children:[u.jsx("option",{value:"",children:"-- No Inventory Item --"}),p.map(oe=>u.jsxs("option",{value:oe.id,children:[oe.name," (",oe.brand,") - Stock: ",oe.quantity_in_stock," ",oe.unit]},oe.id))]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"quantity_used",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Quantity Used"}),u.jsx("input",{id:"quantity_used",name:"quantity_used",type:"number",placeholder:"Qty",value:ue.quantity_used,onChange:oe=>_e({...ue,quantity_used:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"application_rate",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Rate (kg/ha)"}),u.jsx("input",{id:"application_rate",name:"application_rate",type:"text",placeholder:"Rate",value:ue.application_rate,onChange:oe=>_e({...ue,application_rate:oe.target.value}),style:{width:"100%",borderRadius:"8px",border:"1px solid var(--border)",padding:"12px"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px",backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("h3",{style:{fontSize:"16px",fontWeight:"700",color:"var(--primary)",marginBottom:"24px",borderBottom:"1px solid var(--border)",paddingBottom:"12px"},children:"Financial Documentation"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(200px, 1fr) 2fr",gap:"30px",marginBottom:"24px"},children:[u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"labor_cost",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Labor Cost (Audited)"}),u.jsxs("div",{style:{display:"flex",alignItems:"center"},children:[u.jsx("span",{style:{backgroundColor:"#f0f0f0",border:"2px solid #ddd",borderRight:"none",padding:"12px",fontWeight:"900",fontSize:"12px"},children:"XAF"}),u.jsx("input",{id:"labor_cost",name:"labor_cost",type:"number",value:ue.labor_cost,onChange:oe=>_e({...ue,labor_cost:oe.target.value}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"description",style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Description"}),u.jsx("textarea",{id:"description",name:"description",value:ue.description,onChange:oe=>_e({...ue,description:oe.target.value}),placeholder:"Audit trail of actions performed...",required:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"15px",minHeight:"80px"}})]})]}),u.jsxs("div",{className:"form-group",children:[u.jsx("label",{htmlFor:"notes",style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#777",marginBottom:"4px",display:"block"},children:"Internal Engineering Notes"}),u.jsx("textarea",{id:"notes",name:"notes",value:ue.notes||"",onChange:oe=>_e({...ue,notes:oe.target.value}),placeholder:"Sensitive internal operational data...",style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"15px",minHeight:"60px"}})]})]}),u.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"50px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"16px",fontSize:"16px"},disabled:fe,children:fe?"SYNCING DATA...":"SAVE OPERATION RECORD"}),u.jsx("button",{type:"button",onClick:n,className:"outline",style:{flex:1,padding:"16px"},children:"CANCEL"})]})]})]})},ij=({field:t,onBack:e})=>{let n=parseFloat(t.area||0);if(n===0&&t.boundary?.coordinates?.[0])try{const x=xc(t.boundary.coordinates);n=Jc(x)/1e4}catch(x){console.error("Frontend area calculation failed:",x)}const[i,r]=de.useState([]),[a,l]=de.useState([]),[d,p]=de.useState("overview"),[g,m]=de.useState(null),_=async()=>{try{const[x,R]=await Promise.all([zt.get(`/crops/field/${t.id}`),zt.get(`/activities/farm/${t.farm_id}`)]);r(x.data),l(R.data.filter(M=>M.field_id===t.id))}catch(x){console.error(x)}};de.useEffect(()=>{_()},[t.id]);const A=()=>d==="add-crop"?u.jsx($y,{fieldId:t.id,onComplete:()=>{p("overview"),_()}}):d==="add-activity"?u.jsx(Bf,{fieldId:t.id,cropId:g?.id,onComplete:()=>{p("overview"),_()}}):u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(300px, 1fr) 2fr",gap:"24px"},children:[u.jsxs("div",{children:[u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"card-header",children:u.jsx("h4",{style:{margin:0,fontSize:"14px"},children:"Technical Profile"})}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsx(Xh,{label:"Field Number",value:t.field_number||"N/A"}),u.jsx(Xh,{label:"Total Area",value:`${n.toFixed(2)} ha`}),u.jsx(Xh,{label:"Soil Type",value:t.soil_type||"Unknown"}),u.jsx(Xh,{label:"Irrigation",value:t.irrigation?"Operational":"None"})]})]}),u.jsxs("div",{className:"card",children:[u.jsxs("div",{className:"card-header",children:[u.jsx("h4",{style:{margin:0,fontSize:"14px"},children:"Active Cultivations"}),u.jsx("button",{onClick:()=>p("add-crop"),className:"primary",style:{padding:"4px 10px",fontSize:"11px"},children:"+ New"})]}),i.length===0?u.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"No active crops."}):i.map(x=>u.jsxs("div",{style:{marginBottom:"16px",padding:"12px",borderRadius:"6px",border:"1px solid var(--border)",backgroundColor:"#fcfdfc"},children:[u.jsx("div",{style:{fontWeight:"600",color:"var(--primary)",marginBottom:"4px"},children:x.crop_type}),u.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:[x.variety,"  Planted ",x.planting_date]}),u.jsx("button",{onClick:()=>{m(x),p("add-activity")},className:"outline",style:{width:"100%",marginTop:"12px",fontSize:"11px",padding:"6px"},children:"Record Work"})]},x.id))]})]}),u.jsxs("div",{children:[u.jsx("div",{className:"card",style:{padding:"0",overflow:"hidden",height:"350px",marginBottom:"24px"},children:u.jsx(Id,{center:[t.boundary.coordinates[0][0][1],t.boundary.coordinates[0][0][0]],fields:[t],crops:i,editable:!1})}),u.jsxs("div",{className:"card",children:[u.jsx("div",{className:"card-header",children:u.jsx("h4",{style:{margin:0,fontSize:"14px"},children:"Operation Log"})}),a.length===0?u.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)"},children:"No activities logged for this field."}):u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:a.map(x=>u.jsxs("div",{style:{display:"flex",gap:"20px"},children:[u.jsx("div",{style:{minWidth:"90px",color:"var(--text-muted)",fontSize:"12px",fontWeight:"500",textAlign:"right",paddingTop:"4px"},children:x.activity_date}),u.jsxs("div",{style:{position:"relative",borderLeft:"2px solid var(--primary-light)",paddingLeft:"20px"},children:[u.jsx("div",{style:{position:"absolute",left:"-6px",top:"8px",width:"10px",height:"10px",borderRadius:"50%",backgroundColor:"var(--primary)",border:"2px solid white"}}),u.jsx("div",{style:{fontWeight:"600",fontSize:"14px",textTransform:"capitalize"},children:x.activity_type}),u.jsx("div",{style:{fontSize:"13px",color:"var(--text-main)",marginTop:"4px"},children:x.description})]})]},x.id))})]})]})]});return u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"16px",marginBottom:"24px"},children:[u.jsx("button",{onClick:e,className:"outline",style:{padding:"6px 14px"},children:" Back"}),u.jsxs("div",{style:{fontSize:"14px",color:"var(--text-muted)"},children:["Fields / ",u.jsx("span",{style:{color:"var(--secondary)",fontWeight:"600"},children:t.name})]})]}),A()]})},Xh=({label:t,value:e})=>u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",fontSize:"13px"},children:[u.jsx("span",{style:{color:"var(--text-muted)"},children:t}),u.jsx("span",{style:{fontWeight:"bold"},children:e})]}),w5=$o((t,e)=>({weatherData:null,forecast:[],history:[],loading:!1,fetchWeather:async(n,i=null)=>{t({loading:!0});try{const r=i?{lat:i.lat,lng:i.lng}:{},a=await zt.get(`/farms/${n}/weather`,{params:r});t({weatherData:a.data,loading:!1})}catch(r){r.response?.status===404?t({weatherData:null,loading:!1}):t({loading:!1})}},fetchForecast:async(n,i=null)=>{t({loading:!0});try{const r=i?{lat:i.lat,lng:i.lng}:{},a=await zt.get(`/farms/${n}/weather/forecast`,{params:r});t({forecast:a.data,loading:!1})}catch(r){r.response?.status===404?t({forecast:[],loading:!1}):t({loading:!1})}},fetchHistory:async n=>{t({loading:!0});try{const i=await zt.get(`/farms/${n}/weather/history`);t({history:i.data,loading:!1})}catch(i){i.response?.status===404?t({history:[],loading:!1}):t({loading:!1})}}})),rj=()=>{const{currentFarm:t,fields:e}=Pi(),{weatherData:n,forecast:i,fetchWeather:r,fetchForecast:a,loading:l}=w5();de.useEffect(()=>{if(t?.id){let p=null;if(t.coordinates?.coordinates&&(p={lat:t.coordinates.coordinates[1],lng:t.coordinates.coordinates[0]}),e&&e.length>0){const g=e[0];if(g.boundary?.coordinates?.[0]){const m=g.boundary.coordinates[0].reduce((A,x)=>A+x[1],0),_=g.boundary.coordinates[0].reduce((A,x)=>A+x[0],0);p={lat:m/g.boundary.coordinates[0].length,lng:_/g.boundary.coordinates[0].length}}}r(t.id,p),a(t.id,p)}},[t?.id,e?.length]);const d=p=>{const g=p?.toLowerCase()||"";return g.includes("rain")?"":g.includes("cloud")?"":g.includes("sun")||g.includes("clear")?"":g.includes("storm")?"":""};return l?u.jsx("div",{style:{padding:"20px",border:"1px solid #000",textAlign:"center",fontSize:"11px",fontWeight:"800",fontStyle:"italic"},children:"ESTABLISHING UPLINK..."}):u.jsxs("div",{className:"card animate-fade-in",style:{padding:"0",border:"1px solid #000",borderRadius:"0",overflow:"hidden",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[u.jsxs("div",{style:{backgroundColor:"#000",padding:"12px 16px",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,color:"#fff",fontSize:"12px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"FARMING WEATHER"}),u.jsxs("div",{style:{fontSize:"9px",color:"#4caf50",marginTop:"2px",fontWeight:"bold"},children:[" LIVE FEED ",n?.location?.name?`@ ${n.location.name?.toUpperCase()}`:""]})]}),u.jsx("div",{style:{textAlign:"right"},children:u.jsxs("div",{style:{color:"#fff",fontSize:"18px",fontWeight:"900"},children:[n?.temp_c?Math.round(n.temp_c):"--","C"]})})]}),u.jsx("div",{style:{padding:"20px",background:"linear-gradient(to bottom, #fcfcfc, #f4f4f4)",borderBottom:"2px solid #000"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"20px"},children:[u.jsx("div",{style:{fontSize:"48px"},children:d(n?.condition?.text)}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"16px",fontWeight:"900",textTransform:"uppercase"},children:n?.condition?.text||"Unavailable"}),u.jsxs("div",{style:{fontSize:"11px",color:"#666",marginTop:"4px",fontWeight:"600"},children:["HUMIDITY: ",n?.humidity||0,"%  |  WIND: ",n?.wind_kph||0," km/h"]})]})]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(7, 1fr)"},children:(i||[]).slice(0,7).map((p,g)=>u.jsxs("div",{style:{padding:"10px",textAlign:"center",borderRight:g<6?"1px solid #ddd":"none"},children:[u.jsx("div",{style:{fontSize:"9px",fontWeight:"900",color:"#bb1919",textTransform:"uppercase",marginBottom:"4px"},children:new Date(p.date).toLocaleDateString("en-US",{weekday:"short"})}),u.jsx("div",{style:{fontSize:"16px"},children:d(p.day?.condition?.text)}),u.jsxs("div",{style:{fontSize:"11px",fontWeight:"800",marginTop:"4px"},children:[Math.round(p.day?.maxtemp_c)," / ",Math.round(p.day?.mintemp_c),""]})]},g))}),u.jsxs("div",{style:{backgroundColor:"#000",color:"#fff",padding:"8px",fontSize:"9px",textAlign:"center",fontWeight:"600",letterSpacing:"1px"},children:["PROBABILITY OF PRECIPITATION: ",i&&i[0]?.day?.daily_chance_of_rain||0,"%"]})]})},aj=()=>{const t=bl(),e=[{label:"Manage Cultivation",icon:"",path:"/select-crops",color:"#bb1919"},{label:"Manage Harvest",icon:"",path:"/harvests",color:"#000"},{label:"Manage Journal",icon:"",path:"/activities",color:"#000"},{label:"Manage Farm",icon:"",path:"/fields",color:"#000"}];return u.jsxs("div",{className:"card animate-fade-in",style:{padding:"20px",border:"1px solid #000",borderRadius:"0",boxShadow:"0 4px 6px rgba(0,0,0,0.1)"},children:[u.jsx("h3",{style:{margin:"0 0 15px 0",fontSize:"13px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px",borderBottom:"2px solid #bb1919",paddingBottom:"8px",display:"inline-block"},children:"QUICK ACCESS"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(2, 1fr)",gap:"15px"},children:e.map((n,i)=>u.jsxs("div",{onClick:()=>t(n.path),style:{padding:"15px",backgroundColor:"#f9f9f9",border:"1px solid #ddd",display:"flex",alignItems:"center",gap:"12px",cursor:"pointer",transition:"all 0.2s"},onMouseEnter:r=>{r.currentTarget.style.borderColor=n.color,r.currentTarget.style.backgroundColor="#fff"},onMouseLeave:r=>{r.currentTarget.style.borderColor="#ddd",r.currentTarget.style.backgroundColor="#f9f9f9"},children:[u.jsx("div",{style:{fontSize:"20px"},children:n.icon}),u.jsx("div",{style:{fontSize:"11px",fontWeight:"800",textTransform:"uppercase",color:n.color},children:n.label})]},i))})]})},oj=()=>{const{fetchFarms:t,farms:e,currentFarm:n,fields:i,fetchFields:r,loading:a,loadFarm:l,deleteFarm:d}=Pi(),{showConfirm:p,showNotification:g}=hr(),{fetchAllCrops:m,crops:_}=vl(),{infrastructure:A,fetchInfrastructure:x}=Zl(),{fetchAllHarvests:R,harvests:M}=Yy(),{fetchAllActivities:k,activities:I}=ml(),{budgetData:Y,fetchCropBudgets:B}=c3(),[V,ee]=de.useState("overview"),[ue,_e]=de.useState("global"),[fe,G]=de.useState(""),[me,Z]=de.useState(null);bl(),de.useEffect(()=>{t(),m(),k(),R()},[]),de.useEffect(()=>{ue!=="global"&&n?.id?(r(n.id),x(n.id),B(n.id)):ue==="global"&&e&&e.length>0&&e.forEach(Q=>r(Q.id,!0))},[n,ue,e?.length]),de.useEffect(()=>{if(ue==="parcel"&&fe){const Q=i.find(xe=>xe.id===fe);Z(Q)}},[fe,ue,i]),de.useEffect(()=>{const Q=()=>{ee("add-farm")};return window.addEventListener("open-new-farm",Q),()=>window.removeEventListener("open-new-farm",Q)},[]);const J=de.useMemo(()=>ue==="global"?e||[]:n?[n]:[],[e,n,ue]),Se=de.useMemo(()=>!i||!Array.isArray(i)?[]:ue==="global"?i:ue==="farm"?i.filter(Q=>Q.farm_id===n?.id):ue==="parcel"?i.filter(Q=>Q.id===fe):[],[i,ue,n,fe]),Ee=de.useMemo(()=>!_||!Array.isArray(_)?[]:ue==="global"?_:ue==="farm"?_.filter(Q=>Q.Field?.farm_id===n?.id):ue==="parcel"?_.filter(Q=>Q.field_id===fe):[],[_,ue,n,fe]),Ye=de.useMemo(()=>!I||!Array.isArray(I)?[]:ue==="global"?I:ue==="farm"?I.filter(Q=>Q.farm_id===n?.id):ue==="parcel"?I.filter(Q=>Q.field_id===fe):[],[I,ue,n,fe]),oe=de.useMemo(()=>(Ee||[]).filter(Q=>Q.status==="planted"||Q.status==="active"||Q.status==="growing").reduce((Q,xe)=>Q+parseFloat(xe.planted_area||0),0),[Ee]),ae=de.useMemo(()=>(Se||[]).reduce((Q,xe)=>{let Te=parseFloat(xe.area||0);if(Te===0&&xe.boundary?.coordinates?.[0])try{const Le=xc(xe.boundary.coordinates);Te=Jc(Le)/1e4}catch{}return Q+Te},0),[Se]),he=de.useMemo(()=>(Ye||[]).filter(Q=>Q.transaction_type==="income"||Q.activity_type==="harvesting").reduce((Q,xe)=>Q+(parseFloat(xe.total_cost)||parseFloat(xe.labor_cost)||0),0),[Ye]),De=de.useMemo(()=>(Ye||[]).filter(Q=>Q.transaction_type==="expense").reduce((Q,xe)=>Q+(parseFloat(xe.total_cost)||parseFloat(xe.labor_cost)||0),0),[Ye]),ze=de.useMemo(()=>he-De,[he,De]),ne=Q=>new Intl.NumberFormat("en-US").format(Math.round(Q))+" XAF",H=de.useMemo(()=>[{label:"Revenue",value:ne(he),icon:"",color:"var(--success)"},{label:"Expenses",value:ne(De),icon:"",color:"var(--error)"},{label:"Cash Flow",value:ne(ze),icon:"",color:ze>=0?"var(--success)":"var(--error)"},{label:"Total Area",value:`${ae.toFixed(2)} ha`,icon:"",color:"var(--accent)"},{label:"Planted",value:`${oe.toFixed(1)} ha`,icon:"",onClick:()=>ee("crop-breakdown"),clickable:!0},{label:"ACTIVE FARM",value:J.length,icon:""}],[he,De,ze,ae,oe,J.length]);if(a&&e.length===0)return u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"60vh",flexDirection:"column",gap:"16px"},children:[u.jsx("div",{style:{fontSize:"32px"},children:""}),u.jsx("div",{style:{fontSize:"14px",fontWeight:"600",color:"#666"},children:"Establishing Uplink..."})]});if(!a&&e.length===0&&V==="overview")return u.jsxs("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"80vh",flexDirection:"column",padding:"40px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"64px",marginBottom:"24px"},children:""}),u.jsxs("h1",{style:{fontSize:"32px",fontWeight:"900",color:"var(--secondary)",marginBottom:"16px"},children:["WELCOME TO ",u.jsx("span",{style:{color:"var(--primary)"},children:"PROFARMER"})]}),u.jsx("p",{style:{maxWidth:"500px",color:"#666",marginBottom:"32px",lineHeight:"1.6"},children:"Your enterprise registry is currently empty. Initialize your first production station to begin tracking operations, weather, and financial performance."}),u.jsx("button",{onClick:()=>ee("add-farm"),style:{padding:"16px 40px",backgroundColor:"var(--primary)",color:"white",border:"none",borderRadius:"12px",fontSize:"16px",fontWeight:"800",cursor:"pointer",boxShadow:"0 4px 15px rgba(204, 0, 0, 0.3)",transition:"transform 0.2s"},onMouseEnter:Q=>Q.currentTarget.style.transform="scale(1.05)",onMouseLeave:Q=>Q.currentTarget.style.transform="scale(1)",children:"+ INITIALIZE FIRST STATION"})]});const te=()=>u.jsxs("div",{className:"animate-fade-in card",children:[u.jsxs("div",{className:"card-header",children:[u.jsxs("h3",{style:{margin:0,fontSize:"18px"},children:[ue==="global"?"Enterprise":ue==="parcel"?me?.name||"Parcel":n?.name||"Farm"," Crop Portfolio"]}),u.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold",color:"var(--primary)"},children:["Total Planted: ",oe.toFixed(2)," ha"]})]}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"12px",color:"var(--text-muted)",borderBottom:"2px solid var(--border)"},children:[u.jsx("th",{style:{padding:"12px 8px"},children:"Crop Type"}),u.jsx("th",{style:{padding:"12px 8px"},children:"Variety"}),u.jsx("th",{style:{padding:"12px 8px"},children:"Surface Area (ha)"}),u.jsx("th",{style:{padding:"12px 8px"},children:isGlobalView?"Farm Origin":"Location"})]})}),u.jsxs("tbody",{children:[Ee.filter(Q=>Q.status==="planted"||Q.status==="active"||Q.status==="growing").map(Q=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"12px 8px",fontWeight:"bold"},children:Q.crop_type}),u.jsx("td",{style:{padding:"12px 8px"},children:Q.variety}),u.jsxs("td",{style:{padding:"12px 8px",fontWeight:"bold",color:"var(--secondary)"},children:[parseFloat(Q.planted_area||0).toFixed(2)," ha"]}),u.jsx("td",{style:{padding:"12px 8px"},children:Q.Field?.Farm?.name||f?.Farm?.name||n?.name||"N/A"})]},Q.id)),Ee.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"4",style:{textAlign:"center",padding:"24px"},children:"No active crops found."})})]})]})]}),ce=()=>V==="add-farm"?u.jsx(Ip,{onComplete:()=>{ee("overview"),t()}}):V==="edit-farm"?u.jsx(Ip,{initialData:n,onComplete:()=>ee("overview")}):V==="add-field"?u.jsx(ry,{onComplete:()=>{ee("overview"),r(n.id)}}):V==="field-details"?u.jsx(ij,{field:me,onBack:()=>ee("overview")}):V==="crop-breakdown"?te():u.jsxs("div",{className:"animate-fade-in",children:[u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(140px, 1fr))",gap:"16px",marginBottom:"32px"},children:H.map((Q,xe)=>u.jsxs("div",{onClick:Q.onClick,style:{backgroundColor:"#fff",padding:"16px",borderRadius:"12px",boxShadow:"0 2px 4px rgba(0,0,0,0.03)",border:"1px solid rgba(0,0,0,0.05)",cursor:Q.clickable?"pointer":"default",transition:"transform 0.2s"},onMouseEnter:Te=>Q.clickable&&(Te.currentTarget.style.transform="translateY(-2px)"),onMouseLeave:Te=>Q.clickable&&(Te.currentTarget.style.transform="translateY(0)"),children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"start",marginBottom:"8px"},children:[u.jsx("span",{style:{fontSize:"11px",fontWeight:"600",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px"},children:Q.label}),u.jsx("span",{style:{fontSize:"16px"},children:Q.icon})]}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:Q.color||"var(--text-main)"},children:Q.value})]},xe))}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(300px, 1fr))",gap:"20px",marginBottom:"24px"},children:[u.jsx(rj,{}),u.jsx(aj,{})]}),u.jsx("div",{style:{display:"block",gap:"20px",alignItems:"start"},children:u.jsx("div",{style:{display:"flex",flexDirection:"column",gap:"20px"},children:u.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{padding:"12px 16px",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"},children:[u.jsx("h3",{style:{margin:0,fontSize:"14px",fontWeight:"800",letterSpacing:"0.5px"},children:ue==="global"?"ENTERPRISE GEO-SPATIAL VIEW":ue==="parcel"?`${me?.name?.toUpperCase()} MAP`:`${n?.name?.toUpperCase()} MAP`}),ue==="farm"&&u.jsx("button",{className:"outline",style:{padding:"4px 10px",fontSize:"10px",fontWeight:"800"},onClick:()=>ee("add-field"),children:"+ BOUNDARY"})]}),u.jsx("div",{style:{height:"400px"},children:u.jsx(Id,{center:ue!=="global"&&n?.coordinates?.coordinates?[n.coordinates.coordinates[1],n.coordinates.coordinates[0]]:[3.848,11.5021],fields:Se,crops:Ee,infrastructure:A,farms:J,editable:!1})})]})})}),ue==="global"?u.jsxs("div",{className:"card",style:{marginTop:"24px",padding:"0"},children:[u.jsxs("div",{style:{padding:"16px",borderBottom:"2px solid var(--primary)",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fff"},children:[u.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"700",color:"var(--secondary)"},children:"Farm Portfolio & Field Analytics"}),u.jsx("div",{style:{display:"flex",gap:"8px"},children:u.jsx("button",{className:"outline",style:{fontSize:"10px",fontWeight:"800",padding:"4px 10px"},onClick:()=>window.print(),children:"EXPORT"})})]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",marginBottom:"20px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"#fff",borderBottom:"1px solid #eee",backgroundColor:"var(--secondary)"},children:[u.jsx("th",{style:{padding:"10px 16px"},children:"FARM NAME"}),u.jsx("th",{style:{padding:"10px 16px"},children:"TOTAL AREA"}),u.jsx("th",{style:{padding:"10px 16px"},children:"LOCATION"}),u.jsx("th",{style:{padding:"10px 16px",textAlign:"right"},children:"ACTION"})]})}),u.jsx("tbody",{children:(e||[]).map(Q=>{const Te=(i||[]).filter(Le=>Le.farm_id===Q.id).reduce((Le,Ge)=>{let Re=parseFloat(Ge.area||0);if(Re===0&&Ge.boundary?.coordinates?.[0])try{const gt=xc(Ge.boundary.coordinates);Re=Jc(gt)/1e4}catch{}return Le+Re},0);return u.jsxs("tr",{style:{borderBottom:"1px solid #f5f5f5",fontSize:"13px",backgroundColor:"#f0f7f0"},children:[u.jsx("td",{style:{padding:"10px 16px",fontWeight:"800",color:"var(--primary)",cursor:"pointer"},onClick:()=>{l(Q.id),_e("farm")},children:(Q.name||"Unnamed Farm").toUpperCase()}),u.jsxs("td",{style:{padding:"10px 16px",fontWeight:"600"},children:[Te.toFixed(2)," ha"]}),u.jsx("td",{style:{padding:"10px 16px"},children:u.jsx("span",{style:{fontWeight:"700",color:"var(--secondary)"},children:`Cameroon, ${Q.city||"Unknown"} Region`.toUpperCase()})}),u.jsx("td",{style:{padding:"10px 16px",textAlign:"right"},children:u.jsxs("div",{style:{display:"flex",gap:"6px",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:()=>{l(Q.id),_e("farm")},style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",backgroundColor:"var(--primary)",color:"white",border:"none",cursor:"pointer",fontWeight:"700"},children:"VIEW"}),u.jsx("button",{onClick:()=>{l(Q.id),ee("edit-farm")},style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",backgroundColor:"var(--accent)",color:"white",border:"none",cursor:"pointer",fontWeight:"700"},children:"EDIT"}),u.jsx("button",{onClick:()=>{p("FARM_DELETE",async()=>{try{await d(Q.id),g("Farm deleted successfully","success"),t()}catch{g("Error deleting farm","error")}})},style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",backgroundColor:"#dc3545",color:"white",border:"none",cursor:"pointer",fontWeight:"700"},children:"DELETE"})]})})]},Q.id)})})]})})]}):ue==="farm"?u.jsxs("div",{className:"card",style:{marginTop:"24px",padding:"0"},children:[u.jsx("div",{style:{padding:"16px",borderBottom:"1px solid #eee",display:"flex",justifyContent:"space-between",alignItems:"center",backgroundColor:"#fafafa"},children:u.jsxs("h3",{style:{margin:0,fontSize:"14px",fontWeight:"600",color:"#666"},children:["Active Field Details (",n?.name,")"]})}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"#888",borderBottom:"1px solid #eee",backgroundColor:"#fafafa"},children:[u.jsx("th",{style:{padding:"10px 16px"},children:"FIELD IDENTIFIER"}),u.jsx("th",{style:{padding:"10px 16px"},children:"SURFACE AREA"}),u.jsx("th",{style:{padding:"10px 16px"},children:"SOIL CLASS"}),u.jsx("th",{style:{padding:"10px 16px"},children:"DRAINAGE"}),u.jsx("th",{style:{padding:"10px 16px",textAlign:"right"},children:"ACTION"})]})}),u.jsxs("tbody",{children:[(i||[]).map(Q=>{let xe=parseFloat(Q.area||0);if(xe===0&&Q.boundary?.coordinates?.[0])try{const Te=xc(Q.boundary.coordinates);xe=Jc(Te)/1e4}catch(Te){console.error("Dashboard field area calc failed:",Te)}return u.jsxs("tr",{style:{borderBottom:"1px solid #f5f5f5",fontSize:"13px"},children:[u.jsx("td",{style:{padding:"10px 16px",fontWeight:"800",color:"var(--primary)"},children:(Q.name||"Unnamed Farm").toUpperCase()}),u.jsxs("td",{style:{padding:"10px 16px",fontWeight:"600"},children:[xe.toFixed(2)," ha"]}),u.jsx("td",{style:{padding:"10px 16px",textTransform:"capitalize"},children:Q.soil_type||""}),u.jsx("td",{style:{padding:"10px 16px"},children:Q.drainage||""}),u.jsx("td",{style:{padding:"10px 16px",textAlign:"right"},children:u.jsx("button",{onClick:()=>{Z(Q),ee("field-details")},style:{padding:"6px 12px",borderRadius:"6px",fontSize:"11px",backgroundColor:"var(--secondary)",color:"white",border:"none",cursor:"pointer",fontWeight:"600"},children:"Manage"})})]},Q.id)}),(!i||i.length===0)&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{padding:"20px",textAlign:"center"},children:"No fields. Click +BOUNDARY on the map to add one."})})]})]})})]}):u.jsxs("div",{className:"card",style:{marginTop:"24px",padding:"24px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:""}),u.jsxs("h3",{style:{margin:0,color:"var(--secondary)"},children:[me?.name?.toUpperCase()," OPERATIONAL METRICS"]}),u.jsxs("p",{style:{fontSize:"14px",color:"#666"},children:["Currently analyzing telemetry and financial records for ",me?.name,"."]})]})]});return u.jsxs("div",{style:{padding:"20px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"32px",fontWeight:"800",margin:0,color:"var(--secondary)",letterSpacing:"-1px"},children:ue==="global"?"ENTERPRISE OVERVIEW":ue==="parcel"?me?.name||"PARCEL VIEW":n?.name||"CENTRAL STATION"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px",marginTop:"8px"},children:[u.jsx("div",{style:{display:"flex",backgroundColor:"#e2e8f0",borderRadius:"20px",padding:"3px",boxShadow:"inset 0 2px 4px rgba(0,0,0,0.05)"},children:["global","farm","parcel"].map(Q=>u.jsx("button",{onClick:()=>_e(Q),disabled:Q!=="global"&&!n,style:{padding:"5px 16px",borderRadius:"16px",border:"none",fontSize:"10px",fontWeight:"800",cursor:Q!=="global"&&!n?"not-allowed":"pointer",backgroundColor:ue===Q?"var(--primary)":"transparent",color:ue===Q?"white":"#64748b",boxShadow:ue===Q?"0 4px 6px -1px rgba(0,0,0,0.1), 0 2px 4px -1px rgba(0,0,0,0.06)":"none",transition:"all 0.3s cubic-bezier(0.4, 0, 0.2, 1)",opacity:Q!=="global"&&!n?.4:1,textTransform:"uppercase",letterSpacing:"0.5px"},children:Q==="parcel"?"PARCEL":Q==="farm"?"SINGLE FARM":"GLOBAL"},Q))}),ue==="parcel"&&u.jsxs("select",{value:fe,onChange:Q=>G(Q.target.value),style:{padding:"6px 12px",borderRadius:"12px",border:"1px solid #cbd5e1",backgroundColor:"white",fontSize:"11px",fontWeight:"700",color:"var(--secondary)",outline:"none",boxShadow:"0 1px 2px 0 rgba(0, 0, 0, 0.05)"},children:[u.jsx("option",{value:"",children:"-- SELECT PARCEL --"}),i.map(Q=>u.jsx("option",{value:Q.id,children:(Q.name||"Unnamed Farm").toUpperCase()},Q.id))]}),u.jsxs("span",{style:{fontSize:"12px",color:"var(--success)",fontWeight:"700",padding:"4px 10px",backgroundColor:"rgba(46, 125, 50, 0.1)",borderRadius:"12px"},children:[" ",J.length," ACTIVE UNITS"]}),ue!=="global"&&u.jsx("button",{onClick:()=>ee("edit-farm"),style:{marginLeft:"12px",border:"1px solid #ddd",backgroundColor:"white",fontSize:"11px",padding:"4px 12px",borderRadius:"12px",cursor:"pointer",fontWeight:"700",color:"#555"},children:" EDIT CONFIG"})]})]}),V!=="overview"&&u.jsx("button",{onClick:()=>ee("overview"),className:"outline",style:{fontWeight:"600",fontSize:"12px",borderRadius:"8px"},children:" BACK TO OVERVIEW"})]}),a&&u.jsx("div",{style:{textAlign:"center",padding:"40px",fontSize:"14px",fontWeight:"600",color:"#888"},children:"Syncing Data..."}),!a&&ce()]})},sj=()=>{const{farms:t,currentFarm:e,fields:n,fetchFields:i,fetchFarms:r,updateField:a,deleteField:l,deleteFarm:d,setCurrentFarm:p}=Pi(),{crops:g,fetchCropsByFarm:m}=vl(),{infrastructure:_,fetchInfrastructure:A}=Zl(),{showAlert:x,showNotification:R}=hr(),[M,k]=de.useState("list"),[I,Y]=de.useState("parcels"),[B,V]=de.useState(null),[ee,ue]=de.useState(null);bl(),de.useEffect(()=>{r()},[r]),de.useEffect(()=>{e&&(i(e.id),m(e.id),A(e.id))},[e,i,m,A]);const _e=async G=>{if(window.confirm("Are you sure you want to delete this parcel?"))try{const me=await l(G);R(me?.notification?.message||"Parcel deleted successfully","success")}catch{R("Delete failed","error")}},fe=async G=>{if(window.confirm(`PERMANENTLY LIQUIDATE "${G.name}"? This will delete all associated data.`))try{const me=await d(G.id);R(me?.notification?.message||"Enterprise record liquidated","success")}catch{R("Liquidation failed","error")}};return M==="add-parcel"?u.jsx(ry,{onComplete:()=>k("list")}):M==="edit-parcel"&&ee?u.jsx(ry,{initialData:ee,onComplete:()=>{k("list"),ue(null)}}):M==="add-enterprise"?u.jsx(Ip,{onComplete:()=>k("list")}):M==="edit-enterprise"?u.jsx(Ip,{initialData:B,onComplete:()=>{k("list"),V(null)}}):u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Parcel Management"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Define and manage the physical land boundaries (Parcels) for your active farms. All geo-spatial operations are centralized here."})]}),u.jsx("div",{style:{display:"flex",gap:"12px"},children:I==="parcels"?u.jsx("button",{className:"primary",onClick:()=>k("add-parcel"),children:"+ Add New Parcel"}):u.jsx("button",{className:"primary",style:{backgroundColor:"#2d3748"},onClick:()=>k("add-enterprise"),children:"+ Register Enterprise"})})]}),u.jsxs("div",{style:{display:"flex",gap:"4px",marginBottom:"24px",backgroundColor:"#edf2f7",padding:"4px",borderRadius:"8px",width:"fit-content"},children:[u.jsxs("button",{onClick:()=>Y("parcels"),style:{padding:"8px 24px",borderRadius:"6px",border:"none",backgroundColor:I==="parcels"?"white":"transparent",color:I==="parcels"?"var(--primary)":"#718096",fontWeight:"700",fontSize:"13px",cursor:"pointer",boxShadow:I==="parcels"?"0 2px 4px rgba(0,0,0,0.05)":"none",transition:"all 0.2s"},children:["PARCELS (",e?.name||"NONE",")"]}),u.jsxs("button",{onClick:()=>Y("enterprise"),style:{padding:"8px 24px",borderRadius:"6px",border:"none",backgroundColor:I==="enterprise"?"white":"transparent",color:I==="enterprise"?"var(--primary)":"#718096",fontWeight:"700",fontSize:"13px",cursor:"pointer",boxShadow:I==="enterprise"?"0 2px 4px rgba(0,0,0,0.05)":"none",transition:"all 0.2s"},children:["ENTERPRISES (",t.length,")"]})]}),I==="parcels"?u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px"},children:[n.filter(G=>G.farm_id===e?.id).map(G=>{const me=g.filter(J=>J.field_id===G.id),Z=_.filter(J=>J.field_id===G.id);return u.jsxs("div",{className:"card animate-scale-in",style:{padding:"0",position:"relative",overflow:"hidden",border:"1px solid var(--border)",borderRadius:"12px"},children:[u.jsxs("div",{style:{backgroundColor:"#f8fafc",padding:"16px",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("div",{style:{fontSize:"20px"},children:""}),u.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"800",color:"var(--text-primary)"},children:(G.name||"Unnamed Parcel").toUpperCase()})]}),u.jsxs("div",{style:{textAlign:"right"},children:[u.jsxs("div",{style:{fontSize:"14px",fontWeight:"900",color:"var(--primary)"},children:[G.area," ",G.area_unit||"ha"]}),u.jsx("div",{style:{fontSize:"10px",color:"var(--text-muted)",fontWeight:"bold"},children:G.status?.toUpperCase()||"ACTIVE"})]})]}),u.jsxs("div",{style:{padding:"16px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"16px"},children:[u.jsxs("div",{style:{fontSize:"11px",backgroundColor:"#fdf2f2",padding:"8px",borderRadius:"6px"},children:[u.jsx("div",{style:{color:"#9b2c2c",fontWeight:"bold",fontSize:"9px"},children:"SOIL COMPOSITION"}),u.jsx("div",{style:{fontWeight:"800",color:"#742a2a"},children:G.soil_type?.toUpperCase()||"NOT TESTED"})]}),u.jsxs("div",{style:{fontSize:"11px",backgroundColor:"#f0fdf4",padding:"8px",borderRadius:"6px"},children:[u.jsx("div",{style:{color:"#166534",fontWeight:"bold",fontSize:"9px"},children:"ESG SCORE"}),u.jsxs("div",{style:{fontWeight:"800",color:"#14532d"},children:[G.water_efficiency||100,"% WATER EFF."]})]})]}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("div",{style:{fontSize:"10px",fontWeight:"bold",color:"var(--text-muted)",marginBottom:"8px",textTransform:"uppercase"},children:"Current Allocations"}),u.jsxs("div",{style:{display:"flex",flexWrap:"wrap",gap:"6px"},children:[me.map(J=>u.jsxs("span",{style:{fontSize:"10px",backgroundColor:"#fffbe6",color:"#856404",padding:"4px 8px",borderRadius:"4px",border:"1px solid #ffe58f",fontWeight:"600"},children:[" ",J.crop_type," (",J.variety,")"]},J.id)),Z.map(J=>u.jsxs("span",{style:{fontSize:"10px",backgroundColor:"#f0f9ff",color:"#0369a1",padding:"4px 8px",borderRadius:"4px",border:"1px solid #bae6fd",fontWeight:"600"},children:[" ",J.type]},J.id)),me.length===0&&Z.length===0&&u.jsx("span",{style:{fontSize:"10px",color:"var(--text-muted)",fontStyle:"italic"},children:"No sub-allocations"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px",borderTop:"1px solid var(--border)",paddingTop:"16px"},children:[u.jsx("button",{onClick:()=>{ue(G),k("edit-parcel")},style:{flex:1,padding:"8px",backgroundColor:"#edf2f7",border:"none",borderRadius:"6px",fontSize:"11px",fontWeight:"bold",cursor:"pointer",color:"#4a5568"},children:"UPDATE DETAILS"}),u.jsx("button",{onClick:()=>_e(G.id),style:{padding:"8px 12px",backgroundColor:"#fff5f5",color:"#e53e3e",border:"1px solid #fed7d7",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:""})]})]})]},G.id)}),n.length===0&&u.jsxs("div",{className:"card",style:{gridColumn:"1 / -1",textAlign:"center",padding:"60px",borderStyle:"dashed"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),u.jsxs("h3",{children:["No parcels registered for ",e?.name]}),u.jsx("p",{style:{color:"var(--text-muted)",marginBottom:"24px"},children:"Start by drawing your first field boundary on the map."}),u.jsx("button",{className:"primary",onClick:()=>k("add-parcel"),children:"Add Your First Parcel"})]})]}):u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(320px, 1fr))",gap:"24px"},children:t.map(G=>u.jsxs("div",{className:"card animate-scale-in",style:{padding:"0",overflow:"hidden",border:e?.id===G.id?"2px solid var(--primary)":"1px solid var(--border)",boxShadow:e?.id===G.id?"0 0 15px rgba(var(--primary-rgb), 0.2)":"none"},children:[u.jsxs("div",{style:{height:"80px",backgroundColor:"#F7FAFC",display:"flex",alignItems:"center",padding:"0 20px",borderBottom:"1px solid #E2E8F0"},children:[u.jsx("div",{style:{fontSize:"28px"},children:""}),u.jsxs("div",{style:{marginLeft:"12px"},children:[u.jsx("h3",{style:{margin:0,fontSize:"16px",fontWeight:"800"},children:(G.name||"Unnamed Farm").toUpperCase()}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--secondary)",fontWeight:"700"},children:[(Af(G.coordinates?.coordinates?.[1],G.coordinates?.coordinates?.[0])||"Unknown").toUpperCase()," REGION"]})]}),e?.id===G.id&&u.jsx("div",{style:{marginLeft:"auto",backgroundColor:"var(--primary)",color:"white",fontSize:"9px",fontWeight:"900",padding:"2px 6px",borderRadius:"4px"},children:"ACTIVE"})]}),u.jsxs("div",{style:{padding:"20px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"10px",color:"#718096",fontWeight:"bold"},children:"TOTAL SIZE"}),u.jsxs("div",{style:{fontSize:"14px",fontWeight:"700"},children:[parseFloat(G.total_area||0).toFixed(2)," HA"]})]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"10px",color:"#718096",fontWeight:"bold"},children:"LOCATION"}),u.jsx("div",{style:{fontSize:"14px",fontWeight:"700"},children:G.city||"N/A"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{onClick:()=>{p(G),Y("parcels")},className:"primary",style:{fontSize:"11px",padding:"8px 12px",flex:1.5},children:"MANAGE PARCELS"}),u.jsx("button",{onClick:()=>{V(G),k("edit-enterprise")},style:{background:"#E2E8F0",border:"none",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px",fontWeight:"bold"},children:"EDIT"}),u.jsx("button",{onClick:()=>fe(G),style:{background:"#fff5f5",color:"#e53e3e",border:"none",padding:"8px 12px",borderRadius:"6px",cursor:"pointer",fontSize:"11px"},children:""})]})]})]},G.id))})]})},lj=({isOpen:t,onClose:e})=>{const[n,i]=de.useState(null),[r,a]=de.useState("idle"),[l,d]=de.useState(""),{bulkUploadActivities:p}=ml(),{currentFarm:g}=Pi();if(!t)return null;const m=A=>{i(A.target.files[0]),a("idle")},_=async()=>{if(n){if(!g?.id){a("error"),d("NO ACTIVE FARM DETECTED. Please select or create a farm before importing data.");return}a("uploading");try{const A=await p(g.id,n);a("success"),d(A.message||"Import successful!"),setTimeout(()=>{e(),i(null),a("idle")},2e3)}catch(A){a("error"),d(A.response?.data?.message||"Error uploading file. Please ensure columns match the ledger format.")}}};return u.jsx("div",{className:"modal-overlay",style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.85)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e4,backdropFilter:"blur(5px)"},children:u.jsxs("div",{className:"glass-card",style:{width:"500px",padding:"30px",position:"relative",border:"2px solid #bb1919",backgroundColor:"#fff"},children:[u.jsx("button",{onClick:e,style:{position:"absolute",top:"15px",right:"15px",background:"none",border:"none",fontSize:"20px",cursor:"pointer",color:"#333"},children:""}),u.jsxs("div",{style:{textAlign:"center",marginBottom:"25px"},children:[u.jsx("h2",{style:{color:"#bb1919",margin:0,fontSize:"24px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px"},children:"Bulk Log Activities"}),u.jsx("p",{style:{fontSize:"12px",color:"#666",marginTop:"5px"},children:"Upload operational data to synchronize system ledgers."})]}),u.jsxs("div",{style:{border:"2px dashed #ddd",padding:"40px 20px",textAlign:"center",borderRadius:"8px",backgroundColor:"#f9f9f9",marginBottom:"20px"},children:[u.jsx("input",{type:"file",id:"bulk-file",onChange:m,accept:".csv, .xlsx, .xlsm, .xml, .pdf, .docx",style:{display:"none"}}),u.jsxs("label",{htmlFor:"bulk-file",style:{cursor:"pointer"},children:[u.jsx("div",{style:{fontSize:"40px",marginBottom:"10px"},children:""}),u.jsx("div",{style:{fontWeight:"bold",color:"#333"},children:n?n.name:"Click to select or drag document"}),u.jsx("div",{style:{fontSize:"11px",color:"#888",marginTop:"8px"},children:"Accepted: CSV, XLSX, XLSM, XML, PDF, DOCX"})]})]}),r==="success"&&u.jsxs("div",{style:{padding:"12px",backgroundColor:"#e6fffa",color:"#2c7a7b",borderRadius:"4px",fontSize:"13px",textAlign:"center",marginBottom:"15px",fontWeight:"bold"},children:[" ",l]}),r==="error"&&u.jsxs("div",{style:{padding:"12px",backgroundColor:"#fff5f5",color:"#c53030",borderRadius:"4px",fontSize:"13px",textAlign:"center",marginBottom:"15px",fontWeight:"bold"},children:[" ",l]}),u.jsxs("div",{style:{display:"flex",gap:"15px"},children:[u.jsx("button",{className:"outline",onClick:e,style:{flex:1,padding:"12px",fontWeight:"bold"},children:"Cancel"}),u.jsx("button",{onClick:_,disabled:!n||r==="uploading",style:{flex:1,padding:"12px",backgroundColor:"#000",color:"white",fontWeight:"bold",border:"none",borderRadius:"4px",cursor:!n||r==="uploading"?"not-allowed":"pointer",opacity:!n||r==="uploading"?.6:1},children:r==="uploading"?"Analyzing Files...":"Start Import"})]}),u.jsx("div",{style:{marginTop:"20px",fontSize:"10px",color:"#999",textAlign:"center"},children:"* Files should be formatted with columns matching the Field Operations Timeline."})]})})};function tr(t){"@babel/helpers - typeof";return tr=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},tr(t)}var yl=Uint8Array,Vs=Uint16Array,e0=Int32Array,t0=new yl([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),n0=new yl([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),Jb=new yl([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),S5=function(t,e){for(var n=new Vs(31),i=0;i<31;++i)n[i]=e+=1<<t[i-1];for(var r=new e0(n[30]),i=1;i<30;++i)for(var a=n[i];a<n[i+1];++a)r[a]=a-n[i]<<5|i;return{b:n,r}},C5=S5(t0,2),cj=C5.b,oy=C5.r;cj[28]=258,oy[258]=28;var uj=S5(n0,0),e_=uj.r,sy=new Vs(32768);for(var Dr=0;Dr<32768;++Dr){var Yc=(Dr&43690)>>1|(Dr&21845)<<1;Yc=(Yc&52428)>>2|(Yc&13107)<<2,Yc=(Yc&61680)>>4|(Yc&3855)<<4,sy[Dr]=((Yc&65280)>>8|(Yc&255)<<8)>>1}var Tf=(function(t,e,n){for(var i=t.length,r=0,a=new Vs(e);r<i;++r)t[r]&&++a[t[r]-1];var l=new Vs(e);for(r=1;r<e;++r)l[r]=l[r-1]+a[r-1]<<1;var d;if(n){d=new Vs(1<<e);var p=15-e;for(r=0;r<i;++r)if(t[r])for(var g=r<<4|t[r],m=e-t[r],_=l[t[r]-1]++<<m,A=_|(1<<m)-1;_<=A;++_)d[sy[_]>>p]=g}else for(d=new Vs(i),r=0;r<i;++r)t[r]&&(d[r]=sy[l[t[r]-1]++]>>15-t[r]);return d}),ju=new yl(288);for(var Dr=0;Dr<144;++Dr)ju[Dr]=8;for(var Dr=144;Dr<256;++Dr)ju[Dr]=9;for(var Dr=256;Dr<280;++Dr)ju[Dr]=7;for(var Dr=280;Dr<288;++Dr)ju[Dr]=8;var zp=new yl(32);for(var Dr=0;Dr<32;++Dr)zp[Dr]=5;var dj=Tf(ju,9,0),fj=Tf(zp,5,0),E5=function(t){return(t+7)/8|0},hj=function(t,e,n){return(n==null||n>t.length)&&(n=t.length),new yl(t.subarray(e,n))},hc=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8},_f=function(t,e,n){n<<=e&7;var i=e/8|0;t[i]|=n,t[i+1]|=n>>8,t[i+2]|=n>>16},rv=function(t,e){for(var n=[],i=0;i<t.length;++i)t[i]&&n.push({s:i,f:t[i]});var r=n.length,a=n.slice();if(!r)return{t:L5,l:0};if(r==1){var l=new yl(n[0].s+1);return l[n[0].s]=1,{t:l,l:1}}n.sort(function(ee,ue){return ee.f-ue.f}),n.push({s:-1,f:25001});var d=n[0],p=n[1],g=0,m=1,_=2;for(n[0]={s:-1,f:d.f+p.f,l:d,r:p};m!=r-1;)d=n[n[g].f<n[_].f?g++:_++],p=n[g!=m&&n[g].f<n[_].f?g++:_++],n[m++]={s:-1,f:d.f+p.f,l:d,r:p};for(var A=a[0].s,i=1;i<r;++i)a[i].s>A&&(A=a[i].s);var x=new Vs(A+1),R=ly(n[m-1],x,0);if(R>e){var i=0,M=0,k=R-e,I=1<<k;for(a.sort(function(ue,_e){return x[_e.s]-x[ue.s]||ue.f-_e.f});i<r;++i){var Y=a[i].s;if(x[Y]>e)M+=I-(1<<R-x[Y]),x[Y]=e;else break}for(M>>=k;M>0;){var B=a[i].s;x[B]<e?M-=1<<e-x[B]++-1:++i}for(;i>=0&&M;--i){var V=a[i].s;x[V]==e&&(--x[V],++M)}R=e}return{t:new yl(x),l:R}},ly=function(t,e,n){return t.s==-1?Math.max(ly(t.l,e,n+1),ly(t.r,e,n+1)):e[t.s]=n},t_=function(t){for(var e=t.length;e&&!t[--e];);for(var n=new Vs(++e),i=0,r=t[0],a=1,l=function(p){n[i++]=p},d=1;d<=e;++d)if(t[d]==r&&d!=e)++a;else{if(!r&&a>2){for(;a>138;a-=138)l(32754);a>2&&(l(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(l(r),--a;a>6;a-=6)l(8304);a>2&&(l(a-3<<5|8208),a=0)}for(;a--;)l(r);a=1,r=t[d]}return{c:n.subarray(0,i),n:e}},wf=function(t,e){for(var n=0,i=0;i<e.length;++i)n+=t[i]*e[i];return n},A5=function(t,e,n){var i=n.length,r=E5(e+2);t[r]=i&255,t[r+1]=i>>8,t[r+2]=t[r]^255,t[r+3]=t[r+1]^255;for(var a=0;a<i;++a)t[r+a+4]=n[a];return(r+4+i)*8},n_=function(t,e,n,i,r,a,l,d,p,g,m){hc(e,m++,n),++r[256];for(var _=rv(r,15),A=_.t,x=_.l,R=rv(a,15),M=R.t,k=R.l,I=t_(A),Y=I.c,B=I.n,V=t_(M),ee=V.c,ue=V.n,_e=new Vs(19),fe=0;fe<Y.length;++fe)++_e[Y[fe]&31];for(var fe=0;fe<ee.length;++fe)++_e[ee[fe]&31];for(var G=rv(_e,7),me=G.t,Z=G.l,J=19;J>4&&!me[Jb[J-1]];--J);var Se=g+5<<3,Ee=wf(r,ju)+wf(a,zp)+l,Ye=wf(r,A)+wf(a,M)+l+14+3*J+wf(_e,me)+2*_e[16]+3*_e[17]+7*_e[18];if(p>=0&&Se<=Ee&&Se<=Ye)return A5(e,m,t.subarray(p,p+g));var oe,ae,he,De;if(hc(e,m,1+(Ye<Ee)),m+=2,Ye<Ee){oe=Tf(A,x,0),ae=A,he=Tf(M,k,0),De=M;var ze=Tf(me,Z,0);hc(e,m,B-257),hc(e,m+5,ue-1),hc(e,m+10,J-4),m+=14;for(var fe=0;fe<J;++fe)hc(e,m+3*fe,me[Jb[fe]]);m+=3*J;for(var ne=[Y,ee],H=0;H<2;++H)for(var te=ne[H],fe=0;fe<te.length;++fe){var ce=te[fe]&31;hc(e,m,ze[ce]),m+=me[ce],ce>15&&(hc(e,m,te[fe]>>5&127),m+=te[fe]>>12)}}else oe=dj,ae=ju,he=fj,De=zp;for(var fe=0;fe<d;++fe){var Q=i[fe];if(Q>255){var ce=Q>>18&31;_f(e,m,oe[ce+257]),m+=ae[ce+257],ce>7&&(hc(e,m,Q>>23&31),m+=t0[ce]);var xe=Q&31;_f(e,m,he[xe]),m+=De[xe],xe>3&&(_f(e,m,Q>>5&8191),m+=n0[xe])}else _f(e,m,oe[Q]),m+=ae[Q]}return _f(e,m,oe[256]),m+ae[256]},pj=new e0([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),L5=new yl(0),gj=function(t,e,n,i,r,a){var l=a.z||t.length,d=new yl(i+l+5*(1+Math.ceil(l/7e3))+r),p=d.subarray(i,d.length-r),g=a.l,m=(a.r||0)&7;if(e){m&&(p[0]=a.r>>3);for(var _=pj[e-1],A=_>>13,x=_&8191,R=(1<<n)-1,M=a.p||new Vs(32768),k=a.h||new Vs(R+1),I=Math.ceil(n/3),Y=2*I,B=function(Kt){return(t[Kt]^t[Kt+1]<<I^t[Kt+2]<<Y)&R},V=new e0(25e3),ee=new Vs(288),ue=new Vs(32),_e=0,fe=0,G=a.i||0,me=0,Z=a.w||0,J=0;G+2<l;++G){var Se=B(G),Ee=G&32767,Ye=k[Se];if(M[Ee]=Ye,k[Se]=Ee,Z<=G){var oe=l-G;if((_e>7e3||me>24576)&&(oe>423||!g)){m=n_(t,p,0,V,ee,ue,fe,me,J,G-J,m),me=_e=fe=0,J=G;for(var ae=0;ae<286;++ae)ee[ae]=0;for(var ae=0;ae<30;++ae)ue[ae]=0}var he=2,De=0,ze=x,ne=Ee-Ye&32767;if(oe>2&&Se==B(G-ne))for(var H=Math.min(A,oe)-1,te=Math.min(32767,G),ce=Math.min(258,oe);ne<=te&&--ze&&Ee!=Ye;){if(t[G+he]==t[G+he-ne]){for(var Q=0;Q<ce&&t[G+Q]==t[G+Q-ne];++Q);if(Q>he){if(he=Q,De=ne,Q>H)break;for(var xe=Math.min(ne,Q-2),Te=0,ae=0;ae<xe;++ae){var Le=G-ne+ae&32767,Ge=M[Le],Re=Le-Ge&32767;Re>Te&&(Te=Re,Ye=Le)}}}Ee=Ye,Ye=M[Ee],ne+=Ee-Ye&32767}if(De){V[me++]=268435456|oy[he]<<18|e_[De];var gt=oy[he]&31,mt=e_[De]&31;fe+=t0[gt]+n0[mt],++ee[257+gt],++ue[mt],Z=G+he,++_e}else V[me++]=t[G],++ee[t[G]]}}for(G=Math.max(G,Z);G<l;++G)V[me++]=t[G],++ee[t[G]];m=n_(t,p,g,V,ee,ue,fe,me,J,G-J,m),g||(a.r=m&7|p[m/8|0]<<3,m-=7,a.h=k,a.p=M,a.i=G,a.w=Z)}else{for(var G=a.w||0;G<l+g;G+=65535){var Ot=G+65535;Ot>=l&&(p[m/8|0]=g,Ot=l),m=A5(p,m+1,t.subarray(G,Ot))}a.i=l}return hj(d,0,i+E5(m)+r)},T5=function(){var t=1,e=0;return{p:function(n){for(var i=t,r=e,a=n.length|0,l=0;l!=a;){for(var d=Math.min(l+2655,a);l<d;++l)r+=i+=n[l];i=(i&65535)+15*(i>>16),r=(r&65535)+15*(r>>16)}t=i,e=r},d:function(){return t%=65521,e%=65521,(t&255)<<24|(t&65280)<<8|(e&255)<<8|e>>8}}},mj=function(t,e,n,i,r){if(!r&&(r={l:1},e.dictionary)){var a=e.dictionary.subarray(-32768),l=new yl(a.length+t.length);l.set(a),l.set(t,a.length),t=l,r.w=a.length}return gj(t,e.level==null?6:e.level,e.mem==null?r.l?Math.ceil(Math.max(8,Math.min(13,Math.log(t.length)))*1.5):20:12+e.mem,n,i,r)},j5=function(t,e,n){for(;n;++e)t[e]=n,n>>>=8},vj=function(t,e){var n=e.level,i=n==0?0:n<6?1:n==9?3:2;if(t[0]=120,t[1]=i<<6|(e.dictionary&&32),t[1]|=31-(t[0]<<8|t[1])%31,e.dictionary){var r=T5();r.p(e.dictionary),j5(t,2,r.d())}};function cy(t,e){e||(e={});var n=T5();n.p(t);var i=mj(t,e,e.dictionary?6:2,4);return vj(i,e),j5(i,i.length-4,n.d()),i}var yj=typeof TextDecoder<"u"&&new TextDecoder,xj=0;try{yj.decode(L5,{stream:!0}),xj=1}catch{}function bj(t){if(Array.isArray(t))return t}function _j(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,a,l,d=[],p=!0,g=!1;try{if(a=(n=n.call(t)).next,e!==0)for(;!(p=(i=a.call(n)).done)&&(d.push(i.value),d.length!==e);p=!0);}catch(m){g=!0,r=m}finally{try{if(!p&&n.return!=null&&(l=n.return(),Object(l)!==l))return}finally{if(g)throw r}}return d}}function i_(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=Array(e);n<e;n++)i[n]=t[n];return i}function wj(t,e){if(t){if(typeof t=="string")return i_(t,e);var n={}.toString.call(t).slice(8,-1);return n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set"?Array.from(t):n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?i_(t,e):void 0}}function Sj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r_(t,e){return bj(t)||_j(t,e)||wj(t,e)||Sj()}function a_(t,e="utf8"){return new TextDecoder(e).decode(t)}const Cj=new TextEncoder;function Ej(t){return Cj.encode(t)}const Aj=1024*8,Lj=(()=>{const t=new Uint8Array(4),e=new Uint32Array(t.buffer);return!((e[0]=1)&t[0])})(),av={int8:globalThis.Int8Array,uint8:globalThis.Uint8Array,int16:globalThis.Int16Array,uint16:globalThis.Uint16Array,int32:globalThis.Int32Array,uint32:globalThis.Uint32Array,uint64:globalThis.BigUint64Array,int64:globalThis.BigInt64Array,float32:globalThis.Float32Array,float64:globalThis.Float64Array};class i0{buffer;byteLength;byteOffset;length;offset;lastWrittenByte;littleEndian;_data;_mark;_marks;constructor(e=Aj,n={}){let i=!1;typeof e=="number"?e=new ArrayBuffer(e):(i=!0,this.lastWrittenByte=e.byteLength);const r=n.offset?n.offset>>>0:0,a=e.byteLength-r;let l=r;(ArrayBuffer.isView(e)||e instanceof i0)&&(e.byteLength!==e.buffer.byteLength&&(l=e.byteOffset+r),e=e.buffer),i?this.lastWrittenByte=a:this.lastWrittenByte=0,this.buffer=e,this.length=a,this.byteLength=a,this.byteOffset=l,this.offset=0,this.littleEndian=!0,this._data=new DataView(this.buffer,l,a),this._mark=0,this._marks=[]}available(e=1){return this.offset+e<=this.length}isLittleEndian(){return this.littleEndian}setLittleEndian(){return this.littleEndian=!0,this}isBigEndian(){return!this.littleEndian}setBigEndian(){return this.littleEndian=!1,this}skip(e=1){return this.offset+=e,this}back(e=1){return this.offset-=e,this}seek(e){return this.offset=e,this}mark(){return this._mark=this.offset,this}reset(){return this.offset=this._mark,this}pushMark(){return this._marks.push(this.offset),this}popMark(){const e=this._marks.pop();if(e===void 0)throw new Error("Mark stack empty");return this.seek(e),this}rewind(){return this.offset=0,this}ensureAvailable(e=1){if(!this.available(e)){const i=(this.offset+e)*2,r=new Uint8Array(i);r.set(new Uint8Array(this.buffer)),this.buffer=r.buffer,this.length=i,this.byteLength=i,this._data=new DataView(this.buffer)}return this}readBoolean(){return this.readUint8()!==0}readInt8(){return this._data.getInt8(this.offset++)}readUint8(){return this._data.getUint8(this.offset++)}readByte(){return this.readUint8()}readBytes(e=1){return this.readArray(e,"uint8")}readArray(e,n){const i=av[n].BYTES_PER_ELEMENT*e,r=this.byteOffset+this.offset,a=this.buffer.slice(r,r+i);if(this.littleEndian===Lj&&n!=="uint8"&&n!=="int8"){const d=new Uint8Array(this.buffer.slice(r,r+i));d.reverse();const p=new av[n](d.buffer);return this.offset+=i,p.reverse(),p}const l=new av[n](a);return this.offset+=i,l}readInt16(){const e=this._data.getInt16(this.offset,this.littleEndian);return this.offset+=2,e}readUint16(){const e=this._data.getUint16(this.offset,this.littleEndian);return this.offset+=2,e}readInt32(){const e=this._data.getInt32(this.offset,this.littleEndian);return this.offset+=4,e}readUint32(){const e=this._data.getUint32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat32(){const e=this._data.getFloat32(this.offset,this.littleEndian);return this.offset+=4,e}readFloat64(){const e=this._data.getFloat64(this.offset,this.littleEndian);return this.offset+=8,e}readBigInt64(){const e=this._data.getBigInt64(this.offset,this.littleEndian);return this.offset+=8,e}readBigUint64(){const e=this._data.getBigUint64(this.offset,this.littleEndian);return this.offset+=8,e}readChar(){return String.fromCharCode(this.readInt8())}readChars(e=1){let n="";for(let i=0;i<e;i++)n+=this.readChar();return n}readUtf8(e=1){return a_(this.readBytes(e))}decodeText(e=1,n="utf8"){return a_(this.readBytes(e),n)}writeBoolean(e){return this.writeUint8(e?255:0),this}writeInt8(e){return this.ensureAvailable(1),this._data.setInt8(this.offset++,e),this._updateLastWrittenByte(),this}writeUint8(e){return this.ensureAvailable(1),this._data.setUint8(this.offset++,e),this._updateLastWrittenByte(),this}writeByte(e){return this.writeUint8(e)}writeBytes(e){this.ensureAvailable(e.length);for(let n=0;n<e.length;n++)this._data.setUint8(this.offset++,e[n]);return this._updateLastWrittenByte(),this}writeInt16(e){return this.ensureAvailable(2),this._data.setInt16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeUint16(e){return this.ensureAvailable(2),this._data.setUint16(this.offset,e,this.littleEndian),this.offset+=2,this._updateLastWrittenByte(),this}writeInt32(e){return this.ensureAvailable(4),this._data.setInt32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeUint32(e){return this.ensureAvailable(4),this._data.setUint32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat32(e){return this.ensureAvailable(4),this._data.setFloat32(this.offset,e,this.littleEndian),this.offset+=4,this._updateLastWrittenByte(),this}writeFloat64(e){return this.ensureAvailable(8),this._data.setFloat64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigInt64(e){return this.ensureAvailable(8),this._data.setBigInt64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeBigUint64(e){return this.ensureAvailable(8),this._data.setBigUint64(this.offset,e,this.littleEndian),this.offset+=8,this._updateLastWrittenByte(),this}writeChar(e){return this.writeUint8(e.charCodeAt(0))}writeChars(e){for(let n=0;n<e.length;n++)this.writeUint8(e.charCodeAt(n));return this}writeUtf8(e){return this.writeBytes(Ej(e))}toArray(){return new Uint8Array(this.buffer,this.byteOffset,this.lastWrittenByte)}getWrittenByteLength(){return this.lastWrittenByte-this.byteOffset}_updateLastWrittenByte(){this.offset>this.lastWrittenByte&&(this.lastWrittenByte=this.offset)}}function zd(t){let e=t.length;for(;--e>=0;)t[e]=0}const Tj=3,jj=258,k5=29,kj=256,Rj=kj+1+k5,R5=30,Nj=512,Dj=new Array((Rj+2)*2);zd(Dj);const Mj=new Array(R5*2);zd(Mj);const Oj=new Array(Nj);zd(Oj);const Pj=new Array(jj-Tj+1);zd(Pj);const Ij=new Array(k5);zd(Ij);const zj=new Array(R5);zd(zj);const Bj=(t,e,n,i)=>{let r=t&65535|0,a=t>>>16&65535|0,l=0;for(;n!==0;){l=n>2e3?2e3:n,n-=l;do r=r+e[i++]|0,a=a+r|0;while(--l);r%=65521,a%=65521}return r|a<<16|0};var uy=Bj;const Fj=()=>{let t,e=[];for(var n=0;n<256;n++){t=n;for(var i=0;i<8;i++)t=t&1?3988292384^t>>>1:t>>>1;e[n]=t}return e},Uj=new Uint32Array(Fj()),Hj=(t,e,n,i)=>{const r=Uj,a=i+n;t^=-1;for(let l=i;l<a;l++)t=t>>>8^r[(t^e[l])&255];return t^-1};var Fl=Hj,dy={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},N5={Z_NO_FLUSH:0,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_DEFLATED:8};const qj=(t,e)=>Object.prototype.hasOwnProperty.call(t,e);var Wj=function(t){const e=Array.prototype.slice.call(arguments,1);for(;e.length;){const n=e.shift();if(n){if(typeof n!="object")throw new TypeError(n+"must be non-object");for(const i in n)qj(n,i)&&(t[i]=n[i])}}return t},Gj=t=>{let e=0;for(let i=0,r=t.length;i<r;i++)e+=t[i].length;const n=new Uint8Array(e);for(let i=0,r=0,a=t.length;i<a;i++){let l=t[i];n.set(l,r),r+=l.length}return n},D5={assign:Wj,flattenChunks:Gj};let M5=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{M5=!1}const Ff=new Uint8Array(256);for(let t=0;t<256;t++)Ff[t]=t>=252?6:t>=248?5:t>=240?4:t>=224?3:t>=192?2:1;Ff[254]=Ff[254]=1;var Vj=t=>{if(typeof TextEncoder=="function"&&TextEncoder.prototype.encode)return new TextEncoder().encode(t);let e,n,i,r,a,l=t.length,d=0;for(r=0;r<l;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<l&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),d+=n<128?1:n<2048?2:n<65536?3:4;for(e=new Uint8Array(d),a=0,r=0;a<d;r++)n=t.charCodeAt(r),(n&64512)===55296&&r+1<l&&(i=t.charCodeAt(r+1),(i&64512)===56320&&(n=65536+(n-55296<<10)+(i-56320),r++)),n<128?e[a++]=n:n<2048?(e[a++]=192|n>>>6,e[a++]=128|n&63):n<65536?(e[a++]=224|n>>>12,e[a++]=128|n>>>6&63,e[a++]=128|n&63):(e[a++]=240|n>>>18,e[a++]=128|n>>>12&63,e[a++]=128|n>>>6&63,e[a++]=128|n&63);return e};const Yj=(t,e)=>{if(e<65534&&t.subarray&&M5)return String.fromCharCode.apply(null,t.length===e?t:t.subarray(0,e));let n="";for(let i=0;i<e;i++)n+=String.fromCharCode(t[i]);return n};var Zj=(t,e)=>{const n=e||t.length;if(typeof TextDecoder=="function"&&TextDecoder.prototype.decode)return new TextDecoder().decode(t.subarray(0,e));let i,r;const a=new Array(n*2);for(r=0,i=0;i<n;){let l=t[i++];if(l<128){a[r++]=l;continue}let d=Ff[l];if(d>4){a[r++]=65533,i+=d-1;continue}for(l&=d===2?31:d===3?15:7;d>1&&i<n;)l=l<<6|t[i++]&63,d--;if(d>1){a[r++]=65533;continue}l<65536?a[r++]=l:(l-=65536,a[r++]=55296|l>>10&1023,a[r++]=56320|l&1023)}return Yj(a,r)},Kj=(t,e)=>{e=e||t.length,e>t.length&&(e=t.length);let n=e-1;for(;n>=0&&(t[n]&192)===128;)n--;return n<0||n===0?e:n+Ff[t[n]]>e?n:e},fy={string2buf:Vj,buf2string:Zj,utf8border:Kj};function Xj(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}var Qj=Xj;const Qh=16209,$j=16191;var Jj=function(e,n){let i,r,a,l,d,p,g,m,_,A,x,R,M,k,I,Y,B,V,ee,ue,_e,fe,G,me;const Z=e.state;i=e.next_in,G=e.input,r=i+(e.avail_in-5),a=e.next_out,me=e.output,l=a-(n-e.avail_out),d=a+(e.avail_out-257),p=Z.dmax,g=Z.wsize,m=Z.whave,_=Z.wnext,A=Z.window,x=Z.hold,R=Z.bits,M=Z.lencode,k=Z.distcode,I=(1<<Z.lenbits)-1,Y=(1<<Z.distbits)-1;e:do{R<15&&(x+=G[i++]<<R,R+=8,x+=G[i++]<<R,R+=8),B=M[x&I];t:for(;;){if(V=B>>>24,x>>>=V,R-=V,V=B>>>16&255,V===0)me[a++]=B&65535;else if(V&16){ee=B&65535,V&=15,V&&(R<V&&(x+=G[i++]<<R,R+=8),ee+=x&(1<<V)-1,x>>>=V,R-=V),R<15&&(x+=G[i++]<<R,R+=8,x+=G[i++]<<R,R+=8),B=k[x&Y];n:for(;;){if(V=B>>>24,x>>>=V,R-=V,V=B>>>16&255,V&16){if(ue=B&65535,V&=15,R<V&&(x+=G[i++]<<R,R+=8,R<V&&(x+=G[i++]<<R,R+=8)),ue+=x&(1<<V)-1,ue>p){e.msg="invalid distance too far back",Z.mode=Qh;break e}if(x>>>=V,R-=V,V=a-l,ue>V){if(V=ue-V,V>m&&Z.sane){e.msg="invalid distance too far back",Z.mode=Qh;break e}if(_e=0,fe=A,_===0){if(_e+=g-V,V<ee){ee-=V;do me[a++]=A[_e++];while(--V);_e=a-ue,fe=me}}else if(_<V){if(_e+=g+_-V,V-=_,V<ee){ee-=V;do me[a++]=A[_e++];while(--V);if(_e=0,_<ee){V=_,ee-=V;do me[a++]=A[_e++];while(--V);_e=a-ue,fe=me}}}else if(_e+=_-V,V<ee){ee-=V;do me[a++]=A[_e++];while(--V);_e=a-ue,fe=me}for(;ee>2;)me[a++]=fe[_e++],me[a++]=fe[_e++],me[a++]=fe[_e++],ee-=3;ee&&(me[a++]=fe[_e++],ee>1&&(me[a++]=fe[_e++]))}else{_e=a-ue;do me[a++]=me[_e++],me[a++]=me[_e++],me[a++]=me[_e++],ee-=3;while(ee>2);ee&&(me[a++]=me[_e++],ee>1&&(me[a++]=me[_e++]))}}else if((V&64)===0){B=k[(B&65535)+(x&(1<<V)-1)];continue n}else{e.msg="invalid distance code",Z.mode=Qh;break e}break}}else if((V&64)===0){B=M[(B&65535)+(x&(1<<V)-1)];continue t}else if(V&32){Z.mode=$j;break e}else{e.msg="invalid literal/length code",Z.mode=Qh;break e}break}}while(i<r&&a<d);ee=R>>3,i-=ee,R-=ee<<3,x&=(1<<R)-1,e.next_in=i,e.next_out=a,e.avail_in=i<r?5+(r-i):5-(i-r),e.avail_out=a<d?257+(d-a):257-(a-d),Z.hold=x,Z.bits=R};const dd=15,o_=852,s_=592,l_=0,ov=1,c_=2,ek=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),tk=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),nk=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),ik=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]),rk=(t,e,n,i,r,a,l,d)=>{const p=d.bits;let g=0,m=0,_=0,A=0,x=0,R=0,M=0,k=0,I=0,Y=0,B,V,ee,ue,_e,fe=null,G;const me=new Uint16Array(dd+1),Z=new Uint16Array(dd+1);let J=null,Se,Ee,Ye;for(g=0;g<=dd;g++)me[g]=0;for(m=0;m<i;m++)me[e[n+m]]++;for(x=p,A=dd;A>=1&&me[A]===0;A--);if(x>A&&(x=A),A===0)return r[a++]=1<<24|64<<16|0,r[a++]=1<<24|64<<16|0,d.bits=1,0;for(_=1;_<A&&me[_]===0;_++);for(x<_&&(x=_),k=1,g=1;g<=dd;g++)if(k<<=1,k-=me[g],k<0)return-1;if(k>0&&(t===l_||A!==1))return-1;for(Z[1]=0,g=1;g<dd;g++)Z[g+1]=Z[g]+me[g];for(m=0;m<i;m++)e[n+m]!==0&&(l[Z[e[n+m]]++]=m);if(t===l_?(fe=J=l,G=20):t===ov?(fe=ek,J=tk,G=257):(fe=nk,J=ik,G=0),Y=0,m=0,g=_,_e=a,R=x,M=0,ee=-1,I=1<<x,ue=I-1,t===ov&&I>o_||t===c_&&I>s_)return 1;for(;;){Se=g-M,l[m]+1<G?(Ee=0,Ye=l[m]):l[m]>=G?(Ee=J[l[m]-G],Ye=fe[l[m]-G]):(Ee=96,Ye=0),B=1<<g-M,V=1<<R,_=V;do V-=B,r[_e+(Y>>M)+V]=Se<<24|Ee<<16|Ye|0;while(V!==0);for(B=1<<g-1;Y&B;)B>>=1;if(B!==0?(Y&=B-1,Y+=B):Y=0,m++,--me[g]===0){if(g===A)break;g=e[n+l[m]]}if(g>x&&(Y&ue)!==ee){for(M===0&&(M=x),_e+=_,R=g-M,k=1<<R;R+M<A&&(k-=me[R+M],!(k<=0));)R++,k<<=1;if(I+=1<<R,t===ov&&I>o_||t===c_&&I>s_)return 1;ee=Y&ue,r[ee]=x<<24|R<<16|_e-a|0}}return Y!==0&&(r[_e+Y]=g-M<<24|64<<16|0),d.bits=x,0};var jf=rk;const ak=0,O5=1,P5=2,{Z_FINISH:u_,Z_BLOCK:ok,Z_TREES:$h,Z_OK:ku,Z_STREAM_END:sk,Z_NEED_DICT:lk,Z_STREAM_ERROR:al,Z_DATA_ERROR:I5,Z_MEM_ERROR:z5,Z_BUF_ERROR:ck,Z_DEFLATED:d_}=N5,yg=16180,f_=16181,h_=16182,p_=16183,g_=16184,m_=16185,v_=16186,y_=16187,x_=16188,b_=16189,Bp=16190,pc=16191,sv=16192,__=16193,lv=16194,w_=16195,S_=16196,C_=16197,E_=16198,Jh=16199,ep=16200,A_=16201,L_=16202,T_=16203,j_=16204,k_=16205,cv=16206,R_=16207,N_=16208,Ur=16209,B5=16210,F5=16211,uk=852,dk=592,fk=15,hk=fk,D_=t=>(t>>>24&255)+(t>>>8&65280)+((t&65280)<<8)+((t&255)<<24);function pk(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}const Ou=t=>{if(!t)return 1;const e=t.state;return!e||e.strm!==t||e.mode<yg||e.mode>F5?1:0},U5=t=>{if(Ou(t))return al;const e=t.state;return t.total_in=t.total_out=e.total=0,t.msg="",e.wrap&&(t.adler=e.wrap&1),e.mode=yg,e.last=0,e.havedict=0,e.flags=-1,e.dmax=32768,e.head=null,e.hold=0,e.bits=0,e.lencode=e.lendyn=new Int32Array(uk),e.distcode=e.distdyn=new Int32Array(dk),e.sane=1,e.back=-1,ku},H5=t=>{if(Ou(t))return al;const e=t.state;return e.wsize=0,e.whave=0,e.wnext=0,U5(t)},q5=(t,e)=>{let n;if(Ou(t))return al;const i=t.state;return e<0?(n=0,e=-e):(n=(e>>4)+5,e<48&&(e&=15)),e&&(e<8||e>15)?al:(i.window!==null&&i.wbits!==e&&(i.window=null),i.wrap=n,i.wbits=e,H5(t))},W5=(t,e)=>{if(!t)return al;const n=new pk;t.state=n,n.strm=t,n.window=null,n.mode=yg;const i=q5(t,e);return i!==ku&&(t.state=null),i},gk=t=>W5(t,hk);let M_=!0,uv,dv;const mk=t=>{if(M_){uv=new Int32Array(512),dv=new Int32Array(32);let e=0;for(;e<144;)t.lens[e++]=8;for(;e<256;)t.lens[e++]=9;for(;e<280;)t.lens[e++]=7;for(;e<288;)t.lens[e++]=8;for(jf(O5,t.lens,0,288,uv,0,t.work,{bits:9}),e=0;e<32;)t.lens[e++]=5;jf(P5,t.lens,0,32,dv,0,t.work,{bits:5}),M_=!1}t.lencode=uv,t.lenbits=9,t.distcode=dv,t.distbits=5},G5=(t,e,n,i)=>{let r;const a=t.state;return a.window===null&&(a.wsize=1<<a.wbits,a.wnext=0,a.whave=0,a.window=new Uint8Array(a.wsize)),i>=a.wsize?(a.window.set(e.subarray(n-a.wsize,n),0),a.wnext=0,a.whave=a.wsize):(r=a.wsize-a.wnext,r>i&&(r=i),a.window.set(e.subarray(n-i,n-i+r),a.wnext),i-=r,i?(a.window.set(e.subarray(n-i,n),0),a.wnext=i,a.whave=a.wsize):(a.wnext+=r,a.wnext===a.wsize&&(a.wnext=0),a.whave<a.wsize&&(a.whave+=r))),0},vk=(t,e)=>{let n,i,r,a,l,d,p,g,m,_,A,x,R,M,k=0,I,Y,B,V,ee,ue,_e,fe;const G=new Uint8Array(4);let me,Z;const J=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(Ou(t)||!t.output||!t.input&&t.avail_in!==0)return al;n=t.state,n.mode===pc&&(n.mode=sv),l=t.next_out,r=t.output,p=t.avail_out,a=t.next_in,i=t.input,d=t.avail_in,g=n.hold,m=n.bits,_=d,A=p,fe=ku;e:for(;;)switch(n.mode){case yg:if(n.wrap===0){n.mode=sv;break}for(;m<16;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(n.wrap&2&&g===35615){n.wbits===0&&(n.wbits=15),n.check=0,G[0]=g&255,G[1]=g>>>8&255,n.check=Fl(n.check,G,2,0),g=0,m=0,n.mode=f_;break}if(n.head&&(n.head.done=!1),!(n.wrap&1)||(((g&255)<<8)+(g>>8))%31){t.msg="incorrect header check",n.mode=Ur;break}if((g&15)!==d_){t.msg="unknown compression method",n.mode=Ur;break}if(g>>>=4,m-=4,_e=(g&15)+8,n.wbits===0&&(n.wbits=_e),_e>15||_e>n.wbits){t.msg="invalid window size",n.mode=Ur;break}n.dmax=1<<n.wbits,n.flags=0,t.adler=n.check=1,n.mode=g&512?b_:pc,g=0,m=0;break;case f_:for(;m<16;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(n.flags=g,(n.flags&255)!==d_){t.msg="unknown compression method",n.mode=Ur;break}if(n.flags&57344){t.msg="unknown header flags set",n.mode=Ur;break}n.head&&(n.head.text=g>>8&1),n.flags&512&&n.wrap&4&&(G[0]=g&255,G[1]=g>>>8&255,n.check=Fl(n.check,G,2,0)),g=0,m=0,n.mode=h_;case h_:for(;m<32;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.head&&(n.head.time=g),n.flags&512&&n.wrap&4&&(G[0]=g&255,G[1]=g>>>8&255,G[2]=g>>>16&255,G[3]=g>>>24&255,n.check=Fl(n.check,G,4,0)),g=0,m=0,n.mode=p_;case p_:for(;m<16;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.head&&(n.head.xflags=g&255,n.head.os=g>>8),n.flags&512&&n.wrap&4&&(G[0]=g&255,G[1]=g>>>8&255,n.check=Fl(n.check,G,2,0)),g=0,m=0,n.mode=g_;case g_:if(n.flags&1024){for(;m<16;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.length=g,n.head&&(n.head.extra_len=g),n.flags&512&&n.wrap&4&&(G[0]=g&255,G[1]=g>>>8&255,n.check=Fl(n.check,G,2,0)),g=0,m=0}else n.head&&(n.head.extra=null);n.mode=m_;case m_:if(n.flags&1024&&(x=n.length,x>d&&(x=d),x&&(n.head&&(_e=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(i.subarray(a,a+x),_e)),n.flags&512&&n.wrap&4&&(n.check=Fl(n.check,i,x,a)),d-=x,a+=x,n.length-=x),n.length))break e;n.length=0,n.mode=v_;case v_:if(n.flags&2048){if(d===0)break e;x=0;do _e=i[a+x++],n.head&&_e&&n.length<65536&&(n.head.name+=String.fromCharCode(_e));while(_e&&x<d);if(n.flags&512&&n.wrap&4&&(n.check=Fl(n.check,i,x,a)),d-=x,a+=x,_e)break e}else n.head&&(n.head.name=null);n.length=0,n.mode=y_;case y_:if(n.flags&4096){if(d===0)break e;x=0;do _e=i[a+x++],n.head&&_e&&n.length<65536&&(n.head.comment+=String.fromCharCode(_e));while(_e&&x<d);if(n.flags&512&&n.wrap&4&&(n.check=Fl(n.check,i,x,a)),d-=x,a+=x,_e)break e}else n.head&&(n.head.comment=null);n.mode=x_;case x_:if(n.flags&512){for(;m<16;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(n.wrap&4&&g!==(n.check&65535)){t.msg="header crc mismatch",n.mode=Ur;break}g=0,m=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),t.adler=n.check=0,n.mode=pc;break;case b_:for(;m<32;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}t.adler=n.check=D_(g),g=0,m=0,n.mode=Bp;case Bp:if(n.havedict===0)return t.next_out=l,t.avail_out=p,t.next_in=a,t.avail_in=d,n.hold=g,n.bits=m,lk;t.adler=n.check=1,n.mode=pc;case pc:if(e===ok||e===$h)break e;case sv:if(n.last){g>>>=m&7,m-=m&7,n.mode=cv;break}for(;m<3;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}switch(n.last=g&1,g>>>=1,m-=1,g&3){case 0:n.mode=__;break;case 1:if(mk(n),n.mode=Jh,e===$h){g>>>=2,m-=2;break e}break;case 2:n.mode=S_;break;case 3:t.msg="invalid block type",n.mode=Ur}g>>>=2,m-=2;break;case __:for(g>>>=m&7,m-=m&7;m<32;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if((g&65535)!==(g>>>16^65535)){t.msg="invalid stored block lengths",n.mode=Ur;break}if(n.length=g&65535,g=0,m=0,n.mode=lv,e===$h)break e;case lv:n.mode=w_;case w_:if(x=n.length,x){if(x>d&&(x=d),x>p&&(x=p),x===0)break e;r.set(i.subarray(a,a+x),l),d-=x,a+=x,p-=x,l+=x,n.length-=x;break}n.mode=pc;break;case S_:for(;m<14;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(n.nlen=(g&31)+257,g>>>=5,m-=5,n.ndist=(g&31)+1,g>>>=5,m-=5,n.ncode=(g&15)+4,g>>>=4,m-=4,n.nlen>286||n.ndist>30){t.msg="too many length or distance symbols",n.mode=Ur;break}n.have=0,n.mode=C_;case C_:for(;n.have<n.ncode;){for(;m<3;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.lens[J[n.have++]]=g&7,g>>>=3,m-=3}for(;n.have<19;)n.lens[J[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,me={bits:n.lenbits},fe=jf(ak,n.lens,0,19,n.lencode,0,n.work,me),n.lenbits=me.bits,fe){t.msg="invalid code lengths set",n.mode=Ur;break}n.have=0,n.mode=E_;case E_:for(;n.have<n.nlen+n.ndist;){for(;k=n.lencode[g&(1<<n.lenbits)-1],I=k>>>24,Y=k>>>16&255,B=k&65535,!(I<=m);){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(B<16)g>>>=I,m-=I,n.lens[n.have++]=B;else{if(B===16){for(Z=I+2;m<Z;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(g>>>=I,m-=I,n.have===0){t.msg="invalid bit length repeat",n.mode=Ur;break}_e=n.lens[n.have-1],x=3+(g&3),g>>>=2,m-=2}else if(B===17){for(Z=I+3;m<Z;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}g>>>=I,m-=I,_e=0,x=3+(g&7),g>>>=3,m-=3}else{for(Z=I+7;m<Z;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}g>>>=I,m-=I,_e=0,x=11+(g&127),g>>>=7,m-=7}if(n.have+x>n.nlen+n.ndist){t.msg="invalid bit length repeat",n.mode=Ur;break}for(;x--;)n.lens[n.have++]=_e}}if(n.mode===Ur)break;if(n.lens[256]===0){t.msg="invalid code -- missing end-of-block",n.mode=Ur;break}if(n.lenbits=9,me={bits:n.lenbits},fe=jf(O5,n.lens,0,n.nlen,n.lencode,0,n.work,me),n.lenbits=me.bits,fe){t.msg="invalid literal/lengths set",n.mode=Ur;break}if(n.distbits=6,n.distcode=n.distdyn,me={bits:n.distbits},fe=jf(P5,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,me),n.distbits=me.bits,fe){t.msg="invalid distances set",n.mode=Ur;break}if(n.mode=Jh,e===$h)break e;case Jh:n.mode=ep;case ep:if(d>=6&&p>=258){t.next_out=l,t.avail_out=p,t.next_in=a,t.avail_in=d,n.hold=g,n.bits=m,Jj(t,A),l=t.next_out,r=t.output,p=t.avail_out,a=t.next_in,i=t.input,d=t.avail_in,g=n.hold,m=n.bits,n.mode===pc&&(n.back=-1);break}for(n.back=0;k=n.lencode[g&(1<<n.lenbits)-1],I=k>>>24,Y=k>>>16&255,B=k&65535,!(I<=m);){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(Y&&(Y&240)===0){for(V=I,ee=Y,ue=B;k=n.lencode[ue+((g&(1<<V+ee)-1)>>V)],I=k>>>24,Y=k>>>16&255,B=k&65535,!(V+I<=m);){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}g>>>=V,m-=V,n.back+=V}if(g>>>=I,m-=I,n.back+=I,n.length=B,Y===0){n.mode=k_;break}if(Y&32){n.back=-1,n.mode=pc;break}if(Y&64){t.msg="invalid literal/length code",n.mode=Ur;break}n.extra=Y&15,n.mode=A_;case A_:if(n.extra){for(Z=n.extra;m<Z;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.length+=g&(1<<n.extra)-1,g>>>=n.extra,m-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=L_;case L_:for(;k=n.distcode[g&(1<<n.distbits)-1],I=k>>>24,Y=k>>>16&255,B=k&65535,!(I<=m);){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if((Y&240)===0){for(V=I,ee=Y,ue=B;k=n.distcode[ue+((g&(1<<V+ee)-1)>>V)],I=k>>>24,Y=k>>>16&255,B=k&65535,!(V+I<=m);){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}g>>>=V,m-=V,n.back+=V}if(g>>>=I,m-=I,n.back+=I,Y&64){t.msg="invalid distance code",n.mode=Ur;break}n.offset=B,n.extra=Y&15,n.mode=T_;case T_:if(n.extra){for(Z=n.extra;m<Z;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}n.offset+=g&(1<<n.extra)-1,g>>>=n.extra,m-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){t.msg="invalid distance too far back",n.mode=Ur;break}n.mode=j_;case j_:if(p===0)break e;if(x=A-p,n.offset>x){if(x=n.offset-x,x>n.whave&&n.sane){t.msg="invalid distance too far back",n.mode=Ur;break}x>n.wnext?(x-=n.wnext,R=n.wsize-x):R=n.wnext-x,x>n.length&&(x=n.length),M=n.window}else M=r,R=l-n.offset,x=n.length;x>p&&(x=p),p-=x,n.length-=x;do r[l++]=M[R++];while(--x);n.length===0&&(n.mode=ep);break;case k_:if(p===0)break e;r[l++]=n.length,p--,n.mode=ep;break;case cv:if(n.wrap){for(;m<32;){if(d===0)break e;d--,g|=i[a++]<<m,m+=8}if(A-=p,t.total_out+=A,n.total+=A,n.wrap&4&&A&&(t.adler=n.check=n.flags?Fl(n.check,r,A,l-A):uy(n.check,r,A,l-A)),A=p,n.wrap&4&&(n.flags?g:D_(g))!==n.check){t.msg="incorrect data check",n.mode=Ur;break}g=0,m=0}n.mode=R_;case R_:if(n.wrap&&n.flags){for(;m<32;){if(d===0)break e;d--,g+=i[a++]<<m,m+=8}if(n.wrap&4&&g!==(n.total&4294967295)){t.msg="incorrect length check",n.mode=Ur;break}g=0,m=0}n.mode=N_;case N_:fe=sk;break e;case Ur:fe=I5;break e;case B5:return z5;case F5:default:return al}return t.next_out=l,t.avail_out=p,t.next_in=a,t.avail_in=d,n.hold=g,n.bits=m,(n.wsize||A!==t.avail_out&&n.mode<Ur&&(n.mode<cv||e!==u_))&&G5(t,t.output,t.next_out,A-t.avail_out),_-=t.avail_in,A-=t.avail_out,t.total_in+=_,t.total_out+=A,n.total+=A,n.wrap&4&&A&&(t.adler=n.check=n.flags?Fl(n.check,r,A,t.next_out-A):uy(n.check,r,A,t.next_out-A)),t.data_type=n.bits+(n.last?64:0)+(n.mode===pc?128:0)+(n.mode===Jh||n.mode===lv?256:0),(_===0&&A===0||e===u_)&&fe===ku&&(fe=ck),fe},yk=t=>{if(Ou(t))return al;let e=t.state;return e.window&&(e.window=null),t.state=null,ku},xk=(t,e)=>{if(Ou(t))return al;const n=t.state;return(n.wrap&2)===0?al:(n.head=e,e.done=!1,ku)},bk=(t,e)=>{const n=e.length;let i,r,a;return Ou(t)||(i=t.state,i.wrap!==0&&i.mode!==Bp)?al:i.mode===Bp&&(r=1,r=uy(r,e,n,0),r!==i.check)?I5:(a=G5(t,e,n,n),a?(i.mode=B5,z5):(i.havedict=1,ku))};var _k=H5,wk=q5,Sk=U5,Ck=gk,Ek=W5,Ak=vk,Lk=yk,Tk=xk,jk=bk,kk="pako inflate (from Nodeca project)",gc={inflateReset:_k,inflateReset2:wk,inflateResetKeep:Sk,inflateInit:Ck,inflateInit2:Ek,inflate:Ak,inflateEnd:Lk,inflateGetHeader:Tk,inflateSetDictionary:jk,inflateInfo:kk};function Rk(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}var Nk=Rk;const V5=Object.prototype.toString,{Z_NO_FLUSH:Dk,Z_FINISH:Mk,Z_OK:Uf,Z_STREAM_END:fv,Z_NEED_DICT:hv,Z_STREAM_ERROR:Ok,Z_DATA_ERROR:O_,Z_MEM_ERROR:Pk}=N5;function eh(t){this.options=D5.assign({chunkSize:1024*64,windowBits:15,to:""},t||{});const e=this.options;e.raw&&e.windowBits>=0&&e.windowBits<16&&(e.windowBits=-e.windowBits,e.windowBits===0&&(e.windowBits=-15)),e.windowBits>=0&&e.windowBits<16&&!(t&&t.windowBits)&&(e.windowBits+=32),e.windowBits>15&&e.windowBits<48&&(e.windowBits&15)===0&&(e.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new Qj,this.strm.avail_out=0;let n=gc.inflateInit2(this.strm,e.windowBits);if(n!==Uf)throw new Error(dy[n]);if(this.header=new Nk,gc.inflateGetHeader(this.strm,this.header),e.dictionary&&(typeof e.dictionary=="string"?e.dictionary=fy.string2buf(e.dictionary):V5.call(e.dictionary)==="[object ArrayBuffer]"&&(e.dictionary=new Uint8Array(e.dictionary)),e.raw&&(n=gc.inflateSetDictionary(this.strm,e.dictionary),n!==Uf)))throw new Error(dy[n])}eh.prototype.push=function(t,e){const n=this.strm,i=this.options.chunkSize,r=this.options.dictionary;let a,l,d;if(this.ended)return!1;for(e===~~e?l=e:l=e===!0?Mk:Dk,V5.call(t)==="[object ArrayBuffer]"?n.input=new Uint8Array(t):n.input=t,n.next_in=0,n.avail_in=n.input.length;;){for(n.avail_out===0&&(n.output=new Uint8Array(i),n.next_out=0,n.avail_out=i),a=gc.inflate(n,l),a===hv&&r&&(a=gc.inflateSetDictionary(n,r),a===Uf?a=gc.inflate(n,l):a===O_&&(a=hv));n.avail_in>0&&a===fv&&n.state.wrap>0&&t[n.next_in]!==0;)gc.inflateReset(n),a=gc.inflate(n,l);switch(a){case Ok:case O_:case hv:case Pk:return this.onEnd(a),this.ended=!0,!1}if(d=n.avail_out,n.next_out&&(n.avail_out===0||a===fv))if(this.options.to==="string"){let p=fy.utf8border(n.output,n.next_out),g=n.next_out-p,m=fy.buf2string(n.output,p);n.next_out=g,n.avail_out=i-g,g&&n.output.set(n.output.subarray(p,p+g),0),this.onData(m)}else this.onData(n.output.length===n.next_out?n.output:n.output.subarray(0,n.next_out));if(!(a===Uf&&d===0)){if(a===fv)return a=gc.inflateEnd(this.strm),this.onEnd(a),this.ended=!0,!0;if(n.avail_in===0)break}}return!0};eh.prototype.onData=function(t){this.chunks.push(t)};eh.prototype.onEnd=function(t){t===Uf&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=D5.flattenChunks(this.chunks)),this.chunks=[],this.err=t,this.msg=this.strm.msg};function Ik(t,e){const n=new eh(e);if(n.push(t),n.err)throw n.msg||dy[n.err];return n.result}var zk=eh,Bk=Ik,Fk={Inflate:zk,inflate:Bk};const{Inflate:Uk,inflate:Hk}=Fk;var P_=Uk,qk=Hk;const Y5=[];for(let t=0;t<256;t++){let e=t;for(let n=0;n<8;n++)e&1?e=3988292384^e>>>1:e=e>>>1;Y5[t]=e}const I_=4294967295;function Wk(t,e,n){let i=t;for(let r=0;r<n;r++)i=Y5[(i^e[r])&255]^i>>>8;return i}function Gk(t,e){return(Wk(I_,t,e)^I_)>>>0}function z_(t,e,n){const i=t.readUint32(),r=Gk(new Uint8Array(t.buffer,t.byteOffset+t.offset-e-4,e),e);if(r!==i)throw new Error(`CRC mismatch for chunk ${n}. Expected ${i}, found ${r}`)}function Z5(t,e,n){for(let i=0;i<n;i++)e[i]=t[i]}function K5(t,e,n,i){let r=0;for(;r<i;r++)e[r]=t[r];for(;r<n;r++)e[r]=t[r]+e[r-i]&255}function X5(t,e,n,i){let r=0;if(n.length===0)for(;r<i;r++)e[r]=t[r];else for(;r<i;r++)e[r]=t[r]+n[r]&255}function Q5(t,e,n,i,r){let a=0;if(n.length===0){for(;a<r;a++)e[a]=t[a];for(;a<i;a++)e[a]=t[a]+(e[a-r]>>1)&255}else{for(;a<r;a++)e[a]=t[a]+(n[a]>>1)&255;for(;a<i;a++)e[a]=t[a]+(e[a-r]+n[a]>>1)&255}}function $5(t,e,n,i,r){let a=0;if(n.length===0){for(;a<r;a++)e[a]=t[a];for(;a<i;a++)e[a]=t[a]+e[a-r]&255}else{for(;a<r;a++)e[a]=t[a]+n[a]&255;for(;a<i;a++)e[a]=t[a]+Vk(e[a-r],n[a],n[a-r])&255}}function Vk(t,e,n){const i=t+e-n,r=Math.abs(i-t),a=Math.abs(i-e),l=Math.abs(i-n);return r<=a&&r<=l?t:a<=l?e:n}function Yk(t,e,n,i,r,a){switch(t){case 0:Z5(e,n,r);break;case 1:K5(e,n,r,a);break;case 2:X5(e,n,i,r);break;case 3:Q5(e,n,i,r,a);break;case 4:$5(e,n,i,r,a);break;default:throw new Error(`Unsupported filter: ${t}`)}}const Zk=new Uint16Array([255]),Kk=new Uint8Array(Zk.buffer),Xk=Kk[0]===255;function Qk(t){const{data:e,width:n,height:i,channels:r,depth:a}=t,l=[{x:0,y:0,xStep:8,yStep:8},{x:4,y:0,xStep:8,yStep:8},{x:0,y:4,xStep:4,yStep:8},{x:2,y:0,xStep:4,yStep:4},{x:0,y:2,xStep:2,yStep:4},{x:1,y:0,xStep:2,yStep:2},{x:0,y:1,xStep:1,yStep:2}],d=Math.ceil(a/8)*r,p=new Uint8Array(i*n*d);let g=0;for(let m=0;m<7;m++){const _=l[m],A=Math.ceil((n-_.x)/_.xStep),x=Math.ceil((i-_.y)/_.yStep);if(A<=0||x<=0)continue;const R=A*d,M=new Uint8Array(R);for(let k=0;k<x;k++){const I=e[g++],Y=e.subarray(g,g+R);g+=R;const B=new Uint8Array(R);Yk(I,Y,B,M,R,d),M.set(B);for(let V=0;V<A;V++){const ee=_.x+V*_.xStep,ue=_.y+k*_.yStep;if(!(ee>=n||ue>=i))for(let _e=0;_e<d;_e++)p[(ue*n+ee)*d+_e]=B[V*d+_e]}}}if(a===16){const m=new Uint16Array(p.buffer);if(Xk)for(let _=0;_<m.length;_++)m[_]=$k(m[_]);return m}else return p}function $k(t){return(t&255)<<8|t>>8&255}const Jk=new Uint16Array([255]),eR=new Uint8Array(Jk.buffer),tR=eR[0]===255,nR=new Uint8Array(0);function B_(t){const{data:e,width:n,height:i,channels:r,depth:a}=t,l=Math.ceil(a/8)*r,d=Math.ceil(a/8*r*n),p=new Uint8Array(i*d);let g=nR,m=0,_,A;for(let x=0;x<i;x++){switch(_=e.subarray(m+1,m+1+d),A=p.subarray(x*d,(x+1)*d),e[m]){case 0:Z5(_,A,d);break;case 1:K5(_,A,d,l);break;case 2:X5(_,A,g,d);break;case 3:Q5(_,A,g,d,l);break;case 4:$5(_,A,g,d,l);break;default:throw new Error(`Unsupported filter: ${e[m]}`)}g=A,m+=d+1}if(a===16){const x=new Uint16Array(p.buffer);if(tR)for(let R=0;R<x.length;R++)x[R]=iR(x[R]);return x}else return p}function iR(t){return(t&255)<<8|t>>8&255}const _p=Uint8Array.of(137,80,78,71,13,10,26,10);function F_(t){if(!rR(t.readBytes(_p.length)))throw new Error("wrong PNG signature")}function rR(t){if(t.length<_p.length)return!1;for(let e=0;e<_p.length;e++)if(t[e]!==_p[e])return!1;return!0}const aR="tEXt",oR=0,J5=new TextDecoder("latin1");function sR(t){if(cR(t),t.length===0||t.length>79)throw new Error("keyword length must be between 1 and 79")}const lR=/^[\u0000-\u00FF]*$/;function cR(t){if(!lR.test(t))throw new Error("invalid latin1 text")}function uR(t,e,n){const i=eS(e);t[i]=dR(e,n-i.length-1)}function eS(t){for(t.mark();t.readByte()!==oR;);const e=t.offset;t.reset();const n=J5.decode(t.readBytes(e-t.offset-1));return t.skip(1),sR(n),n}function dR(t,e){return J5.decode(t.readBytes(e))}const Gs={UNKNOWN:-1,GREYSCALE:0,TRUECOLOUR:2,INDEXED_COLOUR:3,GREYSCALE_ALPHA:4,TRUECOLOUR_ALPHA:6},pv={UNKNOWN:-1,DEFLATE:0},U_={UNKNOWN:-1,ADAPTIVE:0},gv={UNKNOWN:-1,NO_INTERLACE:0,ADAM7:1},tp={NONE:0,BACKGROUND:1,PREVIOUS:2},mv={SOURCE:0,OVER:1};class fR extends i0{_checkCrc;_inflator;_png;_apng;_end;_hasPalette;_palette;_hasTransparency;_transparency;_compressionMethod;_filterMethod;_interlaceMethod;_colorType;_isAnimated;_numberOfFrames;_numberOfPlays;_frames;_writingDataChunks;constructor(e,n={}){super(e);const{checkCrc:i=!1}=n;this._checkCrc=i,this._inflator=new P_,this._png={width:-1,height:-1,channels:-1,data:new Uint8Array(0),depth:1,text:{}},this._apng={width:-1,height:-1,channels:-1,depth:1,numberOfFrames:1,numberOfPlays:0,text:{},frames:[]},this._end=!1,this._hasPalette=!1,this._palette=[],this._hasTransparency=!1,this._transparency=new Uint16Array(0),this._compressionMethod=pv.UNKNOWN,this._filterMethod=U_.UNKNOWN,this._interlaceMethod=gv.UNKNOWN,this._colorType=Gs.UNKNOWN,this._isAnimated=!1,this._numberOfFrames=1,this._numberOfPlays=0,this._frames=[],this._writingDataChunks=!1,this.setBigEndian()}decode(){for(F_(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeChunk(e,n)}return this.decodeImage(),this._png}decodeApng(){for(F_(this);!this._end;){const e=this.readUint32(),n=this.readChars(4);this.decodeApngChunk(e,n)}return this.decodeApngImage(),this._apng}decodeChunk(e,n){const i=this.offset;switch(n){case"IHDR":this.decodeIHDR();break;case"PLTE":this.decodePLTE(e);break;case"IDAT":this.decodeIDAT(e);break;case"IEND":this._end=!0;break;case"tRNS":this.decodetRNS(e);break;case"iCCP":this.decodeiCCP(e);break;case aR:uR(this._png.text,this,e);break;case"pHYs":this.decodepHYs();break;default:this.skip(e);break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?z_(this,e+4,n):this.skip(4)}decodeApngChunk(e,n){const i=this.offset;switch(n!=="fdAT"&&n!=="IDAT"&&this._writingDataChunks&&this.pushDataToFrame(),n){case"acTL":this.decodeACTL();break;case"fcTL":this.decodeFCTL();break;case"fdAT":this.decodeFDAT(e);break;default:this.decodeChunk(e,n),this.offset=i+e;break}if(this.offset-i!==e)throw new Error(`Length mismatch while decoding chunk ${n}`);this._checkCrc?z_(this,e+4,n):this.skip(4)}decodeIHDR(){const e=this._png;e.width=this.readUint32(),e.height=this.readUint32(),e.depth=hR(this.readUint8());const n=this.readUint8();this._colorType=n;let i;switch(n){case Gs.GREYSCALE:i=1;break;case Gs.TRUECOLOUR:i=3;break;case Gs.INDEXED_COLOUR:i=1;break;case Gs.GREYSCALE_ALPHA:i=2;break;case Gs.TRUECOLOUR_ALPHA:i=4;break;case Gs.UNKNOWN:default:throw new Error(`Unknown color type: ${n}`)}if(this._png.channels=i,this._compressionMethod=this.readUint8(),this._compressionMethod!==pv.DEFLATE)throw new Error(`Unsupported compression method: ${this._compressionMethod}`);this._filterMethod=this.readUint8(),this._interlaceMethod=this.readUint8()}decodeACTL(){this._numberOfFrames=this.readUint32(),this._numberOfPlays=this.readUint32(),this._isAnimated=!0}decodeFCTL(){const e={sequenceNumber:this.readUint32(),width:this.readUint32(),height:this.readUint32(),xOffset:this.readUint32(),yOffset:this.readUint32(),delayNumber:this.readUint16(),delayDenominator:this.readUint16(),disposeOp:this.readUint8(),blendOp:this.readUint8(),data:new Uint8Array(0)};this._frames.push(e)}decodePLTE(e){if(e%3!==0)throw new RangeError(`PLTE field length must be a multiple of 3. Got ${e}`);const n=e/3;this._hasPalette=!0;const i=[];this._palette=i;for(let r=0;r<n;r++)i.push([this.readUint8(),this.readUint8(),this.readUint8()])}decodeIDAT(e){this._writingDataChunks=!0;const n=e,i=this.offset+this.byteOffset;if(this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodeFDAT(e){this._writingDataChunks=!0;let n=e,i=this.offset+this.byteOffset;if(i+=4,n-=4,this._inflator.push(new Uint8Array(this.buffer,i,n)),this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);this.skip(e)}decodetRNS(e){switch(this._colorType){case Gs.GREYSCALE:case Gs.TRUECOLOUR:{if(e%2!==0)throw new RangeError(`tRNS chunk length must be a multiple of 2. Got ${e}`);if(e/2>this._png.width*this._png.height)throw new Error(`tRNS chunk contains more alpha values than there are pixels (${e/2} vs ${this._png.width*this._png.height})`);this._hasTransparency=!0,this._transparency=new Uint16Array(e/2);for(let n=0;n<e/2;n++)this._transparency[n]=this.readUint16();break}case Gs.INDEXED_COLOUR:{if(e>this._palette.length)throw new Error(`tRNS chunk contains more alpha values than there are palette colors (${e} vs ${this._palette.length})`);let n=0;for(;n<e;n++){const i=this.readByte();this._palette[n].push(i)}for(;n<this._palette.length;n++)this._palette[n].push(255);break}case Gs.UNKNOWN:case Gs.GREYSCALE_ALPHA:case Gs.TRUECOLOUR_ALPHA:default:throw new Error(`tRNS chunk is not supported for color type ${this._colorType}`)}}decodeiCCP(e){const n=eS(this),i=this.readUint8();if(i!==pv.DEFLATE)throw new Error(`Unsupported iCCP compression method: ${i}`);const r=this.readBytes(e-n.length-2);this._png.iccEmbeddedProfile={name:n,profile:qk(r)}}decodepHYs(){const e=this.readUint32(),n=this.readUint32(),i=this.readByte();this._png.resolution={x:e,y:n,unit:i}}decodeApngImage(){this._apng.width=this._png.width,this._apng.height=this._png.height,this._apng.channels=this._png.channels,this._apng.depth=this._png.depth,this._apng.numberOfFrames=this._numberOfFrames,this._apng.numberOfPlays=this._numberOfPlays,this._apng.text=this._png.text,this._apng.resolution=this._png.resolution;for(let e=0;e<this._numberOfFrames;e++){const n={sequenceNumber:this._frames[e].sequenceNumber,delayNumber:this._frames[e].delayNumber,delayDenominator:this._frames[e].delayDenominator,data:this._apng.depth===8?new Uint8Array(this._apng.width*this._apng.height*this._apng.channels):new Uint16Array(this._apng.width*this._apng.height*this._apng.channels)},i=this._frames.at(e);if(i){if(i.data=B_({data:i.data,width:i.width,height:i.height,channels:this._apng.channels,depth:this._apng.depth}),this._hasPalette&&(this._apng.palette=this._palette),this._hasTransparency&&(this._apng.transparency=this._transparency),e===0||i.xOffset===0&&i.yOffset===0&&i.width===this._png.width&&i.height===this._png.height)n.data=i.data;else{const r=this._apng.frames.at(e-1);this.disposeFrame(i,r,n),this.addFrameDataToCanvas(n,i)}this._apng.frames.push(n)}}return this._apng}disposeFrame(e,n,i){switch(e.disposeOp){case tp.NONE:break;case tp.BACKGROUND:for(let r=0;r<this._png.height;r++)for(let a=0;a<this._png.width;a++){const l=(r*e.width+a)*this._png.channels;for(let d=0;d<this._png.channels;d++)i.data[l+d]=0}break;case tp.PREVIOUS:i.data.set(n.data);break;default:throw new Error("Unknown disposeOp")}}addFrameDataToCanvas(e,n){const i=1<<this._png.depth,r=(a,l)=>{const d=((a+n.yOffset)*this._png.width+n.xOffset+l)*this._png.channels,p=(a*n.width+l)*this._png.channels;return{index:d,frameIndex:p}};switch(n.blendOp){case mv.SOURCE:for(let a=0;a<n.height;a++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:p}=r(a,l);for(let g=0;g<this._png.channels;g++)e.data[d+g]=n.data[p+g]}break;case mv.OVER:for(let a=0;a<n.height;a++)for(let l=0;l<n.width;l++){const{index:d,frameIndex:p}=r(a,l);for(let g=0;g<this._png.channels;g++){const m=n.data[p+this._png.channels-1]/i,_=g%(this._png.channels-1)===0?1:n.data[p+g],A=Math.floor(m*_+(1-m)*e.data[d+g]);e.data[d+g]+=A}}break;default:throw new Error("Unknown blendOp")}}decodeImage(){if(this._inflator.err)throw new Error(`Error while decompressing the data: ${this._inflator.err}`);const e=this._isAnimated?(this._frames?.at(0)).data:this._inflator.result;if(this._filterMethod!==U_.ADAPTIVE)throw new Error(`Filter method ${this._filterMethod} not supported`);if(this._interlaceMethod===gv.NO_INTERLACE)this._png.data=B_({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else if(this._interlaceMethod===gv.ADAM7)this._png.data=Qk({data:e,width:this._png.width,height:this._png.height,channels:this._png.channels,depth:this._png.depth});else throw new Error(`Interlace method ${this._interlaceMethod} not supported`);this._hasPalette&&(this._png.palette=this._palette),this._hasTransparency&&(this._png.transparency=this._transparency)}pushDataToFrame(){const e=this._inflator.result,n=this._frames.at(-1);n?n.data=e:this._frames.push({sequenceNumber:0,width:this._png.width,height:this._png.height,xOffset:0,yOffset:0,delayNumber:0,delayDenominator:0,disposeOp:tp.NONE,blendOp:mv.SOURCE,data:e}),this._inflator=new P_,this._writingDataChunks=!1}}function hR(t){if(t!==1&&t!==2&&t!==4&&t!==8&&t!==16)throw new Error(`invalid bit depth: ${t}`);return t}var H_;(function(t){t[t.UNKNOWN=0]="UNKNOWN",t[t.METRE=1]="METRE"})(H_||(H_={}));function pR(t,e){return new fR(t,e).decode()}var Wn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function vv(){Wn.console&&typeof Wn.console.log=="function"&&Wn.console.log.apply(Wn.console,arguments)}var br={log:vv,warn:function(t){Wn.console&&(typeof Wn.console.warn=="function"?Wn.console.warn.apply(Wn.console,arguments):vv.call(null,arguments))},error:function(t){Wn.console&&(typeof Wn.console.error=="function"?Wn.console.error.apply(Wn.console,arguments):vv(t))}};function yv(t,e,n){var i=new XMLHttpRequest;i.open("GET",t),i.responseType="blob",i.onload=function(){mu(i.response,e,n)},i.onerror=function(){br.error("could not download file")},i.send()}function q_(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch{}return e.status>=200&&e.status<=299}function np(t){try{t.dispatchEvent(new MouseEvent("click"))}catch{var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var mu=Wn.saveAs||((typeof window>"u"?"undefined":tr(window))!=="object"||window!==Wn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(t,e,n){var i=Wn.URL||Wn.webkitURL,r=document.createElement("a");e=e||t.name||"download",r.download=e,r.rel="noopener",typeof t=="string"?(r.href=t,r.origin!==location.origin?q_(r.href)?yv(t,e,n):np(r,r.target="_blank"):np(r)):(r.href=i.createObjectURL(t),setTimeout(function(){i.revokeObjectURL(r.href)},4e4),setTimeout(function(){np(r)},0))}:"msSaveOrOpenBlob"in navigator?function(t,e,n){if(e=e||t.name||"download",typeof t=="string")if(q_(t))yv(t,e,n);else{var i=document.createElement("a");i.href=t,i.target="_blank",setTimeout(function(){np(i)})}else navigator.msSaveOrOpenBlob((function(r,a){return a===void 0?a={autoBom:!1}:tr(a)!=="object"&&(br.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(r.type)?new Blob(["\uFEFF",r],{type:r.type}):r})(t,n),e)}:function(t,e,n,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof t=="string")return yv(t,e,n);var r=t.type==="application/octet-stream",a=/constructor/i.test(Wn.HTMLElement)||Wn.safari,l=/CriOS\/[\d]+/.test(navigator.userAgent);if((l||r&&a)&&(typeof FileReader>"u"?"undefined":tr(FileReader))==="object"){var d=new FileReader;d.onloadend=function(){var m=d.result;m=l?m:m.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=m:location=m,i=null},d.readAsDataURL(t)}else{var p=Wn.URL||Wn.webkitURL,g=p.createObjectURL(t);i?i.location=g:location.href=g,i=null,setTimeout(function(){p.revokeObjectURL(g)},4e4)}});function tS(t){var e;t=t||"",this.ok=!1,t.charAt(0)=="#"&&(t=t.substr(1,6)),t={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(d){return[parseInt(d[1]),parseInt(d[2]),parseInt(d[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(d){return[parseInt(d[1],16),parseInt(d[2],16),parseInt(d[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(d){return[parseInt(d[1]+d[1],16),parseInt(d[2]+d[2],16),parseInt(d[3]+d[3],16)]}}],i=0;i<n.length;i++){var r=n[i].re,a=n[i].process,l=r.exec(t);l&&(e=a(l),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var d=this.r.toString(16),p=this.g.toString(16),g=this.b.toString(16);return d.length==1&&(d="0"+d),p.length==1&&(p="0"+p),g.length==1&&(g="0"+g),"#"+d+p+g}}var wp=Wn.atob.bind(Wn),W_=Wn.btoa.bind(Wn);function xv(t,e){var n=t[0],i=t[1],r=t[2],a=t[3];n=Vo(n,i,r,a,e[0],7,-680876936),a=Vo(a,n,i,r,e[1],12,-389564586),r=Vo(r,a,n,i,e[2],17,606105819),i=Vo(i,r,a,n,e[3],22,-1044525330),n=Vo(n,i,r,a,e[4],7,-176418897),a=Vo(a,n,i,r,e[5],12,1200080426),r=Vo(r,a,n,i,e[6],17,-1473231341),i=Vo(i,r,a,n,e[7],22,-45705983),n=Vo(n,i,r,a,e[8],7,1770035416),a=Vo(a,n,i,r,e[9],12,-1958414417),r=Vo(r,a,n,i,e[10],17,-42063),i=Vo(i,r,a,n,e[11],22,-1990404162),n=Vo(n,i,r,a,e[12],7,1804603682),a=Vo(a,n,i,r,e[13],12,-40341101),r=Vo(r,a,n,i,e[14],17,-1502002290),n=Yo(n,i=Vo(i,r,a,n,e[15],22,1236535329),r,a,e[1],5,-165796510),a=Yo(a,n,i,r,e[6],9,-1069501632),r=Yo(r,a,n,i,e[11],14,643717713),i=Yo(i,r,a,n,e[0],20,-373897302),n=Yo(n,i,r,a,e[5],5,-701558691),a=Yo(a,n,i,r,e[10],9,38016083),r=Yo(r,a,n,i,e[15],14,-660478335),i=Yo(i,r,a,n,e[4],20,-405537848),n=Yo(n,i,r,a,e[9],5,568446438),a=Yo(a,n,i,r,e[14],9,-1019803690),r=Yo(r,a,n,i,e[3],14,-187363961),i=Yo(i,r,a,n,e[8],20,1163531501),n=Yo(n,i,r,a,e[13],5,-1444681467),a=Yo(a,n,i,r,e[2],9,-51403784),r=Yo(r,a,n,i,e[7],14,1735328473),n=Zo(n,i=Yo(i,r,a,n,e[12],20,-1926607734),r,a,e[5],4,-378558),a=Zo(a,n,i,r,e[8],11,-2022574463),r=Zo(r,a,n,i,e[11],16,1839030562),i=Zo(i,r,a,n,e[14],23,-35309556),n=Zo(n,i,r,a,e[1],4,-1530992060),a=Zo(a,n,i,r,e[4],11,1272893353),r=Zo(r,a,n,i,e[7],16,-155497632),i=Zo(i,r,a,n,e[10],23,-1094730640),n=Zo(n,i,r,a,e[13],4,681279174),a=Zo(a,n,i,r,e[0],11,-358537222),r=Zo(r,a,n,i,e[3],16,-722521979),i=Zo(i,r,a,n,e[6],23,76029189),n=Zo(n,i,r,a,e[9],4,-640364487),a=Zo(a,n,i,r,e[12],11,-421815835),r=Zo(r,a,n,i,e[15],16,530742520),n=Ko(n,i=Zo(i,r,a,n,e[2],23,-995338651),r,a,e[0],6,-198630844),a=Ko(a,n,i,r,e[7],10,1126891415),r=Ko(r,a,n,i,e[14],15,-1416354905),i=Ko(i,r,a,n,e[5],21,-57434055),n=Ko(n,i,r,a,e[12],6,1700485571),a=Ko(a,n,i,r,e[3],10,-1894986606),r=Ko(r,a,n,i,e[10],15,-1051523),i=Ko(i,r,a,n,e[1],21,-2054922799),n=Ko(n,i,r,a,e[8],6,1873313359),a=Ko(a,n,i,r,e[15],10,-30611744),r=Ko(r,a,n,i,e[6],15,-1560198380),i=Ko(i,r,a,n,e[13],21,1309151649),n=Ko(n,i,r,a,e[4],6,-145523070),a=Ko(a,n,i,r,e[11],10,-1120210379),r=Ko(r,a,n,i,e[2],15,718787259),i=Ko(i,r,a,n,e[9],21,-343485551),t[0]=Kc(n,t[0]),t[1]=Kc(i,t[1]),t[2]=Kc(r,t[2]),t[3]=Kc(a,t[3])}function xg(t,e,n,i,r,a){return e=Kc(Kc(e,t),Kc(i,a)),Kc(e<<r|e>>>32-r,n)}function Vo(t,e,n,i,r,a,l){return xg(e&n|~e&i,t,e,r,a,l)}function Yo(t,e,n,i,r,a,l){return xg(e&i|n&~i,t,e,r,a,l)}function Zo(t,e,n,i,r,a,l){return xg(e^n^i,t,e,r,a,l)}function Ko(t,e,n,i,r,a,l){return xg(n^(e|~i),t,e,r,a,l)}function nS(t){var e,n=t.length,i=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)xv(i,gR(t.substring(e-64,e)));t=t.substring(e-64);var r=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)r[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(r[e>>2]|=128<<(e%4<<3),e>55)for(xv(i,r),e=0;e<16;e++)r[e]=0;return r[14]=8*n,xv(i,r),i}function gR(t){var e,n=[];for(e=0;e<64;e+=4)n[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return n}var G_="0123456789abcdef".split("");function mR(t){for(var e="",n=0;n<4;n++)e+=G_[t>>8*n+4&15]+G_[t>>8*n&15];return e}function vR(t){return String.fromCharCode(255&t,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function hy(t){return nS(t).map(vR).join("")}var yR=(function(t){for(var e=0;e<t.length;e++)t[e]=mR(t[e]);return t.join("")})(nS("hello"))!="5d41402abc4b2a76b9719d911017c592";function Kc(t,e){if(yR){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}return t+e&4294967295}function py(t,e){var n,i,r,a;if(t!==n){for(var l=(r=t,a=1+(256/t.length|0),new Array(a+1).join(r)),d=[],p=0;p<256;p++)d[p]=p;var g=0;for(p=0;p<256;p++){var m=d[p];g=(g+m+l.charCodeAt(p))%256,d[p]=d[g],d[g]=m}n=t,i=d}else d=i;var _=e.length,A=0,x=0,R="";for(p=0;p<_;p++)x=(x+(m=d[A=(A+1)%256]))%256,d[A]=d[x],d[x]=m,l=d[(d[A]+d[x])%256],R+=String.fromCharCode(e.charCodeAt(p)^l);return R}var V_={print:4,modify:8,copy:16,"annot-forms":32};function gd(t,e,n,i){this.v=1,this.r=2;var r=192;t.forEach(function(d){if(V_.perm!==void 0)throw new Error("Invalid permission: "+d);r+=V_[d]}),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var a=(e+this.padding).substr(0,32),l=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,l),this.P=-(1+(255^r)),this.encryptionKey=hy(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=py(this.encryptionKey,this.padding)}function md(t){if(/[^\u0000-\u00ff]/.test(t))throw new Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",n=t.length,i=0;i<n;i++){var r=t.charCodeAt(i);e+=r<33||r===35||r===37||r===40||r===41||r===47||r===60||r===62||r===91||r===93||r===123||r===125||r>126?"#"+("0"+r.toString(16)).slice(-2):t[i]}return e}function Y_(t){if(tr(t)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var e={};this.subscribe=function(n,i,r){if(r=r||!1,typeof n!="string"||typeof i!="function"||typeof r!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");e.hasOwnProperty(n)||(e[n]={});var a=Math.random().toString(35);return e[n][a]=[i,!!r],a},this.unsubscribe=function(n){for(var i in e)if(e[i][n])return delete e[i][n],Object.keys(e[i]).length===0&&delete e[i],!0;return!1},this.publish=function(n){if(e.hasOwnProperty(n)){var i=Array.prototype.slice.call(arguments,1),r=[];for(var a in e[n]){var l=e[n][a];try{l[0].apply(t,i)}catch(d){Wn.console&&br.error("jsPDF PubSub Error",d.message,d)}l[1]&&r.push(a)}r.length&&r.forEach(this.unsubscribe)}},this.getTopics=function(){return e}}function Fp(t){if(!(this instanceof Fp))return new Fp(t);var e="opacity,stroke-opacity".split(",");for(var n in t)t.hasOwnProperty(n)&&e.indexOf(n)>=0&&(this[n]=t[n]);this.id="",this.objectNumber=-1}function iS(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function xu(t,e,n,i,r){if(!(this instanceof xu))return new xu(t,e,n,i,r);this.type=t==="axial"?2:3,this.coords=e,this.colors=n,iS.call(this,i,r)}function yd(t,e,n,i,r){if(!(this instanceof yd))return new yd(t,e,n,i,r);this.boundingBox=t,this.xStep=e,this.yStep=n,this.stream="",this.cloneIndex=0,iS.call(this,i,r)}function mn(t){var e,n=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],r=arguments[2],a=arguments[3],l=[],d=1,p=16,g="S",m=null;tr(t=t||{})==="object"&&(n=t.orientation,i=t.unit||i,r=t.format||r,a=t.compress||t.compressPdf||a,(m=t.encryption||null)!==null&&(m.userPassword=m.userPassword||"",m.ownerPassword=m.ownerPassword||"",m.userPermissions=m.userPermissions||[]),d=typeof t.userUnit=="number"?Math.abs(t.userUnit):1,t.precision!==void 0&&(e=t.precision),t.floatPrecision!==void 0&&(p=t.floatPrecision),g=t.defaultPathOperation||"S"),l=t.filters||(a===!0?["FlateEncode"]:l),i=i||"mm",n=(""+(n||"P")).toLowerCase();var _=t.putOnlyUsedFonts||!1,A={},x={internal:{},__private__:{}};x.__private__.PubSub=Y_;var R="1.3",M=x.__private__.getPdfVersion=function(){return R};x.__private__.setPdfVersion=function(D){R=D};var k={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};x.__private__.getPageFormats=function(){return k};var I=x.__private__.getPageFormat=function(D){return k[D]};r=r||"a4";var Y="compat",B="advanced",V=Y;function ee(){this.saveGraphicsState(),ye(new nn(En,0,0,-En,0,xo()*En).toString()+" cm"),this.setFontSize(this.getFontSize()/En),g="n",V=B}function ue(){this.restoreGraphicsState(),g="S",V=Y}var _e=x.__private__.combineFontStyleAndFontWeight=function(D,K){if(D=="bold"&&K=="normal"||D=="bold"&&K==400||D=="normal"&&K=="italic"||D=="bold"&&K=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return K&&(D=K==400||K==="normal"?D==="italic"?"italic":"normal":K!=700&&K!=="bold"||D!=="normal"?(K==700?"bold":K)+""+D:"bold"),D};x.advancedAPI=function(D){var K=V===Y;return K&&ee.call(this),typeof D!="function"||(D(this),K&&ue.call(this)),this},x.compatAPI=function(D){var K=V===B;return K&&ue.call(this),typeof D!="function"||(D(this),K&&ee.call(this)),this},x.isAdvancedAPI=function(){return V===B};var fe,G=function(D){if(V!==B)throw new Error(D+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},me=x.roundToPrecision=x.__private__.roundToPrecision=function(D,K){var we=e||K;if(isNaN(D)||isNaN(we))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return D.toFixed(we).replace(/0+$/,"")};fe=x.hpf=x.__private__.hpf=typeof p=="number"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return me(D,p)}:p==="smart"?function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return me(D,D>-1&&D<1?16:5)}:function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.hpf");return me(D,16)};var Z=x.f2=x.__private__.f2=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f2");return me(D,2)},J=x.__private__.f3=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.f3");return me(D,3)},Se=x.scale=x.__private__.scale=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.scale");return V===Y?D*En:V===B?D:void 0},Ee=function(D){return Se((function(K){return V===Y?xo()-K:V===B?K:void 0})(D))};x.__private__.setPrecision=x.setPrecision=function(D){typeof parseInt(D,10)=="number"&&(e=parseInt(D,10))};var Ye,oe="00000000000000000000000000000000",ae=x.__private__.getFileId=function(){return oe},he=x.__private__.setFileId=function(D){return oe=D!==void 0&&/^[a-fA-F0-9]{32}$/.test(D)?D.toUpperCase():oe.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),m!==null&&(zi=new gd(m.userPermissions,m.userPassword,m.ownerPassword,oe)),oe};x.setFileId=function(D){return he(D),this},x.getFileId=function(){return ae()};var De=x.__private__.convertDateToPDFDate=function(D){var K=D.getTimezoneOffset(),we=K<0?"+":"-",Ie=Math.floor(Math.abs(K/60)),Ke=Math.abs(K%60),dt=[we,ce(Ie),"'",ce(Ke),"'"].join("");return["D:",D.getFullYear(),ce(D.getMonth()+1),ce(D.getDate()),ce(D.getHours()),ce(D.getMinutes()),ce(D.getSeconds()),dt].join("")},ze=x.__private__.convertPDFDateToDate=function(D){var K=parseInt(D.substr(2,4),10),we=parseInt(D.substr(6,2),10)-1,Ie=parseInt(D.substr(8,2),10),Ke=parseInt(D.substr(10,2),10),dt=parseInt(D.substr(12,2),10),wt=parseInt(D.substr(14,2),10);return new Date(K,we,Ie,Ke,dt,wt,0)},ne=x.__private__.setCreationDate=function(D){var K;if(D===void 0&&(D=new Date),D instanceof Date)K=De(D);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(D))throw new Error("Invalid argument passed to jsPDF.setCreationDate");K=D}return Ye=K},H=x.__private__.getCreationDate=function(D){var K=Ye;return D==="jsDate"&&(K=ze(Ye)),K};x.setCreationDate=function(D){return ne(D),this},x.getCreationDate=function(D){return H(D)};var te,ce=x.__private__.padd2=function(D){return("0"+parseInt(D)).slice(-2)},Q=x.__private__.padd2Hex=function(D){return("00"+(D=D.toString())).substr(D.length)},xe=0,Te=[],Le=[],Ge=0,Re=[],gt=[],mt=!1,Ot=Le;x.__private__.setCustomOutputDestination=function(D){mt=!0,Ot=D};var Kt=function(D){mt||(Ot=D)};x.__private__.resetCustomOutputDestination=function(){mt=!1,Ot=Le};var ye=x.__private__.out=function(D){return D=D.toString(),Ge+=D.length+1,Ot.push(D),Ot},Pt=x.__private__.write=function(D){return ye(arguments.length===1?D.toString():Array.prototype.join.call(arguments," "))},Dn=x.__private__.getArrayBuffer=function(D){for(var K=D.length,we=new ArrayBuffer(K),Ie=new Uint8Array(we);K--;)Ie[K]=D.charCodeAt(K);return we},dn=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];x.__private__.getStandardFonts=function(){return dn};var At=t.fontSize||16;x.__private__.setFontSize=x.setFontSize=function(D){return At=V===B?D/En:D,this};var sn,kt=x.__private__.getFontSize=x.getFontSize=function(){return V===Y?At:At*En},Yt=t.R2L||!1;x.__private__.setR2L=x.setR2L=function(D){return Yt=D,this},x.__private__.getR2L=x.getR2L=function(){return Yt};var Vt,xn=x.__private__.setZoomMode=function(D){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(D))sn=D;else if(isNaN(D)){if([void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(D)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+D+'" is not recognized.');sn=D}else sn=parseInt(D,10)};x.__private__.getZoomMode=function(){return sn};var kn,$t=x.__private__.setPageMode=function(D){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(D)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+D+'" is not recognized.');Vt=D};x.__private__.getPageMode=function(){return Vt};var Cn=x.__private__.setLayoutMode=function(D){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(D)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+D+'" is not recognized.');kn=D};x.__private__.getLayoutMode=function(){return kn},x.__private__.setDisplayMode=x.setDisplayMode=function(D,K,we){return xn(D),Cn(K),$t(we),this};var In={title:"",subject:"",author:"",keywords:"",creator:""};x.__private__.getDocumentProperty=function(D){if(Object.keys(In).indexOf(D)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return In[D]},x.__private__.getDocumentProperties=function(){return In},x.__private__.setDocumentProperties=x.setProperties=x.setDocumentProperties=function(D){for(var K in In)In.hasOwnProperty(K)&&D[K]&&(In[K]=D[K]);return this},x.__private__.setDocumentProperty=function(D,K){if(Object.keys(In).indexOf(D)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return In[D]=K};var Jt,En,en,Ni,Hn,hn={},gn={},Nt=[],tn={},ui={},vn={},vt={},yi=null,Pn=0,ln=[],ri=new Y_(x),Ya=t.hotfixes||[],ia={},zo={},Wr=[],nn=function D(K,we,Ie,Ke,dt,wt){if(!(this instanceof D))return new D(K,we,Ie,Ke,dt,wt);isNaN(K)&&(K=1),isNaN(we)&&(we=0),isNaN(Ie)&&(Ie=0),isNaN(Ke)&&(Ke=1),isNaN(dt)&&(dt=0),isNaN(wt)&&(wt=0),this._matrix=[K,we,Ie,Ke,dt,wt]};Object.defineProperty(nn.prototype,"sx",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(nn.prototype,"shy",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(nn.prototype,"shx",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(nn.prototype,"sy",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(nn.prototype,"tx",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(nn.prototype,"ty",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(nn.prototype,"a",{get:function(){return this._matrix[0]},set:function(D){this._matrix[0]=D}}),Object.defineProperty(nn.prototype,"b",{get:function(){return this._matrix[1]},set:function(D){this._matrix[1]=D}}),Object.defineProperty(nn.prototype,"c",{get:function(){return this._matrix[2]},set:function(D){this._matrix[2]=D}}),Object.defineProperty(nn.prototype,"d",{get:function(){return this._matrix[3]},set:function(D){this._matrix[3]=D}}),Object.defineProperty(nn.prototype,"e",{get:function(){return this._matrix[4]},set:function(D){this._matrix[4]=D}}),Object.defineProperty(nn.prototype,"f",{get:function(){return this._matrix[5]},set:function(D){this._matrix[5]=D}}),Object.defineProperty(nn.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(nn.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(nn.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(nn.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),nn.prototype.join=function(D){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(fe).join(D)},nn.prototype.multiply=function(D){var K=D.sx*this.sx+D.shy*this.shx,we=D.sx*this.shy+D.shy*this.sy,Ie=D.shx*this.sx+D.sy*this.shx,Ke=D.shx*this.shy+D.sy*this.sy,dt=D.tx*this.sx+D.ty*this.shx+this.tx,wt=D.tx*this.shy+D.ty*this.sy+this.ty;return new nn(K,we,Ie,Ke,dt,wt)},nn.prototype.decompose=function(){var D=this.sx,K=this.shy,we=this.shx,Ie=this.sy,Ke=this.tx,dt=this.ty,wt=Math.sqrt(D*D+K*K),Bt=(D/=wt)*we+(K/=wt)*Ie;we-=D*Bt,Ie-=K*Bt;var Zt=Math.sqrt(we*we+Ie*Ie);return Bt/=Zt,D*(Ie/=Zt)<K*(we/=Zt)&&(D=-D,K=-K,Bt=-Bt,wt=-wt),{scale:new nn(wt,0,0,Zt,0,0),translate:new nn(1,0,0,1,Ke,dt),rotate:new nn(D,K,-K,D,0,0),skew:new nn(1,0,Bt,1,0,0)}},nn.prototype.toString=function(D){return this.join(" ")},nn.prototype.inversed=function(){var D=this.sx,K=this.shy,we=this.shx,Ie=this.sy,Ke=this.tx,dt=this.ty,wt=1/(D*Ie-K*we),Bt=Ie*wt,Zt=-K*wt,yn=-we*wt,Mn=D*wt;return new nn(Bt,Zt,yn,Mn,-Bt*Ke-yn*dt,-Zt*Ke-Mn*dt)},nn.prototype.applyToPoint=function(D){var K=D.x*this.sx+D.y*this.shx+this.tx,we=D.x*this.shy+D.y*this.sy+this.ty;return new yo(K,we)},nn.prototype.applyToRectangle=function(D){var K=this.applyToPoint(D),we=this.applyToPoint(new yo(D.x+D.w,D.y+D.h));return new eo(K.x,K.y,we.x-K.x,we.y-K.y)},nn.prototype.clone=function(){var D=this.sx,K=this.shy,we=this.shx,Ie=this.sy,Ke=this.tx,dt=this.ty;return new nn(D,K,we,Ie,Ke,dt)},x.Matrix=nn;var Ao=x.matrixMult=function(D,K){return K.multiply(D)},Za=new nn(1,0,0,1,0,0);x.unitMatrix=x.identityMatrix=Za;var ei=function(D,K){if(!ui[D]){var we=(K instanceof xu?"Sh":"P")+(Object.keys(tn).length+1).toString(10);K.id=we,ui[D]=we,tn[we]=K,ri.publish("addPattern",K)}};x.ShadingPattern=xu,x.TilingPattern=yd,x.addShadingPattern=function(D,K){return G("addShadingPattern()"),ei(D,K),this},x.beginTilingPattern=function(D){G("beginTilingPattern()"),os(D.boundingBox[0],D.boundingBox[1],D.boundingBox[2]-D.boundingBox[0],D.boundingBox[3]-D.boundingBox[1],D.matrix)},x.endTilingPattern=function(D,K){G("endTilingPattern()"),K.stream=gt[te].join(`
`),ei(D,K),ri.publish("endTilingPattern",K),Wr.pop().restore()};var xi,si=x.__private__.newObject=function(){var D=Ut();return nr(D,!0),D},Ut=x.__private__.newObjectDeferred=function(){return xe++,Te[xe]=function(){return Ge},xe},nr=function(D,K){return K=typeof K=="boolean"&&K,Te[D]=Ge,K&&ye(D+" 0 obj"),D},fo=x.__private__.newAdditionalObject=function(){var D={objId:Ut(),content:""};return Re.push(D),D},ra=Ut(),ti=Ut(),bi=x.__private__.decodeColorString=function(D){var K=D.split(" ");if(K.length!==2||K[1]!=="g"&&K[1]!=="G")K.length!==5||K[4]!=="k"&&K[4]!=="K"||(K=[(1-K[0])*(1-K[3]),(1-K[1])*(1-K[3]),(1-K[2])*(1-K[3]),"r"]);else{var we=parseFloat(K[0]);K=[we,we,we,"r"]}for(var Ie="#",Ke=0;Ke<3;Ke++)Ie+=("0"+Math.floor(255*parseFloat(K[Ke])).toString(16)).slice(-2);return Ie},Zi=x.__private__.encodeColorString=function(D){var K;typeof D=="string"&&(D={ch1:D});var we=D.ch1,Ie=D.ch2,Ke=D.ch3,dt=D.ch4,wt=D.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof we=="string"&&we.charAt(0)!=="#"){var Bt=new tS(we);if(Bt.ok)we=Bt.toHex();else if(!/^\d*\.?\d*$/.test(we))throw new Error('Invalid color "'+we+'" passed to jsPDF.encodeColorString.')}if(typeof we=="string"&&/^#[0-9A-Fa-f]{3}$/.test(we)&&(we="#"+we[1]+we[1]+we[2]+we[2]+we[3]+we[3]),typeof we=="string"&&/^#[0-9A-Fa-f]{6}$/.test(we)){var Zt=parseInt(we.substr(1),16);we=Zt>>16&255,Ie=Zt>>8&255,Ke=255&Zt}if(Ie===void 0||dt===void 0&&we===Ie&&Ie===Ke)K=typeof we=="string"?we+" "+wt[0]:D.precision===2?Z(we/255)+" "+wt[0]:J(we/255)+" "+wt[0];else if(dt===void 0||tr(dt)==="object"){if(dt&&!isNaN(dt.a)&&dt.a===0)return["1.","1.","1.",wt[1]].join(" ");K=typeof we=="string"?[we,Ie,Ke,wt[1]].join(" "):D.precision===2?[Z(we/255),Z(Ie/255),Z(Ke/255),wt[1]].join(" "):[J(we/255),J(Ie/255),J(Ke/255),wt[1]].join(" ")}else K=typeof we=="string"?[we,Ie,Ke,dt,wt[2]].join(" "):D.precision===2?[Z(we),Z(Ie),Z(Ke),Z(dt),wt[2]].join(" "):[J(we),J(Ie),J(Ke),J(dt),wt[2]].join(" ");return K},pr=x.__private__.getFilters=function(){return l},Ka=x.__private__.putStream=function(D){var K=(D=D||{}).data||"",we=D.filters||pr(),Ie=D.alreadyAppliedFilters||[],Ke=D.addLength1||!1,dt=K.length,wt=D.objectId,Bt=function(mr){return mr};if(m!==null&&wt===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");m!==null&&(Bt=zi.encryptor(wt,0));var Zt={};we===!0&&(we=["FlateEncode"]);var yn=D.additionalKeyValues||[],Mn=(Zt=mn.API.processDataByFilters!==void 0?mn.API.processDataByFilters(K,we):{data:K,reverseChain:[]}).reverseChain+(Array.isArray(Ie)?Ie.join(" "):Ie.toString());if(Zt.data.length!==0&&(yn.push({key:"Length",value:Zt.data.length}),Ke===!0&&yn.push({key:"Length1",value:dt})),Mn.length!=0)if(Mn.split("/").length-1==1)yn.push({key:"Filter",value:Mn});else{yn.push({key:"Filter",value:"["+Mn+"]"});for(var Qn=0;Qn<yn.length;Qn+=1)if(yn[Qn].key==="DecodeParms"){for(var Ki=[],or=0;or<Zt.reverseChain.split("/").length-1;or+=1)Ki.push("null");Ki.push(yn[Qn].value),yn[Qn].value="["+Ki.join(" ")+"]"}}ye("<<");for(var pi=0;pi<yn.length;pi++)ye("/"+yn[pi].key+" "+yn[pi].value);ye(">>"),Zt.data.length!==0&&(ye("stream"),ye(Bt(Zt.data)),ye("endstream"))},Oa=x.__private__.putPage=function(D){var K=D.number,we=D.data,Ie=D.objId,Ke=D.contentsObjId;nr(Ie,!0),ye("<</Type /Page"),ye("/Parent "+D.rootDictionaryObjId+" 0 R"),ye("/Resources "+D.resourceDictionaryObjId+" 0 R"),ye("/MediaBox ["+parseFloat(fe(D.mediaBox.bottomLeftX))+" "+parseFloat(fe(D.mediaBox.bottomLeftY))+" "+fe(D.mediaBox.topRightX)+" "+fe(D.mediaBox.topRightY)+"]"),D.cropBox!==null&&ye("/CropBox ["+fe(D.cropBox.bottomLeftX)+" "+fe(D.cropBox.bottomLeftY)+" "+fe(D.cropBox.topRightX)+" "+fe(D.cropBox.topRightY)+"]"),D.bleedBox!==null&&ye("/BleedBox ["+fe(D.bleedBox.bottomLeftX)+" "+fe(D.bleedBox.bottomLeftY)+" "+fe(D.bleedBox.topRightX)+" "+fe(D.bleedBox.topRightY)+"]"),D.trimBox!==null&&ye("/TrimBox ["+fe(D.trimBox.bottomLeftX)+" "+fe(D.trimBox.bottomLeftY)+" "+fe(D.trimBox.topRightX)+" "+fe(D.trimBox.topRightY)+"]"),D.artBox!==null&&ye("/ArtBox ["+fe(D.artBox.bottomLeftX)+" "+fe(D.artBox.bottomLeftY)+" "+fe(D.artBox.topRightX)+" "+fe(D.artBox.topRightY)+"]"),typeof D.userUnit=="number"&&D.userUnit!==1&&ye("/UserUnit "+D.userUnit),ri.publish("putPage",{objId:Ie,pageContext:ln[K],pageNumber:K,page:we}),ye("/Contents "+Ke+" 0 R"),ye(">>"),ye("endobj");var dt=we.join(`
`);return V===B&&(dt+=`
Q`),nr(Ke,!0),Ka({data:dt,filters:pr(),objectId:Ke}),ye("endobj"),Ie},ho=x.__private__.putPages=function(){var D,K,we=[];for(D=1;D<=Pn;D++)ln[D].objId=Ut(),ln[D].contentsObjId=Ut();for(D=1;D<=Pn;D++)we.push(Oa({number:D,data:gt[D],objId:ln[D].objId,contentsObjId:ln[D].contentsObjId,mediaBox:ln[D].mediaBox,cropBox:ln[D].cropBox,bleedBox:ln[D].bleedBox,trimBox:ln[D].trimBox,artBox:ln[D].artBox,userUnit:ln[D].userUnit,rootDictionaryObjId:ra,resourceDictionaryObjId:ti}));nr(ra,!0),ye("<</Type /Pages");var Ie="/Kids [";for(K=0;K<Pn;K++)Ie+=we[K]+" 0 R ";ye(Ie+"]"),ye("/Count "+Pn),ye(">>"),ye("endobj"),ri.publish("postPutPages")},Gr=function(D){ri.publish("putFont",{font:D,out:ye,newObject:si,putStream:Ka}),D.isAlreadyPutted!==!0&&(D.objectNumber=si(),ye("<<"),ye("/Type /Font"),ye("/BaseFont /"+md(D.postScriptName)),ye("/Subtype /Type1"),typeof D.encoding=="string"&&ye("/Encoding /"+D.encoding),ye("/FirstChar 32"),ye("/LastChar 255"),ye(">>"),ye("endobj"))},Jo=function(D){D.objectNumber=si();var K=[];K.push({key:"Type",value:"/XObject"}),K.push({key:"Subtype",value:"/Form"}),K.push({key:"BBox",value:"["+[fe(D.x),fe(D.y),fe(D.x+D.width),fe(D.y+D.height)].join(" ")+"]"}),K.push({key:"Matrix",value:"["+D.matrix.toString()+"]"});var we=D.pages[1].join(`
`);Ka({data:we,additionalKeyValues:K,objectId:D.objectNumber}),ye("endobj")},Pa=function(D,K){K||(K=21);var we=si(),Ie=(function(wt,Bt){var Zt,yn=[],Mn=1/(Bt-1);for(Zt=0;Zt<1;Zt+=Mn)yn.push(Zt);if(yn.push(1),wt[0].offset!=0){var Qn={offset:0,color:wt[0].color};wt.unshift(Qn)}if(wt[wt.length-1].offset!=1){var Ki={offset:1,color:wt[wt.length-1].color};wt.push(Ki)}for(var or="",pi=0,mr=0;mr<yn.length;mr++){for(Zt=yn[mr];Zt>wt[pi+1].offset;)pi++;var Di=wt[pi].offset,_r=(Zt-Di)/(wt[pi+1].offset-Di),Ba=wt[pi].color,wr=wt[pi+1].color;or+=Q(Math.round((1-_r)*Ba[0]+_r*wr[0]).toString(16))+Q(Math.round((1-_r)*Ba[1]+_r*wr[1]).toString(16))+Q(Math.round((1-_r)*Ba[2]+_r*wr[2]).toString(16))}return or.trim()})(D.colors,K),Ke=[];Ke.push({key:"FunctionType",value:"0"}),Ke.push({key:"Domain",value:"[0.0 1.0]"}),Ke.push({key:"Size",value:"["+K+"]"}),Ke.push({key:"BitsPerSample",value:"8"}),Ke.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ke.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Ka({data:Ie,additionalKeyValues:Ke,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:we}),ye("endobj"),D.objectNumber=si(),ye("<< /ShadingType "+D.type),ye("/ColorSpace /DeviceRGB");var dt="/Coords ["+fe(parseFloat(D.coords[0]))+" "+fe(parseFloat(D.coords[1]))+" ";D.type===2?dt+=fe(parseFloat(D.coords[2]))+" "+fe(parseFloat(D.coords[3])):dt+=fe(parseFloat(D.coords[2]))+" "+fe(parseFloat(D.coords[3]))+" "+fe(parseFloat(D.coords[4]))+" "+fe(parseFloat(D.coords[5])),ye(dt+="]"),D.matrix&&ye("/Matrix ["+D.matrix.toString()+"]"),ye("/Function "+we+" 0 R"),ye("/Extend [true true]"),ye(">>"),ye("endobj")},hi=function(D,K){var we=Ut(),Ie=si();K.push({resourcesOid:we,objectOid:Ie}),D.objectNumber=Ie;var Ke=[];Ke.push({key:"Type",value:"/Pattern"}),Ke.push({key:"PatternType",value:"1"}),Ke.push({key:"PaintType",value:"1"}),Ke.push({key:"TilingType",value:"1"}),Ke.push({key:"BBox",value:"["+D.boundingBox.map(fe).join(" ")+"]"}),Ke.push({key:"XStep",value:fe(D.xStep)}),Ke.push({key:"YStep",value:fe(D.yStep)}),Ke.push({key:"Resources",value:we+" 0 R"}),D.matrix&&Ke.push({key:"Matrix",value:"["+D.matrix.toString()+"]"}),Ka({data:D.stream,additionalKeyValues:Ke,objectId:D.objectNumber}),ye("endobj")},aa=function(D){for(var K in D.objectNumber=si(),ye("<<"),D)switch(K){case"opacity":ye("/ca "+Z(D[K]));break;case"stroke-opacity":ye("/CA "+Z(D[K]))}ye(">>"),ye("endobj")},Or=function(D){nr(D.resourcesOid,!0),ye("<<"),ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),(function(){for(var K in ye("/Font <<"),hn)hn.hasOwnProperty(K)&&(_===!1||_===!0&&A.hasOwnProperty(K))&&ye("/"+K+" "+hn[K].objectNumber+" 0 R");ye(">>")})(),(function(){if(Object.keys(tn).length>0){for(var K in ye("/Shading <<"),tn)tn.hasOwnProperty(K)&&tn[K]instanceof xu&&tn[K].objectNumber>=0&&ye("/"+K+" "+tn[K].objectNumber+" 0 R");ri.publish("putShadingPatternDict"),ye(">>")}})(),(function(K){if(Object.keys(tn).length>0){for(var we in ye("/Pattern <<"),tn)tn.hasOwnProperty(we)&&tn[we]instanceof x.TilingPattern&&tn[we].objectNumber>=0&&tn[we].objectNumber<K&&ye("/"+we+" "+tn[we].objectNumber+" 0 R");ri.publish("putTilingPatternDict"),ye(">>")}})(D.objectOid),(function(){if(Object.keys(vn).length>0){var K;for(K in ye("/ExtGState <<"),vn)vn.hasOwnProperty(K)&&vn[K].objectNumber>=0&&ye("/"+K+" "+vn[K].objectNumber+" 0 R");ri.publish("putGStateDict"),ye(">>")}})(),(function(){for(var K in ye("/XObject <<"),ia)ia.hasOwnProperty(K)&&ia[K].objectNumber>=0&&ye("/"+K+" "+ia[K].objectNumber+" 0 R");ri.publish("putXobjectDict"),ye(">>")})(),ye(">>"),ye("endobj")},ir=function(D){gn[D.fontName]=gn[D.fontName]||{},gn[D.fontName][D.fontStyle]=D.id},Bo=function(D,K,we,Ie,Ke){var dt={id:"F"+(Object.keys(hn).length+1).toString(10),postScriptName:D,fontName:K,fontStyle:we,encoding:Ie,isStandardFont:Ke||!1,metadata:{}};return ri.publish("addFont",{font:dt,instance:this}),hn[dt.id]=dt,ir(dt),dt.id},oa=x.__private__.pdfEscape=x.pdfEscape=function(D,K){return(function(we,Ie){var Ke,dt,wt,Bt,Zt,yn,Mn,Qn,Ki;if(wt=(Ie=Ie||{}).sourceEncoding||"Unicode",Zt=Ie.outputEncoding,(Ie.autoencode||Zt)&&hn[Jt].metadata&&hn[Jt].metadata[wt]&&hn[Jt].metadata[wt].encoding&&(Bt=hn[Jt].metadata[wt].encoding,!Zt&&hn[Jt].encoding&&(Zt=hn[Jt].encoding),!Zt&&Bt.codePages&&(Zt=Bt.codePages[0]),typeof Zt=="string"&&(Zt=Bt[Zt]),Zt)){for(Mn=!1,yn=[],Ke=0,dt=we.length;Ke<dt;Ke++)(Qn=Zt[we.charCodeAt(Ke)])?yn.push(String.fromCharCode(Qn)):yn.push(we[Ke]),yn[Ke].charCodeAt(0)>>8&&(Mn=!0);we=yn.join("")}for(Ke=we.length;Mn===void 0&&Ke!==0;)we.charCodeAt(Ke-1)>>8&&(Mn=!0),Ke--;if(!Mn)return we;for(yn=Ie.noBOM?[]:[254,255],Ke=0,dt=we.length;Ke<dt;Ke++){if((Ki=(Qn=we.charCodeAt(Ke))>>8)>>8)throw new Error("Character at position "+Ke+" of string '"+we+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");yn.push(Ki),yn.push(Qn-(Ki<<8))}return String.fromCharCode.apply(void 0,yn)})(D,K).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Xa=x.__private__.beginPage=function(D){gt[++Pn]=[],ln[Pn]={objId:0,contentsObjId:0,userUnit:Number(d),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(D[0]),topRightY:Number(D[1])}},Ns(Pn),Kt(gt[te])},Qa=function(D,K){var we,Ie,Ke;switch(n=K||n,typeof D=="string"&&(we=I(D.toLowerCase()),Array.isArray(we)&&(Ie=we[0],Ke=we[1])),Array.isArray(D)&&(Ie=D[0]*En,Ke=D[1]*En),isNaN(Ie)&&(Ie=r[0],Ke=r[1]),(Ie>14400||Ke>14400)&&(br.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),Ie=Math.min(14400,Ie),Ke=Math.min(14400,Ke)),r=[Ie,Ke],n.substr(0,1)){case"l":Ke>Ie&&(r=[Ke,Ie]);break;case"p":Ie>Ke&&(r=[Ke,Ie])}Xa(r),Ct(Fo),ye(Kr),Qs!==0&&ye(Qs+" J"),Qi!==0&&ye(Qi+" j"),ri.publish("addPage",{pageNumber:Pn})},va=function(D){D>0&&D<=Pn&&(gt.splice(D,1),ln.splice(D,1),Pn--,te>Pn&&(te=Pn),this.setPage(te))},Ns=function(D){D>0&&D<=Pn&&(te=D)},es=x.__private__.getNumberOfPages=x.getNumberOfPages=function(){return gt.length-1},ts=function(D,K,we){var Ie,Ke=void 0;return we=we||{},D=D!==void 0?D:hn[Jt].fontName,K=K!==void 0?K:hn[Jt].fontStyle,Ie=D.toLowerCase(),gn[Ie]!==void 0&&gn[Ie][K]!==void 0?Ke=gn[Ie][K]:gn[D]!==void 0&&gn[D][K]!==void 0?Ke=gn[D][K]:we.disableWarning===!1&&br.warn("Unable to look up font label for font '"+D+"', '"+K+"'. Refer to getFontList() for available fonts."),Ke||we.noFallback||(Ke=gn.times[K])==null&&(Ke=gn.times.normal),Ke},Ht=x.__private__.putInfo=function(){var D=si(),K=function(Ie){return Ie};for(var we in m!==null&&(K=zi.encryptor(D,0)),ye("<<"),ye("/Producer ("+oa(K("jsPDF "+mn.version))+")"),In)In.hasOwnProperty(we)&&In[we]&&ye("/"+we.substr(0,1).toUpperCase()+we.substr(1)+" ("+oa(K(In[we]))+")");ye("/CreationDate ("+oa(K(Ye))+")"),ye(">>"),ye("endobj")},di=x.__private__.putCatalog=function(D){var K=(D=D||{}).rootDictionaryObjId||ra;switch(si(),ye("<<"),ye("/Type /Catalog"),ye("/Pages "+K+" 0 R"),sn||(sn="fullwidth"),sn){case"fullwidth":ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":ye("/OpenAction [3 0 R /Fit]");break;case"original":ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var we=""+sn;we.substr(we.length-1)==="%"&&(sn=parseInt(sn)/100),typeof sn=="number"&&ye("/OpenAction [3 0 R /XYZ null null "+Z(sn)+"]")}switch(kn||(kn="continuous"),kn){case"continuous":ye("/PageLayout /OneColumn");break;case"single":ye("/PageLayout /SinglePage");break;case"two":case"twoleft":ye("/PageLayout /TwoColumnLeft");break;case"tworight":ye("/PageLayout /TwoColumnRight")}Vt&&ye("/PageMode /"+Vt),ri.publish("putCatalog"),ye(">>"),ye("endobj")},ya=x.__private__.putTrailer=function(){ye("trailer"),ye("<<"),ye("/Size "+(xe+1)),ye("/Root "+xe+" 0 R"),ye("/Info "+(xe-1)+" 0 R"),m!==null&&ye("/Encrypt "+zi.oid+" 0 R"),ye("/ID [ <"+oe+"> <"+oe+"> ]"),ye(">>")},Gn=x.__private__.putHeader=function(){ye("%PDF-"+R),ye("%")},Ia=x.__private__.putXRef=function(){var D="0000000000";ye("xref"),ye("0 "+(xe+1)),ye("0000000000 65535 f ");for(var K=1;K<=xe;K++)typeof Te[K]=="function"?ye((D+Te[K]()).slice(-10)+" 00000 n "):Te[K]!==void 0?ye((D+Te[K]).slice(-10)+" 00000 n "):ye("0000000000 00000 n ")},$a=x.__private__.buildDocument=function(){var D;xe=0,Ge=0,Le=[],Te=[],Re=[],ra=Ut(),ti=Ut(),Kt(Le),ri.publish("buildDocument"),Gn(),ho(),(function(){ri.publish("putAdditionalObjects");for(var we=0;we<Re.length;we++){var Ie=Re[we];nr(Ie.objId,!0),ye(Ie.content),ye("endobj")}ri.publish("postPutAdditionalObjects")})(),D=[],(function(){for(var we in hn)hn.hasOwnProperty(we)&&(_===!1||_===!0&&A.hasOwnProperty(we))&&Gr(hn[we])})(),(function(){var we;for(we in vn)vn.hasOwnProperty(we)&&aa(vn[we])})(),(function(){for(var we in ia)ia.hasOwnProperty(we)&&Jo(ia[we])})(),(function(we){var Ie;for(Ie in tn)tn.hasOwnProperty(Ie)&&(tn[Ie]instanceof xu?Pa(tn[Ie]):tn[Ie]instanceof yd&&hi(tn[Ie],we))})(D),ri.publish("putResources"),D.forEach(Or),Or({resourcesOid:ti,objectOid:Number.MAX_SAFE_INTEGER}),ri.publish("postPutResources"),m!==null&&(zi.oid=si(),ye("<<"),ye("/Filter /Standard"),ye("/V "+zi.v),ye("/R "+zi.r),ye("/U <"+zi.toHexString(zi.U)+">"),ye("/O <"+zi.toHexString(zi.O)+">"),ye("/P "+zi.P),ye(">>"),ye("endobj")),Ht(),di();var K=Ge;return Ia(),ya(),ye("startxref"),ye(""+K),ye("%%EOF"),Kt(gt[te]),Le.join(`
`)},Sn=x.__private__.getBlob=function(D){return new Blob([Dn(D)],{type:"application/pdf"})},Ii=x.output=x.__private__.output=(xi=function(D,K){switch(typeof(K=K||{})=="string"?K={filename:K}:K.filename=K.filename||"generated.pdf",D){case void 0:return $a();case"save":x.save(K.filename);break;case"arraybuffer":return Dn($a());case"blob":return Sn($a());case"bloburi":case"bloburl":if(Wn.URL!==void 0&&typeof Wn.URL.createObjectURL=="function")return Wn.URL&&Wn.URL.createObjectURL(Sn($a()))||void 0;br.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var we="",Ie=$a();try{we=W_(Ie)}catch{we=W_(unescape(encodeURIComponent(Ie)))}return"data:application/pdf;filename="+K.filename+";base64,"+we;case"pdfobjectnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var Ke="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",dt=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';K.pdfObjectUrl&&(Ke=K.pdfObjectUrl,dt="");var wt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Ke+'"'+dt+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(K)+");<\/script></body></html>",Bt=Wn.open();return Bt!==null&&Bt.document.write(wt),Bt}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(Wn)==="[object Window]"){var Zt='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(K.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+K.filename+'" width="500px" height="400px" /></body></html>',yn=Wn.open();if(yn!==null){yn.document.write(Zt);var Mn=this;yn.document.documentElement.querySelector("#pdfViewer").onload=function(){yn.document.title=K.filename,yn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Mn.output("bloburl"))}}return yn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(Wn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Qn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",K)+'"></iframe></body></html>',Ki=Wn.open();if(Ki!==null&&(Ki.document.write(Qn),Ki.document.title=K.filename),Ki||typeof safari>"u")return Ki;break;case"datauri":case"dataurl":return Wn.document.location.href=this.output("datauristring",K);default:return null}},xi.foo=function(){try{return xi.apply(this,arguments)}catch(we){var D=we.stack||"";~D.indexOf(" at ")&&(D=D.split(" at ")[1]);var K="Error in function "+D.split(`
`)[0].split("<")[0]+": "+we.message;if(!Wn.console)throw new Error(K);Wn.console.error(K,we),Wn.alert&&alert(K)}},xi.foo.bar=xi,xi.foo),zn=function(D){return Array.isArray(Ya)===!0&&Ya.indexOf(D)>-1};switch(i){case"pt":En=1;break;case"mm":En=72/25.4;break;case"cm":En=72/2.54;break;case"in":En=72;break;case"px":En=zn("px_scaling")==1?.75:96/72;break;case"pc":case"em":En=12;break;case"ex":En=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);En=i}var zi=null;ne(),he();var ni=x.__private__.getPageInfo=x.getPageInfo=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:ln[D].objId,pageNumber:D,pageContext:ln[D]}},Lo=x.__private__.getPageInfoByObjId=function(D){if(isNaN(D)||D%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var K in ln)if(ln[K].objId===D)break;return ni(K)},ns=x.__private__.getCurrentPageInfo=x.getCurrentPageInfo=function(){return{objId:ln[te].objId,pageNumber:te,pageContext:ln[te]}};x.addPage=function(){return Qa.apply(this,arguments),this},x.setPage=function(){return Ns.apply(this,arguments),Kt.call(this,gt[te]),this},x.insertPage=function(D){return this.addPage(),this.movePage(te,D),this},x.movePage=function(D,K){var we,Ie;if(D>K){we=gt[D],Ie=ln[D];for(var Ke=D;Ke>K;Ke--)gt[Ke]=gt[Ke-1],ln[Ke]=ln[Ke-1];gt[K]=we,ln[K]=Ie,this.setPage(K)}else if(D<K){we=gt[D],Ie=ln[D];for(var dt=D;dt<K;dt++)gt[dt]=gt[dt+1],ln[dt]=ln[dt+1];gt[K]=we,ln[K]=Ie,this.setPage(K)}return this},x.deletePage=function(){return va.apply(this,arguments),this},x.__private__.text=x.text=function(D,K,we,Ie,Ke){var dt,wt,Bt,Zt,yn,Mn,Qn,Ki,or,pi=(Ie=Ie||{}).scope||this;if(typeof D=="number"&&typeof K=="number"&&(typeof we=="string"||Array.isArray(we))){var mr=we;we=K,K=D,D=mr}if(arguments[3]instanceof nn==0?(Bt=arguments[4],Zt=arguments[5],tr(Qn=arguments[3])==="object"&&Qn!==null||(typeof Bt=="string"&&(Zt=Bt,Bt=null),typeof Qn=="string"&&(Zt=Qn,Qn=null),typeof Qn=="number"&&(Bt=Qn,Qn=null),Ie={flags:Qn,angle:Bt,align:Zt})):(G("The transform parameter of text() with a Matrix value"),or=Ke),isNaN(K)||isNaN(we)||D==null)throw new Error("Invalid arguments passed to jsPDF.text");if(D.length===0)return pi;var Di,_r="",Ba=typeof Ie.lineHeightFactor=="number"?Ie.lineHeightFactor:Yr,wr=pi.internal.scaleFactor;function To(je){return je=je.split("	").join(Array(Ie.TabLen||9).join(" ")),oa(je,Qn)}function Ho(je){for(var Ne,Pe=je.concat(),Me=[],Ue=Pe.length;Ue--;)typeof(Ne=Pe.shift())=="string"?Me.push(Ne):Array.isArray(je)&&(Ne.length===1||Ne[1]===void 0&&Ne[2]===void 0)?Me.push(Ne[0]):Me.push([Ne[0],Ne[1],Ne[2]]);return Me}function Xr(je,Ne){var Pe;if(typeof je=="string")Pe=Ne(je)[0];else if(Array.isArray(je)){for(var Me,Ue,Xe=je.concat(),nt=[],Qe=Xe.length;Qe--;)typeof(Me=Xe.shift())=="string"?nt.push(Ne(Me)[0]):Array.isArray(Me)&&typeof Me[0]=="string"&&(Ue=Ne(Me[0],Me[1],Me[2]),nt.push([Ue[0],Ue[1],Ue[2]]));Pe=nt}return Pe}var io=!1,ba=!0;if(typeof D=="string")io=!0;else if(Array.isArray(D)){var zs=D.concat();wt=[];for(var ro,sr=zs.length;sr--;)(typeof(ro=zs.shift())!="string"||Array.isArray(ro)&&typeof ro[0]!="string")&&(ba=!1);io=ba}if(io===!1)throw new Error('Type of text must be string or Array. "'+D+'" is not recognized.');typeof D=="string"&&(D=D.match(/[\r?\n]/)?D.split(/\r\n|\r|\n/g):[D]);var ms=At/pi.internal.scaleFactor,ss=ms*(Ba-1);switch(Ie.baseline){case"bottom":we-=ss;break;case"top":we+=ms-ss;break;case"hanging":we+=ms-2*ss;break;case"middle":we+=ms/2-ss}if((Mn=Ie.maxWidth||0)>0&&(typeof D=="string"?D=pi.splitTextToSize(D,Mn):Object.prototype.toString.call(D)==="[object Array]"&&(D=D.reduce(function(je,Ne){return je.concat(pi.splitTextToSize(Ne,Mn))},[]))),dt={text:D,x:K,y:we,options:Ie,mutex:{pdfEscape:oa,activeFontKey:Jt,fonts:hn,activeFontSize:At}},ri.publish("preProcessText",dt),D=dt.text,Bt=(Ie=dt.options).angle,or instanceof nn==0&&Bt&&typeof Bt=="number"){Bt*=Math.PI/180,Ie.rotationDirection===0&&(Bt=-Bt),V===B&&(Bt=-Bt);var Bs=Math.cos(Bt),jo=Math.sin(Bt);or=new nn(Bs,jo,-jo,Bs,0,0)}else Bt&&Bt instanceof nn&&(or=Bt);V!==B||or||(or=Za),(yn=Ie.charSpace||xa)!==void 0&&(_r+=fe(Se(yn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ki=Ie.horizontalScale)!==void 0&&(_r+=fe(100*Ki)+` Tz
`),Ie.lang;var Fi=-1,Fa=Ie.renderingMode!==void 0?Ie.renderingMode:Ie.stroke,Fs=pi.internal.getCurrentPageInfo().pageContext;switch(Fa){case 0:case!1:case"fill":Fi=0;break;case 1:case!0:case"stroke":Fi=1;break;case 2:case"fillThenStroke":Fi=2;break;case 3:case"invisible":Fi=3;break;case 4:case"fillAndAddForClipping":Fi=4;break;case 5:case"strokeAndAddPathForClipping":Fi=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Fi=6;break;case 7:case"addToPathForClipping":Fi=7}var _a=Fs.usedRenderingMode!==void 0?Fs.usedRenderingMode:-1;Fi!==-1?_r+=Fi+` Tr
`:_a!==-1&&(_r+=`0 Tr
`),Fi!==-1&&(Fs.usedRenderingMode=Fi),Zt=Ie.align||"left";var Ua,Qr=At*Ba,ls=pi.internal.pageSize.getWidth(),cs=hn[Jt];yn=Ie.charSpace||xa,Mn=Ie.maxWidth||0,Qn=Object.assign({autoencode:!0,noBOM:!0},Ie.flags);var bo=[],Ha=function(je){return pi.getStringUnitWidth(je,{font:cs,charSpace:yn,fontSize:At,doKerning:!1})*At/wr};if(Object.prototype.toString.call(D)==="[object Array]"){var lr;wt=Ho(D),Zt!=="left"&&(Ua=wt.map(Ha));var Fn,la=0;if(Zt==="right"){K-=Ua[0],D=[],sr=wt.length;for(var wa=0;wa<sr;wa++)wa===0?(Fn=Zr(K),lr=Bi(we)):(Fn=Se(la-Ua[wa]),lr=-Qr),D.push([wt[wa],Fn,lr]),la=Ua[wa]}else if(Zt==="center"){K-=Ua[0]/2,D=[],sr=wt.length;for(var ko=0;ko<sr;ko++)ko===0?(Fn=Zr(K),lr=Bi(we)):(Fn=Se((la-Ua[ko])/2),lr=-Qr),D.push([wt[ko],Fn,lr]),la=Ua[ko]}else if(Zt==="left"){D=[],sr=wt.length;for(var vs=0;vs<sr;vs++)D.push(wt[vs])}else if(Zt==="justify"&&cs.encoding==="Identity-H"){D=[],sr=wt.length,Mn=Mn!==0?Mn:ls;for(var Sa=0,Mi=0;Mi<sr;Mi++)if(lr=Mi===0?Bi(we):-Qr,Fn=Mi===0?Zr(K):Sa,Mi<sr-1){var Ro=Se((Mn-Ua[Mi])/(wt[Mi].split(" ").length-1)),Ca=wt[Mi].split(" ");D.push([Ca[0]+" ",Fn,lr]),Sa=0;for(var Wi=1;Wi<Ca.length;Wi++){var vr=(Ha(Ca[Wi-1]+" "+Ca[Wi])-Ha(Ca[Wi]))*wr+Ro;Wi==Ca.length-1?D.push([Ca[Wi],vr,0]):D.push([Ca[Wi]+" ",vr,0]),Sa-=vr}}else D.push([wt[Mi],Fn,lr]);D.push(["",Sa,0])}else{if(Zt!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(D=[],sr=wt.length,Mn=Mn!==0?Mn:ls,Mi=0;Mi<sr;Mi++){lr=Mi===0?Bi(we):-Qr,Fn=Mi===0?Zr(K):0;var w=wt[Mi].split(" ").length-1,j=w>0?(Mn-Ua[Mi])/w:0;Mi<sr-1?bo.push(fe(Se(j))):bo.push(0),D.push([wt[Mi],Fn,lr])}}}(typeof Ie.R2L=="boolean"?Ie.R2L:Yt)===!0&&(D=Xr(D,function(je,Ne,Pe){return[je.split("").reverse().join(""),Ne,Pe]})),dt={text:D,x:K,y:we,options:Ie,mutex:{pdfEscape:oa,activeFontKey:Jt,fonts:hn,activeFontSize:At}},ri.publish("postProcessText",dt),D=dt.text,Di=dt.mutex.isHex||!1;var P=hn[Jt].encoding;P!=="WinAnsiEncoding"&&P!=="StandardEncoding"||(D=Xr(D,function(je,Ne,Pe){return[To(je),Ne,Pe]})),wt=Ho(D),D=[];for(var z,W,$,ge=Array.isArray(wt[0])?1:0,be="",He=function(je,Ne,Pe){var Me="";return Pe instanceof nn?(Pe=typeof Ie.angle=="number"?Ao(Pe,new nn(1,0,0,1,je,Ne)):Ao(new nn(1,0,0,1,je,Ne),Pe),V===B&&(Pe=Ao(new nn(1,0,0,-1,0,0),Pe)),Me=Pe.join(" ")+` Tm
`):Me=fe(je)+" "+fe(Ne)+` Td
`,Me},Ze=0;Ze<wt.length;Ze++){switch(be="",ge){case 1:$=(Di?"<":"(")+wt[Ze][0]+(Di?">":")"),z=parseFloat(wt[Ze][1]),W=parseFloat(wt[Ze][2]);break;case 0:$=(Di?"<":"(")+wt[Ze]+(Di?">":")"),z=Zr(K),W=Bi(we)}bo!==void 0&&bo[Ze]!==void 0&&(be=bo[Ze]+` Tw
`),Ze===0?D.push(be+He(z,W,or)+$):ge===0?D.push(be+$):ge===1&&D.push(be+He(z,W,or)+$)}D=ge===0?D.join(` Tj
T* `):D.join(` Tj
`),D+=` Tj
`;var Be=`BT
/`;return Be+=Jt+" "+At+` Tf
`,Be+=fe(At*Ba)+` TL
`,Be+=Ai+`
`,Be+=_r,Be+=D,ye(Be+="ET"),A[Jt]=!0,pi};var Ja=x.__private__.clip=x.clip=function(D){return ye(D==="evenodd"?"W*":"W"),this};x.clipEvenOdd=function(){return Ja("evenodd")},x.__private__.discardPath=x.discardPath=function(){return ye("n"),this};var Xn=x.__private__.isValidStyle=function(D){var K=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(D)!==-1&&(K=!0),K};x.__private__.setDefaultPathOperation=x.setDefaultPathOperation=function(D){return Xn(D)&&(g=D),this};var po=x.__private__.getStyle=x.getStyle=function(D){var K=g;switch(D){case"D":case"S":K="S";break;case"F":K="f";break;case"FD":case"DF":K="B";break;case"f":case"f*":case"B":case"B*":K=D}return K},go=x.close=function(){return ye("h"),this};x.stroke=function(){return ye("S"),this},x.fill=function(D){return sa("f",D),this},x.fillEvenOdd=function(D){return sa("f*",D),this},x.fillStroke=function(D){return sa("B",D),this},x.fillStrokeEvenOdd=function(D){return sa("B*",D),this};var sa=function(D,K){tr(K)==="object"?Ds(K,D):ye(D)},is=function(D){D===null||V===B&&D===void 0||(D=po(D),ye(D))};function Vn(D,K,we,Ie,Ke){var dt=new yd(K||this.boundingBox,we||this.xStep,Ie||this.yStep,this.gState,Ke||this.matrix);dt.stream=this.stream;var wt=D+"$$"+this.cloneIndex+++"$$";return ei(wt,dt),dt}var Ds=function(D,K){var we=ui[D.key],Ie=tn[we];if(Ie instanceof xu)ye("q"),ye(Ms(K)),Ie.gState&&x.setGState(Ie.gState),ye(D.matrix.toString()+" cm"),ye("/"+we+" sh"),ye("Q");else if(Ie instanceof yd){var Ke=new nn(1,0,0,-1,0,xo());D.matrix&&(Ke=Ke.multiply(D.matrix||Za),we=Vn.call(Ie,D.key,D.boundingBox,D.xStep,D.yStep,Ke).id),ye("q"),ye("/Pattern cs"),ye("/"+we+" scn"),Ie.gState&&x.setGState(Ie.gState),ye(K),ye("Q")}},Ms=function(D){switch(D){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},fs=x.moveTo=function(D,K){return ye(fe(Se(D))+" "+fe(Ee(K))+" m"),this},Pr=x.lineTo=function(D,K){return ye(fe(Se(D))+" "+fe(Ee(K))+" l"),this},gr=x.curveTo=function(D,K,we,Ie,Ke,dt){return ye([fe(Se(D)),fe(Ee(K)),fe(Se(we)),fe(Ee(Ie)),fe(Se(Ke)),fe(Ee(dt)),"c"].join(" ")),this};x.__private__.line=x.line=function(D,K,we,Ie,Ke){if(isNaN(D)||isNaN(K)||isNaN(we)||isNaN(Ie)||!Xn(Ke))throw new Error("Invalid arguments passed to jsPDF.line");return V===Y?this.lines([[we-D,Ie-K]],D,K,[1,1],Ke||"S"):this.lines([[we-D,Ie-K]],D,K,[1,1]).stroke()},x.__private__.lines=x.lines=function(D,K,we,Ie,Ke,dt){var wt,Bt,Zt,yn,Mn,Qn,Ki,or,pi,mr,Di,_r;if(typeof D=="number"&&(_r=we,we=K,K=D,D=_r),Ie=Ie||[1,1],dt=dt||!1,isNaN(K)||isNaN(we)||!Array.isArray(D)||!Array.isArray(Ie)||!Xn(Ke)||typeof dt!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(fs(K,we),wt=Ie[0],Bt=Ie[1],yn=D.length,mr=K,Di=we,Zt=0;Zt<yn;Zt++)(Mn=D[Zt]).length===2?(mr=Mn[0]*wt+mr,Di=Mn[1]*Bt+Di,Pr(mr,Di)):(Qn=Mn[0]*wt+mr,Ki=Mn[1]*Bt+Di,or=Mn[2]*wt+mr,pi=Mn[3]*Bt+Di,mr=Mn[4]*wt+mr,Di=Mn[5]*Bt+Di,gr(Qn,Ki,or,pi,mr,Di));return dt&&go(),is(Ke),this},x.path=function(D){for(var K=0;K<D.length;K++){var we=D[K],Ie=we.c;switch(we.op){case"m":fs(Ie[0],Ie[1]);break;case"l":Pr(Ie[0],Ie[1]);break;case"c":gr.apply(this,Ie);break;case"h":go()}}return this},x.__private__.rect=x.rect=function(D,K,we,Ie,Ke){if(isNaN(D)||isNaN(K)||isNaN(we)||isNaN(Ie)||!Xn(Ke))throw new Error("Invalid arguments passed to jsPDF.rect");return V===Y&&(Ie=-Ie),ye([fe(Se(D)),fe(Ee(K)),fe(Se(we)),fe(Se(Ie)),"re"].join(" ")),is(Ke),this},x.__private__.triangle=x.triangle=function(D,K,we,Ie,Ke,dt,wt){if(isNaN(D)||isNaN(K)||isNaN(we)||isNaN(Ie)||isNaN(Ke)||isNaN(dt)||!Xn(wt))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[we-D,Ie-K],[Ke-we,dt-Ie],[D-Ke,K-dt]],D,K,[1,1],wt,!0),this},x.__private__.roundedRect=x.roundedRect=function(D,K,we,Ie,Ke,dt,wt){if(isNaN(D)||isNaN(K)||isNaN(we)||isNaN(Ie)||isNaN(Ke)||isNaN(dt)||!Xn(wt))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Bt=4/3*(Math.SQRT2-1);return Ke=Math.min(Ke,.5*we),dt=Math.min(dt,.5*Ie),this.lines([[we-2*Ke,0],[Ke*Bt,0,Ke,dt-dt*Bt,Ke,dt],[0,Ie-2*dt],[0,dt*Bt,-Ke*Bt,dt,-Ke,dt],[2*Ke-we,0],[-Ke*Bt,0,-Ke,-dt*Bt,-Ke,-dt],[0,2*dt-Ie],[0,-dt*Bt,Ke*Bt,-dt,Ke,-dt]],D+Ke,K,[1,1],wt,!0),this},x.__private__.ellipse=x.ellipse=function(D,K,we,Ie,Ke){if(isNaN(D)||isNaN(K)||isNaN(we)||isNaN(Ie)||!Xn(Ke))throw new Error("Invalid arguments passed to jsPDF.ellipse");var dt=4/3*(Math.SQRT2-1)*we,wt=4/3*(Math.SQRT2-1)*Ie;return fs(D+we,K),gr(D+we,K-wt,D+dt,K-Ie,D,K-Ie),gr(D-dt,K-Ie,D-we,K-wt,D-we,K),gr(D-we,K+wt,D-dt,K+Ie,D,K+Ie),gr(D+dt,K+Ie,D+we,K+wt,D+we,K),is(Ke),this},x.__private__.circle=x.circle=function(D,K,we,Ie){if(isNaN(D)||isNaN(K)||isNaN(we)||!Xn(Ie))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(D,K,we,we,Ie)},x.setFont=function(D,K,we){return we&&(K=_e(K,we)),Jt=ts(D,K,{disableWarning:!1}),this};var Vr=x.__private__.getFont=x.getFont=function(){return hn[ts.apply(x,arguments)]};x.__private__.getFontList=x.getFontList=function(){var D,K,we={};for(D in gn)if(gn.hasOwnProperty(D))for(K in we[D]=[],gn[D])gn[D].hasOwnProperty(K)&&we[D].push(K);return we},x.addFont=function(D,K,we,Ie,Ke){var dt=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&dt.indexOf(arguments[3])!==-1?Ke=arguments[3]:arguments[3]&&dt.indexOf(arguments[3])==-1&&(we=_e(we,Ie)),Bo.call(this,D,K,we,Ke=Ke||"Identity-H")};var Yr,Fo=t.lineWidth||.200025,rs=x.__private__.getLineWidth=x.getLineWidth=function(){return Fo},Ct=x.__private__.setLineWidth=x.setLineWidth=function(D){return Fo=D,ye(fe(Se(D))+" w"),this};x.__private__.setLineDash=mn.API.setLineDash=mn.API.setLineDashPattern=function(D,K){if(D=D||[],K=K||0,isNaN(K)||!Array.isArray(D))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return D=D.map(function(we){return fe(Se(we))}).join(" "),K=fe(Se(K)),ye("["+D+"] "+K+" d"),this};var rr=x.__private__.getLineHeight=x.getLineHeight=function(){return At*Yr};x.__private__.getLineHeight=x.getLineHeight=function(){return At*Yr};var ai=x.__private__.setLineHeightFactor=x.setLineHeightFactor=function(D){return typeof(D=D||1.15)=="number"&&(Yr=D),this},as=x.__private__.getLineHeightFactor=x.getLineHeightFactor=function(){return Yr};ai(t.lineHeight);var Zr=x.__private__.getHorizontalCoordinate=function(D){return Se(D)},Bi=x.__private__.getVerticalCoordinate=function(D){return V===B?D:ln[te].mediaBox.topRightY-ln[te].mediaBox.bottomLeftY-Se(D)},Os=x.__private__.getHorizontalCoordinateString=x.getHorizontalCoordinateString=function(D){return fe(Zr(D))},ar=x.__private__.getVerticalCoordinateString=x.getVerticalCoordinateString=function(D){return fe(Bi(D))},Kr=t.strokeColor||"0 G";x.__private__.getStrokeColor=x.getDrawColor=function(){return bi(Kr)},x.__private__.setStrokeColor=x.setDrawColor=function(D,K,we,Ie){return Kr=Zi({ch1:D,ch2:K,ch3:we,ch4:Ie,pdfColorType:"draw",precision:2}),ye(Kr),this};var mo=t.fillColor||"0 g";x.__private__.getFillColor=x.getFillColor=function(){return bi(mo)},x.__private__.setFillColor=x.setFillColor=function(D,K,we,Ie){return mo=Zi({ch1:D,ch2:K,ch3:we,ch4:Ie,pdfColorType:"fill",precision:2}),ye(mo),this};var Ai=t.textColor||"0 g",za=x.__private__.getTextColor=x.getTextColor=function(){return bi(Ai)};x.__private__.setTextColor=x.setTextColor=function(D,K,we,Ie){return Ai=Zi({ch1:D,ch2:K,ch3:we,ch4:Ie,pdfColorType:"text",precision:3}),this};var xa=t.charSpace,hs=x.__private__.getCharSpace=x.getCharSpace=function(){return parseFloat(xa||0)};x.__private__.setCharSpace=x.setCharSpace=function(D){if(isNaN(D))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return xa=D,this};var Qs=0;x.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},x.__private__.setLineCap=x.setLineCap=function(D){var K=x.CapJoinStyles[D];if(K===void 0)throw new Error("Line cap style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qs=K,ye(K+" J"),this};var Qi=0;x.__private__.setLineJoin=x.setLineJoin=function(D){var K=x.CapJoinStyles[D];if(K===void 0)throw new Error("Line join style of '"+D+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qi=K,ye(K+" j"),this},x.__private__.setLineMiterLimit=x.__private__.setMiterLimit=x.setLineMiterLimit=x.setMiterLimit=function(D){if(D=D||0,isNaN(D))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return ye(fe(Se(D))+" M"),this},x.GState=Fp,x.setGState=function(D){(D=typeof D=="string"?vn[vt[D]]:vo(null,D)).equals(yi)||(ye("/"+D.id+" gs"),yi=D)};var vo=function(D,K){if(!D||!vt[D]){var we=!1;for(var Ie in vn)if(vn.hasOwnProperty(Ie)&&vn[Ie].equals(K)){we=!0;break}if(we)K=vn[Ie];else{var Ke="GS"+(Object.keys(vn).length+1).toString(10);vn[Ke]=K,K.id=Ke}return D&&(vt[D]=K.id),ri.publish("addGState",K),K}};x.addGState=function(D,K){return vo(D,K),this},x.saveGraphicsState=function(){return ye("q"),Nt.push({key:Jt,size:At,color:Ai}),this},x.restoreGraphicsState=function(){ye("Q");var D=Nt.pop();return Jt=D.key,At=D.size,Ai=D.color,yi=null,this},x.setCurrentTransformationMatrix=function(D){return ye(D.toString()+" cm"),this},x.comment=function(D){return ye("#"+D),this};var yo=function(D,K){var we=D||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return we},set:function(dt){isNaN(dt)||(we=parseFloat(dt))}});var Ie=K||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return Ie},set:function(dt){isNaN(dt)||(Ie=parseFloat(dt))}});var Ke="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Ke},set:function(dt){Ke=dt.toString()}}),this},eo=function(D,K,we,Ie){yo.call(this,D,K),this.type="rect";var Ke=we||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Ke},set:function(wt){isNaN(wt)||(Ke=parseFloat(wt))}});var dt=Ie||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return dt},set:function(wt){isNaN(wt)||(dt=parseFloat(wt))}}),this},Bn=function(){this.page=Pn,this.currentPage=te,this.pages=gt.slice(0),this.pagesContext=ln.slice(0),this.x=en,this.y=Ni,this.matrix=Hn,this.width=to(te),this.height=Ps(te),this.outputDestination=Ot,this.id="",this.objectNumber=-1};Bn.prototype.restore=function(){Pn=this.page,te=this.currentPage,ln=this.pagesContext,gt=this.pages,en=this.x,Ni=this.y,Hn=this.matrix,ps(te,this.width),no(te,this.height),Ot=this.outputDestination};var os=function(D,K,we,Ie,Ke){Wr.push(new Bn),Pn=te=0,gt=[],en=D,Ni=K,Hn=Ke,Xa([we,Ie])};for(var Ar in x.beginFormObject=function(D,K,we,Ie,Ke){return os(D,K,we,Ie,Ke),this},x.endFormObject=function(D){return(function(K){if(zo[K])Wr.pop().restore();else{var we=new Bn,Ie="Xo"+(Object.keys(ia).length+1).toString(10);we.id=Ie,zo[K]=Ie,ia[Ie]=we,ri.publish("addFormObject",we),Wr.pop().restore()}})(D),this},x.doFormObject=function(D,K){var we=ia[zo[D]];return ye("q"),ye(K.toString()+" cm"),ye("/"+we.id+" Do"),ye("Q"),this},x.getFormObject=function(D){var K=ia[zo[D]];return{x:K.x,y:K.y,width:K.width,height:K.height,matrix:K.matrix}},x.save=function(D,K){return D=D||"generated.pdf",(K=K||{}).returnPromise=K.returnPromise||!1,K.returnPromise===!1?(mu(Sn($a()),D),typeof mu.unload=="function"&&Wn.setTimeout&&setTimeout(mu.unload,911),this):new Promise(function(we,Ie){try{var Ke=mu(Sn($a()),D);typeof mu.unload=="function"&&Wn.setTimeout&&setTimeout(mu.unload,911),we(Ke)}catch(dt){Ie(dt.message)}})},mn.API)mn.API.hasOwnProperty(Ar)&&(Ar==="events"&&mn.API.events.length?(function(D,K){var we,Ie,Ke;for(Ke=K.length-1;Ke!==-1;Ke--)we=K[Ke][0],Ie=K[Ke][1],D.subscribe.apply(D,[we].concat(typeof Ie=="function"?[Ie]:Ie))})(ri,mn.API.events):x[Ar]=mn.API[Ar]);function to(D){return ln[D].mediaBox.topRightX-ln[D].mediaBox.bottomLeftX}function ps(D,K){ln[D].mediaBox.topRightX=K+ln[D].mediaBox.bottomLeftX}function Ps(D){return ln[D].mediaBox.topRightY-ln[D].mediaBox.bottomLeftY}function no(D,K){ln[D].mediaBox.topRightY=K+ln[D].mediaBox.bottomLeftY}var Uo=x.getPageWidth=function(D){return to(D=D||te)/En},gs=x.setPageWidth=function(D,K){ps(D,K*En)},xo=x.getPageHeight=function(D){return Ps(D=D||te)/En},Is=x.setPageHeight=function(D,K){no(D,K*En)};return x.internal={pdfEscape:oa,getStyle:po,getFont:Vr,getFontSize:kt,getCharSpace:hs,getTextColor:za,getLineHeight:rr,getLineHeightFactor:as,getLineWidth:rs,write:Pt,getHorizontalCoordinate:Zr,getVerticalCoordinate:Bi,getCoordinateString:Os,getVerticalCoordinateString:ar,collections:{},newObject:si,newAdditionalObject:fo,newObjectDeferred:Ut,newObjectDeferredBegin:nr,getFilters:pr,putStream:Ka,events:ri,scaleFactor:En,pageSize:{getWidth:function(){return Uo(te)},setWidth:function(D){gs(te,D)},getHeight:function(){return xo(te)},setHeight:function(D){Is(te,D)}},encryptionOptions:m,encryption:zi,getEncryptor:function(D){return m!==null?zi.encryptor(D,0):function(K){return K}},output:Ii,getNumberOfPages:es,get pages(){return gt},out:ye,f2:Z,f3:J,getPageInfo:ni,getPageInfoByObjId:Lo,getCurrentPageInfo:ns,getPDFVersion:M,Point:yo,Rectangle:eo,Matrix:nn,hasHotfix:zn},Object.defineProperty(x.internal.pageSize,"width",{get:function(){return Uo(te)},set:function(D){gs(te,D)},enumerable:!0,configurable:!0}),Object.defineProperty(x.internal.pageSize,"height",{get:function(){return xo(te)},set:function(D){Is(te,D)},enumerable:!0,configurable:!0}),(function(D){for(var K=0,we=dn.length;K<we;K++){var Ie=Bo.call(this,D[K][0],D[K][1],D[K][2],dn[K][3],!0);_===!1&&(A[Ie]=!0);var Ke=D[K][0].split("-");ir({id:Ie,fontName:Ke[0],fontStyle:Ke[1]||""})}ri.publish("addFonts",{fonts:hn,dictionary:gn})}).call(x,dn),Jt="F1",Qa(r,n),ri.publish("initialized"),x}gd.prototype.lsbFirstWord=function(t){return String.fromCharCode(255&t,t>>8&255,t>>16&255,t>>24&255)},gd.prototype.toHexString=function(t){return t.split("").map(function(e){return("0"+(255&e.charCodeAt(0)).toString(16)).slice(-2)}).join("")},gd.prototype.hexToBytes=function(t){for(var e=[],n=0;n<t.length;n+=2)e.push(String.fromCharCode(parseInt(t.substr(n,2),16)));return e.join("")},gd.prototype.processOwnerPassword=function(t,e){return py(hy(e).substr(0,5),t)},gd.prototype.encryptor=function(t,e){var n=hy(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(i){return py(n,i)}},Fp.prototype.equals=function(t){var e,n="id,objectNumber,equals";if(!t||tr(t)!==tr(this))return!1;var i=0;for(e in this)if(!(n.indexOf(e)>=0)){if(this.hasOwnProperty(e)&&!t.hasOwnProperty(e)||this[e]!==t[e])return!1;i++}for(e in t)t.hasOwnProperty(e)&&n.indexOf(e)<0&&i--;return i===0},mn.API={events:[]},mn.version="4.0.0";var ma=mn.API,r0=1,Pu=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},fd=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},Kn=function(t){return t.toFixed(2)},Zc=function(t){return t.toFixed(5)};ma.__acroform__={};var Rs=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Z_=function(t){return t*r0},Ul=function(t){var e=new aS,n=un.internal.getHeight(t)||0,i=un.internal.getWidth(t)||0;return e.BBox=[0,0,Number(Kn(i)),Number(Kn(n))],e},xR=ma.__acroform__.setBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},bR=ma.__acroform__.clearBit=function(t,e){if(t=t||0,e=e||0,isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},_R=ma.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return t&1<<e?1:0},Ra=ma.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return _R(t,e-1)},Na=ma.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return xR(t,e-1)},Da=ma.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return bR(t,e-1)},wR=ma.__acroform__.calculateCoordinates=function(t,e){var n=e.internal.getHorizontalCoordinate,i=e.internal.getVerticalCoordinate,r=t[0],a=t[1],l=t[2],d=t[3],p={};return p.lowerLeft_X=n(r)||0,p.lowerLeft_Y=i(a+d)||0,p.upperRight_X=n(r+l)||0,p.upperRight_Y=i(a)||0,[Number(Kn(p.lowerLeft_X)),Number(Kn(p.lowerLeft_Y)),Number(Kn(p.upperRight_X)),Number(Kn(p.upperRight_Y))]},SR=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],n=t._V||t.DV,i=gy(t,n),r=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+r+" "+Kn(i.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(i.text),e.push("ET"),e.push("Q"),e.push("EMC");var a=Ul(t);return a.scope=t.scope,a.stream=e.join(`
`),a}},gy=function(t,e){var n=t.fontSize===0?t.maxFontSize:t.fontSize,i={text:"",fontSize:""},r=(e=(e=e.substr(0,1)=="("?e.substr(1):e).substr(e.length-1)==")"?e.substr(0,e.length-1):e).split(" ");r=t.multiline?r.map(function(Z){return Z.split(`
`)}):r.map(function(Z){return[Z]});var a=n,l=un.internal.getHeight(t)||0;l=l<0?-l:l;var d=un.internal.getWidth(t)||0;d=d<0?-d:d;var p=function(Z,J,Se){if(Z+1<r.length){var Ee=J+" "+r[Z+1][0];return ip(Ee,t,Se).width<=d-4}return!1};a++;e:for(;a>0;){e="",a--;var g,m,_=ip("3",t,a).height,A=t.multiline?l-a:(l-_)/2,x=A+=2,R=0,M=0,k=0;if(a<=0){e=`(...) Tj
`,e+="% Width of Text: "+ip(e,t,a=12).width+", FieldWidth:"+d+`
`;break}for(var I="",Y=0,B=0;B<r.length;B++)if(r.hasOwnProperty(B)){var V=!1;if(r[B].length!==1&&k!==r[B].length-1){if((_+2)*(Y+2)+2>l)continue e;I+=r[B][k],V=!0,M=B,B--}else{I=(I+=r[B][k]+" ").substr(I.length-1)==" "?I.substr(0,I.length-1):I;var ee=parseInt(B),ue=p(ee,I,a),_e=B>=r.length-1;if(ue&&!_e){I+=" ",k=0;continue}if(ue||_e){if(_e)M=ee;else if(t.multiline&&(_+2)*(Y+2)+2>l)continue e}else{if(!t.multiline||(_+2)*(Y+2)+2>l)continue e;M=ee}}for(var fe="",G=R;G<=M;G++){var me=r[G];if(t.multiline){if(G===M){fe+=me[k]+" ",k=(k+1)%me.length;continue}if(G===R){fe+=me[me.length-1]+" ";continue}}fe+=me[0]+" "}switch(fe=fe.substr(fe.length-1)==" "?fe.substr(0,fe.length-1):fe,m=ip(fe,t,a).width,t.textAlign){case"right":g=d-m-2;break;case"center":g=(d-m)/2;break;default:g=2}e+=Kn(g)+" "+Kn(x)+` Td
`,e+="("+Pu(fe)+`) Tj
`,e+=-Kn(g)+` 0 Td
`,x=-(a+2),m=0,R=V?M:M+1,Y++,I=""}break}return i.text=e,i.fontSize=a,i},ip=function(t,e,n){var i=e.scope.internal.getFont(e.fontName,e.fontStyle),r=e.scope.getStringUnitWidth(t,{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:e.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:r}},CR={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ER=function(t,e){var n={type:"reference",object:t};e.internal.getPageInfo(t.page).pageContext.annotations.find(function(i){return i.type===n.type&&i.object===n.object})===void 0&&e.internal.getPageInfo(t.page).pageContext.annotations.push(n)},AR=function(t,e){if(e.scope=t,t.internal!==void 0&&(t.internal.acroformPlugin===void 0||t.internal.acroformPlugin.isInitialized===!1)){if(Sl.FieldNum=0,t.internal.acroformPlugin=JSON.parse(JSON.stringify(CR)),t.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r0=t.internal.scaleFactor,t.internal.acroformPlugin.acroFormDictionaryRoot=new oS,t.internal.acroformPlugin.acroFormDictionaryRoot.scope=t,t.internal.acroformPlugin.acroFormDictionaryRoot._eventID=t.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(t)}),t.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var r in i)if(i.hasOwnProperty(r)){var a=i[r];a.objId=void 0,a.hasAnnotation&&ER(a,n)}})(t)}),t.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(t)}),t.internal.events.subscribe("postPutPages",function(n){(function(i,r){var a=!i;for(var l in i||(r.internal.newObjectDeferredBegin(r.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),r.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||r.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(l)){var d=i[l],p=[],g=d.Rect;if(d.Rect&&(d.Rect=wR(d.Rect,r)),r.internal.newObjectDeferredBegin(d.objId,!0),d.DA=un.createDefaultAppearanceStream(d),tr(d)==="object"&&typeof d.getKeyValueListForStream=="function"&&(p=d.getKeyValueListForStream()),d.Rect=g,d.hasAppearanceStream&&!d.appearanceStreamContent){var m=SR(d);p.push({key:"AP",value:"<</N "+m+">>"}),r.internal.acroformPlugin.xForms.push(m)}if(d.appearanceStreamContent){var _="";for(var A in d.appearanceStreamContent)if(d.appearanceStreamContent.hasOwnProperty(A)){var x=d.appearanceStreamContent[A];if(_+="/"+A+" ",_+="<<",Object.keys(x).length>=1||Array.isArray(x)){for(var l in x)if(x.hasOwnProperty(l)){var R=x[l];typeof R=="function"&&(R=R.call(r,d)),_+="/"+l+" "+R+" ",r.internal.acroformPlugin.xForms.indexOf(R)>=0||r.internal.acroformPlugin.xForms.push(R)}}else typeof(R=x)=="function"&&(R=R.call(r,d)),_+="/"+l+" "+R,r.internal.acroformPlugin.xForms.indexOf(R)>=0||r.internal.acroformPlugin.xForms.push(R);_+=">>"}p.push({key:"AP",value:`<<
`+_+">>"})}r.internal.putStream({additionalKeyValues:p,objectId:d.objId}),r.internal.out("endobj")}a&&(function(M,k){for(var I in M)if(M.hasOwnProperty(I)){var Y=I,B=M[I];k.internal.newObjectDeferredBegin(B.objId,!0),tr(B)==="object"&&typeof B.putStream=="function"&&B.putStream(),delete M[Y]}})(r.internal.acroformPlugin.xForms,r)})(n,t)}),t.internal.acroformPlugin.isInitialized=!0}},rS=ma.__acroform__.arrayToPdfArray=function(t,e,n){var i=function(l){return l};if(Array.isArray(t)){for(var r="[",a=0;a<t.length;a++)switch(a!==0&&(r+=" "),tr(t[a])){case"boolean":case"number":case"object":r+=t[a].toString();break;case"string":t[a].substr(0,1)!=="/"?(e!==void 0&&n&&(i=n.internal.getEncryptor(e)),r+="("+Pu(i(t[a].toString()))+")"):r+=t[a].toString()}return r+"]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},bv=function(t,e,n){var i=function(r){return r};return e!==void 0&&n&&(i=n.internal.getEncryptor(e)),(t=t||"").toString(),"("+Pu(i(t))+")"},ql=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};ql.prototype.toString=function(){return this.objId+" 0 R"},ql.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},ql.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in e)if(Object.getOwnPropertyDescriptor(this,e[n]).configurable===!1){var i=e[n],r=this[i];r&&(Array.isArray(r)?t.push({key:i,value:rS(r,this.objId,this.scope)}):r instanceof ql?(r.scope=this.scope,t.push({key:i,value:r.objId+" 0 R"})):typeof r!="function"&&t.push({key:i,value:r}))}return t};var aS=function(){ql.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){t=n.trim()},get:function(){return t||null}})};Rs(aS,ql);var oS=function(){ql.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var n=function(i){return i};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+Pu(n(t))+")"}},set:function(n){t=n}})};Rs(oS,ql);var Sl=function t(){ql.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute F supplied.');e=I}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Ra(e,3)},set:function(I){I?this.F=Na(e,3):this.F=Da(e,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(I){if(isNaN(I))throw new Error('Invalid value "'+I+'" for attribute Ff supplied.');n=I}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(I){i=I!==void 0?I:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(I){i[0]=I}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(I){i[1]=I}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(I){i[2]=I}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(I){i[3]=I}});var r="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return r},set:function(I){switch(I){case"/Btn":case"/Tx":case"/Ch":case"/Sig":r=I;break;default:throw new Error('Invalid value "'+I+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof Up)return;a="FieldObject"+t.FieldNum++}var I=function(Y){return Y};return this.scope&&(I=this.scope.internal.getEncryptor(this.objId)),"("+Pu(I(a))+")"},set:function(I){a=I.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(I){a=I}});var l="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return l},set:function(I){l=I}});var d="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return d},set:function(I){d=I}});var p=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return p},set:function(I){p=I}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/r0:g},set:function(I){g=I}});var m="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return m},set:function(I){m=I}});var _="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!_||this instanceof Up||this instanceof Eu))return bv(_,this.objId,this.scope)},set:function(I){I=I.toString(),_=I}});var A=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(A)return this instanceof Co==0?bv(A,this.objId,this.scope):A},set:function(I){I=I.toString(),A=this instanceof Co==0?I.substr(0,1)==="("?fd(I.substr(1,I.length-2)):fd(I):I}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Co==1?fd(A.substr(1,A.length-1)):A},set:function(I){I=I.toString(),A=this instanceof Co==1?"/"+I:I}});var x=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(x)return x},set:function(I){this.V=I}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(x)return this instanceof Co==0?bv(x,this.objId,this.scope):x},set:function(I){I=I.toString(),x=this instanceof Co==0?I.substr(0,1)==="("?fd(I.substr(1,I.length-2)):fd(I):I}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Co==1?fd(x.substr(1,x.length-1)):x},set:function(I){I=I.toString(),x=this instanceof Co==1?"/"+I:I}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var R,M=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return M},set:function(I){I=!!I,M=I}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(R)return R},set:function(I){R=I}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,1)},set:function(I){I?this.Ff=Na(this.Ff,1):this.Ff=Da(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,2)},set:function(I){I?this.Ff=Na(this.Ff,2):this.Ff=Da(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,3)},set:function(I){I?this.Ff=Na(this.Ff,3):this.Ff=Da(this.Ff,3)}});var k=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(k!==null)return k},set:function(I){if([0,1,2].indexOf(I)===-1)throw new Error('Invalid value "'+I+'" for attribute Q supplied.');k=I}}),Object.defineProperty(this,"textAlign",{get:function(){var I;switch(k){case 0:default:I="left";break;case 1:I="center";break;case 2:I="right"}return I},configurable:!0,enumerable:!0,set:function(I){switch(I){case"right":case 2:k=2;break;case"center":case 1:k=1;break;default:k=0}}})};Rs(Sl,ql);var bd=function(){Sl.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(n){t=n}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return rS(e,this.objId,this.scope)},set:function(n){var i,r;r=[],typeof(i=n)=="string"&&(r=(function(a,l,d){d||(d=1);for(var p,g=[];p=l.exec(a);)g.push(p[d]);return g})(i,/\((.*?)\)/g)),e=r}}),this.getOptions=function(){return e},this.setOptions=function(n){e=n,this.sort&&e.sort()},this.addOption=function(n){n=(n=n||"").toString(),e.push(n),this.sort&&e.sort()},this.removeOption=function(n,i){for(i=i||!1,n=(n=n||"").toString();e.indexOf(n)!==-1&&(e.splice(e.indexOf(n),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,18)},set:function(n){n?this.Ff=Na(this.Ff,18):this.Ff=Da(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=Na(this.Ff,19):this.Ff=Da(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,20)},set:function(n){n?(this.Ff=Na(this.Ff,20),e.sort()):this.Ff=Da(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,22)},set:function(n){n?this.Ff=Na(this.Ff,22):this.Ff=Da(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,23)},set:function(n){n?this.Ff=Na(this.Ff,23):this.Ff=Da(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,27)},set:function(n){n?this.Ff=Na(this.Ff,27):this.Ff=Da(this.Ff,27)}}),this.hasAppearanceStream=!1};Rs(bd,Sl);var _d=function(){bd.call(this),this.fontName="helvetica",this.combo=!1};Rs(_d,bd);var wd=function(){_d.call(this),this.combo=!0};Rs(wd,_d);var Sp=function(){wd.call(this),this.edit=!0};Rs(Sp,wd);var Co=function(){Sl.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,15)},set:function(n){n?this.Ff=Na(this.Ff,15):this.Ff=Da(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,16)},set:function(n){n?this.Ff=Na(this.Ff,16):this.Ff=Da(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,17)},set:function(n){n?this.Ff=Na(this.Ff,17):this.Ff=Da(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,26)},set:function(n){n?this.Ff=Na(this.Ff,26):this.Ff=Da(this.Ff,26)}});var t,e={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(e).length!==0){var i,r=[];for(i in r.push("<<"),e)r.push("/"+i+" ("+Pu(n(e[i]))+")");return r.push(">>"),r.join(`
`)}},set:function(n){tr(n)==="object"&&(e=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return e.CA||""},set:function(n){typeof n=="string"&&(e.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return t.substr(1,t.length-1)},set:function(n){t="/"+n}})};Rs(Co,Sl);var Cp=function(){Co.call(this),this.pushButton=!0};Rs(Cp,Co);var Sd=function(){Co.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e!==void 0?e:[]}})};Rs(Sd,Co);var Up=function(){var t,e;Sl.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return e},set:function(r){e=r}});var n,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(d){return d};this.scope&&(r=this.scope.internal.getEncryptor(this.objId));var a,l=[];for(a in l.push("<<"),i)l.push("/"+a+" ("+Pu(r(i[a]))+")");return l.push(">>"),l.join(`
`)},set:function(r){tr(r)==="object"&&(i=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(r){typeof r=="string"&&(i.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=un.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Rs(Up,Sl),Sd.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var n=this.Kids[e];n.appearanceStreamContent=t.createAppearanceStream(n.optionName),n.caption=t.getCA()}},Sd.prototype.createOption=function(t){var e=new Up;return e.Parent=this,e.optionName=t,this.Kids.push(e),LR.call(this.scope,e),e};var Ep=function(){Co.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=un.CheckBox.createAppearanceStream()};Rs(Ep,Co);var Eu=function(){Sl.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,13)},set:function(e){e?this.Ff=Na(this.Ff,13):this.Ff=Da(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,21)},set:function(e){e?this.Ff=Na(this.Ff,21):this.Ff=Da(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,23)},set:function(e){e?this.Ff=Na(this.Ff,23):this.Ff=Da(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,24)},set:function(e){e?this.Ff=Na(this.Ff,24):this.Ff=Da(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,25)},set:function(e){e?this.Ff=Na(this.Ff,25):this.Ff=Da(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,26)},set:function(e){e?this.Ff=Na(this.Ff,26):this.Ff=Da(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Rs(Eu,Sl);var Ap=function(){Eu.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Ra(this.Ff,14)},set:function(t){t?this.Ff=Na(this.Ff,14):this.Ff=Da(this.Ff,14)}}),this.password=!0};Rs(Ap,Eu);var un={CheckBox:{createAppearanceStream:function(){return{N:{On:un.CheckBox.YesNormal},D:{On:un.CheckBox.YesPushDown,Off:un.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=[],i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),a=gy(t,t.caption);return n.push("0.749023 g"),n.push("0 0 "+Kn(un.internal.getWidth(t))+" "+Kn(un.internal.getHeight(t))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+i+" "+Kn(a.fontSize)+" Tf "+r),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),e.stream=n.join(`
`),e},YesNormal:function(t){var e=Ul(t);e.scope=t.scope;var n=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color),r=[],a=un.internal.getHeight(t),l=un.internal.getWidth(t),d=gy(t,t.caption);return r.push("1 g"),r.push("0 0 "+Kn(l)+" "+Kn(a)+" re"),r.push("f"),r.push("q"),r.push("0 0 1 rg"),r.push("0 0 "+Kn(l-1)+" "+Kn(a-1)+" re"),r.push("W"),r.push("n"),r.push("0 g"),r.push("BT"),r.push("/"+n+" "+Kn(d.fontSize)+" Tf "+i),r.push(d.text),r.push("ET"),r.push("Q"),e.stream=r.join(`
`),e},OffPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kn(un.internal.getWidth(t))+" "+Kn(un.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:un.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=un.RadioButton.Circle.YesNormal,e.D[t]=un.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=Ul(t);e.scope=t.scope;var n=[],i=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=un.internal.Bezier_C,a=Number((i*r).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+Zc(un.internal.getWidth(t)/2)+" "+Zc(un.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),n.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),n.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),n.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=[],i=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),a=Number((r*un.internal.Bezier_C).toFixed(5)),l=Number((i*un.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Zc(un.internal.getWidth(t)/2)+" "+Zc(un.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+Zc(un.internal.getWidth(t)/2)+" "+Zc(un.internal.getHeight(t)/2)+" cm"),n.push(i+" 0 m"),n.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),n.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),n.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),n.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e},OffPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=[],i=un.internal.getWidth(t)<=un.internal.getHeight(t)?un.internal.getWidth(t)/4:un.internal.getHeight(t)/4;i=Number((.9*i).toFixed(5));var r=Number((2*i).toFixed(5)),a=Number((r*un.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+Zc(un.internal.getWidth(t)/2)+" "+Zc(un.internal.getHeight(t)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),e.stream=n.join(`
`),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:un.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=un.RadioButton.Cross.YesNormal,e.D[t]=un.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=Ul(t);e.scope=t.scope;var n=[],i=un.internal.calculateCross(t);return n.push("q"),n.push("1 1 "+Kn(un.internal.getWidth(t)-2)+" "+Kn(un.internal.getHeight(t)-2)+" re"),n.push("W"),n.push("n"),n.push(Kn(i.x1.x)+" "+Kn(i.x1.y)+" m"),n.push(Kn(i.x2.x)+" "+Kn(i.x2.y)+" l"),n.push(Kn(i.x4.x)+" "+Kn(i.x4.y)+" m"),n.push(Kn(i.x3.x)+" "+Kn(i.x3.y)+" l"),n.push("s"),n.push("Q"),e.stream=n.join(`
`),e},YesPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=un.internal.calculateCross(t),i=[];return i.push("0.749023 g"),i.push("0 0 "+Kn(un.internal.getWidth(t))+" "+Kn(un.internal.getHeight(t))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+Kn(un.internal.getWidth(t)-2)+" "+Kn(un.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(Kn(n.x1.x)+" "+Kn(n.x1.y)+" m"),i.push(Kn(n.x2.x)+" "+Kn(n.x2.y)+" l"),i.push(Kn(n.x4.x)+" "+Kn(n.x4.y)+" m"),i.push(Kn(n.x3.x)+" "+Kn(n.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join(`
`),e},OffPushDown:function(t){var e=Ul(t);e.scope=t.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+Kn(un.internal.getWidth(t))+" "+Kn(un.internal.getHeight(t))+" re"),n.push("f"),e.stream=n.join(`
`),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,n=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+n}};un.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=un.internal.getWidth(t),n=un.internal.getHeight(t),i=Math.min(e,n);return{x1:{x:(e-i)/2,y:(n-i)/2+i},x2:{x:(e-i)/2+i,y:(n-i)/2},x3:{x:(e-i)/2,y:(n-i)/2},x4:{x:(e-i)/2+i,y:(n-i)/2+i}}}},un.internal.getWidth=function(t){var e=0;return tr(t)==="object"&&(e=Z_(t.Rect[2])),e},un.internal.getHeight=function(t){var e=0;return tr(t)==="object"&&(e=Z_(t.Rect[3])),e};var LR=ma.addField=function(t){if(AR(this,t),!(t instanceof Sl))throw new Error("Invalid argument passed to jsPDF.addField.");var e;return(e=t).scope.internal.acroformPlugin.printedOut&&(e.scope.internal.acroformPlugin.printedOut=!1,e.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),e.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(e),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};ma.AcroFormChoiceField=bd,ma.AcroFormListBox=_d,ma.AcroFormComboBox=wd,ma.AcroFormEditBox=Sp,ma.AcroFormButton=Co,ma.AcroFormPushButton=Cp,ma.AcroFormRadioButton=Sd,ma.AcroFormCheckBox=Ep,ma.AcroFormTextField=Eu,ma.AcroFormPasswordField=Ap,ma.AcroFormAppearance=un,ma.AcroForm={ChoiceField:bd,ListBox:_d,ComboBox:wd,EditBox:Sp,Button:Co,PushButton:Cp,RadioButton:Sd,CheckBox:Ep,TextField:Eu,PasswordField:Ap,Appearance:un},mn.AcroForm={ChoiceField:bd,ListBox:_d,ComboBox:wd,EditBox:Sp,Button:Co,PushButton:Cp,RadioButton:Sd,CheckBox:Ep,TextField:Eu,PasswordField:Ap,Appearance:un};mn.AcroForm;function sS(t){return t.reduce(function(e,n,i){return e[n]=i,e},{})}(function(t){var e="addImage_";t.__addimage__={};var n="UNKNOWN",i={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=t.__addimage__.getImageFileTypeByImageData=function(Z,J){var Se,Ee,Ye,oe,ae,he=n;if((J=J||n)==="RGBA"||Z.data!==void 0&&Z.data instanceof Uint8ClampedArray&&"height"in Z&&"width"in Z)return"RGBA";if(ue(Z))for(ae in i)for(Ye=i[ae],Se=0;Se<Ye.length;Se+=1){for(oe=!0,Ee=0;Ee<Ye[Se].length;Ee+=1)if(Ye[Se][Ee]!==void 0&&Ye[Se][Ee]!==Z[Ee]){oe=!1;break}if(oe===!0){he=ae;break}}else for(ae in i)for(Ye=i[ae],Se=0;Se<Ye.length;Se+=1){for(oe=!0,Ee=0;Ee<Ye[Se].length;Ee+=1)if(Ye[Se][Ee]!==void 0&&Ye[Se][Ee]!==Z.charCodeAt(Ee)){oe=!1;break}if(oe===!0){he=ae;break}}return he===n&&J!==n&&(he=J),he},a=function Z(J){for(var Se=this.internal.write,Ee=this.internal.putStream,Ye=(0,this.internal.getFilters)();Ye.indexOf("FlateEncode")!==-1;)Ye.splice(Ye.indexOf("FlateEncode"),1);J.objectId=this.internal.newObject();var oe=[];if(oe.push({key:"Type",value:"/XObject"}),oe.push({key:"Subtype",value:"/Image"}),oe.push({key:"Width",value:J.width}),oe.push({key:"Height",value:J.height}),J.colorSpace===I.INDEXED?oe.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(J.palette.length/3-1)+" "+("sMask"in J&&J.sMask!==void 0?J.objectId+2:J.objectId+1)+" 0 R]"}):(oe.push({key:"ColorSpace",value:"/"+J.colorSpace}),J.colorSpace===I.DEVICE_CMYK&&oe.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),oe.push({key:"BitsPerComponent",value:J.bitsPerComponent}),"decodeParameters"in J&&J.decodeParameters!==void 0&&oe.push({key:"DecodeParms",value:"<<"+J.decodeParameters+">>"}),"transparency"in J&&Array.isArray(J.transparency)&&J.transparency.length>0){for(var ae="",he=0,De=J.transparency.length;he<De;he++)ae+=J.transparency[he]+" "+J.transparency[he]+" ";oe.push({key:"Mask",value:"["+ae+"]"})}J.sMask!==void 0&&oe.push({key:"SMask",value:J.objectId+1+" 0 R"});var ze=J.filter!==void 0?["/"+J.filter]:void 0;if(Ee({data:J.data,additionalKeyValues:oe,alreadyAppliedFilters:ze,objectId:J.objectId}),Se("endobj"),"sMask"in J&&J.sMask!==void 0){var ne,H=(ne=J.sMaskBitsPerComponent)!==null&&ne!==void 0?ne:J.bitsPerComponent,te={width:J.width,height:J.height,colorSpace:"DeviceGray",bitsPerComponent:H,data:J.sMask};"filter"in J&&(te.decodeParameters="/Predictor ".concat(J.predictor," /Colors 1 /BitsPerComponent ").concat(H," /Columns ").concat(J.width),te.filter=J.filter),Z.call(this,te)}if(J.colorSpace===I.INDEXED){var ce=this.internal.newObject();Ee({data:fe(new Uint8Array(J.palette)),objectId:ce}),Se("endobj")}},l=function(){var Z=this.internal.collections[e+"images"];for(var J in Z)a.call(this,Z[J])},d=function(){var Z,J=this.internal.collections[e+"images"],Se=this.internal.write;for(var Ee in J)Se("/I"+(Z=J[Ee]).index,Z.objectId,"0","R")},p=function(){this.internal.collections[e+"images"]||(this.internal.collections[e+"images"]={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",d))},g=function(){var Z=this.internal.collections[e+"images"];return p.call(this),Z},m=function(){return Object.keys(this.internal.collections[e+"images"]).length},_=function(Z){return typeof t["process"+Z.toUpperCase()]=="function"},A=function(Z){return tr(Z)==="object"&&Z.nodeType===1},x=function(Z,J){if(Z.nodeName==="IMG"&&Z.hasAttribute("src")){var Se=""+Z.getAttribute("src");if(Se.indexOf("data:image/")===0)return wp(unescape(Se).split("base64,").pop());var Ee=t.loadFile(Se,!0);if(Ee!==void 0)return Ee}if(Z.nodeName==="CANVAS"){if(Z.width===0||Z.height===0)throw new Error("Given canvas must have data. Canvas width: "+Z.width+", height: "+Z.height);var Ye;switch(J){case"PNG":Ye="image/png";break;case"WEBP":Ye="image/webp";break;default:Ye="image/jpeg"}return wp(Z.toDataURL(Ye,1).split("base64,").pop())}},R=function(Z){var J=this.internal.collections[e+"images"];if(J){for(var Se in J)if(Z===J[Se].alias)return J[Se]}},M=function(Z,J,Se){return Z||J||(Z=-96,J=-96),Z<0&&(Z=-1*Se.width*72/Z/this.internal.scaleFactor),J<0&&(J=-1*Se.height*72/J/this.internal.scaleFactor),Z===0&&(Z=J*Se.width/Se.height),J===0&&(J=Z*Se.height/Se.width),[Z,J]},k=function(Z,J,Se,Ee,Ye,oe){var ae=M.call(this,Se,Ee,Ye),he=this.internal.getCoordinateString,De=this.internal.getVerticalCoordinateString,ze=g.call(this);if(Se=ae[0],Ee=ae[1],ze[Ye.index]=Ye,oe){oe*=Math.PI/180;var ne=Math.cos(oe),H=Math.sin(oe),te=function(Q){return Q.toFixed(4)},ce=[te(ne),te(H),te(-1*H),te(ne),0,0,"cm"]}this.internal.write("q"),oe?(this.internal.write([1,"0","0",1,he(Z),De(J+Ee),"cm"].join(" ")),this.internal.write(ce.join(" ")),this.internal.write([he(Se),"0","0",he(Ee),"0","0","cm"].join(" "))):this.internal.write([he(Se),"0","0",he(Ee),he(Z),De(J+Ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ye.index+" Do"),this.internal.write("Q")},I=t.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};t.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var Y=t.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},B=t.__addimage__.sHashCode=function(Z){var J,Se,Ee=0;if(typeof Z=="string")for(Se=Z.length,J=0;J<Se;J++)Ee=(Ee<<5)-Ee+Z.charCodeAt(J),Ee|=0;else if(ue(Z))for(Se=Z.byteLength/2,J=0;J<Se;J++)Ee=(Ee<<5)-Ee+Z[J],Ee|=0;return Ee},V=t.__addimage__.validateStringAsBase64=function(Z){(Z=Z||"").toString().trim();var J=!0;return Z.length===0&&(J=!1),Z.length%4!=0&&(J=!1),/^[A-Za-z0-9+/]+$/.test(Z.substr(0,Z.length-2))===!1&&(J=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(Z.substr(-2))===!1&&(J=!1),J},ee=t.__addimage__.extractImageFromDataUrl=function(Z){if(Z==null||!(Z=Z.trim()).startsWith("data:"))return null;var J=Z.indexOf(",");return J<0?null:Z.substring(0,J).trim().endsWith("base64")?Z.substring(J+1):null};t.__addimage__.isArrayBuffer=function(Z){return Z instanceof ArrayBuffer};var ue=t.__addimage__.isArrayBufferView=function(Z){return Z instanceof Int8Array||Z instanceof Uint8Array||Z instanceof Uint8ClampedArray||Z instanceof Int16Array||Z instanceof Uint16Array||Z instanceof Int32Array||Z instanceof Uint32Array||Z instanceof Float32Array||Z instanceof Float64Array},_e=t.__addimage__.binaryStringToUint8Array=function(Z){for(var J=Z.length,Se=new Uint8Array(J),Ee=0;Ee<J;Ee++)Se[Ee]=Z.charCodeAt(Ee);return Se},fe=t.__addimage__.arrayBufferToBinaryString=function(Z){for(var J="",Se=ue(Z)?Z:new Uint8Array(Z),Ee=0;Ee<Se.length;Ee+=8192)J+=String.fromCharCode.apply(null,Se.subarray(Ee,Ee+8192));return J};t.addImage=function(){var Z,J,Se,Ee,Ye,oe,ae,he,De;if(typeof arguments[1]=="number"?(J=n,Se=arguments[1],Ee=arguments[2],Ye=arguments[3],oe=arguments[4],ae=arguments[5],he=arguments[6],De=arguments[7]):(J=arguments[1],Se=arguments[2],Ee=arguments[3],Ye=arguments[4],oe=arguments[5],ae=arguments[6],he=arguments[7],De=arguments[8]),tr(Z=arguments[0])==="object"&&!A(Z)&&"imageData"in Z){var ze=Z;Z=ze.imageData,J=ze.format||J||n,Se=ze.x||Se||0,Ee=ze.y||Ee||0,Ye=ze.w||ze.width||Ye,oe=ze.h||ze.height||oe,ae=ze.alias||ae,he=ze.compression||he,De=ze.rotation||ze.angle||De}var ne=this.internal.getFilters();if(he===void 0&&ne.indexOf("FlateEncode")!==-1&&(he="SLOW"),isNaN(Se)||isNaN(Ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var H=G.call(this,Z,J,ae,he);return k.call(this,Se,Ee,Ye,oe,H,De),this};var G=function(Z,J,Se,Ee){var Ye,oe,ae;if(typeof Z=="string"&&r(Z)===n){Z=unescape(Z);var he=me(Z,!1);(he!==""||(he=t.loadFile(Z,!0))!==void 0)&&(Z=he)}if(A(Z)&&(Z=x(Z,J)),J=r(Z,J),!_(J))throw new Error("addImage does not support files of type '"+J+"', please ensure that a plugin for '"+J+"' support is added.");if(((ae=Se)==null||ae.length===0)&&(Se=(function(De){return typeof De=="string"||ue(De)?B(De):ue(De.data)?B(De.data):null})(Z)),(Ye=R.call(this,Se))||(Z instanceof Uint8Array||J==="RGBA"||(oe=Z,Z=_e(Z)),Ye=this["process"+J.toUpperCase()](Z,m.call(this),Se,(function(De){return De&&typeof De=="string"&&(De=De.toUpperCase()),De in t.image_compression?De:Y.NONE})(Ee),oe)),!Ye)throw new Error("An unknown error occurred whilst processing the image.");return Ye},me=t.__addimage__.convertBase64ToBinaryString=function(Z,J){J=typeof J!="boolean"||J;var Se,Ee="";if(typeof Z=="string"){var Ye;Se=(Ye=ee(Z))!==null&&Ye!==void 0?Ye:Z;try{Ee=wp(Se)}catch(oe){if(J)throw V(Se)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+oe.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ee};t.getImageProperties=function(Z){var J,Se,Ee="";if(A(Z)&&(Z=x(Z)),typeof Z=="string"&&r(Z)===n&&((Ee=me(Z,!1))===""&&(Ee=t.loadFile(Z)||""),Z=Ee),Se=r(Z),!_(Se))throw new Error("addImage does not support files of type '"+Se+"', please ensure that a plugin for '"+Se+"' support is added.");if(Z instanceof Uint8Array||(Z=_e(Z)),!(J=this["process"+Se.toUpperCase()](Z)))throw new Error("An unknown error occurred whilst processing the image");return J.fileType=Se,J}})(mn.API),(function(t){var e=function(n){if(n!==void 0&&n!="")return!0};mn.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),t.events.push(["putPage",function(n){for(var i,r,a,l=this.internal.getCoordinateString,d=this.internal.getVerticalCoordinateString,p=this.internal.getPageInfoByObjId(n.objId),g=n.pageContext.annotations,m=!1,_=0;_<g.length&&!m;_++)switch((i=g[_]).type){case"link":(e(i.options.url)||e(i.options.pageNumber))&&(m=!0);break;case"reference":case"text":case"freetext":m=!0}if(m!=0){this.internal.write("/Annots [");for(var A=0;A<g.length;A++){i=g[A];var x=this.internal.pdfEscape,R=this.internal.getEncryptor(n.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var M=this.internal.newAdditionalObject(),k=this.internal.newAdditionalObject(),I=this.internal.getEncryptor(M.objId),Y=i.title||"Note";a="<</Type /Annot /Subtype /Text "+(r="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y)+"] ")+"/Contents ("+x(I(i.contents))+")",a+=" /Popup "+k.objId+" 0 R",a+=" /P "+p.objId+" 0 R",a+=" /T ("+x(I(Y))+") >>",M.content=a;var B=M.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(r="/Rect ["+l(i.bounds.x+30)+" "+d(i.bounds.y+i.bounds.h)+" "+l(i.bounds.x+i.bounds.w+30)+" "+d(i.bounds.y)+"] ")+" /Parent "+B,i.open&&(a+=" /Open true"),a+=" >>",k.content=a,this.internal.write(M.objId,"0 R",k.objId,"0 R");break;case"freetext":r="/Rect ["+l(i.bounds.x)+" "+d(i.bounds.y)+" "+l(i.bounds.x+i.bounds.w)+" "+d(i.bounds.y+i.bounds.h)+"] ";var V=i.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+r+"/Contents ("+x(R(i.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+V+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(i.options.name){var ee=this.annotations._nameMap[i.options.name];i.options.pageNumber=ee.page,i.options.top=ee.y}else i.options.top||(i.options.top=0);if(r="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",a="",i.options.url)a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /A <</S /URI /URI ("+x(R(i.options.url))+") >>";else if(i.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+r+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,a+=" /FitV "+i.options.left+"]";break;default:var ue=d(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),a+=" /XYZ "+i.options.left+" "+ue+" "+i.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),t.createAnnotation=function(n){var i=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":i.pageContext.annotations.push(n)}},t.link=function(n,i,r,a,l){var d=this.internal.getCurrentPageInfo(),p=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;d.pageContext.annotations.push({finalBounds:{x:p(n),y:g(i),w:p(n+r),h:g(i+a)},options:l,type:"link"})},t.textWithLink=function(n,i,r,a){var l,d,p=this.getTextWidth(n),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){d=a.maxWidth;var m=this.splitTextToSize(n,d).length;l=Math.ceil(g*m)}else d=p,l=g;return this.text(n,i,r,a),r+=.2*g,a.align==="center"&&(i-=p/2),a.align==="right"&&(i-=p),this.link(i,r-g,d,l,a),p},t.getTextWidth=function(n){var i=this.internal.getFontSize();return this.getStringUnitWidth(n)*i/this.internal.scaleFactor}})(mn.API),(function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},r=[1570,1571,1573,1575];t.__arabicParser__={};var a=t.__arabicParser__.isInArabicSubstitutionA=function(M){return e[M.charCodeAt(0)]!==void 0},l=t.__arabicParser__.isArabicLetter=function(M){return typeof M=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(M)},d=t.__arabicParser__.isArabicEndLetter=function(M){return l(M)&&a(M)&&e[M.charCodeAt(0)].length<=2},p=t.__arabicParser__.isArabicAlfLetter=function(M){return l(M)&&r.indexOf(M.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(M){return l(M)&&a(M)&&e[M.charCodeAt(0)].length>=1};var g=t.__arabicParser__.arabicLetterHasFinalForm=function(M){return l(M)&&a(M)&&e[M.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(M){return l(M)&&a(M)&&e[M.charCodeAt(0)].length>=3};var m=t.__arabicParser__.arabicLetterHasMedialForm=function(M){return l(M)&&a(M)&&e[M.charCodeAt(0)].length==4},_=t.__arabicParser__.resolveLigatures=function(M){var k=0,I=n,Y="",B=0;for(k=0;k<M.length;k+=1)I[M.charCodeAt(k)]!==void 0?(B++,typeof(I=I[M.charCodeAt(k)])=="number"&&(Y+=String.fromCharCode(I),I=n,B=0),k===M.length-1&&(I=n,Y+=M.charAt(k-(B-1)),k-=B-1,B=0)):(I=n,Y+=M.charAt(k-B),k-=B,B=0);return Y};t.__arabicParser__.isArabicDiacritic=function(M){return M!==void 0&&i[M.charCodeAt(0)]!==void 0};var A=t.__arabicParser__.getCorrectForm=function(M,k,I){return l(M)?a(M)===!1?-1:!g(M)||!l(k)&&!l(I)||!l(I)&&d(k)||d(M)&&!l(k)||d(M)&&p(k)||d(M)&&d(k)?0:m(M)&&l(k)&&!d(k)&&l(I)&&g(I)?3:d(M)||!l(I)?1:2:-1},x=function(M){var k=0,I=0,Y=0,B="",V="",ee="",ue=(M=M||"").split("\\s+"),_e=[];for(k=0;k<ue.length;k+=1){for(_e.push(""),I=0;I<ue[k].length;I+=1)B=ue[k][I],V=ue[k][I-1],ee=ue[k][I+1],l(B)?(Y=A(B,V,ee),_e[k]+=Y!==-1?String.fromCharCode(e[B.charCodeAt(0)][Y]):B):_e[k]+=B;_e[k]=_(_e[k])}return _e.join(" ")},R=t.__arabicParser__.processArabic=t.processArabic=function(){var M,k=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,I=[];if(Array.isArray(k)){var Y=0;for(I=[],Y=0;Y<k.length;Y+=1)Array.isArray(k[Y])?I.push([x(k[Y][0]),k[Y][1],k[Y][2]]):I.push([x(k[Y])]);M=I}else M=x(k);return typeof arguments[0]=="string"?M:(arguments[0].text=M,arguments[0])};t.events.push(["preProcessText",R])})(mn.API),mn.API.autoPrint=function(t){var e;return(t=t||{}).variant=t.variant||"non-conform",t.variant==="javascript"?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},(function(t){var e=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(d){n=d}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(d){i=isNaN(d)||Number.isInteger(d)===!1||d<0?150:d,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var r=300;Object.defineProperty(this,"height",{get:function(){return r},set:function(d){r=isNaN(d)||Number.isInteger(d)===!1||d<0?300:d,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=r+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(d){a=d}});var l={};Object.defineProperty(this,"style",{get:function(){return l},set:function(d){l=d}}),Object.defineProperty(this,"parentNode",{})};e.prototype.getContext=function(n,i){var r;if((n=n||"2d")!=="2d")return null;for(r in i)this.pdf.context2d.hasOwnProperty(r)&&(this.pdf.context2d[r]=i[r]);return this.pdf.context2d._canvas=this,this.pdf.context2d},e.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},t.events.push(["initialized",function(){this.canvas=new e,this.canvas.pdf=this}])})(mn.API),(function(t){var e={left:0,top:0,bottom:0,right:0},n=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},e),this.internal.__cell__.margins.width=this.getPageWidth(),r.call(this))},r=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var p=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return p},set:function(M){p=M}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(M){g=M}});var m=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return m},set:function(M){m=M}});var _=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return _},set:function(M){_=M}});var A=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return A},set:function(M){A=M}});var x=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return x},set:function(M){x=M}});var R=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return R},set:function(M){R=M}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},t.setHeaderFunction=function(p){return i.call(this),this.internal.__cell__.headerFunction=typeof p=="function"?p:void 0,this},t.getTextDimensions=function(p,g){i.call(this);var m=(g=g||{}).fontSize||this.getFontSize(),_=g.font||this.getFont(),A=g.scaleFactor||this.internal.scaleFactor,x=0,R=0,M=0,k=this;if(!Array.isArray(p)&&typeof p!="string"){if(typeof p!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");p=String(p)}var I=g.maxWidth;I>0?typeof p=="string"?p=this.splitTextToSize(p,I):Object.prototype.toString.call(p)==="[object Array]"&&(p=p.reduce(function(B,V){return B.concat(k.splitTextToSize(V,I))},[])):p=Array.isArray(p)?p:[p];for(var Y=0;Y<p.length;Y++)x<(M=this.getStringUnitWidth(p[Y],{font:_})*m)&&(x=M);return x!==0&&(R=p.length),{w:x/=A,h:Math.max((R*m*this.getLineHeightFactor()-m*(this.getLineHeightFactor()-1))/A,0)}},t.cellAddPage=function(){i.call(this),this.addPage();var p=this.internal.__cell__.margins||e;return this.internal.__cell__.lastCell=new a(p.left,p.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var l=t.cell=function(){var p;p=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5],arguments[6]),i.call(this);var g=this.internal.__cell__.lastCell,m=this.internal.__cell__.padding,_=this.internal.__cell__.margins||e,A=this.internal.__cell__.tableHeaderRow,x=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===p.lineNumber?(p.x=(g.x||0)+(g.width||0),p.y=g.y||0):g.y+g.height+p.height+_.bottom>this.getPageHeight()?(this.cellAddPage(),p.y=_.top,x&&A&&(this.printHeaderRow(p.lineNumber,!0),p.y+=A[0].height)):p.y=g.y+g.height||p.y),p.text[0]!==void 0&&(this.rect(p.x,p.y,p.width,p.height,n===!0?"FD":void 0),p.align==="right"?this.text(p.text,p.x+p.width-m,p.y+m,{align:"right",baseline:"top"}):p.align==="center"?this.text(p.text,p.x+p.width/2,p.y+m,{align:"center",baseline:"top",maxWidth:p.width-m-m}):this.text(p.text,p.x+m,p.y+m,{align:"left",baseline:"top",maxWidth:p.width-m-m})),this.internal.__cell__.lastCell=p,this};t.table=function(p,g,m,_,A){if(i.call(this),!m)throw new Error("No data for PDF table.");var x,R,M,k,I=[],Y=[],B=[],V={},ee={},ue=[],_e=[],fe=(A=A||{}).autoSize||!1,G=A.printHeaders!==!1,me=A.css&&A.css["font-size"]!==void 0?16*A.css["font-size"]:A.fontSize||12,Z=A.margins||Object.assign({width:this.getPageWidth()},e),J=typeof A.padding=="number"?A.padding:3,Se=A.headerBackgroundColor||"#c8c8c8",Ee=A.headerTextColor||"#000";if(r.call(this),this.internal.__cell__.printHeaders=G,this.internal.__cell__.margins=Z,this.internal.__cell__.table_font_size=me,this.internal.__cell__.padding=J,this.internal.__cell__.headerBackgroundColor=Se,this.internal.__cell__.headerTextColor=Ee,this.setFontSize(me),_==null)Y=I=Object.keys(m[0]),B=I.map(function(){return"left"});else if(Array.isArray(_)&&tr(_[0])==="object")for(I=_.map(function(ze){return ze.name}),Y=_.map(function(ze){return ze.prompt||ze.name||""}),B=_.map(function(ze){return ze.align||"left"}),x=0;x<_.length;x+=1)ee[_[x].name]=.7499990551181103*_[x].width;else Array.isArray(_)&&typeof _[0]=="string"&&(Y=I=_,B=I.map(function(){return"left"}));if(fe||Array.isArray(_)&&typeof _[0]=="string")for(x=0;x<I.length;x+=1){for(V[k=I[x]]=m.map(function(ze){return ze[k]}),this.setFont(void 0,"bold"),ue.push(this.getTextDimensions(Y[x],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),R=V[k],this.setFont(void 0,"normal"),M=0;M<R.length;M+=1)ue.push(this.getTextDimensions(R[M],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ee[k]=Math.max.apply(null,ue)+J+J,ue=[]}if(G){var Ye={};for(x=0;x<I.length;x+=1)Ye[I[x]]={},Ye[I[x]].text=Y[x],Ye[I[x]].align=B[x];var oe=d.call(this,Ye,ee);_e=I.map(function(ze){return new a(p,g,ee[ze],oe,Ye[ze].text,void 0,Ye[ze].align)}),this.setTableHeaderRow(_e),this.printHeaderRow(1,!1)}var ae=_.reduce(function(ze,ne){return ze[ne.name]=ne.align,ze},{});for(x=0;x<m.length;x+=1){"rowStart"in A&&A.rowStart instanceof Function&&A.rowStart({row:x,data:m[x]},this);var he=d.call(this,m[x],ee);for(M=0;M<I.length;M+=1){var De=m[x][I[M]];"cellStart"in A&&A.cellStart instanceof Function&&A.cellStart({row:x,col:M,data:De},this),l.call(this,new a(p,g,ee[I[M]],he,De,x+2,ae[I[M]]))}}return this.internal.__cell__.table_x=p,this.internal.__cell__.table_y=g,this};var d=function(p,g){var m=this.internal.__cell__.padding,_=this.internal.__cell__.table_font_size,A=this.internal.scaleFactor;return Object.keys(p).map(function(x){var R=p[x];return this.splitTextToSize(R.hasOwnProperty("text")?R.text:R,g[x]-m-m)},this).map(function(x){return this.getLineHeightFactor()*x.length*_/A+m+m},this).reduce(function(x,R){return Math.max(x,R)},0)};t.setTableHeaderRow=function(p){i.call(this),this.internal.__cell__.tableHeaderRow=p},t.printHeaderRow=function(p,g){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var m;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var _=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(_[0],_[1],_[2],_[3],void 0,-1)}this.setFont(void 0,"bold");for(var A=[],x=0;x<this.internal.__cell__.tableHeaderRow.length;x+=1){m=this.internal.__cell__.tableHeaderRow[x].clone(),g&&(m.y=this.internal.__cell__.margins.top||0,A.push(m)),m.lineNumber=p;var R=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),l.call(this,m),this.setTextColor(R)}A.length>0&&this.setTableHeaderRow(A),this.setFont(void 0,"normal"),n=!1}})(mn.API);var lS={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},cS=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],my=sS(cS),uS=[100,200,300,400,500,600,700,800,900],TR=sS(uS);function _v(t){var e=t.family.replace(/"|'/g,"").toLowerCase(),n=(function(a){return lS[a=a||"normal"]?a:"normal"})(t.style),i=(function(a){return a?typeof a=="number"?a>=100&&a<=900&&a%100==0?a:400:/^\d00$/.test(a)?parseInt(a):a==="bold"?700:400:400})(t.weight),r=(function(a){return typeof my[a=a||"normal"]=="number"?a:"normal"})(t.stretch);return{family:e,style:n,weight:i,stretch:r,src:t.src||[],ref:t.ref||{name:e,style:[r,n,i].join(" ")}}}function K_(t,e,n,i){var r;for(r=n;r>=0&&r<e.length;r+=i)if(t[e[r]])return t[e[r]];for(r=n;r>=0&&r<e.length;r-=i)if(t[e[r]])return t[e[r]]}var jR={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},X_={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function Q_(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function $_(t){return t.trimLeft()}function kR(t,e){for(var n=0;n<t.length;){if(t.charAt(n)===e)return[t.substring(0,n),t.substring(n+1)];n+=1}return null}function RR(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return e===null?null:[e[0],t.substring(e[0].length)]}var rp,J_,e2,hd,ap,t2,n2,i2,wv=["times"];function r2(t,e,n,i,r){var a=4,l=o2;switch(r){case mn.API.image_compression.FAST:a=1,l=a2;break;case mn.API.image_compression.MEDIUM:a=6,l=s2;break;case mn.API.image_compression.SLOW:a=9,l=l2}t=(function(p,g,m,_){for(var A,x=p.length/g,R=new Uint8Array(p.length+x),M=[NR,a2,o2,s2,l2],k=0;k<x;k+=1){var I=k*g,Y=p.subarray(I,I+g);if(_)R.set(_(Y,m,A),I+k);else{for(var B=M.length,V=[],ee=0;ee<B;ee+=1)V[ee]=M[ee](Y,m,A);var ue=MR(V.concat());R.set(V[ue],I+k)}A=Y}return R})(t,e,Math.ceil(n*i/8),l);var d=cy(t,{level:a});return mn.API.__addimage__.arrayBufferToBinaryString(d)}function NR(t){var e=Array.apply([],t);return e.unshift(0),e}function a2(t,e){var n=t.length,i=[];i[0]=1;for(var r=0;r<n;r+=1){var a=t[r-e]||0;i[r+1]=t[r]-a+256&255}return i}function o2(t,e,n){var i=t.length,r=[];r[0]=2;for(var a=0;a<i;a+=1){var l=n&&n[a]||0;r[a+1]=t[a]-l+256&255}return r}function s2(t,e,n){var i=t.length,r=[];r[0]=3;for(var a=0;a<i;a+=1){var l=t[a-e]||0,d=n&&n[a]||0;r[a+1]=t[a]+256-(l+d>>>1)&255}return r}function l2(t,e,n){var i=t.length,r=[];r[0]=4;for(var a=0;a<i;a+=1){var l=DR(t[a-e]||0,n&&n[a]||0,n&&n[a-e]||0);r[a+1]=t[a]-l+256&255}return r}function DR(t,e,n){if(t===e&&e===n)return t;var i=Math.abs(e-n),r=Math.abs(t-n),a=Math.abs(t+e-n-n);return i<=r&&i<=a?t:r<=a?e:n}function MR(t){var e=t.map(function(n){return n.reduce(function(i,r){return i+Math.abs(r)},0)});return e.indexOf(Math.min.apply(null,e))}function Sv(t,e,n){var i=e*n,r=Math.floor(i/8),a=16-(i-8*r+n),l=(1<<n)-1;return dS(t,r)>>a&l}function c2(t,e,n,i){var r=n*i,a=Math.floor(r/8),l=16-(r-8*a+i),d=(1<<i)-1,p=(e&d)<<l;(function(g,m,_){if(m+1<g.byteLength)g.setUint16(m,_,!1);else{var A=_>>8&255;g.setUint8(m,A)}})(t,a,dS(t,a)&~(d<<l)&65535|p)}function dS(t,e){return e+1<t.byteLength?t.getUint16(e,!1):t.getUint8(e)<<8}function OR(t){var e=0;if(t[e++]!==71||t[e++]!==73||t[e++]!==70||t[e++]!==56||(t[e++]+1&253)!=56||t[e++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=t[e++]|t[e++]<<8,i=t[e++]|t[e++]<<8,r=t[e++],a=r>>7,l=1<<1+(7&r);t[e++],t[e++];var d=null,p=null;a&&(d=e,p=l,e+=3*l);var g=!0,m=[],_=0,A=null,x=0,R=null;for(this.width=n,this.height=i;g&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(t[e]!==11||t[e+1]==78&&t[e+2]==69&&t[e+3]==84&&t[e+4]==83&&t[e+5]==67&&t[e+6]==65&&t[e+7]==80&&t[e+8]==69&&t[e+9]==50&&t[e+10]==46&&t[e+11]==48&&t[e+12]==3&&t[e+13]==1&&t[e+16]==0)e+=14,R=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;case 249:if(t[e++]!==4||t[e+4]!==0)throw new Error("Invalid graphics extension block.");var M=t[e++];_=t[e++]|t[e++]<<8,A=t[e++],1&M||(A=null),x=M>>2&7,e++;break;case 254:for(;;){if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}break;default:throw new Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var k=t[e++]|t[e++]<<8,I=t[e++]|t[e++]<<8,Y=t[e++]|t[e++]<<8,B=t[e++]|t[e++]<<8,V=t[e++],ee=V>>6&1,ue=1<<1+(7&V),_e=d,fe=p,G=!1;V>>7&&(G=!0,_e=e,fe=ue,e+=3*ue);var me=e;for(e++;;){var Z;if(!((Z=t[e++])>=0))throw Error("Invalid block size");if(Z===0)break;e+=Z}m.push({x:k,y:I,width:Y,height:B,has_local_palette:G,palette_offset:_e,palette_size:fe,data_offset:me,data_length:e-me,transparent_index:A,interlaced:!!ee,delay:_,disposal:x});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return m.length},this.loopCount=function(){return R},this.frameInfo=function(J){if(J<0||J>=m.length)throw new Error("Frame index out of range.");return m[J]},this.decodeAndBlitFrameBGRA=function(J,Se){var Ee=this.frameInfo(J),Ye=Ee.width*Ee.height,oe=new Uint8Array(Ye);u2(t,Ee.data_offset,oe,Ye);var ae=Ee.palette_offset,he=Ee.transparent_index;he===null&&(he=256);var De=Ee.width,ze=n-De,ne=De,H=4*(Ee.y*n+Ee.x),te=4*((Ee.y+Ee.height)*n+Ee.x),ce=H,Q=4*ze;Ee.interlaced===!0&&(Q+=4*n*7);for(var xe=8,Te=0,Le=oe.length;Te<Le;++Te){var Ge=oe[Te];if(ne===0&&(ne=De,(ce+=Q)>=te&&(Q=4*ze+4*n*(xe-1),ce=H+(De+ze)*(xe<<1),xe>>=1)),Ge===he)ce+=4;else{var Re=t[ae+3*Ge],gt=t[ae+3*Ge+1],mt=t[ae+3*Ge+2];Se[ce++]=mt,Se[ce++]=gt,Se[ce++]=Re,Se[ce++]=255}--ne}},this.decodeAndBlitFrameRGBA=function(J,Se){var Ee=this.frameInfo(J),Ye=Ee.width*Ee.height,oe=new Uint8Array(Ye);u2(t,Ee.data_offset,oe,Ye);var ae=Ee.palette_offset,he=Ee.transparent_index;he===null&&(he=256);var De=Ee.width,ze=n-De,ne=De,H=4*(Ee.y*n+Ee.x),te=4*((Ee.y+Ee.height)*n+Ee.x),ce=H,Q=4*ze;Ee.interlaced===!0&&(Q+=4*n*7);for(var xe=8,Te=0,Le=oe.length;Te<Le;++Te){var Ge=oe[Te];if(ne===0&&(ne=De,(ce+=Q)>=te&&(Q=4*ze+4*n*(xe-1),ce=H+(De+ze)*(xe<<1),xe>>=1)),Ge===he)ce+=4;else{var Re=t[ae+3*Ge],gt=t[ae+3*Ge+1],mt=t[ae+3*Ge+2];Se[ce++]=Re,Se[ce++]=gt,Se[ce++]=mt,Se[ce++]=255}--ne}}}function u2(t,e,n,i){for(var r=t[e++],a=1<<r,l=a+1,d=l+1,p=r+1,g=(1<<p)-1,m=0,_=0,A=0,x=t[e++],R=new Int32Array(4096),M=null;;){for(;m<16&&x!==0;)_|=t[e++]<<m,m+=8,x===1?x=t[e++]:--x;if(m<p)break;var k=_&g;if(_>>=p,m-=p,k!==a){if(k===l)break;for(var I=k<d?k:M,Y=0,B=I;B>a;)B=R[B]>>8,++Y;var V=B;if(A+Y+(I!==k?1:0)>i)return void br.log("Warning, gif stream longer than expected.");n[A++]=V;var ee=A+=Y;for(I!==k&&(n[A++]=V),B=I;Y--;)B=R[B],n[--ee]=255&B,B>>=8;M!==null&&d<4096&&(R[d++]=M<<8|V,d>=g+1&&p<12&&(++p,g=g<<1|1)),M=k}else d=l+1,g=(1<<(p=r+1))-1,M=null}return A!==i&&br.log("Warning, gif stream shorter than expected."),n}function Cv(t){var e,n,i,r,a,l=Math.floor,d=new Array(64),p=new Array(64),g=new Array(64),m=new Array(64),_=new Array(65535),A=new Array(65535),x=new Array(64),R=new Array(64),M=[],k=0,I=7,Y=new Array(64),B=new Array(64),V=new Array(64),ee=new Array(256),ue=new Array(2048),_e=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],fe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],G=[0,1,2,3,4,5,6,7,8,9,10,11],me=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],Z=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],J=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ye=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function oe(H,te){for(var ce=0,Q=0,xe=new Array,Te=1;Te<=16;Te++){for(var Le=1;Le<=H[Te];Le++)xe[te[Q]]=[],xe[te[Q]][0]=ce,xe[te[Q]][1]=Te,Q++,ce++;ce*=2}return xe}function ae(H){for(var te=H[0],ce=H[1]-1;ce>=0;)te&1<<ce&&(k|=1<<I),ce--,--I<0&&(k==255?(he(255),he(0)):he(k),I=7,k=0)}function he(H){M.push(H)}function De(H){he(H>>8&255),he(255&H)}function ze(H,te,ce,Q,xe){for(var Te,Le=xe[0],Ge=xe[240],Re=(function(At,sn){var kt,Yt,Vt,xn,kn,$t,Cn,In,Jt,En,en=0;for(Jt=0;Jt<8;++Jt){kt=At[en],Yt=At[en+1],Vt=At[en+2],xn=At[en+3],kn=At[en+4],$t=At[en+5],Cn=At[en+6];var Ni=kt+(In=At[en+7]),Hn=kt-In,hn=Yt+Cn,gn=Yt-Cn,Nt=Vt+$t,tn=Vt-$t,ui=xn+kn,vn=xn-kn,vt=Ni+ui,yi=Ni-ui,Pn=hn+Nt,ln=hn-Nt;At[en]=vt+Pn,At[en+4]=vt-Pn;var ri=.707106781*(ln+yi);At[en+2]=yi+ri,At[en+6]=yi-ri;var Ya=.382683433*((vt=vn+tn)-(ln=gn+Hn)),ia=.5411961*vt+Ya,zo=1.306562965*ln+Ya,Wr=.707106781*(Pn=tn+gn),nn=Hn+Wr,Ao=Hn-Wr;At[en+5]=Ao+ia,At[en+3]=Ao-ia,At[en+1]=nn+zo,At[en+7]=nn-zo,en+=8}for(en=0,Jt=0;Jt<8;++Jt){kt=At[en],Yt=At[en+8],Vt=At[en+16],xn=At[en+24],kn=At[en+32],$t=At[en+40],Cn=At[en+48];var Za=kt+(In=At[en+56]),ei=kt-In,xi=Yt+Cn,si=Yt-Cn,Ut=Vt+$t,nr=Vt-$t,fo=xn+kn,ra=xn-kn,ti=Za+fo,bi=Za-fo,Zi=xi+Ut,pr=xi-Ut;At[en]=ti+Zi,At[en+32]=ti-Zi;var Ka=.707106781*(pr+bi);At[en+16]=bi+Ka,At[en+48]=bi-Ka;var Oa=.382683433*((ti=ra+nr)-(pr=si+ei)),ho=.5411961*ti+Oa,Gr=1.306562965*pr+Oa,Jo=.707106781*(Zi=nr+si),Pa=ei+Jo,hi=ei-Jo;At[en+40]=hi+ho,At[en+24]=hi-ho,At[en+8]=Pa+Gr,At[en+56]=Pa-Gr,en++}for(Jt=0;Jt<64;++Jt)En=At[Jt]*sn[Jt],x[Jt]=En>0?En+.5|0:En-.5|0;return x})(H,te),gt=0;gt<64;++gt)R[_e[gt]]=Re[gt];var mt=R[0]-ce;ce=R[0],mt==0?ae(Q[0]):(ae(Q[A[Te=32767+mt]]),ae(_[Te]));for(var Ot=63;Ot>0&&R[Ot]==0;)Ot--;if(Ot==0)return ae(Le),ce;for(var Kt,ye=1;ye<=Ot;){for(var Pt=ye;R[ye]==0&&ye<=Ot;)++ye;var Dn=ye-Pt;if(Dn>=16){Kt=Dn>>4;for(var dn=1;dn<=Kt;++dn)ae(Ge);Dn&=15}Te=32767+R[ye],ae(xe[(Dn<<4)+A[Te]]),ae(_[Te]),ye++}return Ot!=63&&ae(Le),ce}function ne(H){H=Math.min(Math.max(H,1),100),a!=H&&((function(te){for(var ce=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Q=0;Q<64;Q++){var xe=l((ce[Q]*te+50)/100);xe=Math.min(Math.max(xe,1),255),d[_e[Q]]=xe}for(var Te=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Le=0;Le<64;Le++){var Ge=l((Te[Le]*te+50)/100);Ge=Math.min(Math.max(Ge,1),255),p[_e[Le]]=Ge}for(var Re=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],gt=0,mt=0;mt<8;mt++)for(var Ot=0;Ot<8;Ot++)g[gt]=1/(d[_e[gt]]*Re[mt]*Re[Ot]*8),m[gt]=1/(p[_e[gt]]*Re[mt]*Re[Ot]*8),gt++})(H<50?Math.floor(5e3/H):Math.floor(200-2*H)),a=H)}this.encode=function(H,te){te&&ne(te),M=new Array,k=0,I=7,De(65496),De(65504),De(16),he(74),he(70),he(73),he(70),he(0),he(1),he(1),he(0),De(1),De(1),he(0),he(0),(function(){De(65499),De(132),he(0);for(var Yt=0;Yt<64;Yt++)he(d[Yt]);he(1);for(var Vt=0;Vt<64;Vt++)he(p[Vt])})(),(function(Yt,Vt){De(65472),De(17),he(8),De(Vt),De(Yt),he(3),he(1),he(17),he(0),he(2),he(17),he(1),he(3),he(17),he(1)})(H.width,H.height),(function(){De(65476),De(418),he(0);for(var Yt=0;Yt<16;Yt++)he(fe[Yt+1]);for(var Vt=0;Vt<=11;Vt++)he(G[Vt]);he(16);for(var xn=0;xn<16;xn++)he(me[xn+1]);for(var kn=0;kn<=161;kn++)he(Z[kn]);he(1);for(var $t=0;$t<16;$t++)he(J[$t+1]);for(var Cn=0;Cn<=11;Cn++)he(Se[Cn]);he(17);for(var In=0;In<16;In++)he(Ee[In+1]);for(var Jt=0;Jt<=161;Jt++)he(Ye[Jt])})(),De(65498),De(12),he(3),he(1),he(0),he(2),he(17),he(3),he(17),he(0),he(63),he(0);var ce=0,Q=0,xe=0;k=0,I=7,this.encode.displayName="_encode_";for(var Te,Le,Ge,Re,gt,mt,Ot,Kt,ye,Pt=H.data,Dn=H.width,dn=H.height,At=4*Dn,sn=0;sn<dn;){for(Te=0;Te<At;){for(gt=At*sn+Te,Ot=-1,Kt=0,ye=0;ye<64;ye++)mt=gt+(Kt=ye>>3)*At+(Ot=4*(7&ye)),sn+Kt>=dn&&(mt-=At*(sn+1+Kt-dn)),Te+Ot>=At&&(mt-=Te+Ot-At+4),Le=Pt[mt++],Ge=Pt[mt++],Re=Pt[mt++],Y[ye]=(ue[Le]+ue[Ge+256|0]+ue[Re+512|0]>>16)-128,B[ye]=(ue[Le+768|0]+ue[Ge+1024|0]+ue[Re+1280|0]>>16)-128,V[ye]=(ue[Le+1280|0]+ue[Ge+1536|0]+ue[Re+1792|0]>>16)-128;ce=ze(Y,g,ce,e,i),Q=ze(B,m,Q,n,r),xe=ze(V,m,xe,n,r),Te+=32}sn+=8}if(I>=0){var kt=[];kt[1]=I+1,kt[0]=(1<<I+1)-1,ae(kt)}return De(65497),new Uint8Array(M)},t=t||50,(function(){for(var H=String.fromCharCode,te=0;te<256;te++)ee[te]=H(te)})(),e=oe(fe,G),n=oe(J,Se),i=oe(me,Z),r=oe(Ee,Ye),(function(){for(var H=1,te=2,ce=1;ce<=15;ce++){for(var Q=H;Q<te;Q++)A[32767+Q]=ce,_[32767+Q]=[],_[32767+Q][1]=ce,_[32767+Q][0]=Q;for(var xe=-(te-1);xe<=-H;xe++)A[32767+xe]=ce,_[32767+xe]=[],_[32767+xe][1]=ce,_[32767+xe][0]=te-1+xe;H<<=1,te<<=1}})(),(function(){for(var H=0;H<256;H++)ue[H]=19595*H,ue[H+256|0]=38470*H,ue[H+512|0]=7471*H+32768,ue[H+768|0]=-11059*H,ue[H+1024|0]=-21709*H,ue[H+1280|0]=32768*H+8421375,ue[H+1536|0]=-27439*H,ue[H+1792|0]=-5329*H})(),ne(t)}function pl(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function d2(t){function e(G){if(!G)throw Error("assert :P")}function n(G,me,Z){for(var J=0;4>J;J++)if(G[me+J]!=Z.charCodeAt(J))return!0;return!1}function i(G,me,Z,J,Se){for(var Ee=0;Ee<Se;Ee++)G[me+Ee]=Z[J+Ee]}function r(G,me,Z,J){for(var Se=0;Se<J;Se++)G[me+Se]=Z}function a(G){return new Int32Array(G)}function l(G,me){for(var Z=[],J=0;J<G;J++)Z.push(new me);return Z}function d(G,me){var Z=[];return(function J(Se,Ee,Ye){for(var oe=Ye[Ee],ae=0;ae<oe&&(Se.push(Ye.length>Ee+1?[]:new me),!(Ye.length<Ee+1));ae++)J(Se[ae],Ee+1,Ye)})(Z,0,G),Z}var p=function(){var G=this;function me(b,E){for(var O=1<<E-1>>>0;b&O;)O>>>=1;return O?(b&O-1)+O:b}function Z(b,E,O,F,X){e(!(F%O));do b[E+(F-=O)]=X;while(0<F)}function J(b,E,O,F,X){if(e(2328>=X),512>=X)var ie=a(512);else if((ie=a(X))==null)return 0;return(function(se,pe,ve,Ae,qe,it){var Ce,Ve,et=pe,pt=1<<ve,tt=a(16),ht=a(16);for(e(qe!=0),e(Ae!=null),e(se!=null),e(0<ve),Ve=0;Ve<qe;++Ve){if(15<Ae[Ve])return 0;++tt[Ae[Ve]]}if(tt[0]==qe)return 0;for(ht[1]=0,Ce=1;15>Ce;++Ce){if(tt[Ce]>1<<Ce)return 0;ht[Ce+1]=ht[Ce]+tt[Ce]}for(Ve=0;Ve<qe;++Ve)Ce=Ae[Ve],0<Ae[Ve]&&(it[ht[Ce]++]=Ve);if(ht[15]==1)return(Ae=new Se).g=0,Ae.value=it[0],Z(se,et,1,pt,Ae),pt;var xt,Rt=-1,Et=pt-1,cn=0,Xt=1,qn=1,rn=1<<ve;for(Ve=0,Ce=1,qe=2;Ce<=ve;++Ce,qe<<=1){if(Xt+=qn<<=1,0>(qn-=tt[Ce]))return 0;for(;0<tt[Ce];--tt[Ce])(Ae=new Se).g=Ce,Ae.value=it[Ve++],Z(se,et+cn,qe,rn,Ae),cn=me(cn,Ce)}for(Ce=ve+1,qe=2;15>=Ce;++Ce,qe<<=1){if(Xt+=qn<<=1,0>(qn-=tt[Ce]))return 0;for(;0<tt[Ce];--tt[Ce]){if(Ae=new Se,(cn&Et)!=Rt){for(et+=rn,xt=1<<(Rt=Ce)-ve;15>Rt&&!(0>=(xt-=tt[Rt]));)++Rt,xt<<=1;pt+=rn=1<<(xt=Rt-ve),se[pe+(Rt=cn&Et)].g=xt+ve,se[pe+Rt].value=et-pe-Rt}Ae.g=Ce-ve,Ae.value=it[Ve++],Z(se,et+(cn>>ve),qe,rn,Ae),cn=me(cn,Ce)}}return Xt!=2*ht[15]-1?0:pt})(b,E,O,F,X,ie)}function Se(){this.value=this.g=0}function Ee(){this.value=this.g=0}function Ye(){this.G=l(5,Se),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=l(Ha,Ee)}function oe(b,E,O,F){e(b!=null),e(E!=null),e(2147483648>F),b.Ca=254,b.I=0,b.b=-8,b.Ka=0,b.oa=E,b.pa=O,b.Jd=E,b.Yc=O+F,b.Zc=4<=F?O+F-4+1:O,Le(b)}function ae(b,E){for(var O=0;0<E--;)O|=Re(b,128)<<E;return O}function he(b,E){var O=ae(b,E);return Ge(b)?-O:O}function De(b,E,O,F){var X,ie=0;for(e(b!=null),e(E!=null),e(4294967288>F),b.Sb=F,b.Ra=0,b.u=0,b.h=0,4<F&&(F=4),X=0;X<F;++X)ie+=E[O+X]<<8*X;b.Ra=ie,b.bb=F,b.oa=E,b.pa=O}function ze(b){for(;8<=b.u&&b.bb<b.Sb;)b.Ra>>>=8,b.Ra+=b.oa[b.pa+b.bb]<<la-8>>>0,++b.bb,b.u-=8;Q(b)&&(b.h=1,b.u=0)}function ne(b,E){if(e(0<=E),!b.h&&E<=Fn){var O=ce(b)&lr[E];return b.u+=E,ze(b),O}return b.h=1,b.u=0}function H(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ce(b){return b.Ra>>>(b.u&la-1)>>>0}function Q(b){return e(b.bb<=b.Sb),b.h||b.bb==b.Sb&&b.u>la}function xe(b,E){b.u=E,b.h=Q(b)}function Te(b){b.u>=wa&&(e(b.u>=wa),ze(b))}function Le(b){e(b!=null&&b.oa!=null),b.pa<b.Zc?(b.I=(b.oa[b.pa++]|b.I<<8)>>>0,b.b+=8):(e(b!=null&&b.oa!=null),b.pa<b.Yc?(b.b+=8,b.I=b.oa[b.pa++]|b.I<<8):b.Ka?b.b=0:(b.I<<=8,b.b+=8,b.Ka=1))}function Ge(b){return ae(b,1)}function Re(b,E){var O=b.Ca;0>b.b&&Le(b);var F=b.b,X=O*E>>>8,ie=(b.I>>>F>X)+0;for(ie?(O-=X,b.I-=X+1<<F>>>0):O=X+1,F=O,X=0;256<=F;)X+=8,F>>=8;return F=7^X+ko[F],b.b-=F,b.Ca=(O<<F)-1,ie}function gt(b,E,O){b[E+0]=O>>24&255,b[E+1]=O>>16&255,b[E+2]=O>>8&255,b[E+3]=255&O}function mt(b,E){return b[E+0]|b[E+1]<<8}function Ot(b,E){return mt(b,E)|b[E+2]<<16}function Kt(b,E){return mt(b,E)|mt(b,E+2)<<16}function ye(b,E){var O=1<<E;return e(b!=null),e(0<E),b.X=a(O),b.X==null?0:(b.Mb=32-E,b.Xa=E,1)}function Pt(b,E){e(b!=null),e(E!=null),e(b.Xa==E.Xa),i(E.X,0,b.X,0,1<<E.Xa)}function Dn(){this.X=[],this.Xa=this.Mb=0}function dn(b,E,O,F){e(O!=null),e(F!=null);var X=O[0],ie=F[0];return X==0&&(X=(b*ie+E/2)/E),ie==0&&(ie=(E*X+b/2)/b),0>=X||0>=ie?0:(O[0]=X,F[0]=ie,1)}function At(b,E){return b+(1<<E)-1>>>E}function sn(b,E){return((4278255360&b)+(4278255360&E)>>>0&4278255360)+((16711935&b)+(16711935&E)>>>0&16711935)>>>0}function kt(b,E){G[E]=function(O,F,X,ie,se,pe,ve){var Ae;for(Ae=0;Ae<se;++Ae){var qe=G[b](pe[ve+Ae-1],X,ie+Ae);pe[ve+Ae]=sn(O[F+Ae],qe)}}}function Yt(){this.ud=this.hd=this.jd=0}function Vt(b,E){return((4278124286&(b^E))>>>1)+(b&E)>>>0}function xn(b){return 0<=b&&256>b?b:0>b?0:255<b?255:void 0}function kn(b,E){return xn(b+(b-E+.5>>1))}function $t(b,E,O){return Math.abs(E-O)-Math.abs(b-O)}function Cn(b,E,O,F,X,ie,se){for(F=ie[se-1],O=0;O<X;++O)ie[se+O]=F=sn(b[E+O],F)}function In(b,E,O,F,X){var ie;for(ie=0;ie<O;++ie){var se=b[E+ie],pe=se>>8&255,ve=16711935&(ve=(ve=16711935&se)+((pe<<16)+pe));F[X+ie]=(4278255360&se)+ve>>>0}}function Jt(b,E){E.jd=255&b,E.hd=b>>8&255,E.ud=b>>16&255}function En(b,E,O,F,X,ie){var se;for(se=0;se<F;++se){var pe=E[O+se],ve=pe>>>8,Ae=pe,qe=255&(qe=(qe=pe>>>16)+((b.jd<<24>>24)*(ve<<24>>24)>>>5));Ae=255&(Ae=(Ae+=(b.hd<<24>>24)*(ve<<24>>24)>>>5)+((b.ud<<24>>24)*(qe<<24>>24)>>>5)),X[ie+se]=(4278255360&pe)+(qe<<16)+Ae}}function en(b,E,O,F,X){G[E]=function(ie,se,pe,ve,Ae,qe,it,Ce,Ve){for(ve=it;ve<Ce;++ve)for(it=0;it<Ve;++it)Ae[qe++]=X(pe[F(ie[se++])])},G[b]=function(ie,se,pe,ve,Ae,qe,it){var Ce=8>>ie.b,Ve=ie.Ea,et=ie.K[0],pt=ie.w;if(8>Ce)for(ie=(1<<ie.b)-1,pt=(1<<Ce)-1;se<pe;++se){var tt,ht=0;for(tt=0;tt<Ve;++tt)tt&ie||(ht=F(ve[Ae++])),qe[it++]=X(et[ht&pt]),ht>>=Ce}else G["VP8LMapColor"+O](ve,Ae,et,pt,qe,it,se,pe,Ve)}}function Ni(b,E,O,F,X){for(O=E+O;E<O;){var ie=b[E++];F[X++]=ie>>16&255,F[X++]=ie>>8&255,F[X++]=255&ie}}function Hn(b,E,O,F,X){for(O=E+O;E<O;){var ie=b[E++];F[X++]=ie>>16&255,F[X++]=ie>>8&255,F[X++]=255&ie,F[X++]=ie>>24&255}}function hn(b,E,O,F,X){for(O=E+O;E<O;){var ie=(se=b[E++])>>16&240|se>>12&15,se=240&se|se>>28&15;F[X++]=ie,F[X++]=se}}function gn(b,E,O,F,X){for(O=E+O;E<O;){var ie=(se=b[E++])>>16&248|se>>13&7,se=se>>5&224|se>>3&31;F[X++]=ie,F[X++]=se}}function Nt(b,E,O,F,X){for(O=E+O;E<O;){var ie=b[E++];F[X++]=255&ie,F[X++]=ie>>8&255,F[X++]=ie>>16&255}}function tn(b,E,O,F,X,ie){if(ie==0)for(O=E+O;E<O;)gt(F,((ie=b[E++])[0]>>24|ie[1]>>8&65280|ie[2]<<8&16711680|ie[3]<<24)>>>0),X+=32;else i(F,X,b,E,O)}function ui(b,E){G[E][0]=G[b+"0"],G[E][1]=G[b+"1"],G[E][2]=G[b+"2"],G[E][3]=G[b+"3"],G[E][4]=G[b+"4"],G[E][5]=G[b+"5"],G[E][6]=G[b+"6"],G[E][7]=G[b+"7"],G[E][8]=G[b+"8"],G[E][9]=G[b+"9"],G[E][10]=G[b+"10"],G[E][11]=G[b+"11"],G[E][12]=G[b+"12"],G[E][13]=G[b+"13"],G[E][14]=G[b+"0"],G[E][15]=G[b+"0"]}function vn(b){return b==Al||b==Jl||b==Ll||b==c}function vt(){this.eb=[],this.size=this.A=this.fb=0}function yi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Pn(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new vt,this.f.kb=new yi,this.sd=null}function ln(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function ri(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function Ya(b){return alert("todo:WebPSamplerProcessPlane"),b.T}function ia(b,E){var O=b.T,F=E.ba.f.RGBA,X=F.eb,ie=F.fb+b.ka*F.A,se=Ir[E.ba.S],pe=b.y,ve=b.O,Ae=b.f,qe=b.N,it=b.ea,Ce=b.W,Ve=E.cc,et=E.dc,pt=E.Mc,tt=E.Nc,ht=b.ka,xt=b.ka+b.T,Rt=b.U,Et=Rt+1>>1;for(ht==0?se(pe,ve,null,null,Ae,qe,it,Ce,Ae,qe,it,Ce,X,ie,null,null,Rt):(se(E.ec,E.fc,pe,ve,Ve,et,pt,tt,Ae,qe,it,Ce,X,ie-F.A,X,ie,Rt),++O);ht+2<xt;ht+=2)Ve=Ae,et=qe,pt=it,tt=Ce,qe+=b.Rc,Ce+=b.Rc,ie+=2*F.A,se(pe,(ve+=2*b.fa)-b.fa,pe,ve,Ve,et,pt,tt,Ae,qe,it,Ce,X,ie-F.A,X,ie,Rt);return ve+=b.fa,b.j+xt<b.o?(i(E.ec,E.fc,pe,ve,Rt),i(E.cc,E.dc,Ae,qe,Et),i(E.Mc,E.Nc,it,Ce,Et),O--):1&xt||se(pe,ve,null,null,Ae,qe,it,Ce,Ae,qe,it,Ce,X,ie+F.A,null,null,Rt),O}function zo(b,E,O){var F=b.F,X=[b.J];if(F!=null){var ie=b.U,se=E.ba.S,pe=se==El||se==Ll;E=E.ba.f.RGBA;var ve=[0],Ae=b.ka;ve[0]=b.T,b.Kb&&(Ae==0?--ve[0]:(--Ae,X[0]-=b.width),b.j+b.ka+b.T==b.o&&(ve[0]=b.o-b.j-Ae));var qe=E.eb;Ae=E.fb+Ae*E.A,b=Wt(F,X[0],b.width,ie,ve,qe,Ae+(pe?0:3),E.A),e(O==ve),b&&vn(se)&&Mt(qe,Ae,pe,ie,ve,E.A)}return 0}function Wr(b){var E=b.ma,O=E.ba.S,F=11>O,X=O==La||O==No||O==El||O==ol||O==12||vn(O);if(E.memory=null,E.Ib=null,E.Jb=null,E.Nd=null,!ls(E.Oa,b,X?11:12))return 0;if(X&&vn(O)&&Ho(),b.da)alert("todo:use_scaling");else{if(F){if(E.Ib=Ya,b.Kb){if(O=b.U+1>>1,E.memory=a(b.U+2*O),E.memory==null)return 0;E.ec=E.memory,E.fc=0,E.cc=E.ec,E.dc=E.fc+b.U,E.Mc=E.cc,E.Nc=E.dc+O,E.Ib=ia,Ho()}}else alert("todo:EmitYUV");X&&(E.Jb=zo,F&&wr())}if(F&&!Nl){for(b=0;256>b;++b)oo[b]=89858*(b-128)+Tc>>xs,jg[b]=-22014*(b-128)+Tc,rh[b]=-45773*(b-128),Uu[b]=113618*(b-128)+Tc>>xs;for(b=ec;b<Rl;++b)E=76283*(b-16)+Tc>>xs,kg[b-ec]=Ht(E,255),Rg[b-ec]=Ht(E+8>>4,15);Nl=1}return 1}function nn(b){var E=b.ma,O=b.U,F=b.T;return e(!(1&b.ka)),0>=O||0>=F?0:(O=E.Ib(b,E),E.Jb!=null&&E.Jb(b,E,O),E.Dc+=O,1)}function Ao(b){b.ma.memory=null}function Za(b,E,O,F){return ne(b,8)!=47?0:(E[0]=ne(b,14)+1,O[0]=ne(b,14)+1,F[0]=ne(b,1),ne(b,3)!=0?0:!b.h)}function ei(b,E){if(4>b)return b+1;var O=b-2>>1;return(2+(1&b)<<O)+ne(E,O)+1}function xi(b,E){return 120<E?E-120:1<=(O=((O=ke[E-1])>>4)*b+(8-(15&O)))?O:1;var O}function si(b,E,O){var F=ce(O),X=b[E+=255&F].g-8;return 0<X&&(xe(O,O.u+8),F=ce(O),E+=b[E].value,E+=F&(1<<X)-1),xe(O,O.u+b[E].g),b[E].value}function Ut(b,E,O){return O.g+=b.g,O.value+=b.value<<E>>>0,e(8>=O.g),b.g}function nr(b,E,O){var F=b.xc;return e((E=F==0?0:b.vc[b.md*(O>>F)+(E>>F)])<b.Wb),b.Ya[E]}function fo(b,E,O,F){var X=b.ab,ie=b.c*E,se=b.C;E=se+E;var pe=O,ve=F;for(F=b.Ta,O=b.Ua;0<X--;){var Ae=b.gc[X],qe=se,it=E,Ce=pe,Ve=ve,et=(ve=F,pe=O,Ae.Ea);switch(e(qe<it),e(it<=Ae.nc),Ae.hc){case 2:Mi(Ce,Ve,(it-qe)*et,ve,pe);break;case 0:var pt=qe,tt=it,ht=ve,xt=pe,Rt=(rn=Ae).Ea;pt==0&&(vs(Ce,Ve,null,null,1,ht,xt),Cn(Ce,Ve+1,0,0,Rt-1,ht,xt+1),Ve+=Rt,xt+=Rt,++pt);for(var Et=1<<rn.b,cn=Et-1,Xt=At(Rt,rn.b),qn=rn.K,rn=rn.w+(pt>>rn.b)*Xt;pt<tt;){var fi=qn,yr=rn,Yn=1;for(Sa(Ce,Ve,ht,xt-Rt,1,ht,xt);Yn<Rt;){var Qt=(Yn&~cn)+Et;Qt>Rt&&(Qt=Rt),(0,w[fi[yr++]>>8&15])(Ce,Ve+ +Yn,ht,xt+Yn-Rt,Qt-Yn,ht,xt+Yn),Yn=Qt}Ve+=Rt,xt+=Rt,++pt&cn||(rn+=Xt)}it!=Ae.nc&&i(ve,pe-et,ve,pe+(it-qe-1)*et,et);break;case 1:for(et=Ce,tt=Ve,Rt=(Ce=Ae.Ea)-(xt=Ce&~(ht=(Ve=1<<Ae.b)-1)),pt=At(Ce,Ae.b),Et=Ae.K,Ae=Ae.w+(qe>>Ae.b)*pt;qe<it;){for(cn=Et,Xt=Ae,qn=new Yt,rn=tt+xt,fi=tt+Ce;tt<rn;)Jt(cn[Xt++],qn),j(qn,et,tt,Ve,ve,pe),tt+=Ve,pe+=Ve;tt<fi&&(Jt(cn[Xt++],qn),j(qn,et,tt,Rt,ve,pe),tt+=Rt,pe+=Rt),++qe&ht||(Ae+=pt)}break;case 3:if(Ce==ve&&Ve==pe&&0<Ae.b){for(tt=ve,Ce=et=pe+(it-qe)*et-(xt=(it-qe)*At(Ae.Ea,Ae.b)),Ve=ve,ht=pe,pt=[],xt=(Rt=xt)-1;0<=xt;--xt)pt[xt]=Ve[ht+xt];for(xt=Rt-1;0<=xt;--xt)tt[Ce+xt]=pt[xt];Ro(Ae,qe,it,ve,et,ve,pe)}else Ro(Ae,qe,it,Ce,Ve,ve,pe)}pe=F,ve=O}ve!=O&&i(F,O,pe,ve,ie)}function ra(b,E){var O=b.V,F=b.Ba+b.c*b.C,X=E-b.C;if(e(E<=b.l.o),e(16>=X),0<X){var ie=b.l,se=b.Ta,pe=b.Ua,ve=ie.width;if(fo(b,X,O,F),X=pe=[pe],e((O=b.C)<(F=E)),e(ie.v<ie.va),F>ie.o&&(F=ie.o),O<ie.j){var Ae=ie.j-O;O=ie.j,X[0]+=Ae*ve}if(O>=F?O=0:(X[0]+=4*ie.v,ie.ka=O-ie.j,ie.U=ie.va-ie.v,ie.T=F-O,O=1),O){if(pe=pe[0],11>(O=b.ca).S){var qe=O.f.RGBA,it=(F=O.S,X=ie.U,ie=ie.T,Ae=qe.eb,qe.A),Ce=ie;for(qe=qe.fb+b.Ma*qe.A;0<Ce--;){var Ve=se,et=pe,pt=X,tt=Ae,ht=qe;switch(F){case Ac:P(Ve,et,pt,tt,ht);break;case La:z(Ve,et,pt,tt,ht);break;case Al:z(Ve,et,pt,tt,ht),Mt(tt,ht,0,pt,1,0);break;case $l:ge(Ve,et,pt,tt,ht);break;case No:tn(Ve,et,pt,tt,ht,1);break;case Jl:tn(Ve,et,pt,tt,ht,1),Mt(tt,ht,0,pt,1,0);break;case El:tn(Ve,et,pt,tt,ht,0);break;case Ll:tn(Ve,et,pt,tt,ht,0),Mt(tt,ht,1,pt,1,0);break;case ol:W(Ve,et,pt,tt,ht);break;case c:W(Ve,et,pt,tt,ht),jt(tt,ht,pt,1,0);break;case $s:$(Ve,et,pt,tt,ht);break;default:e(0)}pe+=ve,qe+=it}b.Ma+=ie}else alert("todo:EmitRescaledRowsYUVA");e(b.Ma<=O.height)}}b.C=E,e(b.C<=b.i)}function ti(b){var E;if(0<b.ua)return 0;for(E=0;E<b.Wb;++E){var O=b.Ya[E].G,F=b.Ya[E].H;if(0<O[1][F[1]+0].g||0<O[2][F[2]+0].g||0<O[3][F[3]+0].g)return 0}return 1}function bi(b,E,O,F,X,ie){if(b.Z!=0){var se=b.qd,pe=b.rd;for(e(Ui[b.Z]!=null);E<O;++E)Ui[b.Z](se,pe,F,X,F,X,ie),se=F,pe=X,X+=ie;b.qd=se,b.rd=pe}}function Zi(b,E){var O=b.l.ma,F=O.Z==0||O.Z==1?b.l.j:b.C;if(F=b.C<F?F:b.C,e(E<=b.l.o),E>F){var X=b.l.width,ie=O.ca,se=O.tb+X*F,pe=b.V,ve=b.Ba+b.c*F,Ae=b.gc;e(b.ab==1),e(Ae[0].hc==3),Wi(Ae[0],F,E,pe,ve,ie,se),bi(O,F,E,ie,se,X)}b.C=b.Ma=E}function pr(b,E,O,F,X,ie,se){var pe=b.$/F,ve=b.$%F,Ae=b.m,qe=b.s,it=O+b.$,Ce=it;X=O+F*X;var Ve=O+F*ie,et=280+qe.ua,pt=b.Pb?pe:16777216,tt=0<qe.ua?qe.Wa:null,ht=qe.wc,xt=it<Ve?nr(qe,ve,pe):null;e(b.C<ie),e(Ve<=X);var Rt=!1;e:for(;;){for(;Rt||it<Ve;){var Et=0;if(pe>=pt){var cn=it-O;e((pt=b).Pb),pt.wd=pt.m,pt.xd=cn,0<pt.s.ua&&Pt(pt.s.Wa,pt.s.vb),pt=pe+ot}if(ve&ht||(xt=nr(qe,ve,pe)),e(xt!=null),xt.Qb&&(E[it]=xt.qb,Rt=!0),!Rt)if(Te(Ae),xt.jc){Et=Ae,cn=E;var Xt=it,qn=xt.pd[ce(Et)&Ha-1];e(xt.jc),256>qn.g?(xe(Et,Et.u+qn.g),cn[Xt]=qn.value,Et=0):(xe(Et,Et.u+qn.g-256),e(256<=qn.value),Et=qn.value),Et==0&&(Rt=!0)}else Et=si(xt.G[0],xt.H[0],Ae);if(Ae.h)break;if(Rt||256>Et){if(!Rt)if(xt.nd)E[it]=(xt.qb|Et<<8)>>>0;else{if(Te(Ae),Rt=si(xt.G[1],xt.H[1],Ae),Te(Ae),cn=si(xt.G[2],xt.H[2],Ae),Xt=si(xt.G[3],xt.H[3],Ae),Ae.h)break;E[it]=(Xt<<24|Rt<<16|Et<<8|cn)>>>0}if(Rt=!1,++it,++ve>=F&&(ve=0,++pe,se!=null&&pe<=ie&&!(pe%16)&&se(b,pe),tt!=null))for(;Ce<it;)Et=E[Ce++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et}else if(280>Et){if(Et=ei(Et-256,Ae),cn=si(xt.G[4],xt.H[4],Ae),Te(Ae),cn=xi(F,cn=ei(cn,Ae)),Ae.h)break;if(it-O<cn||X-it<Et)break e;for(Xt=0;Xt<Et;++Xt)E[it+Xt]=E[it+Xt-cn];for(it+=Et,ve+=Et;ve>=F;)ve-=F,++pe,se!=null&&pe<=ie&&!(pe%16)&&se(b,pe);if(e(it<=X),ve&ht&&(xt=nr(qe,ve,pe)),tt!=null)for(;Ce<it;)Et=E[Ce++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et}else{if(!(Et<et))break e;for(Rt=Et-280,e(tt!=null);Ce<it;)Et=E[Ce++],tt.X[(506832829*Et&4294967295)>>>tt.Mb]=Et;Et=it,e(!(Rt>>>(cn=tt).Xa)),E[Et]=cn.X[Rt],Rt=!0}Rt||e(Ae.h==Q(Ae))}if(b.Pb&&Ae.h&&it<X)e(b.m.h),b.a=5,b.m=b.wd,b.$=b.xd,0<b.s.ua&&Pt(b.s.vb,b.s.Wa);else{if(Ae.h)break e;se?.(b,pe>ie?ie:pe),b.a=0,b.$=it-O}return 1}return b.a=3,0}function Ka(b){e(b!=null),b.vc=null,b.yc=null,b.Ya=null;var E=b.Wa;E!=null&&(E.X=null),b.vb=null,e(b!=null)}function Oa(){var b=new yn;return b==null?null:(b.a=0,b.xb=Lc,ui("Predictor","VP8LPredictors"),ui("Predictor","VP8LPredictors_C"),ui("PredictorAdd","VP8LPredictorsAdd"),ui("PredictorAdd","VP8LPredictorsAdd_C"),Mi=In,j=En,P=Ni,z=Hn,W=hn,$=gn,ge=Nt,G.VP8LMapColor32b=Ca,G.VP8LMapColor8b=vr,b)}function ho(b,E,O,F,X){var ie=1,se=[b],pe=[E],ve=F.m,Ae=F.s,qe=null,it=0;e:for(;;){if(O)for(;ie&&ne(ve,1);){var Ce=se,Ve=pe,et=F,pt=1,tt=et.m,ht=et.gc[et.ab],xt=ne(tt,2);if(et.Oc&1<<xt)ie=0;else{switch(et.Oc|=1<<xt,ht.hc=xt,ht.Ea=Ce[0],ht.nc=Ve[0],ht.K=[null],++et.ab,e(4>=et.ab),xt){case 0:case 1:ht.b=ne(tt,3)+2,pt=ho(At(ht.Ea,ht.b),At(ht.nc,ht.b),0,et,ht.K),ht.K=ht.K[0];break;case 3:var Rt,Et=ne(tt,8)+1,cn=16<Et?0:4<Et?1:2<Et?2:3;if(Ce[0]=At(ht.Ea,cn),ht.b=cn,Rt=pt=ho(Et,1,0,et,ht.K)){var Xt,qn=Et,rn=ht,fi=1<<(8>>rn.b),yr=a(fi);if(yr==null)Rt=0;else{var Yn=rn.K[0],Qt=rn.w;for(yr[0]=rn.K[0][0],Xt=1;Xt<1*qn;++Xt)yr[Xt]=sn(Yn[Qt+Xt],yr[Xt-1]);for(;Xt<4*fi;++Xt)yr[Xt]=0;rn.K[0]=null,rn.K[0]=yr,Rt=1}}pt=Rt;break;case 2:break;default:e(0)}ie=pt}}if(se=se[0],pe=pe[0],ie&&ne(ve,1)&&!(ie=1<=(it=ne(ve,4))&&11>=it)){F.a=3;break e}var qt;if(qt=ie)t:{var jr,Tn,Jn,Gi=F,ja=se,so=pe,cr=it,ua=O,_o=Gi.m,da=Gi.s,oi=[null],ji=1,kr=0,Oi=$e[cr];n:for(;;){if(ua&&ne(_o,1)){var ka=ne(_o,3)+2,Rr=At(ja,ka),ki=At(so,ka),Jr=Rr*ki;if(!ho(Rr,ki,0,Gi,oi))break n;for(oi=oi[0],da.xc=ka,jr=0;jr<Jr;++jr){var Vi=oi[jr]>>8&65535;oi[jr]=Vi,Vi>=ji&&(ji=Vi+1)}}if(_o.h)break n;for(Tn=0;5>Tn;++Tn){var fa=N[Tn];!Tn&&0<cr&&(fa+=1<<cr),kr<fa&&(kr=fa)}var ha=l(ji*Oi,Se),$i=ji,Ci=l($i,Ye);if(Ci==null)var wo=null;else e(65536>=$i),wo=Ci;var zr=a(kr);if(wo==null||zr==null||ha==null){Gi.a=1;break n}var bn=ha;for(jr=Jn=0;jr<ji;++jr){var _n=wo[jr],Ri=_n.G,Wo=_n.H,bs=0,Mo=1,pa=0;for(Tn=0;5>Tn;++Tn){fa=N[Tn],Ri[Tn]=bn,Wo[Tn]=Jn,!Tn&&0<cr&&(fa+=1<<cr);r:{var Dl,Ml=fa,qu=Gi,ur=zr,Ud=bn,Hd=Jn,Wu=0,ll=qu.m,Ng=ne(ll,1);if(r(ur,0,0,Ml),Ng){var qd=ne(ll,1)+1,Wd=ne(ll,1),Gu=ne(ll,Wd==0?1:8);ur[Gu]=1,qd==2&&(ur[Gu=ne(ll,8)]=1);var qa=1}else{var Br=a(19),cu=ne(ll,4)+4;if(19<cu){qu.a=3;var Ol=0;break r}for(Dl=0;Dl<cu;++Dl)Br[re[Dl]]=ne(ll,3);var kc=void 0,tc=void 0,el=qu,Vu=Br,Rc=Ml,Yu=ur,Zu=0,cl=el.m,Gd=8,Vd=l(128,Se);i:for(;J(Vd,0,7,Vu,19);){if(ne(cl,1)){var ah=2+2*ne(cl,3);if((kc=2+ne(cl,ah))>Rc)break i}else kc=Rc;for(tc=0;tc<Rc&&kc--;){Te(cl);var Yd=Vd[0+(127&ce(cl))];xe(cl,cl.u+Yd.g);var Pl=Yd.value;if(16>Pl)Yu[tc++]=Pl,Pl!=0&&(Gd=Pl);else{var oh=Pl==16,sh=Pl-16,lh=S[sh],Zd=ne(cl,v[sh])+lh;if(tc+Zd>Rc)break i;for(var ch=oh?Gd:0;0<Zd--;)Yu[tc++]=ch}}Zu=1;break i}Zu||(el.a=3),qa=Zu}(qa=qa&&!ll.h)&&(Wu=J(Ud,Hd,8,ur,Ml)),qa&&Wu!=0?Ol=Wu:(qu.a=3,Ol=0)}if(Ol==0)break n;if(Mo&&U[Tn]==1&&(Mo=bn[Jn].g==0),bs+=bn[Jn].g,Jn+=Ol,3>=Tn){var nc,Ku=zr[0];for(nc=1;nc<fa;++nc)zr[nc]>Ku&&(Ku=zr[nc]);pa+=Ku}}if(_n.nd=Mo,_n.Qb=0,Mo&&(_n.qb=(Ri[3][Wo[3]+0].value<<24|Ri[1][Wo[1]+0].value<<16|Ri[2][Wo[2]+0].value)>>>0,bs==0&&256>Ri[0][Wo[0]+0].value&&(_n.Qb=1,_n.qb+=Ri[0][Wo[0]+0].value<<8)),_n.jc=!_n.Qb&&6>pa,_n.jc){var uu,tl=_n;for(uu=0;uu<Ha;++uu){var ul=uu,dl=tl.pd[ul],Xu=tl.G[0][tl.H[0]+ul];256<=Xu.value?(dl.g=Xu.g+256,dl.value=Xu.value):(dl.g=0,dl.value=0,ul>>=Ut(Xu,8,dl),ul>>=Ut(tl.G[1][tl.H[1]+ul],16,dl),ul>>=Ut(tl.G[2][tl.H[2]+ul],0,dl),Ut(tl.G[3][tl.H[3]+ul],24,dl))}}}da.vc=oi,da.Wb=ji,da.Ya=wo,da.yc=ha,qt=1;break t}qt=0}if(!(ie=qt)){F.a=3;break e}if(0<it){if(Ae.ua=1<<it,!ye(Ae.Wa,it)){F.a=1,ie=0;break e}}else Ae.ua=0;var Qu=F,ic=se,uh=pe,Nc=Qu.s,Dc=Nc.xc;if(Qu.c=ic,Qu.i=uh,Nc.md=At(ic,Dc),Nc.wc=Dc==0?-1:(1<<Dc)-1,O){F.xb=Js;break e}if((qe=a(se*pe))==null){F.a=1,ie=0;break e}ie=(ie=pr(F,qe,0,se,pe,pe,null))&&!ve.h;break e}return ie?(X!=null?X[0]=qe:(e(qe==null),e(O)),F.$=0,O||Ka(Ae)):Ka(Ae),ie}function Gr(b,E){var O=b.c*b.i,F=O+E+16*E;return e(b.c<=E),b.V=a(F),b.V==null?(b.Ta=null,b.Ua=0,b.a=1,0):(b.Ta=b.V,b.Ua=b.Ba+O+E,1)}function Jo(b,E){var O=b.C,F=E-O,X=b.V,ie=b.Ba+b.c*O;for(e(E<=b.l.o);0<F;){var se=16<F?16:F,pe=b.l.ma,ve=b.l.width,Ae=ve*se,qe=pe.ca,it=pe.tb+ve*O,Ce=b.Ta,Ve=b.Ua;fo(b,se,X,ie),An(Ce,Ve,qe,it,Ae),bi(pe,O,O+se,qe,it,ve),F-=se,X+=se*b.c,O+=se}e(O==E),b.C=b.Ma=E}function Pa(){this.ub=this.yd=this.td=this.Rb=0}function hi(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function aa(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Or(){this.Yb=(function(){var b=[];return(function E(O,F,X){for(var ie=X[F],se=0;se<ie&&(O.push(X.length>F+1?[]:0),!(X.length<F+1));se++)E(O[se],F+1,X)})(b,0,[3,11]),b})()}function ir(){this.jb=a(3),this.Wc=d([4,8],Or),this.Xc=d([4,17],Or)}function Bo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function oa(){this.ld=this.La=this.dd=this.tc=0}function Xa(){this.Na=this.la=0}function Qa(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function va(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Ns(){this.uc=this.M=this.Nb=0,this.wa=Array(new oa),this.Y=0,this.ya=Array(new va),this.aa=0,this.l=new di}function es(){this.y=a(16),this.f=a(8),this.ea=a(8)}function ts(){this.cb=this.a=0,this.sc="",this.m=new H,this.Od=new Pa,this.Kc=new hi,this.ed=new Bo,this.Qa=new aa,this.Ic=this.$c=this.Aa=0,this.D=new Ns,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=l(8,H),this.ia=0,this.pb=l(4,Qa),this.Pa=new ir,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new es),this.Hd=0,this.rb=Array(new Xa),this.sb=0,this.wa=Array(new oa),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new va),this.L=this.aa=0,this.gd=d([4,2],oa),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Ht(b,E){return 0>b?0:b>E?E:b}function di(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ya(){var b=new ts;return b!=null&&(b.a=0,b.sc="OK",b.cb=0,b.Xb=0,an||(an=Sn)),b}function Gn(b,E,O){return b.a==0&&(b.a=E,b.sc=O,b.cb=0),0}function Ia(b,E,O){return 3<=O&&b[E+0]==157&&b[E+1]==1&&b[E+2]==42}function $a(b,E){if(b==null)return 0;if(b.a=0,b.sc="OK",E==null)return Gn(b,2,"null VP8Io passed to VP8GetHeaders()");var O=E.data,F=E.w,X=E.ha;if(4>X)return Gn(b,7,"Truncated header.");var ie=O[F+0]|O[F+1]<<8|O[F+2]<<16,se=b.Od;if(se.Rb=!(1&ie),se.td=ie>>1&7,se.yd=ie>>4&1,se.ub=ie>>5,3<se.td)return Gn(b,3,"Incorrect keyframe parameters.");if(!se.yd)return Gn(b,4,"Frame not displayable.");F+=3,X-=3;var pe=b.Kc;if(se.Rb){if(7>X)return Gn(b,7,"cannot parse picture header");if(!Ia(O,F,X))return Gn(b,3,"Bad code word");pe.c=16383&(O[F+4]<<8|O[F+3]),pe.Td=O[F+4]>>6,pe.i=16383&(O[F+6]<<8|O[F+5]),pe.Ud=O[F+6]>>6,F+=7,X-=7,b.za=pe.c+15>>4,b.Ub=pe.i+15>>4,E.width=pe.c,E.height=pe.i,E.Da=0,E.j=0,E.v=0,E.va=E.width,E.o=E.height,E.da=0,E.ib=E.width,E.hb=E.height,E.U=E.width,E.T=E.height,r((ie=b.Pa).jb,0,255,ie.jb.length),e((ie=b.Qa)!=null),ie.Cb=0,ie.Bb=0,ie.Fb=1,r(ie.Zb,0,0,ie.Zb.length),r(ie.Lb,0,0,ie.Lb)}if(se.ub>X)return Gn(b,7,"bad partition length");oe(ie=b.m,O,F,se.ub),F+=se.ub,X-=se.ub,se.Rb&&(pe.Ld=Ge(ie),pe.Kd=Ge(ie)),pe=b.Qa;var ve,Ae=b.Pa;if(e(ie!=null),e(pe!=null),pe.Cb=Ge(ie),pe.Cb){if(pe.Bb=Ge(ie),Ge(ie)){for(pe.Fb=Ge(ie),ve=0;4>ve;++ve)pe.Zb[ve]=Ge(ie)?he(ie,7):0;for(ve=0;4>ve;++ve)pe.Lb[ve]=Ge(ie)?he(ie,6):0}if(pe.Bb)for(ve=0;3>ve;++ve)Ae.jb[ve]=Ge(ie)?ae(ie,8):255}else pe.Bb=0;if(ie.Ka)return Gn(b,3,"cannot parse segment header");if((pe=b.ed).zd=Ge(ie),pe.Tb=ae(ie,6),pe.wb=ae(ie,3),pe.Pc=Ge(ie),pe.Pc&&Ge(ie)){for(Ae=0;4>Ae;++Ae)Ge(ie)&&(pe.vd[Ae]=he(ie,6));for(Ae=0;4>Ae;++Ae)Ge(ie)&&(pe.od[Ae]=he(ie,6))}if(b.L=pe.Tb==0?0:pe.zd?1:2,ie.Ka)return Gn(b,3,"cannot parse filter header");var qe=X;if(X=ve=F,F=ve+qe,pe=qe,b.Xb=(1<<ae(b.m,2))-1,qe<3*(Ae=b.Xb))O=7;else{for(ve+=3*Ae,pe-=3*Ae,qe=0;qe<Ae;++qe){var it=O[X+0]|O[X+1]<<8|O[X+2]<<16;it>pe&&(it=pe),oe(b.Jc[+qe],O,ve,it),ve+=it,pe-=it,X+=3}oe(b.Jc[+Ae],O,ve,pe),O=ve<F?0:5}if(O!=0)return Gn(b,O,"cannot parse partitions");for(O=ae(ve=b.m,7),X=Ge(ve)?he(ve,4):0,F=Ge(ve)?he(ve,4):0,pe=Ge(ve)?he(ve,4):0,Ae=Ge(ve)?he(ve,4):0,ve=Ge(ve)?he(ve,4):0,qe=b.Qa,it=0;4>it;++it){if(qe.Cb){var Ce=qe.Zb[it];qe.Fb||(Ce+=O)}else{if(0<it){b.pb[it]=b.pb[0];continue}Ce=O}var Ve=b.pb[it];Ve.Sc[0]=bt[Ht(Ce+X,127)],Ve.Sc[1]=Ft[Ht(Ce+0,127)],Ve.Eb[0]=2*bt[Ht(Ce+F,127)],Ve.Eb[1]=101581*Ft[Ht(Ce+pe,127)]>>16,8>Ve.Eb[1]&&(Ve.Eb[1]=8),Ve.Qc[0]=bt[Ht(Ce+Ae,117)],Ve.Qc[1]=Ft[Ht(Ce+ve,127)],Ve.lc=Ce+ve}if(!se.Rb)return Gn(b,4,"Not a key frame.");for(Ge(ie),se=b.Pa,O=0;4>O;++O){for(X=0;8>X;++X)for(F=0;3>F;++F)for(pe=0;11>pe;++pe)Ae=Re(ie,Ti[O][X][F][pe])?ae(ie,8):Do[O][X][F][pe],se.Wc[O][X].Yb[F][pe]=Ae;for(X=0;17>X;++X)se.Xc[O][X]=se.Wc[O][ci[X]]}return b.kc=Ge(ie),b.kc&&(b.Bd=ae(ie,8)),b.cb=1}function Sn(b,E,O,F,X,ie,se){var pe=E[X].Yb[O];for(O=0;16>X;++X){if(!Re(b,pe[O+0]))return X;for(;!Re(b,pe[O+1]);)if(pe=E[++X].Yb[0],O=0,X==16)return 16;var ve=E[X+1].Yb;if(Re(b,pe[O+2])){var Ae=b,qe=0;if(Re(Ae,(Ce=pe)[(it=O)+3]))if(Re(Ae,Ce[it+6])){for(pe=0,it=2*(qe=Re(Ae,Ce[it+8]))+(Ce=Re(Ae,Ce[it+9+qe])),qe=0,Ce=$n[it];Ce[pe];++pe)qe+=qe+Re(Ae,Ce[pe]);qe+=3+(8<<it)}else Re(Ae,Ce[it+7])?(qe=7+2*Re(Ae,165),qe+=Re(Ae,145)):qe=5+Re(Ae,159);else qe=Re(Ae,Ce[it+4])?3+Re(Ae,Ce[it+5]):2;pe=ve[2]}else qe=1,pe=ve[1];ve=se+Ta[X],0>(Ae=b).b&&Le(Ae);var it,Ce=Ae.b,Ve=(it=Ae.Ca>>1)-(Ae.I>>Ce)>>31;--Ae.b,Ae.Ca+=Ve,Ae.Ca|=1,Ae.I-=(it+1&Ve)<<Ce,ie[ve]=((qe^Ve)-Ve)*F[(0<X)+0]}return 16}function Ii(b){var E=b.rb[b.sb-1];E.la=0,E.Na=0,r(b.zc,0,0,b.zc.length),b.ja=0}function zn(b,E,O,F,X){X=b[E+O+32*F]+(X>>3),b[E+O+32*F]=-256&X?0>X?0:255:X}function zi(b,E,O,F,X,ie){zn(b,E,0,O,F+X),zn(b,E,1,O,F+ie),zn(b,E,2,O,F-ie),zn(b,E,3,O,F-X)}function ni(b){return(20091*b>>16)+b}function Lo(b,E,O,F){var X,ie=0,se=a(16);for(X=0;4>X;++X){var pe=b[E+0]+b[E+8],ve=b[E+0]-b[E+8],Ae=(35468*b[E+4]>>16)-ni(b[E+12]),qe=ni(b[E+4])+(35468*b[E+12]>>16);se[ie+0]=pe+qe,se[ie+1]=ve+Ae,se[ie+2]=ve-Ae,se[ie+3]=pe-qe,ie+=4,E++}for(X=ie=0;4>X;++X)pe=(b=se[ie+0]+4)+se[ie+8],ve=b-se[ie+8],Ae=(35468*se[ie+4]>>16)-ni(se[ie+12]),zn(O,F,0,0,pe+(qe=ni(se[ie+4])+(35468*se[ie+12]>>16))),zn(O,F,1,0,ve+Ae),zn(O,F,2,0,ve-Ae),zn(O,F,3,0,pe-qe),ie++,F+=32}function ns(b,E,O,F){var X=b[E+0]+4,ie=35468*b[E+4]>>16,se=ni(b[E+4]),pe=35468*b[E+1]>>16;zi(O,F,0,X+se,b=ni(b[E+1]),pe),zi(O,F,1,X+ie,b,pe),zi(O,F,2,X-ie,b,pe),zi(O,F,3,X-se,b,pe)}function Ja(b,E,O,F,X){Lo(b,E,O,F),X&&Lo(b,E+16,O,F+4)}function Xn(b,E,O,F){He(b,E+0,O,F,1),He(b,E+32,O,F+128,1)}function po(b,E,O,F){var X;for(b=b[E+0]+4,X=0;4>X;++X)for(E=0;4>E;++E)zn(O,F,E,X,b)}function go(b,E,O,F){b[E+0]&&je(b,E+0,O,F),b[E+16]&&je(b,E+16,O,F+4),b[E+32]&&je(b,E+32,O,F+128),b[E+48]&&je(b,E+48,O,F+128+4)}function sa(b,E,O,F){var X,ie=a(16);for(X=0;4>X;++X){var se=b[E+0+X]+b[E+12+X],pe=b[E+4+X]+b[E+8+X],ve=b[E+4+X]-b[E+8+X],Ae=b[E+0+X]-b[E+12+X];ie[0+X]=se+pe,ie[8+X]=se-pe,ie[4+X]=Ae+ve,ie[12+X]=Ae-ve}for(X=0;4>X;++X)se=(b=ie[0+4*X]+3)+ie[3+4*X],pe=ie[1+4*X]+ie[2+4*X],ve=ie[1+4*X]-ie[2+4*X],Ae=b-ie[3+4*X],O[F+0]=se+pe>>3,O[F+16]=Ae+ve>>3,O[F+32]=se-pe>>3,O[F+48]=Ae-ve>>3,F+=64}function is(b,E,O){var F,X=E-32,ie=Lr,se=255-b[X-1];for(F=0;F<O;++F){var pe,ve=ie,Ae=se+b[E-1];for(pe=0;pe<O;++pe)b[E+pe]=ve[Ae+b[X+pe]];E+=32}}function Vn(b,E){is(b,E,4)}function Ds(b,E){is(b,E,8)}function Ms(b,E){is(b,E,16)}function fs(b,E){var O;for(O=0;16>O;++O)i(b,E+32*O,b,E-32,16)}function Pr(b,E){var O;for(O=16;0<O;--O)r(b,E,b[E-1],16),E+=32}function gr(b,E,O){var F;for(F=0;16>F;++F)r(E,O+32*F,b,16)}function Vr(b,E){var O,F=16;for(O=0;16>O;++O)F+=b[E-1+32*O]+b[E+O-32];gr(F>>5,b,E)}function Yr(b,E){var O,F=8;for(O=0;16>O;++O)F+=b[E-1+32*O];gr(F>>4,b,E)}function Fo(b,E){var O,F=8;for(O=0;16>O;++O)F+=b[E+O-32];gr(F>>4,b,E)}function rs(b,E){gr(128,b,E)}function Ct(b,E,O){return b+2*E+O+2>>2}function rr(b,E){var O,F=E-32;for(F=new Uint8Array([Ct(b[F-1],b[F+0],b[F+1]),Ct(b[F+0],b[F+1],b[F+2]),Ct(b[F+1],b[F+2],b[F+3]),Ct(b[F+2],b[F+3],b[F+4])]),O=0;4>O;++O)i(b,E+32*O,F,0,F.length)}function ai(b,E){var O=b[E-1],F=b[E-1+32],X=b[E-1+64],ie=b[E-1+96];gt(b,E+0,16843009*Ct(b[E-1-32],O,F)),gt(b,E+32,16843009*Ct(O,F,X)),gt(b,E+64,16843009*Ct(F,X,ie)),gt(b,E+96,16843009*Ct(X,ie,ie))}function as(b,E){var O,F=4;for(O=0;4>O;++O)F+=b[E+O-32]+b[E-1+32*O];for(F>>=3,O=0;4>O;++O)r(b,E+32*O,F,4)}function Zr(b,E){var O=b[E-1+0],F=b[E-1+32],X=b[E-1+64],ie=b[E-1-32],se=b[E+0-32],pe=b[E+1-32],ve=b[E+2-32],Ae=b[E+3-32];b[E+0+96]=Ct(F,X,b[E-1+96]),b[E+1+96]=b[E+0+64]=Ct(O,F,X),b[E+2+96]=b[E+1+64]=b[E+0+32]=Ct(ie,O,F),b[E+3+96]=b[E+2+64]=b[E+1+32]=b[E+0+0]=Ct(se,ie,O),b[E+3+64]=b[E+2+32]=b[E+1+0]=Ct(pe,se,ie),b[E+3+32]=b[E+2+0]=Ct(ve,pe,se),b[E+3+0]=Ct(Ae,ve,pe)}function Bi(b,E){var O=b[E+1-32],F=b[E+2-32],X=b[E+3-32],ie=b[E+4-32],se=b[E+5-32],pe=b[E+6-32],ve=b[E+7-32];b[E+0+0]=Ct(b[E+0-32],O,F),b[E+1+0]=b[E+0+32]=Ct(O,F,X),b[E+2+0]=b[E+1+32]=b[E+0+64]=Ct(F,X,ie),b[E+3+0]=b[E+2+32]=b[E+1+64]=b[E+0+96]=Ct(X,ie,se),b[E+3+32]=b[E+2+64]=b[E+1+96]=Ct(ie,se,pe),b[E+3+64]=b[E+2+96]=Ct(se,pe,ve),b[E+3+96]=Ct(pe,ve,ve)}function Os(b,E){var O=b[E-1+0],F=b[E-1+32],X=b[E-1+64],ie=b[E-1-32],se=b[E+0-32],pe=b[E+1-32],ve=b[E+2-32],Ae=b[E+3-32];b[E+0+0]=b[E+1+64]=ie+se+1>>1,b[E+1+0]=b[E+2+64]=se+pe+1>>1,b[E+2+0]=b[E+3+64]=pe+ve+1>>1,b[E+3+0]=ve+Ae+1>>1,b[E+0+96]=Ct(X,F,O),b[E+0+64]=Ct(F,O,ie),b[E+0+32]=b[E+1+96]=Ct(O,ie,se),b[E+1+32]=b[E+2+96]=Ct(ie,se,pe),b[E+2+32]=b[E+3+96]=Ct(se,pe,ve),b[E+3+32]=Ct(pe,ve,Ae)}function ar(b,E){var O=b[E+0-32],F=b[E+1-32],X=b[E+2-32],ie=b[E+3-32],se=b[E+4-32],pe=b[E+5-32],ve=b[E+6-32],Ae=b[E+7-32];b[E+0+0]=O+F+1>>1,b[E+1+0]=b[E+0+64]=F+X+1>>1,b[E+2+0]=b[E+1+64]=X+ie+1>>1,b[E+3+0]=b[E+2+64]=ie+se+1>>1,b[E+0+32]=Ct(O,F,X),b[E+1+32]=b[E+0+96]=Ct(F,X,ie),b[E+2+32]=b[E+1+96]=Ct(X,ie,se),b[E+3+32]=b[E+2+96]=Ct(ie,se,pe),b[E+3+64]=Ct(se,pe,ve),b[E+3+96]=Ct(pe,ve,Ae)}function Kr(b,E){var O=b[E-1+0],F=b[E-1+32],X=b[E-1+64],ie=b[E-1+96];b[E+0+0]=O+F+1>>1,b[E+2+0]=b[E+0+32]=F+X+1>>1,b[E+2+32]=b[E+0+64]=X+ie+1>>1,b[E+1+0]=Ct(O,F,X),b[E+3+0]=b[E+1+32]=Ct(F,X,ie),b[E+3+32]=b[E+1+64]=Ct(X,ie,ie),b[E+3+64]=b[E+2+64]=b[E+0+96]=b[E+1+96]=b[E+2+96]=b[E+3+96]=ie}function mo(b,E){var O=b[E-1+0],F=b[E-1+32],X=b[E-1+64],ie=b[E-1+96],se=b[E-1-32],pe=b[E+0-32],ve=b[E+1-32],Ae=b[E+2-32];b[E+0+0]=b[E+2+32]=O+se+1>>1,b[E+0+32]=b[E+2+64]=F+O+1>>1,b[E+0+64]=b[E+2+96]=X+F+1>>1,b[E+0+96]=ie+X+1>>1,b[E+3+0]=Ct(pe,ve,Ae),b[E+2+0]=Ct(se,pe,ve),b[E+1+0]=b[E+3+32]=Ct(O,se,pe),b[E+1+32]=b[E+3+64]=Ct(F,O,se),b[E+1+64]=b[E+3+96]=Ct(X,F,O),b[E+1+96]=Ct(ie,X,F)}function Ai(b,E){var O;for(O=0;8>O;++O)i(b,E+32*O,b,E-32,8)}function za(b,E){var O;for(O=0;8>O;++O)r(b,E,b[E-1],8),E+=32}function xa(b,E,O){var F;for(F=0;8>F;++F)r(E,O+32*F,b,8)}function hs(b,E){var O,F=8;for(O=0;8>O;++O)F+=b[E+O-32]+b[E-1+32*O];xa(F>>4,b,E)}function Qs(b,E){var O,F=4;for(O=0;8>O;++O)F+=b[E+O-32];xa(F>>3,b,E)}function Qi(b,E){var O,F=4;for(O=0;8>O;++O)F+=b[E-1+32*O];xa(F>>3,b,E)}function vo(b,E){xa(128,b,E)}function yo(b,E,O){var F=b[E-O],X=b[E+0],ie=3*(X-F)+li[1020+b[E-2*O]-b[E+O]],se=Aa[112+(ie+4>>3)];b[E-O]=Lr[255+F+Aa[112+(ie+3>>3)]],b[E+0]=Lr[255+X-se]}function eo(b,E,O,F){var X=b[E+0],ie=b[E+O];return ca[255+b[E-2*O]-b[E-O]]>F||ca[255+ie-X]>F}function Bn(b,E,O,F){return 4*ca[255+b[E-O]-b[E+0]]+ca[255+b[E-2*O]-b[E+O]]<=F}function os(b,E,O,F,X){var ie=b[E-3*O],se=b[E-2*O],pe=b[E-O],ve=b[E+0],Ae=b[E+O],qe=b[E+2*O],it=b[E+3*O];return 4*ca[255+pe-ve]+ca[255+se-Ae]>F?0:ca[255+b[E-4*O]-ie]<=X&&ca[255+ie-se]<=X&&ca[255+se-pe]<=X&&ca[255+it-qe]<=X&&ca[255+qe-Ae]<=X&&ca[255+Ae-ve]<=X}function Ar(b,E,O,F){var X=2*F+1;for(F=0;16>F;++F)Bn(b,E+F,O,X)&&yo(b,E+F,O)}function to(b,E,O,F){var X=2*F+1;for(F=0;16>F;++F)Bn(b,E+F*O,1,X)&&yo(b,E+F*O,1)}function ps(b,E,O,F){var X;for(X=3;0<X;--X)Ar(b,E+=4*O,O,F)}function Ps(b,E,O,F){var X;for(X=3;0<X;--X)to(b,E+=4,O,F)}function no(b,E,O,F,X,ie,se,pe){for(ie=2*ie+1;0<X--;){if(os(b,E,O,ie,se))if(eo(b,E,O,pe))yo(b,E,O);else{var ve=b,Ae=E,qe=O,it=ve[Ae-2*qe],Ce=ve[Ae-qe],Ve=ve[Ae+0],et=ve[Ae+qe],pt=ve[Ae+2*qe],tt=27*(xt=li[1020+3*(Ve-Ce)+li[1020+it-et]])+63>>7,ht=18*xt+63>>7,xt=9*xt+63>>7;ve[Ae-3*qe]=Lr[255+ve[Ae-3*qe]+xt],ve[Ae-2*qe]=Lr[255+it+ht],ve[Ae-qe]=Lr[255+Ce+tt],ve[Ae+0]=Lr[255+Ve-tt],ve[Ae+qe]=Lr[255+et-ht],ve[Ae+2*qe]=Lr[255+pt-xt]}E+=F}}function Uo(b,E,O,F,X,ie,se,pe){for(ie=2*ie+1;0<X--;){if(os(b,E,O,ie,se))if(eo(b,E,O,pe))yo(b,E,O);else{var ve=b,Ae=E,qe=O,it=ve[Ae-qe],Ce=ve[Ae+0],Ve=ve[Ae+qe],et=Aa[112+(4+(pt=3*(Ce-it))>>3)],pt=Aa[112+(pt+3>>3)],tt=et+1>>1;ve[Ae-2*qe]=Lr[255+ve[Ae-2*qe]+tt],ve[Ae-qe]=Lr[255+it+pt],ve[Ae+0]=Lr[255+Ce-et],ve[Ae+qe]=Lr[255+Ve-tt]}E+=F}}function gs(b,E,O,F,X,ie){no(b,E,O,1,16,F,X,ie)}function xo(b,E,O,F,X,ie){no(b,E,1,O,16,F,X,ie)}function Is(b,E,O,F,X,ie){var se;for(se=3;0<se;--se)Uo(b,E+=4*O,O,1,16,F,X,ie)}function D(b,E,O,F,X,ie){var se;for(se=3;0<se;--se)Uo(b,E+=4,1,O,16,F,X,ie)}function K(b,E,O,F,X,ie,se,pe){no(b,E,X,1,8,ie,se,pe),no(O,F,X,1,8,ie,se,pe)}function we(b,E,O,F,X,ie,se,pe){no(b,E,1,X,8,ie,se,pe),no(O,F,1,X,8,ie,se,pe)}function Ie(b,E,O,F,X,ie,se,pe){Uo(b,E+4*X,X,1,8,ie,se,pe),Uo(O,F+4*X,X,1,8,ie,se,pe)}function Ke(b,E,O,F,X,ie,se,pe){Uo(b,E+4,1,X,8,ie,se,pe),Uo(O,F+4,1,X,8,ie,se,pe)}function dt(){this.ba=new Pn,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new ri,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function wt(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function Bt(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function Zt(){this.ua=0,this.Wa=new Dn,this.vb=new Dn,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ye,this.yc=new Se}function yn(){this.xb=this.a=0,this.l=new di,this.ca=new Pn,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new Zt,this.ab=0,this.gc=l(4,Bt),this.Oc=0}function Mn(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new di,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Qn(b,E,O,F,X,ie,se){for(b=b==null?0:b[E+0],E=0;E<se;++E)X[ie+E]=b+O[F+E]&255,b=X[ie+E]}function Ki(b,E,O,F,X,ie,se){var pe;if(b==null)Qn(null,null,O,F,X,ie,se);else for(pe=0;pe<se;++pe)X[ie+pe]=b[E+pe]+O[F+pe]&255}function or(b,E,O,F,X,ie,se){if(b==null)Qn(null,null,O,F,X,ie,se);else{var pe,ve=b[E+0],Ae=ve,qe=ve;for(pe=0;pe<se;++pe)Ae=qe+(ve=b[E+pe])-Ae,qe=O[F+pe]+(-256&Ae?0>Ae?0:255:Ae)&255,Ae=ve,X[ie+pe]=qe}}function pi(b,E,O,F){var X=E.width,ie=E.o;if(e(b!=null&&E!=null),0>O||0>=F||O+F>ie)return null;if(!b.Cc){if(b.ga==null){var se;if(b.ga=new Mn,(se=b.ga==null)||(se=E.width*E.o,e(b.Gb.length==0),b.Gb=a(se),b.Uc=0,b.Gb==null?se=0:(b.mb=b.Gb,b.nb=b.Uc,b.rc=null,se=1),se=!se),!se){se=b.ga;var pe=b.Fa,ve=b.P,Ae=b.qc,qe=b.mb,it=b.nb,Ce=ve+1,Ve=Ae-1,et=se.l;if(e(pe!=null&&qe!=null&&E!=null),Ui[0]=null,Ui[1]=Qn,Ui[2]=Ki,Ui[3]=or,se.ca=qe,se.tb=it,se.c=E.width,se.i=E.height,e(0<se.c&&0<se.i),1>=Ae)E=0;else if(se.$a=3&pe[ve+0],se.Z=pe[ve+0]>>2&3,se.Lc=pe[ve+0]>>4&3,ve=pe[ve+0]>>6&3,0>se.$a||1<se.$a||4<=se.Z||1<se.Lc||ve)E=0;else if(et.put=nn,et.ac=Wr,et.bc=Ao,et.ma=se,et.width=E.width,et.height=E.height,et.Da=E.Da,et.v=E.v,et.va=E.va,et.j=E.j,et.o=E.o,se.$a)e:{e(se.$a==1),E=Oa();t:for(;;){if(E==null){E=0;break e}if(e(se!=null),se.mc=E,E.c=se.c,E.i=se.i,E.l=se.l,E.l.ma=se,E.l.width=se.c,E.l.height=se.i,E.a=0,De(E.m,pe,Ce,Ve),!ho(se.c,se.i,1,E,null)||(E.ab==1&&E.gc[0].hc==3&&ti(E.s)?(se.ic=1,pe=E.c*E.i,E.Ta=null,E.Ua=0,E.V=a(pe),E.Ba=0,E.V==null?(E.a=1,E=0):E=1):(se.ic=0,E=Gr(E,se.c)),!E))break t;E=1;break e}se.mc=null,E=0}else E=Ve>=se.c*se.i;se=!E}if(se)return null;b.ga.Lc!=1?b.Ga=0:F=ie-O}e(b.ga!=null),e(O+F<=ie);e:{if(E=(pe=b.ga).c,ie=pe.l.o,pe.$a==0){if(Ce=b.rc,Ve=b.Vc,et=b.Fa,ve=b.P+1+O*E,Ae=b.mb,qe=b.nb+O*E,e(ve<=b.P+b.qc),pe.Z!=0)for(e(Ui[pe.Z]!=null),se=0;se<F;++se)Ui[pe.Z](Ce,Ve,et,ve,Ae,qe,E),Ce=Ae,Ve=qe,qe+=E,ve+=E;else for(se=0;se<F;++se)i(Ae,qe,et,ve,E),Ce=Ae,Ve=qe,qe+=E,ve+=E;b.rc=Ce,b.Vc=Ve}else{if(e(pe.mc!=null),E=O+F,e((se=pe.mc)!=null),e(E<=se.i),se.C>=E)E=1;else if(pe.ic||wr(),pe.ic){pe=se.V,Ce=se.Ba,Ve=se.c;var pt=se.i,tt=(et=1,ve=se.$/Ve,Ae=se.$%Ve,qe=se.m,it=se.s,se.$),ht=Ve*pt,xt=Ve*E,Rt=it.wc,Et=tt<xt?nr(it,Ae,ve):null;e(tt<=ht),e(E<=pt),e(ti(it));t:for(;;){for(;!qe.h&&tt<xt;){if(Ae&Rt||(Et=nr(it,Ae,ve)),e(Et!=null),Te(qe),256>(pt=si(Et.G[0],Et.H[0],qe)))pe[Ce+tt]=pt,++tt,++Ae>=Ve&&(Ae=0,++ve<=E&&!(ve%16)&&Zi(se,ve));else{if(!(280>pt)){et=0;break t}pt=ei(pt-256,qe);var cn,Xt=si(Et.G[4],Et.H[4],qe);if(Te(qe),!(tt>=(Xt=xi(Ve,Xt=ei(Xt,qe)))&&ht-tt>=pt)){et=0;break t}for(cn=0;cn<pt;++cn)pe[Ce+tt+cn]=pe[Ce+tt+cn-Xt];for(tt+=pt,Ae+=pt;Ae>=Ve;)Ae-=Ve,++ve<=E&&!(ve%16)&&Zi(se,ve);tt<xt&&Ae&Rt&&(Et=nr(it,Ae,ve))}e(qe.h==Q(qe))}Zi(se,ve>E?E:ve);break t}!et||qe.h&&tt<ht?(et=0,se.a=qe.h?5:3):se.$=tt,E=et}else E=pr(se,se.V,se.Ba,se.c,se.i,E,Jo);if(!E){F=0;break e}}O+F>=ie&&(b.Cc=1),F=1}if(!F)return null;if(b.Cc&&((F=b.ga)!=null&&(F.mc=null),b.ga=null,0<b.Ga))return alert("todo:WebPDequantizeLevels"),null}return b.nb+O*X}function mr(b,E,O,F,X,ie){for(;0<X--;){var se,pe=b,ve=E+(O?1:0),Ae=b,qe=E+(O?0:3);for(se=0;se<F;++se){var it=Ae[qe+4*se];it!=255&&(it*=32897,pe[ve+4*se+0]=pe[ve+4*se+0]*it>>23,pe[ve+4*se+1]=pe[ve+4*se+1]*it>>23,pe[ve+4*se+2]=pe[ve+4*se+2]*it>>23)}E+=ie}}function Di(b,E,O,F,X){for(;0<F--;){var ie;for(ie=0;ie<O;++ie){var se=b[E+2*ie+0],pe=15&(Ae=b[E+2*ie+1]),ve=4369*pe,Ae=(240&Ae|Ae>>4)*ve>>16;b[E+2*ie+0]=(240&se|se>>4)*ve>>16&240|(15&se|se<<4)*ve>>16>>4&15,b[E+2*ie+1]=240&Ae|pe}E+=X}}function _r(b,E,O,F,X,ie,se,pe){var ve,Ae,qe=255;for(Ae=0;Ae<X;++Ae){for(ve=0;ve<F;++ve){var it=b[E+ve];ie[se+4*ve]=it,qe&=it}E+=O,se+=pe}return qe!=255}function Ba(b,E,O,F,X){var ie;for(ie=0;ie<X;++ie)O[F+ie]=b[E+ie]>>8}function wr(){Mt=mr,jt=Di,Wt=_r,An=Ba}function To(b,E,O){G[b]=function(F,X,ie,se,pe,ve,Ae,qe,it,Ce,Ve,et,pt,tt,ht,xt,Rt){var Et,cn=Rt-1>>1,Xt=pe[ve+0]|Ae[qe+0]<<16,qn=it[Ce+0]|Ve[et+0]<<16;e(F!=null);var rn=3*Xt+qn+131074>>2;for(E(F[X+0],255&rn,rn>>16,pt,tt),ie!=null&&(rn=3*qn+Xt+131074>>2,E(ie[se+0],255&rn,rn>>16,ht,xt)),Et=1;Et<=cn;++Et){var fi=pe[ve+Et]|Ae[qe+Et]<<16,yr=it[Ce+Et]|Ve[et+Et]<<16,Yn=Xt+fi+qn+yr+524296,Qt=Yn+2*(fi+qn)>>3;rn=Qt+Xt>>1,Xt=(Yn=Yn+2*(Xt+yr)>>3)+fi>>1,E(F[X+2*Et-1],255&rn,rn>>16,pt,tt+(2*Et-1)*O),E(F[X+2*Et-0],255&Xt,Xt>>16,pt,tt+(2*Et-0)*O),ie!=null&&(rn=Yn+qn>>1,Xt=Qt+yr>>1,E(ie[se+2*Et-1],255&rn,rn>>16,ht,xt+(2*Et-1)*O),E(ie[se+2*Et+0],255&Xt,Xt>>16,ht,xt+(2*Et+0)*O)),Xt=fi,qn=yr}1&Rt||(rn=3*Xt+qn+131074>>2,E(F[X+Rt-1],255&rn,rn>>16,pt,tt+(Rt-1)*O),ie!=null&&(rn=3*qn+Xt+131074>>2,E(ie[se+Rt-1],255&rn,rn>>16,ht,xt+(Rt-1)*O)))}}function Ho(){Ir[Ac]=sl,Ir[La]=Tl,Ir[$l]=ou,Ir[No]=jl,Ir[El]=Us,Ir[ol]=ys,Ir[$s]=kl,Ir[Al]=Tl,Ir[Jl]=jl,Ir[Ll]=Us,Ir[c]=ys}function Xr(b){return b&-16384?0>b?0:255:b>>Fu}function io(b,E){return Xr((19077*b>>8)+(26149*E>>8)-14234)}function ba(b,E,O){return Xr((19077*b>>8)-(6419*E>>8)-(13320*O>>8)+8708)}function zs(b,E){return Xr((19077*b>>8)+(33050*E>>8)-17685)}function ro(b,E,O,F,X){F[X+0]=io(b,O),F[X+1]=ba(b,E,O),F[X+2]=zs(b,E)}function sr(b,E,O,F,X){F[X+0]=zs(b,E),F[X+1]=ba(b,E,O),F[X+2]=io(b,O)}function ms(b,E,O,F,X){var ie=ba(b,E,O);E=ie<<3&224|zs(b,E)>>3,F[X+0]=248&io(b,O)|ie>>5,F[X+1]=E}function ss(b,E,O,F,X){var ie=240&zs(b,E)|15;F[X+0]=240&io(b,O)|ba(b,E,O)>>4,F[X+1]=ie}function Bs(b,E,O,F,X){F[X+0]=255,ro(b,E,O,F,X+1)}function jo(b,E,O,F,X){sr(b,E,O,F,X),F[X+3]=255}function Fi(b,E,O,F,X){ro(b,E,O,F,X),F[X+3]=255}function Fa(b,E,O){G[b]=function(F,X,ie,se,pe,ve,Ae,qe,it){for(var Ce=qe+(-2&it)*O;qe!=Ce;)E(F[X+0],ie[se+0],pe[ve+0],Ae,qe),E(F[X+1],ie[se+0],pe[ve+0],Ae,qe+O),X+=2,++se,++ve,qe+=2*O;1&it&&E(F[X+0],ie[se+0],pe[ve+0],Ae,qe)}}function Fs(b,E,O){return O==0?b==0?E==0?6:5:E==0?4:0:O}function _a(b,E,O,F,X){switch(b>>>30){case 3:He(E,O,F,X,0);break;case 2:Ze(E,O,F,X);break;case 1:je(E,O,F,X)}}function Ua(b,E){var O,F,X=E.M,ie=E.Nb,se=b.oc,pe=b.pc+40,ve=b.oc,Ae=b.pc+584,qe=b.oc,it=b.pc+600;for(O=0;16>O;++O)se[pe+32*O-1]=129;for(O=0;8>O;++O)ve[Ae+32*O-1]=129,qe[it+32*O-1]=129;for(0<X?se[pe-1-32]=ve[Ae-1-32]=qe[it-1-32]=129:(r(se,pe-32-1,127,21),r(ve,Ae-32-1,127,9),r(qe,it-32-1,127,9)),F=0;F<b.za;++F){var Ce=E.ya[E.aa+F];if(0<F){for(O=-1;16>O;++O)i(se,pe+32*O-4,se,pe+32*O+12,4);for(O=-1;8>O;++O)i(ve,Ae+32*O-4,ve,Ae+32*O+4,4),i(qe,it+32*O-4,qe,it+32*O+4,4)}var Ve=b.Gd,et=b.Hd+F,pt=Ce.ad,tt=Ce.Hc;if(0<X&&(i(se,pe-32,Ve[et].y,0,16),i(ve,Ae-32,Ve[et].f,0,8),i(qe,it-32,Ve[et].ea,0,8)),Ce.Za){var ht=se,xt=pe-32+16;for(0<X&&(F>=b.za-1?r(ht,xt,Ve[et].y[15],4):i(ht,xt,Ve[et+1].y,0,4)),O=0;4>O;O++)ht[xt+128+O]=ht[xt+256+O]=ht[xt+384+O]=ht[xt+0+O];for(O=0;16>O;++O,tt<<=2)ht=se,xt=pe+$r[O],Sr[Ce.Ob[O]](ht,xt),_a(tt,pt,16*+O,ht,xt)}else if(ht=Fs(F,X,Ce.Ob[0]),ao[ht](se,pe),tt!=0)for(O=0;16>O;++O,tt<<=2)_a(tt,pt,16*+O,se,pe+$r[O]);for(O=Ce.Gc,ht=Fs(F,X,Ce.Dd),qo[ht](ve,Ae),qo[ht](qe,it),tt=pt,ht=ve,xt=Ae,255&(Ce=0|O)&&(170&Ce?Be(tt,256,ht,xt):Ne(tt,256,ht,xt)),Ce=qe,tt=it,255&(O>>=8)&&(170&O?Be(pt,320,Ce,tt):Ne(pt,320,Ce,tt)),X<b.Ub-1&&(i(Ve[et].y,0,se,pe+480,16),i(Ve[et].f,0,ve,Ae+224,8),i(Ve[et].ea,0,qe,it+224,8)),O=8*ie*b.B,Ve=b.sa,et=b.ta+16*F+16*ie*b.R,pt=b.qa,Ce=b.ra+8*F+O,tt=b.Ha,ht=b.Ia+8*F+O,O=0;16>O;++O)i(Ve,et+O*b.R,se,pe+32*O,16);for(O=0;8>O;++O)i(pt,Ce+O*b.B,ve,Ae+32*O,8),i(tt,ht+O*b.B,qe,it+32*O,8)}}function Qr(b,E,O,F,X,ie,se,pe,ve){var Ae=[0],qe=[0],it=0,Ce=ve!=null?ve.kd:0,Ve=ve??new wt;if(b==null||12>O)return 7;Ve.data=b,Ve.w=E,Ve.ha=O,E=[E],O=[O],Ve.gb=[Ve.gb];e:{var et=E,pt=O,tt=Ve.gb;if(e(b!=null),e(pt!=null),e(tt!=null),tt[0]=0,12<=pt[0]&&!n(b,et[0],"RIFF")){if(n(b,et[0]+8,"WEBP")){tt=3;break e}var ht=Kt(b,et[0]+4);if(12>ht||4294967286<ht){tt=3;break e}if(Ce&&ht>pt[0]-8){tt=7;break e}tt[0]=ht,et[0]+=12,pt[0]-=12}tt=0}if(tt!=0)return tt;for(ht=0<Ve.gb[0],O=O[0];;){e:{var xt=b;pt=E,tt=O;var Rt=Ae,Et=qe,cn=et=[0];if((rn=it=[it])[0]=0,8>tt[0])tt=7;else{if(!n(xt,pt[0],"VP8X")){if(Kt(xt,pt[0]+4)!=10){tt=3;break e}if(18>tt[0]){tt=7;break e}var Xt=Kt(xt,pt[0]+8),qn=1+Ot(xt,pt[0]+12);if(2147483648<=qn*(xt=1+Ot(xt,pt[0]+15))){tt=3;break e}cn!=null&&(cn[0]=Xt),Rt!=null&&(Rt[0]=qn),Et!=null&&(Et[0]=xt),pt[0]+=18,tt[0]-=18,rn[0]=1}tt=0}}if(it=it[0],et=et[0],tt!=0)return tt;if(pt=!!(2&et),!ht&&it)return 3;if(ie!=null&&(ie[0]=!!(16&et)),se!=null&&(se[0]=pt),pe!=null&&(pe[0]=0),se=Ae[0],et=qe[0],it&&pt&&ve==null){tt=0;break}if(4>O){tt=7;break}if(ht&&it||!ht&&!it&&!n(b,E[0],"ALPH")){O=[O],Ve.na=[Ve.na],Ve.P=[Ve.P],Ve.Sa=[Ve.Sa];e:{Xt=b,tt=E,ht=O;var rn=Ve.gb;Rt=Ve.na,Et=Ve.P,cn=Ve.Sa,qn=22,e(Xt!=null),e(ht!=null),xt=tt[0];var fi=ht[0];for(e(Rt!=null),e(cn!=null),Rt[0]=null,Et[0]=null,cn[0]=0;;){if(tt[0]=xt,ht[0]=fi,8>fi){tt=7;break e}var yr=Kt(Xt,xt+4);if(4294967286<yr){tt=3;break e}var Yn=8+yr+1&-2;if(qn+=Yn,0<rn&&qn>rn){tt=3;break e}if(!n(Xt,xt,"VP8 ")||!n(Xt,xt,"VP8L")){tt=0;break e}if(fi[0]<Yn){tt=7;break e}n(Xt,xt,"ALPH")||(Rt[0]=Xt,Et[0]=xt+8,cn[0]=yr),xt+=Yn,fi-=Yn}}if(O=O[0],Ve.na=Ve.na[0],Ve.P=Ve.P[0],Ve.Sa=Ve.Sa[0],tt!=0)break}O=[O],Ve.Ja=[Ve.Ja],Ve.xa=[Ve.xa];e:if(rn=b,tt=E,ht=O,Rt=Ve.gb[0],Et=Ve.Ja,cn=Ve.xa,Xt=tt[0],xt=!n(rn,Xt,"VP8 "),qn=!n(rn,Xt,"VP8L"),e(rn!=null),e(ht!=null),e(Et!=null),e(cn!=null),8>ht[0])tt=7;else{if(xt||qn){if(rn=Kt(rn,Xt+4),12<=Rt&&rn>Rt-12){tt=3;break e}if(Ce&&rn>ht[0]-8){tt=7;break e}Et[0]=rn,tt[0]+=8,ht[0]-=8,cn[0]=qn}else cn[0]=5<=ht[0]&&rn[Xt+0]==47&&!(rn[Xt+4]>>5),Et[0]=ht[0];tt=0}if(O=O[0],Ve.Ja=Ve.Ja[0],Ve.xa=Ve.xa[0],E=E[0],tt!=0)break;if(4294967286<Ve.Ja)return 3;if(pe==null||pt||(pe[0]=Ve.xa?2:1),se=[se],et=[et],Ve.xa){if(5>O){tt=7;break}pe=se,Ce=et,pt=ie,b==null||5>O?b=0:5<=O&&b[E+0]==47&&!(b[E+4]>>5)?(ht=[0],rn=[0],Rt=[0],De(Et=new te,b,E,O),Za(Et,ht,rn,Rt)?(pe!=null&&(pe[0]=ht[0]),Ce!=null&&(Ce[0]=rn[0]),pt!=null&&(pt[0]=Rt[0]),b=1):b=0):b=0}else{if(10>O){tt=7;break}pe=et,b==null||10>O||!Ia(b,E+3,O-3)?b=0:(Ce=b[E+0]|b[E+1]<<8|b[E+2]<<16,pt=16383&(b[E+7]<<8|b[E+6]),b=16383&(b[E+9]<<8|b[E+8]),1&Ce||3<(Ce>>1&7)||!(Ce>>4&1)||Ce>>5>=Ve.Ja||!pt||!b?b=0:(se&&(se[0]=pt),pe&&(pe[0]=b),b=1))}if(!b||(se=se[0],et=et[0],it&&(Ae[0]!=se||qe[0]!=et)))return 3;ve!=null&&(ve[0]=Ve,ve.offset=E-ve.w,e(4294967286>E-ve.w),e(ve.offset==ve.ha-O));break}return tt==0||tt==7&&it&&ve==null?(ie!=null&&(ie[0]|=Ve.na!=null&&0<Ve.na.length),F!=null&&(F[0]=se),X!=null&&(X[0]=et),0):tt}function ls(b,E,O){var F=E.width,X=E.height,ie=0,se=0,pe=F,ve=X;if(E.Da=b!=null&&0<b.Da,E.Da&&(pe=b.cd,ve=b.bd,ie=b.v,se=b.j,11>O||(ie&=-2,se&=-2),0>ie||0>se||0>=pe||0>=ve||ie+pe>F||se+ve>X))return 0;if(E.v=ie,E.j=se,E.va=ie+pe,E.o=se+ve,E.U=pe,E.T=ve,E.da=b!=null&&0<b.da,E.da){if(!dn(pe,ve,O=[b.ib],ie=[b.hb]))return 0;E.ib=O[0],E.hb=ie[0]}return E.ob=b!=null&&b.ob,E.Kb=b==null||!b.Sd,E.da&&(E.ob=E.ib<3*F/4&&E.hb<3*X/4,E.Kb=0),1}function cs(b){if(b==null)return 2;if(11>b.S){var E=b.f.RGBA;E.fb+=(b.height-1)*E.A,E.A=-E.A}else E=b.f.kb,b=b.height,E.O+=(b-1)*E.fa,E.fa=-E.fa,E.N+=(b-1>>1)*E.Ab,E.Ab=-E.Ab,E.W+=(b-1>>1)*E.Db,E.Db=-E.Db,E.F!=null&&(E.J+=(b-1)*E.lb,E.lb=-E.lb);return 0}function bo(b,E,O,F){if(F==null||0>=b||0>=E)return 2;if(O!=null){if(O.Da){var X=O.cd,ie=O.bd,se=-2&O.v,pe=-2&O.j;if(0>se||0>pe||0>=X||0>=ie||se+X>b||pe+ie>E)return 2;b=X,E=ie}if(O.da){if(!dn(b,E,X=[O.ib],ie=[O.hb]))return 2;b=X[0],E=ie[0]}}F.width=b,F.height=E;e:{var ve=F.width,Ae=F.height;if(b=F.S,0>=ve||0>=Ae||!(b>=Ac&&13>b))b=2;else{if(0>=F.Rd&&F.sd==null){se=ie=X=E=0;var qe=(pe=ve*Hu[b])*Ae;if(11>b||(ie=(Ae+1)/2*(E=(ve+1)/2),b==12&&(se=(X=ve)*Ae)),(Ae=a(qe+2*ie+se))==null){b=1;break e}F.sd=Ae,11>b?((ve=F.f.RGBA).eb=Ae,ve.fb=0,ve.A=pe,ve.size=qe):((ve=F.f.kb).y=Ae,ve.O=0,ve.fa=pe,ve.Fd=qe,ve.f=Ae,ve.N=0+qe,ve.Ab=E,ve.Cd=ie,ve.ea=Ae,ve.W=0+qe+ie,ve.Db=E,ve.Ed=ie,b==12&&(ve.F=Ae,ve.J=0+qe+2*ie),ve.Tc=se,ve.lb=X)}if(E=1,X=F.S,ie=F.width,se=F.height,X>=Ac&&13>X)if(11>X)b=F.f.RGBA,E&=(pe=Math.abs(b.A))*(se-1)+ie<=b.size,E&=pe>=ie*Hu[X],E&=b.eb!=null;else{b=F.f.kb,pe=(ie+1)/2,qe=(se+1)/2,ve=Math.abs(b.fa),Ae=Math.abs(b.Ab);var it=Math.abs(b.Db),Ce=Math.abs(b.lb),Ve=Ce*(se-1)+ie;E&=ve*(se-1)+ie<=b.Fd,E&=Ae*(qe-1)+pe<=b.Cd,E=(E&=it*(qe-1)+pe<=b.Ed)&ve>=ie&Ae>=pe&it>=pe,E&=b.y!=null,E&=b.f!=null,E&=b.ea!=null,X==12&&(E&=Ce>=ie,E&=Ve<=b.Tc,E&=b.F!=null)}else E=0;b=E?0:2}}return b!=0||O!=null&&O.fd&&(b=cs(F)),b}var Ha=64,lr=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Fn=24,la=32,wa=8,ko=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];kt("Predictor0","PredictorAdd0"),G.Predictor0=function(){return 4278190080},G.Predictor1=function(b){return b},G.Predictor2=function(b,E,O){return E[O+0]},G.Predictor3=function(b,E,O){return E[O+1]},G.Predictor4=function(b,E,O){return E[O-1]},G.Predictor5=function(b,E,O){return Vt(Vt(b,E[O+1]),E[O+0])},G.Predictor6=function(b,E,O){return Vt(b,E[O-1])},G.Predictor7=function(b,E,O){return Vt(b,E[O+0])},G.Predictor8=function(b,E,O){return Vt(E[O-1],E[O+0])},G.Predictor9=function(b,E,O){return Vt(E[O+0],E[O+1])},G.Predictor10=function(b,E,O){return Vt(Vt(b,E[O-1]),Vt(E[O+0],E[O+1]))},G.Predictor11=function(b,E,O){var F=E[O+0];return 0>=$t(F>>24&255,b>>24&255,(E=E[O-1])>>24&255)+$t(F>>16&255,b>>16&255,E>>16&255)+$t(F>>8&255,b>>8&255,E>>8&255)+$t(255&F,255&b,255&E)?F:b},G.Predictor12=function(b,E,O){var F=E[O+0];return(xn((b>>24&255)+(F>>24&255)-((E=E[O-1])>>24&255))<<24|xn((b>>16&255)+(F>>16&255)-(E>>16&255))<<16|xn((b>>8&255)+(F>>8&255)-(E>>8&255))<<8|xn((255&b)+(255&F)-(255&E)))>>>0},G.Predictor13=function(b,E,O){var F=E[O-1];return(kn((b=Vt(b,E[O+0]))>>24&255,F>>24&255)<<24|kn(b>>16&255,F>>16&255)<<16|kn(b>>8&255,F>>8&255)<<8|kn(255&b,255&F))>>>0};var vs=G.PredictorAdd0;G.PredictorAdd1=Cn,kt("Predictor2","PredictorAdd2"),kt("Predictor3","PredictorAdd3"),kt("Predictor4","PredictorAdd4"),kt("Predictor5","PredictorAdd5"),kt("Predictor6","PredictorAdd6"),kt("Predictor7","PredictorAdd7"),kt("Predictor8","PredictorAdd8"),kt("Predictor9","PredictorAdd9"),kt("Predictor10","PredictorAdd10"),kt("Predictor11","PredictorAdd11"),kt("Predictor12","PredictorAdd12"),kt("Predictor13","PredictorAdd13");var Sa=G.PredictorAdd2;en("ColorIndexInverseTransform","MapARGB","32b",function(b){return b>>8&255},function(b){return b}),en("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(b){return b},function(b){return b>>8&255});var Mi,Ro=G.ColorIndexInverseTransform,Ca=G.MapARGB,Wi=G.VP8LColorIndexInverseTransformAlpha,vr=G.MapAlpha,w=G.VP8LPredictorsAdd=[];w.length=16,(G.VP8LPredictors=[]).length=16,(G.VP8LPredictorsAdd_C=[]).length=16,(G.VP8LPredictors_C=[]).length=16;var j,P,z,W,$,ge,be,He,Ze,Be,je,Ne,Pe,Me,Ue,Xe,nt,Qe,ft,Tt,Dt,It,Lt,Gt,Mt,jt,Wt,An,Ln=a(511),fn=a(2041),On=a(225),gi=a(767),Ea=0,li=fn,Aa=On,Lr=gi,ca=Ln,Ac=0,La=1,$l=2,No=3,El=4,ol=5,$s=6,Al=7,Jl=8,Ll=9,c=10,v=[2,3,7],S=[3,3,11],N=[280,256,256,256,40],U=[0,1,1,1,0],re=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],ke=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],$e=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],ot=8,bt=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Ft=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],an=null,$n=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],Ta=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Tr=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],Do=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Li=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],Ti=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],ci=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],ao=[],Sr=[],qo=[],Js=1,Lc=2,Ui=[],Ir=[];To("UpsampleRgbLinePair",ro,3),To("UpsampleBgrLinePair",sr,3),To("UpsampleRgbaLinePair",Fi,4),To("UpsampleBgraLinePair",jo,4),To("UpsampleArgbLinePair",Bs,4),To("UpsampleRgba4444LinePair",ss,2),To("UpsampleRgb565LinePair",ms,2);var sl=G.UpsampleRgbLinePair,ou=G.UpsampleBgrLinePair,Tl=G.UpsampleRgbaLinePair,jl=G.UpsampleBgraLinePair,Us=G.UpsampleArgbLinePair,ys=G.UpsampleRgba4444LinePair,kl=G.UpsampleRgb565LinePair,xs=16,Tc=1<<xs-1,ec=-227,Rl=482,Fu=6,Nl=0,oo=a(256),Uu=a(256),rh=a(256),jg=a(256),kg=a(Rl-ec),Rg=a(Rl-ec);Fa("YuvToRgbRow",ro,3),Fa("YuvToBgrRow",sr,3),Fa("YuvToRgbaRow",Fi,4),Fa("YuvToBgraRow",jo,4),Fa("YuvToArgbRow",Bs,4),Fa("YuvToRgba4444Row",ss,2),Fa("YuvToRgb565Row",ms,2);var $r=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],jc=[0,2,8],su=[8,7,6,4,4,2,2,2,1,1,1,1],lu=1;this.WebPDecodeRGBA=function(b,E,O,F,X){var ie=La,se=new dt,pe=new Pn;se.ba=pe,pe.S=ie,pe.width=[pe.width],pe.height=[pe.height];var ve=pe.width,Ae=pe.height,qe=new ln;if(qe==null||b==null)var it=2;else e(qe!=null),it=Qr(b,E,O,qe.width,qe.height,qe.Pd,qe.Qd,qe.format,null);if(it!=0?ve=0:(ve!=null&&(ve[0]=qe.width[0]),Ae!=null&&(Ae[0]=qe.height[0]),ve=1),ve){pe.width=pe.width[0],pe.height=pe.height[0],F!=null&&(F[0]=pe.width),X!=null&&(X[0]=pe.height);e:{if(F=new di,(X=new wt).data=b,X.w=E,X.ha=O,X.kd=1,E=[0],e(X!=null),((b=Qr(X.data,X.w,X.ha,null,null,null,E,null,X))==0||b==7)&&E[0]&&(b=4),(E=b)==0){if(e(se!=null),F.data=X.data,F.w=X.w+X.offset,F.ha=X.ha-X.offset,F.put=nn,F.ac=Wr,F.bc=Ao,F.ma=se,X.xa){if((b=Oa())==null){se=1;break e}if((function(Ce,Ve){var et=[0],pt=[0],tt=[0];t:for(;;){if(Ce==null)return 0;if(Ve==null)return Ce.a=2,0;if(Ce.l=Ve,Ce.a=0,De(Ce.m,Ve.data,Ve.w,Ve.ha),!Za(Ce.m,et,pt,tt)){Ce.a=3;break t}if(Ce.xb=Lc,Ve.width=et[0],Ve.height=pt[0],!ho(et[0],pt[0],1,Ce,null))break t;return 1}return e(Ce.a!=0),0})(b,F)){if(F=(E=bo(F.width,F.height,se.Oa,se.ba))==0){t:{F=b;n:for(;;){if(F==null){F=0;break t}if(e(F.s.yc!=null),e(F.s.Ya!=null),e(0<F.s.Wb),e((O=F.l)!=null),e((X=O.ma)!=null),F.xb!=0){if(F.ca=X.ba,F.tb=X.tb,e(F.ca!=null),!ls(X.Oa,O,No)){F.a=2;break n}if(!Gr(F,O.width)||O.da)break n;if((O.da||vn(F.ca.S))&&wr(),11>F.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),F.ca.f.kb.F!=null&&wr()),F.Pb&&0<F.s.ua&&F.s.vb.X==null&&!ye(F.s.vb,F.s.Wa.Xa)){F.a=1;break n}F.xb=0}if(!pr(F,F.V,F.Ba,F.c,F.i,O.o,ra))break n;X.Dc=F.Ma,F=1;break t}e(F.a!=0),F=0}F=!F}F&&(E=b.a)}else E=b.a}else{if((b=new ya)==null){se=1;break e}if(b.Fa=X.na,b.P=X.P,b.qc=X.Sa,$a(b,F)){if((E=bo(F.width,F.height,se.Oa,se.ba))==0){if(b.Aa=0,O=se.Oa,e((X=b)!=null),O!=null){if(0<(ve=0>(ve=O.Md)?0:100<ve?255:255*ve/100)){for(Ae=qe=0;4>Ae;++Ae)12>(it=X.pb[Ae]).lc&&(it.ia=ve*su[0>it.lc?0:it.lc]>>3),qe|=it.ia;qe&&(alert("todo:VP8InitRandom"),X.ia=1)}X.Ga=O.Id,100<X.Ga?X.Ga=100:0>X.Ga&&(X.Ga=0)}(function(Ce,Ve){if(Ce==null)return 0;if(Ve==null)return Gn(Ce,2,"NULL VP8Io parameter in VP8Decode().");if(!Ce.cb&&!$a(Ce,Ve))return 0;if(e(Ce.cb),Ve.ac==null||Ve.ac(Ve)){Ve.ob&&(Ce.L=0);var et=jc[Ce.L];if(Ce.L==2?(Ce.yb=0,Ce.zb=0):(Ce.yb=Ve.v-et>>4,Ce.zb=Ve.j-et>>4,0>Ce.yb&&(Ce.yb=0),0>Ce.zb&&(Ce.zb=0)),Ce.Va=Ve.o+15+et>>4,Ce.Hb=Ve.va+15+et>>4,Ce.Hb>Ce.za&&(Ce.Hb=Ce.za),Ce.Va>Ce.Ub&&(Ce.Va=Ce.Ub),0<Ce.L){var pt=Ce.ed;for(et=0;4>et;++et){var tt;if(Ce.Qa.Cb){var ht=Ce.Qa.Lb[et];Ce.Qa.Fb||(ht+=pt.Tb)}else ht=pt.Tb;for(tt=0;1>=tt;++tt){var xt=Ce.gd[et][tt],Rt=ht;if(pt.Pc&&(Rt+=pt.vd[0],tt&&(Rt+=pt.od[0])),0<(Rt=0>Rt?0:63<Rt?63:Rt)){var Et=Rt;0<pt.wb&&(Et=4<pt.wb?Et>>2:Et>>1)>9-pt.wb&&(Et=9-pt.wb),1>Et&&(Et=1),xt.dd=Et,xt.tc=2*Rt+Et,xt.ld=40<=Rt?2:15<=Rt?1:0}else xt.tc=0;xt.La=tt}}}et=0}else Gn(Ce,6,"Frame setup failed"),et=Ce.a;if(et=et==0){if(et){Ce.$c=0,0<Ce.Aa||(Ce.Ic=lu);t:{et=Ce.Ic,pt=4*(Et=Ce.za);var cn=32*Et,Xt=Et+1,qn=0<Ce.L?Et*(0<Ce.Aa?2:1):0,rn=(Ce.Aa==2?2:1)*Et;if((xt=pt+832+(tt=3*(16*et+jc[Ce.L])/2*cn)+(ht=Ce.Fa!=null&&0<Ce.Fa.length?Ce.Kc.c*Ce.Kc.i:0))!=xt)et=0;else{if(xt>Ce.Vb){if(Ce.Vb=0,Ce.Ec=a(xt),Ce.Fc=0,Ce.Ec==null){et=Gn(Ce,1,"no memory during frame initialization.");break t}Ce.Vb=xt}xt=Ce.Ec,Rt=Ce.Fc,Ce.Ac=xt,Ce.Bc=Rt,Rt+=pt,Ce.Gd=l(cn,es),Ce.Hd=0,Ce.rb=l(Xt+1,Xa),Ce.sb=1,Ce.wa=qn?l(qn,oa):null,Ce.Y=0,Ce.D.Nb=0,Ce.D.wa=Ce.wa,Ce.D.Y=Ce.Y,0<Ce.Aa&&(Ce.D.Y+=Et),e(!0),Ce.oc=xt,Ce.pc=Rt,Rt+=832,Ce.ya=l(rn,va),Ce.aa=0,Ce.D.ya=Ce.ya,Ce.D.aa=Ce.aa,Ce.Aa==2&&(Ce.D.aa+=Et),Ce.R=16*Et,Ce.B=8*Et,Et=(cn=jc[Ce.L])*Ce.R,cn=cn/2*Ce.B,Ce.sa=xt,Ce.ta=Rt+Et,Ce.qa=Ce.sa,Ce.ra=Ce.ta+16*et*Ce.R+cn,Ce.Ha=Ce.qa,Ce.Ia=Ce.ra+8*et*Ce.B+cn,Ce.$c=0,Rt+=tt,Ce.mb=ht?xt:null,Ce.nb=ht?Rt:null,e(Rt+ht<=Ce.Fc+Ce.Vb),Ii(Ce),r(Ce.Ac,Ce.Bc,0,pt),et=1}}if(et){if(Ve.ka=0,Ve.y=Ce.sa,Ve.O=Ce.ta,Ve.f=Ce.qa,Ve.N=Ce.ra,Ve.ea=Ce.Ha,Ve.Vd=Ce.Ia,Ve.fa=Ce.R,Ve.Rc=Ce.B,Ve.F=null,Ve.J=0,!Ea){for(et=-255;255>=et;++et)Ln[255+et]=0>et?-et:et;for(et=-1020;1020>=et;++et)fn[1020+et]=-128>et?-128:127<et?127:et;for(et=-112;112>=et;++et)On[112+et]=-16>et?-16:15<et?15:et;for(et=-255;510>=et;++et)gi[255+et]=0>et?0:255<et?255:et;Ea=1}be=sa,He=Ja,Be=Xn,je=po,Ne=go,Ze=ns,Pe=gs,Me=xo,Ue=K,Xe=we,nt=Is,Qe=D,ft=Ie,Tt=Ke,Dt=Ar,It=to,Lt=ps,Gt=Ps,Sr[0]=as,Sr[1]=Vn,Sr[2]=rr,Sr[3]=ai,Sr[4]=Zr,Sr[5]=Os,Sr[6]=Bi,Sr[7]=ar,Sr[8]=mo,Sr[9]=Kr,ao[0]=Vr,ao[1]=Ms,ao[2]=fs,ao[3]=Pr,ao[4]=Yr,ao[5]=Fo,ao[6]=rs,qo[0]=hs,qo[1]=Ds,qo[2]=Ai,qo[3]=za,qo[4]=Qi,qo[5]=Qs,qo[6]=vo,et=1}else et=0}et&&(et=(function(fi,yr){for(fi.M=0;fi.M<fi.Va;++fi.M){var Yn,Qt=fi.Jc[fi.M&fi.Xb],qt=fi.m,jr=fi;for(Yn=0;Yn<jr.za;++Yn){var Tn=qt,Jn=jr,Gi=Jn.Ac,ja=Jn.Bc+4*Yn,so=Jn.zc,cr=Jn.ya[Jn.aa+Yn];if(Jn.Qa.Bb?cr.$b=Re(Tn,Jn.Pa.jb[0])?2+Re(Tn,Jn.Pa.jb[2]):Re(Tn,Jn.Pa.jb[1]):cr.$b=0,Jn.kc&&(cr.Ad=Re(Tn,Jn.Bd)),cr.Za=!Re(Tn,145)+0,cr.Za){var ua=cr.Ob,_o=0;for(Jn=0;4>Jn;++Jn){var da,oi=so[0+Jn];for(da=0;4>da;++da){oi=Li[Gi[ja+da]][oi];for(var ji=Tr[Re(Tn,oi[0])];0<ji;)ji=Tr[2*ji+Re(Tn,oi[ji])];oi=-ji,Gi[ja+da]=oi}i(ua,_o,Gi,ja,4),_o+=4,so[0+Jn]=oi}}else oi=Re(Tn,156)?Re(Tn,128)?1:3:Re(Tn,163)?2:0,cr.Ob[0]=oi,r(Gi,ja,oi,4),r(so,0,oi,4);cr.Dd=Re(Tn,142)?Re(Tn,114)?Re(Tn,183)?1:3:2:0}if(jr.m.Ka)return Gn(fi,7,"Premature end-of-partition0 encountered.");for(;fi.ja<fi.za;++fi.ja){if(jr=Qt,Tn=(qt=fi).rb[qt.sb-1],Gi=qt.rb[qt.sb+qt.ja],Yn=qt.ya[qt.aa+qt.ja],ja=qt.kc?Yn.Ad:0)Tn.la=Gi.la=0,Yn.Za||(Tn.Na=Gi.Na=0),Yn.Hc=0,Yn.Gc=0,Yn.ia=0;else{var kr,Oi;if(Tn=Gi,Gi=jr,ja=qt.Pa.Xc,so=qt.ya[qt.aa+qt.ja],cr=qt.pb[so.$b],Jn=so.ad,ua=0,_o=qt.rb[qt.sb-1],oi=da=0,r(Jn,ua,0,384),so.Za)var ka=0,Rr=ja[3];else{ji=a(16);var ki=Tn.Na+_o.Na;if(ki=an(Gi,ja[1],ki,cr.Eb,0,ji,0),Tn.Na=_o.Na=(0<ki)+0,1<ki)be(ji,0,Jn,ua);else{var Jr=ji[0]+3>>3;for(ji=0;256>ji;ji+=16)Jn[ua+ji]=Jr}ka=1,Rr=ja[0]}var Vi=15&Tn.la,fa=15&_o.la;for(ji=0;4>ji;++ji){var ha=1&fa;for(Jr=Oi=0;4>Jr;++Jr)Vi=Vi>>1|(ha=(ki=an(Gi,Rr,ki=ha+(1&Vi),cr.Sc,ka,Jn,ua))>ka)<<7,Oi=Oi<<2|(3<ki?3:1<ki?2:Jn[ua+0]!=0),ua+=16;Vi>>=4,fa=fa>>1|ha<<7,da=(da<<8|Oi)>>>0}for(Rr=Vi,ka=fa>>4,kr=0;4>kr;kr+=2){for(Oi=0,Vi=Tn.la>>4+kr,fa=_o.la>>4+kr,ji=0;2>ji;++ji){for(ha=1&fa,Jr=0;2>Jr;++Jr)ki=ha+(1&Vi),Vi=Vi>>1|(ha=0<(ki=an(Gi,ja[2],ki,cr.Qc,0,Jn,ua)))<<3,Oi=Oi<<2|(3<ki?3:1<ki?2:Jn[ua+0]!=0),ua+=16;Vi>>=2,fa=fa>>1|ha<<5}oi|=Oi<<4*kr,Rr|=Vi<<4<<kr,ka|=(240&fa)<<kr}Tn.la=Rr,_o.la=ka,so.Hc=da,so.Gc=oi,so.ia=43690&oi?0:cr.ia,ja=!(da|oi)}if(0<qt.L&&(qt.wa[qt.Y+qt.ja]=qt.gd[Yn.$b][Yn.Za],qt.wa[qt.Y+qt.ja].La|=!ja),jr.Ka)return Gn(fi,7,"Premature end-of-file encountered.")}if(Ii(fi),qt=yr,jr=1,Yn=(Qt=fi).D,Tn=0<Qt.L&&Qt.M>=Qt.zb&&Qt.M<=Qt.Va,Qt.Aa==0)t:{if(Yn.M=Qt.M,Yn.uc=Tn,Ua(Qt,Yn),jr=1,Yn=(Oi=Qt.D).Nb,Tn=(oi=jc[Qt.L])*Qt.R,Gi=oi/2*Qt.B,ji=16*Yn*Qt.R,Jr=8*Yn*Qt.B,ja=Qt.sa,so=Qt.ta-Tn+ji,cr=Qt.qa,Jn=Qt.ra-Gi+Jr,ua=Qt.Ha,_o=Qt.Ia-Gi+Jr,fa=(Vi=Oi.M)==0,da=Vi>=Qt.Va-1,Qt.Aa==2&&Ua(Qt,Oi),Oi.uc)for(ha=(ki=Qt).D.M,e(ki.D.uc),Oi=ki.yb;Oi<ki.Hb;++Oi){ka=Oi,Rr=ha;var $i=(Ci=(pa=ki).D).Nb;kr=pa.R;var Ci=Ci.wa[Ci.Y+ka],wo=pa.sa,zr=pa.ta+16*$i*kr+16*ka,bn=Ci.dd,_n=Ci.tc;if(_n!=0)if(e(3<=_n),pa.L==1)0<ka&&It(wo,zr,kr,_n+4),Ci.La&&Gt(wo,zr,kr,_n),0<Rr&&Dt(wo,zr,kr,_n+4),Ci.La&&Lt(wo,zr,kr,_n);else{var Ri=pa.B,Wo=pa.qa,bs=pa.ra+8*$i*Ri+8*ka,Mo=pa.Ha,pa=pa.Ia+8*$i*Ri+8*ka;$i=Ci.ld,0<ka&&(Me(wo,zr,kr,_n+4,bn,$i),Xe(Wo,bs,Mo,pa,Ri,_n+4,bn,$i)),Ci.La&&(Qe(wo,zr,kr,_n,bn,$i),Tt(Wo,bs,Mo,pa,Ri,_n,bn,$i)),0<Rr&&(Pe(wo,zr,kr,_n+4,bn,$i),Ue(Wo,bs,Mo,pa,Ri,_n+4,bn,$i)),Ci.La&&(nt(wo,zr,kr,_n,bn,$i),ft(Wo,bs,Mo,pa,Ri,_n,bn,$i))}}if(Qt.ia&&alert("todo:DitherRow"),qt.put!=null){if(Oi=16*Vi,Vi=16*(Vi+1),fa?(qt.y=Qt.sa,qt.O=Qt.ta+ji,qt.f=Qt.qa,qt.N=Qt.ra+Jr,qt.ea=Qt.Ha,qt.W=Qt.Ia+Jr):(Oi-=oi,qt.y=ja,qt.O=so,qt.f=cr,qt.N=Jn,qt.ea=ua,qt.W=_o),da||(Vi-=oi),Vi>qt.o&&(Vi=qt.o),qt.F=null,qt.J=null,Qt.Fa!=null&&0<Qt.Fa.length&&Oi<Vi&&(qt.J=pi(Qt,qt,Oi,Vi-Oi),qt.F=Qt.mb,qt.F==null&&qt.F.length==0)){jr=Gn(Qt,3,"Could not decode alpha data.");break t}Oi<qt.j&&(oi=qt.j-Oi,Oi=qt.j,e(!(1&oi)),qt.O+=Qt.R*oi,qt.N+=Qt.B*(oi>>1),qt.W+=Qt.B*(oi>>1),qt.F!=null&&(qt.J+=qt.width*oi)),Oi<Vi&&(qt.O+=qt.v,qt.N+=qt.v>>1,qt.W+=qt.v>>1,qt.F!=null&&(qt.J+=qt.v),qt.ka=Oi-qt.j,qt.U=qt.va-qt.v,qt.T=Vi-Oi,jr=qt.put(qt))}Yn+1!=Qt.Ic||da||(i(Qt.sa,Qt.ta-Tn,ja,so+16*Qt.R,Tn),i(Qt.qa,Qt.ra-Gi,cr,Jn+8*Qt.B,Gi),i(Qt.Ha,Qt.Ia-Gi,ua,_o+8*Qt.B,Gi))}if(!jr)return Gn(fi,6,"Output aborted.")}return 1})(Ce,Ve)),Ve.bc!=null&&Ve.bc(Ve),et&=1}return et?(Ce.cb=0,et):0})(b,F)||(E=b.a)}}else E=b.a}E==0&&se.Oa!=null&&se.Oa.fd&&(E=cs(se.ba))}se=E}ie=se!=0?null:11>ie?pe.f.RGBA.eb:pe.f.kb.y}else ie=null;return ie};var Hu=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(G,me){for(var Z="",J=0;J<4;J++)Z+=String.fromCharCode(G[me++]);return Z}function m(G,me){return G[me+0]|G[me+1]<<8}function _(G,me){return(G[me+0]|G[me+1]<<8|G[me+2]<<16)>>>0}function A(G,me){return(G[me+0]|G[me+1]<<8|G[me+2]<<16|G[me+3]<<24)>>>0}new p;var x=[0],R=[0],M=[],k=new p,I=t,Y=(function(G,me){var Z={},J=0,Se=!1,Ee=0,Ye=0;if(Z.frames=[],!(function(H,te){for(var ce=0;ce<4;ce++)if(H[te+ce]!="RIFF".charCodeAt(ce))return!0;return!1})(G,me)){for(A(G,me+=4),me+=8;me<G.length;){var oe=g(G,me),ae=A(G,me+=4);me+=4;var he=ae+(1&ae);switch(oe){case"VP8 ":case"VP8L":Z.frames[J]===void 0&&(Z.frames[J]={}),(ne=Z.frames[J]).src_off=Se?Ye:me-8,ne.src_size=Ee+ae+8,J++,Se&&(Se=!1,Ee=0,Ye=0);break;case"VP8X":(ne=Z.header={}).feature_flags=G[me];var De=me+4;ne.canvas_width=1+_(G,De),De+=3,ne.canvas_height=1+_(G,De),De+=3;break;case"ALPH":Se=!0,Ee=he+8,Ye=me-8;break;case"ANIM":(ne=Z.header).bgcolor=A(G,me),De=me+4,ne.loop_count=m(G,De),De+=2;break;case"ANMF":var ze,ne;(ne=Z.frames[J]={}).offset_x=2*_(G,me),me+=3,ne.offset_y=2*_(G,me),me+=3,ne.width=1+_(G,me),me+=3,ne.height=1+_(G,me),me+=3,ne.duration=_(G,me),me+=3,ze=G[me++],ne.dispose=1&ze,ne.blend=ze>>1&1}oe!="ANMF"&&(me+=he)}return Z}})(I,0);Y.response=I,Y.rgbaoutput=!0,Y.dataurl=!1;var B=Y.header?Y.header:null,V=Y.frames?Y.frames:null;if(B){B.loop_counter=B.loop_count,x=[B.canvas_height],R=[B.canvas_width];for(var ee=0;ee<V.length&&V[ee].blend!=0;ee++);}var ue=V[0],_e=k.WebPDecodeRGBA(I,ue.src_off,ue.src_size,R,x);ue.rgba=_e,ue.imgwidth=R[0],ue.imgheight=x[0];for(var fe=0;fe<R[0]*x[0]*4;fe++)M[fe]=_e[fe];return this.width=R,this.height=x,this.data=M,this}(function(t){var e,n,i,r,a,l,d,p,g,m=function(H){return H=H||{},this.isStrokeTransparent=H.isStrokeTransparent||!1,this.strokeOpacity=H.strokeOpacity||1,this.strokeStyle=H.strokeStyle||"#000000",this.fillStyle=H.fillStyle||"#000000",this.isFillTransparent=H.isFillTransparent||!1,this.fillOpacity=H.fillOpacity||1,this.font=H.font||"10px sans-serif",this.textBaseline=H.textBaseline||"alphabetic",this.textAlign=H.textAlign||"left",this.lineWidth=H.lineWidth||1,this.lineJoin=H.lineJoin||"miter",this.lineCap=H.lineCap||"butt",this.path=H.path||[],this.transform=H.transform!==void 0?H.transform.clone():new p,this.globalCompositeOperation=H.globalCompositeOperation||"normal",this.globalAlpha=H.globalAlpha||1,this.clip_path=H.clip_path||[],this.currentPoint=H.currentPoint||new l,this.miterLimit=H.miterLimit||10,this.lastPoint=H.lastPoint||new l,this.lineDashOffset=H.lineDashOffset||0,this.lineDash=H.lineDash||[],this.margin=H.margin||[0,0,0,0],this.prevPageLastElemOffset=H.prevPageLastElemOffset||0,this.ignoreClearRect=typeof H.ignoreClearRect!="boolean"||H.ignoreClearRect,this};t.events.push(["initialized",function(){this.context2d=new _(this),e=this.internal.f2,n=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,r=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,l=this.internal.Point,d=this.internal.Rectangle,p=this.internal.Matrix,g=new m}]);var _=function(H){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var te=H;Object.defineProperty(this,"pdf",{get:function(){return te}});var ce=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return ce},set:function(ye){ce=!!ye}});var Q=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Q},set:function(ye){Q=!!ye}});var xe=0;Object.defineProperty(this,"posX",{get:function(){return xe},set:function(ye){isNaN(ye)||(xe=ye)}});var Te=0;Object.defineProperty(this,"posY",{get:function(){return Te},set:function(ye){isNaN(ye)||(Te=ye)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(ye){var Pt;typeof ye=="number"?Pt=[ye,ye,ye,ye]:((Pt=new Array(4))[0]=ye[0],Pt[1]=ye.length>=2?ye[1]:Pt[0],Pt[2]=ye.length>=3?ye[2]:Pt[0],Pt[3]=ye.length>=4?ye[3]:Pt[1]),g.margin=Pt}});var Le=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Le},set:function(ye){Le=ye}});var Ge=0;Object.defineProperty(this,"lastBreak",{get:function(){return Ge},set:function(ye){Ge=ye}});var Re=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Re},set:function(ye){Re=ye}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(ye){ye instanceof m&&(g=ye)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(ye){g.path=ye}});var gt=[];Object.defineProperty(this,"ctxStack",{get:function(){return gt},set:function(ye){gt=ye}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(ye){var Pt;Pt=A(ye),this.ctx.fillStyle=Pt.style,this.ctx.isFillTransparent=Pt.a===0,this.ctx.fillOpacity=Pt.a,this.pdf.setFillColor(Pt.r,Pt.g,Pt.b,{a:Pt.a}),this.pdf.setTextColor(Pt.r,Pt.g,Pt.b,{a:Pt.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(ye){var Pt=A(ye);this.ctx.strokeStyle=Pt.style,this.ctx.isStrokeTransparent=Pt.a===0,this.ctx.strokeOpacity=Pt.a,Pt.a===0?this.pdf.setDrawColor(255,255,255):(Pt.a,this.pdf.setDrawColor(Pt.r,Pt.g,Pt.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(ye){["butt","round","square"].indexOf(ye)!==-1&&(this.ctx.lineCap=ye,this.pdf.setLineCap(ye))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(ye){isNaN(ye)||(this.ctx.lineWidth=ye,this.pdf.setLineWidth(ye))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(ye){["bevel","round","miter"].indexOf(ye)!==-1&&(this.ctx.lineJoin=ye,this.pdf.setLineJoin(ye))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(ye){isNaN(ye)||(this.ctx.miterLimit=ye,this.pdf.setMiterLimit(ye))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(ye){this.ctx.textBaseline=ye}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(ye){["right","end","center","left","start"].indexOf(ye)!==-1&&(this.ctx.textAlign=ye)}});var mt=null,Ot=null,Kt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Kt},set:function(ye){mt=null,Ot=null,Kt=ye}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(ye){var Pt;if(this.ctx.font=ye,(Pt=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z0-9]+?)\s*$/i.exec(ye))!==null){var Dn=Pt[1];Pt[2];var dn=Pt[3],At=Pt[4];Pt[5];var sn=Pt[6],kt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(At)[2];At=Math.floor(kt==="px"?parseFloat(At)*this.pdf.internal.scaleFactor:kt==="em"?parseFloat(At)*this.pdf.getFontSize():parseFloat(At)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(At);var Yt=(function(en){var Ni,Hn,hn=[],gn=en.trim();if(gn==="")return wv;if(gn in X_)return[X_[gn]];for(;gn!=="";){switch(Hn=null,Ni=(gn=$_(gn)).charAt(0)){case'"':case"'":Hn=kR(gn.substring(1),Ni);break;default:Hn=RR(gn)}if(Hn===null||(hn.push(Hn[0]),(gn=$_(Hn[1]))!==""&&gn.charAt(0)!==","))return wv;gn=gn.replace(/^,/,"")}return hn})(sn);if(this.fontFaces){var Vt=(function(en,Ni){var Hn=en.getFontList(),hn=JSON.stringify(Hn);if(mt===null||Ot!==hn){var gn=(function(Nt){var tn=[];return Object.keys(Nt).forEach(function(ui){Nt[ui].forEach(function(vn){var vt=null;switch(vn){case"bold":vt={family:ui,weight:"bold"};break;case"italic":vt={family:ui,style:"italic"};break;case"bolditalic":vt={family:ui,weight:"bold",style:"italic"};break;case"":case"normal":vt={family:ui}}vt!==null&&(vt.ref={name:ui,style:vn},tn.push(vt))})}),tn})(Hn);mt=(function(Nt){for(var tn={},ui=0;ui<Nt.length;++ui){var vn=_v(Nt[ui]),vt=vn.family,yi=vn.stretch,Pn=vn.style,ln=vn.weight;tn[vt]=tn[vt]||{},tn[vt][yi]=tn[vt][yi]||{},tn[vt][yi][Pn]=tn[vt][yi][Pn]||{},tn[vt][yi][Pn][ln]=vn}return tn})(gn.concat(Ni)),Ot=hn}return mt})(this.pdf,this.fontFaces),xn=Yt.map(function(en){return{family:en,stretch:"normal",weight:dn,style:Dn}}),kn=(function(en,Ni,Hn){for(var hn=(Hn=Hn||{}).defaultFontFamily||"times",gn=Object.assign({},jR,Hn.genericFontFamilies||{}),Nt=null,tn=null,ui=0;ui<Ni.length;++ui)if(gn[(Nt=_v(Ni[ui])).family]&&(Nt.family=gn[Nt.family]),en.hasOwnProperty(Nt.family)){tn=en[Nt.family];break}if(!(tn=tn||en[hn]))throw new Error("Could not find a font-family for the rule '"+Q_(Nt)+"' and default family '"+hn+"'.");if(tn=(function(vn,vt){if(vt[vn])return vt[vn];var yi=my[vn],Pn=yi<=my.normal?-1:1,ln=K_(vt,cS,yi,Pn);if(!ln)throw new Error("Could not find a matching font-stretch value for "+vn);return ln})(Nt.stretch,tn),tn=(function(vn,vt){if(vt[vn])return vt[vn];for(var yi=lS[vn],Pn=0;Pn<yi.length;++Pn)if(vt[yi[Pn]])return vt[yi[Pn]];throw new Error("Could not find a matching font-style for "+vn)})(Nt.style,tn),!(tn=(function(vn,vt){if(vt[vn])return vt[vn];if(vn===400&&vt[500])return vt[500];if(vn===500&&vt[400])return vt[400];var yi=TR[vn],Pn=K_(vt,uS,yi,vn<400?-1:1);if(!Pn)throw new Error("Could not find a matching font-weight for value "+vn);return Pn})(Nt.weight,tn)))throw new Error("Failed to resolve a font for the rule '"+Q_(Nt)+"'.");return tn})(Vt,xn);this.pdf.setFont(kn.ref.name,kn.ref.style)}else{var $t="";(dn==="bold"||parseInt(dn,10)>=700||Dn==="bold")&&($t="bold"),Dn==="italic"&&($t+="italic"),$t.length===0&&($t="normal");for(var Cn="",In={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},Jt=0;Jt<Yt.length;Jt++){if(this.pdf.internal.getFont(Yt[Jt],$t,{noFallback:!0,disableWarning:!0})!==void 0){Cn=Yt[Jt];break}if($t==="bolditalic"&&this.pdf.internal.getFont(Yt[Jt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Cn=Yt[Jt],$t="bold";else if(this.pdf.internal.getFont(Yt[Jt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Cn=Yt[Jt],$t="normal";break}}if(Cn===""){for(var En=0;En<Yt.length;En++)if(In[Yt[En]]){Cn=In[Yt[En]];break}}Cn=Cn===""?"Times":Cn,this.pdf.setFont(Cn,$t)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(ye){this.ctx.globalCompositeOperation=ye}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(ye){this.ctx.globalAlpha=ye}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(ye){this.ctx.lineDashOffset=ye,ne.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(ye){this.ctx.lineDash=ye,ne.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(ye){this.ctx.ignoreClearRect=!!ye}})};_.prototype.setLineDash=function(H){this.lineDash=H},_.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},_.prototype.fill=function(){V.call(this,"fill",!1)},_.prototype.stroke=function(){V.call(this,"stroke",!1)},_.prototype.beginPath=function(){this.path=[{type:"begin"}]},_.prototype.moveTo=function(H,te){if(isNaN(H)||isNaN(te))throw br.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var ce=this.ctx.transform.applyToPoint(new l(H,te));this.path.push({type:"mt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(H,te)},_.prototype.closePath=function(){var H=new l(0,0),te=0;for(te=this.path.length-1;te!==-1;te--)if(this.path[te].type==="begin"&&tr(this.path[te+1])==="object"&&typeof this.path[te+1].x=="number"){H=new l(this.path[te+1].x,this.path[te+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(H.x,H.y)},_.prototype.lineTo=function(H,te){if(isNaN(H)||isNaN(te))throw br.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var ce=this.ctx.transform.applyToPoint(new l(H,te));this.path.push({type:"lt",x:ce.x,y:ce.y}),this.ctx.lastPoint=new l(ce.x,ce.y)},_.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),V.call(this,null,!0)},_.prototype.quadraticCurveTo=function(H,te,ce,Q){if(isNaN(ce)||isNaN(Q)||isNaN(H)||isNaN(te))throw br.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var xe=this.ctx.transform.applyToPoint(new l(ce,Q)),Te=this.ctx.transform.applyToPoint(new l(H,te));this.path.push({type:"qct",x1:Te.x,y1:Te.y,x:xe.x,y:xe.y}),this.ctx.lastPoint=new l(xe.x,xe.y)},_.prototype.bezierCurveTo=function(H,te,ce,Q,xe,Te){if(isNaN(xe)||isNaN(Te)||isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q))throw br.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Le=this.ctx.transform.applyToPoint(new l(xe,Te)),Ge=this.ctx.transform.applyToPoint(new l(H,te)),Re=this.ctx.transform.applyToPoint(new l(ce,Q));this.path.push({type:"bct",x1:Ge.x,y1:Ge.y,x2:Re.x,y2:Re.y,x:Le.x,y:Le.y}),this.ctx.lastPoint=new l(Le.x,Le.y)},_.prototype.arc=function(H,te,ce,Q,xe,Te){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q)||isNaN(xe))throw br.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Te=!!Te,!this.ctx.transform.isIdentity){var Le=this.ctx.transform.applyToPoint(new l(H,te));H=Le.x,te=Le.y;var Ge=this.ctx.transform.applyToPoint(new l(0,ce)),Re=this.ctx.transform.applyToPoint(new l(0,0));ce=Math.sqrt(Math.pow(Ge.x-Re.x,2)+Math.pow(Ge.y-Re.y,2))}Math.abs(xe-Q)>=2*Math.PI&&(Q=0,xe=2*Math.PI),this.path.push({type:"arc",x:H,y:te,radius:ce,startAngle:Q,endAngle:xe,counterclockwise:Te})},_.prototype.arcTo=function(H,te,ce,Q,xe){throw new Error("arcTo not implemented.")},_.prototype.rect=function(H,te,ce,Q){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q))throw br.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(H,te),this.lineTo(H+ce,te),this.lineTo(H+ce,te+Q),this.lineTo(H,te+Q),this.lineTo(H,te),this.lineTo(H+ce,te),this.lineTo(H,te)},_.prototype.fillRect=function(H,te,ce,Q){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q))throw br.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!x.call(this)){var xe={};this.lineCap!=="butt"&&(xe.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(xe.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(H,te,ce,Q),this.fill(),xe.hasOwnProperty("lineCap")&&(this.lineCap=xe.lineCap),xe.hasOwnProperty("lineJoin")&&(this.lineJoin=xe.lineJoin)}},_.prototype.strokeRect=function(H,te,ce,Q){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q))throw br.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");R.call(this)||(this.beginPath(),this.rect(H,te,ce,Q),this.stroke())},_.prototype.clearRect=function(H,te,ce,Q){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q))throw br.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(H,te,ce,Q))},_.prototype.save=function(H){H=typeof H!="boolean"||H;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("q");if(this.pdf.setPage(te),H){this.ctx.fontSize=this.pdf.internal.getFontSize();var Q=new m(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Q}},_.prototype.restore=function(H){H=typeof H!="boolean"||H;for(var te=this.pdf.internal.getCurrentPageInfo().pageNumber,ce=0;ce<this.pdf.internal.getNumberOfPages();ce++)this.pdf.setPage(ce+1),this.pdf.internal.out("Q");this.pdf.setPage(te),H&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},_.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var A=function(H){var te,ce,Q,xe;if(H.isCanvasGradient===!0&&(H=H.getColor()),!H)return{r:0,g:0,b:0,a:0,style:H};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(H))te=0,ce=0,Q=0,xe=0;else{var Te=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(H);if(Te!==null)te=parseInt(Te[1]),ce=parseInt(Te[2]),Q=parseInt(Te[3]),xe=1;else if((Te=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(H))!==null)te=parseInt(Te[1]),ce=parseInt(Te[2]),Q=parseInt(Te[3]),xe=parseFloat(Te[4]);else{if(xe=1,typeof H=="string"&&H.charAt(0)!=="#"){var Le=new tS(H);H=Le.ok?Le.toHex():"#000000"}H.length===4?(te=H.substring(1,2),te+=te,ce=H.substring(2,3),ce+=ce,Q=H.substring(3,4),Q+=Q):(te=H.substring(1,3),ce=H.substring(3,5),Q=H.substring(5,7)),te=parseInt(te,16),ce=parseInt(ce,16),Q=parseInt(Q,16)}}return{r:te,g:ce,b:Q,a:xe,style:H}},x=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},R=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};_.prototype.fillText=function(H,te,ce,Q){if(isNaN(te)||isNaN(ce)||typeof H!="string")throw br.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Q=isNaN(Q)?void 0:Q,!x.call(this)){var xe=he(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;J.call(this,{text:H,x:te,y:ce,scale:Te,angle:xe,align:this.textAlign,maxWidth:Q})}},_.prototype.strokeText=function(H,te,ce,Q){if(isNaN(te)||isNaN(ce)||typeof H!="string")throw br.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!R.call(this)){Q=isNaN(Q)?void 0:Q;var xe=he(this.ctx.transform.rotation),Te=this.ctx.transform.scaleX;J.call(this,{text:H,x:te,y:ce,scale:Te,renderingMode:"stroke",angle:xe,align:this.textAlign,maxWidth:Q})}},_.prototype.measureText=function(H){if(typeof H!="string")throw br.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var te=this.pdf,ce=this.pdf.internal.scaleFactor,Q=te.internal.getFontSize(),xe=te.getStringUnitWidth(H)*Q/te.internal.scaleFactor;return new function(Te){var Le=(Te=Te||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Le}}),this}({width:xe*=Math.round(96*ce/72*1e4)/1e4})},_.prototype.scale=function(H,te){if(isNaN(H)||isNaN(te))throw br.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var ce=new p(H,0,0,te,0,0);this.ctx.transform=this.ctx.transform.multiply(ce)},_.prototype.rotate=function(H){if(isNaN(H))throw br.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var te=new p(Math.cos(H),Math.sin(H),-Math.sin(H),Math.cos(H),0,0);this.ctx.transform=this.ctx.transform.multiply(te)},_.prototype.translate=function(H,te){if(isNaN(H)||isNaN(te))throw br.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var ce=new p(1,0,0,1,H,te);this.ctx.transform=this.ctx.transform.multiply(ce)},_.prototype.transform=function(H,te,ce,Q,xe,Te){if(isNaN(H)||isNaN(te)||isNaN(ce)||isNaN(Q)||isNaN(xe)||isNaN(Te))throw br.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Le=new p(H,te,ce,Q,xe,Te);this.ctx.transform=this.ctx.transform.multiply(Le)},_.prototype.setTransform=function(H,te,ce,Q,xe,Te){H=isNaN(H)?1:H,te=isNaN(te)?0:te,ce=isNaN(ce)?0:ce,Q=isNaN(Q)?1:Q,xe=isNaN(xe)?0:xe,Te=isNaN(Te)?0:Te,this.ctx.transform=new p(H,te,ce,Q,xe,Te)};var M=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};_.prototype.drawImage=function(H,te,ce,Q,xe,Te,Le,Ge,Re){var gt=this.pdf.getImageProperties(H),mt=1,Ot=1,Kt=1,ye=1;Q!==void 0&&Ge!==void 0&&(Kt=Ge/Q,ye=Re/xe,mt=gt.width/Q*Ge/Q,Ot=gt.height/xe*Re/xe),Te===void 0&&(Te=te,Le=ce,te=0,ce=0),Q!==void 0&&Ge===void 0&&(Ge=Q,Re=xe),Q===void 0&&Ge===void 0&&(Ge=gt.width,Re=gt.height);var Pt=this.ctx.transform.decompose(),Dn=he(Pt.rotate.shx),dn=new p,At=(dn=(dn=(dn=dn.multiply(Pt.translate)).multiply(Pt.skew)).multiply(Pt.scale)).applyToRectangle(new d(Te-te*Kt,Le-ce*ye,Q*mt,xe*Ot));if(this.autoPaging){for(var sn,kt=k.call(this,At),Yt=[],Vt=0;Vt<kt.length;Vt+=1)Yt.indexOf(kt[Vt])===-1&&Yt.push(kt[Vt]);B(Yt);for(var xn=Yt[0],kn=Yt[Yt.length-1],$t=xn;$t<kn+1;$t++){this.pdf.setPage($t);var Cn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],In=$t===1?this.posY+this.margin[0]:this.margin[0],Jt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],En=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],en=$t===1?0:Jt+($t-2)*En;if(this.ctx.clip_path.length!==0){var Ni=this.path;sn=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(sn,this.posX+this.margin[3],-en+In+this.ctx.prevPageLastElemOffset),ee.call(this,"fill",!0),this.path=Ni}var Hn=JSON.parse(JSON.stringify(At));Hn=Y([Hn],this.posX+this.margin[3],-en+In+this.ctx.prevPageLastElemOffset)[0];var hn=($t>xn||$t<kn)&&M.call(this);hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Cn,En,null).clip().discardPath()),this.pdf.addImage(H,"JPEG",Hn.x,Hn.y,Hn.w,Hn.h,null,null,Dn),hn&&this.pdf.restoreGraphicsState()}}else this.pdf.addImage(H,"JPEG",At.x,At.y,At.w,At.h,null,null,Dn)};var k=function(H,te,ce){var Q=[];te=te||this.pdf.internal.pageSize.width,ce=ce||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var xe=this.posY+this.ctx.prevPageLastElemOffset;switch(H.type){default:case"mt":case"lt":Q.push(Math.floor((H.y+xe)/ce)+1);break;case"arc":Q.push(Math.floor((H.y+xe-H.radius)/ce)+1),Q.push(Math.floor((H.y+xe+H.radius)/ce)+1);break;case"qct":var Te=De(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x,H.y);Q.push(Math.floor((Te.y+xe)/ce)+1),Q.push(Math.floor((Te.y+Te.h+xe)/ce)+1);break;case"bct":var Le=ze(this.ctx.lastPoint.x,this.ctx.lastPoint.y,H.x1,H.y1,H.x2,H.y2,H.x,H.y);Q.push(Math.floor((Le.y+xe)/ce)+1),Q.push(Math.floor((Le.y+Le.h+xe)/ce)+1);break;case"rect":Q.push(Math.floor((H.y+xe)/ce)+1),Q.push(Math.floor((H.y+H.h+xe)/ce)+1)}for(var Ge=0;Ge<Q.length;Ge+=1)for(;this.pdf.internal.getNumberOfPages()<Q[Ge];)I.call(this);return Q},I=function(){var H=this.fillStyle,te=this.strokeStyle,ce=this.font,Q=this.lineCap,xe=this.lineWidth,Te=this.lineJoin;this.pdf.addPage(),this.fillStyle=H,this.strokeStyle=te,this.font=ce,this.lineCap=Q,this.lineWidth=xe,this.lineJoin=Te},Y=function(H,te,ce){for(var Q=0;Q<H.length;Q++)switch(H[Q].type){case"bct":H[Q].x2+=te,H[Q].y2+=ce;case"qct":H[Q].x1+=te,H[Q].y1+=ce;default:H[Q].x+=te,H[Q].y+=ce}return H},B=function(H){return H.sort(function(te,ce){return te-ce})},V=function(H,te){var ce=this.fillStyle,Q=this.strokeStyle,xe=this.lineCap,Te=this.lineWidth,Le=Math.abs(Te*this.ctx.transform.scaleX),Ge=this.lineJoin;if(this.autoPaging){for(var Re,gt,mt=JSON.parse(JSON.stringify(this.path)),Ot=JSON.parse(JSON.stringify(this.path)),Kt=[],ye=0;ye<Ot.length;ye++)if(Ot[ye].x!==void 0)for(var Pt=k.call(this,Ot[ye]),Dn=0;Dn<Pt.length;Dn+=1)Kt.indexOf(Pt[Dn])===-1&&Kt.push(Pt[Dn]);for(var dn=0;dn<Kt.length;dn++)for(;this.pdf.internal.getNumberOfPages()<Kt[dn];)I.call(this);B(Kt);for(var At=Kt[0],sn=Kt[Kt.length-1],kt=At;kt<sn+1;kt++){this.pdf.setPage(kt),this.fillStyle=ce,this.strokeStyle=Q,this.lineCap=xe,this.lineWidth=Le,this.lineJoin=Ge;var Yt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Vt=kt===1?this.posY+this.margin[0]:this.margin[0],xn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],kn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],$t=kt===1?0:xn+(kt-2)*kn;if(this.ctx.clip_path.length!==0){var Cn=this.path;Re=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(Re,this.posX+this.margin[3],-$t+Vt+this.ctx.prevPageLastElemOffset),ee.call(this,H,!0),this.path=Cn}if(gt=JSON.parse(JSON.stringify(mt)),this.path=Y(gt,this.posX+this.margin[3],-$t+Vt+this.ctx.prevPageLastElemOffset),te===!1||kt===0){var In=(kt>At||kt<sn)&&M.call(this);In&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Yt,kn,null).clip().discardPath()),ee.call(this,H,te),In&&this.pdf.restoreGraphicsState()}this.lineWidth=Te}this.path=mt}else this.lineWidth=Le,ee.call(this,H,te),this.lineWidth=Te},ee=function(H,te){if((H!=="stroke"||te||!R.call(this))&&(H==="stroke"||te||!x.call(this))){for(var ce,Q,xe=[],Te=this.path,Le=0;Le<Te.length;Le++){var Ge=Te[Le];switch(Ge.type){case"begin":xe.push({begin:!0});break;case"close":xe.push({close:!0});break;case"mt":xe.push({start:Ge,deltas:[],abs:[]});break;case"lt":var Re=xe.length;if(Te[Le-1]&&!isNaN(Te[Le-1].x)&&(ce=[Ge.x-Te[Le-1].x,Ge.y-Te[Le-1].y],Re>0)){for(;Re>=0;Re--)if(xe[Re-1].close!==!0&&xe[Re-1].begin!==!0){xe[Re-1].deltas.push(ce),xe[Re-1].abs.push(Ge);break}}break;case"bct":ce=[Ge.x1-Te[Le-1].x,Ge.y1-Te[Le-1].y,Ge.x2-Te[Le-1].x,Ge.y2-Te[Le-1].y,Ge.x-Te[Le-1].x,Ge.y-Te[Le-1].y],xe[xe.length-1].deltas.push(ce);break;case"qct":var gt=Te[Le-1].x+2/3*(Ge.x1-Te[Le-1].x),mt=Te[Le-1].y+2/3*(Ge.y1-Te[Le-1].y),Ot=Ge.x+2/3*(Ge.x1-Ge.x),Kt=Ge.y+2/3*(Ge.y1-Ge.y),ye=Ge.x,Pt=Ge.y;ce=[gt-Te[Le-1].x,mt-Te[Le-1].y,Ot-Te[Le-1].x,Kt-Te[Le-1].y,ye-Te[Le-1].x,Pt-Te[Le-1].y],xe[xe.length-1].deltas.push(ce);break;case"arc":xe.push({deltas:[],abs:[],arc:!0}),Array.isArray(xe[xe.length-1].abs)&&xe[xe.length-1].abs.push(Ge)}}Q=te?null:H==="stroke"?"stroke":"fill";for(var Dn=!1,dn=0;dn<xe.length;dn++)if(xe[dn].arc)for(var At=xe[dn].abs,sn=0;sn<At.length;sn++){var kt=At[sn];kt.type==="arc"?fe.call(this,kt.x,kt.y,kt.radius,kt.startAngle,kt.endAngle,kt.counterclockwise,void 0,te,!Dn):Se.call(this,kt.x,kt.y),Dn=!0}else if(xe[dn].close===!0)this.pdf.internal.out("h"),Dn=!1;else if(xe[dn].begin!==!0){var Yt=xe[dn].start.x,Vt=xe[dn].start.y;Ee.call(this,xe[dn].deltas,Yt,Vt),Dn=!0}Q&&G.call(this,Q),te&&me.call(this)}},ue=function(H){var te=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,ce=te*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return H-ce;case"top":return H+te-ce;case"hanging":return H+te-2*ce;case"middle":return H+te/2-ce;default:return H}},_e=function(H){return H+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};_.prototype.createLinearGradient=function(){var H=function(){};return H.colorStops=[],H.addColorStop=function(te,ce){this.colorStops.push([te,ce])},H.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},H.isCanvasGradient=!0,H},_.prototype.createPattern=function(){return this.createLinearGradient()},_.prototype.createRadialGradient=function(){return this.createLinearGradient()};var fe=function(H,te,ce,Q,xe,Te,Le,Ge,Re){for(var gt=oe.call(this,ce,Q,xe,Te),mt=0;mt<gt.length;mt++){var Ot=gt[mt];mt===0&&(Re?Z.call(this,Ot.x1+H,Ot.y1+te):Se.call(this,Ot.x1+H,Ot.y1+te)),Ye.call(this,H,te,Ot.x2,Ot.y2,Ot.x3,Ot.y3,Ot.x4,Ot.y4)}Ge?me.call(this):G.call(this,Le)},G=function(H){switch(H){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},me=function(){this.pdf.clip(),this.pdf.discardPath()},Z=function(H,te){this.pdf.internal.out(n(H)+" "+i(te)+" m")},J=function(H){var te;switch(H.align){case"right":case"end":te="right";break;case"center":te="center";break;default:te="left"}var ce,Q,xe,Te=this.pdf.getTextDimensions(H.text),Le=ue.call(this,H.y),Ge=_e.call(this,Le)-Te.h,Re=this.ctx.transform.applyToPoint(new l(H.x,Le));if(this.autoPaging){var gt=this.ctx.transform.decompose(),mt=new p;mt=(mt=(mt=mt.multiply(gt.translate)).multiply(gt.skew)).multiply(gt.scale);for(var Ot=this.ctx.transform.applyToRectangle(new d(H.x,Le,Te.w,Te.h)),Kt=mt.applyToRectangle(new d(H.x,Ge,Te.w,Te.h)),ye=k.call(this,Kt),Pt=[],Dn=0;Dn<ye.length;Dn+=1)Pt.indexOf(ye[Dn])===-1&&Pt.push(ye[Dn]);B(Pt);for(var dn=Pt[0],At=Pt[Pt.length-1],sn=dn;sn<At+1;sn++){this.pdf.setPage(sn);var kt=sn===1?this.posY+this.margin[0]:this.margin[0],Yt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Vt=this.pdf.internal.pageSize.height-this.margin[2],xn=Vt-this.margin[0],kn=this.pdf.internal.pageSize.width-this.margin[1],$t=kn-this.margin[3],Cn=sn===1?0:Yt+(sn-2)*xn;if(this.ctx.clip_path.length!==0){var In=this.path;ce=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Y(ce,this.posX+this.margin[3],-1*Cn+kt),ee.call(this,"fill",!0),this.path=In}var Jt=Y([JSON.parse(JSON.stringify(Kt))],this.posX+this.margin[3],-Cn+kt+this.ctx.prevPageLastElemOffset)[0];H.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*H.scale),xe=this.lineWidth,this.lineWidth=xe*H.scale);var En=this.autoPaging!=="text";if(En||Jt.y+Jt.h<=Vt){if(En||Jt.y>=kt&&Jt.x<=kn){var en=En?H.text:this.pdf.splitTextToSize(H.text,H.maxWidth||kn-Jt.x)[0],Ni=Y([JSON.parse(JSON.stringify(Ot))],this.posX+this.margin[3],-Cn+kt+this.ctx.prevPageLastElemOffset)[0],Hn=En&&(sn>dn||sn<At)&&M.call(this);Hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],$t,xn,null).clip().discardPath()),this.pdf.text(en,Ni.x,Ni.y,{angle:H.angle,align:te,renderingMode:H.renderingMode}),Hn&&this.pdf.restoreGraphicsState()}}else Jt.y<Vt&&(this.ctx.prevPageLastElemOffset+=Vt-Jt.y);H.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=xe)}}else H.scale>=.01&&(Q=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Q*H.scale),xe=this.lineWidth,this.lineWidth=xe*H.scale),this.pdf.text(H.text,Re.x+this.posX,Re.y+this.posY,{angle:H.angle,align:te,renderingMode:H.renderingMode,maxWidth:H.maxWidth}),H.scale>=.01&&(this.pdf.setFontSize(Q),this.lineWidth=xe)},Se=function(H,te,ce,Q){ce=ce||0,Q=Q||0,this.pdf.internal.out(n(H+ce)+" "+i(te+Q)+" l")},Ee=function(H,te,ce){return this.pdf.lines(H,te,ce,null,null)},Ye=function(H,te,ce,Q,xe,Te,Le,Ge){this.pdf.internal.out([e(r(ce+H)),e(a(Q+te)),e(r(xe+H)),e(a(Te+te)),e(r(Le+H)),e(a(Ge+te)),"c"].join(" "))},oe=function(H,te,ce,Q){for(var xe=2*Math.PI,Te=Math.PI/2;te>ce;)te-=xe;var Le=Math.abs(ce-te);Le<xe&&Q&&(Le=xe-Le);for(var Ge=[],Re=Q?-1:1,gt=te;Le>1e-5;){var mt=gt+Re*Math.min(Le,Te);Ge.push(ae.call(this,H,gt,mt)),Le-=Math.abs(mt-gt),gt=mt}return Ge},ae=function(H,te,ce){var Q=(ce-te)/2,xe=H*Math.cos(Q),Te=H*Math.sin(Q),Le=xe,Ge=-Te,Re=Le*Le+Ge*Ge,gt=Re+Le*xe+Ge*Te,mt=4/3*(Math.sqrt(2*Re*gt)-gt)/(Le*Te-Ge*xe),Ot=Le-mt*Ge,Kt=Ge+mt*Le,ye=Ot,Pt=-Kt,Dn=Q+te,dn=Math.cos(Dn),At=Math.sin(Dn);return{x1:H*Math.cos(te),y1:H*Math.sin(te),x2:Ot*dn-Kt*At,y2:Ot*At+Kt*dn,x3:ye*dn-Pt*At,y3:ye*At+Pt*dn,x4:H*Math.cos(ce),y4:H*Math.sin(ce)}},he=function(H){return 180*H/Math.PI},De=function(H,te,ce,Q,xe,Te){var Le=H+.5*(ce-H),Ge=te+.5*(Q-te),Re=xe+.5*(ce-xe),gt=Te+.5*(Q-Te),mt=Math.min(H,xe,Le,Re),Ot=Math.max(H,xe,Le,Re),Kt=Math.min(te,Te,Ge,gt),ye=Math.max(te,Te,Ge,gt);return new d(mt,Kt,Ot-mt,ye-Kt)},ze=function(H,te,ce,Q,xe,Te,Le,Ge){var Re,gt,mt,Ot,Kt,ye,Pt,Dn,dn,At,sn,kt,Yt,Vt,xn=ce-H,kn=Q-te,$t=xe-ce,Cn=Te-Q,In=Le-xe,Jt=Ge-Te;for(gt=0;gt<41;gt++)dn=(Pt=(mt=H+(Re=gt/40)*xn)+Re*((Kt=ce+Re*$t)-mt))+Re*(Kt+Re*(xe+Re*In-Kt)-Pt),At=(Dn=(Ot=te+Re*kn)+Re*((ye=Q+Re*Cn)-Ot))+Re*(ye+Re*(Te+Re*Jt-ye)-Dn),gt==0?(sn=dn,kt=At,Yt=dn,Vt=At):(sn=Math.min(sn,dn),kt=Math.min(kt,At),Yt=Math.max(Yt,dn),Vt=Math.max(Vt,At));return new d(Math.round(sn),Math.round(kt),Math.round(Yt-sn),Math.round(Vt-kt))},ne=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var H,te,ce=(H=this.ctx.lineDash,te=this.ctx.lineDashOffset,JSON.stringify({lineDash:H,lineDashOffset:te}));this.prevLineDash!==ce&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=ce)}}})(mn.API),(function(t){var e=function(l){var d,p,g,m,_,A,x,R,M,k;for(p=[],g=0,m=(l+=d="\0\0\0\0".slice(l.length%4||4)).length;m>g;g+=4)(_=(l.charCodeAt(g)<<24)+(l.charCodeAt(g+1)<<16)+(l.charCodeAt(g+2)<<8)+l.charCodeAt(g+3))!==0?(A=(_=((_=((_=((_=(_-(k=_%85))/85)-(M=_%85))/85)-(R=_%85))/85)-(x=_%85))/85)%85,p.push(A+33,x+33,R+33,M+33,k+33)):p.push(122);return(function(I,Y){for(var B=Y;B>0;B--)I.pop()})(p,d.length),String.fromCharCode.apply(String,p)+"~>"},n=function(l){var d,p,g,m,_,A=String,x="length",R=255,M="charCodeAt",k="slice",I="replace";for(l[k](-2),l=l[k](0,-2)[I](/\s/g,"")[I]("z","!!!!!"),g=[],m=0,_=(l+=d="uuuuu"[k](l[x]%5||5))[x];_>m;m+=5)p=52200625*(l[M](m)-33)+614125*(l[M](m+1)-33)+7225*(l[M](m+2)-33)+85*(l[M](m+3)-33)+(l[M](m+4)-33),g.push(R&p>>24,R&p>>16,R&p>>8,R&p);return(function(Y,B){for(var V=B;V>0;V--)Y.pop()})(g,d[x]),A.fromCharCode.apply(A,g)},i=function(l){return l.split("").map(function(d){return("0"+d.charCodeAt().toString(16)).slice(-2)}).join("")+">"},r=function(l){var d=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),d.test(l)===!1)return"";for(var p="",g=0;g<l.length;g+=2)p+=String.fromCharCode("0x"+(l[g]+l[g+1]));return p},a=function(l){for(var d=new Uint8Array(l.length),p=l.length;p--;)d[p]=l.charCodeAt(p);return(d=cy(d)).reduce(function(g,m){return g+String.fromCharCode(m)},"")};t.processDataByFilters=function(l,d){var p=0,g=l||"",m=[];for(typeof(d=d||[])=="string"&&(d=[d]),p=0;p<d.length;p+=1)switch(d[p]){case"ASCII85Decode":case"/ASCII85Decode":g=n(g),m.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=e(g),m.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=r(g),m.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=i(g),m.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=a(g),m.push("/FlateDecode");break;default:throw new Error('The filter: "'+d[p]+'" is not implemented')}return{data:g,reverseChain:m.reverse().join(" ")}}})(mn.API),(function(t){t.loadFile=function(e,n,i){return(function(r,a,l){a=a!==!1,l=typeof l=="function"?l:function(){};var d=void 0;try{d=(function(p,g,m){var _=new XMLHttpRequest,A=0,x=function(R){var M=R.length,k=[],I=String.fromCharCode;for(A=0;A<M;A+=1)k.push(I(255&R.charCodeAt(A)));return k.join("")};if(_.open("GET",p,!g),_.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(_.onload=function(){_.status===200?m(x(this.responseText)):m(void 0)}),_.send(null),g&&_.status===200)return x(_.responseText)})(r,a,l)}catch{}return d})(e,n,i)},t.allowFsRead=void 0,t.loadImageFile=t.loadFile})(mn.API),(function(t){function e(){return(Wn.html2canvas?Promise.resolve(Wn.html2canvas):Mr(()=>import("./html2canvas.esm-DXEQVQnt.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load html2canvas: "+d))}).then(function(d){return d.default?d.default:d})}function n(){return(Wn.DOMPurify?Promise.resolve(Wn.DOMPurify):Mr(()=>import("./purify.es-Bzr520pe.js"),[])).catch(function(d){return Promise.reject(new Error("Could not load dompurify: "+d))}).then(function(d){return d.default?d.default:d})}var i=function(d){var p=tr(d);return p==="undefined"?"undefined":p==="string"||d instanceof String?"string":p==="number"||d instanceof Number?"number":p==="function"||d instanceof Function?"function":d&&d.constructor===Array?"array":d&&d.nodeType===1?"element":p==="object"?"object":"unknown"},r=function(d,p){var g=document.createElement(d);for(var m in p.className&&(g.className=p.className),p.innerHTML&&p.dompurify&&(g.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)g.style[m]=p.style[m];return g},a=function d(p,g){for(var m=p.nodeType===3?document.createTextNode(p.nodeValue):p.cloneNode(!1),_=p.firstChild;_;_=_.nextSibling)g!==!0&&_.nodeType===1&&_.nodeName==="SCRIPT"||m.appendChild(d(_,g));return p.nodeType===1&&(p.nodeName==="CANVAS"?(m.width=p.width,m.height=p.height,m.getContext("2d").drawImage(p,0,0)):p.nodeName!=="TEXTAREA"&&p.nodeName!=="SELECT"||(m.value=p.value),m.addEventListener("load",function(){m.scrollTop=p.scrollTop,m.scrollLeft=p.scrollLeft},!0)),m},l=function d(p){var g=Object.assign(d.convert(Promise.resolve()),JSON.parse(JSON.stringify(d.template))),m=d.convert(Promise.resolve(),g);return(m=m.setProgress(1,d,1,[d])).set(p)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(d,p){return d.__proto__=p||l.prototype,d},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(d,p){return this.then(function(){switch(p=p||(function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(d),p){case"string":return this.then(n).then(function(g){return this.set({src:r("div",{innerHTML:d,dompurify:g})})});case"element":return this.set({src:d});case"canvas":return this.set({canvas:d});case"img":return this.set({img:d});default:return this.error("Unknown source type.")}})},l.prototype.to=function(d){switch(d){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var d={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=a(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(d.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=r("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=r("div",{className:"html2pdf__container",style:d}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(r("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},l.prototype.toCanvas=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(p){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,p(this.prop.container,g)}).then(function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toContext2d=function(){var d=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(d).then(e).then(function(p){var g=this.opt.jsPDF,m=this.opt.fontFaces,_=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,A=Object.assign({async:!0,allowTaint:!0,scale:_,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete A.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=m,m)for(var x=0;x<m.length;++x){var R=m[x],M=R.src.find(function(k){return k.format==="truetype"});M&&g.addFont(M.url,R.ref.name,R.ref.style)}return A.windowHeight=A.windowHeight||0,A.windowHeight=A.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):A.windowHeight,g.context2d.save(!0),p(this.prop.container,A)}).then(function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)})},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var d=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=d})},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},l.prototype.output=function(d,p,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(d,p):this.outputPdf(d,p)},l.prototype.outputPdf=function(d,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(d,p)})},l.prototype.outputImg=function(d){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(d){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+d+'" is not supported.'}})},l.prototype.save=function(d){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(d?{filename:d}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},l.prototype.set=function(d){if(i(d)!=="object")return this;var p=Object.keys(d||{}).map(function(g){if(g in l.template.prop)return function(){this.prop[g]=d[g]};switch(g){case"margin":return this.setMargin.bind(this,d.margin);case"jsPDF":return function(){return this.opt.jsPDF=d.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,d.pageSize);default:return function(){this.opt[g]=d[g]}}},this);return this.then(function(){return this.thenList(p)})},l.prototype.get=function(d,p){return this.then(function(){var g=d in l.template.prop?this.prop[d]:this.opt[d];return p?p(g):g})},l.prototype.setMargin=function(d){return this.then(function(){switch(i(d)){case"number":d=[d,d,d,d];case"array":if(d.length===2&&(d=[d[0],d[1],d[0],d[1]]),d.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=d}).then(this.setPageSize)},l.prototype.setPageSize=function(d){function p(g,m){return Math.floor(g*m/72*96)}return this.then(function(){(d=d||mn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(d.inner={width:d.width-this.opt.margin[1]-this.opt.margin[3],height:d.height-this.opt.margin[0]-this.opt.margin[2]},d.inner.px={width:p(d.inner.width,d.k),height:p(d.inner.height,d.k)},d.inner.ratio=d.inner.height/d.inner.width),this.prop.pageSize=d})},l.prototype.setProgress=function(d,p,g,m){return d!=null&&(this.progress.val=d),p!=null&&(this.progress.state=p),g!=null&&(this.progress.n=g),m!=null&&(this.progress.stack=m),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(d,p,g,m){return this.setProgress(d?this.progress.val+d:null,p||null,g?this.progress.n+g:null,m?this.progress.stack.concat(m):null)},l.prototype.then=function(d,p){var g=this;return this.thenCore(d,p,function(m,_){return g.updateProgress(null,null,1,[m]),Promise.prototype.then.call(this,function(A){return g.updateProgress(null,m),A}).then(m,_).then(function(A){return g.updateProgress(1),A})})},l.prototype.thenCore=function(d,p,g){g=g||Promise.prototype.then;var m=this;d&&(d=d.bind(m)),p&&(p=p.bind(m));var _=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?m:l.convert(Object.assign({},m),Promise.prototype),A=g.call(_,d,p);return l.convert(A,m.__proto__)},l.prototype.thenExternal=function(d,p){return Promise.prototype.then.call(this,d,p)},l.prototype.thenList=function(d){var p=this;return d.forEach(function(g){p=p.thenCore(g)}),p},l.prototype.catch=function(d){d&&(d=d.bind(this));var p=Promise.prototype.catch.call(this,d);return l.convert(p,this)},l.prototype.catchExternal=function(d){return Promise.prototype.catch.call(this,d)},l.prototype.error=function(d){return this.then(function(){throw new Error(d)})},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,mn.getPageSize=function(d,p,g){if(tr(d)==="object"){var m=d;d=m.orientation,p=m.unit||p,g=m.format||g}p=p||"mm",g=g||"a4",d=(""+(d||"P")).toLowerCase();var _,A=(""+g).toLowerCase(),x={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":_=1;break;case"mm":_=72/25.4;break;case"cm":_=72/2.54;break;case"in":_=72;break;case"px":_=.75;break;case"pc":case"em":_=12;break;case"ex":_=6;break;default:throw"Invalid unit: "+p}var R,M=0,k=0;if(x.hasOwnProperty(A))M=x[A][1]/_,k=x[A][0]/_;else try{M=g[1],k=g[0]}catch{throw new Error("Invalid format: "+g)}if(d==="p"||d==="portrait")d="p",k>M&&(R=k,k=M,M=R);else{if(d!=="l"&&d!=="landscape")throw"Invalid orientation: "+d;d="l",M>k&&(R=k,k=M,M=R)}return{width:k,height:M,unit:p,k:_,orientation:d}},t.html=function(d,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(_v):null;var g=new l(p);return p.worker?g:g.from(d).doCallback()}})(mn.API),mn.API.addJS=function(t){return e2=t,this.internal.events.subscribe("postPutResources",function(){rp=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(rp+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),J_=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+e2+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){rp!==void 0&&J_!==void 0&&this.internal.out("/Names <</JavaScript "+rp+" 0 R>>")}),this},(function(t){var e;t.events.push(["postPutResources",function(){var n=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var r=n.outline.render().split(/\r\n/),a=0;a<r.length;a++){var l=r[a],d=i.exec(l);if(d!=null){var p=d[1];n.internal.newObjectDeferredBegin(p,!1)}n.internal.write(l)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,m=[];for(a=0;a<g;a++){var _=n.internal.newObject();m.push(_);var A=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+A.objId+" 0 R /XYZ null null null]>> endobj")}var x=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<m.length;a++)n.internal.write("(page_"+(a+1)+")"+m[a]+" 0 R");n.internal.write(" ] >>","endobj"),e=n.internal.newObject(),n.internal.write("<< /Dests "+x+" 0 R"),n.internal.write(">>","endobj")}}]),t.events.push(["putCatalog",function(){var n=this;n.outline.root.children.length>0&&(n.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&n.internal.write("/Names "+e+" 0 R"))}]),t.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(i,r,a){var l={title:r,options:a,children:[]};return i==null&&(i=this.root),i.children.push(l),l},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(i){i.id=n.internal.newObjectDeferred();for(var r=0;r<i.children.length;r++)this.genIds_r(i.children[r])},n.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},n.outline.renderItems=function(i){for(var r=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<i.children.length;a++){var l=i.children[a];this.objStart(l),this.line("/Title "+this.makeString(l.title)),this.line("/Parent "+this.makeRef(i)),a>0&&this.line("/Prev "+this.makeRef(i.children[a-1])),a<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[a+1])),l.children.length>0&&(this.line("/First "+this.makeRef(l.children[0])),this.line("/Last "+this.makeRef(l.children[l.children.length-1])));var d=this.count=this.count_r({count:0},l);if(d>0&&this.line("/Count "+d),l.options&&l.options.pageNumber){var p=n.internal.getPageInfo(l.options.pageNumber);this.line("/Dest ["+p.objId+" 0 R /XYZ 0 "+r(0)+" 0]")}this.objEnd()}for(var g=0;g<i.children.length;g++)this.renderItems(i.children[g])},n.outline.line=function(i){this.ctx.val+=i+`\r
`},n.outline.makeRef=function(i){return i.id+" 0 R"},n.outline.makeString=function(i){return"("+n.internal.pdfEscape(i)+")"},n.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(i,r){for(var a=0;a<r.children.length;a++)i.count++,this.count_r(i,r.children[a]);return i.count}}])})(mn.API),(function(t){var e=[192,193,194,195,196,197,198,199];t.processJPEG=function(n,i,r,a,l,d){var p,g=this.decode.DCT_DECODE,m=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=l||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,p=(function(_){for(var A,x=256*_.charCodeAt(4)+_.charCodeAt(5),R=_.length,M={width:0,height:0,numcomponents:1},k=4;k<R;k+=2){if(k+=x,e.indexOf(_.charCodeAt(k+1))!==-1){A=256*_.charCodeAt(k+5)+_.charCodeAt(k+6),M={width:256*_.charCodeAt(k+7)+_.charCodeAt(k+8),height:A,numcomponents:_.charCodeAt(k+9)};break}x=256*_.charCodeAt(k+2)+_.charCodeAt(k+3)}return M})(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n),p.numcomponents){case 1:d=this.color_spaces.DEVICE_GRAY;break;case 4:d=this.color_spaces.DEVICE_CMYK;break;case 3:d=this.color_spaces.DEVICE_RGB}m={data:n,width:p.width,height:p.height,colorSpace:d,bitsPerComponent:8,filter:g,index:i,alias:r}}return m}})(mn.API),mn.API.processPNG=function(t,e,n,i){if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){var r,a=pR(t,{checkCrc:!0}),l=a.width,d=a.height,p=a.channels,g=a.palette,m=a.depth;r=g&&p===1?(function(fe){for(var G=fe.width,me=fe.height,Z=fe.data,J=fe.palette,Se=fe.depth,Ee=!1,Ye=[],oe=[],ae=void 0,he=!1,De=0,ze=0;ze<J.length;ze++){var ne=r_(J[ze],4),H=ne[0],te=ne[1],ce=ne[2],Q=ne[3];Ye.push(H,te,ce),Q!=null&&(Q===0?(De++,oe.length<1&&oe.push(ze)):Q<255&&(he=!0))}if(he||De>1){Ee=!0,oe=void 0;var xe=G*me;ae=new Uint8Array(xe);for(var Te=new DataView(Z.buffer),Le=0;Le<xe;Le++){var Ge=Sv(Te,Le,Se),Re=r_(J[Ge],4)[3];ae[Le]=Re}}else De===0&&(oe=void 0);return{colorSpace:"Indexed",colorsPerPixel:1,sMaskBitsPerComponent:Ee?8:void 0,colorBytes:Z,alphaBytes:ae,needSMask:Ee,palette:Ye,mask:oe}})(a):p===2||p===4?(function(fe){for(var G=fe.data,me=fe.width,Z=fe.height,J=fe.channels,Se=fe.depth,Ee=J===2?"DeviceGray":"DeviceRGB",Ye=J-1,oe=me*Z,ae=Ye,he=oe*ae,De=1*oe,ze=Math.ceil(he*Se/8),ne=Math.ceil(De*Se/8),H=new Uint8Array(ze),te=new Uint8Array(ne),ce=new DataView(G.buffer),Q=new DataView(H.buffer),xe=new DataView(te.buffer),Te=!1,Le=0;Le<oe;Le++){for(var Ge=Le*J,Re=0;Re<ae;Re++)c2(Q,Sv(ce,Ge+Re,Se),Le*ae+Re,Se);var gt=Sv(ce,Ge+ae,Se);gt<(1<<Se)-1&&(Te=!0),c2(xe,gt,1*Le,Se)}return{colorSpace:Ee,colorsPerPixel:Ye,sMaskBitsPerComponent:Te?Se:void 0,colorBytes:H,alphaBytes:te,needSMask:Te}})(a):(function(fe){var G=fe.data,me=fe.channels===1?"DeviceGray":"DeviceRGB";return{colorSpace:me,colorsPerPixel:me==="DeviceGray"?1:3,colorBytes:G instanceof Uint16Array?(function(Z){for(var J=Z.length,Se=new Uint8Array(2*J),Ee=new DataView(Se.buffer,Se.byteOffset,Se.byteLength),Ye=0;Ye<J;Ye++)Ee.setUint16(2*Ye,Z[Ye],!1);return Se})(G):G,needSMask:!1}})(a);var _,A,x,R=r,M=R.colorSpace,k=R.colorsPerPixel,I=R.sMaskBitsPerComponent,Y=R.colorBytes,B=R.alphaBytes,V=R.needSMask,ee=R.palette,ue=R.mask,_e=null;return i!==mn.API.image_compression.NONE&&typeof cy=="function"?(_e=(function(fe){var G;switch(fe){case mn.API.image_compression.FAST:G=11;break;case mn.API.image_compression.MEDIUM:G=13;break;case mn.API.image_compression.SLOW:G=14;break;default:G=12}return G})(i),_=this.decode.FLATE_DECODE,A="/Predictor ".concat(_e," /Colors ").concat(k," /BitsPerComponent ").concat(m," /Columns ").concat(l),t=r2(Y,Math.ceil(l*k*m/8),k,m,i),V&&(x=r2(B,Math.ceil(l*I/8),1,I,i))):(_=void 0,A=void 0,t=Y,V&&(x=B)),(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(x&&this.__addimage__.isArrayBuffer(x)||this.__addimage__.isArrayBufferView(x))&&(x=this.__addimage__.arrayBufferToBinaryString(x)),{alias:n,data:t,index:e,filter:_,decodeParameters:A,transparency:ue,palette:ee,sMask:x,predictor:_e,width:l,height:d,bitsPerComponent:m,sMaskBitsPerComponent:I,colorSpace:M}}},(function(t){t.processGIF89A=function(e,n,i,r){var a=new OR(e),l=a.width,d=a.height,p=[];a.decodeAndBlitFrameRGBA(0,p);var g={data:p,width:l,height:d},m=new Cv(100).encode(g,100);return t.processJPEG.call(this,m,n,i,r)},t.processGIF87A=t.processGIF89A})(mn.API),pl.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(t);for(var e=0;e<t;e++){var n=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:r,green:i,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},pl.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(n){br.log("bit decode error:"+n)}},pl.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),n=e%4;for(t=this.height-1;t>=0;t--){for(var i=this.bottom_up?t:this.height-1-t,r=0;r<e;r++)for(var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+8*r*4,d=0;d<8&&8*r+d<this.width;d++){var p=this.palette[a>>7-d&1];this.data[l+4*d]=p.blue,this.data[l+4*d+1]=p.green,this.data[l+4*d+2]=p.red,this.data[l+4*d+3]=255}n!==0&&(this.pos+=4-n)}},pl.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<t;r++){var a=this.datav.getUint8(this.pos++,!0),l=i*this.width*4+2*r*4,d=a>>4,p=15&a,g=this.palette[d];if(this.data[l]=g.blue,this.data[l+1]=g.green,this.data[l+2]=g.red,this.data[l+3]=255,2*r+1>=this.width)break;g=this.palette[p],this.data[l+4]=g.blue,this.data[l+4+1]=g.green,this.data[l+4+2]=g.red,this.data[l+4+3]=255}e!==0&&(this.pos+=4-e)}},pl.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var n=this.bottom_up?e:this.height-1-e,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*i;if(r<this.palette.length){var l=this.palette[r];this.data[a]=l.red,this.data[a+1]=l.green,this.data[a+2]=l.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}t!==0&&(this.pos+=4-t)}},pl.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var l=(a&e)/e*255|0,d=(a>>5&e)/e*255|0,p=(a>>10&e)/e*255|0,g=a>>15?255:0,m=i*this.width*4+4*r;this.data[m]=p,this.data[m+1]=d,this.data[m+2]=l,this.data[m+3]=g}this.pos+=t}},pl.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),n=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,a=0;a<this.width;a++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var d=(l&e)/e*255|0,p=(l>>5&n)/n*255|0,g=(l>>11)/e*255|0,m=r*this.width*4+4*a;this.data[m]=g,this.data[m+1]=p,this.data[m+2]=d,this.data[m+3]=255}this.pos+=t}},pl.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=e*this.width*4+4*n;this.data[l]=a,this.data[l+1]=r,this.data[l+2]=i,this.data[l+3]=255}this.pos+=this.width%4}},pl.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,n=0;n<this.width;n++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),d=e*this.width*4+4*n;this.data[d]=a,this.data[d+1]=r,this.data[d+2]=i,this.data[d+3]=l}},pl.prototype.getData=function(){return this.data},(function(t){t.processBMP=function(e,n,i,r){var a=new pl(e,!1),l=a.width,d=a.height,p={data:a.getData(),width:l,height:d},g=new Cv(100).encode(p,100);return t.processJPEG.call(this,g,n,i,r)}})(mn.API),d2.prototype.getData=function(){return this.data},(function(t){t.processWEBP=function(e,n,i,r){var a=new d2(e),l=a.width,d=a.height,p={data:a.getData(),width:l,height:d},g=new Cv(100).encode(p,100);return t.processJPEG.call(this,g,n,i,r)}})(mn.API),mn.API.processRGBA=function(t,e,n){for(var i=t.data,r=i.length,a=new Uint8Array(r/4*3),l=new Uint8Array(r/4),d=0,p=0,g=0;g<r;g+=4){var m=i[g],_=i[g+1],A=i[g+2],x=i[g+3];a[d++]=m,a[d++]=_,a[d++]=A,l[p++]=x}var R=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(l),data:R,index:e,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},mn.API.setLanguage=function(t){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[t]!==void 0&&(this.internal.languageSettings.languageCode=t,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},hd=mn.API,ap=hd.getCharWidthsArray=function(t,e){var n,i,r=(e=e||{}).font||this.internal.getFont(),a=e.fontSize||this.internal.getFontSize(),l=e.charSpace||this.internal.getCharSpace(),d=e.widths?e.widths:r.metadata.Unicode.widths,p=d.fof?d.fof:1,g=e.kerning?e.kerning:r.metadata.Unicode.kerning,m=g.fof?g.fof:1,_=e.doKerning!==!1,A=0,x=t.length,R=0,M=d[0]||p,k=[];for(n=0;n<x;n++)i=t.charCodeAt(n),typeof r.metadata.widthOfString=="function"?k.push((r.metadata.widthOfGlyph(r.metadata.characterToGlyph(i))+l*(1e3/a)||0)/1e3):(A=_&&tr(g[i])==="object"&&!isNaN(parseInt(g[i][R],10))?g[i][R]/m:0,k.push((d[i]||M)/p+A)),R=i;return k},t2=hd.getStringUnitWidth=function(t,e){var n=(e=e||{}).fontSize||this.internal.getFontSize(),i=e.font||this.internal.getFont(),r=e.charSpace||this.internal.getCharSpace();return hd.processArabic&&(t=hd.processArabic(t)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(t,n,r)/n:ap.apply(this,arguments).reduce(function(a,l){return a+l},0)},n2=function(t,e,n,i){for(var r=[],a=0,l=t.length,d=0;a!==l&&d+e[a]<n;)d+=e[a],a++;r.push(t.slice(0,a));var p=a;for(d=0;a!==l;)d+e[a]>i&&(r.push(t.slice(p,a)),d=0,p=a),d+=e[a],a++;return p!==a&&r.push(t.slice(p,a)),r},i2=function(t,e,n){n||(n={});var i,r,a,l,d,p,g,m=[],_=[m],A=n.textIndent||0,x=0,R=0,M=t.split(" "),k=ap.apply(this,[" ",n])[0];if(p=n.lineIndent===-1?M[0].length+2:n.lineIndent||0){var I=Array(p).join(" "),Y=[];M.map(function(V){(V=V.split(/\s*\n/)).length>1?Y=Y.concat(V.map(function(ee,ue){return(ue&&ee.length?`
`:"")+ee})):Y.push(V[0])}),M=Y,p=t2.apply(this,[I,n])}for(a=0,l=M.length;a<l;a++){var B=0;if(i=M[a],p&&i[0]==`
`&&(i=i.substr(1),B=1),A+x+(R=(r=ap.apply(this,[i,n])).reduce(function(V,ee){return V+ee},0))>e||B){if(R>e){for(d=n2.apply(this,[i,r,e-(A+x),e]),m.push(d.shift()),m=[d.pop()];d.length;)_.push([d.shift()]);R=r.slice(i.length-(m[0]?m[0].length:0)).reduce(function(V,ee){return V+ee},0)}else m=[i];_.push(m),A=R+p,x=k}else m.push(i),A+=x+R,x=k}return g=p?function(V,ee){return(ee?I:"")+V.join(" ")}:function(V){return V.join(" ")},_.map(g)},hd.splitTextToSize=function(t,e,n){var i,r=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(m){if(m.widths&&m.kerning)return{widths:m.widths,kerning:m.kerning};var _=this.internal.getFont(m.fontName,m.fontStyle),A="Unicode";return _.metadata[A]?{widths:_.metadata[A].widths||{0:1},kerning:_.metadata[A].kerning||{}}:{font:_.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);i=Array.isArray(t)?t:String(t).split(/\r?\n/);var l=1*this.internal.scaleFactor*e/r;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/r:0,a.lineIndent=n.lineIndent;var d,p,g=[];for(d=0,p=i.length;d<p;d++)g=g.concat(i2.apply(this,[i[d],l,a]));return g},(function(t){t.__fontmetrics__=t.__fontmetrics__||{};for(var e="0123456789abcdef",n="klmnopqrstuvwxyz",i={},r={},a=0;a<16;a++)i[n[a]]=e[a],r[e[a]]=n[a];var l=function(A){return"0x"+parseInt(A,10).toString(16)},d=t.__fontmetrics__.compress=function(A){var x,R,M,k,I=["{"];for(var Y in A){if(x=A[Y],isNaN(parseInt(Y,10))?R="'"+Y+"'":(Y=parseInt(Y,10),R=(R=l(Y).slice(2)).slice(0,-1)+r[R.slice(-1)]),typeof x=="number")x<0?(M=l(x).slice(3),k="-"):(M=l(x).slice(2),k=""),M=k+M.slice(0,-1)+r[M.slice(-1)];else{if(tr(x)!=="object")throw new Error("Don't know what to do with value type "+tr(x)+".");M=d(x)}I.push(R+M)}return I.push("}"),I.join("")},p=t.__fontmetrics__.uncompress=function(A){if(typeof A!="string")throw new Error("Invalid argument passed to uncompress.");for(var x,R,M,k,I={},Y=1,B=I,V=[],ee="",ue="",_e=A.length-1,fe=1;fe<_e;fe+=1)(k=A[fe])=="'"?x?(M=x.join(""),x=void 0):x=[]:x?x.push(k):k=="{"?(V.push([B,M]),B={},M=void 0):k=="}"?((R=V.pop())[0][R[1]]=B,M=void 0,B=R[0]):k=="-"?Y=-1:M===void 0?i.hasOwnProperty(k)?(ee+=i[k],M=parseInt(ee,16)*Y,Y=1,ee=""):ee+=k:i.hasOwnProperty(k)?(ue+=i[k],B[M]=parseInt(ue,16)*Y,Y=1,M=void 0,ue=""):ue+=k;return I},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},m={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},_={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};t.events.push(["addFont",function(A){var x=A.font,R=_.Unicode[x.postScriptName];R&&(x.metadata.Unicode={},x.metadata.Unicode.widths=R.widths,x.metadata.Unicode.kerning=R.kerning);var M=m.Unicode[x.postScriptName];M&&(x.metadata.Unicode.encoding=M,x.encoding=M.codePages[0])}])})(mn.API),(function(t){var e=function(n){for(var i=n.length,r=new Uint8Array(i),a=0;a<i;a++)r[a]=n.charCodeAt(a);return r};t.API.events.push(["addFont",function(n){var i=void 0,r=n.font,a=n.instance;if(!r.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");if(typeof(i=a.existsFileInVFS(r.postScriptName)===!1?a.loadFile(r.postScriptName):a.getFileFromVFS(r.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+r.postScriptName+"').");(function(l,d){d=/^\x00\x01\x00\x00/.test(d)?e(d):e(wp(d)),l.metadata=t.API.TTFFont.open(d),l.metadata.Unicode=l.metadata.Unicode||{encoding:{},kerning:{},widths:[]},l.metadata.glyIdsUsed=[0]})(r,i)}}])})(mn),mn.API.addSvgAsImage=function(t,e,n,i,r,a,l,d){if(isNaN(e)||isNaN(n))throw br.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(i)||isNaN(r))throw br.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var p=document.createElement("canvas");p.width=i,p.height=r;var g=p.getContext("2d");g.fillStyle="#fff",g.fillRect(0,0,p.width,p.height);var m={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},_=this;return(Wn.canvg?Promise.resolve(Wn.canvg):Mr(()=>import("./index.es-Be6Mzifl.js"),[])).catch(function(A){return Promise.reject(new Error("Could not load canvg: "+A))}).then(function(A){return A.default?A.default:A}).then(function(A){return A.fromString(g,t,m)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(A){return A.render(m)}).then(function(){_.addImage(p.toDataURL("image/jpeg",1),e,n,i,r,l,d)})},mn.API.putTotalPages=function(t){var e,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(e=new RegExp(t,"g"),n=this.internal.getNumberOfPages()):(e=new RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var r=0;r<this.internal.pages[i].length;r++)this.internal.pages[i][r]=this.internal.pages[i][r].replace(e,n);return this},mn.API.viewerPreferences=function(t,e){var n;t=t||{},e=e||!1;var i,r,a,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},d=Object.keys(l),p=[],g=0,m=0,_=0;function A(R,M){var k,I=!1;for(k=0;k<R.length;k+=1)R[k]===M&&(I=!0);return I}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,t==="reset"||e===!0){var x=d.length;for(_=0;_<x;_+=1)n[d[_]].value=n[d[_]].defaultValue,n[d[_]].explicitSet=!1}if(tr(t)==="object"){for(r in t)if(a=t[r],A(d,r)&&a!==void 0){if(n[r].type==="boolean"&&typeof a=="boolean")n[r].value=a;else if(n[r].type==="name"&&A(n[r].valueSet,a))n[r].value=a;else if(n[r].type==="integer"&&Number.isInteger(a))n[r].value=a;else if(n[r].type==="array"){for(g=0;g<a.length;g+=1)if(i=!0,a[g].length===1&&typeof a[g][0]=="number")p.push(String(a[g]-1));else if(a[g].length>1){for(m=0;m<a[g].length;m+=1)typeof a[g][m]!="number"&&(i=!1);i===!0&&p.push([a[g][0]-1,a[g][1]-1].join(" "))}n[r].value="["+p.join(" ")+"]"}else n[r].value=n[r].defaultValue;n[r].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var R,M=[];for(R in n)n[R].explicitSet===!0&&(n[R].type==="name"?M.push("/"+R+" /"+n[R].value):M.push("/"+R+" "+n[R].value));M.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+M.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},(function(t){var e=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',r=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(i)),l=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),d=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),p=unescape(encodeURIComponent("</x:xmpmeta>")),g=a.length+l.length+d.length+r.length+p.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(r+a+l+d+p),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};t.addMetadata=function(i,r){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:r||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",e)),this}})(mn.API),(function(t){var e=t.API,n=e.pdfEscape16=function(a,l){for(var d,p=l.metadata.Unicode.widths,g=["","0","00","000","0000"],m=[""],_=0,A=a.length;_<A;++_){if(d=l.metadata.characterToGlyph(a.charCodeAt(_)),l.metadata.glyIdsUsed.push(d),l.metadata.toUnicode[d]=a.charCodeAt(_),p.indexOf(d)==-1&&(p.push(d),p.push([parseInt(l.metadata.widthOfGlyph(d),10)])),d=="0")return m.join("");d=d.toString(16),m.push(g[4-d.length],d)}return m.join("")},i=function(a){var l,d,p,g,m,_,A;for(m=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,p=[],_=0,A=(d=Object.keys(a).sort(function(x,R){return x-R})).length;_<A;_++)l=d[_],p.length>=100&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar`,p=[]),a[l]!==void 0&&a[l]!==null&&typeof a[l].toString=="function"&&(g=("0000"+a[l].toString(16)).slice(-4),l=("0000"+(+l).toString(16)).slice(-4),p.push("<"+l+"><"+g+">"));return p.length&&(m+=`
`+p.length+` beginbfchar
`+p.join(`
`)+`
endbfchar
`),m+`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};e.events.push(["putFont",function(a){(function(l){var d=l.font,p=l.out,g=l.newObject,m=l.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="Identity-H"){for(var _=d.metadata.Unicode.widths,A=d.metadata.subset.encode(d.metadata.glyIdsUsed,1),x="",R=0;R<A.length;R++)x+=String.fromCharCode(A[R]);var M=g();m({data:x,addLength1:!0,objectId:M}),p("endobj");var k=g();m({data:i(d.metadata.toUnicode),addLength1:!0,objectId:k}),p("endobj");var I=g();p("<<"),p("/Type /FontDescriptor"),p("/FontName /"+md(d.fontName)),p("/FontFile2 "+M+" 0 R"),p("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),p("/Flags "+d.metadata.flags),p("/StemV "+d.metadata.stemV),p("/ItalicAngle "+d.metadata.italicAngle),p("/Ascent "+d.metadata.ascender),p("/Descent "+d.metadata.decender),p("/CapHeight "+d.metadata.capHeight),p(">>"),p("endobj");var Y=g();p("<<"),p("/Type /Font"),p("/BaseFont /"+md(d.fontName)),p("/FontDescriptor "+I+" 0 R"),p("/W "+t.API.PDFObject.convert(_)),p("/CIDToGIDMap /Identity"),p("/DW 1000"),p("/Subtype /CIDFontType2"),p("/CIDSystemInfo"),p("<<"),p("/Supplement 0"),p("/Registry (Adobe)"),p("/Ordering ("+d.encoding+")"),p(">>"),p(">>"),p("endobj"),d.objectNumber=g(),p("<<"),p("/Type /Font"),p("/Subtype /Type0"),p("/ToUnicode "+k+" 0 R"),p("/BaseFont /"+md(d.fontName)),p("/Encoding /"+d.encoding),p("/DescendantFonts ["+Y+" 0 R]"),p(">>"),p("endobj"),d.isAlreadyPutted=!0}})(a)}]),e.events.push(["putFont",function(a){(function(l){var d=l.font,p=l.out,g=l.newObject,m=l.putStream;if(d.metadata instanceof t.API.TTFFont&&d.encoding==="WinAnsiEncoding"){for(var _=d.metadata.rawData,A="",x=0;x<_.length;x++)A+=String.fromCharCode(_[x]);var R=g();m({data:A,addLength1:!0,objectId:R}),p("endobj");var M=g();m({data:i(d.metadata.toUnicode),addLength1:!0,objectId:M}),p("endobj");var k=g();p("<<"),p("/Descent "+d.metadata.decender),p("/CapHeight "+d.metadata.capHeight),p("/StemV "+d.metadata.stemV),p("/Type /FontDescriptor"),p("/FontFile2 "+R+" 0 R"),p("/Flags 96"),p("/FontBBox "+t.API.PDFObject.convert(d.metadata.bbox)),p("/FontName /"+md(d.fontName)),p("/ItalicAngle "+d.metadata.italicAngle),p("/Ascent "+d.metadata.ascender),p(">>"),p("endobj"),d.objectNumber=g();for(var I=0;I<d.metadata.hmtx.widths.length;I++)d.metadata.hmtx.widths[I]=parseInt(d.metadata.hmtx.widths[I]*(1e3/d.metadata.head.unitsPerEm));p("<</Subtype/TrueType/Type/Font/ToUnicode "+M+" 0 R/BaseFont/"+md(d.fontName)+"/FontDescriptor "+k+" 0 R/Encoding/"+d.encoding+" /FirstChar 29 /LastChar 255 /Widths "+t.API.PDFObject.convert(d.metadata.hmtx.widths)+">>"),p("endobj"),d.isAlreadyPutted=!0}})(a)}]);var r=function(a){var l,d=a.text||"",p=a.x,g=a.y,m=a.options||{},_=a.mutex||{},A=_.pdfEscape,x=_.activeFontKey,R=_.fonts,M=x,k="",I=0,Y="",B=R[M].encoding;if(R[M].encoding!=="Identity-H")return{text:d,x:p,y:g,options:m,mutex:_};for(Y=d,M=x,Array.isArray(d)&&(Y=d[0]),I=0;I<Y.length;I+=1)R[M].metadata.hasOwnProperty("cmap")&&(l=R[M].metadata.cmap.unicode.codeMap[Y[I].charCodeAt(0)]),l||Y[I].charCodeAt(0)<256&&R[M].metadata.hasOwnProperty("Unicode")?k+=Y[I]:k+="";var V="";return parseInt(M.slice(1))<14||B==="WinAnsiEncoding"?V=A(k,M).split("").map(function(ee){return ee.charCodeAt(0).toString(16)}).join(""):B==="Identity-H"&&(V=n(k,R[M])),_.isHex=!0,{text:V,x:p,y:g,options:m,mutex:_}};e.events.push(["postProcessText",function(a){var l=a.text||"",d=[],p={text:l,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(l)){var g=0;for(g=0;g<l.length;g+=1)Array.isArray(l[g])&&l[g].length===3?d.push([r(Object.assign({},p,{text:l[g][0]})).text,l[g][1],l[g][2]]):d.push(r(Object.assign({},p,{text:l[g]})).text);a.text=d}else a.text=r(Object.assign({},p,{text:l})).text}])})(mn),(function(t){var e=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};t.existsFileInVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0},t.addFileToVFS=function(n,i){return e.call(this),this.internal.vFS[n]=i,this},t.getFileFromVFS=function(n){return e.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}})(mn.API),(function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(i){var r,a,l,d,p,g,m,_=e,A=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],x=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],R={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},M={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},k=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],I=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Y=!1,B=0;this.__bidiEngine__={};var V=function(Z){var J=Z.charCodeAt(),Se=J>>8,Ee=M[Se];return Ee!==void 0?_[256*Ee+(255&J)]:Se===252||Se===253?"AL":I.test(Se)?"L":Se===8?"R":"N"},ee=function(Z){for(var J,Se=0;Se<Z.length;Se++){if((J=V(Z.charAt(Se)))==="L")return!1;if(J==="R")return!0}return!1},ue=function(Z,J,Se,Ee){var Ye,oe,ae,he,De=J[Ee];switch(De){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Y=!1;break;case"N":case"AN":break;case"EN":Y&&(De="AN");break;case"AL":Y=!0,De="R";break;case"WS":case"BN":De="N";break;case"CS":Ee<1||Ee+1>=J.length||(Ye=Se[Ee-1])!=="EN"&&Ye!=="AN"||(oe=J[Ee+1])!=="EN"&&oe!=="AN"?De="N":Y&&(oe="AN"),De=oe===Ye?oe:"N";break;case"ES":De=(Ye=Ee>0?Se[Ee-1]:"B")==="EN"&&Ee+1<J.length&&J[Ee+1]==="EN"?"EN":"N";break;case"ET":if(Ee>0&&Se[Ee-1]==="EN"){De="EN";break}if(Y){De="N";break}for(ae=Ee+1,he=J.length;ae<he&&J[ae]==="ET";)ae++;De=ae<he&&J[ae]==="EN"?"EN":"N";break;case"NSM":if(l&&!d){for(he=J.length,ae=Ee+1;ae<he&&J[ae]==="NSM";)ae++;if(ae<he){var ze=Z[Ee],ne=ze>=1425&&ze<=2303||ze===64286;if(Ye=J[ae],ne&&(Ye==="R"||Ye==="AL")){De="R";break}}}De=Ee<1||(Ye=J[Ee-1])==="B"?"N":Se[Ee-1];break;case"B":Y=!1,r=!0,De=B;break;case"S":a=!0,De="N"}return De},_e=function(Z,J,Se){var Ee=Z.split("");return Se&&fe(Ee,Se,{hiLevel:B}),Ee.reverse(),J&&J.reverse(),Ee.join("")},fe=function(Z,J,Se){var Ee,Ye,oe,ae,he,De=-1,ze=Z.length,ne=0,H=[],te=B?x:A,ce=[];for(Y=!1,r=!1,a=!1,Ye=0;Ye<ze;Ye++)ce[Ye]=V(Z[Ye]);for(oe=0;oe<ze;oe++){if(he=ne,H[oe]=ue(Z,ce,H,oe),Ee=240&(ne=te[he][R[H[oe]]]),ne&=15,J[oe]=ae=te[ne][5],Ee>0)if(Ee===16){for(Ye=De;Ye<oe;Ye++)J[Ye]=1;De=-1}else De=-1;if(te[ne][6])De===-1&&(De=oe);else if(De>-1){for(Ye=De;Ye<oe;Ye++)J[Ye]=ae;De=-1}ce[oe]==="B"&&(J[oe]=0),Se.hiLevel|=ae}a&&(function(Q,xe,Te){for(var Le=0;Le<Te;Le++)if(Q[Le]==="S"){xe[Le]=B;for(var Ge=Le-1;Ge>=0&&Q[Ge]==="WS";Ge--)xe[Ge]=B}})(ce,J,ze)},G=function(Z,J,Se,Ee,Ye){if(!(Ye.hiLevel<Z)){if(Z===1&&B===1&&!r)return J.reverse(),void(Se&&Se.reverse());for(var oe,ae,he,De,ze=J.length,ne=0;ne<ze;){if(Ee[ne]>=Z){for(he=ne+1;he<ze&&Ee[he]>=Z;)he++;for(De=ne,ae=he-1;De<ae;De++,ae--)oe=J[De],J[De]=J[ae],J[ae]=oe,Se&&(oe=Se[De],Se[De]=Se[ae],Se[ae]=oe);ne=he}ne++}}},me=function(Z,J,Se){var Ee=Z.split(""),Ye={hiLevel:B};return Se||(Se=[]),fe(Ee,Se,Ye),(function(oe,ae,he){if(he.hiLevel!==0&&m)for(var De,ze=0;ze<oe.length;ze++)ae[ze]===1&&(De=k.indexOf(oe[ze]))>=0&&(oe[ze]=k[De+1])})(Ee,Se,Ye),G(2,Ee,J,Se,Ye),G(1,Ee,J,Se,Ye),Ee.join("")};return this.__bidiEngine__.doBidiReorder=function(Z,J,Se){if((function(Ye,oe){if(oe)for(var ae=0;ae<Ye.length;ae++)oe[ae]=ae;d===void 0&&(d=ee(Ye)),g===void 0&&(g=ee(Ye))})(Z,J),l||!p||g)if(l&&p&&d^g)B=d?1:0,Z=_e(Z,J,Se);else if(!l&&p&&g)B=d?1:0,Z=me(Z,J,Se),Z=_e(Z,J);else if(!l||d||p||g){if(l&&!p&&d^g)Z=_e(Z,J),d?(B=0,Z=me(Z,J,Se)):(B=1,Z=me(Z,J,Se),Z=_e(Z,J));else if(l&&d&&!p&&g)B=1,Z=me(Z,J,Se),Z=_e(Z,J);else if(!l&&!p&&d^g){var Ee=m;d?(B=1,Z=me(Z,J,Se),B=0,m=!1,Z=me(Z,J,Se),m=Ee):(B=0,Z=me(Z,J,Se),Z=_e(Z,J),B=1,m=!1,Z=me(Z,J,Se),m=Ee,Z=_e(Z,J))}}else B=0,Z=me(Z,J,Se);else B=d?1:0,Z=me(Z,J,Se);return Z},this.__bidiEngine__.setOptions=function(Z){Z&&(l=Z.isInputVisual,p=Z.isOutputVisual,d=Z.isInputRtl,g=Z.isOutputRtl,m=Z.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(i){var r=i.text;i.x,i.y;var a=i.options||{};i.mutex,a.lang;var l=[];if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(r)==="[object Array]"){var d=0;for(l=[],d=0;d<r.length;d+=1)Object.prototype.toString.call(r[d])==="[object Array]"?l.push([n.doBidiReorder(r[d][0]),r[d][1],r[d][2]]):l.push([n.doBidiReorder(r[d])]);i.text=l}else i.text=n.doBidiReorder(r);n.setOptions({isInputVisual:!0})}])})(mn),mn.API.TTFFont=(function(){function t(e){var n;if(this.rawData=e,n=this.contents=new nu(e),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new XR(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new PR(this.contents),this.head=new zR(this),this.name=new qR(this),this.cmap=new fS(this),this.toUnicode={},this.hhea=new BR(this),this.maxp=new WR(this),this.hmtx=new GR(this),this.post=new UR(this),this.os2=new FR(this),this.loca=new KR(this),this.glyf=new VR(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var e,n,i,r,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var l,d,p,g;for(g=[],l=0,d=(p=this.bbox).length;l<d;l++)e=p[l],g.push(Math.round(e*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),32768&(n=r>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(e){var n;return((n=this.cmap.unicode)!=null?n.codeMap[e]:void 0)||0},t.prototype.widthOfGlyph=function(e){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(e).advance*n},t.prototype.widthOfString=function(e,n,i){var r,a,l,d;for(l=0,a=0,d=(e=""+e).length;0<=d?a<d:a>d;a=0<=d?++a:--a)r=e.charCodeAt(a),l+=this.widthOfGlyph(this.characterToGlyph(r))+i*(1e3/n)||0;return l*(n/1e3)},t.prototype.lineHeight=function(e,n){var i;return n==null&&(n=!1),i=n?this.lineGap:0,(this.ascender+i-this.decender)/1e3*e},t})();var Cl,nu=(function(){function t(e){this.data=e??[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(e){return this.data[this.pos++]=e},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(e){return this.writeByte(e>>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt32=function(){var e;return(e=this.readUInt32())>=2147483648?e-4294967296:e},t.prototype.writeInt32=function(e){return e<0&&(e+=4294967296),this.writeUInt32(e)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(e){return this.writeByte(e>>8&255),this.writeByte(255&e)},t.prototype.readInt16=function(){var e;return(e=this.readUInt16())>=32768?e-65536:e},t.prototype.writeInt16=function(e){return e<0&&(e+=65536),this.writeUInt16(e)},t.prototype.readString=function(e){var n,i;for(i=[],n=0;0<=e?n<e:n>e;n=0<=e?++n:--n)i[n]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(e){var n,i,r;for(r=[],n=0,i=e.length;0<=i?n<i:n>i;n=0<=i?++n:--n)r.push(this.writeByte(e.charCodeAt(n)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(e){return this.writeInt16(e)},t.prototype.readLongLong=function(){var e,n,i,r,a,l,d,p;return e=this.readByte(),n=this.readByte(),i=this.readByte(),r=this.readByte(),a=this.readByte(),l=this.readByte(),d=this.readByte(),p=this.readByte(),128&e?-1*(72057594037927940*(255^e)+281474976710656*(255^n)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^a)+65536*(255^l)+256*(255^d)+(255^p)+1):72057594037927940*e+281474976710656*n+1099511627776*i+4294967296*r+16777216*a+65536*l+256*d+p},t.prototype.writeLongLong=function(e){var n,i;return n=Math.floor(e/4294967296),i=4294967295&e,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(e){return this.writeInt32(e)},t.prototype.read=function(e){var n,i;for(n=[],i=0;0<=e?i<e:i>e;i=0<=e?++i:--i)n.push(this.readByte());return n},t.prototype.write=function(e){var n,i,r,a;for(a=[],i=0,r=e.length;i<r;i++)n=e[i],a.push(this.writeByte(n));return a},t})(),PR=(function(){var t;function e(n){var i,r,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},r=0,a=this.tableCount;0<=a?r<a:r>a;r=0<=a?++r:--r)i={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[i.tag]=i}return e.prototype.encode=function(n){var i,r,a,l,d,p,g,m,_,A,x,R,M;for(M in x=Object.keys(n).length,p=Math.log(2),_=16*Math.floor(Math.log(x)/p),l=Math.floor(_/p),m=16*x-_,(r=new nu).writeInt(this.scalarType),r.writeShort(x),r.writeShort(_),r.writeShort(l),r.writeShort(m),a=16*x,g=r.pos+a,d=null,R=[],n)for(A=n[M],r.writeString(M),r.writeInt(t(A)),r.writeInt(g),r.writeInt(A.length),R=R.concat(A),M==="head"&&(d=g),g+=A.length;g%4;)R.push(0),g++;return r.write(R),i=2981146554-t(r.data),r.pos=d+8,r.writeUInt32(i),r.data},t=function(n){var i,r,a,l;for(n=hS.call(n);n.length%4;)n.push(0);for(a=new nu(n),r=0,i=0,l=n.length;i<l;i=i+=4)r+=a.readUInt32();return 4294967295&r},e})(),IR={}.hasOwnProperty,Xl=function(t,e){for(var n in e)IR.call(e,n)&&(t[n]=e[n]);function i(){this.constructor=t}return i.prototype=e.prototype,t.prototype=new i,t.__super__=e.prototype,t};Cl=(function(){function t(e){var n;this.file=e,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t})();var zR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="head",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.revision=e.readInt(),this.checkSumAdjustment=e.readInt(),this.magicNumber=e.readInt(),this.flags=e.readShort(),this.unitsPerEm=e.readShort(),this.created=e.readLongLong(),this.modified=e.readLongLong(),this.xMin=e.readShort(),this.yMin=e.readShort(),this.xMax=e.readShort(),this.yMax=e.readShort(),this.macStyle=e.readShort(),this.lowestRecPPEM=e.readShort(),this.fontDirectionHint=e.readShort(),this.indexToLocFormat=e.readShort(),this.glyphDataFormat=e.readShort()},t.prototype.encode=function(e){var n;return(n=new nu).writeInt(this.version),n.writeInt(this.revision),n.writeInt(this.checkSumAdjustment),n.writeInt(this.magicNumber),n.writeShort(this.flags),n.writeShort(this.unitsPerEm),n.writeLongLong(this.created),n.writeLongLong(this.modified),n.writeShort(this.xMin),n.writeShort(this.yMin),n.writeShort(this.xMax),n.writeShort(this.yMax),n.writeShort(this.macStyle),n.writeShort(this.lowestRecPPEM),n.writeShort(this.fontDirectionHint),n.writeShort(e),n.writeShort(this.glyphDataFormat),n.data},t})(),f2=(function(){function t(e,n){var i,r,a,l,d,p,g,m,_,A,x,R,M,k,I,Y,B;switch(this.platformID=e.readUInt16(),this.encodingID=e.readShort(),this.offset=n+e.readInt(),_=e.pos,e.pos=this.offset,this.format=e.readUInt16(),this.length=e.readUInt16(),this.language=e.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(p=0;p<256;++p)this.codeMap[p]=e.readByte();break;case 4:for(x=e.readUInt16(),A=x/2,e.pos+=6,a=(function(){var V,ee;for(ee=[],p=V=0;0<=A?V<A:V>A;p=0<=A?++V:--V)ee.push(e.readUInt16());return ee})(),e.pos+=2,M=(function(){var V,ee;for(ee=[],p=V=0;0<=A?V<A:V>A;p=0<=A?++V:--V)ee.push(e.readUInt16());return ee})(),g=(function(){var V,ee;for(ee=[],p=V=0;0<=A?V<A:V>A;p=0<=A?++V:--V)ee.push(e.readUInt16());return ee})(),m=(function(){var V,ee;for(ee=[],p=V=0;0<=A?V<A:V>A;p=0<=A?++V:--V)ee.push(e.readUInt16());return ee})(),r=(this.length-e.pos+this.offset)/2,d=(function(){var V,ee;for(ee=[],p=V=0;0<=r?V<r:V>r;p=0<=r?++V:--V)ee.push(e.readUInt16());return ee})(),p=I=0,B=a.length;I<B;p=++I)for(k=a[p],i=Y=R=M[p];R<=k?Y<=k:Y>=k;i=R<=k?++Y:--Y)m[p]===0?l=i+g[p]:(l=d[m[p]/2+(i-R)-(A-p)]||0)!==0&&(l+=g[p]),this.codeMap[i]=65535&l}e.pos=_}return t.encode=function(e,n){var i,r,a,l,d,p,g,m,_,A,x,R,M,k,I,Y,B,V,ee,ue,_e,fe,G,me,Z,J,Se,Ee,Ye,oe,ae,he,De,ze,ne,H,te,ce,Q,xe,Te,Le,Ge,Re,gt,mt;switch(Ee=new nu,l=Object.keys(e).sort(function(Ot,Kt){return Ot-Kt}),n){case"macroman":for(M=0,k=(function(){var Ot=[];for(R=0;R<256;++R)Ot.push(0);return Ot})(),Y={0:0},a={},Ye=0,De=l.length;Ye<De;Ye++)Y[Ge=e[r=l[Ye]]]==null&&(Y[Ge]=++M),a[r]={old:e[r],new:Y[e[r]]},k[r]=Y[e[r]];return Ee.writeUInt16(1),Ee.writeUInt16(0),Ee.writeUInt32(12),Ee.writeUInt16(0),Ee.writeUInt16(262),Ee.writeUInt16(0),Ee.write(k),{charMap:a,subtable:Ee.data,maxGlyphID:M+1};case"unicode":for(J=[],_=[],B=0,Y={},i={},I=g=null,oe=0,ze=l.length;oe<ze;oe++)Y[ee=e[r=l[oe]]]==null&&(Y[ee]=++B),i[r]={old:ee,new:Y[ee]},d=Y[ee]-r,I!=null&&d===g||(I&&_.push(I),J.push(r),g=d),I=r;for(I&&_.push(I),_.push(65535),J.push(65535),me=2*(G=J.length),fe=2*Math.pow(Math.log(G)/Math.LN2,2),A=Math.log(fe/2)/Math.LN2,_e=2*G-fe,p=[],ue=[],x=[],R=ae=0,ne=J.length;ae<ne;R=++ae){if(Z=J[R],m=_[R],Z===65535){p.push(0),ue.push(0);break}if(Z-(Se=i[Z].new)>=32768)for(p.push(0),ue.push(2*(x.length+G-R)),r=he=Z;Z<=m?he<=m:he>=m;r=Z<=m?++he:--he)x.push(i[r].new);else p.push(Se-Z),ue.push(0)}for(Ee.writeUInt16(3),Ee.writeUInt16(1),Ee.writeUInt32(12),Ee.writeUInt16(4),Ee.writeUInt16(16+8*G+2*x.length),Ee.writeUInt16(0),Ee.writeUInt16(me),Ee.writeUInt16(fe),Ee.writeUInt16(A),Ee.writeUInt16(_e),Te=0,H=_.length;Te<H;Te++)r=_[Te],Ee.writeUInt16(r);for(Ee.writeUInt16(0),Le=0,te=J.length;Le<te;Le++)r=J[Le],Ee.writeUInt16(r);for(Re=0,ce=p.length;Re<ce;Re++)d=p[Re],Ee.writeUInt16(d);for(gt=0,Q=ue.length;gt<Q;gt++)V=ue[gt],Ee.writeUInt16(V);for(mt=0,xe=x.length;mt<xe;mt++)M=x[mt],Ee.writeUInt16(M);return{charMap:i,subtable:Ee.data,maxGlyphID:B+1}}},t})(),fS=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="cmap",t.prototype.parse=function(e){var n,i,r;for(e.pos=this.offset,this.version=e.readUInt16(),r=e.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)n=new f2(e,this.offset),this.tables.push(n),n.isUnicode&&this.unicode==null&&(this.unicode=n);return!0},t.encode=function(e,n){var i,r;return n==null&&(n="macroman"),i=f2.encode(e,n),(r=new nu).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},t})(),BR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="hhea",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.ascender=e.readShort(),this.decender=e.readShort(),this.lineGap=e.readShort(),this.advanceWidthMax=e.readShort(),this.minLeftSideBearing=e.readShort(),this.minRightSideBearing=e.readShort(),this.xMaxExtent=e.readShort(),this.caretSlopeRise=e.readShort(),this.caretSlopeRun=e.readShort(),this.caretOffset=e.readShort(),e.pos+=8,this.metricDataFormat=e.readShort(),this.numberOfMetrics=e.readUInt16()},t})(),FR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="OS/2",t.prototype.parse=function(e){if(e.pos=this.offset,this.version=e.readUInt16(),this.averageCharWidth=e.readShort(),this.weightClass=e.readUInt16(),this.widthClass=e.readUInt16(),this.type=e.readShort(),this.ySubscriptXSize=e.readShort(),this.ySubscriptYSize=e.readShort(),this.ySubscriptXOffset=e.readShort(),this.ySubscriptYOffset=e.readShort(),this.ySuperscriptXSize=e.readShort(),this.ySuperscriptYSize=e.readShort(),this.ySuperscriptXOffset=e.readShort(),this.ySuperscriptYOffset=e.readShort(),this.yStrikeoutSize=e.readShort(),this.yStrikeoutPosition=e.readShort(),this.familyClass=e.readShort(),this.panose=(function(){var n,i;for(i=[],n=0;n<10;++n)i.push(e.readByte());return i})(),this.charRange=(function(){var n,i;for(i=[],n=0;n<4;++n)i.push(e.readInt());return i})(),this.vendorID=e.readString(4),this.selection=e.readShort(),this.firstCharIndex=e.readShort(),this.lastCharIndex=e.readShort(),this.version>0&&(this.ascent=e.readShort(),this.descent=e.readShort(),this.lineGap=e.readShort(),this.winAscent=e.readShort(),this.winDescent=e.readShort(),this.codePageRange=(function(){var n,i;for(i=[],n=0;n<2;n=++n)i.push(e.readInt());return i})(),this.version>1))return this.xHeight=e.readShort(),this.capHeight=e.readShort(),this.defaultChar=e.readShort(),this.breakChar=e.readShort(),this.maxContext=e.readShort()},t})(),UR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="post",t.prototype.parse=function(e){var n,i,r;switch(e.pos=this.offset,this.format=e.readInt(),this.italicAngle=e.readInt(),this.underlinePosition=e.readShort(),this.underlineThickness=e.readShort(),this.isFixedPitch=e.readInt(),this.minMemType42=e.readInt(),this.maxMemType42=e.readInt(),this.minMemType1=e.readInt(),this.maxMemType1=e.readInt(),this.format){case 65536:case 196608:break;case 131072:var a;for(i=e.readUInt16(),this.glyphNameIndex=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)this.glyphNameIndex.push(e.readUInt16());for(this.names=[],r=[];e.pos<this.offset+this.length;)n=e.readByte(),r.push(this.names.push(e.readString(n)));return r;case 151552:return i=e.readUInt16(),this.offsets=e.read(i);case 262144:return this.map=(function(){var l,d,p;for(p=[],a=l=0,d=this.file.maxp.numGlyphs;0<=d?l<d:l>d;a=0<=d?++l:--l)p.push(e.readUInt32());return p}).call(this)}},t})(),HR=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},qR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="name",t.prototype.parse=function(e){var n,i,r,a,l,d,p,g,m,_,A;for(e.pos=this.offset,e.readShort(),n=e.readShort(),d=e.readShort(),i=[],a=0;0<=n?a<n:a>n;a=0<=n?++a:--a)i.push({platformID:e.readShort(),encodingID:e.readShort(),languageID:e.readShort(),nameID:e.readShort(),length:e.readShort(),offset:this.offset+d+e.readShort()});for(p={},a=m=0,_=i.length;m<_;a=++m)r=i[a],e.pos=r.offset,g=e.readString(r.length),l=new HR(g,r),p[A=r.nameID]==null&&(p[A]=[]),p[r.nameID].push(l);this.strings=p,this.copyright=p[0],this.fontFamily=p[1],this.fontSubfamily=p[2],this.uniqueSubfamily=p[3],this.fontName=p[4],this.version=p[5];try{this.postscriptName=p[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=p[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=p[7],this.manufacturer=p[8],this.designer=p[9],this.description=p[10],this.vendorUrl=p[11],this.designerUrl=p[12],this.license=p[13],this.licenseUrl=p[14],this.preferredFamily=p[15],this.preferredSubfamily=p[17],this.compatibleFull=p[18],this.sampleText=p[19]},t})(),WR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="maxp",t.prototype.parse=function(e){return e.pos=this.offset,this.version=e.readInt(),this.numGlyphs=e.readUInt16(),this.maxPoints=e.readUInt16(),this.maxContours=e.readUInt16(),this.maxCompositePoints=e.readUInt16(),this.maxComponentContours=e.readUInt16(),this.maxZones=e.readUInt16(),this.maxTwilightPoints=e.readUInt16(),this.maxStorage=e.readUInt16(),this.maxFunctionDefs=e.readUInt16(),this.maxInstructionDefs=e.readUInt16(),this.maxStackElements=e.readUInt16(),this.maxSizeOfInstructions=e.readUInt16(),this.maxComponentElements=e.readUInt16(),this.maxComponentDepth=e.readUInt16()},t})(),GR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="hmtx",t.prototype.parse=function(e){var n,i,r,a,l,d,p;for(e.pos=this.offset,this.metrics=[],n=0,d=this.file.hhea.numberOfMetrics;0<=d?n<d:n>d;n=0<=d?++n:--n)this.metrics.push({advance:e.readUInt16(),lsb:e.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var g,m;for(m=[],n=g=0;0<=r?g<r:g>r;n=0<=r?++g:--g)m.push(e.readInt16());return m})(),this.widths=(function(){var g,m,_,A;for(A=[],g=0,m=(_=this.metrics).length;g<m;g++)a=_[g],A.push(a.advance);return A}).call(this),i=this.widths[this.widths.length-1],p=[],n=l=0;0<=r?l<r:l>r;n=0<=r?++l:--l)p.push(this.widths.push(i));return p},t.prototype.forGlyph=function(e){return e in this.metrics?this.metrics[e]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[e-this.metrics.length]}},t})(),hS=[].slice,VR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(e){var n,i,r,a,l,d,p,g,m,_;return e in this.cache?this.cache[e]:(a=this.file.loca,n=this.file.contents,i=a.indexOf(e),(r=a.lengthOf(e))===0?this.cache[e]=null:(n.pos=this.offset+i,l=(d=new nu(n.read(r))).readShort(),g=d.readShort(),_=d.readShort(),p=d.readShort(),m=d.readShort(),this.cache[e]=l===-1?new ZR(d,g,_,p,m):new YR(d,l,g,_,p,m),this.cache[e]))},t.prototype.encode=function(e,n,i){var r,a,l,d,p;for(l=[],a=[],d=0,p=n.length;d<p;d++)r=e[n[d]],a.push(l.length),r&&(l=l.concat(r.encode(i)));return a.push(l.length),{table:l,offsets:a}},t})(),YR=(function(){function t(e,n,i,r,a,l){this.raw=e,this.numberOfContours=n,this.xMin=i,this.yMin=r,this.xMax=a,this.yMax=l,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t})(),ZR=(function(){function t(e,n,i,r,a){var l,d;for(this.raw=e,this.xMin=n,this.yMin=i,this.xMax=r,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],l=this.raw;d=l.readShort(),this.glyphOffsets.push(l.pos),this.glyphIDs.push(l.readUInt16()),32&d;)l.pos+=1&d?4:2,128&d?l.pos+=8:64&d?l.pos+=4:8&d&&(l.pos+=2)}return t.prototype.encode=function(){var e,n,i;for(n=new nu(hS.call(this.raw.data)),e=0,i=this.glyphIDs.length;e<i;++e)n.pos=this.glyphOffsets[e];return n.data},t})(),KR=(function(){function t(){return t.__super__.constructor.apply(this,arguments)}return Xl(t,Cl),t.prototype.tag="loca",t.prototype.parse=function(e){var n,i;return e.pos=this.offset,n=this.file.head.indexToLocFormat,this.offsets=n===0?(function(){var r,a;for(a=[],i=0,r=this.length;i<r;i+=2)a.push(2*e.readUInt16());return a}).call(this):(function(){var r,a;for(a=[],i=0,r=this.length;i<r;i+=4)a.push(e.readUInt32());return a}).call(this)},t.prototype.indexOf=function(e){return this.offsets[e]},t.prototype.lengthOf=function(e){return this.offsets[e+1]-this.offsets[e]},t.prototype.encode=function(e,n){for(var i=new Uint32Array(this.offsets.length),r=0,a=0,l=0;l<i.length;++l)if(i[l]=r,a<n.length&&n[a]==l){++a,i[l]=r;var d=this.offsets[l],p=this.offsets[l+1]-d;p>0&&(r+=p)}for(var g=new Array(4*i.length),m=0;m<i.length;++m)g[4*m+3]=255&i[m],g[4*m+2]=(65280&i[m])>>8,g[4*m+1]=(16711680&i[m])>>16,g[4*m]=(4278190080&i[m])>>24;return g},t})(),XR=(function(){function t(e){this.font=e,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var e,n,i,r,a;for(n in r=this.font.cmap.tables[0].codeMap,e={},a=this.subset)i=a[n],e[n]=r[i];return e},t.prototype.glyphsFor=function(e){var n,i,r,a,l,d,p;for(r={},l=0,d=e.length;l<d;l++)r[a=e[l]]=this.font.glyf.glyphFor(a);for(a in n=[],r)(i=r[a])!=null&&i.compound&&n.push.apply(n,i.glyphIDs);if(n.length>0)for(a in p=this.glyphsFor(n))i=p[a],r[a]=i;return r},t.prototype.encode=function(e,n){var i,r,a,l,d,p,g,m,_,A,x,R,M,k,I;for(r in i=fS.encode(this.generateCmap(),"unicode"),l=this.glyphsFor(e),x={0:0},I=i.charMap)x[(p=I[r]).old]=p.new;for(R in A=i.maxGlyphID,l)R in x||(x[R]=A++);return m=(function(Y){var B,V;for(B in V={},Y)V[Y[B]]=B;return V})(x),_=Object.keys(m).sort(function(Y,B){return Y-B}),M=(function(){var Y,B,V;for(V=[],Y=0,B=_.length;Y<B;Y++)d=_[Y],V.push(m[d]);return V})(),a=this.font.glyf.encode(l,M,x),g=this.font.loca.encode(a.offsets,M),k={cmap:this.font.cmap.raw(),glyf:a.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(k["OS/2"]=this.font.os2.raw()),this.font.directory.encode(k)},t})();mn.API.PDFObject=(function(){var t;function e(){}return t=function(n,i){return(Array(i+1).join("0")+n).slice(-i)},e.convert=function(n){var i,r,a,l;if(Array.isArray(n))return"["+(function(){var d,p,g;for(g=[],d=0,p=n.length;d<p;d++)i=n[d],g.push(e.convert(i));return g})().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n?.isString)return"("+n+")";if(n instanceof Date)return"(D:"+t(n.getUTCFullYear(),4)+t(n.getUTCMonth(),2)+t(n.getUTCDate(),2)+t(n.getUTCHours(),2)+t(n.getUTCMinutes(),2)+t(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(r in a=["<<"],n)l=n[r],a.push("/"+r+" "+e.convert(l));return a.push(">>"),a.join(`
`)}return""+n},e})();function pS(t,e,n,i,r){i=i||{};var a=1.15,l=r.internal.scaleFactor,d=r.internal.getFontSize()/l,p=r.getLineHeightFactor?r.getLineHeightFactor():a,g=d*p,m=/\r\n|\r|\n/g,_="",A=1;if((i.valign==="middle"||i.valign==="bottom"||i.halign==="center"||i.halign==="right")&&(_=typeof t=="string"?t.split(m):t,A=_.length||1),n+=d*(2-a),i.valign==="middle"?n-=A/2*g:i.valign==="bottom"&&(n-=A*g),i.halign==="center"||i.halign==="right"){var x=d;if(i.halign==="center"&&(x*=.5),_&&A>=1){for(var R=0;R<_.length;R++)r.text(_[R],e-r.getStringUnitWidth(_[R])*x,n),n+=g;return r}e-=r.getStringUnitWidth(t)*x}return i.halign==="justify"?r.text(t,e,n,{maxWidth:i.maxWidth||100,align:"justify"}):r.text(t,e,n),r}var h2={},Cd=(function(){function t(e){this.jsPDFDocument=e,this.userStyles={textColor:e.getTextColor?this.jsPDFDocument.getTextColor():0,fontSize:e.internal.getFontSize(),fontStyle:e.internal.getFont().fontStyle,font:e.internal.getFont().fontName,lineWidth:e.getLineWidth?this.jsPDFDocument.getLineWidth():0,lineColor:e.getDrawColor?this.jsPDFDocument.getDrawColor():0}}return t.setDefaults=function(e,n){n===void 0&&(n=null),n?n.__autoTableDocumentDefaults=e:h2=e},t.unifyColor=function(e){return Array.isArray(e)?e:typeof e=="number"?[e,e,e]:typeof e=="string"?[e]:null},t.prototype.applyStyles=function(e,n){var i,r,a;n===void 0&&(n=!1),e.fontStyle&&this.jsPDFDocument.setFontStyle&&this.jsPDFDocument.setFontStyle(e.fontStyle);var l=this.jsPDFDocument.internal.getFont(),d=l.fontStyle,p=l.fontName;if(e.font&&(p=e.font),e.fontStyle){d=e.fontStyle;var g=this.getFontList()[p];g&&g.indexOf(d)===-1&&this.jsPDFDocument.setFontStyle&&(this.jsPDFDocument.setFontStyle(g[0]),d=g[0])}if(this.jsPDFDocument.setFont(p,d),e.fontSize&&this.jsPDFDocument.setFontSize(e.fontSize),!n){var m=t.unifyColor(e.fillColor);m&&(i=this.jsPDFDocument).setFillColor.apply(i,m),m=t.unifyColor(e.textColor),m&&(r=this.jsPDFDocument).setTextColor.apply(r,m),m=t.unifyColor(e.lineColor),m&&(a=this.jsPDFDocument).setDrawColor.apply(a,m),typeof e.lineWidth=="number"&&this.jsPDFDocument.setLineWidth(e.lineWidth)}},t.prototype.splitTextToSize=function(e,n,i){return this.jsPDFDocument.splitTextToSize(e,n,i)},t.prototype.rect=function(e,n,i,r,a){return this.jsPDFDocument.rect(e,n,i,r,a)},t.prototype.getLastAutoTable=function(){return this.jsPDFDocument.lastAutoTable||null},t.prototype.getTextWidth=function(e){return this.jsPDFDocument.getTextWidth(e)},t.prototype.getDocument=function(){return this.jsPDFDocument},t.prototype.setPage=function(e){this.jsPDFDocument.setPage(e)},t.prototype.addPage=function(){return this.jsPDFDocument.addPage()},t.prototype.getFontList=function(){return this.jsPDFDocument.getFontList()},t.prototype.getGlobalOptions=function(){return h2||{}},t.prototype.getDocumentOptions=function(){return this.jsPDFDocument.__autoTableDocumentDefaults||{}},t.prototype.pageSize=function(){var e=this.jsPDFDocument.internal.pageSize;return e.width==null&&(e={width:e.getWidth(),height:e.getHeight()}),e},t.prototype.scaleFactor=function(){return this.jsPDFDocument.internal.scaleFactor},t.prototype.getLineHeightFactor=function(){var e=this.jsPDFDocument;return e.getLineHeightFactor?e.getLineHeightFactor():1.15},t.prototype.getLineHeight=function(e){return e/this.scaleFactor()*this.getLineHeightFactor()},t.prototype.pageNumber=function(){var e=this.jsPDFDocument.internal.getCurrentPageInfo();return e?e.pageNumber:this.jsPDFDocument.internal.getNumberOfPages()},t})(),vy=function(t,e){return vy=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},vy(t,e)};function gS(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");vy(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}var mS=(function(t){gS(e,t);function e(n){var i=t.call(this)||this;return i._element=n,i}return e})(Array);function QR(t){return{font:"helvetica",fontStyle:"normal",overflow:"linebreak",fillColor:!1,textColor:20,halign:"left",valign:"top",fontSize:10,cellPadding:5/t,lineColor:200,lineWidth:0,cellWidth:"auto",minCellHeight:0,minCellWidth:0}}function $R(t){var e={striped:{table:{fillColor:255,textColor:80,fontStyle:"normal"},head:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},body:{},foot:{textColor:255,fillColor:[41,128,185],fontStyle:"bold"},alternateRow:{fillColor:245}},grid:{table:{fillColor:255,textColor:80,fontStyle:"normal",lineWidth:.1},head:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},body:{},foot:{textColor:255,fillColor:[26,188,156],fontStyle:"bold",lineWidth:0},alternateRow:{}},plain:{head:{fontStyle:"bold"},foot:{fontStyle:"bold"}}};return e[t]}function Hp(t,e,n){n.applyStyles(e,!0);var i=Array.isArray(t)?t:[t],r=i.map(function(a){return n.getTextWidth(a)}).reduce(function(a,l){return Math.max(a,l)},0);return r}function vS(t,e,n,i){var r=e.settings.tableLineWidth,a=e.settings.tableLineColor;t.applyStyles({lineWidth:r,lineColor:a});var l=yS(r,!1);l&&t.rect(n.x,n.y,e.getWidth(t.pageSize().width),i.y-n.y,l)}function yS(t,e){var n=t>0,i=e||e===0;return n&&i?"DF":n?"S":i?"F":null}function bg(t,e){var n,i,r,a;if(t=t||e,Array.isArray(t)){if(t.length>=4)return{top:t[0],right:t[1],bottom:t[2],left:t[3]};if(t.length===3)return{top:t[0],right:t[1],bottom:t[2],left:t[1]};if(t.length===2)return{top:t[0],right:t[1],bottom:t[0],left:t[1]};t.length===1?t=t[0]:t=e}return typeof t=="object"?(typeof t.vertical=="number"&&(t.top=t.vertical,t.bottom=t.vertical),typeof t.horizontal=="number"&&(t.right=t.horizontal,t.left=t.horizontal),{left:(n=t.left)!==null&&n!==void 0?n:e,top:(i=t.top)!==null&&i!==void 0?i:e,right:(r=t.right)!==null&&r!==void 0?r:e,bottom:(a=t.bottom)!==null&&a!==void 0?a:e}):(typeof t!="number"&&(t=e),{top:t,right:t,bottom:t,left:t})}function xS(t,e){var n=bg(e.settings.margin,0);return t.pageSize().width-(n.left+n.right)}function JR(t,e,n,i,r){var a={},l=1.3333333333333333,d=Ev(e,function(B){return r.getComputedStyle(B).backgroundColor});d!=null&&(a.fillColor=d);var p=Ev(e,function(B){return r.getComputedStyle(B).color});p!=null&&(a.textColor=p);var g=t6(i,n);g&&(a.cellPadding=g);var m="borderTopColor",_=l*n,A=i.borderTopWidth;if(i.borderBottomWidth===A&&i.borderRightWidth===A&&i.borderLeftWidth===A){var x=(parseFloat(A)||0)/_;x&&(a.lineWidth=x)}else a.lineWidth={top:(parseFloat(i.borderTopWidth)||0)/_,right:(parseFloat(i.borderRightWidth)||0)/_,bottom:(parseFloat(i.borderBottomWidth)||0)/_,left:(parseFloat(i.borderLeftWidth)||0)/_},a.lineWidth.top||(a.lineWidth.right?m="borderRightColor":a.lineWidth.bottom?m="borderBottomColor":a.lineWidth.left&&(m="borderLeftColor"));var R=Ev(e,function(B){return r.getComputedStyle(B)[m]});R!=null&&(a.lineColor=R);var M=["left","right","center","justify"];M.indexOf(i.textAlign)!==-1&&(a.halign=i.textAlign),M=["middle","bottom","top"],M.indexOf(i.verticalAlign)!==-1&&(a.valign=i.verticalAlign);var k=parseInt(i.fontSize||"");isNaN(k)||(a.fontSize=k/l);var I=e6(i);I&&(a.fontStyle=I);var Y=(i.fontFamily||"").toLowerCase();return t.indexOf(Y)!==-1&&(a.font=Y),a}function e6(t){var e="";return(t.fontWeight==="bold"||t.fontWeight==="bolder"||parseInt(t.fontWeight)>=700)&&(e="bold"),(t.fontStyle==="italic"||t.fontStyle==="oblique")&&(e+="italic"),e}function Ev(t,e){var n=bS(t,e);if(!n)return null;var i=n.match(/^rgba?\((\d+),\s*(\d+),\s*(\d+)(?:,\s*(\d*\.?\d*))?\)$/);if(!i||!Array.isArray(i))return null;var r=[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])],a=parseInt(i[4]);return a===0||isNaN(r[0])||isNaN(r[1])||isNaN(r[2])?null:r}function bS(t,e){var n=e(t);return n==="rgba(0, 0, 0, 0)"||n==="transparent"||n==="initial"||n==="inherit"?t.parentElement==null?null:bS(t.parentElement,e):n}function t6(t,e){var n=[t.paddingTop,t.paddingRight,t.paddingBottom,t.paddingLeft],i=96/(72/e),r=(parseInt(t.lineHeight)-parseInt(t.fontSize))/e/2,a=n.map(function(d){return parseInt(d||"0")/i}),l=bg(a,0);return r>l.top&&(l.top=r),r>l.bottom&&(l.bottom=r),l}function _S(t,e,n,i,r){var a,l;i===void 0&&(i=!1),r===void 0&&(r=!1);var d;typeof e=="string"?d=n.document.querySelector(e):d=e;var p=Object.keys(t.getFontList()),g=t.scaleFactor(),m=[],_=[],A=[];if(!d)return console.error("Html table could not be found with input: ",e),{head:m,body:_,foot:A};for(var x=0;x<d.rows.length;x++){var R=d.rows[x],M=(l=(a=R?.parentElement)===null||a===void 0?void 0:a.tagName)===null||l===void 0?void 0:l.toLowerCase(),k=n6(p,g,n,R,i,r);k&&(M==="thead"?m.push(k):M==="tfoot"?A.push(k):_.push(k))}return{head:m,body:_,foot:A}}function n6(t,e,n,i,r,a){for(var l=new mS(i),d=0;d<i.cells.length;d++){var p=i.cells[d],g=n.getComputedStyle(p);if(r||g.display!=="none"){var m=void 0;a&&(m=JR(t,p,e,g,n)),l.push({rowSpan:p.rowSpan,colSpan:p.colSpan,styles:m,_element:p,content:i6(p)})}}var _=n.getComputedStyle(i);if(l.length>0&&(r||_.display!=="none"))return l}function i6(t){var e=t.cloneNode(!0);return e.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/ +/g," "),e.innerHTML=e.innerHTML.split(/<br.*?>/).map(function(n){return n.trim()}).join(`
`),e.innerText||e.textContent||""}function r6(t,e,n){for(var i=0,r=[t,e,n];i<r.length;i++){var a=r[i];a&&typeof a!="object"&&console.error("The options parameter should be of type object, is: "+typeof a),a.startY&&typeof a.startY!="number"&&(console.error("Invalid value for startY option",a.startY),delete a.startY)}}function mc(t,e,n,i,r){if(t==null)throw new TypeError("Cannot convert undefined or null to object");for(var a=Object(t),l=1;l<arguments.length;l++){var d=arguments[l];if(d!=null)for(var p in d)Object.prototype.hasOwnProperty.call(d,p)&&(a[p]=d[p])}return a}function wS(t,e){var n=new Cd(t),i=n.getDocumentOptions(),r=n.getGlobalOptions();r6(r,i,e);var a=mc({},r,i,e),l;typeof window<"u"&&(l=window);var d=a6(r,i,e),p=o6(r,i,e),g=s6(n,a),m=c6(n,a,l);return{id:e.tableId,content:m,hooks:p,styles:d,settings:g}}function a6(t,e,n){for(var i={styles:{},headStyles:{},bodyStyles:{},footStyles:{},alternateRowStyles:{},columnStyles:{}},r=function(p){if(p==="columnStyles"){var g=t[p],m=e[p],_=n[p];i.columnStyles=mc({},g,m,_)}else{var A=[t,e,n],x=A.map(function(R){return R[p]||{}});i[p]=mc({},x[0],x[1],x[2])}},a=0,l=Object.keys(i);a<l.length;a++){var d=l[a];r(d)}return i}function o6(t,e,n){for(var i=[t,e,n],r={didParseCell:[],willDrawCell:[],didDrawCell:[],willDrawPage:[],didDrawPage:[]},a=0,l=i;a<l.length;a++){var d=l[a];d.didParseCell&&r.didParseCell.push(d.didParseCell),d.willDrawCell&&r.willDrawCell.push(d.willDrawCell),d.didDrawCell&&r.didDrawCell.push(d.didDrawCell),d.willDrawPage&&r.willDrawPage.push(d.willDrawPage),d.didDrawPage&&r.didDrawPage.push(d.didDrawPage)}return r}function s6(t,e){var n,i,r,a,l,d,p,g,m,_,A,x,R=bg(e.margin,40/t.scaleFactor()),M=(n=l6(t,e.startY))!==null&&n!==void 0?n:R.top,k;e.showFoot===!0?k="everyPage":e.showFoot===!1?k="never":k=(i=e.showFoot)!==null&&i!==void 0?i:"everyPage";var I;e.showHead===!0?I="everyPage":e.showHead===!1?I="never":I=(r=e.showHead)!==null&&r!==void 0?r:"everyPage";var Y=(a=e.useCss)!==null&&a!==void 0?a:!1,B=e.theme||(Y?"plain":"striped"),V=!!e.horizontalPageBreak,ee=(l=e.horizontalPageBreakRepeat)!==null&&l!==void 0?l:null;return{includeHiddenHtml:(d=e.includeHiddenHtml)!==null&&d!==void 0?d:!1,useCss:Y,theme:B,startY:M,margin:R,pageBreak:(p=e.pageBreak)!==null&&p!==void 0?p:"auto",rowPageBreak:(g=e.rowPageBreak)!==null&&g!==void 0?g:"auto",tableWidth:(m=e.tableWidth)!==null&&m!==void 0?m:"auto",showHead:I,showFoot:k,tableLineWidth:(_=e.tableLineWidth)!==null&&_!==void 0?_:0,tableLineColor:(A=e.tableLineColor)!==null&&A!==void 0?A:200,horizontalPageBreak:V,horizontalPageBreakRepeat:ee,horizontalPageBreakBehaviour:(x=e.horizontalPageBreakBehaviour)!==null&&x!==void 0?x:"afterAllRows"}}function l6(t,e){var n=t.getLastAutoTable(),i=t.scaleFactor(),r=t.pageNumber(),a=!1;if(n&&n.startPageNumber){var l=n.startPageNumber+n.pageNumber-1;a=l===r}return typeof e=="number"?e:(e==null||e===!1)&&a&&n?.finalY!=null?n.finalY+20/i:null}function c6(t,e,n){var i=e.head||[],r=e.body||[],a=e.foot||[];if(e.html){var l=e.includeHiddenHtml;if(n){var d=_S(t,e.html,n,l,e.useCss)||{};i=d.head||i,r=d.body||i,a=d.foot||i}else console.error("Cannot parse html in non browser environment")}var p=e.columns||u6(i,r,a);return{columns:p,head:i,body:r,foot:a}}function u6(t,e,n){var i=t[0]||e[0]||n[0]||[],r=[];return Object.keys(i).filter(function(a){return a!=="_element"}).forEach(function(a){var l=1,d;Array.isArray(i)?d=i[parseInt(a)]:d=i[a],typeof d=="object"&&!Array.isArray(d)&&(l=d?.colSpan||1);for(var p=0;p<l;p++){var g=void 0;Array.isArray(i)?g=r.length:g=a+(p>0?"_".concat(p):"");var m={dataKey:g};r.push(m)}}),r}var yy=(function(){function t(e,n,i){this.table=n,this.pageNumber=n.pageNumber,this.settings=n.settings,this.cursor=i,this.doc=e.getDocument()}return t})(),d6=(function(t){gS(e,t);function e(n,i,r,a,l,d){var p=t.call(this,n,i,d)||this;return p.cell=r,p.row=a,p.column=l,p.section=a.section,p}return e})(yy),f6=(function(){function t(e,n){this.pageNumber=1,this.id=e.id,this.settings=e.settings,this.styles=e.styles,this.hooks=e.hooks,this.columns=n.columns,this.head=n.head,this.body=n.body,this.foot=n.foot}return t.prototype.getHeadHeight=function(e){return this.head.reduce(function(n,i){return n+i.getMaxCellHeight(e)},0)},t.prototype.getFootHeight=function(e){return this.foot.reduce(function(n,i){return n+i.getMaxCellHeight(e)},0)},t.prototype.allRows=function(){return this.head.concat(this.body).concat(this.foot)},t.prototype.callCellHooks=function(e,n,i,r,a,l){for(var d=0,p=n;d<p.length;d++){var g=p[d],m=new d6(e,this,i,r,a,l),_=g(m)===!1;if(i.text=Array.isArray(i.text)?i.text:[i.text],_)return!1}return!0},t.prototype.callEndPageHooks=function(e,n){e.applyStyles(e.userStyles);for(var i=0,r=this.hooks.didDrawPage;i<r.length;i++){var a=r[i];a(new yy(e,this,n))}},t.prototype.callWillDrawPageHooks=function(e,n){for(var i=0,r=this.hooks.willDrawPage;i<r.length;i++){var a=r[i];a(new yy(e,this,n))}},t.prototype.getWidth=function(e){if(typeof this.settings.tableWidth=="number")return this.settings.tableWidth;if(this.settings.tableWidth==="wrap"){var n=this.columns.reduce(function(r,a){return r+a.wrappedWidth},0);return n}else{var i=this.settings.margin;return e-i.left-i.right}},t})(),SS=(function(){function t(e,n,i,r,a){a===void 0&&(a=!1),this.height=0,this.raw=e,e instanceof mS&&(this.raw=e._element,this.element=e._element),this.index=n,this.section=i,this.cells=r,this.spansMultiplePages=a}return t.prototype.getMaxCellHeight=function(e){var n=this;return e.reduce(function(i,r){var a;return Math.max(i,((a=n.cells[r.index])===null||a===void 0?void 0:a.height)||0)},0)},t.prototype.hasRowSpan=function(e){var n=this;return e.filter(function(i){var r=n.cells[i.index];return r?r.rowSpan>1:!1}).length>0},t.prototype.canEntireRowFit=function(e,n){return this.getMaxCellHeight(n)<=e},t.prototype.getMinimumRowHeight=function(e,n){var i=this;return e.reduce(function(r,a){var l=i.cells[a.index];if(!l)return 0;var d=n.getLineHeight(l.styles.fontSize),p=l.padding("vertical"),g=p+d;return g>r?g:r},0)},t})(),CS=(function(){function t(e,n,i){var r;this.contentHeight=0,this.contentWidth=0,this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.height=0,this.x=0,this.y=0,this.styles=n,this.section=i,this.raw=e;var a=e;e!=null&&typeof e=="object"&&!Array.isArray(e)?(this.rowSpan=e.rowSpan||1,this.colSpan=e.colSpan||1,a=(r=e.content)!==null&&r!==void 0?r:e,e._element&&(this.raw=e._element)):(this.rowSpan=1,this.colSpan=1);var l=a!=null?""+a:"",d=/\r\n|\r|\n/g;this.text=l.split(d)}return t.prototype.getTextPos=function(){var e;if(this.styles.valign==="top")e=this.y+this.padding("top");else if(this.styles.valign==="bottom")e=this.y+this.height-this.padding("bottom");else{var n=this.height-this.padding("vertical");e=this.y+n/2+this.padding("top")}var i;if(this.styles.halign==="right")i=this.x+this.width-this.padding("right");else if(this.styles.halign==="center"){var r=this.width-this.padding("horizontal");i=this.x+r/2+this.padding("left")}else i=this.x+this.padding("left");return{x:i,y:e}},t.prototype.getContentHeight=function(e,n){n===void 0&&(n=1.15);var i=Array.isArray(this.text)?this.text.length:1,r=this.styles.fontSize/e*n,a=i*r+this.padding("vertical");return Math.max(a,this.styles.minCellHeight)},t.prototype.padding=function(e){var n=bg(this.styles.cellPadding,0);return e==="vertical"?n.top+n.bottom:e==="horizontal"?n.left+n.right:n[e]},t})(),h6=(function(){function t(e,n,i){this.wrappedWidth=0,this.minReadableWidth=0,this.minWidth=0,this.width=0,this.dataKey=e,this.raw=n,this.index=i}return t.prototype.getMaxCustomCellWidth=function(e){for(var n=0,i=0,r=e.allRows();i<r.length;i++){var a=r[i],l=a.cells[this.index];l&&typeof l.styles.cellWidth=="number"&&(n=Math.max(n,l.styles.cellWidth))}return n},t})();function p6(t,e){g6(t,e);var n=[],i=0;e.columns.forEach(function(a){var l=a.getMaxCustomCellWidth(e);l?a.width=l:(a.width=a.wrappedWidth,n.push(a)),i+=a.width});var r=e.getWidth(t.pageSize().width)-i;r&&(r=xy(n,r,function(a){return Math.max(a.minReadableWidth,a.minWidth)})),r&&(r=xy(n,r,function(a){return a.minWidth})),r=Math.abs(r),!e.settings.horizontalPageBreak&&r>.1/t.scaleFactor()&&(r=r<1?r:Math.round(r),console.log("Of the table content, ".concat(r," units width could not fit page"))),v6(e),y6(e,t),m6(e)}function g6(t,e){var n=t.scaleFactor(),i=e.settings.horizontalPageBreak,r=xS(t,e);e.allRows().forEach(function(a){for(var l=0,d=e.columns;l<d.length;l++){var p=d[l],g=a.cells[p.index];if(g){var m=e.hooks.didParseCell;e.callCellHooks(t,m,g,a,p,null);var _=g.padding("horizontal");g.contentWidth=Hp(g.text,g.styles,t)+_;var A=Hp(g.text.join(" ").split(/[^\S\u00A0]+/),g.styles,t);if(g.minReadableWidth=A+g.padding("horizontal"),typeof g.styles.cellWidth=="number")g.minWidth=g.styles.cellWidth,g.wrappedWidth=g.styles.cellWidth;else if(g.styles.cellWidth==="wrap"||i===!0)g.contentWidth>r?(g.minWidth=r,g.wrappedWidth=r):(g.minWidth=g.contentWidth,g.wrappedWidth=g.contentWidth);else{var x=10/n;g.minWidth=g.styles.minCellWidth||x,g.wrappedWidth=g.contentWidth,g.minWidth>g.wrappedWidth&&(g.wrappedWidth=g.minWidth)}}}}),e.allRows().forEach(function(a){for(var l=0,d=e.columns;l<d.length;l++){var p=d[l],g=a.cells[p.index];if(g&&g.colSpan===1)p.wrappedWidth=Math.max(p.wrappedWidth,g.wrappedWidth),p.minWidth=Math.max(p.minWidth,g.minWidth),p.minReadableWidth=Math.max(p.minReadableWidth,g.minReadableWidth);else{var m=e.styles.columnStyles[p.dataKey]||e.styles.columnStyles[p.index]||{},_=m.cellWidth||m.minCellWidth;_&&typeof _=="number"&&(p.minWidth=_,p.wrappedWidth=_)}g&&(g.colSpan>1&&!p.minWidth&&(p.minWidth=g.minWidth),g.colSpan>1&&!p.wrappedWidth&&(p.wrappedWidth=g.minWidth))}})}function xy(t,e,n){for(var i=e,r=t.reduce(function(x,R){return x+R.wrappedWidth},0),a=0;a<t.length;a++){var l=t[a],d=l.wrappedWidth/r,p=i*d,g=l.width+p,m=n(l),_=g<m?m:g;e-=_-l.width,l.width=_}if(e=Math.round(e*1e10)/1e10,e){var A=t.filter(function(x){return e<0?x.width>n(x):!0});A.length&&(e=xy(A,e,n))}return e}function m6(t){for(var e={},n=1,i=t.allRows(),r=0;r<i.length;r++)for(var a=i[r],l=0,d=t.columns;l<d.length;l++){var p=d[l],g=e[p.index];if(n>1)n--,delete a.cells[p.index];else if(g)g.cell.height+=a.height,n=g.cell.colSpan,delete a.cells[p.index],g.left--,g.left<=1&&delete e[p.index];else{var m=a.cells[p.index];if(!m)continue;if(m.height=a.height,m.rowSpan>1){var _=i.length-r,A=m.rowSpan>_?_:m.rowSpan;e[p.index]={cell:m,left:A,row:a}}}}}function v6(t){for(var e=t.allRows(),n=0;n<e.length;n++)for(var i=e[n],r=null,a=0,l=0,d=0;d<t.columns.length;d++){var p=t.columns[d];if(l-=1,l>1&&t.columns[d+1])a+=p.width,delete i.cells[p.index];else if(r){var g=r;delete i.cells[p.index],r=null,g.width=p.width+a}else{var g=i.cells[p.index];if(!g)continue;if(l=g.colSpan,a=0,g.colSpan>1){r=g,a+=p.width;continue}g.width=p.width+a}}}function y6(t,e){for(var n={count:0,height:0},i=0,r=t.allRows();i<r.length;i++){for(var a=r[i],l=0,d=t.columns;l<d.length;l++){var p=d[l],g=a.cells[p.index];if(g){e.applyStyles(g.styles,!0);var m=g.width-g.padding("horizontal");if(g.styles.overflow==="linebreak")g.text=e.splitTextToSize(g.text,m+1/e.scaleFactor(),{fontSize:g.styles.fontSize});else if(g.styles.overflow==="ellipsize")g.text=p2(g.text,m,g.styles,e,"...");else if(g.styles.overflow==="hidden")g.text=p2(g.text,m,g.styles,e,"");else if(typeof g.styles.overflow=="function"){var _=g.styles.overflow(g.text,m);typeof _=="string"?g.text=[_]:g.text=_}g.contentHeight=g.getContentHeight(e.scaleFactor(),e.getLineHeightFactor());var A=g.contentHeight/g.rowSpan;g.rowSpan>1&&n.count*n.height<A*g.rowSpan?n={height:A,count:g.rowSpan}:n&&n.count>0&&n.height>A&&(A=n.height),A>a.height&&(a.height=A)}}n.count--}}function p2(t,e,n,i,r){return t.map(function(a){return x6(a,e,n,i,r)})}function x6(t,e,n,i,r){var a=1e4*i.scaleFactor();if(e=Math.ceil(e*a)/a,e>=Hp(t,n,i))return t;for(;e<Hp(t+r,n,i)&&!(t.length<=1);)t=t.substring(0,t.length-1);return t.trim()+r}function ES(t,e){var n=new Cd(t),i=b6(e,n.scaleFactor()),r=new f6(e,i);return p6(n,r),n.applyStyles(n.userStyles),r}function b6(t,e){var n=t.content,i=w6(n.columns);if(n.head.length===0){var r=g2(i,"head");r&&n.head.push(r)}if(n.foot.length===0){var r=g2(i,"foot");r&&n.foot.push(r)}var a=t.settings.theme,l=t.styles;return{columns:i,head:Av("head",n.head,i,l,a,e),body:Av("body",n.body,i,l,a,e),foot:Av("foot",n.foot,i,l,a,e)}}function Av(t,e,n,i,r,a){var l={},d=e.map(function(p,g){for(var m=0,_={},A=0,x=0,R=0,M=n;R<M.length;R++){var k=M[R];if(l[k.index]==null||l[k.index].left===0)if(x===0){var I=void 0;Array.isArray(p)?I=p[k.index-A-m]:I=p[k.dataKey];var Y={};typeof I=="object"&&!Array.isArray(I)&&(Y=I?.styles||{});var B=S6(t,k,g,r,i,a,Y),V=new CS(I,B,t);_[k.dataKey]=V,_[k.index]=V,x=V.colSpan-1,l[k.index]={left:V.rowSpan-1,times:x}}else x--,A++;else l[k.index].left--,x=l[k.index].times,m++}return new SS(p,g,t,_)});return d}function g2(t,e){var n={};return t.forEach(function(i){if(i.raw!=null){var r=_6(e,i.raw);r!=null&&(n[i.dataKey]=r)}}),Object.keys(n).length>0?n:null}function _6(t,e){if(t==="head"){if(typeof e=="object")return e.header||null;if(typeof e=="string"||typeof e=="number")return e}else if(t==="foot"&&typeof e=="object")return e.footer;return null}function w6(t){return t.map(function(e,n){var i,r;return typeof e=="object"?r=(i=e.dataKey)!==null&&i!==void 0?i:n:r=n,new h6(r,e,n)})}function S6(t,e,n,i,r,a,l){var d=$R(i),p;t==="head"?p=r.headStyles:t==="body"?p=r.bodyStyles:t==="foot"&&(p=r.footStyles);var g=mc({},d.table,d[t],r.styles,p),m=r.columnStyles[e.dataKey]||r.columnStyles[e.index]||{},_=t==="body"?m:{},A=t==="body"&&n%2===0?mc({},d.alternateRow,r.alternateRowStyles):{},x=QR(a),R=mc({},x,g,A,_);return mc(R,l)}function C6(t,e,n){var i;n===void 0&&(n={});var r=xS(t,e),a=new Map,l=[],d=[],p=[];Array.isArray(e.settings.horizontalPageBreakRepeat)?p=e.settings.horizontalPageBreakRepeat:(typeof e.settings.horizontalPageBreakRepeat=="string"||typeof e.settings.horizontalPageBreakRepeat=="number")&&(p=[e.settings.horizontalPageBreakRepeat]),p.forEach(function(A){var x=e.columns.find(function(R){return R.dataKey===A||R.index===A});x&&!a.has(x.index)&&(a.set(x.index,!0),l.push(x.index),d.push(e.columns[x.index]),r-=x.wrappedWidth)});for(var g=!0,m=(i=n?.start)!==null&&i!==void 0?i:0;m<e.columns.length;){if(a.has(m)){m++;continue}var _=e.columns[m].wrappedWidth;if(g||r>=_)g=!1,l.push(m),d.push(e.columns[m]),r-=_;else break;m++}return{colIndexes:l,columns:d,lastIndex:m-1}}function E6(t,e){for(var n=[],i=0;i<e.columns.length;i++){var r=C6(t,e,{start:i});r.columns.length&&(n.push(r),i=r.lastIndex)}return n}function AS(t,e){var n=e.settings,i=n.startY,r=n.margin,a={x:r.left,y:i},l=e.getHeadHeight(e.columns)+e.getFootHeight(e.columns),d=i+r.bottom+l;if(n.pageBreak==="avoid"){var p=e.body,g=p.reduce(function(A,x){return A+x.height},0);d+=g}var m=new Cd(t);(n.pageBreak==="always"||n.startY!=null&&d>m.pageSize().height)&&(TS(m),a.y=r.top),e.callWillDrawPageHooks(m,a);var _=mc({},a);e.startPageNumber=m.pageNumber(),n.horizontalPageBreak?A6(m,e,_,a):(m.applyStyles(m.userStyles),(n.showHead==="firstPage"||n.showHead==="everyPage")&&e.head.forEach(function(A){return wc(m,e,A,a,e.columns)}),m.applyStyles(m.userStyles),e.body.forEach(function(A,x){var R=x===e.body.length-1;qp(m,e,A,R,_,a,e.columns)}),m.applyStyles(m.userStyles),(n.showFoot==="lastPage"||n.showFoot==="everyPage")&&e.foot.forEach(function(A){return wc(m,e,A,a,e.columns)})),vS(m,e,_,a),e.callEndPageHooks(m,a),e.finalY=a.y,t.lastAutoTable=e,m.applyStyles(m.userStyles)}function A6(t,e,n,i){var r=E6(t,e),a=e.settings;if(a.horizontalPageBreakBehaviour==="afterAllRows")r.forEach(function(g,m){t.applyStyles(t.userStyles),m>0?kf(t,e,n,i,g.columns,!0):m2(t,e,i,g.columns),L6(t,e,n,i,g.columns),Lv(t,e,i,g.columns)});else for(var l=-1,d=r[0],p=function(){var g=l;if(d){t.applyStyles(t.userStyles);var m=d.columns;l>=0?kf(t,e,n,i,m,!0):m2(t,e,i,m),g=v2(t,e,l+1,i,m),Lv(t,e,i,m)}var _=g-l;r.slice(1).forEach(function(A){t.applyStyles(t.userStyles),kf(t,e,n,i,A.columns,!0),v2(t,e,l+1,i,A.columns,_),Lv(t,e,i,A.columns)}),l=g};l<e.body.length-1;)p()}function m2(t,e,n,i){var r=e.settings;t.applyStyles(t.userStyles),(r.showHead==="firstPage"||r.showHead==="everyPage")&&e.head.forEach(function(a){return wc(t,e,a,n,i)})}function L6(t,e,n,i,r){t.applyStyles(t.userStyles),e.body.forEach(function(a,l){var d=l===e.body.length-1;qp(t,e,a,d,n,i,r)})}function v2(t,e,n,i,r,a){t.applyStyles(t.userStyles),a=a??e.body.length;var l=Math.min(n+a,e.body.length),d=-1;return e.body.slice(n,l).forEach(function(p,g){var m=n+g===e.body.length-1,_=LS(t,e,m,i);p.canEntireRowFit(_,r)&&(wc(t,e,p,i,r),d=n+g)}),d}function Lv(t,e,n,i){var r=e.settings;t.applyStyles(t.userStyles),(r.showFoot==="lastPage"||r.showFoot==="everyPage")&&e.foot.forEach(function(a){return wc(t,e,a,n,i)})}function T6(t,e,n){var i=n.getLineHeight(t.styles.fontSize),r=t.padding("vertical"),a=Math.floor((e-r)/i);return Math.max(0,a)}function j6(t,e,n,i){var r={};t.spansMultiplePages=!0,t.height=0;for(var a=0,l=0,d=n.columns;l<d.length;l++){var p=d[l],g=t.cells[p.index];if(g){Array.isArray(g.text)||(g.text=[g.text]);var m=new CS(g.raw,g.styles,g.section);m=mc(m,g),m.text=[];var _=T6(g,e,i);g.text.length>_&&(m.text=g.text.splice(_,g.text.length));var A=i.scaleFactor(),x=i.getLineHeightFactor();g.contentHeight=g.getContentHeight(A,x),g.contentHeight>=e&&(g.contentHeight=e,m.styles.minCellHeight-=e),g.contentHeight>t.height&&(t.height=g.contentHeight),m.contentHeight=m.getContentHeight(A,x),m.contentHeight>a&&(a=m.contentHeight),r[p.index]=m}}var R=new SS(t.raw,-1,t.section,r,!0);R.height=a;for(var M=0,k=n.columns;M<k.length;M++){var p=k[M],m=R.cells[p.index];m&&(m.height=R.height);var g=t.cells[p.index];g&&(g.height=t.height)}return R}function k6(t,e,n,i){var r=t.pageSize().height,a=i.settings.margin,l=a.top+a.bottom,d=r-l;e.section==="body"&&(d-=i.getHeadHeight(i.columns)+i.getFootHeight(i.columns));var p=e.getMinimumRowHeight(i.columns,t),g=p<n;if(p>d)return console.log("Will not be able to print row ".concat(e.index," correctly since it's minimum height is larger than page height")),!0;if(!g)return!1;var m=e.hasRowSpan(i.columns),_=e.getMaxCellHeight(i.columns)>d;return _?(m&&console.log("The content of row ".concat(e.index," will not be drawn correctly since drawing rows with a height larger than the page height and has cells with rowspans is not supported.")),!0):!(m||i.settings.rowPageBreak==="avoid")}function qp(t,e,n,i,r,a,l){var d=LS(t,e,i,a);if(n.canEntireRowFit(d,l))wc(t,e,n,a,l);else if(k6(t,n,d,e)){var p=j6(n,d,e,t);wc(t,e,n,a,l),kf(t,e,r,a,l),qp(t,e,p,i,r,a,l)}else kf(t,e,r,a,l),qp(t,e,n,i,r,a,l)}function wc(t,e,n,i,r){i.x=e.settings.margin.left;for(var a=0,l=r;a<l.length;a++){var d=l[a],p=n.cells[d.index];if(!p){i.x+=d.width;continue}t.applyStyles(p.styles),p.x=i.x,p.y=i.y;var g=e.callCellHooks(t,e.hooks.willDrawCell,p,n,d,i);if(g===!1){i.x+=d.width;continue}R6(t,p,i);var m=p.getTextPos();pS(p.text,m.x,m.y,{halign:p.styles.halign,valign:p.styles.valign,maxWidth:Math.ceil(p.width-p.padding("left")-p.padding("right"))},t.getDocument()),e.callCellHooks(t,e.hooks.didDrawCell,p,n,d,i),i.x+=d.width}i.y+=n.height}function R6(t,e,n){var i=e.styles;if(t.getDocument().setFillColor(t.getDocument().getFillColor()),typeof i.lineWidth=="number"){var r=yS(i.lineWidth,i.fillColor);r&&t.rect(e.x,n.y,e.width,e.height,r)}else typeof i.lineWidth=="object"&&(i.fillColor&&t.rect(e.x,n.y,e.width,e.height,"F"),N6(t,e,n,i.lineWidth))}function N6(t,e,n,i){var r,a,l,d;i.top&&(r=n.x,a=n.y,l=n.x+e.width,d=n.y,i.right&&(l+=.5*i.right),i.left&&(r-=.5*i.left),p(i.top,r,a,l,d)),i.bottom&&(r=n.x,a=n.y+e.height,l=n.x+e.width,d=n.y+e.height,i.right&&(l+=.5*i.right),i.left&&(r-=.5*i.left),p(i.bottom,r,a,l,d)),i.left&&(r=n.x,a=n.y,l=n.x,d=n.y+e.height,i.top&&(a-=.5*i.top),i.bottom&&(d+=.5*i.bottom),p(i.left,r,a,l,d)),i.right&&(r=n.x+e.width,a=n.y,l=n.x+e.width,d=n.y+e.height,i.top&&(a-=.5*i.top),i.bottom&&(d+=.5*i.bottom),p(i.right,r,a,l,d));function p(g,m,_,A,x){t.getDocument().setLineWidth(g),t.getDocument().line(m,_,A,x,"S")}}function LS(t,e,n,i){var r=e.settings.margin.bottom,a=e.settings.showFoot;return(a==="everyPage"||a==="lastPage"&&n)&&(r+=e.getFootHeight(e.columns)),t.pageSize().height-i.y-r}function kf(t,e,n,i,r,a){r===void 0&&(r=[]),a===void 0&&(a=!1),t.applyStyles(t.userStyles),e.settings.showFoot==="everyPage"&&!a&&e.foot.forEach(function(d){return wc(t,e,d,i,r)}),e.callEndPageHooks(t,i);var l=e.settings.margin;vS(t,e,n,i),TS(t),e.pageNumber++,i.x=l.left,i.y=l.top,n.y=l.top,e.callWillDrawPageHooks(t,i),e.settings.showHead==="everyPage"&&(e.head.forEach(function(d){return wc(t,e,d,i,r)}),t.applyStyles(t.userStyles))}function TS(t){var e=t.pageNumber();t.setPage(e+1);var n=t.pageNumber();return n===e?(t.addPage(),!0):!1}function D6(t){t.API.autoTable=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var i=e[0],r=wS(this,i),a=ES(this,r);return AS(this,a),this},t.API.lastAutoTable=!1,t.API.autoTableText=function(e,n,i,r){pS(e,n,i,r,this)},t.API.autoTableSetDefaults=function(e){return Cd.setDefaults(e,this),this},t.autoTableSetDefaults=function(e,n){Cd.setDefaults(e,n)},t.API.autoTableHtmlToJson=function(e,n){var i;if(n===void 0&&(n=!1),typeof window>"u")return console.error("Cannot run autoTableHtmlToJson in non browser environment"),null;var r=new Cd(this),a=_S(r,e,window,n,!1),l=a.head,d=a.body,p=((i=l[0])===null||i===void 0?void 0:i.map(function(g){return g.content}))||[];return{columns:p,rows:d,data:d}}}var Tv;function jS(t,e){var n=wS(t,e),i=ES(t,n);AS(t,i)}try{if(typeof window<"u"&&window){var y2=window,x2=y2.jsPDF||((Tv=y2.jspdf)===null||Tv===void 0?void 0:Tv.jsPDF);x2&&D6(x2)}}catch(t){console.error("Could not apply autoTable plugin",t)}const M6=()=>{const{currentFarm:t,fields:e,fetchFields:n}=Pi(),{activities:i,fetchActivitiesByFarm:r,deleteActivity:a,loading:l}=ml(),{showNotification:d,getConfirmation:p}=hr(),{crops:g,fetchCropsByFarm:m}=vl(),{infrastructure:_,fetchInfrastructure:A}=Zl(),[x,R]=de.useState("list"),[M,k]=de.useState(null),[I,Y]=de.useState(!1),[B,V]=de.useState(""),[ee,ue]=de.useState("all"),[_e,fe]=de.useState("all"),[G,me]=de.useState({key:"activity_date",direction:"desc"});de.useEffect(()=>{t?.id&&(r(t.id),n(t.id),m(t.id),A(t.id))},[t?.id]);const Z=ae=>{k(ae),R("edit")},J=async ae=>{const he=p("DELETE_ACTIVITY"),De=he?`${he.title}
----------------------------------
${he.body}`:"Are you sure you want to delete this activity? This will also update associated costs.";if(window.confirm(De))try{const ne=(await a(ae))?.notification?.message||"Activity record deleted successfully.";d(ne,"success")}catch(ze){const ne=ze.response?.data?.notification?.message||"Failed to remove activity record.";d(ne,"error")}},Se=()=>{try{const ae=new mn({orientation:"landscape",unit:"mm",format:"a4"}),he=[187,25,25],De=[0,0,0],ze=[241,245,249];ae.setFillColor(...he),ae.rect(0,0,297,40,"F"),ae.setFillColor(...De),ae.rect(0,0,4,40,"F"),ae.setTextColor(255,255,255),ae.setFontSize(24),ae.setFont("helvetica","bold"),ae.text("FARM JOURNAL",15,22),ae.setFontSize(10),ae.setFont("helvetica","normal"),ae.text("FINANCIAL TRANSACTION JOURNAL | OPERATIONAL RECORD",15,30),ae.setTextColor(255,255,255),ae.setFontSize(9);const ne=new Date().toLocaleDateString();ae.text(`FARM / UNIT: ${t?.name?.toUpperCase()}`,220,18),ae.text(`LEDGER DATE: ${ne}`,220,24),ae.text("STATUS: CERTIFIED FINANCIAL RECORD",220,30);const H=Ye.map(Q=>{let Te=e.find(gt=>gt.id===Q.field_id)?.name||"General Field";if(Q.crop_id){const gt=g.find(mt=>mt.id===Q.crop_id);gt&&(Te+=` >  ${gt.crop_type}`)}else if(Q.infrastructure_id){const gt=_.find(mt=>mt.id===Q.infrastructure_id);gt&&(Te+=` >  ${gt.name}`)}const Le=Q.transaction_type==="income"||Q.activity_type==="harvesting",Re=parseFloat(Q.total_cost||Q.labor_cost||0).toLocaleString();return[new Date(Q.activity_date).toLocaleDateString(),Te.toUpperCase(),(Q.activity_type||"General").replace(/infra_/g,"").replace(/_/g," ").toUpperCase(),Q.description||"No description",Le?"":`${Re}`,Le?`${Re}`:""]}),te=Ye.reduce((Q,xe)=>{const Te=xe.transaction_type==="income"||xe.activity_type==="harvesting";return Q+(Te?0:parseFloat(xe.total_cost||xe.labor_cost||0))},0),ce=Ye.reduce((Q,xe)=>{const Te=xe.transaction_type==="income"||xe.activity_type==="harvesting";return Q+(Te?parseFloat(xe.total_cost||xe.labor_cost||0):0)},0);jS(ae,{startY:50,head:[["DATE","FIELD","OPERATION CATEGORY","DESCRIPTION","DEBIT (EXPENSE)","CREDIT (INCOME)"]],body:[...H,["","","","TOTALS (XAF)",te.toLocaleString(),ce.toLocaleString()]],theme:"striped",headStyles:{fillColor:De,textColor:[255,255,255],fontSize:9,fontStyle:"bold",cellPadding:5},bodyStyles:{fontSize:8,textColor:[40,40,40],cellPadding:4,lineColor:[200,200,200],lineWidth:.1},columnStyles:{4:{halign:"right",fontStyle:"bold"},5:{halign:"right",fontStyle:"bold"}},alternateRowStyles:{fillColor:ze},margin:{top:50,left:15,right:15},didParseCell:Q=>{Q.row.index===H.length&&(Q.cell.styles.fillColor=he,Q.cell.styles.textColor=[255,255,255],Q.cell.styles.fontStyle="bold")},didDrawPage:Q=>{const xe="Page "+ae.internal.getNumberOfPages();ae.setFontSize(8),ae.setTextColor(100,100,100),ae.text(xe,275,200),ae.text(" FARM JOURNAL - PRODUCED BY GLOBAL INTELLIGENCE SYSTEM",15,200)}}),ae.save(`FarmJournal_${t?.name}_${new Date().toISOString().split("T")[0]}.pdf`),d("Farm Journal Exported Successfully.","success")}catch(ae){console.error("Ledger Error:",ae),d("Failed to generate Farm Journal.","error")}},Ee=ae=>{let he="asc";G.key===ae&&G.direction==="asc"&&(he="desc"),me({key:ae,direction:he})},Ye=de.useMemo(()=>{let ae=[...i];return ae=ae.filter(he=>{const De=he.transaction_type==="income"||he.activity_type==="harvesting",ze=ee==="all"||ee==="income"&&De||ee==="expense"&&!De,ne=_e==="all"||_e==="crop"&&he.crop_id||_e==="infra"&&he.infrastructure_id||_e==="general"&&!he.crop_id&&!he.infrastructure_id,H=B.toLowerCase(),te=he.description?.toLowerCase().includes(H);let ce="General Field";if(he.crop_id){const Te=g.find(Le=>Le.id===he.crop_id);ce=Te?Te.crop_type:"Crop Operation"}else if(he.infrastructure_id){const Te=_.find(Le=>Le.id===he.infrastructure_id);ce=Te?Te.name:"Infra Operation"}const Q=ce.toLowerCase().includes(H),xe=he.activity_type.replace("_"," ").toLowerCase().includes(H);return ze&&ne&&(te||Q||xe)}),ae.sort((he,De)=>{let ze,ne;if(G.key==="field"){const H=e.find(ce=>ce.id===he.field_id)?.name||"General Field",te=e.find(ce=>ce.id===De.field_id)?.name||"General Field";ze=H,ne=te}else G.key==="amount"?(ze=parseFloat(he.total_cost||he.labor_cost||0),ne=parseFloat(De.total_cost||De.labor_cost||0)):(ze=he[G.key],ne=De[G.key]);return ze<ne?G.direction==="asc"?-1:1:ze>ne?G.direction==="asc"?1:-1:0}),ae},[i,B,ee,_e,G,g,_]);if(x==="add")return u.jsx(Bf,{onComplete:()=>R("list")});if(x==="edit")return u.jsx(Bf,{initialData:M,onComplete:()=>{k(null),R("list")}});const oe=({column:ae})=>G.key!==ae?u.jsx("span",{style:{opacity:.3,marginLeft:"5px"},children:""}):u.jsx("span",{style:{marginLeft:"5px",color:"#1a365d"},children:G.direction==="asc"?"":""});return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{margin:0,fontSize:"28px",fontWeight:"800",color:"var(--text-primary)"},children:"Farm Journal"}),u.jsxs("p",{style:{margin:"4px 0 0 0",color:"var(--text-secondary)",fontSize:"14px"},children:["Operational logs and financial transactions registry",u.jsx("span",{style:{marginLeft:"10px",fontSize:"10px",backgroundColor:"#e2e8f0",padding:"2px 6px",borderRadius:"4px",fontWeight:"bold"},children:"v1.5.6-SOUTH-DB"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsxs("button",{className:"outline no-print",onClick:Se,style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{children:""})," Export PDF"]}),u.jsx("button",{className:"secondary",onClick:()=>Y(!0),children:"Bulk Log Activities"}),u.jsx("button",{className:"primary",onClick:()=>R("add"),children:"+ Log Journal Entry"})]})]}),u.jsx("style",{children:`
                    @media print {
                        .no-print { display: none !important; }
                        body { background: white !important; }
                        .card { box-shadow: none !important; border: 1px solid #eee !important; }
                        .animate-fade-in { animation: none !important; }
                        table { width: 100% !important; border-collapse: collapse !important; }
                        th, td { border: 1px solid #eee !important; padding: 12px !important; }
                        header, nav, .filter-bar { display: none !important; }
                    }
                `}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(300px, 1.5fr) 1fr 1fr",gap:"16px",marginBottom:"24px",backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.04)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{position:"relative"},children:u.jsx("input",{type:"text",placeholder:"Search operations, descriptions, types...",value:B,onChange:ae=>V(ae.target.value),style:{width:"100%",padding:"12px 16px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none",transition:"border-color 0.2s"}})}),u.jsxs("select",{value:ee,onChange:ae=>ue(ae.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"all",children:"All Transactions"}),u.jsx("option",{value:"income",children:"Income Only"}),u.jsx("option",{value:"expense",children:"Expenses Only"})]}),u.jsxs("select",{value:_e,onChange:ae=>fe(ae.target.value),style:{padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"all",children:"All Categories"}),u.jsx("option",{value:"crop",children:"Crop Operations"}),u.jsx("option",{value:"infra",children:"Infrastructure"}),u.jsx("option",{value:"general",children:"General Field"})]})]}),u.jsxs("div",{className:"card",style:{padding:"0",overflow:"hidden",border:"1px solid var(--border)",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",borderRadius:"12px"},children:[u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",backgroundColor:"white"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",backgroundColor:"#f8fafc",borderBottom:"1px solid var(--border)",color:"var(--text-muted)",fontSize:"12px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:[u.jsxs("th",{onClick:()=>Ee("activity_date"),style:{padding:"16px 24px",cursor:"pointer",userSelect:"none"},children:["DATE ",u.jsx(oe,{column:"activity_date"})]}),u.jsxs("th",{onClick:()=>Ee("field"),style:{padding:"16px 24px",cursor:"pointer",userSelect:"none"},children:["FIELD ",u.jsx(oe,{column:"field"})]}),u.jsxs("th",{onClick:()=>Ee("activity_type"),style:{padding:"16px 24px",cursor:"pointer",userSelect:"none"},children:["OPERATION CATEGORY ",u.jsx(oe,{column:"activity_type"})]}),u.jsx("th",{style:{padding:"16px 24px"},children:"DESCRIPTION"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"right"},children:"DEBIT"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"right"},children:"CREDIT"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"center"},className:"no-print",children:"ACTION"})]})}),u.jsx("tbody",{children:Ye.map(ae=>{let he=e.find(H=>H.id===ae.field_id);if(!he&&ae.infrastructure_id){const H=_.find(te=>te.id===ae.infrastructure_id);H&&H.field_id&&(he=e.find(te=>te.id===H.field_id))}let De=he?.name||"General Field";if(ae.crop_id){const H=g.find(te=>te.id===ae.crop_id);H&&(De+=` >  ${H.crop_type}`)}else if(ae.infrastructure_id){const H=_.find(te=>te.id===ae.infrastructure_id);H&&(De+=` >  ${H.name}`)}const ze=ae.transaction_type==="income"||ae.activity_type==="harvesting",ne=ae.total_cost||ae.labor_cost||0;return u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px",transition:"background 0.2s"},children:[u.jsx("td",{style:{padding:"16px 24px",whiteSpace:"nowrap",fontWeight:"500"},children:new Date(ae.activity_date).toLocaleDateString()}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"600",color:"var(--primary)"},children:De.toUpperCase()}),u.jsx("td",{style:{padding:"16px 24px"},children:u.jsx("span",{style:{color:"var(--text-secondary)",textTransform:"uppercase",fontSize:"12px",fontWeight:"500"},children:(ae.activity_type||"General").replace(/infra_/g,"").replace(/_/g," ")})}),u.jsx("td",{style:{padding:"16px 24px",color:"var(--text-secondary)",maxWidth:"300px",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},children:ae.description}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"right",fontWeight:"700",color:"var(--error)"},children:ze?"":parseFloat(ne).toLocaleString()}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"right",fontWeight:"700",color:"var(--success)"},children:ze?parseFloat(ne).toLocaleString():""}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},className:"no-print",children:u.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[u.jsx("button",{className:"outline",onClick:()=>Z(ae),style:{padding:"6px 12px",fontSize:"11px"},children:"Edit"}),u.jsx("button",{className:"outline",onClick:()=>J(ae.id),style:{padding:"6px 12px",fontSize:"11px",color:"var(--error)",borderColor:"var(--error)"},children:"Delete"})]})})]},ae.id)})})]})}),Ye.length===0&&u.jsxs("div",{style:{textAlign:"center",padding:"60px",color:"var(--text-muted)"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),u.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px",fontWeight:"600"},children:"No matching operations found"}),u.jsx("p",{style:{margin:0,fontSize:"14px"},children:"Adjust your filters or search terms to see more results."})]})]}),u.jsx(lj,{isOpen:I,onClose:()=>Y(!1)})]})},O6=()=>{const{currentFarm:t}=Pi(),{showNotification:e}=hr(),[n,i]=de.useState(!1),r=(l,d,p,g={})=>{const m=new mn,_=m.internal.pageSize.width;m.setFillColor(46,125,50),m.rect(0,0,_,40,"F"),m.setTextColor(255,255,255),m.setFontSize(22),m.setFont("helvetica","bold"),m.text("PRO FARMER INTELLIGENCE",_/2,20,{align:"center"}),m.setFontSize(10),m.setFont("helvetica","normal"),m.text("ADVANCED AGRICULTURAL ANALYTICS",_/2,28,{align:"center"}),m.setTextColor(0,0,0),m.setFontSize(18),m.setFont("helvetica","bold"),m.text(l,14,55),m.setFontSize(10),m.setFont("helvetica","normal"),m.setTextColor(100,100,100),m.text(`Farm Entity: ${t?.name||"Unknown Farm"}`,14,62),m.text(`Report Category: ${p}`,14,67),m.text(`Generated: ${new Date().toLocaleString()}`,14,72),m.setFontSize(12),m.setTextColor(0,0,0),m.setFont("helvetica","bold"),m.text("Executive Summary",14,85),m.setFontSize(10),m.setFont("helvetica","normal"),m.setTextColor(60,60,60);let A="";if(p==="Financial"){const fe=g.items?.reduce((J,Se)=>J+(Se.estimatedCosts||0),0)||0,G=g.items?.reduce((J,Se)=>J+(Se.actualCosts||0),0)||0,me=fe-G,Z=me>=0?"under budget":"over budget";A=`This financial analysis for ${t?.name} covers ${g.items?.length||0} active crop cycles. Total projected investment was ${fe.toLocaleString()} XAF, with actual verified expenditures of ${G.toLocaleString()} XAF. The operation is currently running ${Math.abs(me).toLocaleString()} XAF ${Z}. Capital efficiency remains a key priority.`}else if(p==="Operations"||p==="Compliance"){const fe=g.items?.length||0,G=g.items?.[0]?.activity_type||"General Maintenance";A=`Operational audit indicates ${fe} logged activities. Recent focus has been on ${G}. Field utilization is being optimized relative to labor inputs. No critical compliance incidents were flagged in the current reporting period.`}else A=`This document provides a comprehensive analysis of the ${l.toLowerCase()} for ${t?.name}. Data collected indicates strong operational performance with opportunities for optimization in resource allocation. Real-time metrics suggest a positive trajectory.`;const x=m.splitTextToSize(A,_-28);m.text(x,14,92),m.setFontSize(12),m.setTextColor(0,0,0),m.setFont("helvetica","bold"),m.text("Key Performance Metrics",14,115);let R=[];g.items&&g.items.length>0?p==="Financial"?R=g.items.slice(0,5).map(fe=>({label:fe.crop,value:fe.actualCosts,target:fe.estimatedCosts})):p==="Operations"&&g.summary?R=[{label:"Fields",value:g.summary.fieldCount||0,target:10},{label:"Activities",value:g.summary.activityCount||0,target:50},{label:"Inventory",value:(g.summary.inventoryValue||0)/1e3,target:500}]:R=[{label:"Q1",value:75,target:80},{label:"Q2",value:85,target:80},{label:"Q3",value:65,target:80},{label:"Q4",value:90,target:80}]:R=[{label:"Efficiency",value:85,target:100},{label:"Utilization",value:92,target:100},{label:"Reliability",value:98,target:100}],m.setDrawColor(200,200,200),m.rect(14,120,180,60);const M=20,k=15,I=30,Y=50,B=Math.max(...R.map(fe=>Math.max(fe.value,fe.target||0)))||100;R.forEach((fe,G)=>{const me=fe.value/B*Y,Z=I+G*(M+k);m.setFillColor(46,125,50),m.rect(Z,180-me,M,me,"F"),m.setFontSize(8),m.setTextColor(0,0,0);const J=fe.label.length>8?fe.label.substring(0,8)+"...":fe.label;m.text(J,Z+M/2,186,{align:"center"}),m.setFontSize(7),m.text(Math.round(fe.value).toString(),Z+M/2,180-me-2,{align:"center"})});const V=195;let ee=[["Item","Value","Target","Status"]],ue=[];p==="Financial"&&g.items?(ee=[["Crop / Field","Estimated (XAF)","Actual (XAF)","Variance","Status"]],ue=g.items.map(fe=>[`${fe.crop} (${fe.field})`,fe.estimatedCosts?.toLocaleString(),fe.actualCosts?.toLocaleString(),(fe.estimatedCosts-fe.actualCosts).toLocaleString(),fe.estimatedCosts-fe.actualCosts>=0?"Under Budget":"Over Budget"])):(p==="Operations"||p==="Compliance")&&g.items?(ee=[["Date","Activity","Field","Status"]],ue=g.items.map(fe=>[new Date(fe.activity_date).toLocaleDateString(),fe.activity_type,fe.Field?.name||"-",fe.status])):ue=[["Operational Efficiency","92%","85%","Exceeds"],["Resource Utilization","88%","90%","Within Range"],["Sustainability Score","A-","B+","Optimized"]],jS(m,{startY:V,head:ee,body:ue,theme:"grid",headStyles:{fillColor:[46,125,50]},styles:{fontSize:8}});const _e=m.internal.getNumberOfPages();for(let fe=1;fe<=_e;fe++)m.setPage(fe),m.setFontSize(8),m.setTextColor(150,150,150),m.text(`Page ${fe} of ${_e} - Confidential Property of ${t?.name}`,_/2,m.internal.pageSize.height-10,{align:"center"});m.save(d)},a=async(l,d)=>{if(!t)return e("Please select a farm first","error");i(!0);let p="General Report",g="Operations";d.includes("Investor")?(p="Investor Relations Deck",g="Strategic"):d.includes("Growth")?(p="Capital & Growth Analysis",g="Strategic"):d.includes("Financial")?(p="Comprehensive Financial Report",g="Financial"):d.includes("Budget")?(p="Crop Budget Variance",g="Financial"):d.includes("Risk")?(p="Risk Management Assessment",g="Compliance"):d.includes("Activity")?(p="Field Operations Audit",g="Compliance"):d.includes("Carbon")?(p="Sustainability & Carbon Footprint",g="ESG"):d.includes("Water")?(p="Water Resource Efficiency",g="ESG"):d.includes("Soil")?(p="Soil Health & Agronomy",g="Agronomy"):d.includes("Labor")&&(p="Workforce Efficiency Analysis",g="Operations");try{let m={items:[]};if(g==="Financial"){const _=await zt.get("/reports/crop-budget",{params:{farmId:t.id}});m.items=_.data}else if(g==="Operations"||g==="Compliance"||g==="Agronomy"){const[_,A]=await Promise.all([zt.get("/reports/activity-log",{params:{farmId:t.id}}),zt.get("/reports/farm-summary",{params:{farmId:t.id}})]);m.items=_.data,m.summary=A.data}else{const _=await zt.get("/reports/farm-summary",{params:{farmId:t.id}});m.summary=_.data,m.items=[]}await new Promise(_=>setTimeout(_,500)),r(p,d,g,m),e(`Report ${d} generated successfully.`,"success")}catch(m){console.error("Report generation failed",m),r(p,d,g,{items:[]}),e("Generated report with partial data (Server Check Recommended).","warning")}finally{i(!1)}};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",maxWidth:"1400px",margin:"0 auto"},children:[u.jsxs("div",{style:{marginBottom:"40px",borderBottom:"1px solid var(--border)",paddingBottom:"24px"},children:[u.jsx("h1",{style:{fontSize:"28px",margin:"0 0 8px 0",color:"var(--text-main)",fontWeight:"800"},children:"Executive Reports & Intelligence"}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:["Strategic insights, financial auditing, and operational compliance for ",t?.name||"your enterprise","."]})]}),u.jsxs("div",{style:{marginBottom:"48px"},children:[u.jsxs("h3",{style:{fontSize:"18px",color:"var(--primary)",marginBottom:"16px",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{backgroundColor:"var(--primary)",color:"white",padding:"4px 8px",borderRadius:"4px",fontSize:"12px"},children:"STRATEGIC"}),"Investor Relations"]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[u.jsx(As,{title:"Investors Presentation",desc:"Consolidated pitch deck data including ROI, growth metrics, and market opportunity analysis.",icon:"",onClick:()=>a("/reports/investor-deck?simulation=true",`InvestorPresentation_${t?.name}.pdf`),loading:n,isPrimary:!0}),u.jsx(As,{title:"Growth & Capital Report",desc:"Capital utilization tracking and projected expansion models.",icon:"",onClick:()=>a("/reports/growth?simulation=true",`GrowthReport_${t?.name}.pdf`),loading:n})]})]}),u.jsxs("div",{style:{marginBottom:"48px"},children:[u.jsx("h3",{style:{fontSize:"18px",color:"var(--primary)",marginBottom:"16px"},children:"Financial Intelligence"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[u.jsx(As,{title:"Comprehensive Financial Report",desc:"Full P&L statement, cash flow analysis, and balance sheet.",icon:"",onClick:()=>a("/reports/financials?simulation=true",`FinancialReport_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Crop Budget Analysis",desc:"Detailed breakdown of input costs vs expected harvest revenue per hectare.",icon:"",onClick:()=>a("/reports/crop-budget?simulation=true",`CropBudget_${t?.name}.pdf`),loading:n})]})]}),u.jsxs("div",{style:{marginBottom:"48px"},children:[u.jsx("h3",{style:{fontSize:"18px",color:"var(--primary)",marginBottom:"16px"},children:"Risk & Compliance"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[u.jsx(As,{title:"Risk & Incident Report",desc:"Log of operational risks, safety incidents, and mitigation strategies.",icon:"",onClick:()=>a("/reports/risk?simulation=true",`RiskReport_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Compliance Audit Log",desc:"Complete historical log of all field operations for regulatory compliance.",icon:"",onClick:()=>a("/reports/activity-log?simulation=true",`ActivityLog_${t?.name}.pdf`),loading:n})]})]}),u.jsxs("div",{style:{marginBottom:"48px"},children:[u.jsx("h3",{style:{fontSize:"18px",color:"var(--primary)",marginBottom:"16px"},children:"Sustainability & ESG"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[u.jsx(As,{title:"Carbon Footprint Analysis",desc:"Estimated carbon sequestration vs. emissions based on field activities.",icon:"",onClick:()=>a("/reports/carbon?simulation=true",`CarbonReport_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Water Usage Efficiency",desc:"Irrigation tracking metrics and water sustainability index.",icon:"",onClick:()=>a("/reports/water?simulation=true",`WaterUsage_${t?.name}.pdf`),loading:n})]})]}),u.jsxs("div",{style:{marginBottom:"48px"},children:[u.jsx("h3",{style:{fontSize:"18px",color:"var(--primary)",marginBottom:"16px"},children:"Operations & Agronomy"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[u.jsx(As,{title:"Operations Report",desc:"Detailed breakdown of daily field activities, labor usage, and machinery utilization.",icon:"",onClick:()=>a("/reports/operations?simulation=true",`OperationsReport_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Labor Efficiency",desc:"Workforce productivity analysis (Hours/Ha) and cost-per-activity metrics.",icon:"",onClick:()=>a("/reports/labor?simulation=true",`LaborEfficiency_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Machinery Health Log",desc:"Equipment usage hours, maintenance schedules, and depreciation tracking.",icon:"",onClick:()=>a("/reports/machinery?simulation=true",`MachineryLog_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Soil Health Trends",desc:"Historical NPK levels, pH balance, and organic matter analysis per field.",icon:"",onClick:()=>a("/reports/soil?simulation=true",`SoilHealth_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Weather Impact Report",desc:"Seasonal GDD (Growing Degree Days) and precipitation analysis.",icon:"",onClick:()=>a("/reports/weather?simulation=true",`WeatherImpact_${t?.name}.pdf`),loading:n}),u.jsx(As,{title:"Farm Summary",desc:"General overview of fields, active crops, and current season status.",icon:"",onClick:()=>a("/reports/farm-summary?simulation=true",`FarmSummary_${t?.name}.pdf`),loading:n})]})]}),u.jsx(P6,{farmId:t?.id})]})},P6=({farmId:t})=>{const[e,n]=ta.useState([]),[i,r]=ta.useState(!1);return ta.useEffect(()=>{t&&(r(!0),zt.get("/reports/crop-budget",{params:{farmId:t}}).then(a=>n(a.data)).catch(a=>console.error(a)).finally(()=>r(!1)))},[t]),t?u.jsxs("div",{className:"card",style:{marginTop:"40px"},children:[u.jsx("div",{className:"card-header",children:u.jsx("h3",{style:{margin:0,fontSize:"18px"},children:"Live Cost Tracking Preview"})}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"1px solid var(--border)",fontSize:"12px",color:"var(--text-muted)"},children:[u.jsx("th",{style:{padding:"16px"},children:"CROP"}),u.jsx("th",{style:{padding:"16px"},children:"FIELD"}),u.jsx("th",{style:{padding:"16px"},children:"ESTIMATED"}),u.jsx("th",{style:{padding:"16px"},children:"ACTUAL"}),u.jsx("th",{style:{padding:"16px"},children:"VARIANCE"}),u.jsx("th",{style:{padding:"16px"},children:"STATUS"})]})}),u.jsxs("tbody",{children:[i?u.jsx("tr",{children:u.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"24px"},children:"Loading analysis..."})}):e.map((a,l)=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"16px",fontWeight:"600"},children:a.crop}),u.jsx("td",{style:{padding:"16px",color:"var(--text-secondary)"},children:a.field}),u.jsx("td",{style:{padding:"16px"},children:a.estimatedCosts?.toLocaleString()}),u.jsx("td",{style:{padding:"16px"},children:a.actualCosts?.toLocaleString()}),u.jsx("td",{style:{padding:"16px",color:a.variance<0?"var(--error)":"var(--success)",fontWeight:"600"},children:a.variance?.toLocaleString()}),u.jsx("td",{style:{padding:"16px"},children:u.jsx("span",{style:{padding:"4px 10px",borderRadius:"20px",fontSize:"11px",fontWeight:"700",backgroundColor:a.variance<0?"rgba(211, 47, 47, 0.1)":"rgba(46, 125, 50, 0.1)",color:a.variance<0?"var(--error)":"var(--success)"},children:a.variance<0?"OVER BUDGET":"ON TRACK"})})]},l)),e.length===0&&!i&&u.jsx("tr",{children:u.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"No live tracking data available."})})]})]})})]}):null},As=({title:t,desc:e,icon:n,onClick:i,loading:r,isPrimary:a})=>u.jsxs("div",{className:"card hover-glow",onClick:r?null:i,style:{padding:"24px",cursor:r?"wait":"pointer",border:a?"1px solid var(--primary)":"1px solid var(--border)",backgroundColor:a?"rgba(46, 125, 50, 0.02)":"white",display:"flex",flexDirection:"column",height:"100%",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{fontSize:"24px",marginBottom:"16px",opacity:r?.5:1},children:n}),u.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"16px",fontWeight:"700",color:"var(--text-main)"},children:t}),u.jsx("p",{style:{margin:"0 0 24px 0",color:"var(--text-muted)",fontSize:"13px",lineHeight:"1.5",flex:1},children:e}),u.jsxs("div",{style:{display:"flex",alignItems:"center",color:"var(--primary)",fontSize:"13px",fontWeight:"600"},children:[r?"Generating...":"Generate Report",!r&&u.jsx("span",{style:{marginLeft:"6px"},children:""})]})]}),I6=$o((t,e)=>({teamMembers:[],loading:!1,fetchTeamMembers:async n=>{t({loading:!0});try{const i=await zt.get(`/farms/${n}/team`);t({teamMembers:i.data,loading:!1})}catch{t({loading:!1})}},inviteUser:async(n,i)=>{try{const r=await zt.post(`/farms/${n}/invite`,i);return t(a=>({teamMembers:[...a.teamMembers,r.data]})),r.data}catch(r){throw r}},updatePermissions:async(n,i)=>{try{const r=await zt.put(`/farm-users/${n}/permissions`,{permissions:i});return t(a=>({teamMembers:a.teamMembers.map(l=>l.id===n?{...l,permissions:r.data.permissions}:l)})),r.data}catch(r){throw r}},removeMember:async n=>{try{await zt.delete(`/farm-users/${n}`),t(i=>({teamMembers:i.teamMembers.filter(r=>r.id!==n)}))}catch(i){throw i}}})),z6=()=>{const{currentFarm:t}=Pi(),{teamMembers:e,fetchTeamMembers:n,inviteUser:i,removeMember:r,loading:a}=I6(),{showNotification:l,showAlert:d,getConfirmation:p}=hr(),[g,m]=de.useState({email:"",role:"employee"}),[_,A]=de.useState(!1);de.useEffect(()=>{t&&n(t.id)},[t,n]);const x=async R=>{R.preventDefault();try{await i(t.id,g),l(`Invitation sent to ${g.email} successfully.`,"success"),m({email:"",role:"employee"}),A(!1)}catch{d("INVITE_FAILURE")}};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Team & Collaborators"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Manage farm access for advisors, managers, and staff."})]}),u.jsx("button",{className:"primary",onClick:()=>A(!0),children:"+ Invite Member"})]}),_&&u.jsx("div",{style:{position:"fixed",inset:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card",style:{width:"400px",margin:0},children:[u.jsx("div",{className:"card-header",children:u.jsx("h3",{style:{margin:0,fontSize:"18px"},children:"Send Invitation"})}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{children:"Email Address"}),u.jsx("input",{type:"email",value:g.email,onChange:R=>m({...g,email:R.target.value}),placeholder:"colleague@email.com",required:!0})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{children:"Assigned Role"}),u.jsxs("select",{value:g.role,onChange:R=>m({...g,role:R.target.value}),children:[u.jsx("option",{value:"manager",children:"Farm Manager"}),u.jsx("option",{value:"advisor",children:"Crop Advisor"}),u.jsx("option",{value:"employee",children:"Field Employee"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:1},children:"Send Invite"}),u.jsx("button",{type:"button",className:"outline",style:{flex:1},onClick:()=>A(!1),children:"Cancel"})]})]})]})}),u.jsx("div",{className:"card",style:{padding:0},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"12px",color:"var(--text-muted)",borderBottom:"2px solid var(--border)"},children:[u.jsx("th",{style:{padding:"16px"},children:"Collaborator"}),u.jsx("th",{style:{padding:"16px"},children:"Role"}),u.jsx("th",{style:{padding:"16px"},children:"Status"}),u.jsx("th",{style:{padding:"16px"},children:"Joined At"}),u.jsx("th",{style:{padding:"16px"},children:"Actions"})]})}),u.jsxs("tbody",{children:[e.map(R=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsxs("td",{style:{padding:"16px"},children:[u.jsxs("div",{style:{fontWeight:"600"},children:[R.user?.first_name," ",R.user?.last_name||R.email]}),u.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)"},children:R.email})]}),u.jsx("td",{style:{padding:"16px"},children:u.jsx("span",{style:{textTransform:"uppercase",fontSize:"11px",fontWeight:"bold",color:"var(--secondary)"},children:R.role})}),u.jsx("td",{style:{padding:"16px"},children:u.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"11px",fontWeight:"bold",backgroundColor:R.status==="accepted"?"#e6f4ea":"#fff8e1",color:R.status==="accepted"?"#1e7e34":"#b78103"},children:R.status?.toUpperCase()||"PENDING"})}),u.jsx("td",{style:{padding:"16px",color:"var(--text-muted)"},children:R.joined_at||""}),u.jsx("td",{style:{padding:"16px"},children:u.jsx("button",{className:"outline",style:{fontSize:"11px",color:"var(--error)",borderColor:"#ffcdd2"},onClick:()=>{const M=p("REVOKE_ACCESS"),k=M?`${M.title}
----------------------------------
${M.body}`:"Revoke access for this collaborator?";window.confirm(k)&&r(R.id)},children:"Revoke Access"})})]},R.id)),e.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"No collaborators yet. Start by inviting your team!"})})]})]})})]})},b2=({cropId:t,onComplete:e,initialData:n})=>{const{createHarvest:i,updateHarvest:r}=Yy(),{showNotification:a}=hr(),l=M=>{if(M==null||M==="")return"";const k=M.toString().split(".");return k[0]=k[0].replace(/\B(?=(\d{3})+(?!\d))/g,","),k.join(".")},d=M=>M.toString().replace(/,/g,""),[p,g]=de.useState({harvest_date:n?.harvest_date||new Date().toISOString().split("T")[0],area_harvested:n?.area_harvested||"",quantity:n?.quantity||"",unit:n?.unit||"kg",yield_per_area:n?.yield_per_area||"",quality_grade:n?.quality_grade||"A",moisture_content:n?.moisture_content||"",storage_location:n?.storage_location||"",destination:n?.destination||"stored",price_per_unit:n?.price_per_unit||"",total_revenue:n?.total_revenue||"",notes:n?.notes||""}),[m,_]=de.useState(!1),A=async M=>{M.preventDefault(),_(!0);try{const k={...p,price_per_unit:d(p.price_per_unit),total_revenue:d(p.total_revenue),quantity:d(p.quantity),area_harvested:d(p.area_harvested)};if(n?.id)await r(n.id,k);else{if(!(t&&/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t))){console.error("[HarvestForm] Submission blocked - Invalid cropId:",t),(await Mr(async()=>{const{default:V}=await Promise.resolve().then(()=>Su);return{default:V}},void 0)).default.getState().showAlert("INVALID_CROP"),_(!1);return}await i(t,k)}e&&e()}catch(k){console.error(k)}finally{_(!1)}},x=()=>{const M=parseFloat(d(p.quantity))||0,k=parseFloat(d(p.area_harvested))||0;if(M&&k&&k!==0){const I=(M/k).toFixed(2);g(Y=>({...Y,yield_per_area:I}))}else g(I=>({...I,yield_per_area:"0"}))},R=()=>{const M=parseFloat(d(p.quantity))||0,k=parseFloat(d(p.price_per_unit))||0;if(M&&k){const I=(M*k).toFixed(2);g(Y=>({...Y,total_revenue:I}))}else g(I=>({...I,total_revenue:"0"}))};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"950px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:"Harvest Operation",subtitle:`CROP ID: ${t||n?.crop_id} | TYPE: YIELD LOGGING`,icon:""}),u.jsxs("form",{onSubmit:A,style:{padding:"40px",backgroundColor:"#fcfcfc"},children:[u.jsxs("div",{style:{backgroundColor:"#000",color:"#fff",padding:"12px 20px",marginBottom:"32px",display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:""}),u.jsx("p",{style:{fontSize:"13px",fontWeight:"600",margin:0,textTransform:"uppercase",letterSpacing:"0.5px"},children:"Harvest data is logged via the operational intelligence ledger for yield auditing."})]}),u.jsxs("div",{style:{marginBottom:"40px"},children:[u.jsx("h3",{style:{fontSize:"14px",fontWeight:"900",color:"#000",textTransform:"uppercase",letterSpacing:"2px",borderBottom:"4px solid #000",paddingBottom:"8px",marginBottom:"24px"},children:"01. Harvest Intelligence"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Harvest Date"}),u.jsx("input",{type:"date",value:p.harvest_date,onChange:M=>g({...p,harvest_date:M.target.value}),required:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Area Harvested (ha)"}),u.jsx("input",{type:"text",value:l(p.area_harvested),onBlur:x,onChange:M=>g({...p,area_harvested:d(M.target.value)}),required:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Total Quantity"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("input",{type:"text",value:l(p.quantity),onBlur:()=>{x(),R()},onChange:M=>g({...p,quantity:d(M.target.value)}),required:!0,style:{flex:1,borderRadius:"0",border:"2px solid #ddd",padding:"12px"}}),u.jsxs("select",{value:p.unit,onChange:M=>g({...p,unit:M.target.value}),style:{width:"100px",borderRadius:"0",border:"2px solid #ddd",padding:"12px",fontWeight:"700"},children:[u.jsx("option",{value:"kg",children:"kg"}),u.jsx("option",{value:"tonnes",children:"t"}),u.jsx("option",{value:"bushels",children:"bu"}),u.jsx("option",{value:"liters",children:"L"}),u.jsx("option",{value:"gallons",children:"gal"}),u.jsx("option",{value:"bins",children:"bins"}),u.jsx("option",{value:"crates",children:"crates"}),u.jsx("option",{value:"units",children:"units"})]})]})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px"},children:[u.jsx("h3",{style:{fontSize:"14px",fontWeight:"900",color:"#000",textTransform:"uppercase",letterSpacing:"2px",borderBottom:"4px solid #bb1919",paddingBottom:"8px",marginBottom:"24px"},children:"02. Quality & Moisture Matrix"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"30px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Yield Rate (Unit/ha)"}),u.jsx("input",{type:"text",value:l(p.yield_per_area),readOnly:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px",backgroundColor:"#f0f2f0",fontWeight:"700"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Quality Grade"}),u.jsxs("select",{value:p.quality_grade,onChange:M=>g({...p,quality_grade:M.target.value}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px",fontWeight:"700"},children:[u.jsx("option",{value:"A",children:"Grade A (Premium)"}),u.jsx("option",{value:"B",children:"Grade B (Standard)"}),u.jsx("option",{value:"C",children:"Grade C (Industrial)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Moisture (%)"}),u.jsx("input",{type:"number",step:"0.1",value:p.moisture_content,onChange:M=>g({...p,moisture_content:M.target.value}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px"},children:[u.jsx("h3",{style:{fontSize:"14px",fontWeight:"900",color:"#000",textTransform:"uppercase",letterSpacing:"2px",borderBottom:"4px solid #000",paddingBottom:"8px",marginBottom:"24px"},children:"03. Distribution & Revenue Ledger"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginBottom:"25px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Storage Location"}),u.jsx("input",{type:"text",placeholder:"Siloh 2, Warehouse B",value:p.storage_location,onChange:M=>g({...p,storage_location:M.target.value}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Destination"}),u.jsxs("select",{value:p.destination,onChange:M=>g({...p,destination:M.target.value}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px",fontWeight:"700"},children:[u.jsx("option",{value:"stored",children:"Standard Storage"}),u.jsx("option",{value:"sold",children:"Direct Sale"}),u.jsx("option",{value:"processed",children:"On-farm Processing"})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Price per Unit (XAF)"}),u.jsx("input",{type:"text",value:l(p.price_per_unit),onBlur:R,onChange:M=>g({...p,price_per_unit:d(M.target.value)}),style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Total Revenue (XAF)"}),u.jsx("input",{type:"text",value:l(p.total_revenue),readOnly:!0,style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"12px",backgroundColor:"#eeeeee",fontWeight:"900"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"40px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"900",textTransform:"uppercase",color:"#555",marginBottom:"8px",display:"block"},children:"Technical Notes"}),u.jsx("textarea",{value:p.notes,onChange:M=>g({...p,notes:M.target.value}),rows:"3",style:{width:"100%",borderRadius:"0",border:"2px solid #ddd",padding:"15px"},placeholder:"Internal yield observations..."})]}),u.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"50px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"20px",borderRadius:"0",backgroundColor:"#000",color:"#fff",fontSize:"14px",fontWeight:"900",border:"none",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},disabled:m,children:m?"SYNCING DATA...":` ${n?"UPDATE":"COMPLETE"} HARVEST RECORD`}),u.jsx("button",{type:"button",onClick:e,className:"outline",style:{flex:1,padding:"20px",borderRadius:"0",backgroundColor:"#fff",color:"#000",border:"2px solid #000",fontSize:"14px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1px",cursor:"pointer"},children:"DISCARD"})]})]})]})},B6=()=>{const{currentFarm:t}=Pi(),{harvests:e,fetchHarvestsByFarm:n,deleteHarvest:i,loading:r}=Yy(),{crops:a,fetchCropsByFarm:l}=vl(),{showNotification:d,showConfirm:p,showAlert:g}=hr(),[m,_]=de.useState("list"),[A,x]=de.useState(""),[R,M]=de.useState(null);de.useEffect(()=>{t&&(n(t.id),l(t.id))},[t,n,l]);const k=B=>{p("DELETE_HARVEST",async()=>{try{const ee=(await i(B))?.notification?.message||"HARVEST RECORD DELETED - ARCHIVE UPDATED";d(ee,"success")}catch(V){const ee=V.response?.data?.notification?.message||"DELETE FAILED: SYSTEM INTEGRITY ERROR";d(ee,"error")}})},I=B=>{M(B),x(B.crop_id),_("edit")},Y=B=>{M(B),_("view-details")};return t?m==="view-details"&&R?u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"800px",margin:"40px auto",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",overflow:"hidden"},children:[u.jsx("div",{style:{backgroundColor:"var(--primary)",padding:"24px 40px",color:"white"},children:u.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"700"},children:"Harvest Intelligence Report"})}),u.jsxs("div",{style:{padding:"40px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"30px",marginBottom:"30px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"700",color:"var(--text-muted)",textTransform:"uppercase"},children:"CROP TYPE"}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"700",color:"var(--primary)"},children:R.Crop?.crop_type})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"700",color:"var(--text-muted)",textTransform:"uppercase"},children:"HARVEST DATE"}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"600"},children:new Date(R.harvest_date).toLocaleDateString()})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"700",color:"var(--text-muted)",textTransform:"uppercase"},children:"QUANTITY COLLECTED"}),u.jsxs("div",{style:{fontSize:"18px",fontWeight:"600"},children:[parseFloat(R.quantity).toLocaleString()," ",R.unit]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"700",color:"var(--text-muted)",textTransform:"uppercase"},children:"TOTAL REVENUE"}),u.jsxs("div",{style:{fontSize:"18px",fontWeight:"700"},children:[parseFloat(R.total_revenue).toLocaleString()," XAF"]})]})]}),u.jsxs("div",{style:{borderTop:"1px solid var(--border)",paddingTop:"20px"},children:[u.jsx("label",{style:{fontSize:"11px",fontWeight:"700",color:"var(--text-muted)",textTransform:"uppercase"},children:"TECHNICAL NOTES"}),u.jsx("p",{style:{fontSize:"14px",lineHeight:"1.6",color:"var(--text-secondary)"},children:R.notes||"No operational notes provided."})]}),u.jsxs("div",{style:{marginTop:"40px",display:"flex",gap:"15px"},children:[u.jsx("button",{className:"primary",onClick:()=>_("edit"),style:{flex:1,padding:"12px",fontWeight:"600"},children:"EDIT RECORD"}),u.jsx("button",{className:"outline",onClick:()=>_("list"),style:{flex:1,padding:"12px",fontWeight:"600"},children:"CLOSE REPORT"})]})]})]}):m==="add"?u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"800px",margin:"40px auto",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",overflow:"hidden"},children:[u.jsx("div",{style:{backgroundColor:"var(--primary)",padding:"24px 40px",color:"white"},children:u.jsx("h1",{style:{margin:0,fontSize:"24px",fontWeight:"700"},children:"Select Harvest Operation"})}),u.jsxs("div",{style:{padding:"40px"},children:[u.jsxs("div",{style:{backgroundColor:"#f0f9ff",color:"#1e3a8a",padding:"16px",marginBottom:"32px",borderRadius:"8px",border:"1px solid #bfdbfe",display:"flex",alignItems:"center",gap:"15px"},children:[u.jsx("span",{style:{fontSize:"20px"},children:""}),u.jsx("p",{style:{fontSize:"13px",fontWeight:"500",margin:0},children:"Identify the active planting or agricultural asset for harvest logging."})]}),u.jsxs("div",{style:{marginBottom:"32px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",textTransform:"uppercase",color:"var(--text-secondary)",marginBottom:"10px",display:"block"},children:"Target Cultivation / Planted Area"}),u.jsxs("select",{value:A,onChange:B=>x(B.target.value),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("option",{value:"",children:"-- ARCHIVE LOOKUP: CHOOSE ACTIVE PLANTING --"}),a.length>0?u.jsx("optgroup",{label:" ACTIVE FIELD PLANTINGS",children:a.map(B=>u.jsxs("option",{value:B.id,children:[B.crop_type," - ",B.variety," (FIELD: ",B.Field?.name||"GENERIC",")"]},B.id))}):u.jsx("option",{disabled:!0,value:"no-plantings",children:" NO ACTIVE PLANTINGS DETECTED - REGISTER CROP FIRST"})]})]}),u.jsxs("div",{style:{display:"flex",gap:"20px"},children:[u.jsx("button",{className:"primary",disabled:!A||A.startsWith("TYPE:")||A==="no-plantings",onClick:()=>{A&&!A.startsWith("TYPE:")?_("add-form"):g("INVALID_CROP")},style:{flex:2,padding:"14px"},children:"Initialize Harvest Ledger"}),u.jsx("button",{className:"outline",onClick:()=>_("list"),style:{flex:1,padding:"14px"},children:"Cancel"})]})]})]}):m==="add-form"?u.jsx(b2,{cropId:A,onComplete:()=>{_("list"),x("")}}):m==="edit"&&R?u.jsx(b2,{initialData:R,onComplete:()=>{_("list"),M(null)}}):u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"1300px",margin:"0 auto",padding:"0 0 40px 0"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px",padding:"0 24px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{margin:0,fontSize:"28px",fontWeight:"800",color:"var(--text-primary)"},children:"Harvest Records"}),u.jsxs("div",{style:{display:"flex",gap:"20px",marginTop:"8px",fontSize:"13px",color:"var(--text-secondary)",fontWeight:"500"},children:[u.jsxs("span",{children:["FARM: ",t?.name]}),u.jsx("span",{style:{opacity:.3},children:"|"}),u.jsx("span",{children:"DEPT: YIELD INTELLIGENCE"})]})]}),u.jsx("button",{className:"primary",onClick:()=>{_("add"),x("")},children:"+ Record New Harvest"})]}),u.jsxs("div",{style:{padding:"0 24px"},children:[u.jsxs("div",{style:{display:"flex",gap:"20px",marginBottom:"32px"},children:[u.jsxs("div",{style:{flex:1,backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"11px",fontWeight:"700",textTransform:"uppercase",color:"var(--text-muted)",marginBottom:"8px"},children:"Total Net Weight"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"var(--text-primary)"},children:[e.reduce((B,V)=>B+parseFloat(V.quantity||0),0).toLocaleString()," ",u.jsx("span",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"KG"})]})]}),u.jsxs("div",{style:{flex:1,backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"11px",fontWeight:"700",textTransform:"uppercase",color:"var(--text-muted)",marginBottom:"8px"},children:"Audit Revenue"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"var(--success)"},children:[e.reduce((B,V)=>B+parseFloat(V.total_revenue||0),0).toLocaleString()," ",u.jsx("span",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"XAF"})]})]}),u.jsxs("div",{style:{flex:1,backgroundColor:"white",padding:"24px",borderRadius:"12px",boxShadow:"0 2px 8px rgba(0,0,0,0.05)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"11px",fontWeight:"700",textTransform:"uppercase",color:"var(--text-muted)",marginBottom:"8px"},children:"Quality Average"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"var(--text-primary)"},children:[e.length>0?(e.reduce((B,V)=>B+parseFloat(V.moisture_content||0),0)/e.length).toFixed(1):0,u.jsx("span",{style:{fontSize:"14px",color:"var(--text-muted)"},children:"% MOISTURE"})]})]})]}),u.jsxs("div",{style:{backgroundColor:"white",borderRadius:"12px",boxShadow:"0 2px 12px rgba(0,0,0,0.05)",border:"1px solid var(--border)",overflow:"hidden"},children:[u.jsx("div",{style:{padding:"16px 24px",borderBottom:"1px solid var(--border)",display:"flex",alignItems:"center",justifyContent:"space-between",backgroundColor:"#f8fafc"},children:u.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--text-primary)"},children:"OPERATIONAL HARVEST LEDGER"})}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid var(--border)"},children:[u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Date"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Crop Intelligence"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Log Quantity"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Grade"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Moist. Index"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Revenue (XAF)"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600",textAlign:"center"},children:"Action"})]})}),u.jsxs("tbody",{children:[e.map(B=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"16px 24px",fontWeight:"500"},children:new Date(B.harvest_date).toLocaleDateString()}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"600",color:"var(--primary)"},children:B.Crop?.crop_type||"Unknown"}),u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"500"},children:[parseFloat(B.quantity||0).toLocaleString()," ",B.unit]}),u.jsx("td",{style:{padding:"16px 24px"},children:u.jsx("span",{style:{padding:"4px 8px",backgroundColor:"#f1f5f9",color:"var(--text-secondary)",borderRadius:"4px",fontSize:"11px",fontWeight:"600",textTransform:"uppercase"},children:B.quality_grade||"N/A"})}),u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"500"},children:[B.moisture_content,"%"]}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"600"},children:parseFloat(B.total_revenue||0).toLocaleString()}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:u.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[u.jsx("button",{className:"outline",onClick:()=>Y(B),style:{padding:"6px 12px",fontSize:"11px"},children:"VIEW"}),u.jsx("button",{className:"outline",onClick:()=>I(B),style:{padding:"6px 12px",fontSize:"11px"},children:"EDIT"}),u.jsx("button",{onClick:()=>k(B.id),style:{border:"1px solid var(--error)",background:"white",color:"var(--error)",padding:"6px 12px",cursor:"pointer",fontSize:"11px",fontWeight:"600",borderRadius:"4px"},children:"DEL"})]})})]},B.id)),e.length===0&&!r&&u.jsx("tr",{children:u.jsxs("td",{colSpan:"7",style:{textAlign:"center",padding:"60px",color:"var(--text-muted)"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:""}),u.jsx("div",{style:{fontSize:"14px",fontWeight:"500"},children:"No operational data found in archive."})]})})]})]})]})]})]}):u.jsx("div",{style:{padding:"24px"},children:"Please select a farm to view harvests."})},F6=()=>{const{currentFarm:t}=Pi(),{crops:e,fetchCropsByFarm:n,loading:i,fetchCropTimeline:r,deleteCrop:a}=vl(),[l,d]=de.useState("list");de.useEffect(()=>{const me=new URLSearchParams(window.location.search),Z=me.get("view"),J=me.get("id");if(Z&&d(Z),J&&e.length>0){const Se=e.find(Ee=>Ee.id.toString()===J);Se&&ee(Se)}},[e]);const[p,g]=de.useState(null),[m,_]=de.useState([]),[A,x]=de.useState(null),[R,M]=de.useState(!1),[k,I]=de.useState(!1),[Y,B]=de.useState(null),{deleteActivity:V}=ml();de.useEffect(()=>{t&&n(t.id)},[t,n]);const ee=async me=>{g(me),d("details"),M(!0);try{const[Z,J]=await Promise.all([r(me.id),vl.getState().fetchCropProductionCost(me.id)]);_(Z),x(J)}catch(Z){console.error("Failed to fetch data",Z)}finally{M(!1)}},ue=async me=>{const{getConfirmation:Z,showNotification:J}=hr.getState(),Se=Z("DELETE_CROP"),Ee=Se?`${Se.title}
------------------
${Se.body}`:"Are you sure you want to delete this crop record?";if(window.confirm(Ee))try{const Ye=await a(me);J(Ye?.notification?.message||"Crop record deleted","success"),p?.id===me&&d("list")}catch(Ye){J(Ye.response?.data?.notification?.message||"Delete failed","error")}};if(!t)return u.jsx("div",{style:{padding:"24px"},children:"Please select a farm to view crops."});if(l==="add")return u.jsx($y,{onComplete:()=>d("list")});const _e=()=>{I(!1),B(null),p&&ee(p)},fe=async me=>{const{getConfirmation:Z,showNotification:J}=hr.getState(),Se=Z("DELETE_ACTIVITY"),Ee=Se?`${Se.title}
------------------
${Se.body}`:"Delete this activity log?";if(window.confirm(Ee))try{const Ye=await V(me);J(Ye?.notification?.message||"Activity deleted","success"),p&&ee(p)}catch(Ye){J(Ye.response?.data?.notification?.message||"Delete failed","error")}},G=async me=>{try{const Z=await ml.getState().fetchActivitiesByCrop(p.id),J=ml.getState().activities.find(Se=>Se.id===me.id);J&&(B(J),I(!0))}catch(Z){console.error("Failed to load activity details",Z)}};return l==="details"&&p?u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsx("div",{style:{marginBottom:"24px"},children:u.jsx("button",{className:"outline",onClick:()=>d("list"),children:" Back to Crops"})}),u.jsxs("div",{className:"flex gap-24 wrap",children:[u.jsxs("div",{className:"card",style:{flex:"1 1 300px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"20px"},children:[u.jsx("h2",{style:{margin:0},children:p.crop_type}),u.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",backgroundColor:"var(--primary-light)",color:"var(--primary)",fontSize:"12px",fontWeight:"bold"},children:(p.status||"Active").toUpperCase()})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px"},children:[u.jsx(pd,{label:"Variety",value:p.variety}),u.jsx(pd,{label:"Season",value:p.season}),u.jsx(pd,{label:"Planted",value:new Date(p.planting_date).toLocaleDateString()}),u.jsx(pd,{label:"Est. Harvest",value:p.expected_harvest_date?new Date(p.expected_harvest_date).toLocaleDateString():"N/A"}),u.jsx(pd,{label:"Area",value:`${p.planted_area} ha`}),u.jsx(pd,{label:"Field",value:p.Field?.name||"Unknown"})]}),A&&u.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid var(--border)"},children:[u.jsx("h4",{style:{fontSize:"12px",color:"var(--primary)",marginBottom:"16px"},children:"PRODUCTION COST SUMMARY"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"12px"},children:[u.jsxs("div",{className:"flex j-between",children:[u.jsx("span",{style:{fontSize:"13px"},children:"Budgeted"}),u.jsxs("span",{style:{fontWeight:"bold"},children:[A.estimatedCost.toLocaleString()," XAF"]})]}),u.jsxs("div",{className:"flex j-between",children:[u.jsx("span",{style:{fontSize:"13px"},children:"Actual Total"}),u.jsxs("span",{style:{fontWeight:"bold",color:A.variance<0?"#dc3545":"#28a745"},children:[A.totalActualCost.toLocaleString()," XAF"]})]}),u.jsx("div",{style:{height:"8px",backgroundColor:"#e9ecef",borderRadius:"4px",overflow:"hidden",marginTop:"4px"},children:u.jsx("div",{style:{height:"100%",width:`${Math.min(100,A.totalActualCost/(A.estimatedCost||1)*100)}%`,backgroundColor:A.variance<0?"#dc3545":"var(--primary)"}})}),u.jsxs("div",{className:"flex j-between",style:{fontSize:"11px",color:"var(--text-muted)"},children:[u.jsxs("span",{children:["Labor: ",A.actualLaborCost.toLocaleString()]}),u.jsxs("span",{children:["Inputs: ",A.actualInputCost.toLocaleString()]})]})]})]}),u.jsxs("div",{style:{marginTop:"24px",paddingTop:"24px",borderTop:"1px solid var(--border)"},children:[u.jsx("label",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Notes"}),u.jsx("p",{style:{marginTop:"8px",fontSize:"14px",lineHeight:"1.6"},children:p.notes||"No notes provided."})]}),u.jsx("button",{className:"outline",style:{marginTop:"24px",width:"100%",color:"#dc3545",borderColor:"#dc3545",marginBottom:"12px"},onClick:()=>ue(p.id),children:"Delete Cultivation Record"})]}),u.jsxs("div",{className:"card",style:{flex:"2 1 500px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsx("h3",{style:{margin:0},children:"Activity Timeline"}),u.jsx("button",{className:"primary",style:{padding:"6px 12px",fontSize:"13px"},onClick:()=>{B(null),I(!0)},children:"+ Log Activity"})]}),k?u.jsx("div",{style:{marginBottom:"32px",border:"1px solid var(--primary-light)",borderRadius:"12px",padding:"4px"},children:u.jsx(Bf,{cropId:p.id,fieldId:p.field_id,initialData:Y,onComplete:_e})}):R?u.jsx("p",{children:"Loading timeline..."}):u.jsxs("div",{className:"timeline",children:[m.map((me,Z)=>u.jsxs("div",{className:"timeline-item",style:{display:"flex",gap:"16px",marginBottom:"32px",position:"relative"},children:[u.jsx("div",{style:{width:"12px",height:"12px",borderRadius:"50%",backgroundColor:me.type==="activity"?"var(--primary)":"#ff9800",marginTop:"6px",zIndex:2,flexShrink:0}}),u.jsxs("div",{style:{flex:1},children:[u.jsxs("div",{className:"flex j-between a-start",children:[u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",fontWeight:"500"},children:new Date(me.date).toLocaleDateString(void 0,{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),u.jsx("div",{style:{fontWeight:"bold",margin:"4px 0",fontSize:"16px",textTransform:"capitalize"},children:me.title})]}),me.type==="activity"&&u.jsxs("div",{className:"flex gap-8",children:[u.jsx("button",{onClick:()=>G(me),style:{border:"none",background:"none",color:"var(--primary)",cursor:"pointer",fontSize:"12px"},children:"Edit"}),u.jsx("button",{onClick:()=>fe(me.id),style:{border:"none",background:"none",color:"#dc3545",cursor:"pointer",fontSize:"12px"},children:"Delete"})]})]}),u.jsx("div",{style:{fontSize:"14px",color:"#4a5568",lineHeights:"1.6",marginBottom:"8px"},children:me.description}),me.meta&&u.jsxs("div",{style:{display:"flex",gap:"16px",flexWrap:"wrap"},children:[me.meta.duration&&u.jsxs("span",{style:{fontSize:"11px",backgroundColor:"#f1f5f9",padding:"2px 8px",borderRadius:"4px",color:"#475569"},children:[" ",me.meta.duration,"h"]}),me.meta.inputs&&me.meta.inputs.length>0&&u.jsxs("span",{style:{fontSize:"11px",backgroundColor:"#ecfdf5",padding:"2px 8px",borderRadius:"4px",color:"#065f46"},children:[" ",me.meta.inputs.join(", ")]})]})]})]},Z)),m.length===0&&u.jsx("p",{style:{color:"var(--text-muted)"},children:"No activities recorded for this crop yet."})]})]})]})]}):u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Cultivation Management"}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:["Manage all active and historical plantings for ",t?.name,"."]})]}),u.jsx("button",{className:"primary",onClick:()=>d("add"),children:"+ Create New Cultivation"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(250px, 1fr))",gap:"24px",marginBottom:"32px"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"600",marginBottom:"8px"},children:"TOTAL PLANTED AREA"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"var(--primary)"},children:[e.reduce((me,Z)=>me+parseFloat(Z.planted_area||0),0).toFixed(2)," ",u.jsx("span",{style:{fontSize:"16px",color:"var(--text-muted)"},children:"ha"})]})]}),u.jsxs("div",{style:{backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"600",marginBottom:"8px"},children:"CROP DIVERSITY"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"#4a90e2"},children:[new Set(e.map(me=>me.crop_type)).size," ",u.jsx("span",{style:{fontSize:"16px",color:"var(--text-muted)"},children:"Types"})]})]}),u.jsxs("div",{style:{backgroundColor:"#fff",padding:"24px",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",border:"1px solid var(--border)"},children:[u.jsx("div",{style:{fontSize:"13px",color:"var(--text-secondary)",fontWeight:"600",marginBottom:"8px"},children:"ESTIMATED BUDGET"}),u.jsxs("div",{style:{fontSize:"28px",fontWeight:"800",color:"#f5a623"},children:[e.reduce((me,Z)=>me+parseFloat(Z.estimated_cost||0),0).toLocaleString()," ",u.jsx("span",{style:{fontSize:"16px",color:"var(--text-muted)"},children:"XAF"})]})]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:e.map(me=>u.jsxs("div",{className:"card hover-glow",style:{padding:"24px",cursor:"pointer",transition:"all 0.2s",border:"1px solid var(--border)",boxShadow:"0 4px 6px rgba(0,0,0,0.02)"},onClick:()=>ee(me),children:[u.jsxs("div",{className:"flex j-between a-start",children:[u.jsx("div",{style:{fontSize:"32px"},children:""}),u.jsx("span",{style:{fontSize:"11px",padding:"4px 10px",borderRadius:"20px",backgroundColor:me.status==="planted"?"var(--bg-success)":"#fff3e0",color:me.status==="planted"?"var(--success)":"#ef6c00",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:(me.status||"Active").toUpperCase()})]}),u.jsx("h3",{style:{margin:"16px 0 8px 0",fontSize:"18px",fontWeight:"700",color:"var(--text-primary)"},children:me.crop_type}),u.jsxs("p",{style:{fontSize:"14px",color:"var(--text-muted)",marginBottom:"20px"},children:[me.variety,"  ",me.season]}),u.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",display:"flex",flexDirection:"column",gap:"6px"},children:[u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{children:""})," Field: ",u.jsx("span",{style:{fontWeight:"600"},children:me.Field?.name||"N/A"})]}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{children:""})," Planted: ",new Date(me.planting_date).toLocaleDateString()]})]})]},me.id))}),e.length===0&&!i&&u.jsxs("div",{style:{textAlign:"center",padding:"80px 0",color:"var(--text-muted)"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"24px"},children:""}),u.jsx("h3",{children:"No crops currently recorded."}),u.jsx("p",{children:"Start by planning a new cultivation record for your fields."})]}),i&&u.jsx("p",{style:{textAlign:"center",padding:"40px"},children:"Loading crops..."})]})},pd=({label:t,value:e})=>u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase"},children:t}),u.jsx("div",{style:{fontWeight:"500",fontSize:"14px",marginTop:"4px"},children:e||"N/A"})]}),U6=({onAdd:t,onEdit:e})=>{const{currentFarm:n}=Pi(),{crops:i,fetchCropsByFarm:r,deleteCrop:a}=vl(),{showNotification:l,getConfirmation:d}=hr(),[p,g]=de.useState(""),[m,_]=de.useState({key:"crop_type",direction:"asc"}),[A,x]=de.useState("active"),[R,M]=de.useState(10),[k,I]=de.useState(1);de.useEffect(()=>{n?.id&&r(n.id)},[n?.id]);const B=[...i.filter(G=>{const me=G.crop_type.toLowerCase().includes(p.toLowerCase())||G.variety?.toLowerCase().includes(p.toLowerCase())||G.status.toLowerCase().includes(p.toLowerCase()),Z=A==="active"?["planted","active","growing"].includes(G.status):!0;return me&&Z})].sort((G,me)=>G[m.key]<me[m.key]?m.direction==="asc"?-1:1:G[m.key]>me[m.key]?m.direction==="asc"?1:-1:0),V=Math.ceil(B.length/R),ee=B.slice((k-1)*R,k*R),ue=G=>{let me="asc";m.key===G&&m.direction==="asc"&&(me="desc"),_({key:G,direction:me})},_e=async(G,me)=>{if(window.confirm(`Are you sure you want to delete ${me}? This will remove all associated records.`))try{await a(G),l("Crop deleted successfully","success")}catch{l("Delete failed","error")}},fe=G=>{switch(G){case"planted":return{bg:"#e8f5e9",text:"#2e7d32"};case"growing":return{bg:"#e3f2fd",text:"#1565c0"};case"harvested":return{bg:"#fff3e0",text:"#ef6c00"};case"archived":return{bg:"#f5f5f5",text:"#757575"};default:return{bg:"#f5f5f5",text:"#000"}}};return u.jsxs("div",{className:"card animate-fade-in",style:{padding:"0",border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,color:"var(--text-primary)",fontSize:"18px",fontWeight:"700"},children:"List of Cultivation"}),u.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:[n?.name||"All Farms","  ",B.length," Records Found"]})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{onClick:()=>x(G=>G==="active"?"all":"active"),className:"outline",style:{fontSize:"13px",fontWeight:"600",padding:"8px 16px",borderRadius:"8px"},children:A==="active"?"Show All History":"Show Active Only"}),u.jsx("button",{onClick:t,className:"primary",style:{fontSize:"13px",fontWeight:"600",padding:"8px 20px",borderRadius:"8px",textTransform:"none"},children:"+ Create New Cultivation"})]})]}),u.jsxs("div",{style:{padding:"16px 24px",backgroundColor:"#f8f9fa",borderBottom:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center",flexWrap:"wrap",gap:"12px"},children:[u.jsx("div",{style:{display:"flex",alignItems:"center",gap:"12px",flex:1,minWidth:"200px"},children:u.jsxs("div",{style:{position:"relative",flex:1,maxWidth:"400px"},children:[u.jsx("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",opacity:.5},children:""}),u.jsx("input",{type:"text",placeholder:"Search by crop, variety, or status...",value:p,onChange:G=>g(G.target.value),style:{width:"100%",padding:"10px 10px 10px 36px",border:"1px solid var(--border)",borderRadius:"8px",fontSize:"13px",outline:"none",transition:"all 0.2s"}})]})}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)"},children:"Rows:"}),u.jsxs("select",{value:R,onChange:G=>{M(Number(G.target.value)),I(1)},style:{padding:"8px",border:"1px solid var(--border)",borderRadius:"6px",fontSize:"12px",cursor:"pointer"},children:[u.jsx("option",{value:5,children:"5"}),u.jsx("option",{value:10,children:"10"}),u.jsx("option",{value:20,children:"20"}),u.jsx("option",{value:50,children:"50"})]})]})]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse",minWidth:"600px"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"#fff",borderBottom:"1px solid var(--border)"},children:[u.jsx(op,{label:"CROP DETAILS",sortKey:"crop_type",sortConfig:m,onSort:ue}),u.jsx(op,{label:"PLANTED / HARVEST",sortKey:"planting_date",sortConfig:m,onSort:ue}),u.jsx(op,{label:"AREA",sortKey:"planted_area",sortConfig:m,onSort:ue,width:"100px"}),u.jsx(op,{label:"STATUS",sortKey:"status",sortConfig:m,onSort:ue,width:"120px"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"right",fontSize:"11px",fontWeight:"700",color:"var(--text-secondary)",textTransform:"uppercase"},children:"ACTIONS"})]})}),u.jsxs("tbody",{children:[ee.map(G=>{const me=fe(G.status);return u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.1s"},className:"hover-row",children:[u.jsx("td",{style:{padding:"16px 24px"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{width:"40px",height:"40px",borderRadius:"50%",backgroundColor:"#fff",display:"flex",alignItems:"center",justifyContent:"center",fontSize:"20px",border:"1px solid var(--border)",boxShadow:"0 2px 4px rgba(0,0,0,0.05)"},children:""}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"var(--text-primary)"},children:G.crop_type}),u.jsxs("div",{style:{fontSize:"12px",color:"var(--text-secondary)",marginTop:"2px"},children:[G.variety||"Unknown Variety","  ",G.season||G.year]})]})]})}),u.jsxs("td",{style:{padding:"16px 24px",fontSize:"13px",color:"var(--text-secondary)"},children:[u.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)"},children:new Date(G.planting_date).toLocaleDateString()}),u.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginTop:"2px"},children:G.expected_harvest_date?`Exp: ${new Date(G.expected_harvest_date).toLocaleDateString()}`:"No harvest date"})]}),u.jsx("td",{style:{padding:"16px 24px",fontSize:"13px",fontWeight:"700",color:"var(--primary)"},children:G.planted_area?`${G.planted_area} ha`:""}),u.jsx("td",{style:{padding:"16px 24px"},children:u.jsx("span",{style:{display:"inline-block",padding:"4px 12px",borderRadius:"20px",backgroundColor:me.bg,color:me.text,fontSize:"11px",fontWeight:"700",textTransform:"uppercase",letterSpacing:"0.5px"},children:G.status||"UNKNOWN"})}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"right"},children:u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"8px"},children:[u.jsx(jv,{icon:"",label:"View",onClick:()=>l("View Details functionality coming soon","info",{duration:2e3}),color:"var(--text-secondary)"}),u.jsx(jv,{icon:"",label:"Edit",onClick:()=>e(G),color:"var(--primary)"}),u.jsx(jv,{icon:"",label:"Delete",onClick:()=>_e(G.id,G.crop_type),color:"var(--error)"})]})})]},G.id)}),ee.length===0&&u.jsx("tr",{children:u.jsxs("td",{colSpan:"5",style:{textAlign:"center",padding:"60px 24px",color:"var(--text-muted)"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"16px",opacity:.5},children:""}),u.jsx("h4",{style:{margin:"0 0 8px 0",color:"var(--text-secondary)"},children:"No crops found"}),u.jsx("p",{style:{margin:0,fontSize:"13px"},children:"Try adjusting your search filters or add a new crop."})]})})]})]})}),V>1&&u.jsxs("div",{style:{padding:"16px 24px",borderTop:"1px solid var(--border)",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsxs("div",{style:{fontSize:"12px",color:"var(--text-muted)",fontWeight:"500"},children:["Showing ",(k-1)*R+1," to ",Math.min(k*R,B.length)," of ",B.length," entries"]}),u.jsxs("div",{style:{display:"flex",gap:"4px"},children:[u.jsx("button",{disabled:k===1,onClick:()=>I(G=>Math.max(1,G-1)),className:"outline",style:{padding:"6px 12px",fontSize:"12px",opacity:k===1?.5:1,cursor:k===1?"default":"pointer"},children:"Previous"}),[...Array(V)].map((G,me)=>u.jsx("button",{onClick:()=>I(me+1),style:{padding:"6px 12px",border:"1px solid",borderColor:k===me+1?"var(--primary)":"var(--border)",backgroundColor:k===me+1?"var(--primary)":"#fff",color:k===me+1?"#fff":"var(--text-secondary)",borderRadius:"4px",cursor:"pointer",fontSize:"12px",fontWeight:"600"},children:me+1},me)),u.jsx("button",{disabled:k===V,onClick:()=>I(G=>Math.min(V,G+1)),className:"outline",style:{padding:"6px 12px",fontSize:"12px",opacity:k===V?.5:1,cursor:k===V?"default":"pointer"},children:"Next"})]})]})]})},op=({label:t,sortKey:e,sortConfig:n,onSort:i,width:r})=>{const a=n.key===e;return u.jsx("th",{onClick:()=>i(e),style:{padding:"16px 24px",textAlign:"left",fontSize:"11px",fontWeight:"700",color:a?"var(--primary)":"var(--text-muted)",textTransform:"uppercase",cursor:"pointer",userSelect:"none",width:r||"auto",transition:"color 0.2s"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"4px"},children:[t,u.jsx("span",{style:{fontSize:"10px",opacity:a?1:.3},children:a?n.direction==="asc"?"":"":""})]})})},jv=({icon:t,label:e,onClick:n,color:i})=>{const r=i.startsWith("var");return u.jsx("button",{onClick:n,title:e,className:"icon-btn",style:{border:`1px solid ${r?"var(--border)":i+"30"}`,backgroundColor:"#fff",color:i,width:"32px",height:"32px",borderRadius:"8px",display:"flex",alignItems:"center",justifyContent:"center",cursor:"pointer",fontSize:"14px",transition:"all 0.2s",boxShadow:"0 1px 2px rgba(0,0,0,0.05)"},onMouseEnter:a=>{a.currentTarget.style.backgroundColor=r?"var(--bg-secondary)":i+"10",a.currentTarget.style.transform="translateY(-1px)"},onMouseLeave:a=>{a.currentTarget.style.backgroundColor="#fff",a.currentTarget.style.transform="translateY(0)"},children:t})},H6=()=>{const[t,e]=de.useState(!1),[n,i]=de.useState(null),r=()=>{i(null),e(!0)},a=d=>{i(d),e(!0)},l=()=>{e(!1),i(null)};return t?u.jsxs("div",{style:{padding:"24px"},children:[u.jsx("button",{onClick:l,style:{marginBottom:"16px",background:"none",border:"none",cursor:"pointer",fontWeight:"bold"},children:" Back to List"}),u.jsx("div",{style:{maxWidth:"850px",margin:"0 auto"},children:u.jsx($y,{initialData:n,onComplete:l})})]}):u.jsxs("div",{style:{padding:"24px"},children:[u.jsx("h1",{style:{fontSize:"24px",fontWeight:"900",marginBottom:"24px",textTransform:"uppercase"},children:"Manage Cultivation"}),u.jsxs("div",{style:{maxWidth:"1000px"},children:[u.jsx("p",{style:{marginBottom:"16px",color:"#666"},children:"Manage your active cultivation selection here."}),u.jsx(U6,{onAdd:r,onEdit:a})]})]})},q6=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],W6=()=>{const{definitions:t,fetchDefinitions:e,loading:n,toggleStatus:i,createDefinition:r,updateDefinition:a,deleteDefinition:l}=Qy(),[d,p]=de.useState(""),[g,m]=de.useState(!1),[_,A]=de.useState(null),[x,R]=de.useState({name:"",icon:"",color:"#4caf50",varieties:""}),M=new Set(t.map(ee=>ee.icon)),k=q6.filter(ee=>!M.has(ee)||_&&ee===_.icon);x.icon&&!k.includes(x.icon)&&k.unshift(x.icon),de.useEffect(()=>{e()},[]);const I=t.filter(ee=>ee.name.toLowerCase().includes(d.toLowerCase())),Y=(ee=null)=>{A(ee),R(ee?{...ee,varieties:ee.varieties?ee.varieties.join(", "):""}:{name:"",icon:"",color:"#4caf50",varieties:""}),m(!0)},B=async()=>{const ee={...x,category:"Custom",varieties:x.varieties.split(",").map(ue=>ue.trim()).filter(ue=>ue)};try{_?await a(_.id,ee):await r(ee),m(!1)}catch{alert("Failed to save crop definition")}},V=async ee=>{window.confirm("Are you sure you want to delete this crop definition?")&&await l(ee)};return n&&t.length===0?u.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading library..."}):u.jsxs("div",{className:"card animate-fade-in",style:{padding:"0",border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",width:"100%",minHeight:"600px",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,color:"var(--text-primary)",fontSize:"18px",fontWeight:"700"},children:"Crop Master Library"}),u.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:[t.length," Available Crops"]})]}),u.jsxs("div",{style:{position:"relative",width:"250px"},children:[u.jsx("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",opacity:.5},children:""}),u.jsx("input",{type:"text",placeholder:"Search library...",value:d,onChange:ee=>p(ee.target.value),style:{width:"100%",padding:"10px 10px 10px 36px",borderRadius:"8px",border:"1px solid var(--border)",background:"#f8f9fa",color:"var(--text-primary)",fontSize:"13px",outline:"none",transition:"all 0.2s"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 100px 80px 120px",backgroundColor:"#f8f9fa",borderBottom:"1px solid var(--border)",padding:"16px 24px",fontWeight:"700",fontSize:"12px",color:"var(--text-secondary)"},children:[u.jsx("div",{children:"Active"}),u.jsx("div",{children:"Crop Details"}),u.jsx("div",{style:{textAlign:"center"},children:"Color"}),u.jsx("div",{style:{textAlign:"center"},children:"Icon"}),u.jsx("div",{style:{textAlign:"right"},children:"Actions"})]}),u.jsx("div",{style:{maxHeight:"600px",overflowY:"auto",backgroundColor:"#fff"},children:I.map(ee=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 100px 80px 120px",padding:"16px 24px",borderBottom:"1px solid var(--border)",alignItems:"center",backgroundColor:"#fff",transition:"background-color 0.1s"},className:"hover-row",children:[u.jsx("div",{children:u.jsx("input",{type:"checkbox",checked:ee.is_active,onChange:()=>i(ee.id),style:{transform:"scale(1.2)",cursor:"pointer",accentColor:"var(--primary)"}})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",fontSize:"14px"},children:ee.name}),u.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"2px"},children:ee.category})]}),u.jsx("div",{style:{textAlign:"center"},children:u.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:ee.color,margin:"0 auto",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 0 1px var(--border)"}})}),u.jsx("div",{style:{textAlign:"center",fontSize:"20px"},children:ee.icon}),u.jsxs("div",{style:{textAlign:"center",display:"flex",gap:"8px",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:()=>Y(ee),title:"Edit",className:"icon-btn",style:{border:"1px solid var(--border)",background:"#fff",color:"var(--text-secondary)",width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:""}),u.jsx("button",{onClick:()=>V(ee.id),title:"Delete",className:"icon-btn-danger",style:{border:"1px solid var(--border)",background:"#fff",color:"var(--error)",width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer",display:"flex",alignItems:"center",justifyContent:"center",transition:"all 0.2s"},children:""})]})]},ee.id))}),u.jsx("div",{style:{padding:"20px 24px",backgroundColor:"#f8f9fa",borderTop:"1px solid var(--border)",textAlign:"right"},children:u.jsxs("button",{onClick:()=>Y(null),style:{backgroundColor:"var(--primary)",color:"#fff",fontWeight:"600",border:"none",fontSize:"13px",padding:"10px 20px",cursor:"pointer",display:"inline-flex",alignItems:"center",gap:"8px",borderRadius:"8px",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[u.jsx("span",{style:{fontSize:"16px",fontWeight:"bold"},children:"+"})," Add New Crop to Library"]})}),g&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{style:{backgroundColor:"#fff",padding:"24px",borderRadius:"8px",width:"400px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[u.jsx("h3",{style:{marginTop:0,color:"#bb1919"},children:_?"Edit Crop":"Add New Crop"}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Crop Name"}),u.jsx("input",{type:"text",value:x.name,onChange:ee=>R({...x,name:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Icon (Emoji)"}),u.jsxs("select",{value:x.icon,onChange:ee=>R({...x,icon:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"16px"},children:[k.map(ee=>u.jsx("option",{value:ee,children:ee},ee)),u.jsx("option",{value:"",children:" (Default)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Color"}),u.jsx("input",{type:"color",value:x.color,onChange:ee=>R({...x,color:ee.target.value}),style:{width:"100%",height:"38px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"}})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Varieties (comma separated)"}),u.jsx("textarea",{value:x.varieties,onChange:ee=>R({...x,varieties:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",height:"80px"},placeholder:"e.g. Variety A, Variety B"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:()=>m(!1),style:{padding:"8px 16px",border:"1px solid #ccc",background:"#fff",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:B,style:{padding:"8px 16px",background:"#bb1919",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Save"})]})]})})]})},G6=()=>u.jsxs("div",{style:{padding:"24px"},children:[u.jsx("h1",{style:{fontSize:"24px",fontWeight:"900",marginBottom:"24px",textTransform:"uppercase"},children:"List of Crops"}),u.jsx("div",{style:{width:"100%"},children:u.jsx(W6,{})})]}),V6=["","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],Y6=()=>{const{definitions:t,fetchDefinitions:e,loading:n,toggleStatus:i,createDefinition:r,updateDefinition:a,deleteDefinition:l}=_5(),[d,p]=de.useState(""),[g,m]=de.useState(!1),[_,A]=de.useState(null),[x,R]=de.useState({name:"",icon:"",color:"#2196F3",sub_types:"",category:"General"}),M=new Set(t.map(ee=>ee.icon)),k=V6.filter(ee=>!M.has(ee)||_&&ee===_.icon);x.icon&&!k.includes(x.icon)&&k.unshift(x.icon),de.useEffect(()=>{e()},[]);const I=t.filter(ee=>ee.name.toLowerCase().includes(d.toLowerCase())),Y=(ee=null)=>{A(ee),R(ee?{...ee,sub_types:ee.sub_types?ee.sub_types.join(", "):""}:{name:"",icon:"",color:"#2196F3",sub_types:"",category:"General"}),m(!0)},B=async()=>{const ee={...x,sub_types:x.sub_types.split(",").map(ue=>ue.trim()).filter(ue=>ue)};try{_?await a(_.id,ee):await r(ee),m(!1)}catch{alert("Failed to save infrastructure definition")}},V=async ee=>{window.confirm("Are you sure you want to delete this infrastructure definition?")&&await l(ee)};return n&&t.length===0?u.jsx("div",{style:{padding:"20px",textAlign:"center"},children:"Loading library..."}):u.jsxs("div",{className:"card animate-fade-in",style:{padding:"0",border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.05)",width:"100%",minHeight:"600px",display:"flex",flexDirection:"column"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[u.jsxs("div",{children:[u.jsx("h3",{style:{margin:0,color:"var(--text-primary)",fontSize:"18px",fontWeight:"700"},children:"Infrastructure Master Library"}),u.jsxs("div",{style:{fontSize:"13px",color:"var(--text-secondary)",marginTop:"4px"},children:[t.length," Specialized Asset Types"]})]}),u.jsxs("div",{style:{position:"relative",width:"250px"},children:[u.jsx("span",{style:{position:"absolute",left:"12px",top:"50%",transform:"translateY(-50%)",fontSize:"14px",opacity:.5},children:""}),u.jsx("input",{type:"text",placeholder:"Search infrastructure...",value:d,onChange:ee=>p(ee.target.value),style:{width:"100%",padding:"10px 10px 10px 36px",borderRadius:"8px",border:"1px solid var(--border)",background:"#f8f9fa",color:"var(--text-primary)",fontSize:"13px",outline:"none"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 100px 80px 120px",backgroundColor:"#f8f9fa",borderBottom:"1px solid var(--border)",padding:"16px 24px",fontWeight:"700",fontSize:"12px",color:"var(--text-secondary)"},children:[u.jsx("div",{children:"Active"}),u.jsx("div",{children:"Asset Details"}),u.jsx("div",{style:{textAlign:"center"},children:"Color"}),u.jsx("div",{style:{textAlign:"center"},children:"Icon"}),u.jsx("div",{style:{textAlign:"right"},children:"Actions"})]}),u.jsx("div",{style:{maxHeight:"600px",overflowY:"auto",backgroundColor:"#fff"},children:I.map(ee=>u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"80px 1fr 100px 80px 120px",padding:"16px 24px",borderBottom:"1px solid var(--border)",alignItems:"center",backgroundColor:"#fff"},children:[u.jsx("div",{children:u.jsx("input",{type:"checkbox",checked:ee.is_active,onChange:()=>i(ee.id),style:{transform:"scale(1.2)",cursor:"pointer",accentColor:"var(--primary)"}})}),u.jsxs("div",{children:[u.jsx("div",{style:{fontWeight:"600",color:"var(--text-primary)",fontSize:"14px"},children:ee.name}),u.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",marginTop:"2px"},children:ee.category})]}),u.jsx("div",{style:{textAlign:"center"},children:u.jsx("div",{style:{width:"20px",height:"20px",backgroundColor:ee.color,margin:"0 auto",borderRadius:"50%",border:"2px solid #fff",boxShadow:"0 0 0 1px var(--border)"}})}),u.jsx("div",{style:{textAlign:"center",fontSize:"20px"},children:ee.icon}),u.jsxs("div",{style:{textAlign:"center",display:"flex",gap:"8px",justifyContent:"flex-end"},children:[u.jsx("button",{onClick:()=>Y(ee),style:{border:"1px solid var(--border)",background:"#fff",color:"var(--text-secondary)",width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer"},children:""}),u.jsx("button",{onClick:()=>V(ee.id),style:{border:"1px solid var(--border)",background:"#fff",color:"var(--error)",width:"32px",height:"32px",borderRadius:"8px",cursor:"pointer"},children:""})]})]},ee.id))}),u.jsx("div",{style:{padding:"20px 24px",backgroundColor:"#f8f9fa",borderTop:"1px solid var(--border)",textAlign:"right"},children:u.jsx("button",{onClick:()=>Y(null),style:{backgroundColor:"var(--primary)",color:"#fff",fontWeight:"600",border:"none",fontSize:"13px",padding:"10px 20px",cursor:"pointer",borderRadius:"8px"},children:"+ Add New Infrastructure Type"})}),g&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{style:{backgroundColor:"#fff",padding:"24px",borderRadius:"8px",width:"400px",boxShadow:"0 4px 12px rgba(0,0,0,0.2)"},children:[u.jsx("h3",{style:{marginTop:0,color:"var(--primary)"},children:_?"Edit Infrastructure":"Add New Infrastructure"}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Name"}),u.jsx("input",{type:"text",value:x.name,onChange:ee=>R({...x,name:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}})]}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Category"}),u.jsx("input",{type:"text",value:x.category,onChange:ee=>R({...x,category:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px"}})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Icon"}),u.jsx("select",{value:x.icon,onChange:ee=>R({...x,icon:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",fontSize:"16px"},children:k.map(ee=>u.jsx("option",{value:ee,children:ee},ee))})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Color"}),u.jsx("input",{type:"color",value:x.color,onChange:ee=>R({...x,color:ee.target.value}),style:{width:"100%",height:"38px",padding:"0",border:"1px solid #ccc",borderRadius:"4px"}})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",marginBottom:"4px",fontWeight:"bold"},children:"Sub-types (comma separated)"}),u.jsx("textarea",{value:x.sub_types,onChange:ee=>R({...x,sub_types:ee.target.value}),style:{width:"100%",padding:"8px",border:"1px solid #ccc",borderRadius:"4px",height:"80px"},placeholder:"e.g. Type A, Type B"})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"12px"},children:[u.jsx("button",{onClick:()=>m(!1),style:{padding:"8px 16px",border:"1px solid #ccc",background:"#fff",borderRadius:"4px",cursor:"pointer"},children:"Cancel"}),u.jsx("button",{onClick:B,style:{padding:"8px 16px",background:"var(--primary)",color:"#fff",border:"none",borderRadius:"4px",cursor:"pointer",fontWeight:"bold"},children:"Save"})]})]})})]})},Z6=()=>u.jsxs("div",{style:{padding:"24px"},children:[u.jsx("h1",{style:{fontSize:"24px",fontWeight:"900",marginBottom:"24px",textTransform:"uppercase"},children:"Infrastructure Library"}),u.jsx("div",{style:{width:"100%"},children:u.jsx(Y6,{})})]}),K6=$o(t=>({scenarios:[{id:1,name:"2026 Optimized Rotation",year:2026,status:"draft",area:120,estRevenue:15e6},{id:2,name:"High Yield Corn Scenario",year:2026,status:"active",area:85,estRevenue:12e6}],plannedRotations:[],loading:!1,createScenario:e=>t(n=>({scenarios:[...n.scenarios,{...e,id:Date.now()}]})),deleteScenario:e=>t(n=>({scenarios:n.scenarios.filter(i=>i.id!==e)})),updateScenario:(e,n)=>t(i=>({scenarios:i.scenarios.map(r=>r.id===e?{...r,...n}:r)}))})),X6=()=>{const{currentFarm:t}=Pi(),{scenarios:e,createScenario:n,deleteScenario:i,updateScenario:r}=K6(),[a,l]=de.useState("scenarios"),[d,p]=de.useState(!1),[g,m]=de.useState(null),[_,A]=de.useState({name:"",year:new Date().getFullYear()+1,area:"",estRevenue:"",status:"draft"}),x=k=>{k.preventDefault(),g?r(g.id,_):n(_),p(!1),m(null),A({name:"",year:new Date().getFullYear()+1,area:"",estRevenue:"",status:"draft"})},R=k=>{m(k),A({...k}),p(!0)},M=()=>{p(!1),m(null),A({name:"",year:new Date().getFullYear()+1,area:"",estRevenue:"",status:"draft"})};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",backgroundColor:"#f0f4f8",minHeight:"100vh"},children:[d&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3},children:u.jsxs("div",{className:"card",style:{width:"400px",padding:"30px"},children:[u.jsx("h3",{style:{marginBottom:"20px"},children:g?"Edit Plan":"Create New Plan"}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{children:"Plan Name"}),u.jsx("input",{type:"text",required:!0,value:_.name,placeholder:"e.g. 2026 Optimized Rotation",onChange:k=>A({..._,name:k.target.value})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Crop Year"}),u.jsx("input",{type:"number",required:!0,value:_.year,onChange:k=>A({..._,year:k.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Total Area (ha)"}),u.jsx("input",{type:"number",required:!0,value:_.area,onChange:k=>A({..._,area:k.target.value})})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{children:"Est. Revenue (XAF)"}),u.jsx("input",{type:"number",required:!0,value:_.estRevenue,onChange:k=>A({..._,estRevenue:k.target.value})})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:1},children:g?"Save Changes":"Save Plan"}),u.jsx("button",{type:"button",className:"outline",style:{flex:1},onClick:M,children:"Cancel"})]})]})]})}),u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:0,color:"#1a365d"},children:"Production Planner"}),u.jsxs("p",{style:{color:"#4a5568",fontSize:"15px"},children:["Strategic planning for upcoming seasons at ",u.jsx("strong",{children:t?.name})]})]}),u.jsx("div",{style:{display:"flex",gap:"12px"},children:u.jsx("button",{className:"primary",onClick:()=>p(!0),children:"+ Create Plan"})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(350px, 1fr))",gap:"24px"},children:[e.map(k=>u.jsxs("div",{className:"card hover-glow",style:{padding:"24px",border:"none",borderRadius:"20px"},children:[u.jsxs("div",{className:"flex j-between a-start",style:{marginBottom:"20px"},children:[u.jsx("div",{style:{padding:"8px",backgroundColor:k.status==="active"?"#c6f6d5":"#edf2f7",borderRadius:"12px",fontSize:"20px"},children:""}),u.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"bold",backgroundColor:k.status==="active"?"#2f855a":"#718096",color:"white"},children:(k.status||"Draft").toUpperCase()})]}),u.jsx("h3",{style:{margin:"0 0 8px 0",fontSize:"18px"},children:k.name}),u.jsxs("p",{style:{color:"#718096",fontSize:"14px",marginBottom:"20px"},children:["Planned for Crop Year: ",k.year]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[u.jsxs("div",{style:{backgroundColor:"#f7fafc",padding:"12px",borderRadius:"12px"},children:[u.jsx("div",{style:{fontSize:"10px",color:"#a0aec0",fontWeight:"bold"},children:"EST. AREA"}),u.jsxs("div",{style:{fontSize:"16px",fontWeight:"bold"},children:[k.area," ha"]})]}),u.jsxs("div",{style:{backgroundColor:"#f7fafc",padding:"12px",borderRadius:"12px"},children:[u.jsx("div",{style:{fontSize:"10px",color:"#a0aec0",fontWeight:"bold"},children:"POTENTIAL REVENUE"}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#2f855a"},children:k.estRevenue.toLocaleString()})]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{className:"outline",style:{flex:1,fontSize:"13px"},onClick:()=>R(k),children:"Edit Plan"}),u.jsx("button",{className:"outline",style:{color:"#e53e3e",borderColor:"#fed7d7",fontSize:"13px"},onClick:()=>i(k.id),children:""})]})]},k.id)),u.jsxs("div",{onClick:()=>p(!0),style:{border:"2px dashed #cbd5e0",borderRadius:"20px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",padding:"40px",cursor:"pointer",color:"#718096"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:""}),u.jsx("div",{style:{fontWeight:"bold"},children:"Create New Scenario"}),u.jsx("div",{style:{fontSize:"12px"},children:"Experiment with different crops"})]})]}),u.jsxs("div",{className:"card",style:{marginTop:"32px",padding:"30px",border:"none",borderRadius:"24px"},children:[u.jsx("h3",{style:{marginBottom:"24px",fontSize:"20px"},children:"Crop Rotation Intelligence"}),u.jsxs("div",{style:{padding:"24px",backgroundColor:"#fffaf0",border:"1px solid #feebc8",borderRadius:"16px",display:"flex",gap:"20px",alignItems:"flex-start"},children:[u.jsx("div",{style:{fontSize:"32px"},children:""}),u.jsxs("div",{children:[u.jsx("h4",{style:{margin:"0 0 8px 0",color:"#c05621"},children:"Rotation Tip"}),u.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#7b341e",lineHeight:"1.6"},children:["Based on your history, ",u.jsx("strong",{children:"Field 04"})," had Corn for 2 consecutive years. We recommend rotating to ",u.jsx("strong",{children:"Soybeans"})," or ",u.jsx("strong",{children:"Legumes"})," this season to restore soil nitrogen and break pest cycles."]})]})]})]})]})},Q6=(t,e)=>e>0||t>15?{status:"POOR",color:"#e74c3c",tip:"Risk of drift or wash-off. Avoid spraying."}:t>10?{status:"FAIR",color:"#f39c12",tip:"Check nozzle types for drift control."}:{status:"EXCELLENT",color:"#27ae60",tip:"Ideal conditions for application."},$6=(t,e,n=10)=>{const i=(t+e)/2;return Math.max(0,i-n).toFixed(1)},J6=t=>{const{temperature_avg:e,conditions:n,wind_speed:i}=t||{};return e<5?"Frost risk detected. Protect sensitive seedlings.":i>20?"High winds expected. Secure lightweight equipment and structures.":n?.toLowerCase().includes("rain")?"Rain forecasted. Postpone nitrogen application to prevent leaching.":"Favorable conditions for general field activities."},eN=()=>{const{currentFarm:t}=Pi(),{weatherData:e,forecast:n,fetchWeather:i,fetchForecast:r,loading:a}=w5();de.useEffect(()=>{t&&(i(t.id),r(t.id))},[t,i,r]);const l=Q6(e?.wind_speed||0,e?.precipitation||0),d=J6(e);return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",backgroundColor:"#f0f4f8",minHeight:"100vh"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:0,color:"#1a365d"},children:"Farming Weather Dashboard"}),u.jsxs("p",{style:{color:"#4a5568",fontSize:"15px"},children:["Hyper-local agricultural intelligence for ",u.jsx("strong",{children:t?.name})]})]}),u.jsx("div",{style:{padding:"10px 20px",backgroundColor:"white",borderRadius:"12px",boxShadow:"0 4px 6px rgba(0,0,0,0.05)",display:"flex",gap:"20px"},children:u.jsxs("div",{style:{textAlign:"right"},children:[u.jsx("div",{style:{fontSize:"10px",color:"#718096",fontWeight:"bold",textTransform:"uppercase"},children:"UV INDEX"}),u.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",color:"#e53e3e"},children:e?.uv_index||"Moderate (4)"})]})})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"24px",marginBottom:"24px"},children:[u.jsx("div",{className:"card",style:{gridColumn:"span 2",padding:"40px",background:"linear-gradient(135deg, #2b6cb0 0%, #2d3748 100%)",color:"white",border:"none",borderRadius:"24px",position:"relative",overflow:"hidden",boxShadow:"0 20px 25px -5px rgba(0, 0, 0, 0.1), 0 10px 10px -5px rgba(0, 0, 0, 0.04)"},children:u.jsxs("div",{style:{position:"relative",zIndex:1},children:[u.jsx("div",{style:{fontSize:"16px",fontWeight:"bold",opacity:.9,marginBottom:"8px"},children:"NOW AT THE FIELD"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"40px"},children:[u.jsxs("div",{style:{fontSize:"84px",fontWeight:"800",letterSpacing:"-2px"},children:[e?.temperature_avg||"24","c"]}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"32px",fontWeight:"600"},children:e?.conditions||"Clear Sky"}),u.jsxs("div",{style:{fontSize:"16px",opacity:.8},children:["Feels like ",Math.round((e?.temperature_avg||24)*1.05),"c"]})]}),u.jsx("div",{style:{fontSize:"100px",marginLeft:"auto"},children:""})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(4, 1fr)",gap:"20px",marginTop:"40px"},children:[{label:"Humidity",val:(e?.humidity||"62")+"%",icon:""},{label:"Wind Speed",val:(e?.wind_speed||"14")+" km/h",icon:""},{label:"Pressure",val:(e?.pressure||"1012")+" hPa",icon:""},{label:"Dew Point",val:(e?.dew_point||"16")+" C",icon:""}].map(p=>u.jsxs("div",{style:{background:"rgba(255,255,255,0.1)",padding:"15px",borderRadius:"16px",backdropFilter:"blur(10px)"},children:[u.jsx("div",{style:{fontSize:"20px",marginBottom:"5px"},children:p.icon}),u.jsx("div",{style:{fontSize:"11px",opacity:.7,fontWeight:"bold"},children:(p.label||"Metric").toUpperCase()}),u.jsx("div",{style:{fontSize:"18px",fontWeight:"bold"},children:p.val})]},p.label))})]})}),u.jsxs("div",{className:"card",style:{borderRadius:"24px",padding:"30px",border:"none",boxShadow:"0 4px 6px rgba(0,0,0,0.05)"},children:[u.jsxs("div",{className:"flex a-center j-between",style:{marginBottom:"20px"},children:[u.jsx("h3",{style:{margin:0,fontSize:"18px",color:"#2d3748"},children:"Spray Window"}),u.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"bold",backgroundColor:l.color+"22",color:l.color},children:l.status})]}),u.jsxs("div",{style:{textAlign:"center",margin:"30px 0"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"10px"},children:l.status==="EXCELLENT"?"":""}),u.jsx("p",{style:{color:"#4a5568",fontSize:"14px",lineHeight:"1.6"},children:l.tip})]}),u.jsxs("div",{style:{borderTop:"1px solid #edf2f7",paddingTop:"20px"},children:[u.jsxs("div",{style:{marginBottom:"15px"},children:[u.jsxs("div",{className:"flex j-between",style:{fontSize:"12px",marginBottom:"5px"},children:[u.jsx("span",{children:"Wind Suitability"}),u.jsxs("span",{children:[Math.max(0,100-(e?.wind_speed||0)*5),"%"]})]}),u.jsx("div",{style:{height:"6px",backgroundColor:"#edf2f7",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{height:"100%",width:`${Math.max(0,100-(e?.wind_speed||0)*5)}%`,backgroundColor:l.color}})})]}),u.jsxs("div",{children:[u.jsxs("div",{className:"flex j-between",style:{fontSize:"12px",marginBottom:"5px"},children:[u.jsx("span",{children:"Rain Risk"}),u.jsx("span",{children:e?.precipitation>0?"High":"None"})]}),u.jsx("div",{style:{height:"6px",backgroundColor:"#edf2f7",borderRadius:"3px",overflow:"hidden"},children:u.jsx("div",{style:{height:"100%",width:e?.precipitation>0?"100%":"5%",backgroundColor:e?.precipitation>0?"#e53e3e":"#27ae60"}})})]})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.5fr 1fr",gap:"24px"},children:[u.jsxs("div",{className:"card",style:{borderRadius:"24px",border:"none"},children:[u.jsx("h3",{style:{fontSize:"18px",marginBottom:"20px",color:"#2d3748"},children:"Agricultural Forecast (5-Day)"}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(5, 1fr)",gap:"15px"},children:[1,2,3,4,5].map(p=>u.jsxs("div",{style:{textAlign:"center",padding:"20px 10px",borderRadius:"20px",backgroundColor:p===1?"#ebf8ff":"#f8f9fa",border:p===1?"1px solid #bee3f8":"1px solid transparent"},children:[u.jsx("div",{style:{fontSize:"12px",color:"#718096",fontWeight:"bold",marginBottom:"10px"},children:new Date(Date.now()+p*864e5).toLocaleDateString("en-US",{weekday:"short"})}),u.jsx("div",{style:{fontSize:"32px",marginBottom:"10px"},children:p%2===0?"":""}),u.jsx("div",{style:{fontWeight:"800",fontSize:"18px",color:"#2d3748"},children:"29"}),u.jsx("div",{style:{fontSize:"12px",color:"#a0aec0"},children:"21"}),u.jsxs("div",{style:{marginTop:"15px",fontSize:"10px",color:"#2d3748",background:"white",padding:"4px",borderRadius:"6px"},children:["GDD: ",$6(29,21)]})]},p))})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[u.jsxs("div",{className:"card",style:{borderRadius:"24px",background:"#fffaf0",border:"1px solid #feebc8"},children:[u.jsxs("div",{className:"flex a-center",style:{gap:"10px",marginBottom:"15px"},children:[u.jsx("div",{style:{backgroundColor:"#f6ad55",padding:"8px",borderRadius:"10px",fontSize:"20px"},children:""}),u.jsx("h3",{style:{margin:0,fontSize:"16px",color:"#7b341e"},children:"Agronomy Advisor AI"})]}),u.jsxs("p",{style:{margin:0,fontSize:"14px",color:"#9c4221",lineHeight:"1.6",fontWeight:"500"},children:['"',d,'"']})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"15px"},children:[u.jsxs("div",{className:"card",style:{borderRadius:"20px",border:"none",background:"white",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"11px",color:"#718096",fontWeight:"bold"},children:"SEASONAL GDD"}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#2f855a"},children:"1,242"}),u.jsx("span",{style:{fontSize:"10px",color:"#48bb78"},children:"+12% vs avg"})]}),u.jsxs("div",{className:"card",style:{borderRadius:"20px",border:"none",background:"white",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"11px",color:"#718096",fontWeight:"bold"},children:"CROP HEAT UNITS"}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"bold",color:"#c05621"},children:"2,850"}),u.jsx("span",{style:{fontSize:"10px",color:"#718096"},children:"Healthy pace"})]})]})]})]})]})},tN=$o((t,e)=>({documents:[],loading:!1,fetchDocuments:async n=>{t({loading:!0});try{const i=await zt.get(`/farms/${n}/documents`);t({documents:i.data,loading:!1})}catch{t({loading:!1})}},uploadDocument:async(n,i,r)=>{t({loading:!0});try{const a=new FormData;a.append("file",i),a.append("farm_id",n),Object.keys(r).forEach(d=>a.append(d,r[d]));const l=await zt.post("/documents/upload",a,{headers:{"Content-Type":"multipart/form-data"}});return t(d=>({documents:[...d.documents,l.data],loading:!1})),l.data}catch(a){throw t({loading:!1}),a}},deleteDocument:async n=>{try{await zt.delete(`/documents/${n}`),t(i=>({documents:i.documents.filter(r=>r.id!==n)}))}catch(i){throw i}}})),nN=()=>{const{currentFarm:t}=Pi(),{documents:e,fetchDocuments:n,uploadDocument:i,deleteDocument:r,loading:a}=tN(),{showNotification:l,showAlert:d,getConfirmation:p}=hr(),[g,m]=de.useState(null),[_,A]=de.useState({document_type:"photo",description:""});de.useEffect(()=>{t&&n(t.id)},[t,n]);const x=async R=>{if(R.preventDefault(),!!g)try{await i(t.id,g,_),l("Document uploaded successfully to the vault.","success"),m(null),A({document_type:"photo",description:""})}catch{d("UPLOAD_FAILURE")}};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsx("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Document Vault"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Secure storage for farm deeds, soil reports, and harvest photos."})]})}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"350px 1fr",gap:"24px"},children:[u.jsxs("div",{className:"card",style:{alignSelf:"start"},children:[u.jsx("h3",{style:{fontSize:"16px",marginBottom:"16px"},children:"Upload Document"}),u.jsxs("form",{onSubmit:x,children:[u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{children:"Select File"}),u.jsx("input",{type:"file",onChange:R=>m(R.target.files[0]),style:{fontSize:"12px"},required:!0})]}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{children:"Category"}),u.jsxs("select",{value:_.document_type,onChange:R=>A({..._,document_type:R.target.value}),children:[u.jsx("option",{value:"photo",children:"Photo (Crop/Field)"}),u.jsx("option",{value:"invoice",children:"Invoice / Receipt"}),u.jsx("option",{value:"contract",children:"Legal / Contract"}),u.jsx("option",{value:"report",children:"Soil / Lab Report"}),u.jsx("option",{value:"other",children:"Other"})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Description"}),u.jsx("textarea",{value:_.description,onChange:R=>A({..._,description:R.target.value}),placeholder:"Brief summary of the document...",rows:"3",style:{fontSize:"12px"}})]}),u.jsx("button",{type:"submit",className:"primary",style:{width:"100%"},disabled:a||!g,children:a?"Uploading...":"Upload to Vault"})]})]}),u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{fontSize:"16px",marginBottom:"20px"},children:"Stored Files"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(200px, 1fr))",gap:"16px"},children:[e.map(R=>u.jsxs("div",{className:"card",style:{padding:"12px",position:"relative"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"12px",textAlign:"center"},children:R.file_type?.includes("image")?"":""}),u.jsx("div",{style:{fontSize:"13px",fontWeight:"bold",whiteSpace:"nowrap",overflow:"hidden",textOverflow:"ellipsis"},children:R.file_name}),u.jsxs("div",{style:{fontSize:"11px",color:"var(--text-muted)",marginBottom:"8px"},children:[R.document_type,"  ",(R.file_size/1024).toFixed(1)," KB"]}),u.jsxs("div",{style:{display:"flex",gap:"8px",marginTop:"12px"},children:[u.jsx("a",{href:R.file_url,target:"_blank",rel:"noreferrer",className:"outline",style:{flex:1,fontSize:"11px",textAlign:"center",textDecoration:"none",padding:"4px"},children:"View"}),u.jsx("button",{className:"outline",style:{flex:1,fontSize:"11px",color:"var(--error)",borderColor:"#ffcdd2"},onClick:()=>{const M=p("DELETE_FILE"),k=M?`${M.title}
----------------------------------
${M.body}`:"Delete this document permanently?";window.confirm(k)&&r(R.id)},children:"Delete"})]})]},R.id)),e.length===0&&u.jsx("div",{style:{gridColumn:"1 / -1",textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"Your vault is empty. Keep your farm records organized by uploading documents."})]})]})]})]})},_2=({farmId:t,onComplete:e,initialData:n=null})=>{const{createInfrastructure:i,updateInfrastructure:r,infrastructure:a}=Zl(),{currentFarm:l,fields:d}=Pi(),{showNotification:p,showAlert:g}=hr(),[m,_]=de.useState(n?.field_id||""),A=(d||[]).find(B=>B?.id?.toString()===m),[x,R]=de.useState({name:n?.name||"",type:n?.type||"",status:n?.status||"operational",construction_date:n?.construction_date||new Date().toISOString().split("T")[0],cost:n?.cost||"",notes:n?.notes||"",boundary_coordinates:n?.boundary?.coordinates?.[0]||[],boundary_manual:n?.boundary_manual||(n?.boundary?.coordinates?.[0]?n.boundary.coordinates[0].map(B=>`${B[1]}, ${B[0]}`).join(`
`):""),area_sqm:n?.area_sqm||"",perimeter:n?.perimeter||"",field_id:n?.field_id||""}),[M,k]=de.useState(!1);de.useEffect(()=>{R(B=>({...B,field_id:m}))},[m]);const I=B=>{try{const ee=B.split(`
`).filter(ue=>ue.trim()).map(ue=>{const _e=ue.split(/[,\s]+/).map(fe=>parseFloat(fe.trim()));return _e.length>=2?[_e[1],_e[0]]:null}).filter(ue=>ue!==null);if(ee.length>=3){const ue=xc([ee]),_e=Jc(ue),fe=iy(ue,{units:"meters"});R(G=>({...G,boundary_coordinates:ee,area_sqm:_e.toFixed(2),perimeter:fe.toFixed(2),boundary_manual:B}))}else R(ue=>({...ue,boundary_manual:B,boundary_coordinates:[]}))}catch{R(ee=>({...ee,boundary_manual:B}))}},Y=async B=>{B.preventDefault(),k(!0);const V=t||l?.id;if(!V){g("NO_FARM_SELECTION"),k(!1);return}try{const ee=fe=>{if(fe===""||fe===null||fe===void 0)return null;const G=parseFloat(fe);return isNaN(G)?null:G},ue={...x,field_id:m||null,cost:ee(x.cost),area_sqm:ee(x.area_sqm),perimeter:ee(x.perimeter)};let _e;n?await r(n.id,ue):await i(V,ue),e&&e()}catch(ee){console.error("Registration failed:",ee)}finally{k(!1)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"850px",margin:"0 auto",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",padding:"0"},children:[u.jsx(Kl,{title:n?"Edit Farm Infrastructure":"Create New Farm Infrastructure",subtitle:"Design and register physical farm structures or layouts",icon:""}),u.jsxs("form",{onSubmit:Y,style:{padding:"24px"},children:[u.jsxs("div",{style:{marginBottom:"24px",paddingBottom:"24px",borderBottom:"1px solid #edf2f7"},children:[u.jsx("label",{htmlFor:"field_id",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"TARGET FARM (OPTIONAL)"}),u.jsx("p",{style:{fontSize:"12px",color:"var(--text-muted)",marginBottom:"12px"},children:"Select a field to center the map and allocate the structure within its boundaries."}),u.jsxs("select",{id:"field_id",name:"field_id",value:m,onChange:B=>_(B.target.value),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[u.jsx("option",{value:"",children:"-- Farm Level (Not specific to a field) --"}),(d||[]).map(B=>u.jsxs("option",{value:B.id,children:[B.name," (",B.area," ha)"]},B.id))]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"name",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Asset Name"}),u.jsx("input",{id:"name",name:"name",type:"text",placeholder:"e.g. Main Warehouse",value:x.name,onChange:B=>R({...x,name:B.target.value}),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"type",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Type"}),u.jsxs("select",{id:"type",name:"type",value:x.type,onChange:B=>R({...x,type:B.target.value}),required:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[u.jsx("option",{value:"",children:"-- Select Type --"}),ay.map(B=>u.jsxs("option",{value:B.id,children:[B.icon," ",B.label]},B.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"status",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Status"}),u.jsxs("select",{id:"status",name:"status",value:x.status,onChange:B=>R({...x,status:B.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"},children:[u.jsx("option",{value:"operational",children:"Operational"}),u.jsx("option",{value:"under_construction",children:"Under Construction"}),u.jsx("option",{value:"maintenance",children:"Maintenance"}),u.jsx("option",{value:"retired",children:"Retired"})]})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#fcfcfc",marginBottom:"24px",border:"1px solid #e0e0e0",padding:"0",overflow:"hidden"},children:[u.jsxs("div",{style:{padding:"16px 20px",backgroundColor:"#f8f9fa",borderBottom:"1px solid #e0e0e0",display:"flex",justifyContent:"space-between",alignItems:"center"},children:[u.jsx("h4",{style:{margin:0,fontSize:"13px",color:"var(--primary)",textTransform:"uppercase",letterSpacing:"0.05em"},children:"Structure Location Plan"}),u.jsx("span",{style:{fontSize:"12px",color:"var(--text-muted)"},children:"Allocate space for this building on the map"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"minmax(240px, 1fr) 2fr",height:"400px"},children:[u.jsxs("div",{style:{padding:"16px",backgroundColor:"#f1f5f9",borderRight:"1px solid #e2e8f0",display:"flex",flexDirection:"column"},children:[u.jsx("label",{htmlFor:"boundary_manual",style:{fontSize:"11px",fontWeight:"bold",marginBottom:"8px",color:"#4a5568"},children:"SURVEY COORDINATES (LAT, LNG)"}),u.jsx("textarea",{id:"boundary_manual",name:"boundary_manual",value:x.boundary_manual,onChange:B=>I(B.target.value),placeholder:`4.05, 9.71
4.06, 9.71...`,style:{flex:1,fontSize:"11px",fontFamily:"monospace",padding:"10px",borderRadius:"4px",border:"1px solid #cbd5e0",resize:"none"}})]}),u.jsx("div",{style:{height:"100%"},children:u.jsx(Id,{center:A?.boundary?.coordinates?.[0]?.[0]?[A.boundary.coordinates[0][0][1],A.boundary.coordinates[0][0][0]]:l?.boundary?.coordinates?.[0]?.[0]?[l.boundary.coordinates[0][0][1],l.boundary.coordinates[0][0][0]]:[3.848,11.502],farmBoundary:A?.boundary||l?.boundary,fields:d,infrastructure:a.filter(B=>B.id!==n?.id),manualCoordinates:x.boundary_coordinates,editable:!0,currentLabel:x.name,onBoundaryCreate:B=>{R(V=>({...V,boundary_coordinates:B.coordinates,boundary_manual:B.coordinates.map(ee=>`${ee[1]}, ${ee[0]}`).join(`
`),area_sqm:(B.area*1e4).toFixed(2),perimeter:B.perimeter}))}})})]}),x.boundary_coordinates.length>0&&u.jsxs("div",{style:{padding:"12px 20px",backgroundColor:"#fffbe6",borderTop:"1px solid #ffe58f",fontSize:"12px",display:"flex",gap:"30px"},children:[u.jsxs("span",{children:[u.jsx("strong",{children:"Ground Area:"})," ",x.area_sqm," m"]}),u.jsxs("span",{children:[u.jsx("strong",{children:"Perimeter:"})," ",x.perimeter," m"]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{htmlFor:"construction_date",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Construction Date"}),u.jsx("input",{id:"construction_date",name:"construction_date",type:"date",value:x.construction_date,onChange:B=>R({...x,construction_date:B.target.value}),style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%"}})]}),u.jsxs("div",{children:[u.jsx("label",{htmlFor:"cost",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Asset Cost (XAF)"}),u.jsx("input",{id:"cost",name:"cost",type:"text",value:parseFloat(x.cost||0).toLocaleString(),readOnly:!0,style:{padding:"10px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",backgroundColor:"#f8fafc",fontWeight:"bold"}}),u.jsx("p",{style:{fontSize:"11px",color:"#718096",marginTop:"4px"},children:"Automatic: Sum of all associated infrastructure log operations."})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{htmlFor:"notes",style:{fontSize:"13px",fontWeight:"bold",color:"#4a5568",marginBottom:"8px",display:"block"},children:"Additional Notes"}),u.jsx("textarea",{id:"notes",name:"notes",value:x.notes,onChange:B=>R({...x,notes:B.target.value}),placeholder:"Details about building materials, purpose, etc.",rows:"3",style:{padding:"12px",borderRadius:"8px",border:"1px solid #e2e8f0",width:"100%",resize:"vertical"}})]}),u.jsxs("div",{style:{display:"flex",gap:"16px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"14px",fontSize:"16px"},disabled:M,children:M?"Saving...":n?"Update Infrastructure Asset":"Create Infrastructure"}),u.jsx("button",{type:"button",onClick:e,className:"outline",style:{flex:1,padding:"14px"},children:"Discard"})]})]})]})},iN=()=>{const{currentFarm:t,fields:e,fetchFields:n}=Pi(),{infrastructure:i,fetchInfrastructure:r,deleteInfrastructure:a,loading:l}=Zl(),[d,p]=de.useState("list"),[g,m]=de.useState(null);if(de.useEffect(()=>{t&&(r(t.id),n(t.id))},[t,r,n]),!t)return u.jsx("div",{style:{padding:"24px"},children:"Please select a farm to view infrastructure."});if(d==="add")return u.jsx(_2,{farmId:t.id,onComplete:()=>p("list")});if(d==="edit")return u.jsx(_2,{farmId:t.id,initialData:g,onComplete:()=>p("list")});if(d==="view"&&g){const _=ay.find(x=>x.id===g.type),A=e.find(x=>x.id===g.field_id);return u.jsx("div",{className:"animate-fade-in",style:{maxWidth:"850px",margin:"0 auto",padding:"24px"},children:u.jsxs("div",{className:"card",style:{padding:"32px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsxs("h2",{style:{margin:0},children:["Asset Details: ",g.name]}),u.jsx("button",{className:"outline",onClick:()=>p("list"),children:"Back to List"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"32px"},children:[u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"TYPE"}),u.jsxs("div",{style:{fontSize:"16px",marginTop:"4px"},children:[_?.icon," ",_?.label||g.type]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"STATUS"}),u.jsx("div",{style:{fontSize:"16px",marginTop:"4px",textTransform:"capitalize"},children:g.status.replace("_"," ")})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"CONSTRUCTION DATE"}),u.jsx("div",{style:{fontSize:"16px",marginTop:"4px"},children:g.construction_date||"N/A"})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"COST"}),u.jsxs("div",{style:{fontSize:"16px",marginTop:"4px"},children:[parseFloat(g.cost||0).toLocaleString()," XAF"]})]})]}),u.jsxs("div",{children:[u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"GROUND AREA"}),u.jsxs("div",{style:{fontSize:"16px",marginTop:"4px"},children:[g.area_sqm||0," m"]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"PERIMETER"}),u.jsxs("div",{style:{fontSize:"16px",marginTop:"4px"},children:[g.perimeter||0," m"]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"bold",color:"#666"},children:"NOTES"}),u.jsx("div",{style:{fontSize:"16px",marginTop:"4px",color:"#444"},children:g.notes||"No notes provided."})]})]})]}),g.boundary?.coordinates?.[0]?.[0]&&u.jsx("div",{style:{marginTop:"32px",height:"300px",borderRadius:"12px",overflow:"hidden",border:"1px solid #eee"},children:u.jsx(Id,{center:[g.boundary.coordinates[0][0][1],g.boundary.coordinates[0][0][0]],infrastructure:[g],fields:A?[A]:[],farmBoundary:g.boundary,zoom:17,editable:!1})}),u.jsxs("div",{style:{marginTop:"32px",display:"flex",gap:"16px"},children:[u.jsx("button",{className:"primary",onClick:()=>p("edit"),style:{flex:1},children:"Edit Asset"}),u.jsx("button",{className:"outline",onClick:async()=>{const{getConfirmation:x,showNotification:R}=hr.getState(),M=x("DELETE_INFRA"),k=M?`${M.title}
------------------
${M.body}`:"Delete this asset?";if(window.confirm(k))try{const I=await a(g.id);R(I?.notification?.message||"Infrastructure deleted","success"),p("list")}catch(I){R(I.response?.data?.notification?.message||"Delete failed","error")}},style:{flex:1,color:"#dc3545",borderColor:"#ffccd1"},children:"Delete Asset"})]})]})})}return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Infrastructures"}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:["Manage buildings, storage, and systems at ",t?.name,"."]})]}),u.jsx("button",{className:"primary",onClick:()=>p("add"),children:"+ Create New Infrastructure"})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:[i.map(_=>{const A=ay.find(x=>x.id===_.type);return u.jsxs("div",{className:"card hover-glow",style:{padding:"20px"},children:[u.jsxs("div",{className:"flex j-between a-start",style:{marginBottom:"16px"},children:[u.jsx("div",{style:{fontSize:"24px"},children:A?.icon||""}),u.jsx("span",{style:{padding:"4px 8px",borderRadius:"4px",fontSize:"10px",fontWeight:"bold",textTransform:"uppercase",backgroundColor:_.status==="operational"?"var(--bg-success)":_.status==="under_construction"?"#e8f0fe":"#fef7e0",color:_.status==="operational"?"var(--success)":_.status==="under_construction"?"#1967d2":"#b05d22"},children:_.status.replace("_"," ")})]}),u.jsx("h3",{style:{margin:"0 0 4px 0",fontSize:"18px"},children:_.name}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"12px",marginBottom:"16px"},children:A?.label||_.type}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"12px",marginBottom:"20px"},children:[u.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"10px",color:"#666",fontWeight:"bold"},children:"GROUND AREA"}),u.jsxs("div",{style:{fontSize:"14px",fontWeight:"bold"},children:[_.area_sqm||0," m"]})]}),u.jsxs("div",{style:{backgroundColor:"#f8f9fa",padding:"10px",borderRadius:"8px"},children:[u.jsx("div",{style:{fontSize:"10px",color:"#666",fontWeight:"bold"},children:"COST"}),u.jsx("div",{style:{fontSize:"14px",fontWeight:"bold"},children:parseFloat(_.cost||0).toLocaleString()})]})]}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("button",{className:"outline",style:{flex:1,fontSize:"12px"},onClick:()=>{m(_),p("view")},children:"View Details"}),u.jsx("button",{className:"outline",style:{width:"40px"},onClick:()=>{m(_),p("edit")},children:""}),u.jsx("button",{className:"outline",style:{color:"var(--error)",borderColor:"var(--error)",width:"40px"},onClick:async()=>{const{getConfirmation:x,showNotification:R}=hr.getState(),M=x("DELETE_INFRA"),k=M?`${M.title}
------------------
${M.body}`:"Delete this asset?";if(window.confirm(k))try{const I=await a(_.id);R(I?.notification?.message||"Infrastructure deleted","success")}catch(I){R(I.response?.data?.notification?.message||"Delete failed","error")}},children:""})]})]},_.id)}),u.jsxs("div",{onClick:()=>p("add"),style:{border:"2px dashed #ddd",borderRadius:"12px",display:"flex",flexDirection:"column",alignItems:"center",justifyContent:"center",height:"243px",cursor:"pointer",color:"#666"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"12px"},children:""}),u.jsx("div",{style:{fontWeight:"bold"},children:"Create New Infrastructure"})]})]})]})},rN=()=>{const{currentFarm:t}=Pi(),{costSettings:e,fetchSettings:n,createSetting:i,updateSetting:r,deleteSetting:a}=Jy(),{showNotification:l,showConfirm:d}=hr(),[p,g]=de.useState(!1),[m,_]=de.useState(null),[A,x]=de.useState({category:"Labor",name:"",unit:"Day",unit_cost:"",billing_frequency:"per_unit",notes:""});de.useEffect(()=>{t?.id&&n(t.id)},[t?.id,n]);const R=B=>B?parseFloat(B).toLocaleString("en-US"):"0",M=async B=>{if(B.preventDefault(),!!t)try{m?(await r(m,{...A,farm_id:t.id}),l("COST SETTING UPDATED","success")):(await i(t.id,{...A,farm_id:t.id}),l("NEW COST PARAMETER DEFINED","success")),Y()}catch(V){V.isOfflineQueue?(l("REQUEST QUEUED: WILL SYNC WHEN ONLINE","info"),Y()):l("OPERATION FAILED: CHECK CONSOLE","error")}},k=B=>{_(B.id),x({category:B.category,name:B.name,unit:B.unit,unit_cost:B.unit_cost,billing_frequency:B.billing_frequency,notes:B.notes||""}),g(!0)},I=B=>{d("DELETE_COST",async()=>{try{await a(B),l("COST PARAMETER REMOVED","success")}catch{l("DELETE FAILED","error")}})},Y=()=>{g(!1),_(null),x({category:"Labor",name:"",unit:"Day",unit_cost:"",billing_frequency:"per_unit",notes:""})};return p?u.jsxs("div",{className:"animate-fade-in",style:{maxWidth:"800px",margin:"0 auto",backgroundColor:"#fff",borderRadius:"12px",boxShadow:"0 4px 20px rgba(0,0,0,0.08)",overflow:"hidden"},children:[u.jsx("div",{style:{backgroundColor:"var(--primary)",padding:"24px 40px",color:"white"},children:u.jsxs("h1",{style:{margin:0,fontSize:"24px",fontWeight:"700"},children:[m?"Edit":"New"," Cost Parameter"]})}),u.jsxs("form",{onSubmit:M,style:{padding:"40px"},children:[u.jsxs("div",{style:{marginBottom:"30px"},children:[u.jsx("h3",{style:{fontSize:"14px",fontWeight:"700",color:"var(--text-primary)",textTransform:"uppercase",marginBottom:"24px"},children:"01. Parameter Details"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Category"}),u.jsxs("select",{value:A.category,onChange:B=>x({...A,category:B.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"Labor",children:"Labor (Manual/Skilled)"}),u.jsx("option",{value:"Machinery",children:"Machinery & Equipment"}),u.jsx("option",{value:"Inputs",children:"Inputs (Fertilizer/Seeds)"}),u.jsx("option",{value:"Services",children:"External Services"}),u.jsx("option",{value:"Overhead",children:"Operational Overhead"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Item Name"}),u.jsx("input",{type:"text",value:A.name,onChange:B=>x({...A,name:B.target.value}),placeholder:"e.g. Casual Weeding",required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"}})]})]})]}),u.jsxs("div",{style:{marginBottom:"30px"},children:[u.jsx("h3",{style:{fontSize:"14px",fontWeight:"700",color:"var(--text-primary)",textTransform:"uppercase",marginBottom:"24px"},children:"02. Valuation Metrics"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Unit of Measure"}),u.jsx("input",{type:"text",value:A.unit,onChange:B=>x({...A,unit:B.target.value}),placeholder:"e.g. Day, Ha, Liter",required:!0,style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Default Unit Cost (XAF)"}),u.jsx("input",{type:"number",value:A.unit_cost,onChange:B=>x({...A,unit_cost:B.target.value}),placeholder:"0.00",style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"12px",fontWeight:"600",color:"var(--text-secondary)",marginBottom:"8px",display:"block"},children:"Billing Type"}),u.jsxs("select",{value:A.billing_frequency,onChange:B=>x({...A,billing_frequency:B.target.value}),style:{width:"100%",padding:"12px",borderRadius:"8px",border:"1px solid var(--border)",fontSize:"14px",outline:"none"},children:[u.jsx("option",{value:"per_unit",children:"Variable (Per Unit)"}),u.jsx("option",{value:"fixed",children:"Fixed Cost (Flat)"}),u.jsx("option",{value:"monthly",children:"Recurring (Monthly)"})]})]})]})]}),u.jsxs("div",{style:{display:"flex",gap:"15px",marginTop:"40px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:2,padding:"14px"},children:m?"UPDATE PARAMETER":"SAVE CONFIGURATION"}),u.jsx("button",{type:"button",onClick:Y,className:"outline",style:{flex:1,padding:"14px"},children:"CANCEL"})]})]})]}):u.jsxs("div",{className:"animate-fade-in",children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"32px"},children:[u.jsxs("div",{children:[u.jsx("h2",{style:{fontSize:"24px",fontWeight:"800",margin:0,color:"var(--text-primary)"},children:"Operational Cost Matrix"}),u.jsx("p",{style:{fontSize:"14px",color:"var(--text-secondary)",marginTop:"4px"},children:"Standardize operational expenses for accurate budget forecasting."})]}),u.jsx("button",{className:"primary",onClick:()=>g(!0),children:"+ Define New Cost"})]}),u.jsxs("div",{style:{border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden",backgroundColor:"#fff",boxShadow:"0 2px 12px rgba(0,0,0,0.04)"},children:[u.jsx("div",{style:{padding:"16px 24px",borderBottom:"1px solid var(--border)",backgroundColor:"#f8fafc"},children:u.jsx("div",{style:{fontSize:"13px",fontWeight:"700",color:"var(--text-primary)"},children:"ACTIVE COST CONFIGURATIONS"})}),u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",borderBottom:"1px solid var(--border)"},children:[u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Category"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Item Name"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600"},children:"Billing"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600",textAlign:"right"},children:"Default Rate (XAF)"}),u.jsx("th",{style:{padding:"16px 24px",fontWeight:"600",textAlign:"center"},children:"Action"})]})}),u.jsxs("tbody",{children:[e.map(B=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"16px 24px",fontWeight:"600",color:"var(--primary)"},children:B.category}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"500"},children:B.name}),u.jsx("td",{style:{padding:"16px 24px",color:"var(--text-secondary)"},children:B.billing_frequency==="per_unit"?`Per ${B.unit}`:(B.billing_frequency||"Fixed").toUpperCase()}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"700",textAlign:"right"},children:R(B.unit_cost)}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"center"},children:u.jsxs("div",{style:{display:"flex",gap:"8px",justifyContent:"center"},children:[u.jsx("button",{onClick:()=>k(B),className:"outline",style:{padding:"6px 12px",fontSize:"11px"},children:"EDIT"}),u.jsx("button",{onClick:()=>I(B.id),className:"outline",style:{padding:"6px 12px",fontSize:"11px",color:"var(--error)",borderColor:"var(--error)"},children:"DEL"})]})})]},B.id)),e.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"60px",color:"var(--text-muted)",fontSize:"14px"},children:'No cost parameters defined. Click "+ Define New Cost" to start.'})})]})]})]})]})},aN=()=>{const{currentFarm:t}=Pi(),e=Yl(),i=new URLSearchParams(e.search).get("view")==="settings"?"settings":"overview",[r,a]=de.useState(i),[l,d]=de.useState([]),[p,g]=de.useState(!1),[m,_]=de.useState({totalActual:0,totalEstimated:0,totalLabor:0,totalInput:0,avgCostPerHa:0});de.useEffect(()=>{const R=new URLSearchParams(e.search).get("view");a(R==="settings"?"settings":"overview")},[e.search]),de.useEffect(()=>{t?.id&&r==="overview"&&A()},[t,r]);const A=async()=>{g(!0);try{const R=(await zt.get("/reports/crop-budget",{params:{farmId:t.id}})).data;d(R);const M=R.reduce((k,I)=>({actual:k.actual+I.actualCosts,estimated:k.estimated+I.estimatedCosts}),{actual:0,estimated:0});_(k=>({...k,totalActual:M.actual,totalEstimated:M.estimated}))}catch(x){console.error("Failed to fetch production costs",x)}finally{g(!1)}};return t?u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{style:{marginBottom:"32px",display:"flex",justifyContent:"space-between",alignItems:"flex-end"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Production Overview"}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:["Financial breakdown and operational cost configurations for ",t.name,"."]})]}),u.jsxs("div",{style:{display:"flex",gap:"10px"},children:[u.jsx("button",{onClick:()=>a("overview"),style:{padding:"10px 20px",border:"none",backgroundColor:r==="overview"?"#000":"#e0e0e0",color:r==="overview"?"#fff":"#000",fontWeight:"bold",cursor:"pointer"},children:"DASHBOARD"}),u.jsx("button",{onClick:()=>a("settings"),style:{padding:"10px 20px",border:"none",backgroundColor:r==="settings"?"#000":"#e0e0e0",color:r==="settings"?"#fff":"#000",fontWeight:"bold",cursor:"pointer"},children:"COST SETTINGS"}),r==="overview"&&u.jsx("button",{className:"primary",onClick:A,disabled:p,style:{marginLeft:"10px"},children:p?"Refreshing...":" Sync Data"})]})]}),r==="settings"?u.jsx(rN,{}):u.jsxs(u.Fragment,{children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fit, minmax(240px, 1fr))",gap:"20px",marginBottom:"32px"},children:[u.jsx(kv,{title:"Total Actual Cost",value:`${m.totalActual.toLocaleString()} XAF`,color:"#4caf50",icon:""}),u.jsx(kv,{title:"Budget Variance",value:`${(m.totalEstimated-m.totalActual).toLocaleString()} XAF`,color:m.totalEstimated>=m.totalActual?"#28a745":"#dc3545",icon:""}),u.jsx(kv,{title:"Active Cultivations",value:l.length,color:"#2196f3",icon:""})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"2fr 1fr",gap:"24px"},children:[u.jsxs("div",{className:"card",style:{padding:"0"},children:[u.jsx("div",{className:"card-header",style:{padding:"20px",borderBottom:"1px solid var(--border)"},children:u.jsx("h3",{style:{margin:0,fontSize:"18px"},children:"Crop Cost Breakdown"})}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",borderBottom:"2px solid var(--border)",fontSize:"12px",color:"var(--text-muted)"},children:[u.jsx("th",{style:{padding:"16px"},children:"Crop"}),u.jsx("th",{style:{padding:"16px"},children:"Field"}),u.jsx("th",{style:{padding:"16px"},children:"Estimated"}),u.jsx("th",{style:{padding:"16px"},children:"Actual"}),u.jsx("th",{style:{padding:"16px"},children:"Efficiency"})]})}),u.jsxs("tbody",{children:[l.map((x,R)=>{const M=x.estimatedCosts>0?x.actualCosts/x.estimatedCosts*100:0;return u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"16px"},children:u.jsx("div",{style:{fontWeight:"600"},children:x.crop})}),u.jsx("td",{style:{padding:"16px",color:"var(--text-muted)"},children:x.field}),u.jsx("td",{style:{padding:"16px"},children:x.estimatedCosts.toLocaleString()}),u.jsx("td",{style:{padding:"16px",fontWeight:"600"},children:x.actualCosts.toLocaleString()}),u.jsx("td",{style:{padding:"16px"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("div",{style:{flex:1,height:"8px",backgroundColor:"#eee",borderRadius:"4px",overflow:"hidden",minWidth:"60px"},children:u.jsx("div",{style:{width:`${Math.min(M,100)}%`,height:"100%",backgroundColor:M>100?"#dc3545":"#4caf50"}})}),u.jsxs("span",{style:{fontSize:"12px",fontWeight:"bold"},children:[M.toFixed(0),"%"]})]})})]},R)}),l.length===0&&u.jsx("tr",{children:u.jsx("td",{colSpan:"5",style:{textAlign:"center",padding:"40px",color:"var(--text-muted)"},children:"No cost data available yet. Start logging activities to see calculations."})})]})]})})]}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"24px"},children:[u.jsxs("div",{className:"card",children:[u.jsx("h3",{style:{fontSize:"16px",marginBottom:"20px"},children:"Cost Distribution"}),u.jsxs("div",{style:{display:"flex",flexDirection:"column",gap:"16px"},children:[u.jsxs("div",{style:{textAlign:"center",padding:"20px",backgroundColor:"#f8f9fa",borderRadius:"12px"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"8px"},children:""}),u.jsx("p",{style:{fontSize:"13px",color:"var(--text-muted)",margin:0},children:"AgriXP Logic: Tracking labor vs. input costs helps optimize your ROI per season."})]}),u.jsxs("div",{style:{marginTop:"10px"},children:[u.jsx("label",{style:{fontSize:"12px",color:"var(--text-muted)",display:"block",marginBottom:"8px"},children:"Budget Health"}),u.jsx("div",{style:{padding:"16px",borderRadius:"8px",backgroundColor:m.totalEstimated>=m.totalActual?"#d4edda":"#f8d7da",color:m.totalEstimated>=m.totalActual?"#155724":"#721c24",fontSize:"14px",fontWeight:"600"},children:m.totalEstimated>=m.totalActual?" You are currently operating within the estimated budget.":" Warning: Total actual costs have exceeded estimates."})]})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#1a1d21",color:"white"},children:[u.jsx("h3",{style:{fontSize:"16px",marginBottom:"16px",color:"#4caf50"},children:"Technical Tip"}),u.jsxs("p",{style:{fontSize:"13px",lineHeight:"1.6",color:"#adb5bd"},children:["To get the most accurate **Production Costs**, ensure you log every **Activity** with both:",u.jsx("br",{}),u.jsx("br",{}),"1. **Labor Costs** (Wages paid)",u.jsx("br",{}),"2. **Inventory Used** (Seeds, Fertilizer, fuel)"]})]})]})]})]})]}):u.jsxs("div",{style:{padding:"40px",textAlign:"center"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"20px"},children:""}),u.jsx("h2",{children:"Please select a farm to view Production Costs"})]})},kv=({title:t,value:e,color:n,icon:i})=>u.jsxs("div",{className:"card",style:{borderLeft:`4px solid ${n}`,display:"flex",alignItems:"center",gap:"16px",padding:"20px"},children:[u.jsx("div",{style:{width:"48px",height:"48px",borderRadius:"12px",backgroundColor:`${n}15`,display:"flex",alignItems:"center",justifyContent:"center",fontSize:"24px"},children:i}),u.jsxs("div",{children:[u.jsx("div",{style:{fontSize:"12px",color:"var(--text-muted)",textTransform:"uppercase",letterSpacing:"0.5px",marginBottom:"4px"},children:t}),u.jsx("div",{style:{fontSize:"20px",fontWeight:"800"},children:e})]})]}),oN=({onComplete:t})=>{const{currentFarm:e}=Pi(),{crops:n,fetchCropsByFarm:i}=vl(),[r,a]=de.useState(!1),[l,d]=de.useState({contract_type:"sales",partner_name:"",crop_id:"",quantity:"",unit:"kg",price_per_unit:"",start_date:new Date().toISOString().split("T")[0],end_date:"",status:"draft",delivery_terms:"",payment_terms:"",notes:""});de.useEffect(()=>{e?.id&&i(e.id)},[e]);const p=m=>{const{name:_,value:A}=m.target;d(x=>({...x,[_]:A}))},g=async m=>{m.preventDefault(),a(!0);const _=parseFloat(l.quantity)*parseFloat(l.price_per_unit),A={...l,farm_id:e.id,total_value:isNaN(_)?0:_};try{await zt.post("/contracts",A),alert("Contract created successfully!"),t()}catch(x){console.error(x),alert("Failed to create contract.")}finally{a(!1)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"800px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:"Create New Contract",subtitle:"Record official trade agreements and delivery obligations",icon:""}),u.jsxs("form",{onSubmit:g,style:{display:"grid",gap:"20px",padding:"24px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"CONTRACT TYPE"}),u.jsxs("select",{name:"contract_type",value:l.contract_type,onChange:p,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"},children:[u.jsx("option",{value:"sales",children:"Sales (Selling Crop)"}),u.jsx("option",{value:"purchase",children:"Purchase (Buying Input)"})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"PARTNER NAME"}),u.jsx("input",{type:"text",name:"partner_name",value:l.partner_name,onChange:p,required:!0,placeholder:"Client or Supplier Name",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"RELATED CROP (OPTIONAL)"}),u.jsxs("select",{name:"crop_id",value:l.crop_id,onChange:p,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"},children:[u.jsx("option",{value:"",children:"-- General / None --"}),n.map(m=>u.jsxs("option",{value:m.id,children:[m.crop_type," (",m.variety,")"]},m.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"STATUS"}),u.jsxs("select",{name:"status",value:l.status,onChange:p,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"},children:[u.jsx("option",{value:"draft",children:"Draft"}),u.jsx("option",{value:"active",children:"Active"}),u.jsx("option",{value:"completed",children:"Completed"})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"QUANTITY"}),u.jsx("input",{type:"number",name:"quantity",value:l.quantity,onChange:p,required:!0,step:"0.01",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"UNIT"}),u.jsx("input",{type:"text",name:"unit",value:l.unit,onChange:p,required:!0,placeholder:"kg, tons, etc.",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"PRICE PER UNIT (XAF)"}),u.jsx("input",{type:"number",name:"price_per_unit",value:l.price_per_unit,onChange:p,required:!0,step:"0.01",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"START DATE"}),u.jsx("input",{type:"date",name:"start_date",value:l.start_date,onChange:p,required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"END DATE"}),u.jsx("input",{type:"date",name:"end_date",value:l.end_date,onChange:p,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]})]}),u.jsx("hr",{style:{border:"none",borderTop:"1px solid #eee",width:"100%"}}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"PAYMENT TERMS"}),u.jsx("textarea",{name:"payment_terms",value:l.payment_terms,onChange:p,rows:3,placeholder:"e.g. 50% advance, 50% on delivery",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"DELIVERY TERMS"}),u.jsx("textarea",{name:"delivery_terms",value:l.delivery_terms,onChange:p,rows:3,placeholder:"e.g. FOB Farm Gate",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px"},children:"NOTES"}),u.jsx("textarea",{name:"notes",value:l.notes,onChange:p,rows:2,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ccc"}})]}),u.jsxs("div",{style:{display:"flex",justifyContent:"flex-end",gap:"16px",marginTop:"20px"},children:[u.jsx("button",{type:"button",className:"outline",onClick:t,children:"Cancel"}),u.jsx("button",{type:"submit",className:"primary",disabled:r,children:r?"Creating...":"Create Contract"})]})]})]})},sN=()=>{const{currentFarm:t}=Pi(),[e,n]=de.useState([]),[i,r]=de.useState(!0),[a,l]=de.useState("list");de.useEffect(()=>{t&&a==="list"&&d()},[t,a]);const d=async()=>{r(!0);try{const g=await zt.get(`/contracts/farm/${t.id}`);n(g.data)}catch(g){console.error("Error fetching contracts:",g)}finally{r(!1)}};if(!t)return u.jsx("div",{style:{padding:"24px"},children:"Please select a farm."});if(a==="add")return u.jsx(oN,{onComplete:()=>l("list")});const p=[{label:"Active Sales",value:(e||[]).filter(g=>g.contract_type==="sales"&&g.status==="active").length,color:"var(--success)"},{label:"Pending Purchases",value:(e||[]).filter(g=>g.contract_type==="purchase"&&g.status==="draft").length,color:"var(--warning)"},{label:"Total Value",value:`${(e||[]).reduce((g,m)=>g+parseFloat(m.total_value||0),0).toLocaleString()} XAF`,color:"var(--primary)"}];return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",maxWidth:"1400px",margin:"0 auto",width:"100%",boxSizing:"border-box"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Contract Registry"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Manage your sales and purchase agreements with partners."})]}),u.jsx("button",{className:"primary",onClick:()=>l("add"),children:"+ New Contract"})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"20px",marginBottom:"32px"},children:p.map((g,m)=>u.jsxs("div",{className:"card",style:{padding:"20px",borderLeft:`4px solid ${g.color}`},children:[u.jsx("div",{style:{fontSize:"11px",fontWeight:"800",color:"var(--text-muted)",textTransform:"uppercase"},children:g.label}),u.jsx("div",{style:{fontSize:"24px",fontWeight:"800",marginTop:"8px"},children:g.value})]},m))}),u.jsx("div",{className:"card",style:{padding:0},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"12px",color:"var(--text-muted)",borderBottom:"2px solid var(--border)",backgroundColor:"#fafafa"},children:[u.jsx("th",{style:{padding:"16px"},children:"TYPE"}),u.jsx("th",{style:{padding:"16px"},children:"PARTNER"}),u.jsx("th",{style:{padding:"16px"},children:"COMMODITY"}),u.jsx("th",{style:{padding:"16px"},children:"QUANTITY"}),u.jsx("th",{style:{padding:"16px"},children:"TOTAL VALUE"}),u.jsx("th",{style:{padding:"16px"},children:"STATUS"})]})}),u.jsxs("tbody",{children:[e.map(g=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},children:[u.jsx("td",{style:{padding:"16px"},children:u.jsx("span",{style:{padding:"4px 8px",borderRadius:"2px",fontSize:"10px",fontWeight:"900",backgroundColor:g.contract_type==="sales"?"#e8f5e9":"#e3f2fd",color:g.contract_type==="sales"?"#2e7d32":"#1565c0"},children:(g.contract_type||"General").toUpperCase()})}),u.jsx("td",{style:{padding:"16px",fontWeight:"700"},children:g.partner_name}),u.jsx("td",{style:{padding:"16px"},children:g.Crop?.crop_type||"General"}),u.jsxs("td",{style:{padding:"16px"},children:[g.quantity," ",g.unit]}),u.jsxs("td",{style:{padding:"16px",fontWeight:"700"},children:[parseFloat(g.total_value).toLocaleString()," ",u.jsx("span",{style:{fontSize:"10px"},children:"XAF"})]}),u.jsx("td",{style:{padding:"16px"},children:u.jsx("span",{style:{fontSize:"11px",fontWeight:"bold",color:g.status==="active"?"var(--success)":"#888"},children:(g.status||"Active").toUpperCase()})})]},g.id)),e.length===0&&!i&&u.jsx("tr",{children:u.jsx("td",{colSpan:"6",style:{textAlign:"center",padding:"40px",color:"#888"},children:"No contracts found."})})]})]})})]})},lN=({farmId:t,onComplete:e})=>{const{createInput:n}=vg(),{fields:i}=Pi(),{logActivity:r}=ml(),[a,l]=de.useState({input_type:"fertilizer",name:"",brand:"",category:"",active_ingredient:"",unit:"kg",quantity_in_stock:0,unit_cost:"",supplier:"",purchase_date:new Date().toISOString().split("T")[0],expiry_date:"",storage_location:"",notes:"",field_id:""}),[d,p]=de.useState(!1),g=async m=>{m.preventDefault(),p(!0);try{const _={...a,field_id:a.field_id===""?null:a.field_id},A=await n(t,_),x=parseFloat(a.unit_cost||0)*parseFloat(a.quantity_in_stock||0);x>0&&await r({farm_id:t,field_id:a.field_id||null,activity_type:"input_acquisition",activity_date:a.purchase_date||new Date().toISOString().split("T")[0],description:`Acquisition of ${a.name} (${a.quantity_in_stock} ${a.unit})`,material_cost:x,total_cost:x,transaction_type:"expense",work_status:"completed",notes:`Supplier: ${a.supplier||"N/A"}`});const{showNotification:R}=(await Mr(async()=>{const{default:M}=await Promise.resolve().then(()=>Su);return{default:M}},void 0)).default.getState();R(A?.notification?.message||"Item added to inventory & cost logged","success"),e&&e()}catch(_){console.error(_);const{showNotification:A}=(await Mr(async()=>{const{default:x}=await Promise.resolve().then(()=>Su);return{default:x}},void 0)).default.getState();A("Error adding to inventory","error")}finally{p(!1)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"800px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:"Register Input Acquisition",subtitle:"Log incoming agricultural supplies and materials",icon:""}),u.jsxs("form",{onSubmit:g,style:{padding:"24px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"20px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Associated Parcel (Field)"}),u.jsxs("select",{value:a.field_id,onChange:m=>l({...a,field_id:m.target.value}),children:[u.jsx("option",{value:"",children:"-- General Stock (No Parcel) --"}),i.map(m=>u.jsx("option",{value:m.id,children:m.name},m.id))]})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Input Type"}),u.jsxs("select",{value:a.input_type,onChange:m=>l({...a,input_type:m.target.value}),children:[u.jsx("option",{value:"fertilizer",children:"Fertilizer"}),u.jsx("option",{value:"pesticide",children:"Pesticide / Herbicide"}),u.jsx("option",{value:"seed",children:"Seeds"}),u.jsx("option",{value:"fuel",children:"Fuel"}),u.jsx("option",{value:"other",children:"Other Supplies"})]})]})]}),u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Product Name"}),u.jsx("input",{type:"text",placeholder:"e.g. Urea 46%, Roundup",value:a.name,onChange:m=>l({...a,name:m.target.value}),required:!0})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Brand / Manufacturer"}),u.jsx("input",{type:"text",value:a.brand,onChange:m=>l({...a,brand:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Category / Specialization"}),a.input_type==="pesticide"?u.jsxs("select",{value:a.category,onChange:m=>l({...a,category:m.target.value}),children:[u.jsx("option",{value:"",children:"-- Select Category --"}),u.jsx("option",{value:"herbicide",children:"Herbicide"}),u.jsx("option",{value:"insecticide",children:"Insecticide"}),u.jsx("option",{value:"fungicide",children:"Fungicide"}),u.jsx("option",{value:"rodenticide",children:"Rodenticide"}),u.jsx("option",{value:"growth_regulator",children:"Growth Regulator"}),u.jsx("option",{value:"other",children:"Other"})]}):u.jsx("input",{type:"text",value:a.category,onChange:m=>l({...a,category:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Unit of Measure"}),u.jsxs("select",{value:a.unit,onChange:m=>l({...a,unit:m.target.value}),children:[u.jsx("option",{value:"kg",children:"Kilograms (kg)"}),u.jsx("option",{value:"g",children:"Grams (g)"}),u.jsx("option",{value:"lb",children:"Pounds (lb)"}),u.jsx("option",{value:"oz",children:"Ounces (oz)"}),u.jsx("option",{value:"liters",children:"Liters (L)"}),u.jsx("option",{value:"ml",children:"Milliliters (ml)"}),u.jsx("option",{value:"gal",children:"Gallons (gal)"}),u.jsx("option",{value:"pt",children:"Pints (pt)"}),u.jsx("option",{value:"qt",children:"Quarts (qt)"}),u.jsx("option",{value:"bags",children:"Bags"}),u.jsx("option",{value:"tonnes",children:"Tonnes (t)"})]})]})]}),a.input_type==="pesticide"&&u.jsxs("div",{style:{marginBottom:"20px"},children:[u.jsx("label",{children:"Active Ingredient(s)"}),u.jsx("input",{type:"text",placeholder:"e.g. Glyphosate 360g/L",value:a.active_ingredient,onChange:m=>l({...a,active_ingredient:m.target.value})})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#fcfdfc",marginBottom:"20px"},children:[u.jsx("h4",{style:{fontSize:"12px",color:"var(--primary)",marginBottom:"12px",borderBottom:"1px solid #eee",paddingBottom:"6px"},children:"ACQUISITION & FINANCIALS"}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px"},children:"Acquisition Quantity"}),u.jsx("input",{type:"number",step:"0.01",value:a.quantity_in_stock,onChange:m=>l({...a,quantity_in_stock:m.target.value}),required:!0})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px"},children:"Unit Cost (XAF)"}),u.jsx("input",{type:"number",value:a.unit_cost,onChange:m=>l({...a,unit_cost:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{style:{fontSize:"11px"},children:"Purchase Date"}),u.jsx("input",{type:"date",value:a.purchase_date,onChange:m=>l({...a,purchase_date:m.target.value})})]})]})]}),u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr 1fr",gap:"16px",marginBottom:"20px"},children:[u.jsxs("div",{children:[u.jsx("label",{children:"Supplier"}),u.jsx("input",{type:"text",value:a.supplier,onChange:m=>l({...a,supplier:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Expiry Date"}),u.jsx("input",{type:"date",value:a.expiry_date,onChange:m=>l({...a,expiry_date:m.target.value})})]}),u.jsxs("div",{children:[u.jsx("label",{children:"Storage Location"}),u.jsx("input",{type:"text",placeholder:"e.g. Bin 4, Main Shed",value:a.storage_location,onChange:m=>l({...a,storage_location:m.target.value})})]})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{children:"Additional Notes"}),u.jsx("textarea",{value:a.notes,onChange:m=>l({...a,notes:m.target.value}),rows:"3"})]}),u.jsxs("div",{style:{display:"flex",gap:"12px"},children:[u.jsx("button",{type:"submit",className:"primary",style:{flex:1,fontWeight:"bold"},disabled:d,children:d?"Processing...":"Initialize Input & Log Cost"}),u.jsx("button",{type:"button",onClick:e,className:"outline",style:{flex:1},children:"Discard"})]})]})]})},cN=({farmId:t,onComplete:e,initialData:n=null})=>{const{createInfrastructure:i,updateInfrastructure:r,loading:a,error:l}=Zl(),{fields:d}=Pi(),{logActivity:p}=ml(),{costSettings:g,fetchSettings:m,createSetting:_}=Jy(),{showNotification:A}=hr(),[x,R]=de.useState({name:"",type:"Asset",status:"operational",capacity_value:"",capacity_unit:"MT",notes:"",sub_type:"Machinery",field_id:"",quantity:1,unit_price:"",acquisition_cost:0,purchase_date:new Date().toISOString().split("T")[0]});de.useEffect(()=>{t&&m(t)},[t,m]),de.useEffect(()=>{n&&R({name:n.name||"",type:n.type||"Asset",status:n.status||"operational",capacity_value:n.area_sqm||"",capacity_unit:n.capacity_unit||"MT",notes:n.notes||"",sub_type:n.sub_type||"Machinery",field_id:n.field_id||"",quantity:n.quantity||1,unit_price:n.unit_price||"",acquisition_cost:n.acquisition_cost||0,purchase_date:n.purchase_date||new Date().toISOString().split("T")[0]})},[n]),de.useEffect(()=>{const B=parseFloat(x.quantity)||0,V=parseFloat(x.unit_price)||0;R(ee=>({...ee,acquisition_cost:B*V}))},[x.quantity,x.unit_price]);const M=g.filter(B=>B.category==="ASSET_TYPE"),k=B=>{const{name:V,value:ee}=B.target;if(V==="sub_type"&&ee==="NEW_ASSET_TYPE"){I();return}R(ue=>({...ue,[V]:ee}))},I=async()=>{const B=prompt("Enter new Asset Category name:");if(B&&B.trim())try{await _(t,{category:"ASSET_TYPE",name:B.trim(),unit:"asset",unit_cost:0,billing_frequency:"per_unit"}),R(V=>({...V,sub_type:B.trim()})),A(`New category "${B}" added!`,"success")}catch(V){console.error("Failed to create custom asset category:",V),A("Failed to create custom category.","error")}},Y=async B=>{B.preventDefault();try{const V=_e=>{if(_e===""||_e===null||_e===void 0)return null;const fe=parseFloat(_e);return isNaN(fe)?null:fe},ue={...x,field_id:(_e=>_e===""||_e===null||_e===void 0?null:_e)(x.field_id),area_sqm:V(x.capacity_value),quantity:V(x.quantity),unit_price:V(x.unit_price),acquisition_cost:V(x.acquisition_cost)};if(n)await r(n.id,ue);else{const _e=await i(t,ue);ue.acquisition_cost>0&&await p({farm_id:t,field_id:ue.field_id||null,activity_type:"asset_acquisition",activity_date:ue.purchase_date||new Date().toISOString().split("T")[0],description:`Acquisition of ${ue.name} (${ue.sub_type})`,other_cost:parseFloat(ue.acquisition_cost),total_cost:parseFloat(ue.acquisition_cost),transaction_type:"expense",work_status:"completed",infrastructure_id:_e.id})}e()}catch(V){console.error("Failed to save storage unit:",V)}};return u.jsxs("div",{className:"card animate-fade-in",style:{maxWidth:"650px",margin:"0 auto",padding:"0"},children:[u.jsx(Kl,{title:n?"Edit Farm Asset":"Add New Farm Asset",subtitle:"Classify and register physical infrastructure or machinery",icon:""}),l&&u.jsx("div",{style:{color:"red",marginBottom:"16px",fontSize:"14px"},children:l}),u.jsxs("form",{onSubmit:Y,children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1fr 1fr",gap:"16px",marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--text-muted)"},children:"ASSET NAME"}),u.jsx("input",{type:"text",name:"name",value:x.name,onChange:k,required:!0,placeholder:"e.g. John Deere Tractor",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid var(--border)"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--primary)"},children:"ASSOCIATED PARCEL (FIELD) *"}),u.jsxs("select",{name:"field_id",value:x.field_id,onChange:k,required:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"2px solid var(--primary)",fontWeight:"bold"},children:[u.jsx("option",{value:"",children:"-- SELECT FIELD FIRST --"}),d.map(B=>u.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),u.jsxs("div",{onClick:()=>!x.field_id&&A("PLEASE SELECT AN ASSOCIATED PARCEL (FIELD) TO UNLOCK THE FORM.","warning"),style:{opacity:x.field_id?1:.6,transition:"opacity 0.3s ease"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"1.2fr 1fr",gap:"16px",marginBottom:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--text-muted)"},children:"ASSET CATEGORY"}),u.jsxs("select",{name:"sub_type",value:x.sub_type,onChange:k,disabled:!x.field_id,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid var(--border)",backgroundColor:x.field_id?"white":"#f5f5f5"},children:[u.jsxs("optgroup",{label:"Standard Categories",children:[u.jsx("option",{value:"Machinery",children:"Machinery / Equipment"}),u.jsx("option",{value:"Vehicle",children:"Vehicle / Tractor"}),u.jsx("option",{value:"Silo",children:"Silo / Storage Structure"}),u.jsx("option",{value:"Warehouse",children:"Warehouse"}),u.jsx("option",{value:"Irrigation",children:"Irrigation System"}),u.jsx("option",{value:"Livestock",children:"Livestock Equipment"}),u.jsx("option",{value:"Power",children:"Power & Generators"}),u.jsx("option",{value:"Tools",children:"Manual Tools"}),u.jsx("option",{value:"Processing",children:"Processing Machinery"}),u.jsx("option",{value:"ICT",children:"ICT & Smart Farming Sensors"}),u.jsx("option",{value:"Buildings",children:"General Farm Buildings"}),u.jsx("option",{value:"Other",children:"Other"})]}),M.length>0&&u.jsx("optgroup",{label:"Custom Asset Types",children:M.map(B=>u.jsx("option",{value:B.name,children:B.name},B.id))}),u.jsx("option",{value:"NEW_ASSET_TYPE",style:{fontWeight:"bold",color:"var(--primary)"},children:" ADD NEW CATEGORY..."})]})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--text-muted)"},children:"OPERATIONAL STATUS"}),u.jsxs("select",{name:"status",value:x.status,onChange:k,disabled:!x.field_id,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid var(--border)",backgroundColor:x.field_id?"white":"#f5f5f5"},children:[u.jsx("option",{value:"operational",children:"Operational"}),u.jsx("option",{value:"under_construction",children:"Under Construction / Installation"}),u.jsx("option",{value:"maintenance",children:"Maintenance"}),u.jsx("option",{value:"retired",children:"Retired / Decommissioned"})]})]})]}),u.jsxs("div",{style:{marginBottom:"16px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--text-muted)"},children:"CAPACITY / SIZE"}),u.jsxs("div",{style:{display:"flex",gap:"8px"},children:[u.jsx("input",{type:"number",name:"capacity_value",value:x.capacity_value,onChange:k,disabled:!x.field_id,placeholder:"Value",style:{flex:1,padding:"10px",borderRadius:"4px",border:"1px solid var(--border)",backgroundColor:x.field_id?"white":"#f5f5f5"}}),u.jsxs("select",{name:"capacity_unit",value:x.capacity_unit,onChange:k,disabled:!x.field_id,style:{width:"100px",padding:"10px",borderRadius:"4px",border:"1px solid var(--border)",backgroundColor:x.field_id?"white":"#f5f5f5"},children:[u.jsx("option",{value:"MT",children:"MT"}),u.jsx("option",{value:"L",children:"Liters (L)"}),u.jsx("option",{value:"sqm",children:"sqm"}),u.jsx("option",{value:"ha",children:"ha"}),u.jsx("option",{value:"units",children:"Units"}),u.jsx("option",{value:"HP",children:"HP"}),u.jsx("option",{value:"kg",children:"kg"})]})]})]}),u.jsxs("div",{className:"card",style:{backgroundColor:"#f9f9f9",padding:"16px",marginBottom:"16px",border:"1px solid #eee"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"repeat(3, 1fr)",gap:"16px",marginBottom:"16px"},children:[u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"900",marginBottom:"8px",color:"var(--primary)"},children:"QUANTITY"}),u.jsx("input",{type:"number",name:"quantity",value:x.quantity,onChange:k,disabled:!x.field_id,min:"1",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd",backgroundColor:x.field_id?"white":"#f5f5f5"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"900",marginBottom:"8px",color:"var(--primary)"},children:"UNIT PRICE (XAF)"}),u.jsx("input",{type:"number",name:"unit_price",value:x.unit_price,onChange:k,disabled:!x.field_id,placeholder:"0.00",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd",backgroundColor:x.field_id?"white":"#f5f5f5"}})]}),u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"900",marginBottom:"8px",color:"var(--primary)"},children:"TOTAL COST"}),u.jsx("input",{type:"number",name:"acquisition_cost",value:x.acquisition_cost,readOnly:!0,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #eee",backgroundColor:"#eee",fontWeight:"bold"}})]})]}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"1fr",gap:"16px"},children:u.jsxs("div",{children:[u.jsx("label",{style:{display:"block",fontSize:"11px",fontWeight:"900",marginBottom:"8px",color:"var(--primary)"},children:"PURCHASE DATE"}),u.jsx("input",{type:"date",name:"purchase_date",value:x.purchase_date,onChange:k,disabled:!x.field_id,style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid #ddd",backgroundColor:x.field_id?"white":"#f5f5f5"}})]})}),u.jsx("p",{style:{margin:"8px 0 0 0",fontSize:"10px",color:"#888"},children:"* Costs are auto-calculated and recorded in the Field Journal."})]}),u.jsxs("div",{style:{marginBottom:"24px"},children:[u.jsx("label",{style:{display:"block",fontSize:"12px",fontWeight:"bold",marginBottom:"8px",color:"var(--text-muted)"},children:"NOTES"}),u.jsx("textarea",{name:"notes",value:x.notes,onChange:k,disabled:!x.field_id,rows:"3",placeholder:"Additional details about the storage...",style:{width:"100%",padding:"10px",borderRadius:"4px",border:"1px solid var(--border)",resize:"vertical",backgroundColor:x.field_id?"white":"#f5f5f5"}})]}),u.jsx("button",{type:"submit",className:"primary",style:{width:"100%",padding:"12px",fontWeight:"bold",opacity:x.field_id?1:.5},disabled:a||!x.field_id,children:a?"Processing...":n?"Update Asset Info":"Initialize Asset & Log Cost"})]})]})]})},uN=({onAdd:t})=>{const{currentFarm:e}=Pi(),{inputs:n,fetchInputs:i,adjustStock:r}=vg(),{showNotification:a}=hr(),[l,d]=de.useState("all");de.useEffect(()=>{e?.id&&i(e.id)},[e?.id]);const p=n.filter(_=>l==="all"||_.input_type===l),g=[{id:"all",label:"All Items"},{id:"fertilizer",label:"Fertilizers"},{id:"pesticide",label:"Pesticides"},{id:"seed",label:"Seeds"},{id:"fuel",label:"Fuel"}],m=async _=>{const A=prompt("Adjust stock by (e.g. 50 or -10):");if(A&&!isNaN(parseFloat(A)))try{await r(_,parseFloat(A)),a("Stock level updated","success")}catch{a("Failed to adjust stock","error")}};return u.jsxs("div",{className:"card animate-fade-in",style:{padding:"0",border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden",boxShadow:"0 4px 20px rgba(0,0,0,0.05)"},children:[u.jsxs("div",{style:{backgroundColor:"#fff",padding:"20px 24px",display:"flex",justifyContent:"space-between",alignItems:"center",borderBottom:"1px solid var(--border)"},children:[u.jsx("h3",{style:{margin:0,color:"var(--text-primary)",fontSize:"16px",fontWeight:"700"},children:"Input Inventory"}),u.jsx("button",{className:"primary",style:{padding:"8px 16px",fontSize:"12px",fontWeight:"600",textTransform:"none",borderRadius:"8px"},onClick:t,children:"+ New Stock"})]}),u.jsx("div",{style:{display:"flex",borderBottom:"1px solid var(--border)",backgroundColor:"#fafafa",padding:"0 16px",overflowX:"auto"},children:g.map(_=>u.jsx("button",{onClick:()=>d(_.id),style:{padding:"12px 16px",border:"none",background:"transparent",color:l===_.id?"var(--primary)":"var(--text-muted)",fontWeight:l===_.id?"700":"500",fontSize:"13px",cursor:"pointer",borderBottom:l===_.id?"2px solid var(--primary)":"2px solid transparent",transition:"all 0.2s",whiteSpace:"nowrap"},children:_.label},_.id))}),u.jsx("div",{style:{maxHeight:"500px",overflowY:"auto"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"var(--text-muted)",borderBottom:"2px solid var(--border)",textTransform:"uppercase",letterSpacing:"1px"},children:[u.jsx("th",{style:{padding:"16px 24px"},children:"Type"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Product"}),u.jsx("th",{style:{padding:"16px 24px"},children:"In Stock"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Status"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"right"},children:"Actions"})]})}),u.jsxs("tbody",{children:[p.map(_=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px",transition:"background 0.1s"},className:"hover-row",children:[u.jsx("td",{style:{padding:"16px 24px"},children:u.jsx("span",{style:{fontSize:"10px",fontWeight:"700",padding:"4px 10px",borderRadius:"4px",backgroundColor:"#f0f2f0",color:"#2e7d32",textTransform:"uppercase"},children:_.input_type||"GENERAL"})}),u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"500",color:"var(--text-primary)"},children:[u.jsx("div",{style:{fontWeight:"700"},children:_.name}),u.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"400",marginTop:"2px"},children:_.brand||"No Brand"})]}),u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"700"},children:[_.quantity_in_stock," ",_.unit]}),u.jsx("td",{style:{padding:"16px 24px"},children:_.quantity_in_stock<10?u.jsx("span",{style:{color:"var(--error)",fontSize:"10px",fontWeight:"900"},children:" LOW STOCK"}):u.jsx("span",{style:{color:"var(--success)",fontSize:"10px",fontWeight:"900"},children:" OPTIMAL"})}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"right"},children:u.jsx("button",{className:"outline",style:{fontSize:"11px",padding:"4px 8px"},onClick:()=>m(_.id),children:"Adjust"})})]},_.id)),p.length===0&&u.jsx("tr",{children:u.jsxs("td",{colSpan:"5",style:{textAlign:"center",padding:"60px",color:"var(--text-muted)",fontSize:"14px"},children:[u.jsx("div",{style:{fontSize:"32px",marginBottom:"16px"},children:""}),"No inventory items found."]})})]})]})}),u.jsxs("div",{style:{padding:"12px 24px",backgroundColor:"#fafafa",color:"var(--text-secondary)",fontSize:"12px",display:"flex",justifyContent:"space-between",borderTop:"1px solid var(--border)"},children:[u.jsxs("span",{children:["Total Items: ",u.jsx("strong",{children:n.length})]}),u.jsxs("span",{style:{color:n.some(_=>(_.quantity_in_stock||_.quantity)<10)?"var(--error)":"var(--success)",fontWeight:"600"},children:[n.filter(_=>(_.quantity_in_stock||_.quantity)<10).length," Low Stock Alerts"]})]})]})},dN=()=>{const{currentFarm:t}=Pi(),{inputs:e,fetchInputs:n,adjustStock:i,loading:r}=vg(),{infrastructure:a,fetchInfrastructure:l,deleteInfrastructure:d,loading:p}=Zl(),[g,m]=hL(),_=g.get("view")||"inventory",[A,x]=de.useState(!1),[R,M]=de.useState(!1),[k,I]=de.useState(null);if(de.useEffect(()=>{t&&(n(t.id),l(t.id))},[t,n,l]),!t)return u.jsx("div",{style:{padding:"24px"},children:"Please select a farm."});const Y=(e||[]).reduce((V,ee)=>{const ue=ee.category||ee.input_type||"Uncategorized";return V[ue]=(V[ue]||0)+1,V},{});if((a||[]).filter(V=>V.type==="Storage"),A)return u.jsx(lN,{farmId:t.id,onComplete:()=>x(!1)});if(R||k)return u.jsx(cN,{farmId:t.id,initialData:k,onComplete:()=>{M(!1),I(null)}});const B=async V=>{const{getConfirmation:ee,showNotification:ue}=(await Mr(async()=>{const{default:G}=await Promise.resolve().then(()=>Su);return{default:G}},void 0)).default.getState(),_e=ee("DELETE_INFRA"),fe=_e?`${_e.title}
------------------
${_e.body}`:"Are you sure you want to delete this storage unit?";if(window.confirm(fe))try{const G=await d(V);ue(G?.notification?.message||"Storage unit deleted","success")}catch(G){ue(G.response?.data?.notification?.message||"Delete failed","error")}};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"24px",margin:0},children:"Assets & Stock"}),u.jsx("p",{style:{color:"var(--text-muted)",fontSize:"14px"},children:"Manage farm assets, structures, and input stock levels."})]}),u.jsxs("div",{className:"flex gap-12",children:[u.jsx("button",{className:_==="inventory"?"primary":"outline",onClick:()=>m({view:"inventory"}),style:{borderBottom:_==="inventory"?"3px solid var(--primary)":"3px solid transparent",color:_==="inventory"?"var(--primary)":"#666"},children:"Stock Inventory"}),u.jsx("button",{className:_==="structures"?"primary":"outline",onClick:()=>m({view:"structures"}),style:{borderBottom:_==="structures"?"3px solid var(--primary)":"3px solid transparent",color:_==="structures"?"var(--primary)":"#666"},children:"Farm Assets"}),_==="inventory"?u.jsx("button",{className:"primary",onClick:()=>x(!0),children:"+ New Input"}):u.jsx("button",{className:"primary",onClick:()=>M(!0),children:"+ New Asset"})]})]}),_==="inventory"?u.jsxs(u.Fragment,{children:[u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(240px, 1fr))",gap:"20px",marginBottom:"32px"},children:Object.keys(Y).map(V=>u.jsxs("div",{className:"card",style:{padding:"20px"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",marginBottom:"16px"},children:[u.jsx("h3",{style:{margin:0,fontSize:"14px",textTransform:"capitalize"},children:V}),u.jsx("span",{style:{fontSize:"20px"},children:""})]}),u.jsxs("div",{style:{fontSize:"24px",fontWeight:"800"},children:[Y[V]," Items"]})]},V))}),u.jsx(uN,{onAdd:()=>x(!0)})]}):u.jsx("div",{className:"card",style:{padding:0,border:"1px solid var(--border)",borderRadius:"12px",overflow:"hidden"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{textAlign:"left",fontSize:"11px",color:"var(--text-muted)",borderBottom:"2px solid var(--border)",textTransform:"uppercase",letterSpacing:"1px"},children:[u.jsx("th",{style:{padding:"16px 24px"},children:"Asset Name"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Type"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Status"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Quantity"}),u.jsx("th",{style:{padding:"16px 24px"},children:"Capacity/Area"}),u.jsx("th",{style:{padding:"16px 24px",textAlign:"right"},children:"Actions"})]})}),u.jsxs("tbody",{children:[(a||[]).map(V=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",fontSize:"14px"},className:"hover-row",children:[u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"700",color:"var(--text-primary)"},children:[V.name,V.notes&&u.jsx("div",{style:{fontSize:"11px",color:"var(--text-muted)",fontWeight:"400",marginTop:"2px"},children:V.notes})]}),u.jsx("td",{style:{padding:"16px 24px"},children:u.jsxs("span",{style:{fontSize:"10px",fontWeight:"700",padding:"4px 10px",borderRadius:"4px",backgroundColor:"#f0f2f0",color:"#2e7d32",textTransform:"uppercase"},children:[V.type," ",V.sub_type?`(${V.sub_type})`:""]})}),u.jsx("td",{style:{padding:"16px 24px"},children:u.jsxs("span",{style:{fontSize:"10px",fontWeight:"900",color:V.status==="operational"?"var(--success)":"var(--warning)"},children:[" ",(V.status||"Active").toUpperCase()]})}),u.jsx("td",{style:{padding:"16px 24px",fontWeight:"700"},children:V.quantity||"1"}),u.jsxs("td",{style:{padding:"16px 24px",fontWeight:"500"},children:[V.area_sqm||"0"," ",V.capacity_unit||"MT"]}),u.jsx("td",{style:{padding:"16px 24px",textAlign:"right"},children:u.jsxs("div",{className:"flex gap-8 j-end",children:[u.jsx("button",{className:"outline",style:{fontSize:"11px",padding:"4px 12px"},onClick:()=>I(V),children:"Edit"}),u.jsx("button",{className:"outline",style:{fontSize:"11px",padding:"4px 12px",color:"var(--error)",borderColor:"#fed7d7"},onClick:()=>B(V.id),children:"Delete"})]})})]},V.id)),(a||[]).length===0&&u.jsx("tr",{children:u.jsxs("td",{colSpan:"5",style:{textAlign:"center",padding:"80px",color:"var(--text-muted)"},children:[u.jsx("div",{style:{fontSize:"48px",marginBottom:"16px"},children:""}),u.jsx("h3",{style:{margin:0},children:"No farm assets located."}),u.jsx("p",{style:{margin:"8px 0 0 0"},children:'Click "+ New Asset" to register your first infrastructure unit.'})]})})]})]})})]})};var _g,jn,kS,RS,kd,bu,w2,NS,DS,Wp={},MS=[],fN=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function Xc(t,e){for(var n in e)t[n]=e[n];return t}function OS(t){var e=t.parentNode;e&&e.removeChild(t)}function Fe(t,e,n){var i,r,a,l={};for(a in e)a=="key"?i=e[a]:a=="ref"?r=e[a]:l[a]=e[a];if(arguments.length>2&&(l.children=arguments.length>3?_g.call(arguments,2):n),typeof t=="function"&&t.defaultProps!=null)for(a in t.defaultProps)l[a]===void 0&&(l[a]=t.defaultProps[a]);return Lp(t,l,i,r,null)}function Lp(t,e,n,i,r){var a={type:t,props:e,key:n,ref:i,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,__h:null,constructor:void 0,__v:r??++kS};return r==null&&jn.vnode!=null&&jn.vnode(a),a}function ds(){return{current:null}}function Cr(t){return t.children}function hN(t,e,n,i,r){var a;for(a in n)a==="children"||a==="key"||a in e||Gp(t,a,null,n[a],i);for(a in e)r&&typeof e[a]!="function"||a==="children"||a==="key"||a==="value"||a==="checked"||n[a]===e[a]||Gp(t,a,e[a],n[a],i)}function S2(t,e,n){e[0]==="-"?t.setProperty(e,n??""):t[e]=n==null?"":typeof n!="number"||fN.test(e)?n:n+"px"}function Gp(t,e,n,i,r){var a;e:if(e==="style")if(typeof n=="string")t.style.cssText=n;else{if(typeof i=="string"&&(t.style.cssText=i=""),i)for(e in i)n&&e in n||S2(t.style,e,"");if(n)for(e in n)i&&n[e]===i[e]||S2(t.style,e,n[e])}else if(e[0]==="o"&&e[1]==="n")a=e!==(e=e.replace(/Capture$/,"")),e=e.toLowerCase()in t?e.toLowerCase().slice(2):e.slice(2),t.l||(t.l={}),t.l[e+a]=n,n?i||t.addEventListener(e,a?E2:C2,a):t.removeEventListener(e,a?E2:C2,a);else if(e!=="dangerouslySetInnerHTML"){if(r)e=e.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if(e!=="width"&&e!=="height"&&e!=="href"&&e!=="list"&&e!=="form"&&e!=="tabIndex"&&e!=="download"&&e in t)try{t[e]=n??"";break e}catch{}typeof n=="function"||(n==null||n===!1&&e.indexOf("-")==-1?t.removeAttribute(e):t.setAttribute(e,n))}}function C2(t){kd=!0;try{return this.l[t.type+!1](jn.event?jn.event(t):t)}finally{kd=!1}}function E2(t){kd=!0;try{return this.l[t.type+!0](jn.event?jn.event(t):t)}finally{kd=!1}}function Ys(t,e){this.props=t,this.context=e}function Hf(t,e){if(e==null)return t.__?Hf(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null)return n.__e;return typeof t.type=="function"?Hf(t):null}function PS(t){var e,n;if((t=t.__)!=null&&t.__c!=null){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if((n=t.__k[e])!=null&&n.__e!=null){t.__e=t.__c.base=n.__e;break}return PS(t)}}function pN(t){kd?setTimeout(t):NS(t)}function by(t){(!t.__d&&(t.__d=!0)&&bu.push(t)&&!Vp.__r++||w2!==jn.debounceRendering)&&((w2=jn.debounceRendering)||pN)(Vp)}function Vp(){var t,e,n,i,r,a,l,d;for(bu.sort(function(p,g){return p.__v.__b-g.__v.__b});t=bu.shift();)t.__d&&(e=bu.length,i=void 0,r=void 0,l=(a=(n=t).__v).__e,(d=n.__P)&&(i=[],(r=Xc({},a)).__v=a.__v+1,a0(d,a,r,n.__n,d.ownerSVGElement!==void 0,a.__h!=null?[l]:null,i,l??Hf(a),a.__h),US(i,a),a.__e!=l&&PS(a)),bu.length>e&&bu.sort(function(p,g){return p.__v.__b-g.__v.__b}));Vp.__r=0}function IS(t,e,n,i,r,a,l,d,p,g){var m,_,A,x,R,M,k,I=i&&i.__k||MS,Y=I.length;for(n.__k=[],m=0;m<e.length;m++)if((x=n.__k[m]=(x=e[m])==null||typeof x=="boolean"?null:typeof x=="string"||typeof x=="number"||typeof x=="bigint"?Lp(null,x,null,null,x):Array.isArray(x)?Lp(Cr,{children:x},null,null,null):x.__b>0?Lp(x.type,x.props,x.key,x.ref?x.ref:null,x.__v):x)!=null){if(x.__=n,x.__b=n.__b+1,(A=I[m])===null||A&&x.key==A.key&&x.type===A.type)I[m]=void 0;else for(_=0;_<Y;_++){if((A=I[_])&&x.key==A.key&&x.type===A.type){I[_]=void 0;break}A=null}a0(t,x,A=A||Wp,r,a,l,d,p,g),R=x.__e,(_=x.ref)&&A.ref!=_&&(k||(k=[]),A.ref&&k.push(A.ref,null,x),k.push(_,x.__c||R,x)),R!=null?(M==null&&(M=R),typeof x.type=="function"&&x.__k===A.__k?x.__d=p=zS(x,p,t):p=BS(t,x,A,I,R,p),typeof n.type=="function"&&(n.__d=p)):p&&A.__e==p&&p.parentNode!=t&&(p=Hf(A))}for(n.__e=M,m=Y;m--;)I[m]!=null&&(typeof n.type=="function"&&I[m].__e!=null&&I[m].__e==n.__d&&(n.__d=FS(i).nextSibling),qS(I[m],I[m]));if(k)for(m=0;m<k.length;m++)HS(k[m],k[++m],k[++m])}function zS(t,e,n){for(var i,r=t.__k,a=0;r&&a<r.length;a++)(i=r[a])&&(i.__=t,e=typeof i.type=="function"?zS(i,e,n):BS(n,i,i,r,i.__e,e));return e}function Yp(t,e){return e=e||[],t==null||typeof t=="boolean"||(Array.isArray(t)?t.some(function(n){Yp(n,e)}):e.push(t)),e}function BS(t,e,n,i,r,a){var l,d,p;if(e.__d!==void 0)l=e.__d,e.__d=void 0;else if(n==null||r!=a||r.parentNode==null)e:if(a==null||a.parentNode!==t)t.appendChild(r),l=null;else{for(d=a,p=0;(d=d.nextSibling)&&p<i.length;p+=1)if(d==r)break e;t.insertBefore(r,a),l=a}return l!==void 0?l:r.nextSibling}function FS(t){var e,n,i;if(t.type==null||typeof t.type=="string")return t.__e;if(t.__k){for(e=t.__k.length-1;e>=0;e--)if((n=t.__k[e])&&(i=FS(n)))return i}return null}function a0(t,e,n,i,r,a,l,d,p){var g,m,_,A,x,R,M,k,I,Y,B,V,ee,ue,_e,fe=e.type;if(e.constructor!==void 0)return null;n.__h!=null&&(p=n.__h,d=e.__e=n.__e,e.__h=null,a=[d]),(g=jn.__b)&&g(e);try{e:if(typeof fe=="function"){if(k=e.props,I=(g=fe.contextType)&&i[g.__c],Y=g?I?I.props.value:g.__:i,n.__c?M=(m=e.__c=n.__c).__=m.__E:("prototype"in fe&&fe.prototype.render?e.__c=m=new fe(k,Y):(e.__c=m=new Ys(k,Y),m.constructor=fe,m.render=mN),I&&I.sub(m),m.props=k,m.state||(m.state={}),m.context=Y,m.__n=i,_=m.__d=!0,m.__h=[],m._sb=[]),m.__s==null&&(m.__s=m.state),fe.getDerivedStateFromProps!=null&&(m.__s==m.state&&(m.__s=Xc({},m.__s)),Xc(m.__s,fe.getDerivedStateFromProps(k,m.__s))),A=m.props,x=m.state,m.__v=e,_)fe.getDerivedStateFromProps==null&&m.componentWillMount!=null&&m.componentWillMount(),m.componentDidMount!=null&&m.__h.push(m.componentDidMount);else{if(fe.getDerivedStateFromProps==null&&k!==A&&m.componentWillReceiveProps!=null&&m.componentWillReceiveProps(k,Y),!m.__e&&m.shouldComponentUpdate!=null&&m.shouldComponentUpdate(k,m.__s,Y)===!1||e.__v===n.__v){for(e.__v!==n.__v&&(m.props=k,m.state=m.__s,m.__d=!1),e.__e=n.__e,e.__k=n.__k,e.__k.forEach(function(G){G&&(G.__=e)}),B=0;B<m._sb.length;B++)m.__h.push(m._sb[B]);m._sb=[],m.__h.length&&l.push(m);break e}m.componentWillUpdate!=null&&m.componentWillUpdate(k,m.__s,Y),m.componentDidUpdate!=null&&m.__h.push(function(){m.componentDidUpdate(A,x,R)})}if(m.context=Y,m.props=k,m.__P=t,V=jn.__r,ee=0,"prototype"in fe&&fe.prototype.render){for(m.state=m.__s,m.__d=!1,V&&V(e),g=m.render(m.props,m.state,m.context),ue=0;ue<m._sb.length;ue++)m.__h.push(m._sb[ue]);m._sb=[]}else do m.__d=!1,V&&V(e),g=m.render(m.props,m.state,m.context),m.state=m.__s;while(m.__d&&++ee<25);m.state=m.__s,m.getChildContext!=null&&(i=Xc(Xc({},i),m.getChildContext())),_||m.getSnapshotBeforeUpdate==null||(R=m.getSnapshotBeforeUpdate(A,x)),_e=g!=null&&g.type===Cr&&g.key==null?g.props.children:g,IS(t,Array.isArray(_e)?_e:[_e],e,n,i,r,a,l,d,p),m.base=e.__e,e.__h=null,m.__h.length&&l.push(m),M&&(m.__E=m.__=null),m.__e=!1}else a==null&&e.__v===n.__v?(e.__k=n.__k,e.__e=n.__e):e.__e=gN(n.__e,e,n,i,r,a,l,p);(g=jn.diffed)&&g(e)}catch(G){e.__v=null,(p||a!=null)&&(e.__e=d,e.__h=!!p,a[a.indexOf(d)]=null),jn.__e(G,e,n)}}function US(t,e){jn.__c&&jn.__c(e,t),t.some(function(n){try{t=n.__h,n.__h=[],t.some(function(i){i.call(n)})}catch(i){jn.__e(i,n.__v)}})}function gN(t,e,n,i,r,a,l,d){var p,g,m,_=n.props,A=e.props,x=e.type,R=0;if(x==="svg"&&(r=!0),a!=null){for(;R<a.length;R++)if((p=a[R])&&"setAttribute"in p==!!x&&(x?p.localName===x:p.nodeType===3)){t=p,a[R]=null;break}}if(t==null){if(x===null)return document.createTextNode(A);t=r?document.createElementNS("http://www.w3.org/2000/svg",x):document.createElement(x,A.is&&A),a=null,d=!1}if(x===null)_===A||d&&t.data===A||(t.data=A);else{if(a=a&&_g.call(t.childNodes),g=(_=n.props||Wp).dangerouslySetInnerHTML,m=A.dangerouslySetInnerHTML,!d){if(a!=null)for(_={},R=0;R<t.attributes.length;R++)_[t.attributes[R].name]=t.attributes[R].value;(m||g)&&(m&&(g&&m.__html==g.__html||m.__html===t.innerHTML)||(t.innerHTML=m&&m.__html||""))}if(hN(t,A,_,r,d),m)e.__k=[];else if(R=e.props.children,IS(t,Array.isArray(R)?R:[R],e,n,i,r&&x!=="foreignObject",a,l,a?a[0]:n.__k&&Hf(n,0),d),a!=null)for(R=a.length;R--;)a[R]!=null&&OS(a[R]);d||("value"in A&&(R=A.value)!==void 0&&(R!==t.value||x==="progress"&&!R||x==="option"&&R!==_.value)&&Gp(t,"value",R,_.value,!1),"checked"in A&&(R=A.checked)!==void 0&&R!==t.checked&&Gp(t,"checked",R,_.checked,!1))}return t}function HS(t,e,n){try{typeof t=="function"?t(e):t.current=e}catch(i){jn.__e(i,n)}}function qS(t,e,n){var i,r;if(jn.unmount&&jn.unmount(t),(i=t.ref)&&(i.current&&i.current!==t.__e||HS(i,null,e)),(i=t.__c)!=null){if(i.componentWillUnmount)try{i.componentWillUnmount()}catch(a){jn.__e(a,e)}i.base=i.__P=null,t.__c=void 0}if(i=t.__k)for(r=0;r<i.length;r++)i[r]&&qS(i[r],e,n||typeof t.type!="function");n||t.__e==null||OS(t.__e),t.__=t.__e=t.__d=void 0}function mN(t,e,n){return this.constructor(t,n)}function qf(t,e,n){var i,r,a;jn.__&&jn.__(t,e),r=(i=!1)?null:e.__k,a=[],a0(e,t=e.__k=Fe(Cr,null,[t]),r||Wp,Wp,e.ownerSVGElement!==void 0,r?null:e.firstChild?_g.call(e.childNodes):null,a,r?r.__e:e.firstChild,i),US(a,t)}function vN(t,e){var n={__c:e="__cC"+DS++,__:t,Consumer:function(i,r){return i.children(r)},Provider:function(i){var r,a;return this.getChildContext||(r=[],(a={})[e]=this,this.getChildContext=function(){return a},this.shouldComponentUpdate=function(l){this.props.value!==l.value&&r.some(function(d){d.__e=!0,by(d)})},this.sub=function(l){r.push(l);var d=l.componentWillUnmount;l.componentWillUnmount=function(){r.splice(r.indexOf(l),1),d&&d.call(l)}}),i.children}};return n.Provider.__=n.Consumer.contextType=n}_g=MS.slice,jn={__e:function(t,e,n,i){for(var r,a,l;e=e.__;)if((r=e.__c)&&!r.__)try{if((a=r.constructor)&&a.getDerivedStateFromError!=null&&(r.setState(a.getDerivedStateFromError(t)),l=r.__d),r.componentDidCatch!=null&&(r.componentDidCatch(t,i||{}),l=r.__d),l)return r.__E=r}catch(d){t=d}throw t}},kS=0,RS=function(t){return t!=null&&t.constructor===void 0},kd=!1,Ys.prototype.setState=function(t,e){var n;n=this.__s!=null&&this.__s!==this.state?this.__s:this.__s=Xc({},this.state),typeof t=="function"&&(t=t(Xc({},n),this.props)),t&&Xc(n,t),t!=null&&this.__v&&(e&&this._sb.push(e),by(this))},Ys.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),by(this))},Ys.prototype.render=Cr,bu=[],NS=typeof Promise=="function"?Promise.prototype.then.bind(Promise.resolve()):setTimeout,Vp.__r=0,DS=0;var Hl,Rv,A2,WS=[],Nv=[],L2=jn.__b,T2=jn.__r,j2=jn.diffed,k2=jn.__c,R2=jn.unmount;function yN(){for(var t;t=WS.shift();)if(t.__P&&t.__H)try{t.__H.__h.forEach(Tp),t.__H.__h.forEach(_y),t.__H.__h=[]}catch(e){t.__H.__h=[],jn.__e(e,t.__v)}}jn.__b=function(t){Hl=null,L2&&L2(t)},jn.__r=function(t){T2&&T2(t);var e=(Hl=t.__c).__H;e&&(Rv===Hl?(e.__h=[],Hl.__h=[],e.__.forEach(function(n){n.__N&&(n.__=n.__N),n.__V=Nv,n.__N=n.i=void 0})):(e.__h.forEach(Tp),e.__h.forEach(_y),e.__h=[])),Rv=Hl},jn.diffed=function(t){j2&&j2(t);var e=t.__c;e&&e.__H&&(e.__H.__h.length&&(WS.push(e)!==1&&A2===jn.requestAnimationFrame||((A2=jn.requestAnimationFrame)||xN)(yN)),e.__H.__.forEach(function(n){n.i&&(n.__H=n.i),n.__V!==Nv&&(n.__=n.__V),n.i=void 0,n.__V=Nv})),Rv=Hl=null},jn.__c=function(t,e){e.some(function(n){try{n.__h.forEach(Tp),n.__h=n.__h.filter(function(i){return!i.__||_y(i)})}catch(i){e.some(function(r){r.__h&&(r.__h=[])}),e=[],jn.__e(i,n.__v)}}),k2&&k2(t,e)},jn.unmount=function(t){R2&&R2(t);var e,n=t.__c;n&&n.__H&&(n.__H.__.forEach(function(i){try{Tp(i)}catch(r){e=r}}),n.__H=void 0,e&&jn.__e(e,n.__v))};var N2=typeof requestAnimationFrame=="function";function xN(t){var e,n=function(){clearTimeout(i),N2&&cancelAnimationFrame(e),setTimeout(t)},i=setTimeout(n,100);N2&&(e=requestAnimationFrame(n))}function Tp(t){var e=Hl,n=t.__c;typeof n=="function"&&(t.__c=void 0,n()),Hl=e}function _y(t){var e=Hl;t.__c=t.__(),Hl=e}function bN(t,e){for(var n in e)t[n]=e[n];return t}function D2(t,e){for(var n in t)if(n!=="__source"&&!(n in e))return!0;for(var i in e)if(i!=="__source"&&t[i]!==e[i])return!0;return!1}function M2(t){this.props=t}(M2.prototype=new Ys).isPureReactComponent=!0,M2.prototype.shouldComponentUpdate=function(t,e){return D2(this.props,t)||D2(this.state,e)};var O2=jn.__b;jn.__b=function(t){t.type&&t.type.__f&&t.ref&&(t.props.ref=t.ref,t.ref=null),O2&&O2(t)};var _N=jn.__e;jn.__e=function(t,e,n,i){if(t.then){for(var r,a=e;a=a.__;)if((r=a.__c)&&r.__c)return e.__e==null&&(e.__e=n.__e,e.__k=n.__k),r.__c(t,e)}_N(t,e,n,i)};var P2=jn.unmount;function GS(t,e,n){return t&&(t.__c&&t.__c.__H&&(t.__c.__H.__.forEach(function(i){typeof i.__c=="function"&&i.__c()}),t.__c.__H=null),(t=bN({},t)).__c!=null&&(t.__c.__P===n&&(t.__c.__P=e),t.__c=null),t.__k=t.__k&&t.__k.map(function(i){return GS(i,e,n)})),t}function VS(t,e,n){return t&&(t.__v=null,t.__k=t.__k&&t.__k.map(function(i){return VS(i,e,n)}),t.__c&&t.__c.__P===e&&(t.__e&&n.insertBefore(t.__e,t.__d),t.__c.__e=!0,t.__c.__P=n)),t}function Dv(){this.__u=0,this.t=null,this.__b=null}function YS(t){var e=t.__.__c;return e&&e.__a&&e.__a(t)}function sp(){this.u=null,this.o=null}jn.unmount=function(t){var e=t.__c;e&&e.__R&&e.__R(),e&&t.__h===!0&&(t.type=null),P2&&P2(t)},(Dv.prototype=new Ys).__c=function(t,e){var n=e.__c,i=this;i.t==null&&(i.t=[]),i.t.push(n);var r=YS(i.__v),a=!1,l=function(){a||(a=!0,n.__R=null,r?r(d):d())};n.__R=l;var d=function(){if(!--i.__u){if(i.state.__a){var g=i.state.__a;i.__v.__k[0]=VS(g,g.__c.__P,g.__c.__O)}var m;for(i.setState({__a:i.__b=null});m=i.t.pop();)m.forceUpdate()}},p=e.__h===!0;i.__u++||p||i.setState({__a:i.__b=i.__v.__k[0]}),t.then(l,l)},Dv.prototype.componentWillUnmount=function(){this.t=[]},Dv.prototype.render=function(t,e){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),i=this.__v.__k[0].__c;this.__v.__k[0]=GS(this.__b,n,i.__O=i.__P)}this.__b=null}var r=e.__a&&Fe(Cr,null,t.fallback);return r&&(r.__h=null),[Fe(Cr,null,e.__a?null:t.children),r]};var I2=function(t,e,n){if(++n[1]===n[0]&&t.o.delete(e),t.props.revealOrder&&(t.props.revealOrder[0]!=="t"||!t.o.size))for(n=t.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;t.u=n=n[2]}};function wN(t){return this.getChildContext=function(){return t.context},t.children}function SN(t){var e=this,n=t.i;e.componentWillUnmount=function(){qf(null,e.l),e.l=null,e.i=null},e.i&&e.i!==n&&e.componentWillUnmount(),t.__v?(e.l||(e.i=n,e.l={nodeType:1,parentNode:n,childNodes:[],appendChild:function(i){this.childNodes.push(i),e.i.appendChild(i)},insertBefore:function(i,r){this.childNodes.push(i),e.i.appendChild(i)},removeChild:function(i){this.childNodes.splice(this.childNodes.indexOf(i)>>>1,1),e.i.removeChild(i)}}),qf(Fe(wN,{context:e.context},t.__v),e.l)):e.l&&e.componentWillUnmount()}function CN(t,e){var n=Fe(SN,{__v:t,i:e});return n.containerInfo=e,n}(sp.prototype=new Ys).__a=function(t){var e=this,n=YS(e.__v),i=e.o.get(t);return i[0]++,function(r){var a=function(){e.props.revealOrder?(i.push(r),I2(e,t,i)):r()};n?n(a):a()}},sp.prototype.render=function(t){this.u=null,this.o=new Map;var e=Yp(t.children);t.revealOrder&&t.revealOrder[0]==="b"&&e.reverse();for(var n=e.length;n--;)this.o.set(e[n],this.u=[1,0,this.u]);return t.children},sp.prototype.componentDidUpdate=sp.prototype.componentDidMount=function(){var t=this;this.o.forEach(function(e,n){I2(t,n,e)})};var EN=typeof Symbol<"u"&&Symbol.for&&Symbol.for("react.element")||60103,AN=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,LN=typeof document<"u",TN=function(t){return(typeof Symbol<"u"&&typeof Symbol()=="symbol"?/fil|che|rad/i:/fil|che|ra/i).test(t)};Ys.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach(function(t){Object.defineProperty(Ys.prototype,t,{configurable:!0,get:function(){return this["UNSAFE_"+t]},set:function(e){Object.defineProperty(this,t,{configurable:!0,writable:!0,value:e})}})});var z2=jn.event;function jN(){}function kN(){return this.cancelBubble}function RN(){return this.defaultPrevented}jn.event=function(t){return z2&&(t=z2(t)),t.persist=jN,t.isPropagationStopped=kN,t.isDefaultPrevented=RN,t.nativeEvent=t};var B2={configurable:!0,get:function(){return this.class}},F2=jn.vnode;jn.vnode=function(t){var e=t.type,n=t.props,i=n;if(typeof e=="string"){var r=e.indexOf("-")===-1;for(var a in i={},n){var l=n[a];LN&&a==="children"&&e==="noscript"||a==="value"&&"defaultValue"in n&&l==null||(a==="defaultValue"&&"value"in n&&n.value==null?a="value":a==="download"&&l===!0?l="":/ondoubleclick/i.test(a)?a="ondblclick":/^onchange(textarea|input)/i.test(a+e)&&!TN(n.type)?a="oninput":/^onfocus$/i.test(a)?a="onfocusin":/^onblur$/i.test(a)?a="onfocusout":/^on(Ani|Tra|Tou|BeforeInp|Compo)/.test(a)?a=a.toLowerCase():r&&AN.test(a)?a=a.replace(/[A-Z0-9]/g,"-$&").toLowerCase():l===null&&(l=void 0),/^oninput$/i.test(a)&&(a=a.toLowerCase(),i[a]&&(a="oninputCapture")),i[a]=l)}e=="select"&&i.multiple&&Array.isArray(i.value)&&(i.value=Yp(n.children).forEach(function(d){d.props.selected=i.value.indexOf(d.props.value)!=-1})),e=="select"&&i.defaultValue!=null&&(i.value=Yp(n.children).forEach(function(d){d.props.selected=i.multiple?i.defaultValue.indexOf(d.props.value)!=-1:i.defaultValue==d.props.value})),t.props=i,n.class!=n.className&&(B2.enumerable="className"in n,n.className!=null&&(i.class=n.className),Object.defineProperty(i,"className",B2))}t.$$typeof=EN,F2&&F2(t)};var U2=jn.__r;jn.__r=function(t){U2&&U2(t),t.__c};const ZS=[],wy=new Map;function o0(t){ZS.push(t),wy.forEach(e=>{XS(e,t)})}function NN(t){t.isConnected&&t.getRootNode&&KS(t.getRootNode())}function KS(t){let e=wy.get(t);if(!e||!e.isConnected){if(e=t.querySelector("style[data-fullcalendar]"),!e){e=document.createElement("style"),e.setAttribute("data-fullcalendar","");const n=MN();n&&(e.nonce=n);const i=t===document?document.head:t,r=t===document?i.querySelector("script,link[rel=stylesheet],link[as=style],style"):i.firstChild;i.insertBefore(e,r)}wy.set(t,e),DN(e)}}function DN(t){for(const e of ZS)XS(t,e)}function XS(t,e){const{sheet:n}=t,i=n.cssRules.length;e.split("}").forEach((r,a)=>{r=r.trim(),r&&n.insertRule(r+"}",i+a)})}let Mv;function MN(){return Mv===void 0&&(Mv=ON()),Mv}function ON(){const t=document.querySelector('meta[name="csp-nonce"]');if(t&&t.hasAttribute("content"))return t.getAttribute("content");const e=document.querySelector("script[nonce]");return e&&e.nonce||""}typeof document<"u"&&KS(document);var PN=':root{--fc-small-font-size:.85em;--fc-page-bg-color:#fff;--fc-neutral-bg-color:hsla(0,0%,82%,.3);--fc-neutral-text-color:grey;--fc-border-color:#ddd;--fc-button-text-color:#fff;--fc-button-bg-color:#2c3e50;--fc-button-border-color:#2c3e50;--fc-button-hover-bg-color:#1e2b37;--fc-button-hover-border-color:#1a252f;--fc-button-active-bg-color:#1a252f;--fc-button-active-border-color:#151e27;--fc-event-bg-color:#3788d8;--fc-event-border-color:#3788d8;--fc-event-text-color:#fff;--fc-event-selected-overlay-color:rgba(0,0,0,.25);--fc-more-link-bg-color:#d0d0d0;--fc-more-link-text-color:inherit;--fc-event-resizer-thickness:8px;--fc-event-resizer-dot-total-width:8px;--fc-event-resizer-dot-border-width:1px;--fc-non-business-color:hsla(0,0%,84%,.3);--fc-bg-event-color:#8fdf82;--fc-bg-event-opacity:0.3;--fc-highlight-color:rgba(188,232,241,.3);--fc-today-bg-color:rgba(255,220,40,.15);--fc-now-indicator-color:red}.fc-not-allowed,.fc-not-allowed .fc-event{cursor:not-allowed}.fc{display:flex;flex-direction:column;font-size:1em}.fc,.fc *,.fc :after,.fc :before{box-sizing:border-box}.fc table{border-collapse:collapse;border-spacing:0;font-size:1em}.fc th{text-align:center}.fc td,.fc th{padding:0;vertical-align:top}.fc a[data-navlink]{cursor:pointer}.fc a[data-navlink]:hover{text-decoration:underline}.fc-direction-ltr{direction:ltr;text-align:left}.fc-direction-rtl{direction:rtl;text-align:right}.fc-theme-standard td,.fc-theme-standard th{border:1px solid var(--fc-border-color)}.fc-liquid-hack td,.fc-liquid-hack th{position:relative}@font-face{font-family:fcicons;font-style:normal;font-weight:400;src:url("data:application/x-font-ttf;charset=utf-8;base64,AAEAAAALAIAAAwAwT1MvMg8SBfAAAAC8AAAAYGNtYXAXVtKNAAABHAAAAFRnYXNwAAAAEAAAAXAAAAAIZ2x5ZgYydxIAAAF4AAAFNGhlYWQUJ7cIAAAGrAAAADZoaGVhB20DzAAABuQAAAAkaG10eCIABhQAAAcIAAAALGxvY2ED4AU6AAAHNAAAABhtYXhwAA8AjAAAB0wAAAAgbmFtZXsr690AAAdsAAABhnBvc3QAAwAAAAAI9AAAACAAAwPAAZAABQAAApkCzAAAAI8CmQLMAAAB6wAzAQkAAAAAAAAAAAAAAAAAAAABEAAAAAAAAAAAAAAAAAAAAABAAADpBgPA/8AAQAPAAEAAAAABAAAAAAAAAAAAAAAgAAAAAAADAAAAAwAAABwAAQADAAAAHAADAAEAAAAcAAQAOAAAAAoACAACAAIAAQAg6Qb//f//AAAAAAAg6QD//f//AAH/4xcEAAMAAQAAAAAAAAAAAAAAAQAB//8ADwABAAAAAAAAAAAAAgAANzkBAAAAAAEAAAAAAAAAAAACAAA3OQEAAAAAAQAAAAAAAAAAAAIAADc5AQAAAAABAWIAjQKeAskAEwAAJSc3NjQnJiIHAQYUFwEWMjc2NCcCnuLiDQ0MJAz/AA0NAQAMJAwNDcni4gwjDQwM/wANIwz/AA0NDCMNAAAAAQFiAI0CngLJABMAACUBNjQnASYiBwYUHwEHBhQXFjI3AZ4BAA0N/wAMJAwNDeLiDQ0MJAyNAQAMIw0BAAwMDSMM4uINIwwNDQAAAAIA4gC3Ax4CngATACcAACUnNzY0JyYiDwEGFB8BFjI3NjQnISc3NjQnJiIPAQYUHwEWMjc2NCcB87e3DQ0MIw3VDQ3VDSMMDQ0BK7e3DQ0MJAzVDQ3VDCQMDQ3zuLcMJAwNDdUNIwzWDAwNIwy4twwkDA0N1Q0jDNYMDA0jDAAAAgDiALcDHgKeABMAJwAAJTc2NC8BJiIHBhQfAQcGFBcWMjchNzY0LwEmIgcGFB8BBwYUFxYyNwJJ1Q0N1Q0jDA0Nt7cNDQwjDf7V1Q0N1QwkDA0Nt7cNDQwkDLfWDCMN1Q0NDCQMt7gMIw0MDNYMIw3VDQ0MJAy3uAwjDQwMAAADAFUAAAOrA1UAMwBoAHcAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMhMjY1NCYjISIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAAVYRGRkR/qoRGRkRA1UFBAUOCQkVDAsZDf2rDRkLDBUJCA4FBQUFBQUOCQgVDAsZDQJVDRkLDBUJCQ4FBAVVAgECBQMCBwQECAX9qwQJAwQHAwMFAQICAgIBBQMDBwQDCQQCVQUIBAQHAgMFAgEC/oAZEhEZGRESGQAAAAADAFUAAAOrA1UAMwBoAIkAABMiBgcOAQcOAQcOARURFBYXHgEXHgEXHgEzITI2Nz4BNz4BNz4BNRE0JicuAScuAScuASMFITIWFx4BFx4BFx4BFREUBgcOAQcOAQcOASMhIiYnLgEnLgEnLgE1ETQ2Nz4BNz4BNz4BMxMzFRQWMzI2PQEzMjY1NCYrATU0JiMiBh0BIyIGFRQWM9UNGAwLFQkJDgUFBQUFBQ4JCRULDBgNAlYNGAwLFQkJDgUFBQUFBQ4JCRULDBgN/aoCVgQIBAQHAwMFAQIBAQIBBQMDBwQECAT9qgQIBAQHAwMFAQIBAQIBBQMDBwQECASAgBkSEhmAERkZEYAZEhIZgBEZGREDVQUEBQ4JCRUMCxkN/asNGQsMFQkIDgUFBQUFBQ4JCBUMCxkNAlUNGQsMFQkJDgUEBVUCAQIFAwIHBAQIBf2rBAkDBAcDAwUBAgICAgEFAwMHBAMJBAJVBQgEBAcCAwUCAQL+gIASGRkSgBkSERmAEhkZEoAZERIZAAABAOIAjQMeAskAIAAAExcHBhQXFjI/ARcWMjc2NC8BNzY0JyYiDwEnJiIHBhQX4uLiDQ0MJAzi4gwkDA0N4uINDQwkDOLiDCQMDQ0CjeLiDSMMDQ3h4Q0NDCMN4uIMIw0MDOLiDAwNIwwAAAABAAAAAQAAa5n0y18PPPUACwQAAAAAANivOVsAAAAA2K85WwAAAAADqwNVAAAACAACAAAAAAAAAAEAAAPA/8AAAAQAAAAAAAOrAAEAAAAAAAAAAAAAAAAAAAALBAAAAAAAAAAAAAAAAgAAAAQAAWIEAAFiBAAA4gQAAOIEAABVBAAAVQQAAOIAAAAAAAoAFAAeAEQAagCqAOoBngJkApoAAQAAAAsAigADAAAAAAACAAAAAAAAAAAAAAAAAAAAAAAAAA4ArgABAAAAAAABAAcAAAABAAAAAAACAAcAYAABAAAAAAADAAcANgABAAAAAAAEAAcAdQABAAAAAAAFAAsAFQABAAAAAAAGAAcASwABAAAAAAAKABoAigADAAEECQABAA4ABwADAAEECQACAA4AZwADAAEECQADAA4APQADAAEECQAEAA4AfAADAAEECQAFABYAIAADAAEECQAGAA4AUgADAAEECQAKADQApGZjaWNvbnMAZgBjAGkAYwBvAG4Ac1ZlcnNpb24gMS4wAFYAZQByAHMAaQBvAG4AIAAxAC4AMGZjaWNvbnMAZgBjAGkAYwBvAG4Ac2ZjaWNvbnMAZgBjAGkAYwBvAG4Ac1JlZ3VsYXIAUgBlAGcAdQBsAGEAcmZjaWNvbnMAZgBjAGkAYwBvAG4Ac0ZvbnQgZ2VuZXJhdGVkIGJ5IEljb01vb24uAEYAbwBuAHQAIABnAGUAbgBlAHIAYQB0AGUAZAAgAGIAeQAgAEkAYwBvAE0AbwBvAG4ALgAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=") format("truetype")}.fc-icon{speak:none;-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale;display:inline-block;font-family:fcicons!important;font-style:normal;font-variant:normal;font-weight:400;height:1em;line-height:1;text-align:center;text-transform:none;-webkit-user-select:none;-moz-user-select:none;user-select:none;width:1em}.fc-icon-chevron-left:before{content:"\\e900"}.fc-icon-chevron-right:before{content:"\\e901"}.fc-icon-chevrons-left:before{content:"\\e902"}.fc-icon-chevrons-right:before{content:"\\e903"}.fc-icon-minus-square:before{content:"\\e904"}.fc-icon-plus-square:before{content:"\\e905"}.fc-icon-x:before{content:"\\e906"}.fc .fc-button{border-radius:0;font-family:inherit;font-size:inherit;line-height:inherit;margin:0;overflow:visible;text-transform:none}.fc .fc-button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}.fc .fc-button{-webkit-appearance:button}.fc .fc-button:not(:disabled){cursor:pointer}.fc .fc-button{background-color:transparent;border:1px solid transparent;border-radius:.25em;display:inline-block;font-size:1em;font-weight:400;line-height:1.5;padding:.4em .65em;text-align:center;-webkit-user-select:none;-moz-user-select:none;user-select:none;vertical-align:middle}.fc .fc-button:hover{text-decoration:none}.fc .fc-button:focus{box-shadow:0 0 0 .2rem rgba(44,62,80,.25);outline:0}.fc .fc-button:disabled{opacity:.65}.fc .fc-button-primary{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:hover{background-color:var(--fc-button-hover-bg-color);border-color:var(--fc-button-hover-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:disabled{background-color:var(--fc-button-bg-color);border-color:var(--fc-button-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button-primary:not(:disabled).fc-button-active,.fc .fc-button-primary:not(:disabled):active{background-color:var(--fc-button-active-bg-color);border-color:var(--fc-button-active-border-color);color:var(--fc-button-text-color)}.fc .fc-button-primary:not(:disabled).fc-button-active:focus,.fc .fc-button-primary:not(:disabled):active:focus{box-shadow:0 0 0 .2rem rgba(76,91,106,.5)}.fc .fc-button .fc-icon{font-size:1.5em;vertical-align:middle}.fc .fc-button-group{display:inline-flex;position:relative;vertical-align:middle}.fc .fc-button-group>.fc-button{flex:1 1 auto;position:relative}.fc .fc-button-group>.fc-button.fc-button-active,.fc .fc-button-group>.fc-button:active,.fc .fc-button-group>.fc-button:focus,.fc .fc-button-group>.fc-button:hover{z-index:1}.fc-direction-ltr .fc-button-group>.fc-button:not(:first-child){border-bottom-left-radius:0;border-top-left-radius:0;margin-left:-1px}.fc-direction-ltr .fc-button-group>.fc-button:not(:last-child){border-bottom-right-radius:0;border-top-right-radius:0}.fc-direction-rtl .fc-button-group>.fc-button:not(:first-child){border-bottom-right-radius:0;border-top-right-radius:0;margin-right:-1px}.fc-direction-rtl .fc-button-group>.fc-button:not(:last-child){border-bottom-left-radius:0;border-top-left-radius:0}.fc .fc-toolbar{align-items:center;display:flex;justify-content:space-between}.fc .fc-toolbar.fc-header-toolbar{margin-bottom:1.5em}.fc .fc-toolbar.fc-footer-toolbar{margin-top:1.5em}.fc .fc-toolbar-title{font-size:1.75em;margin:0}.fc-direction-ltr .fc-toolbar>*>:not(:first-child){margin-left:.75em}.fc-direction-rtl .fc-toolbar>*>:not(:first-child){margin-right:.75em}.fc-direction-rtl .fc-toolbar-ltr{flex-direction:row-reverse}.fc .fc-scroller{-webkit-overflow-scrolling:touch;position:relative}.fc .fc-scroller-liquid{height:100%}.fc .fc-scroller-liquid-absolute{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-scroller-harness{direction:ltr;overflow:hidden;position:relative}.fc .fc-scroller-harness-liquid{height:100%}.fc-direction-rtl .fc-scroller-harness>.fc-scroller{direction:rtl}.fc-theme-standard .fc-scrollgrid{border:1px solid var(--fc-border-color)}.fc .fc-scrollgrid,.fc .fc-scrollgrid table{table-layout:fixed;width:100%}.fc .fc-scrollgrid table{border-left-style:hidden;border-right-style:hidden;border-top-style:hidden}.fc .fc-scrollgrid{border-bottom-width:0;border-collapse:separate;border-right-width:0}.fc .fc-scrollgrid-liquid{height:100%}.fc .fc-scrollgrid-section,.fc .fc-scrollgrid-section table,.fc .fc-scrollgrid-section>td{height:1px}.fc .fc-scrollgrid-section-liquid>td{height:100%}.fc .fc-scrollgrid-section>*{border-left-width:0;border-top-width:0}.fc .fc-scrollgrid-section-footer>*,.fc .fc-scrollgrid-section-header>*{border-bottom-width:0}.fc .fc-scrollgrid-section-body table,.fc .fc-scrollgrid-section-footer table{border-bottom-style:hidden}.fc .fc-scrollgrid-section-sticky>*{background:var(--fc-page-bg-color);position:sticky;z-index:3}.fc .fc-scrollgrid-section-header.fc-scrollgrid-section-sticky>*{top:0}.fc .fc-scrollgrid-section-footer.fc-scrollgrid-section-sticky>*{bottom:0}.fc .fc-scrollgrid-sticky-shim{height:1px;margin-bottom:-1px}.fc-sticky{position:sticky}.fc .fc-view-harness{flex-grow:1;position:relative}.fc .fc-view-harness-active>.fc-view{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-col-header-cell-cushion{display:inline-block;padding:2px 4px}.fc .fc-bg-event,.fc .fc-highlight,.fc .fc-non-business{bottom:0;left:0;position:absolute;right:0;top:0}.fc .fc-non-business{background:var(--fc-non-business-color)}.fc .fc-bg-event{background:var(--fc-bg-event-color);opacity:var(--fc-bg-event-opacity)}.fc .fc-bg-event .fc-event-title{font-size:var(--fc-small-font-size);font-style:italic;margin:.5em}.fc .fc-highlight{background:var(--fc-highlight-color)}.fc .fc-cell-shaded,.fc .fc-day-disabled{background:var(--fc-neutral-bg-color)}a.fc-event,a.fc-event:hover{text-decoration:none}.fc-event.fc-event-draggable,.fc-event[href]{cursor:pointer}.fc-event .fc-event-main{position:relative;z-index:2}.fc-event-dragging:not(.fc-event-selected){opacity:.75}.fc-event-dragging.fc-event-selected{box-shadow:0 2px 7px rgba(0,0,0,.3)}.fc-event .fc-event-resizer{display:none;position:absolute;z-index:4}.fc-event-selected .fc-event-resizer,.fc-event:hover .fc-event-resizer{display:block}.fc-event-selected .fc-event-resizer{background:var(--fc-page-bg-color);border-color:inherit;border-radius:calc(var(--fc-event-resizer-dot-total-width)/2);border-style:solid;border-width:var(--fc-event-resizer-dot-border-width);height:var(--fc-event-resizer-dot-total-width);width:var(--fc-event-resizer-dot-total-width)}.fc-event-selected .fc-event-resizer:before{bottom:-20px;content:"";left:-20px;position:absolute;right:-20px;top:-20px}.fc-event-selected,.fc-event:focus{box-shadow:0 2px 5px rgba(0,0,0,.2)}.fc-event-selected:before,.fc-event:focus:before{bottom:0;content:"";left:0;position:absolute;right:0;top:0;z-index:3}.fc-event-selected:after,.fc-event:focus:after{background:var(--fc-event-selected-overlay-color);bottom:-1px;content:"";left:-1px;position:absolute;right:-1px;top:-1px;z-index:1}.fc-h-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-h-event .fc-event-main{color:var(--fc-event-text-color)}.fc-h-event .fc-event-main-frame{display:flex}.fc-h-event .fc-event-time{max-width:100%;overflow:hidden}.fc-h-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-width:0}.fc-h-event .fc-event-title{display:inline-block;left:0;max-width:100%;overflow:hidden;right:0;vertical-align:top}.fc-h-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-start),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-end){border-bottom-left-radius:0;border-left-width:0;border-top-left-radius:0}.fc-direction-ltr .fc-daygrid-block-event:not(.fc-event-end),.fc-direction-rtl .fc-daygrid-block-event:not(.fc-event-start){border-bottom-right-radius:0;border-right-width:0;border-top-right-radius:0}.fc-h-event:not(.fc-event-selected) .fc-event-resizer{bottom:0;top:0;width:var(--fc-event-resizer-thickness)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end{cursor:w-resize;left:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-direction-ltr .fc-h-event:not(.fc-event-selected) .fc-event-resizer-end,.fc-direction-rtl .fc-h-event:not(.fc-event-selected) .fc-event-resizer-start{cursor:e-resize;right:calc(var(--fc-event-resizer-thickness)*-.5)}.fc-h-event.fc-event-selected .fc-event-resizer{margin-top:calc(var(--fc-event-resizer-dot-total-width)*-.5);top:50%}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-start,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-end{left:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc-direction-ltr .fc-h-event.fc-event-selected .fc-event-resizer-end,.fc-direction-rtl .fc-h-event.fc-event-selected .fc-event-resizer-start{right:calc(var(--fc-event-resizer-dot-total-width)*-.5)}.fc .fc-popover{box-shadow:0 2px 6px rgba(0,0,0,.15);position:absolute;z-index:9999}.fc .fc-popover-header{align-items:center;display:flex;flex-direction:row;justify-content:space-between;padding:3px 4px}.fc .fc-popover-title{margin:0 2px}.fc .fc-popover-close{cursor:pointer;font-size:1.1em;opacity:.65}.fc-theme-standard .fc-popover{background:var(--fc-page-bg-color);border:1px solid var(--fc-border-color)}.fc-theme-standard .fc-popover-header{background:var(--fc-neutral-bg-color)}';o0(PN);class s0{constructor(e){this.drainedOption=e,this.isRunning=!1,this.isDirty=!1,this.pauseDepths={},this.timeoutId=0}request(e){this.isDirty=!0,this.isPaused()||(this.clearTimeout(),e==null?this.tryDrain():this.timeoutId=setTimeout(this.tryDrain.bind(this),e))}pause(e=""){let{pauseDepths:n}=this;n[e]=(n[e]||0)+1,this.clearTimeout()}resume(e="",n){let{pauseDepths:i}=this;e in i&&(n?delete i[e]:(i[e]-=1,i[e]<=0&&delete i[e]),this.tryDrain())}isPaused(){return Object.keys(this.pauseDepths).length}tryDrain(){if(!this.isRunning&&!this.isPaused()){for(this.isRunning=!0;this.isDirty;)this.isDirty=!1,this.drained();this.isRunning=!1}}clear(){this.clearTimeout(),this.isDirty=!1,this.pauseDepths={}}clearTimeout(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=0)}drained(){this.drainedOption&&this.drainedOption()}}function l0(t){t.parentNode&&t.parentNode.removeChild(t)}function Qo(t,e){if(t.closest)return t.closest(e);if(!document.documentElement.contains(t))return null;do{if(IN(t,e))return t;t=t.parentElement||t.parentNode}while(t!==null&&t.nodeType===1);return null}function IN(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector).call(t,e)}function zN(t,e){let n=t instanceof HTMLElement?[t]:t,i=[];for(let r=0;r<n.length;r+=1){let a=n[r].querySelectorAll(e);for(let l=0;l<a.length;l+=1)i.push(a[l])}return i}const BN=/(top|left|right|bottom|width|height)$/i;function Rf(t,e){for(let n in e)QS(t,n,e[n])}function QS(t,e,n){n==null?t.style[e]="":typeof n=="number"&&BN.test(e)?t.style[e]=`${n}px`:t.style[e]=n}function $S(t){var e,n;return(n=(e=t.composedPath)===null||e===void 0?void 0:e.call(t)[0])!==null&&n!==void 0?n:t.target}let H2=0;function wg(){return H2+=1,"fc-dom-"+H2}function Sg(t){t.preventDefault()}function FN(t,e){return n=>{let i=Qo(n.target,t);i&&e.call(i,n,i)}}function JS(t,e,n,i){let r=FN(n,i);return t.addEventListener(e,r),()=>{t.removeEventListener(e,r)}}function UN(t,e,n,i){let r;return JS(t,"mouseover",e,(a,l)=>{if(l!==r){r=l,n(a,l);let d=p=>{r=null,i(p,l),l.removeEventListener("mouseleave",d)};l.addEventListener("mouseleave",d)}})}const q2=["webkitTransitionEnd","otransitionend","oTransitionEnd","msTransitionEnd","transitionend"];function HN(t,e){let n=i=>{e(i),q2.forEach(r=>{t.removeEventListener(r,n)})};q2.forEach(i=>{t.addEventListener(i,n)})}function eC(t){return Object.assign({onClick:t},tC(t))}function tC(t){return{tabIndex:0,onKeyDown(e){(e.key==="Enter"||e.key===" ")&&(t(e),e.preventDefault())}}}let W2=0;function Iu(){return W2+=1,String(W2)}function c0(){document.body.classList.add("fc-not-allowed")}function u0(){document.body.classList.remove("fc-not-allowed")}function qN(t){t.style.userSelect="none",t.style.webkitUserSelect="none",t.addEventListener("selectstart",Sg)}function WN(t){t.style.userSelect="",t.style.webkitUserSelect="",t.removeEventListener("selectstart",Sg)}function GN(t){t.addEventListener("contextmenu",Sg)}function VN(t){t.removeEventListener("contextmenu",Sg)}function YN(t){let e=[],n=[],i,r;for(typeof t=="string"?n=t.split(/\s*,\s*/):typeof t=="function"?n=[t]:Array.isArray(t)&&(n=t),i=0;i<n.length;i+=1)r=n[i],typeof r=="string"?e.push(r.charAt(0)==="-"?{field:r.substring(1),order:-1}:{field:r,order:1}):typeof r=="function"&&e.push({func:r});return e}function ZN(t,e,n){let i,r;for(i=0;i<n.length;i+=1)if(r=KN(t,e,n[i]),r)return r;return 0}function KN(t,e,n){return n.func?n.func(t,e):XN(t[n.field],e[n.field])*(n.order||1)}function XN(t,e){return!t&&!e?0:e==null?-1:t==null?1:typeof t=="string"||typeof e=="string"?String(t).localeCompare(String(e)):t-e}function Ed(t,e){let n=String(t);return"000".substr(0,e-n.length)+n}function Nf(t,e,n){return typeof t=="function"?t(...e):typeof t=="string"?e.reduce((i,r,a)=>i.replace("$"+a,r||""),t):n}function QN(t,e){return t-e}function jp(t){return t%1===0}function $N(t){let e=t.querySelector(".fc-scrollgrid-shrink-frame"),n=t.querySelector(".fc-scrollgrid-shrink-cushion");if(!e)throw new Error("needs fc-scrollgrid-shrink-frame className");if(!n)throw new Error("needs fc-scrollgrid-shrink-cushion className");return t.getBoundingClientRect().width-e.getBoundingClientRect().width+n.getBoundingClientRect().width}const G2=["years","months","days","milliseconds"],JN=/^(-?)(?:(\d+)\.)?(\d+):(\d\d)(?::(\d\d)(?:\.(\d\d\d))?)?/;function Ei(t,e){return typeof t=="string"?eD(t):typeof t=="object"&&t?V2(t):typeof t=="number"?V2({[e||"milliseconds"]:t}):null}function eD(t){let e=JN.exec(t);if(e){let n=e[1]?-1:1;return{years:0,months:0,days:n*(e[2]?parseInt(e[2],10):0),milliseconds:n*((e[3]?parseInt(e[3],10):0)*60*60*1e3+(e[4]?parseInt(e[4],10):0)*60*1e3+(e[5]?parseInt(e[5],10):0)*1e3+(e[6]?parseInt(e[6],10):0))}}return null}function V2(t){let e={years:t.years||t.year||0,months:t.months||t.month||0,days:t.days||t.day||0,milliseconds:(t.hours||t.hour||0)*60*60*1e3+(t.minutes||t.minute||0)*60*1e3+(t.seconds||t.second||0)*1e3+(t.milliseconds||t.millisecond||t.ms||0)},n=t.weeks||t.week;return n&&(e.days+=n*7,e.specifiedWeeks=!0),e}function tD(t,e){return t.years===e.years&&t.months===e.months&&t.days===e.days&&t.milliseconds===e.milliseconds}function Sy(t,e){return{years:t.years+e.years,months:t.months+e.months,days:t.days+e.days,milliseconds:t.milliseconds+e.milliseconds}}function nD(t,e){return{years:t.years-e.years,months:t.months-e.months,days:t.days-e.days,milliseconds:t.milliseconds-e.milliseconds}}function iD(t,e){return{years:t.years*e,months:t.months*e,days:t.days*e,milliseconds:t.milliseconds*e}}function rD(t){return Ad(t)/365}function aD(t){return Ad(t)/30}function Ad(t){return gl(t)/864e5}function gl(t){return t.years*(365*864e5)+t.months*(30*864e5)+t.days*864e5+t.milliseconds}function d0(t,e){let n=null;for(let i=0;i<G2.length;i+=1){let r=G2[i];if(e[r]){let a=t[r]/e[r];if(!jp(a)||n!==null&&n!==a)return null;n=a}else if(t[r])return null}return n}function Cy(t){let e=t.milliseconds;if(e){if(e%1e3!==0)return{unit:"millisecond",value:e};if(e%(1e3*60)!==0)return{unit:"second",value:e/1e3};if(e%(1e3*60*60)!==0)return{unit:"minute",value:e/(1e3*60)};if(e)return{unit:"hour",value:e/(1e3*60*60)}}return t.days?t.specifiedWeeks&&t.days%7===0?{unit:"week",value:t.days/7}:{unit:"day",value:t.days}:t.months?{unit:"month",value:t.months}:t.years?{unit:"year",value:t.years}:{unit:"millisecond",value:0}}function iu(t,e,n){if(t===e)return!0;let i=t.length,r;if(i!==e.length)return!1;for(r=0;r<i;r+=1)if(!(n?n(t[r],e[r]):t[r]===e[r]))return!1;return!0}const oD=["sun","mon","tue","wed","thu","fri","sat"];function Y2(t,e){let n=Qc(t);return n[2]+=e*7,Ts(n)}function Eo(t,e){let n=Qc(t);return n[2]+=e,Ts(n)}function ru(t,e){let n=Qc(t);return n[6]+=e,Ts(n)}function sD(t,e){return zu(t,e)/7}function zu(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60*24)}function lD(t,e){return(e.valueOf()-t.valueOf())/(1e3*60*60)}function cD(t,e){return(e.valueOf()-t.valueOf())/(1e3*60)}function uD(t,e){return(e.valueOf()-t.valueOf())/1e3}function dD(t,e){let n=Er(t),i=Er(e);return{years:0,months:0,days:Math.round(zu(n,i)),milliseconds:e.valueOf()-i.valueOf()-(t.valueOf()-n.valueOf())}}function fD(t,e){let n=Zp(t,e);return n!==null&&n%7===0?n/7:null}function Zp(t,e){return $c(t)===$c(e)?Math.round(zu(t,e)):null}function Er(t){return Ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()])}function hD(t){return Ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours()])}function pD(t){return Ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes()])}function gD(t){return Ts([t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds()])}function mD(t,e,n){let i=t.getUTCFullYear(),r=Ov(t,i,e,n);if(r<1)return Ov(t,i-1,e,n);let a=Ov(t,i+1,e,n);return a>=1?Math.min(r,a):r}function Ov(t,e,n,i){let r=Ts([e,0,1+vD(e,n,i)]),a=Er(t),l=Math.round(zu(r,a));return Math.floor(l/7)+1}function vD(t,e,n){let i=7+e-n;return-((7+Ts([t,0,i]).getUTCDay()-e)%7)+i-1}function Z2(t){return[t.getFullYear(),t.getMonth(),t.getDate(),t.getHours(),t.getMinutes(),t.getSeconds(),t.getMilliseconds()]}function K2(t){return new Date(t[0],t[1]||0,t[2]==null?1:t[2],t[3]||0,t[4]||0,t[5]||0)}function Qc(t){return[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate(),t.getUTCHours(),t.getUTCMinutes(),t.getUTCSeconds(),t.getUTCMilliseconds()]}function Ts(t){return t.length===1&&(t=t.concat([0])),new Date(Date.UTC(...t))}function nC(t){return!isNaN(t.valueOf())}function $c(t){return t.getUTCHours()*1e3*60*60+t.getUTCMinutes()*1e3*60+t.getUTCSeconds()*1e3+t.getUTCMilliseconds()}function iC(t,e,n=!1){let i=t.toISOString();return i=i.replace(".000",""),n&&(i=i.replace("T00:00:00Z","")),i.length>10&&(e==null?i=i.replace("Z",""):e!==0&&(i=i.replace("Z",h0(e,!0)))),i}function f0(t){return t.toISOString().replace(/T.*$/,"")}function yD(t){return t.toISOString().match(/^\d{4}-\d{2}/)[0]}function xD(t){return Ed(t.getUTCHours(),2)+":"+Ed(t.getUTCMinutes(),2)+":"+Ed(t.getUTCSeconds(),2)}function h0(t,e=!1){let n=t<0?"-":"+",i=Math.abs(t),r=Math.floor(i/60),a=Math.round(i%60);return e?`${n+Ed(r,2)}:${Ed(a,2)}`:`GMT${n}${r}${a?`:${Ed(a,2)}`:""}`}function Nn(t,e,n){let i,r;return function(...a){if(!i)r=t.apply(this,a);else if(!iu(i,a)){let l=t.apply(this,a);(!e||!e(l,r))&&(r=l)}return i=a,r}}function kp(t,e,n){let i,r;return a=>(i?xl(i,a)||(r=t.call(this,a)):r=t.call(this,a),i=a,r)}const Pv={week:3,separator:9,omitZeroMinute:9,meridiem:9,omitCommas:9},Kp={timeZoneName:7,era:6,year:5,month:4,day:2,weekday:2,hour:1,minute:1,second:1},lp=/\s*([ap])\.?m\.?/i,bD=/,/g,_D=/\s+/g,wD=/\u200e/g,SD=/UTC|GMT/;class CD{constructor(e){let n={},i={},r=9;for(let a in e)a in Pv?(i[a]=e[a],Pv[a]<9&&(r=Math.min(Pv[a],r))):(n[a]=e[a],a in Kp&&(r=Math.min(Kp[a],r)));this.standardDateProps=n,this.extendedSettings=i,this.smallestUnitNum=r,this.buildFormattingFunc=Nn(X2)}format(e,n){return this.buildFormattingFunc(this.standardDateProps,this.extendedSettings,n)(e)}formatRange(e,n,i,r){let{standardDateProps:a,extendedSettings:l}=this,d=kD(e.marker,n.marker,i.calendarSystem);if(!d)return this.format(e,i);let p=d;p>1&&(a.year==="numeric"||a.year==="2-digit")&&(a.month==="numeric"||a.month==="2-digit")&&(a.day==="numeric"||a.day==="2-digit")&&(p=1);let g=this.format(e,i),m=this.format(n,i);if(g===m)return g;let _=RD(a,p),A=X2(_,l,i),x=A(e),R=A(n),M=ND(g,x,m,R),k=l.separator||r||i.defaultSeparator||"";return M?M.before+x+k+R+M.after:g+k+m}getSmallestUnit(){switch(this.smallestUnitNum){case 7:case 6:case 5:return"year";case 4:return"month";case 3:return"week";case 2:return"day";default:return"time"}}}function X2(t,e,n){let i=Object.keys(t).length;return i===1&&t.timeZoneName==="short"?r=>h0(r.timeZoneOffset):i===0&&e.week?r=>jD(n.computeWeekNumber(r.marker),n.weekText,n.weekTextLong,n.locale,e.week):ED(t,e,n)}function ED(t,e,n){t=Object.assign({},t),e=Object.assign({},e),AD(t,e),t.timeZone="UTC";let i=new Intl.DateTimeFormat(n.locale.codes,t),r;if(e.omitZeroMinute){let a=Object.assign({},t);delete a.minute,r=new Intl.DateTimeFormat(n.locale.codes,a)}return a=>{let{marker:l}=a,d;r&&!l.getUTCMinutes()?d=r:d=i;let p=d.format(l);return LD(p,a,t,e,n)}}function AD(t,e){t.timeZoneName&&(t.hour||(t.hour="2-digit"),t.minute||(t.minute="2-digit")),t.timeZoneName==="long"&&(t.timeZoneName="short"),e.omitZeroMinute&&(t.second||t.millisecond)&&delete e.omitZeroMinute}function LD(t,e,n,i,r){return t=t.replace(wD,""),n.timeZoneName==="short"&&(t=TD(t,r.timeZone==="UTC"||e.timeZoneOffset==null?"UTC":h0(e.timeZoneOffset))),i.omitCommas&&(t=t.replace(bD,"").trim()),i.omitZeroMinute&&(t=t.replace(":00","")),i.meridiem===!1?t=t.replace(lp,"").trim():i.meridiem==="narrow"?t=t.replace(lp,(a,l)=>l.toLocaleLowerCase()):i.meridiem==="short"?t=t.replace(lp,(a,l)=>`${l.toLocaleLowerCase()}m`):i.meridiem==="lowercase"&&(t=t.replace(lp,a=>a.toLocaleLowerCase())),t=t.replace(_D," "),t=t.trim(),t}function TD(t,e){let n=!1;return t=t.replace(SD,()=>(n=!0,e)),n||(t+=` ${e}`),t}function jD(t,e,n,i,r){let a=[];return r==="long"?a.push(n):(r==="short"||r==="narrow")&&a.push(e),(r==="long"||r==="short")&&a.push(" "),a.push(i.simpleNumberFormat.format(t)),i.options.direction==="rtl"&&a.reverse(),a.join("")}function kD(t,e,n){return n.getMarkerYear(t)!==n.getMarkerYear(e)?5:n.getMarkerMonth(t)!==n.getMarkerMonth(e)?4:n.getMarkerDay(t)!==n.getMarkerDay(e)?2:$c(t)!==$c(e)?1:0}function RD(t,e){let n={};for(let i in t)(!(i in Kp)||Kp[i]<=e)&&(n[i]=t[i]);return n}function ND(t,e,n,i){let r=0;for(;r<t.length;){let a=t.indexOf(e,r);if(a===-1)break;let l=t.substr(0,a);r=a+e.length;let d=t.substr(r),p=0;for(;p<n.length;){let g=n.indexOf(i,p);if(g===-1)break;let m=n.substr(0,g);p=g+i.length;let _=n.substr(p);if(l===m&&d===_)return{before:l,after:d}}}return null}function Q2(t,e){let n=e.markerToArray(t.marker);return{marker:t.marker,timeZoneOffset:t.timeZoneOffset,array:n,year:n[0],month:n[1],day:n[2],hour:n[3],minute:n[4],second:n[5],millisecond:n[6]}}function Xp(t,e,n,i){let r=Q2(t,n.calendarSystem),a=e?Q2(e,n.calendarSystem):null;return{date:r,start:r,end:a,timeZone:n.timeZone,localeCodes:n.locale.codes,defaultSeparator:i||n.defaultSeparator}}class DD{constructor(e){this.cmdStr=e}format(e,n,i){return n.cmdFormatter(this.cmdStr,Xp(e,null,n,i))}formatRange(e,n,i,r){return i.cmdFormatter(this.cmdStr,Xp(e,n,i,r))}}class MD{constructor(e){this.func=e}format(e,n,i){return this.func(Xp(e,null,n,i))}formatRange(e,n,i,r){return this.func(Xp(e,n,i,r))}}function na(t){return typeof t=="object"&&t?new CD(t):typeof t=="string"?new DD(t):typeof t=="function"?new MD(t):null}const $2={navLinkDayClick:lt,navLinkWeekClick:lt,duration:Ei,bootstrapFontAwesome:lt,buttonIcons:lt,customButtons:lt,defaultAllDayEventDuration:Ei,defaultTimedEventDuration:Ei,nextDayThreshold:Ei,scrollTime:Ei,scrollTimeReset:Boolean,slotMinTime:Ei,slotMaxTime:Ei,dayPopoverFormat:na,slotDuration:Ei,snapDuration:Ei,headerToolbar:lt,footerToolbar:lt,defaultRangeSeparator:String,titleRangeSeparator:String,forceEventDuration:Boolean,dayHeaders:Boolean,dayHeaderFormat:na,dayHeaderClassNames:lt,dayHeaderContent:lt,dayHeaderDidMount:lt,dayHeaderWillUnmount:lt,dayCellClassNames:lt,dayCellContent:lt,dayCellDidMount:lt,dayCellWillUnmount:lt,initialView:String,aspectRatio:Number,weekends:Boolean,weekNumberCalculation:lt,weekNumbers:Boolean,weekNumberClassNames:lt,weekNumberContent:lt,weekNumberDidMount:lt,weekNumberWillUnmount:lt,editable:Boolean,viewClassNames:lt,viewDidMount:lt,viewWillUnmount:lt,nowIndicator:Boolean,nowIndicatorSnap:lt,nowIndicatorClassNames:lt,nowIndicatorContent:lt,nowIndicatorDidMount:lt,nowIndicatorWillUnmount:lt,showNonCurrentDates:Boolean,lazyFetching:Boolean,startParam:String,endParam:String,timeZoneParam:String,timeZone:String,locales:lt,locale:lt,themeSystem:String,dragRevertDuration:Number,dragScroll:Boolean,allDayMaintainDuration:Boolean,unselectAuto:Boolean,dropAccept:lt,eventOrder:YN,eventOrderStrict:Boolean,handleWindowResize:Boolean,windowResizeDelay:Number,longPressDelay:Number,eventDragMinDistance:Number,expandRows:Boolean,height:lt,contentHeight:lt,direction:String,weekNumberFormat:na,eventResizableFromStart:Boolean,displayEventTime:Boolean,displayEventEnd:Boolean,weekText:String,weekTextLong:String,progressiveEventRendering:Boolean,businessHours:lt,initialDate:lt,now:lt,eventDataTransform:lt,stickyHeaderDates:lt,stickyFooterScrollbar:lt,viewHeight:lt,defaultAllDay:Boolean,eventSourceFailure:lt,eventSourceSuccess:lt,eventDisplay:String,eventStartEditable:Boolean,eventDurationEditable:Boolean,eventOverlap:lt,eventConstraint:lt,eventAllow:lt,eventBackgroundColor:String,eventBorderColor:String,eventTextColor:String,eventColor:String,eventClassNames:lt,eventContent:lt,eventDidMount:lt,eventWillUnmount:lt,selectConstraint:lt,selectOverlap:lt,selectAllow:lt,droppable:Boolean,unselectCancel:String,slotLabelFormat:lt,slotLaneClassNames:lt,slotLaneContent:lt,slotLaneDidMount:lt,slotLaneWillUnmount:lt,slotLabelClassNames:lt,slotLabelContent:lt,slotLabelDidMount:lt,slotLabelWillUnmount:lt,dayMaxEvents:lt,dayMaxEventRows:lt,dayMinWidth:Number,slotLabelInterval:Ei,allDayText:String,allDayClassNames:lt,allDayContent:lt,allDayDidMount:lt,allDayWillUnmount:lt,slotMinWidth:Number,navLinks:Boolean,eventTimeFormat:na,rerenderDelay:Number,moreLinkText:lt,moreLinkHint:lt,selectMinDistance:Number,selectable:Boolean,selectLongPressDelay:Number,eventLongPressDelay:Number,selectMirror:Boolean,eventMaxStack:Number,eventMinHeight:Number,eventMinWidth:Number,eventShortHeight:Number,slotEventOverlap:Boolean,plugins:lt,firstDay:Number,dayCount:Number,dateAlignment:String,dateIncrement:Ei,hiddenDays:lt,fixedWeekCount:Boolean,validRange:lt,visibleRange:lt,titleFormat:lt,eventInteractive:Boolean,noEventsText:String,viewHint:lt,navLinkHint:lt,closeHint:String,timeHint:String,eventHint:String,moreLinkClick:lt,moreLinkClassNames:lt,moreLinkContent:lt,moreLinkDidMount:lt,moreLinkWillUnmount:lt,monthStartFormat:na,handleCustomRendering:lt,customRenderingMetaMap:lt,customRenderingReplaces:Boolean},Df={eventDisplay:"auto",defaultRangeSeparator:" - ",titleRangeSeparator:"  ",defaultTimedEventDuration:"01:00:00",defaultAllDayEventDuration:{day:1},forceEventDuration:!1,nextDayThreshold:"00:00:00",dayHeaders:!0,initialView:"",aspectRatio:1.35,headerToolbar:{start:"title",center:"",end:"today prev,next"},weekends:!0,weekNumbers:!1,weekNumberCalculation:"local",editable:!1,nowIndicator:!1,scrollTime:"06:00:00",scrollTimeReset:!0,slotMinTime:"00:00:00",slotMaxTime:"24:00:00",showNonCurrentDates:!0,lazyFetching:!0,startParam:"start",endParam:"end",timeZoneParam:"timeZone",timeZone:"local",locales:[],locale:"",themeSystem:"standard",dragRevertDuration:500,dragScroll:!0,allDayMaintainDuration:!1,unselectAuto:!0,dropAccept:"*",eventOrder:"start,-duration,allDay,title",dayPopoverFormat:{month:"long",day:"numeric",year:"numeric"},handleWindowResize:!0,windowResizeDelay:100,longPressDelay:1e3,eventDragMinDistance:5,expandRows:!1,navLinks:!1,selectable:!1,eventMinHeight:15,eventMinWidth:30,eventShortHeight:30,monthStartFormat:{month:"long",day:"numeric"},nowIndicatorSnap:"auto"},J2={datesSet:lt,eventsSet:lt,eventAdd:lt,eventChange:lt,eventRemove:lt,windowResize:lt,eventClick:lt,eventMouseEnter:lt,eventMouseLeave:lt,select:lt,unselect:lt,loading:lt,_unmount:lt,_beforeprint:lt,_afterprint:lt,_noEventDrop:lt,_noEventResize:lt,_resize:lt,_scrollRequest:lt},ew={buttonText:lt,buttonHints:lt,views:lt,plugins:lt,initialEvents:lt,events:lt,eventSources:lt},vu={headerToolbar:yu,footerToolbar:yu,buttonText:yu,buttonHints:yu,buttonIcons:yu,dateIncrement:yu,plugins:cp,events:cp,eventSources:cp,resources:cp};function yu(t,e){return typeof t=="object"&&typeof e=="object"&&t&&e?xl(t,e):t===e}function cp(t,e){return Array.isArray(t)&&Array.isArray(e)?iu(t,e):t===e}const OD={type:String,component:lt,buttonText:String,buttonTextKey:String,dateProfileGeneratorClass:lt,usesMinMaxTime:Boolean,classNames:lt,content:lt,didMount:lt,willUnmount:lt};function Iv(t){return g0(t,vu)}function p0(t,e){let n={},i={};for(let r in e)r in t&&(n[r]=e[r](t[r]));for(let r in t)r in e||(i[r]=t[r]);return{refined:n,extra:i}}function lt(t){return t}const{hasOwnProperty:Qp}=Object.prototype;function g0(t,e){let n={};if(e){for(let i in e)if(e[i]===yu){let r=[];for(let a=t.length-1;a>=0;a-=1){let l=t[a][i];if(typeof l=="object"&&l)r.unshift(l);else if(l!==void 0){n[i]=l;break}}r.length&&(n[i]=g0(r))}}for(let i=t.length-1;i>=0;i-=1){let r=t[i];for(let a in r)a in n||(n[a]=r[a])}return n}function Ru(t,e){let n={};for(let i in t)e(t[i],i)&&(n[i]=t[i]);return n}function Sc(t,e){let n={};for(let i in t)n[i]=e(t[i],i);return n}function rC(t){let e={};for(let n of t)e[n]=!0;return e}function m0(t){let e=[];for(let n in t)e.push(t[n]);return e}function xl(t,e){if(t===e)return!0;for(let n in t)if(Qp.call(t,n)&&!(n in e))return!1;for(let n in e)if(Qp.call(e,n)&&t[n]!==e[n])return!1;return!0}const PD=/^on[A-Z]/;function ID(t,e){const n=zD(t,e);for(let i of n)if(!PD.test(i))return!1;return!0}function zD(t,e){let n=[];for(let i in t)Qp.call(t,i)&&(i in e||n.push(i));for(let i in e)Qp.call(e,i)&&t[i]!==e[i]&&n.push(i);return n}function zv(t,e,n={}){if(t===e)return!0;for(let i in e)if(!(i in t&&BD(t[i],e[i],n[i])))return!1;for(let i in t)if(!(i in e))return!1;return!0}function BD(t,e,n){return t===e||n===!0?!0:n?n(t,e):!1}function FD(t,e=0,n,i=1){let r=[];n==null&&(n=Object.keys(t).length);for(let a=e;a<n;a+=i){let l=t[a];l!==void 0&&r.push(l)}return r}let aC={};function UD(t,e){aC[t]=e}function HD(t){return new aC[t]}class qD{getMarkerYear(e){return e.getUTCFullYear()}getMarkerMonth(e){return e.getUTCMonth()}getMarkerDay(e){return e.getUTCDate()}arrayToMarker(e){return Ts(e)}markerToArray(e){return Qc(e)}}UD("gregory",qD);const WD=/^\s*(\d{4})(-?(\d{2})(-?(\d{2})([T ](\d{2}):?(\d{2})(:?(\d{2})(\.(\d+))?)?(Z|(([-+])(\d{2})(:?(\d{2}))?))?)?)?)?$/;function GD(t){let e=WD.exec(t);if(e){let n=new Date(Date.UTC(Number(e[1]),e[3]?Number(e[3])-1:0,Number(e[5]||1),Number(e[7]||0),Number(e[8]||0),Number(e[10]||0),e[12]?+`0.${e[12]}`*1e3:0));if(nC(n)){let i=null;return e[13]&&(i=(e[15]==="-"?-1:1)*(Number(e[16]||0)*60+Number(e[18]||0))),{marker:n,isTimeUnspecified:!e[6],timeZoneOffset:i}}}return null}class VD{constructor(e){let n=this.timeZone=e.timeZone,i=n!=="local"&&n!=="UTC";e.namedTimeZoneImpl&&i&&(this.namedTimeZoneImpl=new e.namedTimeZoneImpl(n)),this.canComputeOffset=!!(!i||this.namedTimeZoneImpl),this.calendarSystem=HD(e.calendarSystem),this.locale=e.locale,this.weekDow=e.locale.week.dow,this.weekDoy=e.locale.week.doy,e.weekNumberCalculation==="ISO"&&(this.weekDow=1,this.weekDoy=4),typeof e.firstDay=="number"&&(this.weekDow=e.firstDay),typeof e.weekNumberCalculation=="function"&&(this.weekNumberFunc=e.weekNumberCalculation),this.weekText=e.weekText!=null?e.weekText:e.locale.options.weekText,this.weekTextLong=(e.weekTextLong!=null?e.weekTextLong:e.locale.options.weekTextLong)||this.weekText,this.cmdFormatter=e.cmdFormatter,this.defaultSeparator=e.defaultSeparator}createMarker(e){let n=this.createMarkerMeta(e);return n===null?null:n.marker}createNowMarker(){return this.canComputeOffset?this.timestampToMarker(new Date().valueOf()):Ts(Z2(new Date))}createMarkerMeta(e){if(typeof e=="string")return this.parse(e);let n=null;return typeof e=="number"?n=this.timestampToMarker(e):e instanceof Date?(e=e.valueOf(),isNaN(e)||(n=this.timestampToMarker(e))):Array.isArray(e)&&(n=Ts(e)),n===null||!nC(n)?null:{marker:n,isTimeUnspecified:!1,forcedTzo:null}}parse(e){let n=GD(e);if(n===null)return null;let{marker:i}=n,r=null;return n.timeZoneOffset!==null&&(this.canComputeOffset?i=this.timestampToMarker(i.valueOf()-n.timeZoneOffset*60*1e3):r=n.timeZoneOffset),{marker:i,isTimeUnspecified:n.isTimeUnspecified,forcedTzo:r}}getYear(e){return this.calendarSystem.getMarkerYear(e)}getMonth(e){return this.calendarSystem.getMarkerMonth(e)}getDay(e){return this.calendarSystem.getMarkerDay(e)}add(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n.years,i[1]+=n.months,i[2]+=n.days,i[6]+=n.milliseconds,this.calendarSystem.arrayToMarker(i)}subtract(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]-=n.years,i[1]-=n.months,i[2]-=n.days,i[6]-=n.milliseconds,this.calendarSystem.arrayToMarker(i)}addYears(e,n){let i=this.calendarSystem.markerToArray(e);return i[0]+=n,this.calendarSystem.arrayToMarker(i)}addMonths(e,n){let i=this.calendarSystem.markerToArray(e);return i[1]+=n,this.calendarSystem.arrayToMarker(i)}diffWholeYears(e,n){let{calendarSystem:i}=this;return $c(e)===$c(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)&&i.getMarkerMonth(e)===i.getMarkerMonth(n)?i.getMarkerYear(n)-i.getMarkerYear(e):null}diffWholeMonths(e,n){let{calendarSystem:i}=this;return $c(e)===$c(n)&&i.getMarkerDay(e)===i.getMarkerDay(n)?i.getMarkerMonth(n)-i.getMarkerMonth(e)+(i.getMarkerYear(n)-i.getMarkerYear(e))*12:null}greatestWholeUnit(e,n){let i=this.diffWholeYears(e,n);return i!==null?{unit:"year",value:i}:(i=this.diffWholeMonths(e,n),i!==null?{unit:"month",value:i}:(i=fD(e,n),i!==null?{unit:"week",value:i}:(i=Zp(e,n),i!==null?{unit:"day",value:i}:(i=lD(e,n),jp(i)?{unit:"hour",value:i}:(i=cD(e,n),jp(i)?{unit:"minute",value:i}:(i=uD(e,n),jp(i)?{unit:"second",value:i}:{unit:"millisecond",value:n.valueOf()-e.valueOf()}))))))}countDurationsBetween(e,n,i){let r;return i.years&&(r=this.diffWholeYears(e,n),r!==null)?r/rD(i):i.months&&(r=this.diffWholeMonths(e,n),r!==null)?r/aD(i):i.days&&(r=Zp(e,n),r!==null)?r/Ad(i):(n.valueOf()-e.valueOf())/gl(i)}startOf(e,n){return n==="year"?this.startOfYear(e):n==="month"?this.startOfMonth(e):n==="week"?this.startOfWeek(e):n==="day"?Er(e):n==="hour"?hD(e):n==="minute"?pD(e):n==="second"?gD(e):null}startOfYear(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e)])}startOfMonth(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e)])}startOfWeek(e){return this.calendarSystem.arrayToMarker([this.calendarSystem.getMarkerYear(e),this.calendarSystem.getMarkerMonth(e),e.getUTCDate()-(e.getUTCDay()-this.weekDow+7)%7])}computeWeekNumber(e){return this.weekNumberFunc?this.weekNumberFunc(this.toDate(e)):mD(e,this.weekDow,this.weekDoy)}format(e,n,i={}){return n.format({marker:e,timeZoneOffset:i.forcedTzo!=null?i.forcedTzo:this.offsetForMarker(e)},this)}formatRange(e,n,i,r={}){return r.isEndExclusive&&(n=ru(n,-1)),i.formatRange({marker:e,timeZoneOffset:r.forcedStartTzo!=null?r.forcedStartTzo:this.offsetForMarker(e)},{marker:n,timeZoneOffset:r.forcedEndTzo!=null?r.forcedEndTzo:this.offsetForMarker(n)},this,r.defaultSeparator)}formatIso(e,n={}){let i=null;return n.omitTimeZoneOffset||(n.forcedTzo!=null?i=n.forcedTzo:i=this.offsetForMarker(e)),iC(e,i,n.omitTime)}timestampToMarker(e){return this.timeZone==="local"?Ts(Z2(new Date(e))):this.timeZone==="UTC"||!this.namedTimeZoneImpl?new Date(e):Ts(this.namedTimeZoneImpl.timestampToArray(e))}offsetForMarker(e){return this.timeZone==="local"?-K2(Qc(e)).getTimezoneOffset():this.timeZone==="UTC"?0:this.namedTimeZoneImpl?this.namedTimeZoneImpl.offsetForArray(Qc(e)):null}toDate(e,n){return this.timeZone==="local"?K2(Qc(e)):this.timeZone==="UTC"?new Date(e.valueOf()):this.namedTimeZoneImpl?new Date(e.valueOf()-this.namedTimeZoneImpl.offsetForArray(Qc(e))*1e3*60):new Date(e.valueOf()-(n||0))}}class th{constructor(e){this.iconOverrideOption&&this.setIconOverride(e[this.iconOverrideOption])}setIconOverride(e){let n,i;if(typeof e=="object"&&e){n=Object.assign({},this.iconClasses);for(i in e)n[i]=this.applyIconOverridePrefix(e[i]);this.iconClasses=n}else e===!1&&(this.iconClasses={})}applyIconOverridePrefix(e){let n=this.iconOverridePrefix;return n&&e.indexOf(n)!==0&&(e=n+e),e}getClass(e){return this.classes[e]||""}getIconClass(e,n){let i;return n&&this.rtlIconClasses?i=this.rtlIconClasses[e]||this.iconClasses[e]:i=this.iconClasses[e],i?`${this.baseIconClass} ${i}`:""}getCustomButtonIconClass(e){let n;return this.iconOverrideCustomButtonOption&&(n=e[this.iconOverrideCustomButtonOption],n)?`${this.baseIconClass} ${this.applyIconOverridePrefix(n)}`:""}}th.prototype.classes={};th.prototype.iconClasses={};th.prototype.baseIconClass="";th.prototype.iconOverridePrefix="";function $p(t){t();let e=jn.debounceRendering,n=[];function i(r){n.push(r)}for(jn.debounceRendering=i,qf(Fe(YD,{}),document.createElement("div"));n.length;)n.shift()();jn.debounceRendering=e}class YD extends Ys{render(){return Fe("div",{})}componentDidMount(){this.setState({})}}function oC(t){let e=vN(t),n=e.Provider;return e.Provider=function(){let i=!this.getChildContext,r=n.apply(this,arguments);if(i){let a=[];this.shouldComponentUpdate=l=>{this.props.value!==l.value&&a.forEach(d=>{d.context=l.value,d.forceUpdate()})},this.sub=l=>{a.push(l);let d=l.componentWillUnmount;l.componentWillUnmount=()=>{a.splice(a.indexOf(l),1),d&&d.call(l)}}}return r},e}class ZD{constructor(e,n,i,r){this.execFunc=e,this.emitter=n,this.scrollTime=i,this.scrollTimeReset=r,this.handleScrollRequest=a=>{this.queuedRequest=Object.assign({},this.queuedRequest||{},a),this.drain()},n.on("_scrollRequest",this.handleScrollRequest),this.fireInitialScroll()}detach(){this.emitter.off("_scrollRequest",this.handleScrollRequest)}update(e){e&&this.scrollTimeReset?this.fireInitialScroll():this.drain()}fireInitialScroll(){this.handleScrollRequest({time:this.scrollTime})}drain(){this.queuedRequest&&this.execFunc(this.queuedRequest)&&(this.queuedRequest=null)}}const Cc=oC({});function KD(t,e,n,i,r,a,l,d,p,g,m,_,A,x){return{dateEnv:r,nowManager:a,options:n,pluginHooks:d,emitter:m,dispatch:p,getCurrentData:g,calendarApi:_,viewSpec:t,viewApi:e,dateProfileGenerator:i,theme:l,isRtl:n.direction==="rtl",addResizeHandler(R){m.on("_resize",R)},removeResizeHandler(R){m.off("_resize",R)},createScrollResponder(R){return new ZD(R,m,Ei(n.scrollTime),n.scrollTimeReset)},registerInteractiveComponent:A,unregisterInteractiveComponent:x}}class Bu extends Ys{shouldComponentUpdate(e,n){return!zv(this.props,e,this.propEquality)||!zv(this.state,n,this.stateEquality)}safeSetState(e){zv(this.state,Object.assign(Object.assign({},this.state),e),this.stateEquality)||this.setState(e)}}Bu.addPropsEquality=XD;Bu.addStateEquality=QD;Bu.contextType=Cc;Bu.prototype.propEquality={};Bu.prototype.stateEquality={};class Xi extends Bu{}Xi.contextType=Cc;function XD(t){let e=Object.create(this.prototype.propEquality);Object.assign(e,t),this.prototype.propEquality=e}function QD(t){let e=Object.create(this.prototype.stateEquality);Object.assign(e,t),this.prototype.stateEquality=e}function Gl(t,e){typeof t=="function"?t(e):t&&(t.current=e)}class v0 extends Xi{constructor(){super(...arguments),this.id=Iu(),this.queuedDomNodes=[],this.currentDomNodes=[],this.handleEl=e=>{const{options:n}=this.context,{generatorName:i}=this.props;(!n.customRenderingReplaces||!Ey(i,n))&&this.updateElRef(e)},this.updateElRef=e=>{this.props.elRef&&Gl(this.props.elRef,e)}}render(){const{props:e,context:n}=this,{options:i}=n,{customGenerator:r,defaultGenerator:a,renderProps:l}=e,d=sC(e,[],this.handleEl);let p=!1,g,m=[],_;if(r!=null){const A=typeof r=="function"?r(l,Fe):r;if(A===!0)p=!0;else{const x=A&&typeof A=="object";x&&"html"in A?d.dangerouslySetInnerHTML={__html:A.html}:x&&"domNodes"in A?m=Array.prototype.slice.call(A.domNodes):(x?RS(A):typeof A!="function")?g=A:_=A}}else p=!Ey(e.generatorName,i);return p&&a&&(g=a(l)),this.queuedDomNodes=m,this.currentGeneratorMeta=_,Fe(e.elTag,d,g)}componentDidMount(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentDidUpdate(){this.applyQueueudDomNodes(),this.triggerCustomRendering(!0)}componentWillUnmount(){this.triggerCustomRendering(!1)}triggerCustomRendering(e){var n;const{props:i,context:r}=this,{handleCustomRendering:a,customRenderingMetaMap:l}=r.options;if(a){const d=(n=this.currentGeneratorMeta)!==null&&n!==void 0?n:l?.[i.generatorName];d&&a(Object.assign(Object.assign({id:this.id,isActive:e,containerEl:this.base,reportNewContainerEl:this.updateElRef,generatorMeta:d},i),{elClasses:(i.elClasses||[]).filter($D)}))}}applyQueueudDomNodes(){const{queuedDomNodes:e,currentDomNodes:n}=this,i=this.base;if(!iu(e,n)){n.forEach(l0);for(let r of e)i.appendChild(r);this.currentDomNodes=e}}}v0.addPropsEquality({elClasses:iu,elStyle:xl,elAttrs:ID,renderProps:xl});function Ey(t,e){var n;return!!(e.handleCustomRendering&&t&&(!((n=e.customRenderingMetaMap)===null||n===void 0)&&n[t]))}function sC(t,e,n){const i=Object.assign(Object.assign({},t.elAttrs),{ref:n});return(t.elClasses||e)&&(i.className=(t.elClasses||[]).concat(e||[]).concat(i.className||[]).filter(Boolean).join(" ")),t.elStyle&&(i.style=t.elStyle),i}function $D(t){return!!t}const lC=oC(0);class Xs extends Ys{constructor(){super(...arguments),this.InnerContent=JD.bind(void 0,this),this.handleEl=e=>{this.el=e,this.props.elRef&&(Gl(this.props.elRef,e),e&&this.didMountMisfire&&this.componentDidMount())}}render(){const{props:e}=this,n=e8(e.classNameGenerator,e.renderProps);if(e.children){const i=sC(e,n,this.handleEl),r=e.children(this.InnerContent,e.renderProps,i);return e.elTag?Fe(e.elTag,i,r):r}else return Fe(v0,Object.assign(Object.assign({},e),{elRef:this.handleEl,elTag:e.elTag||"div",elClasses:(e.elClasses||[]).concat(n),renderId:this.context}))}componentDidMount(){var e,n;this.el?(n=(e=this.props).didMount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el})):this.didMountMisfire=!0}componentWillUnmount(){var e,n;(n=(e=this.props).willUnmount)===null||n===void 0||n.call(e,Object.assign(Object.assign({},this.props.renderProps),{el:this.el}))}}Xs.contextType=lC;function JD(t,e){const n=t.props;return Fe(v0,Object.assign({renderProps:n.renderProps,generatorName:n.generatorName,customGenerator:n.customGenerator,defaultGenerator:n.defaultGenerator,renderId:t.context},e))}function e8(t,e){const n=typeof t=="function"?t(e):t||[];return typeof n=="string"?[n]:n}class Jp extends Xi{render(){let{props:e,context:n}=this,{options:i}=n,r={view:n.viewApi};return Fe(Xs,{elRef:e.elRef,elTag:e.elTag||"div",elAttrs:e.elAttrs,elClasses:[...cC(e.viewSpec),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,classNameGenerator:i.viewClassNames,generatorName:void 0,didMount:i.viewDidMount,willUnmount:i.viewWillUnmount},()=>e.children)}}function cC(t){return[`fc-${t.type}-view`,"fc-view"]}function t8(t,e){let n=null,i=null;return t.start&&(n=e.createMarker(t.start)),t.end&&(i=e.createMarker(t.end)),!n&&!i||n&&i&&i<n?null:{start:n,end:i}}function tw(t,e){let n=[],{start:i}=e,r,a;for(t.sort(n8),r=0;r<t.length;r+=1)a=t[r],a.start>i&&n.push({start:i,end:a.start}),a.end>i&&(i=a.end);return i<e.end&&n.push({start:i,end:e.end}),n}function n8(t,e){return t.start.valueOf()-e.start.valueOf()}function Nu(t,e){let{start:n,end:i}=t,r=null;return e.start!==null&&(n===null?n=e.start:n=new Date(Math.max(n.valueOf(),e.start.valueOf()))),e.end!=null&&(i===null?i=e.end:i=new Date(Math.min(i.valueOf(),e.end.valueOf()))),(n===null||i===null||n<i)&&(r={start:n,end:i}),r}function i8(t,e){return(t.start===null?null:t.start.valueOf())===(e.start===null?null:e.start.valueOf())&&(t.end===null?null:t.end.valueOf())===(e.end===null?null:e.end.valueOf())}function y0(t,e){return(t.end===null||e.start===null||t.end>e.start)&&(t.start===null||e.end===null||t.start<e.end)}function Cg(t,e){return(t.start===null||e.start!==null&&e.start>=t.start)&&(t.end===null||e.end!==null&&e.end<=t.end)}function bc(t,e){return(t.start===null||e>=t.start)&&(t.end===null||e<t.end)}function r8(t,e){return e.start!=null&&t<e.start?e.start:e.end!=null&&t>=e.end?new Date(e.end.valueOf()-1):t}function uC(t){let e=Math.floor(zu(t.start,t.end))||1,n=Er(t.start),i=Eo(n,e);return{start:n,end:i}}function dC(t,e=Ei(0)){let n=null,i=null;if(t.end){i=Er(t.end);let r=t.end.valueOf()-i.valueOf();r&&r>=gl(e)&&(i=Eo(i,1))}return t.start&&(n=Er(t.start),i&&i<=n&&(i=Eo(n,1))),{start:n,end:i}}function xd(t,e,n,i){return i==="year"?Ei(n.diffWholeYears(t,e),"year"):i==="month"?Ei(n.diffWholeMonths(t,e),"month"):dD(t,e)}class fC{constructor(e){this.props=e,this.initHiddenDays()}buildPrev(e,n,i){let{dateEnv:r}=this.props,a=r.subtract(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,-1,i)}buildNext(e,n,i){let{dateEnv:r}=this.props,a=r.add(r.startOf(n,e.currentRangeUnit),e.dateIncrement);return this.build(a,1,i)}build(e,n,i=!0){let{props:r}=this,a,l,d,p,g,m;return a=this.buildValidRange(),a=this.trimHiddenDays(a),i&&(e=r8(e,a)),l=this.buildCurrentRangeInfo(e,n),d=/^(year|month|week|day)$/.test(l.unit),p=this.buildRenderRange(this.trimHiddenDays(l.range),l.unit,d),p=this.trimHiddenDays(p),g=p,r.showNonCurrentDates||(g=Nu(g,l.range)),g=this.adjustActiveRange(g),g=Nu(g,a),m=y0(l.range,a),bc(p,e)||(e=p.start),{currentDate:e,validRange:a,currentRange:l.range,currentRangeUnit:l.unit,isRangeAllDay:d,activeRange:g,renderRange:p,slotMinTime:r.slotMinTime,slotMaxTime:r.slotMaxTime,isValid:m,dateIncrement:this.buildDateIncrement(l.duration)}}buildValidRange(){let e=this.props.validRangeInput,n=typeof e=="function"?e.call(this.props.calendarApi,this.props.dateEnv.toDate(this.props.nowManager.getDateMarker())):e;return this.refineRange(n)||{start:null,end:null}}buildCurrentRangeInfo(e,n){let{props:i}=this,r=null,a=null,l=null,d;return i.duration?(r=i.duration,a=i.durationUnit,l=this.buildRangeFromDuration(e,n,r,a)):(d=this.props.dayCount)?(a="day",l=this.buildRangeFromDayCount(e,n,d)):(l=this.buildCustomVisibleRange(e))?a=i.dateEnv.greatestWholeUnit(l.start,l.end).unit:(r=this.getFallbackDuration(),a=Cy(r).unit,l=this.buildRangeFromDuration(e,n,r,a)),{duration:r,unit:a,range:l}}getFallbackDuration(){return Ei({day:1})}adjustActiveRange(e){let{dateEnv:n,usesMinMaxTime:i,slotMinTime:r,slotMaxTime:a}=this.props,{start:l,end:d}=e;return i&&(Ad(r)<0&&(l=Er(l),l=n.add(l,r)),Ad(a)>1&&(d=Er(d),d=Eo(d,-1),d=n.add(d,a))),{start:l,end:d}}buildRangeFromDuration(e,n,i,r){let{dateEnv:a,dateAlignment:l}=this.props,d,p,g;if(!l){let{dateIncrement:_}=this.props;_&&gl(_)<gl(i)?l=Cy(_).unit:l=r}Ad(i)<=1&&this.isHiddenDay(d)&&(d=this.skipHiddenDays(d,n),d=Er(d));function m(){d=a.startOf(e,l),p=a.add(d,i),g={start:d,end:p}}return m(),this.trimHiddenDays(g)||(e=this.skipHiddenDays(e,n),m()),g}buildRangeFromDayCount(e,n,i){let{dateEnv:r,dateAlignment:a}=this.props,l=0,d=e,p;a&&(d=r.startOf(d,a)),d=Er(d),d=this.skipHiddenDays(d,n),p=d;do p=Eo(p,1),this.isHiddenDay(p)||(l+=1);while(l<i);return{start:d,end:p}}buildCustomVisibleRange(e){let{props:n}=this,i=n.visibleRangeInput,r=typeof i=="function"?i.call(n.calendarApi,n.dateEnv.toDate(e)):i,a=this.refineRange(r);return a&&(a.start==null||a.end==null)?null:a}buildRenderRange(e,n,i){return e}buildDateIncrement(e){let{dateIncrement:n}=this.props,i;return n||((i=this.props.dateAlignment)?Ei(1,i):e||Ei({days:1}))}refineRange(e){if(e){let n=t8(e,this.props.dateEnv);return n&&(n=dC(n)),n}return null}initHiddenDays(){let e=this.props.hiddenDays||[],n=[],i=0,r;for(this.props.weekends===!1&&e.push(0,6),r=0;r<7;r+=1)(n[r]=e.indexOf(r)!==-1)||(i+=1);if(!i)throw new Error("invalid hiddenDays");this.isHiddenDayHash=n}trimHiddenDays(e){let{start:n,end:i}=e;return n&&(n=this.skipHiddenDays(n)),i&&(i=this.skipHiddenDays(i,-1,!0)),n==null||i==null||n<i?{start:n,end:i}:null}isHiddenDay(e){return e instanceof Date&&(e=e.getUTCDay()),this.isHiddenDayHash[e]}skipHiddenDays(e,n=1,i=!1){for(;this.isHiddenDayHash[(e.getUTCDay()+(i?n:0)+7)%7];)e=Eo(e,n);return e}}function x0(t,e,n,i){return{instanceId:Iu(),defId:t,range:e,forcedStartTzo:n??null,forcedEndTzo:i??null}}function a8(t,e,n,i){for(let r=0;r<i.length;r+=1){let a=i[r].parse(t,n);if(a){let{allDay:l}=t;return l==null&&(l=e,l==null&&(l=a.allDayGuess,l==null&&(l=!1))),{allDay:l,duration:a.duration,typeData:a.typeData,typeId:r}}}return null}function Du(t,e,n){let{dateEnv:i,pluginHooks:r,options:a}=n,{defs:l,instances:d}=t;d=Ru(d,p=>!l[p.defId].recurringDef);for(let p in l){let g=l[p];if(g.recurringDef){let{duration:m}=g.recurringDef;m||(m=g.allDay?a.defaultAllDayEventDuration:a.defaultTimedEventDuration);let _=o8(g,m,e,i,r.recurringTypes);for(let A of _){let x=x0(p,{start:A,end:i.add(A,m)});d[x.instanceId]=x}}}return{defs:l,instances:d}}function o8(t,e,n,i,r){let l=r[t.recurringDef.typeId].expand(t.recurringDef.typeData,{start:i.subtract(n.start,e),end:n.end},i);return t.allDay&&(l=l.map(Er)),l}const Rp={id:String,groupId:String,title:String,url:String,interactive:Boolean},hC={start:lt,end:lt,date:lt,allDay:Boolean},s8=Object.assign(Object.assign(Object.assign({},Rp),hC),{extendedProps:lt});function pC(t,e,n,i,r=b0(n),a,l){let{refined:d,extra:p}=gC(t,n,r),g=c8(e,n),m=a8(d,g,n.dateEnv,n.pluginHooks.recurringTypes);if(m){let A=Ay(d,p,e?e.sourceId:"",m.allDay,!!m.duration,n,a);return A.recurringDef={typeId:m.typeId,typeData:m.typeData,duration:m.duration},{def:A,instance:null}}let _=l8(d,g,n,i);if(_){let A=Ay(d,p,e?e.sourceId:"",_.allDay,_.hasEnd,n,a),x=x0(A.defId,_.range,_.forcedStartTzo,_.forcedEndTzo);return l&&A.publicId&&l[A.publicId]&&(x.instanceId=l[A.publicId]),{def:A,instance:x}}return null}function gC(t,e,n=b0(e)){return p0(t,n)}function b0(t){return Object.assign(Object.assign(Object.assign({},eg),s8),t.pluginHooks.eventRefiners)}function Ay(t,e,n,i,r,a,l){let d={title:t.title||"",groupId:t.groupId||"",publicId:t.id||"",url:t.url||"",recurringDef:null,defId:(l&&t.id?l[t.id]:"")||Iu(),sourceId:n,allDay:i,hasEnd:r,interactive:t.interactive,ui:tg(t,a),extendedProps:Object.assign(Object.assign({},t.extendedProps||{}),e)};for(let p of a.pluginHooks.eventDefMemberAdders)Object.assign(d,p(t));return Object.freeze(d.ui.classNames),Object.freeze(d.extendedProps),d}function l8(t,e,n,i){let{allDay:r}=t,a,l=null,d=!1,p,g=null,m=t.start!=null?t.start:t.date;if(a=n.dateEnv.createMarkerMeta(m),a)l=a.marker;else if(!i)return null;return t.end!=null&&(p=n.dateEnv.createMarkerMeta(t.end)),r==null&&(e!=null?r=e:r=(!a||a.isTimeUnspecified)&&(!p||p.isTimeUnspecified)),r&&l&&(l=Er(l)),p&&(g=p.marker,r&&(g=Er(g)),l&&g<=l&&(g=null)),g?d=!0:i||(d=n.options.forceEventDuration||!1,g=n.dateEnv.add(l,r?n.options.defaultAllDayEventDuration:n.options.defaultTimedEventDuration)),{allDay:r,hasEnd:d,range:{start:l,end:g},forcedStartTzo:a?a.forcedTzo:null,forcedEndTzo:p?p.forcedTzo:null}}function c8(t,e){let n=null;return t&&(n=t.defaultAllDay),n==null&&(n=e.options.defaultAllDay),n}function Wf(t,e,n,i,r,a){let l=Zs(),d=b0(n);for(let p of t){let g=pC(p,e,n,i,d,r,a);g&&Ly(g,l)}return l}function Ly(t,e=Zs()){return e.defs[t.def.defId]=t.def,t.instance&&(e.instances[t.instance.instanceId]=t.instance),e}function _0(t,e){let n=t.instances[e];if(n){let i=t.defs[n.defId],r=Eg(t,a=>u8(i,a));return r.defs[i.defId]=i,r.instances[n.instanceId]=n,r}return Zs()}function u8(t,e){return!!(t.groupId&&t.groupId===e.groupId)}function Zs(){return{defs:{},instances:{}}}function w0(t,e){return{defs:Object.assign(Object.assign({},t.defs),e.defs),instances:Object.assign(Object.assign({},t.instances),e.instances)}}function Eg(t,e){let n=Ru(t.defs,e),i=Ru(t.instances,r=>n[r.defId]);return{defs:n,instances:i}}function d8(t,e){let{defs:n,instances:i}=t,r={},a={};for(let l in n)e.defs[l]||(r[l]=n[l]);for(let l in i)!e.instances[l]&&r[i[l].defId]&&(a[l]=i[l]);return{defs:r,instances:a}}function f8(t,e){return Array.isArray(t)?Wf(t,null,e,!0):typeof t=="object"&&t?Wf([t],null,e,!0):t!=null?String(t):null}function nw(t){return Array.isArray(t)?t:typeof t=="string"?t.split(/\s+/):[]}const eg={display:String,editable:Boolean,startEditable:Boolean,durationEditable:Boolean,constraint:lt,overlap:lt,allow:lt,className:nw,classNames:nw,color:String,backgroundColor:String,borderColor:String,textColor:String},h8={display:null,startEditable:null,durationEditable:null,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]};function tg(t,e){let n=f8(t.constraint,e);return{display:t.display||null,startEditable:t.startEditable!=null?t.startEditable:t.editable,durationEditable:t.durationEditable!=null?t.durationEditable:t.editable,constraints:n!=null?[n]:[],overlap:t.overlap!=null?t.overlap:null,allows:t.allow!=null?[t.allow]:[],backgroundColor:t.backgroundColor||t.color||"",borderColor:t.borderColor||t.color||"",textColor:t.textColor||"",classNames:(t.className||[]).concat(t.classNames||[])}}function mC(t){return t.reduce(p8,h8)}function p8(t,e){return{display:e.display!=null?e.display:t.display,startEditable:e.startEditable!=null?e.startEditable:t.startEditable,durationEditable:e.durationEditable!=null?e.durationEditable:t.durationEditable,constraints:t.constraints.concat(e.constraints),overlap:typeof e.overlap=="boolean"?e.overlap:t.overlap,allows:t.allows.concat(e.allows),backgroundColor:e.backgroundColor||t.backgroundColor,borderColor:e.borderColor||t.borderColor,textColor:e.textColor||t.textColor,classNames:t.classNames.concat(e.classNames)}}const g8={id:String,defaultAllDay:Boolean,url:String,format:String,events:lt,eventDataTransform:lt,success:lt,failure:lt};function vC(t,e,n=yC(e)){let i;if(typeof t=="string"?i={url:t}:typeof t=="function"||Array.isArray(t)?i={events:t}:typeof t=="object"&&t&&(i=t),i){let{refined:r,extra:a}=p0(i,n),l=m8(r,e);if(l)return{_raw:t,isFetching:!1,latestFetchId:"",fetchRange:null,defaultAllDay:r.defaultAllDay,eventDataTransform:r.eventDataTransform,success:r.success,failure:r.failure,publicId:r.id||"",sourceId:Iu(),sourceDefId:l.sourceDefId,meta:l.meta,ui:tg(r,e),extendedProps:a}}return null}function yC(t){return Object.assign(Object.assign(Object.assign({},eg),g8),t.pluginHooks.eventSourceRefiners)}function m8(t,e){let n=e.pluginHooks.eventSourceDefs;for(let i=n.length-1;i>=0;i-=1){let a=n[i].parseMeta(t);if(a)return{sourceDefId:i,meta:a}}return null}function v8(t,e,n,i,r){switch(e.type){case"RECEIVE_EVENTS":return y8(t,n[e.sourceId],e.fetchId,e.fetchRange,e.rawEvents,r);case"RESET_RAW_EVENTS":return x8(t,n[e.sourceId],e.rawEvents,i.activeRange,r);case"ADD_EVENTS":return b8(t,e.eventStore,i?i.activeRange:null,r);case"RESET_EVENTS":return e.eventStore;case"MERGE_EVENTS":return w0(t,e.eventStore);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return i?Du(t,i.activeRange,r):t;case"REMOVE_EVENTS":return d8(t,e.eventStore);case"REMOVE_EVENT_SOURCE":return bC(t,e.sourceId);case"REMOVE_ALL_EVENT_SOURCES":return Eg(t,a=>!a.sourceId);case"REMOVE_ALL_EVENTS":return Zs();default:return t}}function y8(t,e,n,i,r,a){if(e&&n===e.latestFetchId){let l=Wf(xC(r,e,a),e,a);return i&&(l=Du(l,i,a)),w0(bC(t,e.sourceId),l)}return t}function x8(t,e,n,i,r){const{defIdMap:a,instanceIdMap:l}=w8(t);let d=Wf(xC(n,e,r),e,r,!1,a,l);return Du(d,i,r)}function xC(t,e,n){let i=n.options.eventDataTransform,r=e?e.eventDataTransform:null;return r&&(t=iw(t,r)),i&&(t=iw(t,i)),t}function iw(t,e){let n;if(!e)n=t;else{n=[];for(let i of t){let r=e(i);r?n.push(r):r==null&&n.push(i)}}return n}function b8(t,e,n,i){return n&&(e=Du(e,n,i)),w0(t,e)}function rw(t,e,n){let{defs:i}=t,r=Sc(t.instances,a=>i[a.defId].allDay?a:Object.assign(Object.assign({},a),{range:{start:n.createMarker(e.toDate(a.range.start,a.forcedStartTzo)),end:n.createMarker(e.toDate(a.range.end,a.forcedEndTzo))},forcedStartTzo:n.canComputeOffset?null:a.forcedStartTzo,forcedEndTzo:n.canComputeOffset?null:a.forcedEndTzo}));return{defs:i,instances:r}}function bC(t,e){return Eg(t,n=>n.sourceId!==e)}function _8(t,e){return{defs:t.defs,instances:Ru(t.instances,n=>!e[n.instanceId])}}function w8(t){const{defs:e,instances:n}=t,i={},r={};for(let a in e){const l=e[a],{publicId:d}=l;d&&(i[d]=a)}for(let a in n){const l=n[a],d=e[l.defId],{publicId:p}=d;p&&(r[p]=a)}return{defIdMap:i,instanceIdMap:r}}class Ag{constructor(){this.handlers={},this.thisContext=null}setThisContext(e){this.thisContext=e}setOptions(e){this.options=e}on(e,n){S8(this.handlers,e,n)}off(e,n){C8(this.handlers,e,n)}trigger(e,...n){let i=this.handlers[e]||[],r=this.options&&this.options[e],a=[].concat(r||[],i);for(let l of a)l.apply(this.thisContext,n)}hasHandlers(e){return!!(this.handlers[e]&&this.handlers[e].length||this.options&&this.options[e])}}function S8(t,e,n){(t[e]||(t[e]=[])).push(n)}function C8(t,e,n){n?t[e]&&(t[e]=t[e].filter(i=>i!==n)):delete t[e]}const E8={startTime:"09:00",endTime:"17:00",daysOfWeek:[1,2,3,4,5],display:"inverse-background",classNames:"fc-non-business",groupId:"_businessHours"};function A8(t,e){return Wf(L8(t),null,e)}function L8(t){let e;return t===!0?e=[{}]:Array.isArray(t)?e=t.filter(n=>n.daysOfWeek):typeof t=="object"&&t?e=[t]:e=[],e=e.map(n=>Object.assign(Object.assign({},E8),n)),e}function _C(t,e,n){n.emitter.trigger("select",Object.assign(Object.assign({},S0(t,n)),{jsEvent:e?e.origEvent:null,view:n.viewApi||n.calendarApi.view}))}function T8(t,e){e.emitter.trigger("unselect",{jsEvent:t?t.origEvent:null,view:e.viewApi||e.calendarApi.view})}function S0(t,e){let n={};for(let i of e.pluginHooks.dateSpanTransforms)Object.assign(n,i(t,e));return Object.assign(n,H8(t,e.dateEnv)),n}function aw(t,e,n){let{dateEnv:i,options:r}=n,a=e;return t?(a=Er(a),a=i.add(a,r.defaultAllDayEventDuration)):a=i.add(a,r.defaultTimedEventDuration),a}function C0(t,e,n,i){let r=ng(t.defs,e),a=Zs();for(let l in t.defs){let d=t.defs[l];a.defs[l]=j8(d,r[l],n,i)}for(let l in t.instances){let d=t.instances[l],p=a.defs[d.defId];a.instances[l]=k8(d,p,r[d.defId],n,i)}return a}function j8(t,e,n,i){let r=n.standardProps||{};r.hasEnd==null&&e.durationEditable&&(n.startDelta||n.endDelta)&&(r.hasEnd=!0);let a=Object.assign(Object.assign(Object.assign({},t),r),{ui:Object.assign(Object.assign({},t.ui),r.ui)});n.extendedProps&&(a.extendedProps=Object.assign(Object.assign({},a.extendedProps),n.extendedProps));for(let l of i.pluginHooks.eventDefMutationAppliers)l(a,n,i);return!a.hasEnd&&i.options.forceEventDuration&&(a.hasEnd=!0),a}function k8(t,e,n,i,r){let{dateEnv:a}=r,l=i.standardProps&&i.standardProps.allDay===!0,d=i.standardProps&&i.standardProps.hasEnd===!1,p=Object.assign({},t);return l&&(p.range=uC(p.range)),i.datesDelta&&n.startEditable&&(p.range={start:a.add(p.range.start,i.datesDelta),end:a.add(p.range.end,i.datesDelta)}),i.startDelta&&n.durationEditable&&(p.range={start:a.add(p.range.start,i.startDelta),end:p.range.end}),i.endDelta&&n.durationEditable&&(p.range={start:p.range.start,end:a.add(p.range.end,i.endDelta)}),d&&(p.range={start:p.range.start,end:aw(e.allDay,p.range.start,r)}),e.allDay&&(p.range={start:Er(p.range.start),end:Er(p.range.end)}),p.range.end<p.range.start&&(p.range.end=aw(e.allDay,p.range.start,r)),p}class vd{constructor(e,n){this.context=e,this.internalEventSource=n}remove(){this.context.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:this.internalEventSource.sourceId})}refetch(){this.context.dispatch({type:"FETCH_EVENT_SOURCES",sourceIds:[this.internalEventSource.sourceId],isRefetch:!0})}get id(){return this.internalEventSource.publicId}get url(){return this.internalEventSource.meta.url}get format(){return this.internalEventSource.meta.format}}class Hr{constructor(e,n,i){this._context=e,this._def=n,this._instance=i||null}setProp(e,n){if(e in hC)console.warn("Could not set date-related prop 'name'. Use one of the date-related methods instead.");else if(e==="id")n=Rp[e](n),this.mutate({standardProps:{publicId:n}});else if(e in Rp)n=Rp[e](n),this.mutate({standardProps:{[e]:n}});else if(e in eg){let i=eg[e](n);e==="color"?i={backgroundColor:n,borderColor:n}:e==="editable"?i={startEditable:n,durationEditable:n}:i={[e]:n},this.mutate({standardProps:{ui:i}})}else console.warn(`Could not set prop '${e}'. Use setExtendedProp instead.`)}setExtendedProp(e,n){this.mutate({extendedProps:{[e]:n}})}setStart(e,n={}){let{dateEnv:i}=this._context,r=i.createMarker(e);if(r&&this._instance){let a=this._instance.range,l=xd(a.start,r,i,n.granularity);n.maintainDuration?this.mutate({datesDelta:l}):this.mutate({startDelta:l})}}setEnd(e,n={}){let{dateEnv:i}=this._context,r;if(!(e!=null&&(r=i.createMarker(e),!r))&&this._instance)if(r){let a=xd(this._instance.range.end,r,i,n.granularity);this.mutate({endDelta:a})}else this.mutate({standardProps:{hasEnd:!1}})}setDates(e,n,i={}){let{dateEnv:r}=this._context,a={allDay:i.allDay},l=r.createMarker(e),d;if(l&&!(n!=null&&(d=r.createMarker(n),!d))&&this._instance){let p=this._instance.range;i.allDay===!0&&(p=uC(p));let g=xd(p.start,l,r,i.granularity);if(d){let m=xd(p.end,d,r,i.granularity);tD(g,m)?this.mutate({datesDelta:g,standardProps:a}):this.mutate({startDelta:g,endDelta:m,standardProps:a})}else a.hasEnd=!1,this.mutate({datesDelta:g,standardProps:a})}}moveStart(e){let n=Ei(e);n&&this.mutate({startDelta:n})}moveEnd(e){let n=Ei(e);n&&this.mutate({endDelta:n})}moveDates(e){let n=Ei(e);n&&this.mutate({datesDelta:n})}setAllDay(e,n={}){let i={allDay:e},{maintainDuration:r}=n;r==null&&(r=this._context.options.allDayMaintainDuration),this._def.allDay!==e&&(i.hasEnd=r),this.mutate({standardProps:i})}formatRange(e){let{dateEnv:n}=this._context,i=this._instance,r=na(e);return this._def.hasEnd?n.formatRange(i.range.start,i.range.end,r,{forcedStartTzo:i.forcedStartTzo,forcedEndTzo:i.forcedEndTzo}):n.format(i.range.start,r,{forcedTzo:i.forcedStartTzo})}mutate(e){let n=this._instance;if(n){let i=this._def,r=this._context,{eventStore:a}=r.getCurrentData(),l=_0(a,n.instanceId);l=C0(l,{"":{display:"",startEditable:!0,durationEditable:!0,constraints:[],overlap:null,allows:[],backgroundColor:"",borderColor:"",textColor:"",classNames:[]}},e,r);let p=new Hr(r,i,n);this._def=l.defs[i.defId],this._instance=l.instances[n.instanceId],r.dispatch({type:"MERGE_EVENTS",eventStore:l}),r.emitter.trigger("eventChange",{oldEvent:p,event:this,relatedEvents:Au(l,r,n),revert(){r.dispatch({type:"RESET_EVENTS",eventStore:a})}})}}remove(){let e=this._context,n=wC(this);e.dispatch({type:"REMOVE_EVENTS",eventStore:n}),e.emitter.trigger("eventRemove",{event:this,relatedEvents:[],revert(){e.dispatch({type:"MERGE_EVENTS",eventStore:n})}})}get source(){let{sourceId:e}=this._def;return e?new vd(this._context,this._context.getCurrentData().eventSources[e]):null}get start(){return this._instance?this._context.dateEnv.toDate(this._instance.range.start):null}get end(){return this._instance&&this._def.hasEnd?this._context.dateEnv.toDate(this._instance.range.end):null}get startStr(){let e=this._instance;return e?this._context.dateEnv.formatIso(e.range.start,{omitTime:this._def.allDay,forcedTzo:e.forcedStartTzo}):""}get endStr(){let e=this._instance;return e&&this._def.hasEnd?this._context.dateEnv.formatIso(e.range.end,{omitTime:this._def.allDay,forcedTzo:e.forcedEndTzo}):""}get id(){return this._def.publicId}get groupId(){return this._def.groupId}get allDay(){return this._def.allDay}get title(){return this._def.title}get url(){return this._def.url}get display(){return this._def.ui.display||"auto"}get startEditable(){return this._def.ui.startEditable}get durationEditable(){return this._def.ui.durationEditable}get constraint(){return this._def.ui.constraints[0]||null}get overlap(){return this._def.ui.overlap}get allow(){return this._def.ui.allows[0]||null}get backgroundColor(){return this._def.ui.backgroundColor}get borderColor(){return this._def.ui.borderColor}get textColor(){return this._def.ui.textColor}get classNames(){return this._def.ui.classNames}get extendedProps(){return this._def.extendedProps}toPlainObject(e={}){let n=this._def,{ui:i}=n,{startStr:r,endStr:a}=this,l={allDay:n.allDay};return n.title&&(l.title=n.title),r&&(l.start=r),a&&(l.end=a),n.publicId&&(l.id=n.publicId),n.groupId&&(l.groupId=n.groupId),n.url&&(l.url=n.url),i.display&&i.display!=="auto"&&(l.display=i.display),e.collapseColor&&i.backgroundColor&&i.backgroundColor===i.borderColor?l.color=i.backgroundColor:(i.backgroundColor&&(l.backgroundColor=i.backgroundColor),i.borderColor&&(l.borderColor=i.borderColor)),i.textColor&&(l.textColor=i.textColor),i.classNames.length&&(l.classNames=i.classNames),Object.keys(n.extendedProps).length&&(e.collapseExtendedProps?Object.assign(l,n.extendedProps):l.extendedProps=n.extendedProps),l}toJSON(){return this.toPlainObject()}}function wC(t){let e=t._def,n=t._instance;return{defs:{[e.defId]:e},instances:n?{[n.instanceId]:n}:{}}}function Au(t,e,n){let{defs:i,instances:r}=t,a=[],l=n?n.instanceId:"";for(let d in r){let p=r[d],g=i[p.defId];p.instanceId!==l&&a.push(new Hr(e,g,p))}return a}function ow(t,e,n,i){let r={},a={},l={},d=[],p=[],g=ng(t.defs,e);for(let m in t.defs){let _=t.defs[m];g[_.defId].display==="inverse-background"&&(_.groupId?(r[_.groupId]=[],l[_.groupId]||(l[_.groupId]=_)):a[m]=[])}for(let m in t.instances){let _=t.instances[m],A=t.defs[_.defId],x=g[A.defId],R=_.range,M=!A.allDay&&i?dC(R,i):R,k=Nu(M,n);k&&(x.display==="inverse-background"?A.groupId?r[A.groupId].push(k):a[_.defId].push(k):x.display!=="none"&&(x.display==="background"?d:p).push({def:A,ui:x,instance:_,range:k,isStart:M.start&&M.start.valueOf()===k.start.valueOf(),isEnd:M.end&&M.end.valueOf()===k.end.valueOf()}))}for(let m in r){let _=r[m],A=tw(_,n);for(let x of A){let R=l[m],M=g[R.defId];d.push({def:R,ui:M,instance:null,range:x,isStart:!1,isEnd:!1})}}for(let m in a){let _=a[m],A=tw(_,n);for(let x of A)d.push({def:t.defs[m],ui:g[m],instance:null,range:x,isStart:!1,isEnd:!1})}return{bg:d,fg:p}}function R8(t){return t.ui.display==="background"||t.ui.display==="inverse-background"}function sw(t,e){t.fcSeg=e}function Rd(t){return t.fcSeg||t.parentNode.fcSeg||null}function ng(t,e){return Sc(t,n=>SC(n,e))}function SC(t,e){let n=[];return e[""]&&n.push(e[""]),e[t.defId]&&n.push(e[t.defId]),n.push(t.ui),mC(n)}function CC(t,e){let n=t.map(N8);return n.sort((i,r)=>ZN(i,r,e)),n.map(i=>i._seg)}function N8(t){let{eventRange:e}=t,n=e.def,i=e.instance?e.instance.range:e.range,r=i.start?i.start.valueOf():0,a=i.end?i.end.valueOf():0;return Object.assign(Object.assign(Object.assign({},n.extendedProps),n),{id:n.publicId,start:r,end:a,duration:a-r,allDay:Number(n.allDay),_seg:t})}function D8(t,e){let{pluginHooks:n}=e,i=n.isDraggableTransformers,{def:r,ui:a}=t.eventRange,l=a.startEditable;for(let d of i)l=d(l,r,a,e);return l}function M8(t,e){return t.isStart&&t.eventRange.ui.durationEditable&&e.options.eventResizableFromStart}function O8(t,e){return t.isEnd&&t.eventRange.ui.durationEditable}function EC(t,e,n,i,r,a,l){let{dateEnv:d,options:p}=n,{displayEventTime:g,displayEventEnd:m}=p,_=t.eventRange.def,A=t.eventRange.instance;g==null&&(g=i!==!1),m==null&&(m=r!==!1);let x=A.range.start,R=A.range.end,M=t.start||t.eventRange.range.start,k=t.end||t.eventRange.range.end,I=Er(x).valueOf()===Er(M).valueOf(),Y=Er(ru(R,-1)).valueOf()===Er(ru(k,-1)).valueOf();return g&&!_.allDay&&(I||Y)?(M=I?x:M,k=Y?R:k,m&&_.hasEnd?d.formatRange(M,k,e,{forcedStartTzo:A.forcedStartTzo,forcedEndTzo:A.forcedEndTzo}):d.format(M,e,{forcedTzo:A.forcedStartTzo})):""}function eu(t,e,n){let i=t.eventRange.range;return{isPast:i.end<=(n||e.start),isFuture:i.start>=(n||e.end),isToday:e&&bc(e,i.start)}}function P8(t){let e=["fc-event"];return t.isMirror&&e.push("fc-event-mirror"),t.isDraggable&&e.push("fc-event-draggable"),(t.isStartResizable||t.isEndResizable)&&e.push("fc-event-resizable"),t.isDragging&&e.push("fc-event-dragging"),t.isResizing&&e.push("fc-event-resizing"),t.isSelected&&e.push("fc-event-selected"),t.isStart&&e.push("fc-event-start"),t.isEnd&&e.push("fc-event-end"),t.isPast&&e.push("fc-event-past"),t.isToday&&e.push("fc-event-today"),t.isFuture&&e.push("fc-event-future"),e}function AC(t){return t.instance?t.instance.instanceId:`${t.def.defId}:${t.range.start.toISOString()}`}function LC(t,e){let{def:n,instance:i}=t.eventRange,{url:r}=n;if(r)return{href:r};let{emitter:a,options:l}=e,{eventInteractive:d}=l;return d==null&&(d=n.interactive,d==null&&(d=!!a.hasHandlers("eventClick"))),d?tC(p=>{a.trigger("eventClick",{el:p.target,event:new Hr(e,n,i),jsEvent:p,view:e.viewApi})}):{}}const I8={start:lt,end:lt,allDay:Boolean};function z8(t,e,n){let i=B8(t,e),{range:r}=i;if(!r.start)return null;if(!r.end){if(n==null)return null;r.end=e.add(r.start,n)}return i}function B8(t,e){let{refined:n,extra:i}=p0(t,I8),r=n.start?e.createMarkerMeta(n.start):null,a=n.end?e.createMarkerMeta(n.end):null,{allDay:l}=n;return l==null&&(l=r&&r.isTimeUnspecified&&(!a||a.isTimeUnspecified)),Object.assign({range:{start:r?r.marker:null,end:a?a.marker:null},allDay:l},i)}function F8(t,e){return i8(t.range,e.range)&&t.allDay===e.allDay&&U8(t,e)}function U8(t,e){for(let n in e)if(n!=="range"&&n!=="allDay"&&t[n]!==e[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}function H8(t,e){return Object.assign(Object.assign({},jC(t.range,e,t.allDay)),{allDay:t.allDay})}function TC(t,e,n){return Object.assign(Object.assign({},jC(t,e,n)),{timeZone:e.timeZone})}function jC(t,e,n){return{start:e.toDate(t.start),end:e.toDate(t.end),startStr:e.formatIso(t.start,{omitTime:n}),endStr:e.formatIso(t.end,{omitTime:n})}}function q8(t,e,n){let i=gC({editable:!1},n),r=Ay(i.refined,i.extra,"",t.allDay,!0,n);return{def:r,ui:SC(r,e),instance:x0(r.defId,t.range),range:t.range,isStart:!0,isEnd:!0}}function W8(t,e,n){let i=!1,r=function(d){i||(i=!0,e(d))},a=function(d){i||(i=!0,n(d))},l=t(r,a);l&&typeof l.then=="function"&&l.then(r,a)}class lw extends Error{constructor(e,n){super(e),this.response=n}}function G8(t,e,n){t=t.toUpperCase();const i={method:t};return t==="GET"?e+=(e.indexOf("?")===-1?"?":"&")+new URLSearchParams(n):(i.body=new URLSearchParams(n),i.headers={"Content-Type":"application/x-www-form-urlencoded"}),fetch(e,i).then(r=>{if(r.ok)return r.json().then(a=>[a,r],()=>{throw new lw("Failure parsing JSON",r)});throw new lw("Request failed",r)})}let Bv;function kC(){return Bv==null&&(Bv=V8()),Bv}function V8(){if(typeof document>"u")return!0;let t=document.createElement("div");t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.innerHTML="<table><tr><td><div></div></td></tr></table>",t.querySelector("table").style.height="100px",t.querySelector("div").style.height="100%",document.body.appendChild(t);let n=t.querySelector("div").offsetHeight>0;return document.body.removeChild(t),n}class Y8 extends Xi{constructor(){super(...arguments),this.state={forPrint:!1},this.handleBeforePrint=()=>{$p(()=>{this.setState({forPrint:!0})})},this.handleAfterPrint=()=>{$p(()=>{this.setState({forPrint:!1})})}}render(){let{props:e}=this,{options:n}=e,{forPrint:i}=this.state,r=i||n.height==="auto"||n.contentHeight==="auto",a=!r&&n.height!=null?n.height:"",l=["fc",i?"fc-media-print":"fc-media-screen",`fc-direction-${n.direction}`,e.theme.getClass("root")];return kC()||l.push("fc-liquid-hack"),e.children(l,a,r,i)}componentDidMount(){let{emitter:e}=this.props;e.on("_beforeprint",this.handleBeforePrint),e.on("_afterprint",this.handleAfterPrint)}componentWillUnmount(){let{emitter:e}=this.props;e.off("_beforeprint",this.handleBeforePrint),e.off("_afterprint",this.handleAfterPrint)}}class Bd{constructor(e){this.component=e.component,this.isHitComboAllowed=e.isHitComboAllowed||null}destroy(){}}function Z8(t,e){return{component:t,el:e.el,useEventCenter:e.useEventCenter!=null?e.useEventCenter:!0,isHitComboAllowed:e.isHitComboAllowed||null}}function E0(t){return{[t.component.uid]:t}}const Ty={};class Fd extends Ys{constructor(e,n){super(e,n),this.handleRefresh=()=>{let i=this.computeTiming();i.state.nowDate.valueOf()!==this.state.nowDate.valueOf()&&this.setState(i.state),this.clearTimeout(),this.setTimeout(i.waitMs)},this.handleVisibilityChange=()=>{document.hidden||this.handleRefresh()},this.state=this.computeTiming().state}render(){let{props:e,state:n}=this;return e.children(n.nowDate,n.todayRange)}componentDidMount(){this.setTimeout(),this.context.nowManager.addResetListener(this.handleRefresh),document.addEventListener("visibilitychange",this.handleVisibilityChange)}componentDidUpdate(e){e.unit!==this.props.unit&&(this.clearTimeout(),this.setTimeout())}componentWillUnmount(){this.clearTimeout(),this.context.nowManager.removeResetListener(this.handleRefresh),document.removeEventListener("visibilitychange",this.handleVisibilityChange)}computeTiming(){let{props:e,context:n}=this,i=n.nowManager.getDateMarker(),{nowIndicatorSnap:r}=n.options;r==="auto"&&(r=/year|month|week|day/.test(e.unit)||(e.unitValue||1)===1);let a,l;return r?(a=n.dateEnv.startOf(i,e.unit),l=n.dateEnv.add(a,Ei(1,e.unit)).valueOf()-i.valueOf()):(a=i,l=1e3*60),l=Math.min(1e3*60*60*24,l),{state:{nowDate:a,todayRange:K8(a)},waitMs:l}}setTimeout(e=this.computeTiming().waitMs){this.timeoutId=setTimeout(()=>{const n=this.computeTiming();this.setState(n.state,()=>{this.setTimeout(n.waitMs)})},e)}clearTimeout(){this.timeoutId&&clearTimeout(this.timeoutId)}}Fd.contextType=Cc;function K8(t){let e=Er(t),n=Eo(e,1);return{start:e,end:n}}class X8{getCurrentData(){return this.currentDataManager.getCurrentData()}dispatch(e){this.currentDataManager.dispatch(e)}get view(){return this.getCurrentData().viewApi}batchRendering(e){e()}updateSize(){this.trigger("_resize",!0)}setOption(e,n){this.dispatch({type:"SET_OPTION",optionName:e,rawOptionValue:n})}getOption(e){return this.currentDataManager.currentCalendarOptionsInput[e]}getAvailableLocaleCodes(){return Object.keys(this.getCurrentData().availableRawLocales)}on(e,n){let{currentDataManager:i}=this;i.currentCalendarOptionsRefiners[e]?i.emitter.on(e,n):console.warn(`Unknown listener name '${e}'`)}off(e,n){this.currentDataManager.emitter.off(e,n)}trigger(e,...n){this.currentDataManager.emitter.trigger(e,...n)}changeView(e,n){this.batchRendering(()=>{if(this.unselect(),n)if(n.start&&n.end)this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e}),this.dispatch({type:"SET_OPTION",optionName:"visibleRange",rawOptionValue:n});else{let{dateEnv:i}=this.getCurrentData();this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e,dateMarker:i.createMarker(n)})}else this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:e})})}zoomTo(e,n){let i=this.getCurrentData(),r;n=n||"day",r=i.viewSpecs[n]||this.getUnitViewSpec(n),this.unselect(),r?this.dispatch({type:"CHANGE_VIEW_TYPE",viewType:r.type,dateMarker:e}):this.dispatch({type:"CHANGE_DATE",dateMarker:e})}getUnitViewSpec(e){let{viewSpecs:n,toolbarConfig:i}=this.getCurrentData(),r=[].concat(i.header?i.header.viewsWithButtons:[],i.footer?i.footer.viewsWithButtons:[]),a,l;for(let d in n)r.push(d);for(a=0;a<r.length;a+=1)if(l=n[r[a]],l&&l.singleUnit===e)return l;return null}prev(){this.unselect(),this.dispatch({type:"PREV"})}next(){this.unselect(),this.dispatch({type:"NEXT"})}prevYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,-1)})}nextYear(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.dateEnv.addYears(e.currentDate,1)})}today(){let e=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:e.nowManager.getDateMarker()})}gotoDate(e){let n=this.getCurrentData();this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.createMarker(e)})}incrementDate(e){let n=this.getCurrentData(),i=Ei(e);i&&(this.unselect(),this.dispatch({type:"CHANGE_DATE",dateMarker:n.dateEnv.add(n.currentDate,i)}))}getDate(){let e=this.getCurrentData();return e.dateEnv.toDate(e.currentDate)}formatDate(e,n){let{dateEnv:i}=this.getCurrentData();return i.format(i.createMarker(e),na(n))}formatRange(e,n,i){let{dateEnv:r}=this.getCurrentData();return r.formatRange(r.createMarker(e),r.createMarker(n),na(i),i)}formatIso(e,n){let{dateEnv:i}=this.getCurrentData();return i.formatIso(i.createMarker(e),{omitTime:n})}select(e,n){let i;n==null?e.start!=null?i=e:i={start:e,end:null}:i={start:e,end:n};let r=this.getCurrentData(),a=z8(i,r.dateEnv,Ei({days:1}));a&&(this.dispatch({type:"SELECT_DATES",selection:a}),_C(a,null,r))}unselect(e){let n=this.getCurrentData();n.dateSelection&&(this.dispatch({type:"UNSELECT_DATES"}),T8(e,n))}addEvent(e,n){if(e instanceof Hr){let l=e._def,d=e._instance;return this.getCurrentData().eventStore.defs[l.defId]||(this.dispatch({type:"ADD_EVENTS",eventStore:Ly({def:l,instance:d})}),this.triggerEventAdd(e)),e}let i=this.getCurrentData(),r;if(n instanceof vd)r=n.internalEventSource;else if(typeof n=="boolean")n&&([r]=m0(i.eventSources));else if(n!=null){let l=this.getEventSourceById(n);if(!l)return console.warn(`Could not find an event source with ID "${n}"`),null;r=l.internalEventSource}let a=pC(e,r,i,!1);if(a){let l=new Hr(i,a.def,a.def.recurringDef?null:a.instance);return this.dispatch({type:"ADD_EVENTS",eventStore:Ly(a)}),this.triggerEventAdd(l),l}return null}triggerEventAdd(e){let{emitter:n}=this.getCurrentData();n.trigger("eventAdd",{event:e,relatedEvents:[],revert:()=>{this.dispatch({type:"REMOVE_EVENTS",eventStore:wC(e)})}})}getEventById(e){let n=this.getCurrentData(),{defs:i,instances:r}=n.eventStore;e=String(e);for(let a in i){let l=i[a];if(l.publicId===e){if(l.recurringDef)return new Hr(n,l,null);for(let d in r){let p=r[d];if(p.defId===l.defId)return new Hr(n,l,p)}}}return null}getEvents(){let e=this.getCurrentData();return Au(e.eventStore,e)}removeAllEvents(){this.dispatch({type:"REMOVE_ALL_EVENTS"})}getEventSources(){let e=this.getCurrentData(),n=e.eventSources,i=[];for(let r in n)i.push(new vd(e,n[r]));return i}getEventSourceById(e){let n=this.getCurrentData(),i=n.eventSources;e=String(e);for(let r in i)if(i[r].publicId===e)return new vd(n,i[r]);return null}addEventSource(e){let n=this.getCurrentData();if(e instanceof vd)return n.eventSources[e.internalEventSource.sourceId]||this.dispatch({type:"ADD_EVENT_SOURCES",sources:[e.internalEventSource]}),e;let i=vC(e,n);return i?(this.dispatch({type:"ADD_EVENT_SOURCES",sources:[i]}),new vd(n,i)):null}removeAllEventSources(){this.dispatch({type:"REMOVE_ALL_EVENT_SOURCES"})}refetchEvents(){this.dispatch({type:"FETCH_EVENT_SOURCES",isRefetch:!0})}scrollToTime(e){let n=Ei(e);n&&this.trigger("_scrollRequest",{time:n})}}function Q8(t,e){return t.left>=e.left&&t.left<e.right&&t.top>=e.top&&t.top<e.bottom}function RC(t,e){let n={left:Math.max(t.left,e.left),right:Math.min(t.right,e.right),top:Math.max(t.top,e.top),bottom:Math.min(t.bottom,e.bottom)};return n.left<n.right&&n.top<n.bottom?n:!1}function $8(t,e){return{left:Math.min(Math.max(t.left,e.left),e.right),top:Math.min(Math.max(t.top,e.top),e.bottom)}}function J8(t){return{left:(t.left+t.right)/2,top:(t.top+t.bottom)/2}}function eM(t,e){return{left:t.left-e.left,top:t.top-e.top}}const Fv=Zs();class tM{constructor(){this.getKeysForEventDefs=Nn(this._getKeysForEventDefs),this.splitDateSelection=Nn(this._splitDateSpan),this.splitEventStore=Nn(this._splitEventStore),this.splitIndividualUi=Nn(this._splitIndividualUi),this.splitEventDrag=Nn(this._splitInteraction),this.splitEventResize=Nn(this._splitInteraction),this.eventUiBuilders={}}splitProps(e){let n=this.getKeyInfo(e),i=this.getKeysForEventDefs(e.eventStore),r=this.splitDateSelection(e.dateSelection),a=this.splitIndividualUi(e.eventUiBases,i),l=this.splitEventStore(e.eventStore,i),d=this.splitEventDrag(e.eventDrag),p=this.splitEventResize(e.eventResize),g={};this.eventUiBuilders=Sc(n,(m,_)=>this.eventUiBuilders[_]||Nn(nM));for(let m in n){let _=n[m],A=l[m]||Fv,x=this.eventUiBuilders[m];g[m]={businessHours:_.businessHours||e.businessHours,dateSelection:r[m]||null,eventStore:A,eventUiBases:x(e.eventUiBases[""],_.ui,a[m]),eventSelection:A.instances[e.eventSelection]?e.eventSelection:"",eventDrag:d[m]||null,eventResize:p[m]||null}}return g}_splitDateSpan(e){let n={};if(e){let i=this.getKeysForDateSpan(e);for(let r of i)n[r]=e}return n}_getKeysForEventDefs(e){return Sc(e.defs,n=>this.getKeysForEventDef(n))}_splitEventStore(e,n){let{defs:i,instances:r}=e,a={};for(let l in i)for(let d of n[l])a[d]||(a[d]=Zs()),a[d].defs[l]=i[l];for(let l in r){let d=r[l];for(let p of n[d.defId])a[p]&&(a[p].instances[l]=d)}return a}_splitIndividualUi(e,n){let i={};for(let r in e)if(r)for(let a of n[r])i[a]||(i[a]={}),i[a][r]=e[r];return i}_splitInteraction(e){let n={};if(e){let i=this._splitEventStore(e.affectedEvents,this._getKeysForEventDefs(e.affectedEvents)),r=this._getKeysForEventDefs(e.mutatedEvents),a=this._splitEventStore(e.mutatedEvents,r),l=d=>{n[d]||(n[d]={affectedEvents:i[d]||Fv,mutatedEvents:a[d]||Fv,isEvent:e.isEvent})};for(let d in i)l(d);for(let d in a)l(d)}return n}}function nM(t,e,n){let i=[];t&&i.push(t),e&&i.push(e);let r={"":mC(i)};return n&&Object.assign(r,n),r}function NC(t,e,n,i){return{dow:t.getUTCDay(),isDisabled:!!(i&&(!i.activeRange||!bc(i.activeRange,t))),isOther:!!(i&&!bc(i.currentRange,t)),isToday:!!(e&&bc(e,t)),isPast:!!(e&&t<e.start),isFuture:!!(e&&t>=e.end)}}function A0(t,e){let n=["fc-day",`fc-day-${oD[t.dow]}`];return t.isDisabled?n.push("fc-day-disabled"):(t.isToday&&(n.push("fc-day-today"),n.push(e.getClass("today"))),t.isPast&&n.push("fc-day-past"),t.isFuture&&n.push("fc-day-future"),t.isOther&&n.push("fc-day-other")),n}const iM=na({year:"numeric",month:"long",day:"numeric"}),rM=na({week:"long"});function ig(t,e,n="day",i=!0){const{dateEnv:r,options:a,calendarApi:l}=t;let d=r.format(e,n==="week"?rM:iM);if(a.navLinks){let p=r.toDate(e);const g=m=>{let _=n==="day"?a.navLinkDayClick:n==="week"?a.navLinkWeekClick:null;typeof _=="function"?_.call(l,r.toDate(e),m):(typeof _=="string"&&(n=_),l.zoomTo(e,n))};return Object.assign({title:Nf(a.navLinkHint,[d,p],d),"data-navlink":""},i?eC(g):{onClick:g})}return{"aria-label":d}}let Uv=null;function aM(){return Uv===null&&(Uv=oM()),Uv}function oM(){let t=document.createElement("div");Rf(t,{position:"absolute",top:-1e3,left:0,border:0,padding:0,overflow:"scroll",direction:"rtl"}),t.innerHTML="<div></div>",document.body.appendChild(t);let n=t.firstChild.getBoundingClientRect().left>t.getBoundingClientRect().left;return l0(t),n}let Hv;function sM(){return Hv||(Hv=lM()),Hv}function lM(){let t=document.createElement("div");t.style.overflow="scroll",t.style.position="absolute",t.style.top="-9999px",t.style.left="-9999px",document.body.appendChild(t);let e=DC(t);return document.body.removeChild(t),e}function DC(t){return{x:t.offsetHeight-t.clientHeight,y:t.offsetWidth-t.clientWidth}}function cM(t,e=!1){let n=window.getComputedStyle(t),i=parseInt(n.borderLeftWidth,10)||0,r=parseInt(n.borderRightWidth,10)||0,a=parseInt(n.borderTopWidth,10)||0,l=parseInt(n.borderBottomWidth,10)||0,d=DC(t),p=d.y-i-r,g=d.x-a-l,m={borderLeft:i,borderRight:r,borderTop:a,borderBottom:l,scrollbarBottom:g,scrollbarLeft:0,scrollbarRight:0};return aM()&&n.direction==="rtl"?m.scrollbarLeft=p:m.scrollbarRight=p,e&&(m.paddingLeft=parseInt(n.paddingLeft,10)||0,m.paddingRight=parseInt(n.paddingRight,10)||0,m.paddingTop=parseInt(n.paddingTop,10)||0,m.paddingBottom=parseInt(n.paddingBottom,10)||0),m}function uM(t,e=!1,n){let i=L0(t),r=cM(t,e),a={left:i.left+r.borderLeft+r.scrollbarLeft,right:i.right-r.borderRight-r.scrollbarRight,top:i.top+r.borderTop,bottom:i.bottom-r.borderBottom-r.scrollbarBottom};return e&&(a.left+=r.paddingLeft,a.right-=r.paddingRight,a.top+=r.paddingTop,a.bottom-=r.paddingBottom),a}function L0(t){let e=t.getBoundingClientRect();return{left:e.left+window.scrollX,top:e.top+window.scrollY,right:e.right+window.scrollX,bottom:e.bottom+window.scrollY}}function dM(t){let e=MC(t),n=t.getBoundingClientRect();for(let i of e){let r=RC(n,i.getBoundingClientRect());if(r)n=r;else return null}return n}function MC(t){let e=[];for(;t instanceof HTMLElement;){let n=window.getComputedStyle(t);if(n.position==="fixed")break;/(auto|scroll)/.test(n.overflow+n.overflowY+n.overflowX)&&e.push(t),t=t.parentNode}return e}class Nd{constructor(e,n,i,r){this.els=n;let a=this.originClientRect=e.getBoundingClientRect();i&&this.buildElHorizontals(a.left),r&&this.buildElVerticals(a.top)}buildElHorizontals(e){let n=[],i=[];for(let r of this.els){let a=r.getBoundingClientRect();n.push(a.left-e),i.push(a.right-e)}this.lefts=n,this.rights=i}buildElVerticals(e){let n=[],i=[];for(let r of this.els){let a=r.getBoundingClientRect();n.push(a.top-e),i.push(a.bottom-e)}this.tops=n,this.bottoms=i}leftToIndex(e){let{lefts:n,rights:i}=this,r=n.length,a;for(a=0;a<r;a+=1)if(e>=n[a]&&e<i[a])return a}topToIndex(e){let{tops:n,bottoms:i}=this,r=n.length,a;for(a=0;a<r;a+=1)if(e>=n[a]&&e<i[a])return a}getWidth(e){return this.rights[e]-this.lefts[e]}getHeight(e){return this.bottoms[e]-this.tops[e]}similarTo(e){return up(this.tops||[],e.tops||[])&&up(this.bottoms||[],e.bottoms||[])&&up(this.lefts||[],e.lefts||[])&&up(this.rights||[],e.rights||[])}}function up(t,e){const n=t.length;if(n!==e.length)return!1;for(let i=0;i<n;i++)if(Math.round(t[i])!==Math.round(e[i]))return!1;return!0}class T0{getMaxScrollTop(){return this.getScrollHeight()-this.getClientHeight()}getMaxScrollLeft(){return this.getScrollWidth()-this.getClientWidth()}canScrollVertically(){return this.getMaxScrollTop()>0}canScrollHorizontally(){return this.getMaxScrollLeft()>0}canScrollUp(){return this.getScrollTop()>0}canScrollDown(){return this.getScrollTop()<this.getMaxScrollTop()}canScrollLeft(){return this.getScrollLeft()>0}canScrollRight(){return this.getScrollLeft()<this.getMaxScrollLeft()}}class fM extends T0{constructor(e){super(),this.el=e}getScrollTop(){return this.el.scrollTop}getScrollLeft(){return this.el.scrollLeft}setScrollTop(e){this.el.scrollTop=e}setScrollLeft(e){this.el.scrollLeft=e}getScrollWidth(){return this.el.scrollWidth}getScrollHeight(){return this.el.scrollHeight}getClientHeight(){return this.el.clientHeight}getClientWidth(){return this.el.clientWidth}}class hM extends T0{getScrollTop(){return window.scrollY}getScrollLeft(){return window.scrollX}setScrollTop(e){window.scroll(window.scrollX,e)}setScrollLeft(e){window.scroll(e,window.scrollY)}getScrollWidth(){return document.documentElement.scrollWidth}getScrollHeight(){return document.documentElement.scrollHeight}getClientHeight(){return document.documentElement.clientHeight}getClientWidth(){return document.documentElement.clientWidth}}class Ql extends Xi{constructor(){super(...arguments),this.uid=Iu()}prepareHits(){}queryHit(e,n,i,r){return null}isValidSegDownEl(e){return!this.props.eventDrag&&!this.props.eventResize&&!Qo(e,".fc-event-mirror")}isValidDateDownEl(e){return!Qo(e,".fc-event:not(.fc-bg-event)")&&!Qo(e,".fc-more-link")&&!Qo(e,"a[data-navlink]")&&!Qo(e,".fc-popover")}}class OC{constructor(e=n=>n.thickness||1){this.getEntryThickness=e,this.strictOrder=!1,this.allowReslicing=!1,this.maxCoord=-1,this.maxStackCnt=-1,this.levelCoords=[],this.entriesByLevel=[],this.stackCnts={}}addSegs(e){let n=[];for(let i of e)this.insertEntry(i,n);return n}insertEntry(e,n){let i=this.findInsertion(e);this.isInsertionValid(i,e)?this.insertEntryAt(e,i):this.handleInvalidInsertion(i,e,n)}isInsertionValid(e,n){return(this.maxCoord===-1||e.levelCoord+this.getEntryThickness(n)<=this.maxCoord)&&(this.maxStackCnt===-1||e.stackCnt<this.maxStackCnt)}handleInvalidInsertion(e,n,i){if(this.allowReslicing&&e.touchingEntry){const r=Object.assign(Object.assign({},n),{span:j0(n.span,e.touchingEntry.span)});i.push(r),this.splitEntry(n,e.touchingEntry,i)}else i.push(n)}splitEntry(e,n,i){let r=e.span,a=n.span;r.start<a.start&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:r.start,end:a.start}},i),r.end>a.end&&this.insertEntry({index:e.index,thickness:e.thickness,span:{start:a.end,end:r.end}},i)}insertEntryAt(e,n){let{entriesByLevel:i,levelCoords:r}=this;n.lateral===-1?(qv(r,n.level,n.levelCoord),qv(i,n.level,[e])):qv(i[n.level],n.lateral,e),this.stackCnts[Lu(e)]=n.stackCnt}findInsertion(e){let{levelCoords:n,entriesByLevel:i,strictOrder:r,stackCnts:a}=this,l=n.length,d=0,p=-1,g=-1,m=null,_=0;for(let R=0;R<l;R+=1){const M=n[R];if(!r&&M>=d+this.getEntryThickness(e))break;let k=i[R],I,Y=ky(k,e.span.start,jy),B=Y[0]+Y[1];for(;(I=k[B])&&I.span.start<e.span.end;){let V=M+this.getEntryThickness(I);V>d&&(d=V,m=I,p=R,g=B),V===d&&(_=Math.max(_,a[Lu(I)]+1)),B+=1}}let A=0;if(m)for(A=p+1;A<l&&n[A]<d;)A+=1;let x=-1;return A<l&&n[A]===d&&(x=ky(i[A],e.span.end,jy)[0]),{touchingLevel:p,touchingLateral:g,touchingEntry:m,stackCnt:_,levelCoord:d,level:A,lateral:x}}toRects(){let{entriesByLevel:e,levelCoords:n}=this,i=e.length,r=[];for(let a=0;a<i;a+=1){let l=e[a],d=n[a];for(let p of l)r.push(Object.assign(Object.assign({},p),{thickness:this.getEntryThickness(p),levelCoord:d}))}return r}}function jy(t){return t.span.end}function Lu(t){return t.index+":"+t.span.start}function pM(t){let e=[];for(let n of t){let i=[],r={span:n.span,entries:[n]};for(let a of e)j0(a.span,r.span)?r={entries:a.entries.concat(r.entries),span:gM(a.span,r.span)}:i.push(a);i.push(r),e=i}return e}function gM(t,e){return{start:Math.min(t.start,e.start),end:Math.max(t.end,e.end)}}function j0(t,e){let n=Math.max(t.start,e.start),i=Math.min(t.end,e.end);return n<i?{start:n,end:i}:null}function qv(t,e,n){t.splice(e,0,n)}function ky(t,e,n){let i=0,r=t.length;if(!r||e<n(t[i]))return[0,0];if(e>n(t[r-1]))return[r,0];for(;i<r;){let a=Math.floor(i+(r-i)/2),l=n(t[a]);if(e<l)r=a;else if(e>l)i=a+1;else return[a,1]}return[i,0]}class mM{constructor(e,n){this.emitter=new Ag}destroy(){}setMirrorIsVisible(e){}setMirrorNeedsRevert(e){}setAutoScrollEnabled(e){}}const k0={};function vM(t,e){return!t||e>10?na({weekday:"short"}):e>1?na({weekday:"short",month:"numeric",day:"numeric",omitCommas:!0}):na({weekday:"long"})}const PC="fc-col-header-cell";function IC(t){return t.text}class yM extends Xi{render(){let{dateEnv:e,options:n,theme:i,viewApi:r}=this.context,{props:a}=this,{date:l,dateProfile:d}=a,p=NC(l,a.todayRange,null,d),g=[PC].concat(A0(p,i)),m=e.format(l,a.dayHeaderFormat),_=!p.isDisabled&&a.colCnt>1?ig(this.context,l):{},A=e.toDate(l);e.namedTimeZoneImpl&&(A=ru(A,36e5));let x=Object.assign(Object.assign(Object.assign({date:A,view:r},a.extraRenderProps),{text:m}),p);return Fe(Xs,{elTag:"th",elClasses:g,elAttrs:Object.assign({role:"columnheader",colSpan:a.colSpan,"data-date":p.isDisabled?void 0:f0(l)},a.extraDataAttrs),renderProps:x,generatorName:"dayHeaderContent",customGenerator:n.dayHeaderContent,defaultGenerator:IC,classNameGenerator:n.dayHeaderClassNames,didMount:n.dayHeaderDidMount,willUnmount:n.dayHeaderWillUnmount},R=>Fe("div",{className:"fc-scrollgrid-sync-inner"},!p.isDisabled&&Fe(R,{elTag:"a",elAttrs:_,elClasses:["fc-col-header-cell-cushion",a.isSticky&&"fc-sticky"]})))}}const xM=na({weekday:"long"});class bM extends Xi{render(){let{props:e}=this,{dateEnv:n,theme:i,viewApi:r,options:a}=this.context,l=Eo(new Date(2592e5),e.dow),d={dow:e.dow,isDisabled:!1,isFuture:!1,isPast:!1,isToday:!1,isOther:!1},p=n.format(l,e.dayHeaderFormat),g=Object.assign(Object.assign(Object.assign(Object.assign({date:l},d),{view:r}),e.extraRenderProps),{text:p});return Fe(Xs,{elTag:"th",elClasses:[PC,...A0(d,i),...e.extraClassNames||[]],elAttrs:Object.assign({role:"columnheader",colSpan:e.colSpan},e.extraDataAttrs),renderProps:g,generatorName:"dayHeaderContent",customGenerator:a.dayHeaderContent,defaultGenerator:IC,classNameGenerator:a.dayHeaderClassNames,didMount:a.dayHeaderDidMount,willUnmount:a.dayHeaderWillUnmount},m=>Fe("div",{className:"fc-scrollgrid-sync-inner"},Fe(m,{elTag:"a",elClasses:["fc-col-header-cell-cushion",e.isSticky&&"fc-sticky"],elAttrs:{"aria-label":n.format(l,xM)}})))}}class zC extends Xi{constructor(){super(...arguments),this.createDayHeaderFormatter=Nn(_M)}render(){let{context:e}=this,{dates:n,dateProfile:i,datesRepDistinctDays:r,renderIntro:a}=this.props,l=this.createDayHeaderFormatter(e.options.dayHeaderFormat,r,n.length);return Fe(Fd,{unit:"day"},(d,p)=>Fe("tr",{role:"row"},a&&a("day"),n.map(g=>r?Fe(yM,{key:g.toISOString(),date:g,dateProfile:i,todayRange:p,colCnt:n.length,dayHeaderFormat:l}):Fe(bM,{key:g.getUTCDay(),dow:g.getUTCDay(),dayHeaderFormat:l}))))}}function _M(t,e,n){return t||vM(e,n)}class BC{constructor(e,n){let i=e.start,{end:r}=e,a=[],l=[],d=-1;for(;i<r;)n.isHiddenDay(i)?a.push(d+.5):(d+=1,a.push(d),l.push(i)),i=Eo(i,1);this.dates=l,this.indices=a,this.cnt=l.length}sliceRange(e){let n=this.getDateDayIndex(e.start),i=this.getDateDayIndex(Eo(e.end,-1)),r=Math.max(0,n),a=Math.min(this.cnt-1,i);return r=Math.ceil(r),a=Math.floor(a),r<=a?{firstIndex:r,lastIndex:a,isStart:n===r,isEnd:i===a}:null}getDateDayIndex(e){let{indices:n}=this,i=Math.floor(zu(this.dates[0],e));return i<0?n[0]-1:i>=n.length?n[n.length-1]+1:n[i]}}class FC{constructor(e,n){let{dates:i}=e,r,a,l;if(n){for(a=i[0].getUTCDay(),r=1;r<i.length&&i[r].getUTCDay()!==a;r+=1);l=Math.ceil(i.length/r)}else l=1,r=i.length;this.rowCnt=l,this.colCnt=r,this.daySeries=e,this.cells=this.buildCells(),this.headerDates=this.buildHeaderDates()}buildCells(){let e=[];for(let n=0;n<this.rowCnt;n+=1){let i=[];for(let r=0;r<this.colCnt;r+=1)i.push(this.buildCell(n,r));e.push(i)}return e}buildCell(e,n){let i=this.daySeries.dates[e*this.colCnt+n];return{key:i.toISOString(),date:i}}buildHeaderDates(){let e=[];for(let n=0;n<this.colCnt;n+=1)e.push(this.cells[0][n].date);return e}sliceRange(e){let{colCnt:n}=this,i=this.daySeries.sliceRange(e),r=[];if(i){let{firstIndex:a,lastIndex:l}=i,d=a;for(;d<=l;){let p=Math.floor(d/n),g=Math.min((p+1)*n,l+1);r.push({row:p,firstCol:d%n,lastCol:(g-1)%n,isStart:i.isStart&&d===a,isEnd:i.isEnd&&g-1===l}),d=g}}return r}}class UC{constructor(){this.sliceBusinessHours=Nn(this._sliceBusinessHours),this.sliceDateSelection=Nn(this._sliceDateSpan),this.sliceEventStore=Nn(this._sliceEventStore),this.sliceEventDrag=Nn(this._sliceInteraction),this.sliceEventResize=Nn(this._sliceInteraction),this.forceDayIfListItem=!1}sliceProps(e,n,i,r,...a){let{eventUiBases:l}=e,d=this.sliceEventStore(e.eventStore,l,n,i,...a);return{dateSelectionSegs:this.sliceDateSelection(e.dateSelection,n,i,l,r,...a),businessHourSegs:this.sliceBusinessHours(e.businessHours,n,i,r,...a),fgEventSegs:d.fg,bgEventSegs:d.bg,eventDrag:this.sliceEventDrag(e.eventDrag,l,n,i,...a),eventResize:this.sliceEventResize(e.eventResize,l,n,i,...a),eventSelection:e.eventSelection}}sliceNowDate(e,n,i,r,...a){return this._sliceDateSpan({range:{start:e,end:ru(e,1)},allDay:!1},n,i,{},r,...a)}_sliceBusinessHours(e,n,i,r,...a){return e?this._sliceEventStore(Du(e,dp(n,!!i),r),{},n,i,...a).bg:[]}_sliceEventStore(e,n,i,r,...a){if(e){let l=ow(e,n,dp(i,!!r),r);return{bg:this.sliceEventRanges(l.bg,a),fg:this.sliceEventRanges(l.fg,a)}}return{bg:[],fg:[]}}_sliceInteraction(e,n,i,r,...a){if(!e)return null;let l=ow(e.mutatedEvents,n,dp(i,!!r),r);return{segs:this.sliceEventRanges(l.fg,a),affectedInstances:e.affectedEvents.instances,isEvent:e.isEvent}}_sliceDateSpan(e,n,i,r,a,...l){if(!e)return[];let d=dp(n,!!i),p=Nu(e.range,d);if(p){e=Object.assign(Object.assign({},e),{range:p});let g=q8(e,r,a),m=this.sliceRange(e.range,...l);for(let _ of m)_.eventRange=g;return m}return[]}sliceEventRanges(e,n){let i=[];for(let r of e)i.push(...this.sliceEventRange(r,n));return i}sliceEventRange(e,n){let i=e.range;this.forceDayIfListItem&&e.ui.display==="list-item"&&(i={start:i.start,end:Eo(i.start,1)});let r=this.sliceRange(i,...n);for(let a of r)a.eventRange=e,a.isStart=e.isStart&&a.isStart,a.isEnd=e.isEnd&&a.isEnd;return r}}function dp(t,e){let n=t.activeRange;return e?n:{start:ru(n.start,t.slotMinTime.milliseconds),end:ru(n.end,t.slotMaxTime.milliseconds-864e5)}}function HC(t,e,n){let{instances:i}=t.mutatedEvents;for(let r in i)if(!Cg(e.validRange,i[r].range))return!1;return qC({eventDrag:t},n)}function wM(t,e,n){return Cg(e.validRange,t.range)?qC({dateSelection:t},n):!1}function qC(t,e){let n=e.getCurrentData(),i=Object.assign({businessHours:n.businessHours,dateSelection:"",eventStore:n.eventStore,eventUiBases:n.eventUiBases,eventSelection:"",eventDrag:null,eventResize:null},t);return(e.pluginHooks.isPropsValid||SM)(i,e)}function SM(t,e,n={},i){return!(t.eventDrag&&!CM(t,e,n,i)||t.dateSelection&&!EM(t,e,n,i))}function CM(t,e,n,i){let r=e.getCurrentData(),a=t.eventDrag,l=a.mutatedEvents,d=l.defs,p=l.instances,g=ng(d,a.isEvent?t.eventUiBases:{"":r.selectionConfig});i&&(g=Sc(g,i));let m=_8(t.eventStore,a.affectedEvents.instances),_=m.defs,A=m.instances,x=ng(_,t.eventUiBases);for(let R in p){let M=p[R],k=M.range,I=g[M.defId],Y=d[M.defId];if(!WC(I.constraints,k,m,t.businessHours,e))return!1;let{eventOverlap:B}=e.options,V=typeof B=="function"?B:null;for(let ue in A){let _e=A[ue];if(y0(k,_e.range)&&(x[_e.defId].overlap===!1&&a.isEvent||I.overlap===!1||V&&!V(new Hr(e,_[_e.defId],_e),new Hr(e,Y,M))))return!1}let ee=r.eventStore;for(let ue of I.allows){let _e=Object.assign(Object.assign({},n),{range:M.range,allDay:Y.allDay}),fe=ee.defs[Y.defId],G=ee.instances[R],me;if(fe?me=new Hr(e,fe,G):me=new Hr(e,Y),!ue(S0(_e,e),me))return!1}}return!0}function EM(t,e,n,i){let r=t.eventStore,a=r.defs,l=r.instances,d=t.dateSelection,p=d.range,{selectionConfig:g}=e.getCurrentData();if(i&&(g=i(g)),!WC(g.constraints,p,r,t.businessHours,e))return!1;let{selectOverlap:m}=e.options,_=typeof m=="function"?m:null;for(let A in l){let x=l[A];if(y0(p,x.range)&&(g.overlap===!1||_&&!_(new Hr(e,a[x.defId],x),null)))return!1}for(let A of g.allows){let x=Object.assign(Object.assign({},n),d);if(!A(S0(x,e),null))return!1}return!0}function WC(t,e,n,i,r){for(let a of t)if(!LM(AM(a,e,n,i,r),e))return!1;return!0}function AM(t,e,n,i,r){return t==="businessHours"?Wv(Du(i,e,r)):typeof t=="string"?Wv(Eg(n,a=>a.groupId===t)):typeof t=="object"&&t?Wv(Du(t,e,r)):[]}function Wv(t){let{instances:e}=t,n=[];for(let i in e)n.push(e[i].range);return n}function LM(t,e){for(let n of t)if(Cg(n,e))return!0;return!1}const fp=/^(visible|hidden)$/;class TM extends Xi{constructor(){super(...arguments),this.handleEl=e=>{this.el=e,Gl(this.props.elRef,e)}}render(){let{props:e}=this,{liquid:n,liquidIsAbsolute:i}=e,r=n&&i,a=["fc-scroller"];return n&&(i?a.push("fc-scroller-liquid-absolute"):a.push("fc-scroller-liquid")),Fe("div",{ref:this.handleEl,className:a.join(" "),style:{overflowX:e.overflowX,overflowY:e.overflowY,left:r&&-(e.overcomeLeft||0)||"",right:r&&-(e.overcomeRight||0)||"",bottom:r&&-(e.overcomeBottom||0)||"",marginLeft:!r&&-(e.overcomeLeft||0)||"",marginRight:!r&&-(e.overcomeRight||0)||"",marginBottom:!r&&-(e.overcomeBottom||0)||"",maxHeight:e.maxHeight||""}},e.children)}needsXScrolling(){if(fp.test(this.props.overflowX))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().width-this.getYScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().width>n)return!0;return!1}needsYScrolling(){if(fp.test(this.props.overflowY))return!1;let{el:e}=this,n=this.el.getBoundingClientRect().height-this.getXScrollbarWidth(),{children:i}=e;for(let r=0;r<i.length;r+=1)if(i[r].getBoundingClientRect().height>n)return!0;return!1}getXScrollbarWidth(){return fp.test(this.props.overflowX)?0:this.el.offsetHeight-this.el.clientHeight}getYScrollbarWidth(){return fp.test(this.props.overflowY)?0:this.el.offsetWidth-this.el.clientWidth}}class vc{constructor(e){this.masterCallback=e,this.currentMap={},this.depths={},this.callbackMap={},this.handleValue=(n,i)=>{let{depths:r,currentMap:a}=this,l=!1,d=!1;n!==null?(l=i in a,a[i]=n,r[i]=(r[i]||0)+1,d=!0):(r[i]-=1,r[i]||(delete a[i],delete this.callbackMap[i],l=!0)),this.masterCallback&&(l&&this.masterCallback(null,String(i)),d&&this.masterCallback(n,String(i)))}}createRef(e){let n=this.callbackMap[e];return n||(n=this.callbackMap[e]=i=>{this.handleValue(i,String(e))}),n}collect(e,n,i){return FD(this.currentMap,e,n,i)}getAll(){return m0(this.currentMap)}}function jM(t){let e=zN(t,".fc-scrollgrid-shrink"),n=0;for(let i of e)n=Math.max(n,$N(i));return Math.ceil(n)}function GC(t,e){return t.liquid&&e.liquid}function kM(t,e){return e.maxHeight!=null||GC(t,e)}function RM(t,e,n,i){let{expandRows:r}=n;return typeof e.content=="function"?e.content(n):Fe("table",{role:"presentation",className:[e.tableClassName,t.syncRowHeights?"fc-scrollgrid-sync-table":""].join(" "),style:{minWidth:n.tableMinWidth,width:n.clientWidth,height:r?n.clientHeight:""}},n.tableColGroupNode,Fe(i?"thead":"tbody",{role:"presentation"},typeof e.rowContent=="function"?e.rowContent(n):e.rowContent))}function NM(t,e){return iu(t,e,xl)}function DM(t,e){let n=[];for(let i of t){let r=i.span||1;for(let a=0;a<r;a+=1)n.push(Fe("col",{style:{width:i.width==="shrink"?MM(e):i.width||"",minWidth:i.minWidth||""}}))}return Fe("colgroup",{},...n)}function MM(t){return t??4}function OM(t){for(let e of t)if(e.width==="shrink")return!0;return!1}function PM(t,e){let n=["fc-scrollgrid",e.theme.getClass("table")];return t&&n.push("fc-scrollgrid-liquid"),n}function IM(t,e){let n=["fc-scrollgrid-section",`fc-scrollgrid-section-${t.type}`,t.className];return e&&t.liquid&&t.maxHeight==null&&n.push("fc-scrollgrid-section-liquid"),t.isSticky&&n.push("fc-scrollgrid-section-sticky"),n}function Ry(t){return Fe("div",{className:"fc-scrollgrid-sticky-shim",style:{width:t.clientWidth,minWidth:t.tableMinWidth}})}function rg(t){let{stickyHeaderDates:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}function VC(t){let{stickyFooterScrollbar:e}=t;return(e==null||e==="auto")&&(e=t.height==="auto"||t.viewHeight==="auto"),e}class R0 extends Xi{constructor(){super(...arguments),this.processCols=Nn(e=>e,NM),this.renderMicroColGroup=Nn(DM),this.scrollerRefs=new vc,this.scrollerElRefs=new vc(this._handleScrollerEl.bind(this)),this.state={shrinkWidth:null,forceYScrollbars:!1,scrollerClientWidths:{},scrollerClientHeights:{}},this.handleSizing=()=>{this.safeSetState(Object.assign({shrinkWidth:this.computeShrinkWidth()},this.computeScrollerDims()))}}render(){let{props:e,state:n,context:i}=this,r=e.sections||[],a=this.processCols(e.cols),l=this.renderMicroColGroup(a,n.shrinkWidth),d=PM(e.liquid,i);e.collapsibleWidth&&d.push("fc-scrollgrid-collapsible");let p=r.length,g=0,m,_=[],A=[],x=[];for(;g<p&&(m=r[g]).type==="header";)_.push(this.renderSection(m,l,!0)),g+=1;for(;g<p&&(m=r[g]).type==="body";)A.push(this.renderSection(m,l,!1)),g+=1;for(;g<p&&(m=r[g]).type==="footer";)x.push(this.renderSection(m,l,!0)),g+=1;let R=!kC();const M={role:"rowgroup"};return Fe("table",{role:"grid",className:d.join(" "),style:{height:e.height}},!!(!R&&_.length)&&Fe("thead",M,..._),!!(!R&&A.length)&&Fe("tbody",M,...A),!!(!R&&x.length)&&Fe("tfoot",M,...x),R&&Fe("tbody",M,..._,...A,...x))}renderSection(e,n,i){return"outerContent"in e?Fe(Cr,{key:e.key},e.outerContent):Fe("tr",{key:e.key,role:"presentation",className:IM(e,this.props.liquid).join(" ")},this.renderChunkTd(e,n,e.chunk,i))}renderChunkTd(e,n,i,r){if("outerContent"in i)return i.outerContent;let{props:a}=this,{forceYScrollbars:l,scrollerClientWidths:d,scrollerClientHeights:p}=this.state,g=kM(a,e),m=GC(a,e),_=a.liquid?l?"scroll":g?"auto":"hidden":"visible",A=e.key,x=RM(e,i,{tableColGroupNode:n,tableMinWidth:"",clientWidth:!a.collapsibleWidth&&d[A]!==void 0?d[A]:null,clientHeight:p[A]!==void 0?p[A]:null,expandRows:e.expandRows,syncRowHeights:!1,rowSyncHeights:[],reportRowHeightChange:()=>{}},r);return Fe(r?"th":"td",{ref:i.elRef,role:"presentation"},Fe("div",{className:`fc-scroller-harness${m?" fc-scroller-harness-liquid":""}`},Fe(TM,{ref:this.scrollerRefs.createRef(A),elRef:this.scrollerElRefs.createRef(A),overflowY:_,overflowX:a.liquid?"hidden":"visible",maxHeight:e.maxHeight,liquid:m,liquidIsAbsolute:!0},x)))}_handleScrollerEl(e,n){let i=zM(this.props.sections,n);i&&Gl(i.chunk.scrollerElRef,e)}componentDidMount(){this.handleSizing(),this.context.addResizeHandler(this.handleSizing)}componentDidUpdate(){this.handleSizing()}componentWillUnmount(){this.context.removeResizeHandler(this.handleSizing)}computeShrinkWidth(){return OM(this.props.cols)?jM(this.scrollerElRefs.getAll()):0}computeScrollerDims(){let e=sM(),{scrollerRefs:n,scrollerElRefs:i}=this,r=!1,a={},l={};for(let d in n.currentMap){let p=n.currentMap[d];if(p&&p.needsYScrolling()){r=!0;break}}for(let d of this.props.sections){let p=d.key,g=i.currentMap[p];if(g){let m=g.parentNode;a[p]=Math.floor(m.getBoundingClientRect().width-(r?e.y:0)),l[p]=Math.floor(m.getBoundingClientRect().height)}}return{forceYScrollbars:r,scrollerClientWidths:a,scrollerClientHeights:l}}}R0.addStateEquality({scrollerClientWidths:xl,scrollerClientHeights:xl});function zM(t,e){for(let n of t)if(n.key===e)return n;return null}class N0 extends Xi{constructor(){super(...arguments),this.buildPublicEvent=Nn((e,n,i)=>new Hr(e,n,i)),this.handleEl=e=>{this.el=e,Gl(this.props.elRef,e),e&&sw(e,this.props.seg)}}render(){const{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{eventRange:a}=r,{ui:l}=a,d={event:this.buildPublicEvent(n,a.def,a.instance),view:n.viewApi,timeText:e.timeText,textColor:l.textColor,backgroundColor:l.backgroundColor,borderColor:l.borderColor,isDraggable:!e.disableDragging&&D8(r,n),isStartResizable:!e.disableResizing&&M8(r,n),isEndResizable:!e.disableResizing&&O8(r),isMirror:!!(e.isDragging||e.isResizing||e.isDateSelecting),isStart:!!r.isStart,isEnd:!!r.isEnd,isPast:!!e.isPast,isFuture:!!e.isFuture,isToday:!!e.isToday,isSelected:!!e.isSelected,isDragging:!!e.isDragging,isResizing:!!e.isResizing};return Fe(Xs,{elRef:this.handleEl,elTag:e.elTag,elAttrs:e.elAttrs,elClasses:[...P8(d),...r.eventRange.ui.classNames,...e.elClasses||[]],elStyle:e.elStyle,renderProps:d,generatorName:"eventContent",customGenerator:i.eventContent,defaultGenerator:e.defaultGenerator,classNameGenerator:i.eventClassNames,didMount:i.eventDidMount,willUnmount:i.eventWillUnmount},e.children)}componentDidUpdate(e){this.el&&this.props.seg!==e.seg&&sw(this.el,this.props.seg)}}class D0 extends Xi{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,{ui:a}=r.eventRange,l=i.eventTimeFormat||e.defaultTimeFormat,d=EC(r,l,n,e.defaultDisplayEventTime,e.defaultDisplayEventEnd);return Fe(N0,Object.assign({},e,{elTag:"a",elStyle:{borderColor:a.borderColor,backgroundColor:a.backgroundColor},elAttrs:LC(r,n),defaultGenerator:BM,timeText:d}),(p,g)=>Fe(Cr,null,Fe(p,{elTag:"div",elClasses:["fc-event-main"],elStyle:{color:g.textColor}}),!!g.isStartResizable&&Fe("div",{className:"fc-event-resizer fc-event-resizer-start"}),!!g.isEndResizable&&Fe("div",{className:"fc-event-resizer fc-event-resizer-end"})))}}D0.addPropsEquality({seg:xl});function BM(t){return Fe("div",{className:"fc-event-main-frame"},t.timeText&&Fe("div",{className:"fc-event-time"},t.timeText),Fe("div",{className:"fc-event-title-container"},Fe("div",{className:"fc-event-title fc-sticky"},t.event.title||Fe(Cr,null,""))))}const M0=t=>Fe(Cc.Consumer,null,e=>{let{options:n}=e,i={isAxis:t.isAxis,date:e.dateEnv.toDate(t.date),view:e.viewApi};return Fe(Xs,{elRef:t.elRef,elTag:t.elTag||"div",elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:i,generatorName:"nowIndicatorContent",customGenerator:n.nowIndicatorContent,classNameGenerator:n.nowIndicatorClassNames,didMount:n.nowIndicatorDidMount,willUnmount:n.nowIndicatorWillUnmount},t.children)}),FM=na({day:"numeric"});class O0 extends Xi{constructor(){super(...arguments),this.refineRenderProps=kp(UM)}render(){let{props:e,context:n}=this,{options:i}=n,r=this.refineRenderProps({date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,isMonthStart:e.isMonthStart||!1,showDayNumber:e.showDayNumber,extraRenderProps:e.extraRenderProps,viewApi:n.viewApi,dateEnv:n.dateEnv,monthStartFormat:i.monthStartFormat});return Fe(Xs,{elRef:e.elRef,elTag:e.elTag,elAttrs:Object.assign(Object.assign({},e.elAttrs),r.isDisabled?{}:{"data-date":f0(e.date)}),elClasses:[...A0(r,n.theme),...e.elClasses||[]],elStyle:e.elStyle,renderProps:r,generatorName:"dayCellContent",customGenerator:i.dayCellContent,defaultGenerator:e.defaultGenerator,classNameGenerator:r.isDisabled?void 0:i.dayCellClassNames,didMount:i.dayCellDidMount,willUnmount:i.dayCellWillUnmount},e.children)}}function P0(t){return!!(t.dayCellContent||Ey("dayCellContent",t))}function UM(t){let{date:e,dateEnv:n,dateProfile:i,isMonthStart:r}=t,a=NC(e,t.todayRange,null,i),l=t.showDayNumber?n.format(e,r?t.monthStartFormat:FM):"";return Object.assign(Object.assign(Object.assign({date:n.toDate(e),view:t.viewApi},a),{isMonthStart:r,dayNumberText:l}),t.extraRenderProps)}class YC extends Xi{render(){let{props:e}=this,{seg:n}=e;return Fe(N0,{elTag:"div",elClasses:["fc-bg-event"],elStyle:{backgroundColor:n.eventRange.ui.backgroundColor},defaultGenerator:HM,seg:n,timeText:"",isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:!1,isPast:e.isPast,isFuture:e.isFuture,isToday:e.isToday,disableDragging:!0,disableResizing:!0})}}function HM(t){let{title:e}=t.event;return e&&Fe("div",{className:"fc-event-title"},t.event.title)}function ZC(t){return Fe("div",{className:`fc-${t}`})}const KC=t=>Fe(Cc.Consumer,null,e=>{let{dateEnv:n,options:i}=e,{date:r}=t,a=i.weekNumberFormat||t.defaultFormat,l=n.computeWeekNumber(r),d=n.format(r,a),p={num:l,text:d,date:r};return Fe(Xs,{elRef:t.elRef,elTag:t.elTag,elAttrs:t.elAttrs,elClasses:t.elClasses,elStyle:t.elStyle,renderProps:p,generatorName:"weekNumberContent",customGenerator:i.weekNumberContent,defaultGenerator:qM,classNameGenerator:i.weekNumberClassNames,didMount:i.weekNumberDidMount,willUnmount:i.weekNumberWillUnmount},t.children)});function qM(t){return t.text}const Gv=10;class WM extends Xi{constructor(){super(...arguments),this.state={titleId:wg()},this.handleRootEl=e=>{this.rootEl=e,this.props.elRef&&Gl(this.props.elRef,e)},this.handleDocumentMouseDown=e=>{const n=$S(e);this.rootEl.contains(n)||this.handleCloseClick()},this.handleDocumentKeyDown=e=>{e.key==="Escape"&&this.handleCloseClick()},this.handleCloseClick=()=>{let{onClose:e}=this.props;e&&e()}}render(){let{theme:e,options:n}=this.context,{props:i,state:r}=this,a=["fc-popover",e.getClass("popover")].concat(i.extraClassNames||[]);return CN(Fe("div",Object.assign({},i.extraAttrs,{id:i.id,className:a.join(" "),"aria-labelledby":r.titleId,ref:this.handleRootEl}),Fe("div",{className:"fc-popover-header "+e.getClass("popoverHeader")},Fe("span",{className:"fc-popover-title",id:r.titleId},i.title),Fe("span",{className:"fc-popover-close "+e.getIconClass("close"),title:n.closeHint,onClick:this.handleCloseClick})),Fe("div",{className:"fc-popover-body "+e.getClass("popoverContent")},i.children)),i.parentEl)}componentDidMount(){document.addEventListener("mousedown",this.handleDocumentMouseDown),document.addEventListener("keydown",this.handleDocumentKeyDown),this.updateSize()}componentWillUnmount(){document.removeEventListener("mousedown",this.handleDocumentMouseDown),document.removeEventListener("keydown",this.handleDocumentKeyDown)}updateSize(){let{isRtl:e}=this.context,{alignmentEl:n,alignGridTop:i}=this.props,{rootEl:r}=this,a=dM(n);if(a){let l=r.getBoundingClientRect(),d=i?Qo(n,".fc-scrollgrid").getBoundingClientRect().top:a.top,p=e?a.right-l.width:a.left;d=Math.max(d,Gv),p=Math.min(p,document.documentElement.clientWidth-Gv-l.width),p=Math.max(p,Gv);let g=r.offsetParent.getBoundingClientRect();Rf(r,{top:d-g.top,left:p-g.left})}}}class GM extends Ql{constructor(){super(...arguments),this.handleRootEl=e=>{this.rootEl=e,e?this.context.registerInteractiveComponent(this,{el:e,useEventCenter:!1}):this.context.unregisterInteractiveComponent(this)}}render(){let{options:e,dateEnv:n}=this.context,{props:i}=this,{startDate:r,todayRange:a,dateProfile:l}=i,d=n.format(r,e.dayPopoverFormat);return Fe(O0,{elRef:this.handleRootEl,date:r,dateProfile:l,todayRange:a},(p,g,m)=>Fe(WM,{elRef:m.ref,id:i.id,title:d,extraClassNames:["fc-more-popover"].concat(m.className||[]),extraAttrs:m,parentEl:i.parentEl,alignmentEl:i.alignmentEl,alignGridTop:i.alignGridTop,onClose:i.onClose},P0(e)&&Fe(p,{elTag:"div",elClasses:["fc-more-popover-misc"]}),i.children))}queryHit(e,n,i,r){let{rootEl:a,props:l}=this;return e>=0&&e<i&&n>=0&&n<r?{dateProfile:l.dateProfile,dateSpan:Object.assign({allDay:!l.forceTimed,range:{start:l.startDate,end:l.endDate}},l.extraDateSpan),dayEl:a,rect:{left:0,top:0,right:i,bottom:r},layer:1}:null}}class XC extends Xi{constructor(){super(...arguments),this.state={isPopoverOpen:!1,popoverId:wg()},this.handleLinkEl=e=>{this.linkEl=e,this.props.elRef&&Gl(this.props.elRef,e)},this.handleClick=e=>{let{props:n,context:i}=this,{moreLinkClick:r}=i.options,a=cw(n).start;function l(d){let{def:p,instance:g,range:m}=d.eventRange;return{event:new Hr(i,p,g),start:i.dateEnv.toDate(m.start),end:i.dateEnv.toDate(m.end),isStart:d.isStart,isEnd:d.isEnd}}typeof r=="function"&&(r=r({date:a,allDay:!!n.allDayDate,allSegs:n.allSegs.map(l),hiddenSegs:n.hiddenSegs.map(l),jsEvent:e,view:i.viewApi})),!r||r==="popover"?this.setState({isPopoverOpen:!0}):typeof r=="string"&&i.calendarApi.zoomTo(a,r)},this.handlePopoverClose=()=>{this.setState({isPopoverOpen:!1})}}render(){let{props:e,state:n}=this;return Fe(Cc.Consumer,null,i=>{let{viewApi:r,options:a,calendarApi:l}=i,{moreLinkText:d}=a,{moreCnt:p}=e,g=cw(e),m=typeof d=="function"?d.call(l,p):`+${p} ${d}`,_=Nf(a.moreLinkHint,[p],m),A={num:p,shortText:`+${p}`,text:m,view:r};return Fe(Cr,null,!!e.moreCnt&&Fe(Xs,{elTag:e.elTag||"a",elRef:this.handleLinkEl,elClasses:[...e.elClasses||[],"fc-more-link"],elStyle:e.elStyle,elAttrs:Object.assign(Object.assign(Object.assign({},e.elAttrs),eC(this.handleClick)),{title:_,"aria-expanded":n.isPopoverOpen,"aria-controls":n.isPopoverOpen?n.popoverId:""}),renderProps:A,generatorName:"moreLinkContent",customGenerator:a.moreLinkContent,defaultGenerator:e.defaultGenerator||VM,classNameGenerator:a.moreLinkClassNames,didMount:a.moreLinkDidMount,willUnmount:a.moreLinkWillUnmount},e.children),n.isPopoverOpen&&Fe(GM,{id:n.popoverId,startDate:g.start,endDate:g.end,dateProfile:e.dateProfile,todayRange:e.todayRange,extraDateSpan:e.extraDateSpan,parentEl:this.parentEl,alignmentEl:e.alignmentElRef?e.alignmentElRef.current:this.linkEl,alignGridTop:e.alignGridTop,forceTimed:e.forceTimed,onClose:this.handlePopoverClose},e.popoverContent()))})}componentDidMount(){this.updateParentEl()}componentDidUpdate(){this.updateParentEl()}updateParentEl(){this.linkEl&&(this.parentEl=Qo(this.linkEl,".fc-view-harness"))}}function VM(t){return t.text}function cw(t){if(t.allDayDate)return{start:t.allDayDate,end:Eo(t.allDayDate,1)};let{hiddenSegs:e}=t;return{start:QC(e),end:ZM(e)}}function QC(t){return t.reduce(YM).eventRange.range.start}function YM(t,e){return t.eventRange.range.start<e.eventRange.range.start?t:e}function ZM(t){return t.reduce(KM).eventRange.range.end}function KM(t,e){return t.eventRange.range.end>e.eventRange.range.end?t:e}class XM{constructor(){this.handlers=[]}set(e){this.currentValue=e;for(let n of this.handlers)n(e)}subscribe(e){this.handlers.push(e),this.currentValue!==void 0&&e(this.currentValue)}}class QM extends XM{constructor(){super(...arguments),this.map=new Map}handle(e){const{map:n}=this;let i=!1;e.isActive?(n.set(e.id,e),i=!0):n.has(e.id)&&(n.delete(e.id),i=!0),i&&this.set(n)}}const $M=[],$C={code:"en",week:{dow:0,doy:4},direction:"ltr",buttonText:{prev:"prev",next:"next",prevYear:"prev year",nextYear:"next year",year:"year",today:"today",month:"month",week:"week",day:"day",list:"list"},weekText:"W",weekTextLong:"Week",closeHint:"Close",timeHint:"Time",eventHint:"Event",allDayText:"all-day",moreLinkText:"more",noEventsText:"No events to display"},JC=Object.assign(Object.assign({},$C),{buttonHints:{prev:"Previous $0",next:"Next $0",today(t,e){return e==="day"?"Today":`This ${t}`}},viewHint:"$0 view",navLinkHint:"Go to $0",moreLinkHint(t){return`Show ${t} more event${t===1?"":"s"}`}});function JM(t){let e=t.length>0?t[0].code:"en",n=$M.concat(t),i={en:JC};for(let r of n)i[r.code]=r;return{map:i,defaultCode:e}}function eE(t,e){return typeof t=="object"&&!Array.isArray(t)?tE(t.code,[t.code],t):eO(t,e)}function eO(t,e){let n=[].concat(t||[]),i=tO(n,e)||JC;return tE(t,n,i)}function tO(t,e){for(let n=0;n<t.length;n+=1){let i=t[n].toLocaleLowerCase().split("-");for(let r=i.length;r>0;r-=1){let a=i.slice(0,r).join("-");if(e[a])return e[a]}}return null}function tE(t,e,n){let i=g0([$C,n],["buttonText"]);delete i.code;let{week:r}=i;return delete i.week,{codeArg:t,codes:e,week:r,simpleNumberFormat:new Intl.NumberFormat(t),options:i}}function Ec(t){return{id:Iu(),name:t.name,premiumReleaseDate:t.premiumReleaseDate?new Date(t.premiumReleaseDate):void 0,deps:t.deps||[],reducers:t.reducers||[],isLoadingFuncs:t.isLoadingFuncs||[],contextInit:[].concat(t.contextInit||[]),eventRefiners:t.eventRefiners||{},eventDefMemberAdders:t.eventDefMemberAdders||[],eventSourceRefiners:t.eventSourceRefiners||{},isDraggableTransformers:t.isDraggableTransformers||[],eventDragMutationMassagers:t.eventDragMutationMassagers||[],eventDefMutationAppliers:t.eventDefMutationAppliers||[],dateSelectionTransformers:t.dateSelectionTransformers||[],datePointTransforms:t.datePointTransforms||[],dateSpanTransforms:t.dateSpanTransforms||[],views:t.views||{},viewPropsTransformers:t.viewPropsTransformers||[],isPropsValid:t.isPropsValid||null,externalDefTransforms:t.externalDefTransforms||[],viewContainerAppends:t.viewContainerAppends||[],eventDropTransformers:t.eventDropTransformers||[],componentInteractions:t.componentInteractions||[],calendarInteractions:t.calendarInteractions||[],themeClasses:t.themeClasses||{},eventSourceDefs:t.eventSourceDefs||[],cmdFormatter:t.cmdFormatter,recurringTypes:t.recurringTypes||[],namedTimeZonedImpl:t.namedTimeZonedImpl,initialView:t.initialView||"",elementDraggingImpl:t.elementDraggingImpl,optionChangeHandlers:t.optionChangeHandlers||{},scrollGridImpl:t.scrollGridImpl||null,listenerRefiners:t.listenerRefiners||{},optionRefiners:t.optionRefiners||{},propSetHandlers:t.propSetHandlers||{}}}function nO(t,e){let n={},i={premiumReleaseDate:void 0,reducers:[],isLoadingFuncs:[],contextInit:[],eventRefiners:{},eventDefMemberAdders:[],eventSourceRefiners:{},isDraggableTransformers:[],eventDragMutationMassagers:[],eventDefMutationAppliers:[],dateSelectionTransformers:[],datePointTransforms:[],dateSpanTransforms:[],views:{},viewPropsTransformers:[],isPropsValid:null,externalDefTransforms:[],viewContainerAppends:[],eventDropTransformers:[],componentInteractions:[],calendarInteractions:[],themeClasses:{},eventSourceDefs:[],cmdFormatter:null,recurringTypes:[],namedTimeZonedImpl:null,initialView:"",elementDraggingImpl:null,optionChangeHandlers:{},scrollGridImpl:null,listenerRefiners:{},optionRefiners:{},propSetHandlers:{}};function r(a){for(let l of a){const d=l.name,p=n[d];p===void 0?(n[d]=l.id,r(l.deps),i=rO(i,l)):p!==l.id&&console.warn(`Duplicate plugin '${d}'`)}}return t&&r(t),r(e),i}function iO(){let t=[],e=[],n;return(i,r)=>((!n||!iu(i,t)||!iu(r,e))&&(n=nO(i,r)),t=i,e=r,n)}function rO(t,e){return{premiumReleaseDate:aO(t.premiumReleaseDate,e.premiumReleaseDate),reducers:t.reducers.concat(e.reducers),isLoadingFuncs:t.isLoadingFuncs.concat(e.isLoadingFuncs),contextInit:t.contextInit.concat(e.contextInit),eventRefiners:Object.assign(Object.assign({},t.eventRefiners),e.eventRefiners),eventDefMemberAdders:t.eventDefMemberAdders.concat(e.eventDefMemberAdders),eventSourceRefiners:Object.assign(Object.assign({},t.eventSourceRefiners),e.eventSourceRefiners),isDraggableTransformers:t.isDraggableTransformers.concat(e.isDraggableTransformers),eventDragMutationMassagers:t.eventDragMutationMassagers.concat(e.eventDragMutationMassagers),eventDefMutationAppliers:t.eventDefMutationAppliers.concat(e.eventDefMutationAppliers),dateSelectionTransformers:t.dateSelectionTransformers.concat(e.dateSelectionTransformers),datePointTransforms:t.datePointTransforms.concat(e.datePointTransforms),dateSpanTransforms:t.dateSpanTransforms.concat(e.dateSpanTransforms),views:Object.assign(Object.assign({},t.views),e.views),viewPropsTransformers:t.viewPropsTransformers.concat(e.viewPropsTransformers),isPropsValid:e.isPropsValid||t.isPropsValid,externalDefTransforms:t.externalDefTransforms.concat(e.externalDefTransforms),viewContainerAppends:t.viewContainerAppends.concat(e.viewContainerAppends),eventDropTransformers:t.eventDropTransformers.concat(e.eventDropTransformers),calendarInteractions:t.calendarInteractions.concat(e.calendarInteractions),componentInteractions:t.componentInteractions.concat(e.componentInteractions),themeClasses:Object.assign(Object.assign({},t.themeClasses),e.themeClasses),eventSourceDefs:t.eventSourceDefs.concat(e.eventSourceDefs),cmdFormatter:e.cmdFormatter||t.cmdFormatter,recurringTypes:t.recurringTypes.concat(e.recurringTypes),namedTimeZonedImpl:e.namedTimeZonedImpl||t.namedTimeZonedImpl,initialView:t.initialView||e.initialView,elementDraggingImpl:t.elementDraggingImpl||e.elementDraggingImpl,optionChangeHandlers:Object.assign(Object.assign({},t.optionChangeHandlers),e.optionChangeHandlers),scrollGridImpl:e.scrollGridImpl||t.scrollGridImpl,listenerRefiners:Object.assign(Object.assign({},t.listenerRefiners),e.listenerRefiners),optionRefiners:Object.assign(Object.assign({},t.optionRefiners),e.optionRefiners),propSetHandlers:Object.assign(Object.assign({},t.propSetHandlers),e.propSetHandlers)}}function aO(t,e){return t===void 0?e:e===void 0?t:new Date(Math.max(t.valueOf(),e.valueOf()))}class au extends th{}au.prototype.classes={root:"fc-theme-standard",tableCellShaded:"fc-cell-shaded",buttonGroup:"fc-button-group",button:"fc-button fc-button-primary",buttonActive:"fc-button-active"};au.prototype.baseIconClass="fc-icon";au.prototype.iconClasses={close:"fc-icon-x",prev:"fc-icon-chevron-left",next:"fc-icon-chevron-right",prevYear:"fc-icon-chevrons-left",nextYear:"fc-icon-chevrons-right"};au.prototype.rtlIconClasses={prev:"fc-icon-chevron-right",next:"fc-icon-chevron-left",prevYear:"fc-icon-chevrons-right",nextYear:"fc-icon-chevrons-left"};au.prototype.iconOverrideOption="buttonIcons";au.prototype.iconOverrideCustomButtonOption="icon";au.prototype.iconOverridePrefix="fc-icon-";function oO(t,e){let n={},i;for(i in t)Ny(i,n,t,e);for(i in e)Ny(i,n,t,e);return n}function Ny(t,e,n,i){if(e[t])return e[t];let r=sO(t,e,n,i);return r&&(e[t]=r),r}function sO(t,e,n,i){let r=n[t],a=i[t],l=m=>r&&r[m]!==null?r[m]:a&&a[m]!==null?a[m]:null,d=l("component"),p=l("superType"),g=null;if(p){if(p===t)throw new Error("Can't have a custom view type that references itself");g=Ny(p,e,n,i)}return!d&&g&&(d=g.component),d?{type:t,component:d,defaults:Object.assign(Object.assign({},g?g.defaults:{}),r?r.rawOptions:{}),overrides:Object.assign(Object.assign({},g?g.overrides:{}),a?a.rawOptions:{})}:null}function uw(t){return Sc(t,lO)}function lO(t){let e=typeof t=="function"?{component:t}:t,{component:n}=e;return e.content?n=dw(e):n&&!(n.prototype instanceof Xi)&&(n=dw(Object.assign(Object.assign({},e),{content:n}))),{superType:e.type,component:n,rawOptions:e}}function dw(t){return e=>Fe(Cc.Consumer,null,n=>Fe(Xs,{elTag:"div",elClasses:cC(n.viewSpec),renderProps:Object.assign(Object.assign({},e),{nextDayThreshold:n.options.nextDayThreshold}),generatorName:void 0,customGenerator:t.content,classNameGenerator:t.classNames,didMount:t.didMount,willUnmount:t.willUnmount}))}function cO(t,e,n,i){let r=uw(t),a=uw(e.views),l=oO(r,a);return Sc(l,d=>uO(d,a,e,n,i))}function uO(t,e,n,i,r){let a=t.overrides.duration||t.defaults.duration||i.duration||n.duration,l=null,d="",p="",g={};if(a&&(l=dO(a),l)){let A=Cy(l);d=A.unit,A.value===1&&(p=d,g=e[d]?e[d].rawOptions:{})}let m=A=>{let x=A.buttonText||{},R=t.defaults.buttonTextKey;return R!=null&&x[R]!=null?x[R]:x[t.type]!=null?x[t.type]:x[p]!=null?x[p]:null},_=A=>{let x=A.buttonHints||{},R=t.defaults.buttonTextKey;return R!=null&&x[R]!=null?x[R]:x[t.type]!=null?x[t.type]:x[p]!=null?x[p]:null};return{type:t.type,component:t.component,duration:l,durationUnit:d,singleUnit:p,optionDefaults:t.defaults,optionOverrides:Object.assign(Object.assign({},g),t.overrides),buttonTextOverride:m(i)||m(n)||t.overrides.buttonText,buttonTextDefault:m(r)||t.defaults.buttonText||m(Df)||t.type,buttonTitleOverride:_(i)||_(n)||t.overrides.buttonHint,buttonTitleDefault:_(r)||t.defaults.buttonHint||_(Df)}}let fw={};function dO(t){let e=JSON.stringify(t),n=fw[e];return n===void 0&&(n=Ei(t),fw[e]=n),n}function fO(t,e){return e.type==="CHANGE_VIEW_TYPE"&&(t=e.viewType),t}function hO(t,e){return e.type==="CHANGE_DATE"?e.dateMarker:t}function pO(t,e,n){let i=t.initialDate;return i!=null?e.createMarker(i):n.getDateMarker()}function gO(t,e){return e.type==="SET_OPTION"?Object.assign(Object.assign({},t),{[e.optionName]:e.rawOptionValue}):t}function mO(t,e,n,i){let r;switch(e.type){case"CHANGE_VIEW_TYPE":return i.build(e.dateMarker||n);case"CHANGE_DATE":return i.build(e.dateMarker);case"PREV":if(r=i.buildPrev(t,n),r.isValid)return r;break;case"NEXT":if(r=i.buildNext(t,n),r.isValid)return r;break}return t}function vO(t,e,n){let i=e?e.activeRange:null;return iE({},CO(t,n),i,n)}function yO(t,e,n,i){let r=n?n.activeRange:null;switch(e.type){case"ADD_EVENT_SOURCES":return iE(t,e.sources,r,i);case"REMOVE_EVENT_SOURCE":return bO(t,e.sourceId);case"PREV":case"NEXT":case"CHANGE_DATE":case"CHANGE_VIEW_TYPE":return n?rE(t,r,i):t;case"FETCH_EVENT_SOURCES":return I0(t,e.sourceIds?rC(e.sourceIds):aE(t,i),r,e.isRefetch||!1,i);case"RECEIVE_EVENTS":case"RECEIVE_EVENT_ERROR":return SO(t,e.sourceId,e.fetchId,e.fetchRange);case"REMOVE_ALL_EVENT_SOURCES":return{};default:return t}}function xO(t,e,n){let i=e?e.activeRange:null;return I0(t,aE(t,n),i,!0,n)}function nE(t){for(let e in t)if(t[e].isFetching)return!0;return!1}function iE(t,e,n,i){let r={};for(let a of e)r[a.sourceId]=a;return n&&(r=rE(r,n,i)),Object.assign(Object.assign({},t),r)}function bO(t,e){return Ru(t,n=>n.sourceId!==e)}function rE(t,e,n){return I0(t,Ru(t,i=>_O(i,e,n)),e,!1,n)}function _O(t,e,n){return oE(t,n)?!n.options.lazyFetching||!t.fetchRange||t.isFetching||e.start<t.fetchRange.start||e.end>t.fetchRange.end:!t.latestFetchId}function I0(t,e,n,i,r){let a={};for(let l in t){let d=t[l];e[l]?a[l]=wO(d,n,i,r):a[l]=d}return a}function wO(t,e,n,i){let{options:r,calendarApi:a}=i,l=i.pluginHooks.eventSourceDefs[t.sourceDefId],d=Iu();return l.fetch({eventSource:t,range:e,isRefetch:n,context:i},p=>{let{rawEvents:g}=p;r.eventSourceSuccess&&(g=r.eventSourceSuccess.call(a,g,p.response)||g),t.success&&(g=t.success.call(a,g,p.response)||g),i.dispatch({type:"RECEIVE_EVENTS",sourceId:t.sourceId,fetchId:d,fetchRange:e,rawEvents:g})},p=>{let g=!1;r.eventSourceFailure&&(r.eventSourceFailure.call(a,p),g=!0),t.failure&&(t.failure(p),g=!0),g||console.warn(p.message,p),i.dispatch({type:"RECEIVE_EVENT_ERROR",sourceId:t.sourceId,fetchId:d,fetchRange:e,error:p})}),Object.assign(Object.assign({},t),{isFetching:!0,latestFetchId:d})}function SO(t,e,n,i){let r=t[e];return r&&n===r.latestFetchId?Object.assign(Object.assign({},t),{[e]:Object.assign(Object.assign({},r),{isFetching:!1,fetchRange:i})}):t}function aE(t,e){return Ru(t,n=>oE(n,e))}function CO(t,e){let n=yC(e),i=[].concat(t.eventSources||[]),r=[];t.initialEvents&&i.unshift(t.initialEvents),t.events&&i.unshift(t.events);for(let a of i){let l=vC(a,e,n);l&&r.push(l)}return r}function oE(t,e){return!e.pluginHooks.eventSourceDefs[t.sourceDefId].ignoreRange}function EO(t,e){switch(e.type){case"UNSELECT_DATES":return null;case"SELECT_DATES":return e.selection;default:return t}}function AO(t,e){switch(e.type){case"UNSELECT_EVENT":return"";case"SELECT_EVENT":return e.eventInstanceId;default:return t}}function LO(t,e){let n;switch(e.type){case"UNSET_EVENT_DRAG":return null;case"SET_EVENT_DRAG":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function TO(t,e){let n;switch(e.type){case"UNSET_EVENT_RESIZE":return null;case"SET_EVENT_RESIZE":return n=e.state,{affectedEvents:n.affectedEvents,mutatedEvents:n.mutatedEvents,isEvent:n.isEvent};default:return t}}function jO(t,e,n,i,r){let a=t.headerToolbar?hw(t.headerToolbar,t,e,n,i,r):null,l=t.footerToolbar?hw(t.footerToolbar,t,e,n,i,r):null;return{header:a,footer:l}}function hw(t,e,n,i,r,a){let l={},d=[],p=!1;for(let g in t){let m=t[g],_=kO(m,e,n,i,r,a);l[g]=_.widgets,d.push(..._.viewsWithButtons),p=p||_.hasTitle}return{sectionWidgets:l,viewsWithButtons:d,hasTitle:p}}function kO(t,e,n,i,r,a){let l=e.direction==="rtl",d=e.customButtons||{},p=n.buttonText||{},g=e.buttonText||{},m=n.buttonHints||{},_=e.buttonHints||{},A=t?t.split(" "):[],x=[],R=!1;return{widgets:A.map(k=>k.split(",").map(I=>{if(I==="title")return R=!0,{buttonName:I};let Y,B,V,ee,ue,_e;if(Y=d[I])V=fe=>{Y.click&&Y.click.call(fe.target,fe,fe.target)},(ee=i.getCustomButtonIconClass(Y))||(ee=i.getIconClass(I,l))||(ue=Y.text),_e=Y.hint||Y.text;else if(B=r[I]){x.push(I),V=()=>{a.changeView(I)},(ue=B.buttonTextOverride)||(ee=i.getIconClass(I,l))||(ue=B.buttonTextDefault);let fe=B.buttonTextOverride||B.buttonTextDefault;_e=Nf(B.buttonTitleOverride||B.buttonTitleDefault||e.viewHint,[fe,I],fe)}else if(a[I])if(V=()=>{a[I]()},(ue=p[I])||(ee=i.getIconClass(I,l))||(ue=g[I]),I==="prevYear"||I==="nextYear"){let fe=I==="prevYear"?"prev":"next";_e=Nf(m[fe]||_[fe],[g.year||"year","year"],g[I])}else _e=fe=>Nf(m[I]||_[I],[g[fe]||fe,fe],g[I]);return{buttonName:I,buttonClick:V,buttonIcon:ee,buttonText:ue,buttonHint:_e}})),viewsWithButtons:x,hasTitle:R}}class RO{constructor(e,n,i){this.type=e,this.getCurrentData=n,this.dateEnv=i}get calendar(){return this.getCurrentData().calendarApi}get title(){return this.getCurrentData().viewTitle}get activeStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.start)}get activeEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.activeRange.end)}get currentStart(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.start)}get currentEnd(){return this.dateEnv.toDate(this.getCurrentData().dateProfile.currentRange.end)}getOption(e){return this.getCurrentData().options[e]}}let NO={ignoreRange:!0,parseMeta(t){return Array.isArray(t.events)?t.events:null},fetch(t,e){e({rawEvents:t.eventSource.meta})}};const DO=Ec({name:"array-event-source",eventSourceDefs:[NO]});let MO={parseMeta(t){return typeof t.events=="function"?t.events:null},fetch(t,e,n){const{dateEnv:i}=t.context,r=t.eventSource.meta;W8(r.bind(null,TC(t.range,i)),a=>e({rawEvents:a}),n)}};const OO=Ec({name:"func-event-source",eventSourceDefs:[MO]}),PO={method:String,extraParams:lt,startParam:String,endParam:String,timeZoneParam:String};let IO={parseMeta(t){return t.url&&(t.format==="json"||!t.format)?{url:t.url,format:"json",method:(t.method||"GET").toUpperCase(),extraParams:t.extraParams,startParam:t.startParam,endParam:t.endParam,timeZoneParam:t.timeZoneParam}:null},fetch(t,e,n){const{meta:i}=t.eventSource,r=BO(i,t.range,t.context);G8(i.method,i.url,r).then(([a,l])=>{e({rawEvents:a,response:l})},n)}};const zO=Ec({name:"json-event-source",eventSourceRefiners:PO,eventSourceDefs:[IO]});function BO(t,e,n){let{dateEnv:i,options:r}=n,a,l,d,p,g={};return a=t.startParam,a==null&&(a=r.startParam),l=t.endParam,l==null&&(l=r.endParam),d=t.timeZoneParam,d==null&&(d=r.timeZoneParam),typeof t.extraParams=="function"?p=t.extraParams():p=t.extraParams||{},Object.assign(g,p),g[a]=i.formatIso(e.start),g[l]=i.formatIso(e.end),i.timeZone!=="local"&&(g[d]=i.timeZone),g}const FO={daysOfWeek:lt,startTime:Ei,endTime:Ei,duration:Ei,startRecur:lt,endRecur:lt};let UO={parse(t,e){if(t.daysOfWeek||t.startTime||t.endTime||t.startRecur||t.endRecur){let n={daysOfWeek:t.daysOfWeek||null,startTime:t.startTime||null,endTime:t.endTime||null,startRecur:t.startRecur?e.createMarker(t.startRecur):null,endRecur:t.endRecur?e.createMarker(t.endRecur):null,dateEnv:e},i;return t.duration&&(i=t.duration),!i&&t.startTime&&t.endTime&&(i=nD(t.endTime,t.startTime)),{allDayGuess:!t.startTime&&!t.endTime,duration:i,typeData:n}}return null},expand(t,e,n){let i=Nu(e,{start:t.startRecur,end:t.endRecur});return i?qO(t.daysOfWeek,t.startTime,t.dateEnv,n,i):[]}};const HO=Ec({name:"simple-recurring-event",recurringTypes:[UO],eventRefiners:FO});function qO(t,e,n,i,r){let a=t?rC(t):null,l=Er(r.start),d=r.end,p=[];for(e&&(e.milliseconds<0?d=Eo(d,1):e.milliseconds>=1e3*60*60*24&&(l=Eo(l,-1)));l<d;){let g;(!a||a[l.getUTCDay()])&&(e?g=i.add(l,e):g=l,p.push(i.createMarker(n.toDate(g)))),l=Eo(l,1)}return p}const WO=Ec({name:"change-handler",optionChangeHandlers:{events(t,e){pw([t],e)},eventSources:pw}});function pw(t,e){let n=m0(e.getCurrentData().eventSources);if(n.length===1&&t.length===1&&Array.isArray(n[0]._raw)&&Array.isArray(t[0])){e.dispatch({type:"RESET_RAW_EVENTS",sourceId:n[0].sourceId,rawEvents:t[0]});return}let i=[];for(let r of t){let a=!1;for(let l=0;l<n.length;l+=1)if(n[l]._raw===r){n.splice(l,1),a=!0;break}a||i.push(r)}for(let r of n)e.dispatch({type:"REMOVE_EVENT_SOURCE",sourceId:r.sourceId});for(let r of i)e.calendarApi.addEventSource(r)}function GO(t,e){e.emitter.trigger("datesSet",Object.assign(Object.assign({},TC(t.activeRange,e.dateEnv)),{view:e.viewApi}))}function VO(t,e){let{emitter:n}=e;n.hasHandlers("eventsSet")&&n.trigger("eventsSet",Au(t,e))}const YO=[DO,OO,zO,HO,WO,Ec({name:"misc",isLoadingFuncs:[t=>nE(t.eventSources)],propSetHandlers:{dateProfile:GO,eventStore:VO}})];class ZO{constructor(e,n){this.runTaskOption=e,this.drainedOption=n,this.queue=[],this.delayedRunner=new s0(this.drain.bind(this))}request(e,n){this.queue.push(e),this.delayedRunner.request(n)}pause(e){this.delayedRunner.pause(e)}resume(e,n){this.delayedRunner.resume(e,n)}drain(){let{queue:e}=this;for(;e.length;){let n=[],i;for(;i=e.shift();)this.runTask(i),n.push(i);this.drained(n)}}runTask(e){this.runTaskOption&&this.runTaskOption(e)}drained(e){this.drainedOption&&this.drainedOption(e)}}function KO(t,e,n){let i;return/^(year|month)$/.test(t.currentRangeUnit)?i=t.currentRange:i=t.activeRange,n.formatRange(i.start,i.end,na(e.titleFormat||XO(t)),{isEndExclusive:t.isRangeAllDay,defaultSeparator:e.titleRangeSeparator})}function XO(t){let{currentRangeUnit:e}=t;if(e==="year")return{year:"numeric"};if(e==="month")return{year:"numeric",month:"long"};let n=Zp(t.currentRange.start,t.currentRange.end);return n!==null&&n>1?{year:"numeric",month:"short",day:"numeric"}:{year:"numeric",month:"long",day:"numeric"}}class gw{constructor(){this.resetListeners=new Set}handleInput(e,n){const i=this.dateEnv;if(e!==i&&(typeof n=="function"?this.nowFn=n:i||(this.nowAnchorDate=e.toDate(n?e.createMarker(n):e.createNowMarker()),this.nowAnchorQueried=Date.now()),this.dateEnv=e,i))for(const r of this.resetListeners.values())r()}getDateMarker(){return this.nowAnchorDate?this.dateEnv.timestampToMarker(this.nowAnchorDate.valueOf()+(Date.now()-this.nowAnchorQueried)):this.dateEnv.createMarker(this.nowFn())}addResetListener(e){this.resetListeners.add(e)}removeResetListener(e){this.resetListeners.delete(e)}}class QO{constructor(e){this.computeCurrentViewData=Nn(this._computeCurrentViewData),this.organizeRawLocales=Nn(JM),this.buildLocale=Nn(eE),this.buildPluginHooks=iO(),this.buildDateEnv=Nn($O),this.buildTheme=Nn(JO),this.parseToolbars=Nn(jO),this.buildViewSpecs=Nn(cO),this.buildDateProfileGenerator=kp(eP),this.buildViewApi=Nn(tP),this.buildViewUiProps=kp(rP),this.buildEventUiBySource=Nn(nP,xl),this.buildEventUiBases=Nn(iP),this.parseContextBusinessHours=kp(aP),this.buildTitle=Nn(KO),this.nowManager=new gw,this.emitter=new Ag,this.actionRunner=new ZO(this._handleAction.bind(this),this.updateData.bind(this)),this.currentCalendarOptionsInput={},this.currentCalendarOptionsRefined={},this.currentViewOptionsInput={},this.currentViewOptionsRefined={},this.currentCalendarOptionsRefiners={},this.optionsForRefining=[],this.optionsForHandling=[],this.getCurrentData=()=>this.data,this.dispatch=A=>{this.actionRunner.request(A)},this.props=e,this.actionRunner.pause(),this.nowManager=new gw;let n={},i=this.computeOptionsData(e.optionOverrides,n,e.calendarApi),r=i.calendarOptions.initialView||i.pluginHooks.initialView,a=this.computeCurrentViewData(r,i,e.optionOverrides,n);e.calendarApi.currentDataManager=this,this.emitter.setThisContext(e.calendarApi),this.emitter.setOptions(a.options);let l={nowManager:this.nowManager,dateEnv:i.dateEnv,options:i.calendarOptions,pluginHooks:i.pluginHooks,calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},d=pO(i.calendarOptions,i.dateEnv,this.nowManager),p=a.dateProfileGenerator.build(d);bc(p.activeRange,d)||(d=p.currentRange.start);for(let A of i.pluginHooks.contextInit)A(l);let g=vO(i.calendarOptions,p,l),m={dynamicOptionOverrides:n,currentViewType:r,currentDate:d,dateProfile:p,businessHours:this.parseContextBusinessHours(l),eventSources:g,eventUiBases:{},eventStore:Zs(),renderableEventStore:Zs(),dateSelection:null,eventSelection:"",eventDrag:null,eventResize:null,selectionConfig:this.buildViewUiProps(l).selectionConfig},_=Object.assign(Object.assign({},l),m);for(let A of i.pluginHooks.reducers)Object.assign(m,A(null,null,_));Vv(m,l)&&this.emitter.trigger("loading",!0),this.state=m,this.updateData(),this.actionRunner.resume()}resetOptions(e,n){let{props:i}=this;n===void 0?i.optionOverrides=e:(i.optionOverrides=Object.assign(Object.assign({},i.optionOverrides||{}),e),this.optionsForRefining.push(...n)),(n===void 0||n.length)&&this.actionRunner.request({type:"NOTHING"})}_handleAction(e){let{props:n,state:i,emitter:r}=this,a=gO(i.dynamicOptionOverrides,e),l=this.computeOptionsData(n.optionOverrides,a,n.calendarApi),d=fO(i.currentViewType,e),p=this.computeCurrentViewData(d,l,n.optionOverrides,a);n.calendarApi.currentDataManager=this,r.setThisContext(n.calendarApi),r.setOptions(p.options);let g={nowManager:this.nowManager,dateEnv:l.dateEnv,options:l.calendarOptions,pluginHooks:l.pluginHooks,calendarApi:n.calendarApi,dispatch:this.dispatch,emitter:r,getCurrentData:this.getCurrentData},{currentDate:m,dateProfile:_}=i;this.data&&this.data.dateProfileGenerator!==p.dateProfileGenerator&&(_=p.dateProfileGenerator.build(m)),m=hO(m,e),_=mO(_,e,m,p.dateProfileGenerator),(e.type==="PREV"||e.type==="NEXT"||!bc(_.currentRange,m))&&(m=_.currentRange.start);let A=yO(i.eventSources,e,_,g),x=v8(i.eventStore,e,A,_,g),M=nE(A)&&!p.options.progressiveEventRendering&&i.renderableEventStore||x,{eventUiSingleBase:k,selectionConfig:I}=this.buildViewUiProps(g),Y=this.buildEventUiBySource(A),B=this.buildEventUiBases(M.defs,k,Y),V={dynamicOptionOverrides:a,currentViewType:d,currentDate:m,dateProfile:_,eventSources:A,eventStore:x,renderableEventStore:M,selectionConfig:I,eventUiBases:B,businessHours:this.parseContextBusinessHours(g),dateSelection:EO(i.dateSelection,e),eventSelection:AO(i.eventSelection,e),eventDrag:LO(i.eventDrag,e),eventResize:TO(i.eventResize,e)},ee=Object.assign(Object.assign({},g),V);for(let fe of l.pluginHooks.reducers)Object.assign(V,fe(i,e,ee));let ue=Vv(i,g),_e=Vv(V,g);!ue&&_e?r.trigger("loading",!0):ue&&!_e&&r.trigger("loading",!1),this.state=V,n.onAction&&n.onAction(e)}updateData(){let{props:e,state:n}=this,i=this.data,r=this.computeOptionsData(e.optionOverrides,n.dynamicOptionOverrides,e.calendarApi),a=this.computeCurrentViewData(n.currentViewType,r,e.optionOverrides,n.dynamicOptionOverrides),l=this.data=Object.assign(Object.assign(Object.assign({nowManager:this.nowManager,viewTitle:this.buildTitle(n.dateProfile,a.options,r.dateEnv),calendarApi:e.calendarApi,dispatch:this.dispatch,emitter:this.emitter,getCurrentData:this.getCurrentData},r),a),n),d=r.pluginHooks.optionChangeHandlers,p=i&&i.calendarOptions,g=r.calendarOptions;if(p&&p!==g){p.timeZone!==g.timeZone&&(n.eventSources=l.eventSources=xO(l.eventSources,n.dateProfile,l),n.eventStore=l.eventStore=rw(l.eventStore,i.dateEnv,l.dateEnv),n.renderableEventStore=l.renderableEventStore=rw(l.renderableEventStore,i.dateEnv,l.dateEnv));for(let m in d)(this.optionsForHandling.indexOf(m)!==-1||p[m]!==g[m])&&d[m](g[m],l)}this.optionsForHandling=[],e.onData&&e.onData(l)}computeOptionsData(e,n,i){if(!this.optionsForRefining.length&&e===this.stableOptionOverrides&&n===this.stableDynamicOptionOverrides)return this.stableCalendarOptionsData;let{refinedOptions:r,pluginHooks:a,localeDefaults:l,availableLocaleData:d,extra:p}=this.processRawCalendarOptions(e,n);mw(p);let g=this.buildDateEnv(r.timeZone,r.locale,r.weekNumberCalculation,r.firstDay,r.weekText,a,d,r.defaultRangeSeparator),m=this.buildViewSpecs(a.views,this.stableOptionOverrides,this.stableDynamicOptionOverrides,l),_=this.buildTheme(r,a),A=this.parseToolbars(r,this.stableOptionOverrides,_,m,i);return this.stableCalendarOptionsData={calendarOptions:r,pluginHooks:a,dateEnv:g,viewSpecs:m,theme:_,toolbarConfig:A,localeDefaults:l,availableRawLocales:d.map}}processRawCalendarOptions(e,n){let{locales:i,locale:r}=Iv([Df,e,n]),a=this.organizeRawLocales(i),l=a.map,d=this.buildLocale(r||a.defaultCode,l).options,p=this.buildPluginHooks(e.plugins||[],YO),g=this.currentCalendarOptionsRefiners=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$2),J2),ew),p.listenerRefiners),p.optionRefiners),m={},_=Iv([Df,d,e,n]),A={},x=this.currentCalendarOptionsInput,R=this.currentCalendarOptionsRefined,M=!1;for(let k in _)this.optionsForRefining.indexOf(k)===-1&&(_[k]===x[k]||vu[k]&&k in x&&vu[k](x[k],_[k]))?A[k]=R[k]:g[k]?(A[k]=g[k](_[k]),M=!0):m[k]=x[k];return M&&(this.currentCalendarOptionsInput=_,this.currentCalendarOptionsRefined=A,this.stableOptionOverrides=e,this.stableDynamicOptionOverrides=n),this.optionsForHandling.push(...this.optionsForRefining),this.optionsForRefining=[],{rawOptions:this.currentCalendarOptionsInput,refinedOptions:this.currentCalendarOptionsRefined,pluginHooks:p,availableLocaleData:a,localeDefaults:d,extra:m}}_computeCurrentViewData(e,n,i,r){let a=n.viewSpecs[e];if(!a)throw new Error(`viewType "${e}" is not available. Please make sure you've loaded all neccessary plugins`);let{refinedOptions:l,extra:d}=this.processRawViewOptions(a,n.pluginHooks,n.localeDefaults,i,r);mw(d),this.nowManager.handleInput(n.dateEnv,l.now);let p=this.buildDateProfileGenerator({dateProfileGeneratorClass:a.optionDefaults.dateProfileGeneratorClass,nowManager:this.nowManager,duration:a.duration,durationUnit:a.durationUnit,usesMinMaxTime:a.optionDefaults.usesMinMaxTime,dateEnv:n.dateEnv,calendarApi:this.props.calendarApi,slotMinTime:l.slotMinTime,slotMaxTime:l.slotMaxTime,showNonCurrentDates:l.showNonCurrentDates,dayCount:l.dayCount,dateAlignment:l.dateAlignment,dateIncrement:l.dateIncrement,hiddenDays:l.hiddenDays,weekends:l.weekends,validRangeInput:l.validRange,visibleRangeInput:l.visibleRange,fixedWeekCount:l.fixedWeekCount}),g=this.buildViewApi(e,this.getCurrentData,n.dateEnv);return{viewSpec:a,options:l,dateProfileGenerator:p,viewApi:g}}processRawViewOptions(e,n,i,r,a){let l=Iv([Df,e.optionDefaults,i,r,e.optionOverrides,a]),d=Object.assign(Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},$2),J2),ew),OD),n.listenerRefiners),n.optionRefiners),p={},g=this.currentViewOptionsInput,m=this.currentViewOptionsRefined,_=!1,A={};for(let x in l)l[x]===g[x]||vu[x]&&vu[x](l[x],g[x])?p[x]=m[x]:(l[x]===this.currentCalendarOptionsInput[x]||vu[x]&&vu[x](l[x],this.currentCalendarOptionsInput[x])?x in this.currentCalendarOptionsRefined&&(p[x]=this.currentCalendarOptionsRefined[x]):d[x]?p[x]=d[x](l[x]):A[x]=l[x],_=!0);return _&&(this.currentViewOptionsInput=l,this.currentViewOptionsRefined=p),{rawOptions:this.currentViewOptionsInput,refinedOptions:this.currentViewOptionsRefined,extra:A}}}function $O(t,e,n,i,r,a,l,d){let p=eE(e||l.defaultCode,l.map);return new VD({calendarSystem:"gregory",timeZone:t,namedTimeZoneImpl:a.namedTimeZonedImpl,locale:p,weekNumberCalculation:n,firstDay:i,weekText:r,cmdFormatter:a.cmdFormatter,defaultSeparator:d})}function JO(t,e){let n=e.themeClasses[t.themeSystem]||au;return new n(t)}function eP(t){let e=t.dateProfileGeneratorClass||fC;return new e(t)}function tP(t,e,n){return new RO(t,e,n)}function nP(t){return Sc(t,e=>e.ui)}function iP(t,e,n){let i={"":e};for(let r in t){let a=t[r];a.sourceId&&n[a.sourceId]&&(i[r]=n[a.sourceId])}return i}function rP(t){let{options:e}=t;return{eventUiSingleBase:tg({display:e.eventDisplay,editable:e.editable,startEditable:e.eventStartEditable,durationEditable:e.eventDurationEditable,constraint:e.eventConstraint,overlap:typeof e.eventOverlap=="boolean"?e.eventOverlap:void 0,allow:e.eventAllow,backgroundColor:e.eventBackgroundColor,borderColor:e.eventBorderColor,textColor:e.eventTextColor,color:e.eventColor},t),selectionConfig:tg({constraint:e.selectConstraint,overlap:typeof e.selectOverlap=="boolean"?e.selectOverlap:void 0,allow:e.selectAllow},t)}}function Vv(t,e){for(let n of e.pluginHooks.isLoadingFuncs)if(n(t))return!0;return!1}function aP(t){return A8(t.options.businessHours,t)}function mw(t,e){for(let n in t)console.warn(`Unknown option '${n}'`)}class oP extends Xi{render(){let e=this.props.widgetGroups.map(n=>this.renderWidgetGroup(n));return Fe("div",{className:"fc-toolbar-chunk"},...e)}renderWidgetGroup(e){let{props:n}=this,{theme:i}=this.context,r=[],a=!0;for(let l of e){let{buttonName:d,buttonClick:p,buttonText:g,buttonIcon:m,buttonHint:_}=l;if(d==="title")a=!1,r.push(Fe("h2",{className:"fc-toolbar-title",id:n.titleId},n.title));else{let A=d===n.activeButton,x=!n.isTodayEnabled&&d==="today"||!n.isPrevEnabled&&d==="prev"||!n.isNextEnabled&&d==="next",R=[`fc-${d}-button`,i.getClass("button")];A&&R.push(i.getClass("buttonActive")),r.push(Fe("button",{type:"button",title:typeof _=="function"?_(n.navUnit):_,disabled:x,"aria-pressed":A,className:R.join(" "),onClick:p},g||(m?Fe("span",{className:m,role:"img"}):"")))}}if(r.length>1){let l=a&&i.getClass("buttonGroup")||"";return Fe("div",{className:l},...r)}return r[0]}}class vw extends Xi{render(){let{model:e,extraClassName:n}=this.props,i=!1,r,a,l=e.sectionWidgets,d=l.center;return l.left?(i=!0,r=l.left):r=l.start,l.right?(i=!0,a=l.right):a=l.end,Fe("div",{className:[n||"","fc-toolbar",i?"fc-toolbar-ltr":""].join(" ")},this.renderSection("start",r||[]),this.renderSection("center",d||[]),this.renderSection("end",a||[]))}renderSection(e,n){let{props:i}=this;return Fe(oP,{key:e,widgetGroups:n,title:i.title,navUnit:i.navUnit,activeButton:i.activeButton,isTodayEnabled:i.isTodayEnabled,isPrevEnabled:i.isPrevEnabled,isNextEnabled:i.isNextEnabled,titleId:i.titleId})}}class sP extends Xi{constructor(){super(...arguments),this.state={availableWidth:null},this.handleEl=e=>{this.el=e,Gl(this.props.elRef,e),this.updateAvailableWidth()},this.handleResize=()=>{this.updateAvailableWidth()}}render(){let{props:e,state:n}=this,{aspectRatio:i}=e,r=["fc-view-harness",i||e.liquid||e.height?"fc-view-harness-active":"fc-view-harness-passive"],a="",l="";return i?n.availableWidth!==null?a=n.availableWidth/i:l=`${1/i*100}%`:a=e.height||"",Fe("div",{"aria-labelledby":e.labeledById,ref:this.handleEl,className:r.join(" "),style:{height:a,paddingBottom:l}},e.children)}componentDidMount(){this.context.addResizeHandler(this.handleResize)}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}updateAvailableWidth(){this.el&&this.props.aspectRatio&&this.setState({availableWidth:this.el.offsetWidth})}}class lP extends Bd{constructor(e){super(e),this.handleSegClick=(n,i)=>{let{component:r}=this,{context:a}=r,l=Rd(i);if(l&&r.isValidSegDownEl(n.target)){let d=Qo(n.target,".fc-event-forced-url"),p=d?d.querySelector("a[href]").href:"";a.emitter.trigger("eventClick",{el:i,event:new Hr(r.context,l.eventRange.def,l.eventRange.instance),jsEvent:n,view:a.viewApi}),p&&!n.defaultPrevented&&(window.location.href=p)}},this.destroy=JS(e.el,"click",".fc-event",this.handleSegClick)}}class cP extends Bd{constructor(e){super(e),this.handleEventElRemove=n=>{n===this.currentSegEl&&this.handleSegLeave(null,this.currentSegEl)},this.handleSegEnter=(n,i)=>{Rd(i)&&(this.currentSegEl=i,this.triggerEvent("eventMouseEnter",n,i))},this.handleSegLeave=(n,i)=>{this.currentSegEl&&(this.currentSegEl=null,this.triggerEvent("eventMouseLeave",n,i))},this.removeHoverListeners=UN(e.el,".fc-event",this.handleSegEnter,this.handleSegLeave)}destroy(){this.removeHoverListeners()}triggerEvent(e,n,i){let{component:r}=this,{context:a}=r,l=Rd(i);(!n||r.isValidSegDownEl(n.target))&&a.emitter.trigger(e,{el:i,event:new Hr(a,l.eventRange.def,l.eventRange.instance),jsEvent:n,view:a.viewApi})}}class uP extends Bu{constructor(){super(...arguments),this.buildViewContext=Nn(KD),this.buildViewPropTransformers=Nn(fP),this.buildToolbarProps=Nn(dP),this.headerRef=ds(),this.footerRef=ds(),this.interactionsStore={},this.state={viewLabelId:wg()},this.registerInteractiveComponent=(e,n)=>{let i=Z8(e,n),l=[lP,cP].concat(this.props.pluginHooks.componentInteractions).map(d=>new d(i));this.interactionsStore[e.uid]=l,Ty[e.uid]=i},this.unregisterInteractiveComponent=e=>{let n=this.interactionsStore[e.uid];if(n){for(let i of n)i.destroy();delete this.interactionsStore[e.uid]}delete Ty[e.uid]},this.resizeRunner=new s0(()=>{this.props.emitter.trigger("_resize",!0),this.props.emitter.trigger("windowResize",{view:this.props.viewApi})}),this.handleWindowResize=e=>{let{options:n}=this.props;n.handleWindowResize&&e.target===window&&this.resizeRunner.request(n.windowResizeDelay)}}render(){let{props:e}=this,{toolbarConfig:n,options:i}=e,r=!1,a="",l;e.isHeightAuto||e.forPrint?a="":i.height!=null?r=!0:i.contentHeight!=null?a=i.contentHeight:l=Math.max(i.aspectRatio,.5);let d=this.buildViewContext(e.viewSpec,e.viewApi,e.options,e.dateProfileGenerator,e.dateEnv,e.nowManager,e.theme,e.pluginHooks,e.dispatch,e.getCurrentData,e.emitter,e.calendarApi,this.registerInteractiveComponent,this.unregisterInteractiveComponent),p=n.header&&n.header.hasTitle?this.state.viewLabelId:void 0;return Fe(Cc.Provider,{value:d},Fe(Fd,{unit:"day"},g=>{let m=this.buildToolbarProps(e.viewSpec,e.dateProfile,e.dateProfileGenerator,e.currentDate,g,e.viewTitle);return Fe(Cr,null,n.header&&Fe(vw,Object.assign({ref:this.headerRef,extraClassName:"fc-header-toolbar",model:n.header,titleId:p},m)),Fe(sP,{liquid:r,height:a,aspectRatio:l,labeledById:p},this.renderView(e),this.buildAppendContent()),n.footer&&Fe(vw,Object.assign({ref:this.footerRef,extraClassName:"fc-footer-toolbar",model:n.footer,titleId:""},m)))}))}componentDidMount(){let{props:e}=this;this.calendarInteractions=e.pluginHooks.calendarInteractions.map(i=>new i(e)),window.addEventListener("resize",this.handleWindowResize);let{propSetHandlers:n}=e.pluginHooks;for(let i in n)n[i](e[i],e)}componentDidUpdate(e){let{props:n}=this,{propSetHandlers:i}=n.pluginHooks;for(let r in i)n[r]!==e[r]&&i[r](n[r],n)}componentWillUnmount(){window.removeEventListener("resize",this.handleWindowResize),this.resizeRunner.clear();for(let e of this.calendarInteractions)e.destroy();this.props.emitter.trigger("_unmount")}buildAppendContent(){let{props:e}=this,n=e.pluginHooks.viewContainerAppends.map(i=>i(e));return Fe(Cr,{},...n)}renderView(e){let{pluginHooks:n}=e,{viewSpec:i}=e,r={dateProfile:e.dateProfile,businessHours:e.businessHours,eventStore:e.renderableEventStore,eventUiBases:e.eventUiBases,dateSelection:e.dateSelection,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,isHeightAuto:e.isHeightAuto,forPrint:e.forPrint},a=this.buildViewPropTransformers(n.viewPropsTransformers);for(let d of a)Object.assign(r,d.transform(r,e));let l=i.component;return Fe(l,Object.assign({},r))}}function dP(t,e,n,i,r,a){let l=n.build(r,void 0,!1),d=n.buildPrev(e,i,!1),p=n.buildNext(e,i,!1);return{title:a,activeButton:t.type,navUnit:t.singleUnit,isTodayEnabled:l.isValid&&!bc(e.currentRange,r),isPrevEnabled:d.isValid,isNextEnabled:p.isValid}}function fP(t){return t.map(e=>new e)}class hP extends X8{constructor(e,n={}){super(),this.isRendering=!1,this.isRendered=!1,this.currentClassNames=[],this.customContentRenderId=0,this.handleAction=i=>{switch(i.type){case"SET_EVENT_DRAG":case"SET_EVENT_RESIZE":this.renderRunner.tryDrain()}},this.handleData=i=>{this.currentData=i,this.renderRunner.request(i.calendarOptions.rerenderDelay)},this.handleRenderRequest=()=>{if(this.isRendering){this.isRendered=!0;let{currentData:i}=this;$p(()=>{qf(Fe(Y8,{options:i.calendarOptions,theme:i.theme,emitter:i.emitter},(r,a,l,d)=>(this.setClassNames(r),this.setHeight(a),Fe(lC.Provider,{value:this.customContentRenderId},Fe(uP,Object.assign({isHeightAuto:l,forPrint:d},i))))),this.el)})}else this.isRendered&&(this.isRendered=!1,qf(null,this.el),this.setClassNames([]),this.setHeight(""))},NN(e),this.el=e,this.renderRunner=new s0(this.handleRenderRequest),new QO({optionOverrides:n,calendarApi:this,onAction:this.handleAction,onData:this.handleData})}render(){let e=this.isRendering;e?this.customContentRenderId+=1:this.isRendering=!0,this.renderRunner.request(),e&&this.updateSize()}destroy(){this.isRendering&&(this.isRendering=!1,this.renderRunner.request())}updateSize(){$p(()=>{super.updateSize()})}batchRendering(e){this.renderRunner.pause("batchRendering"),e(),this.renderRunner.resume("batchRendering")}pauseRendering(){this.renderRunner.pause("pauseRendering")}resumeRendering(){this.renderRunner.resume("pauseRendering",!0)}resetOptions(e,n){this.currentDataManager.resetOptions(e,n)}setClassNames(e){if(!iu(e,this.currentClassNames)){let{classList:n}=this.el;for(let i of this.currentClassNames)n.remove(i);for(let i of e)n.add(i);this.currentClassNames=e}}setHeight(e){QS(this.el,"height",e)}}const pP=parseInt(String(ta.version).split(".")[0]),gP=pP<18;class sE extends de.Component{constructor(){super(...arguments),this.elRef=de.createRef(),this.isUpdating=!1,this.isUnmounting=!1,this.state={customRenderingMap:new Map},this.requestResize=()=>{this.isUnmounting||(this.cancelResize(),this.resizeId=requestAnimationFrame(()=>{this.doResize()}))}}render(){const e=[];for(const n of this.state.customRenderingMap.values())e.push(ta.createElement(mP,{key:n.id,customRendering:n}));return ta.createElement("div",{ref:this.elRef},e)}componentDidMount(){this.isUnmounting=!1;const e=new QM;this.handleCustomRendering=e.handle.bind(e),this.calendar=new hP(this.elRef.current,Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.calendar.render(),this.calendar.on("_beforeprint",()=>{Mp.flushSync(()=>{})});let n;e.subscribe(i=>{const r=Date.now(),a=!n;(gP||a||this.isUpdating||this.isUnmounting||r-n<100?lE:Mp.flushSync)(()=>{this.setState({customRenderingMap:i},()=>{n=r,a?this.doResize():this.requestResize()})})})}componentDidUpdate(){this.isUpdating=!0,this.calendar.resetOptions(Object.assign(Object.assign({},this.props),{handleCustomRendering:this.handleCustomRendering})),this.isUpdating=!1}componentWillUnmount(){this.isUnmounting=!0,this.cancelResize(),this.calendar.destroy()}doResize(){this.calendar.updateSize()}cancelResize(){this.resizeId!==void 0&&(cancelAnimationFrame(this.resizeId),this.resizeId=void 0)}getApi(){return this.calendar}}sE.act=lE;class mP extends de.PureComponent{render(){const{customRendering:e}=this.props,{generatorMeta:n}=e,i=typeof n=="function"?n(e.renderProps):n;return Mp.createPortal(i,e.containerEl)}}function lE(t){t()}class vP extends Ql{constructor(){super(...arguments),this.headerElRef=ds()}renderSimpleLayout(e,n){let{props:i,context:r}=this,a=[],l=rg(r.options);return e&&a.push({type:"header",key:"header",isSticky:l,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),a.push({type:"body",key:"body",liquid:!0,chunk:{content:n}}),Fe(Jp,{elClasses:["fc-daygrid"],viewSpec:r.viewSpec},Fe(R0,{liquid:!i.isHeightAuto&&!i.forPrint,collapsibleWidth:i.forPrint,cols:[],sections:a}))}renderHScrollLayout(e,n,i,r){let a=this.context.pluginHooks.scrollGridImpl;if(!a)throw new Error("No ScrollGrid implementation");let{props:l,context:d}=this,p=!l.forPrint&&rg(d.options),g=!l.forPrint&&VC(d.options),m=[];return e&&m.push({type:"header",key:"header",isSticky:p,chunks:[{key:"main",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),m.push({type:"body",key:"body",liquid:!0,chunks:[{key:"main",content:n}]}),g&&m.push({type:"footer",key:"footer",isSticky:!0,chunks:[{key:"main",content:Ry}]}),Fe(Jp,{elClasses:["fc-daygrid"],viewSpec:d.viewSpec},Fe(a,{liquid:!l.isHeightAuto&&!l.forPrint,forPrint:l.forPrint,collapsibleWidth:l.forPrint,colGroups:[{cols:[{span:i,minWidth:r}]}],sections:m}))}}function Np(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.row].push(i);return n}function hp(t,e){let n=[];for(let i=0;i<e;i+=1)n[i]=[];for(let i of t)n[i.firstCol].push(i);return n}function yw(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.row].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}const cE=na({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"narrow"});function uE(t){let{display:e}=t.eventRange.ui;return e==="list-item"||e==="auto"&&!t.eventRange.def.allDay&&t.firstCol===t.lastCol&&t.isStart&&t.isEnd}class dE extends Xi{render(){let{props:e}=this;return Fe(D0,Object.assign({},e,{elClasses:["fc-daygrid-event","fc-daygrid-block-event","fc-h-event"],defaultTimeFormat:cE,defaultDisplayEventEnd:e.defaultDisplayEventEnd,disableResizing:!e.seg.eventRange.def.allDay}))}}class fE extends Xi{render(){let{props:e,context:n}=this,{options:i}=n,{seg:r}=e,a=i.eventTimeFormat||cE,l=EC(r,a,n,!0,e.defaultDisplayEventEnd);return Fe(N0,Object.assign({},e,{elTag:"a",elClasses:["fc-daygrid-event","fc-daygrid-dot-event"],elAttrs:LC(e.seg,n),defaultGenerator:yP,timeText:l,isResizing:!1,isDateSelecting:!1}))}}function yP(t){return Fe(Cr,null,Fe("div",{className:"fc-daygrid-event-dot",style:{borderColor:t.borderColor||t.backgroundColor}}),t.timeText&&Fe("div",{className:"fc-event-time"},t.timeText),Fe("div",{className:"fc-event-title"},t.event.title||Fe(Cr,null,"")))}class xP extends Xi{constructor(){super(...arguments),this.compileSegs=Nn(bP)}render(){let{props:e}=this,{allSegs:n,invisibleSegs:i}=this.compileSegs(e.singlePlacements);return Fe(XC,{elClasses:["fc-daygrid-more-link"],dateProfile:e.dateProfile,todayRange:e.todayRange,allDayDate:e.allDayDate,moreCnt:e.moreCnt,allSegs:n,hiddenSegs:i,alignmentElRef:e.alignmentElRef,alignGridTop:e.alignGridTop,extraDateSpan:e.extraDateSpan,popoverContent:()=>{let r=(e.eventDrag?e.eventDrag.affectedInstances:null)||(e.eventResize?e.eventResize.affectedInstances:null)||{};return Fe(Cr,null,n.map(a=>{let l=a.eventRange.instance.instanceId;return Fe("div",{className:"fc-daygrid-event-harness",key:l,style:{visibility:r[l]?"hidden":""}},uE(a)?Fe(fE,Object.assign({seg:a,isDragging:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},eu(a,e.todayRange))):Fe(dE,Object.assign({seg:a,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:l===e.eventSelection,defaultDisplayEventEnd:!1},eu(a,e.todayRange))))}))}})}}function bP(t){let e=[],n=[];for(let i of t)e.push(i.seg),i.isVisible||n.push(i.seg);return{allSegs:e,invisibleSegs:n}}const _P=na({week:"narrow"});class wP extends Ql{constructor(){super(...arguments),this.rootElRef=ds(),this.state={dayNumberId:wg()},this.handleRootEl=e=>{Gl(this.rootElRef,e),Gl(this.props.elRef,e)}}render(){let{context:e,props:n,state:i,rootElRef:r}=this,{options:a,dateEnv:l}=e,{date:d,dateProfile:p}=n;const g=n.showDayNumber&&CP(d,p.currentRange,l);return Fe(O0,{elTag:"td",elRef:this.handleRootEl,elClasses:["fc-daygrid-day",...n.extraClassNames||[]],elAttrs:Object.assign(Object.assign(Object.assign({},n.extraDataAttrs),n.showDayNumber?{"aria-labelledby":i.dayNumberId}:{}),{role:"gridcell"}),defaultGenerator:SP,date:d,dateProfile:p,todayRange:n.todayRange,showDayNumber:n.showDayNumber,isMonthStart:g,extraRenderProps:n.extraRenderProps},(m,_)=>Fe("div",{ref:n.innerElRef,className:"fc-daygrid-day-frame fc-scrollgrid-sync-inner",style:{minHeight:n.minHeight}},n.showWeekNumber&&Fe(KC,{elTag:"a",elClasses:["fc-daygrid-week-number"],elAttrs:ig(e,d,"week"),date:d,defaultFormat:_P}),!_.isDisabled&&(n.showDayNumber||P0(a)||n.forceDayTop)?Fe("div",{className:"fc-daygrid-day-top"},Fe(m,{elTag:"a",elClasses:["fc-daygrid-day-number",g&&"fc-daygrid-month-start"],elAttrs:Object.assign(Object.assign({},ig(e,d)),{id:i.dayNumberId})})):n.showDayNumber?Fe("div",{className:"fc-daygrid-day-top",style:{visibility:"hidden"}},Fe("a",{className:"fc-daygrid-day-number"},"")):void 0,Fe("div",{className:"fc-daygrid-day-events",ref:n.fgContentElRef},n.fgContent,Fe("div",{className:"fc-daygrid-day-bottom",style:{marginTop:n.moreMarginTop}},Fe(xP,{allDayDate:d,singlePlacements:n.singlePlacements,moreCnt:n.moreCnt,alignmentElRef:r,alignGridTop:!n.showDayNumber,extraDateSpan:n.extraDateSpan,dateProfile:n.dateProfile,eventSelection:n.eventSelection,eventDrag:n.eventDrag,eventResize:n.eventResize,todayRange:n.todayRange}))),Fe("div",{className:"fc-daygrid-day-bg"},n.bgContent)))}}function SP(t){return t.dayNumberText||Fe(Cr,null,"")}function CP(t,e,n){const{start:i,end:r}=e,a=ru(r,-1),l=n.getYear(i),d=n.getMonth(i),p=n.getYear(a),g=n.getMonth(a);return!(l===p&&d===g)&&(t.valueOf()===i.valueOf()||n.getDay(t)===1&&t.valueOf()<r.valueOf())}function hE(t){return t.eventRange.instance.instanceId+":"+t.firstCol}function pE(t){return hE(t)+":"+t.lastCol}function EP(t,e,n,i,r,a,l){let d=new TP(I=>{let Y=t[I.index].eventRange.instance.instanceId+":"+I.span.start+":"+(I.span.end-1);return r[Y]||1});d.allowReslicing=!0,d.strictOrder=i,e===!0||n===!0?(d.maxCoord=a,d.hiddenConsumes=!0):typeof e=="number"?d.maxStackCnt=e:typeof n=="number"&&(d.maxStackCnt=n,d.hiddenConsumes=!0);let p=[],g=[];for(let I=0;I<t.length;I+=1){let Y=t[I],B=pE(Y);r[B]!=null?p.push({index:I,span:{start:Y.firstCol,end:Y.lastCol+1}}):g.push(Y)}let m=d.addSegs(p),_=d.toRects(),{singleColPlacements:A,multiColPlacements:x,leftoverMargins:R}=AP(_,t,l),M=[],k=[];for(let I of g){x[I.firstCol].push({seg:I,isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let Y=I.firstCol;Y<=I.lastCol;Y+=1)A[Y].push({seg:Ld(I,Y,Y+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let I=0;I<l.length;I+=1)M.push(0);for(let I of m){let Y=t[I.index],B=I.span;x[B.start].push({seg:Ld(Y,B.start,B.end,l),isVisible:!1,isAbsolute:!0,absoluteTop:0,marginTop:0});for(let V=B.start;V<B.end;V+=1)M[V]+=1,A[V].push({seg:Ld(Y,V,V+1,l),isVisible:!1,isAbsolute:!1,absoluteTop:0,marginTop:0})}for(let I=0;I<l.length;I+=1)k.push(R[I]);return{singleColPlacements:A,multiColPlacements:x,moreCnts:M,moreMarginTops:k}}function AP(t,e,n){let i=LP(t,n.length),r=[],a=[],l=[];for(let d=0;d<n.length;d+=1){let p=i[d],g=[],m=0,_=0;for(let x of p){let R=e[x.index];g.push({seg:Ld(R,d,d+1,n),isVisible:!0,isAbsolute:!1,absoluteTop:x.levelCoord,marginTop:x.levelCoord-m}),m=x.levelCoord+x.thickness}let A=[];m=0,_=0;for(let x of p){let R=e[x.index],M=x.span.end-x.span.start>1,k=x.span.start===d;_+=x.levelCoord-m,m=x.levelCoord+x.thickness,M?(_+=x.thickness,k&&A.push({seg:Ld(R,x.span.start,x.span.end,n),isVisible:!0,isAbsolute:!0,absoluteTop:x.levelCoord,marginTop:0})):k&&(A.push({seg:Ld(R,x.span.start,x.span.end,n),isVisible:!0,isAbsolute:!1,absoluteTop:x.levelCoord,marginTop:_}),_=0)}r.push(g),a.push(A),l.push(_)}return{singleColPlacements:r,multiColPlacements:a,leftoverMargins:l}}function LP(t,e){let n=[];for(let i=0;i<e;i+=1)n.push([]);for(let i of t)for(let r=i.span.start;r<i.span.end;r+=1)n[r].push(i);return n}function Ld(t,e,n,i){if(t.firstCol===e&&t.lastCol===n-1)return t;let r=t.eventRange,a=r.range,l=Nu(a,{start:i[e].date,end:Eo(i[n-1].date,1)});return Object.assign(Object.assign({},t),{firstCol:e,lastCol:n-1,eventRange:{def:r.def,ui:Object.assign(Object.assign({},r.ui),{durationEditable:!1}),instance:r.instance,range:l},isStart:t.isStart&&l.start.valueOf()===a.start.valueOf(),isEnd:t.isEnd&&l.end.valueOf()===a.end.valueOf()})}class TP extends OC{constructor(){super(...arguments),this.hiddenConsumes=!1,this.forceHidden={}}addSegs(e){const n=super.addSegs(e),{entriesByLevel:i}=this,r=a=>!this.forceHidden[Lu(a)];for(let a=0;a<i.length;a+=1)i[a]=i[a].filter(r);return n}handleInvalidInsertion(e,n,i){const{entriesByLevel:r,forceHidden:a}=this,{touchingEntry:l,touchingLevel:d,touchingLateral:p}=e;if(this.hiddenConsumes&&l){const g=Lu(l);if(!a[g])if(this.allowReslicing){const m=Object.assign(Object.assign({},l),{span:j0(l.span,n.span)}),_=Lu(m);a[_]=!0,r[d][p]=m,i.push(m),this.splitEntry(l,n,i)}else a[g]=!0,i.push(l)}super.handleInvalidInsertion(e,n,i)}}class gE extends Ql{constructor(){super(...arguments),this.cellElRefs=new vc,this.frameElRefs=new vc,this.fgElRefs=new vc,this.segHarnessRefs=new vc,this.rootElRef=ds(),this.state={framePositions:null,maxContentHeight:null,segHeights:{}},this.handleResize=e=>{e&&this.updateSizing(!0)}}render(){let{props:e,state:n,context:i}=this,{options:r}=i,a=e.cells.length,l=hp(e.businessHourSegs,a),d=hp(e.bgEventSegs,a),p=hp(this.getHighlightSegs(),a),g=hp(this.getMirrorSegs(),a),{singleColPlacements:m,multiColPlacements:_,moreCnts:A,moreMarginTops:x}=EP(CC(e.fgEventSegs,r.eventOrder),e.dayMaxEvents,e.dayMaxEventRows,r.eventOrderStrict,n.segHeights,n.maxContentHeight,e.cells),R=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{};return Fe("tr",{ref:this.rootElRef,role:"row"},e.renderIntro&&e.renderIntro(),e.cells.map((M,k)=>{let I=this.renderFgSegs(k,e.forPrint?m[k]:_[k],e.todayRange,R),Y=this.renderFgSegs(k,jP(g[k],_),e.todayRange,{},!!e.eventDrag,!!e.eventResize,!1);return Fe(wP,{key:M.key,elRef:this.cellElRefs.createRef(M.key),innerElRef:this.frameElRefs.createRef(M.key),dateProfile:e.dateProfile,date:M.date,showDayNumber:e.showDayNumbers,showWeekNumber:e.showWeekNumbers&&k===0,forceDayTop:e.showWeekNumbers,todayRange:e.todayRange,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,extraRenderProps:M.extraRenderProps,extraDataAttrs:M.extraDataAttrs,extraClassNames:M.extraClassNames,extraDateSpan:M.extraDateSpan,moreCnt:A[k],moreMarginTop:x[k],singlePlacements:m[k],fgContentElRef:this.fgElRefs.createRef(M.key),fgContent:Fe(Cr,null,Fe(Cr,null,I),Fe(Cr,null,Y)),bgContent:Fe(Cr,null,this.renderFillSegs(p[k],"highlight"),this.renderFillSegs(l[k],"non-business"),this.renderFillSegs(d[k],"bg-event")),minHeight:e.cellMinHeight})}))}componentDidMount(){this.updateSizing(!0),this.context.addResizeHandler(this.handleResize)}componentDidUpdate(e,n){let i=this.props;this.updateSizing(!xl(e,i))}componentWillUnmount(){this.context.removeResizeHandler(this.handleResize)}getHighlightSegs(){let{props:e}=this;return e.eventDrag&&e.eventDrag.segs.length?e.eventDrag.segs:e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:e.dateSelectionSegs}getMirrorSegs(){let{props:e}=this;return e.eventResize&&e.eventResize.segs.length?e.eventResize.segs:[]}renderFgSegs(e,n,i,r,a,l,d){let{context:p}=this,{eventSelection:g}=this.props,{framePositions:m}=this.state,_=this.props.cells.length===1,A=a||l||d,x=[];if(m)for(let R of n){let{seg:M}=R,{instanceId:k}=M.eventRange.instance,I=R.isVisible&&!r[k],Y=R.isAbsolute,B="",V="";Y&&(p.isRtl?(V=0,B=m.lefts[M.lastCol]-m.lefts[M.firstCol]):(B=0,V=m.rights[M.firstCol]-m.rights[M.lastCol])),x.push(Fe("div",{className:"fc-daygrid-event-harness"+(Y?" fc-daygrid-event-harness-abs":""),key:hE(M),ref:A?null:this.segHarnessRefs.createRef(pE(M)),style:{visibility:I?"":"hidden",marginTop:Y?"":R.marginTop,top:Y?R.absoluteTop:"",left:B,right:V}},uE(M)?Fe(fE,Object.assign({seg:M,isDragging:a,isSelected:k===g,defaultDisplayEventEnd:_},eu(M,i))):Fe(dE,Object.assign({seg:M,isDragging:a,isResizing:l,isDateSelecting:d,isSelected:k===g,defaultDisplayEventEnd:_},eu(M,i)))))}return x}renderFillSegs(e,n){let{isRtl:i}=this.context,{todayRange:r}=this.props,{framePositions:a}=this.state,l=[];if(a)for(let d of e){let p=i?{right:0,left:a.lefts[d.lastCol]-a.lefts[d.firstCol]}:{left:0,right:a.rights[d.firstCol]-a.rights[d.lastCol]};l.push(Fe("div",{key:AC(d.eventRange),className:"fc-daygrid-bg-harness",style:p},n==="bg-event"?Fe(YC,Object.assign({seg:d},eu(d,r))):ZC(n)))}return Fe(Cr,{},...l)}updateSizing(e){let{props:n,state:i,frameElRefs:r}=this;if(!n.forPrint&&n.clientWidth!==null){if(e){let p=n.cells.map(g=>r.currentMap[g.key]);if(p.length){let g=this.rootElRef.current,m=new Nd(g,p,!0,!1);(!i.framePositions||!i.framePositions.similarTo(m))&&this.setState({framePositions:new Nd(g,p,!0,!1)})}}const a=this.state.segHeights,l=this.querySegHeights(),d=n.dayMaxEvents===!0||n.dayMaxEventRows===!0;this.safeSetState({segHeights:Object.assign(Object.assign({},a),l),maxContentHeight:d?this.computeMaxContentHeight():null})}}querySegHeights(){let e=this.segHarnessRefs.currentMap,n={};for(let i in e){let r=Math.round(e[i].getBoundingClientRect().height);n[i]=Math.max(n[i]||0,r)}return n}computeMaxContentHeight(){let e=this.props.cells[0].key,n=this.cellElRefs.currentMap[e],i=this.fgElRefs.currentMap[e];return n.getBoundingClientRect().bottom-i.getBoundingClientRect().top}getCellEls(){let e=this.cellElRefs.currentMap;return this.props.cells.map(n=>e[n.key])}}gE.addStateEquality({segHeights:xl});function jP(t,e){if(!t.length)return[];let n=kP(e);return t.map(i=>({seg:i,isVisible:!0,isAbsolute:!0,absoluteTop:n[i.eventRange.instance.instanceId],marginTop:0}))}function kP(t){let e={};for(let n of t)for(let i of n)e[i.seg.eventRange.instance.instanceId]=i.absoluteTop;return e}class RP extends Ql{constructor(){super(...arguments),this.splitBusinessHourSegs=Nn(Np),this.splitBgEventSegs=Nn(NP),this.splitFgEventSegs=Nn(Np),this.splitDateSelectionSegs=Nn(Np),this.splitEventDrag=Nn(yw),this.splitEventResize=Nn(yw),this.rowRefs=new vc}render(){let{props:e,context:n}=this,i=e.cells.length,r=this.splitBusinessHourSegs(e.businessHourSegs,i),a=this.splitBgEventSegs(e.bgEventSegs,i),l=this.splitFgEventSegs(e.fgEventSegs,i),d=this.splitDateSelectionSegs(e.dateSelectionSegs,i),p=this.splitEventDrag(e.eventDrag,i),g=this.splitEventResize(e.eventResize,i),m=i>=7&&e.clientWidth?e.clientWidth/n.options.aspectRatio/6:null;return Fe(Fd,{unit:"day"},(_,A)=>Fe(Cr,null,e.cells.map((x,R)=>Fe(gE,{ref:this.rowRefs.createRef(R),key:x.length?x[0].date.toISOString():R,showDayNumbers:i>1,showWeekNumbers:e.showWeekNumbers,todayRange:A,dateProfile:e.dateProfile,cells:x,renderIntro:e.renderRowIntro,businessHourSegs:r[R],eventSelection:e.eventSelection,bgEventSegs:a[R],fgEventSegs:l[R],dateSelectionSegs:d[R],eventDrag:p[R],eventResize:g[R],dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,clientWidth:e.clientWidth,clientHeight:e.clientHeight,cellMinHeight:m,forPrint:e.forPrint}))))}componentDidMount(){this.registerInteractiveComponent()}componentDidUpdate(){this.registerInteractiveComponent()}registerInteractiveComponent(){if(!this.rootEl){const e=this.rowRefs.currentMap[0].getCellEls()[0],n=e?e.closest(".fc-daygrid-body"):null;n&&(this.rootEl=n,this.context.registerInteractiveComponent(this,{el:n,isHitComboAllowed:this.props.isHitComboAllowed}))}}componentWillUnmount(){this.rootEl&&(this.context.unregisterInteractiveComponent(this),this.rootEl=null)}prepareHits(){this.rowPositions=new Nd(this.rootEl,this.rowRefs.collect().map(e=>e.getCellEls()[0]),!1,!0),this.colPositions=new Nd(this.rootEl,this.rowRefs.currentMap[0].getCellEls(),!0,!1)}queryHit(e,n){let{colPositions:i,rowPositions:r}=this,a=i.leftToIndex(e),l=r.topToIndex(n);if(l!=null&&a!=null){let d=this.props.cells[l][a];return{dateProfile:this.props.dateProfile,dateSpan:Object.assign({range:this.getCellRange(l,a),allDay:!0},d.extraDateSpan),dayEl:this.getCellEl(l,a),rect:{left:i.lefts[a],right:i.rights[a],top:r.tops[l],bottom:r.bottoms[l]},layer:0}}return null}getCellEl(e,n){return this.rowRefs.currentMap[e].getCellEls()[n]}getCellRange(e,n){let i=this.props.cells[e][n].date,r=Eo(i,1);return{start:i,end:r}}}function NP(t,e){return Np(t.filter(DP),e)}function DP(t){return t.eventRange.def.allDay}class MP extends Ql{constructor(){super(...arguments),this.elRef=ds(),this.needsScrollReset=!1}render(){let{props:e}=this,{dayMaxEventRows:n,dayMaxEvents:i,expandRows:r}=e,a=i===!0||n===!0;a&&!r&&(a=!1,n=null,i=null);let l=["fc-daygrid-body",a?"fc-daygrid-body-balanced":"fc-daygrid-body-unbalanced",r?"":"fc-daygrid-body-natural"];return Fe("div",{ref:this.elRef,className:l.join(" "),style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Fe("table",{role:"presentation",className:"fc-scrollgrid-sync-table",style:{width:e.clientWidth,minWidth:e.tableMinWidth,height:r?e.clientHeight:""}},e.colGroupNode,Fe("tbody",{role:"presentation"},Fe(RP,{dateProfile:e.dateProfile,cells:e.cells,renderRowIntro:e.renderRowIntro,showWeekNumbers:e.showWeekNumbers,clientWidth:e.clientWidth,clientHeight:e.clientHeight,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,dayMaxEvents:i,dayMaxEventRows:n,forPrint:e.forPrint,isHitComboAllowed:e.isHitComboAllowed}))))}componentDidMount(){this.requestScrollReset()}componentDidUpdate(e){e.dateProfile!==this.props.dateProfile?this.requestScrollReset():this.flushScrollReset()}requestScrollReset(){this.needsScrollReset=!0,this.flushScrollReset()}flushScrollReset(){if(this.needsScrollReset&&this.props.clientWidth){const e=OP(this.elRef.current,this.props.dateProfile);if(e){const n=e.closest(".fc-daygrid-body"),i=n.closest(".fc-scroller"),r=e.getBoundingClientRect().top-n.getBoundingClientRect().top;i.scrollTop=r?r+1:0}this.needsScrollReset=!1}}}function OP(t,e){let n;return e.currentRangeUnit.match(/year|month/)&&(n=t.querySelector(`[data-date="${yD(e.currentDate)}-01"]`)),n||(n=t.querySelector(`[data-date="${f0(e.currentDate)}"]`)),n}class PP extends UC{constructor(){super(...arguments),this.forceDayIfListItem=!0}sliceRange(e,n){return n.sliceRange(e)}}class mE extends Ql{constructor(){super(...arguments),this.slicer=new PP,this.tableRef=ds()}render(){let{props:e,context:n}=this;return Fe(MP,Object.assign({ref:this.tableRef},this.slicer.sliceProps(e,e.dateProfile,e.nextDayThreshold,n,e.dayTableModel),{dateProfile:e.dateProfile,cells:e.dayTableModel.cells,colGroupNode:e.colGroupNode,tableMinWidth:e.tableMinWidth,renderRowIntro:e.renderRowIntro,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.showWeekNumbers,expandRows:e.expandRows,headerAlignElRef:e.headerAlignElRef,clientWidth:e.clientWidth,clientHeight:e.clientHeight,forPrint:e.forPrint}))}}class IP extends vP{constructor(){super(...arguments),this.buildDayTableModel=Nn(zP),this.headerRef=ds(),this.tableRef=ds()}render(){let{options:e,dateProfileGenerator:n}=this.context,{props:i}=this,r=this.buildDayTableModel(i.dateProfile,n),a=e.dayHeaders&&Fe(zC,{ref:this.headerRef,dateProfile:i.dateProfile,dates:r.headerDates,datesRepDistinctDays:r.rowCnt===1}),l=d=>Fe(mE,{ref:this.tableRef,dateProfile:i.dateProfile,dayTableModel:r,businessHours:i.businessHours,dateSelection:i.dateSelection,eventStore:i.eventStore,eventUiBases:i.eventUiBases,eventSelection:i.eventSelection,eventDrag:i.eventDrag,eventResize:i.eventResize,nextDayThreshold:e.nextDayThreshold,colGroupNode:d.tableColGroupNode,tableMinWidth:d.tableMinWidth,dayMaxEvents:e.dayMaxEvents,dayMaxEventRows:e.dayMaxEventRows,showWeekNumbers:e.weekNumbers,expandRows:!i.isHeightAuto,headerAlignElRef:this.headerElRef,clientWidth:d.clientWidth,clientHeight:d.clientHeight,forPrint:i.forPrint});return e.dayMinWidth?this.renderHScrollLayout(a,l,r.colCnt,e.dayMinWidth):this.renderSimpleLayout(a,l)}}function zP(t,e){let n=new BC(t.renderRange,e);return new FC(n,/year|month|week/.test(t.currentRangeUnit))}class BP extends fC{buildRenderRange(e,n,i){let r=super.buildRenderRange(e,n,i),{props:a}=this;return FP({currentRange:r,snapToWeek:/^(year|month)$/.test(n),fixedWeekCount:a.fixedWeekCount,dateEnv:a.dateEnv})}}function FP(t){let{dateEnv:e,currentRange:n}=t,{start:i,end:r}=n,a;if(t.snapToWeek&&(i=e.startOfWeek(i),a=e.startOfWeek(r),a.valueOf()!==r.valueOf()&&(r=Y2(a,1))),t.fixedWeekCount){let l=e.startOfWeek(e.startOfMonth(Eo(n.end,-1))),d=Math.ceil(sD(l,r));r=Y2(r,6-d)}return{start:i,end:r}}var UP=':root{--fc-daygrid-event-dot-width:8px}.fc-daygrid-day-events:after,.fc-daygrid-day-events:before,.fc-daygrid-day-frame:after,.fc-daygrid-day-frame:before,.fc-daygrid-event-harness:after,.fc-daygrid-event-harness:before{clear:both;content:"";display:table}.fc .fc-daygrid-body{position:relative;z-index:1}.fc .fc-daygrid-day.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-daygrid-day-frame{min-height:100%;position:relative}.fc .fc-daygrid-day-top{display:flex;flex-direction:row-reverse}.fc .fc-day-other .fc-daygrid-day-top{opacity:.3}.fc .fc-daygrid-day-number{padding:4px;position:relative;z-index:4}.fc .fc-daygrid-month-start{font-size:1.1em;font-weight:700}.fc .fc-daygrid-day-events{margin-top:1px}.fc .fc-daygrid-body-balanced .fc-daygrid-day-events{left:0;position:absolute;right:0}.fc .fc-daygrid-body-unbalanced .fc-daygrid-day-events{min-height:2em;position:relative}.fc .fc-daygrid-body-natural .fc-daygrid-day-events{margin-bottom:1em}.fc .fc-daygrid-event-harness{position:relative}.fc .fc-daygrid-event-harness-abs{left:0;position:absolute;right:0;top:0}.fc .fc-daygrid-bg-harness{bottom:0;position:absolute;top:0}.fc .fc-daygrid-day-bg .fc-non-business{z-index:1}.fc .fc-daygrid-day-bg .fc-bg-event{z-index:2}.fc .fc-daygrid-day-bg .fc-highlight{z-index:3}.fc .fc-daygrid-event{margin-top:1px;z-index:6}.fc .fc-daygrid-event.fc-event-mirror{z-index:7}.fc .fc-daygrid-day-bottom{font-size:.85em;margin:0 2px}.fc .fc-daygrid-day-bottom:after,.fc .fc-daygrid-day-bottom:before{clear:both;content:"";display:table}.fc .fc-daygrid-more-link{border-radius:3px;cursor:pointer;line-height:1;margin-top:1px;max-width:100%;overflow:hidden;padding:2px;position:relative;white-space:nowrap;z-index:4}.fc .fc-daygrid-more-link:hover{background-color:rgba(0,0,0,.1)}.fc .fc-daygrid-week-number{background-color:var(--fc-neutral-bg-color);color:var(--fc-neutral-text-color);min-width:1.5em;padding:2px;position:absolute;text-align:center;top:0;z-index:5}.fc .fc-more-popover .fc-popover-body{min-width:220px;padding:10px}.fc-direction-ltr .fc-daygrid-event.fc-event-start,.fc-direction-rtl .fc-daygrid-event.fc-event-end{margin-left:2px}.fc-direction-ltr .fc-daygrid-event.fc-event-end,.fc-direction-rtl .fc-daygrid-event.fc-event-start{margin-right:2px}.fc-direction-ltr .fc-daygrid-more-link{float:left}.fc-direction-ltr .fc-daygrid-week-number{border-radius:0 0 3px 0;left:0}.fc-direction-rtl .fc-daygrid-more-link{float:right}.fc-direction-rtl .fc-daygrid-week-number{border-radius:0 0 0 3px;right:0}.fc-liquid-hack .fc-daygrid-day-frame{position:static}.fc-daygrid-event{border-radius:3px;font-size:var(--fc-small-font-size);position:relative;white-space:nowrap}.fc-daygrid-block-event .fc-event-time{font-weight:700}.fc-daygrid-block-event .fc-event-time,.fc-daygrid-block-event .fc-event-title{padding:1px}.fc-daygrid-dot-event{align-items:center;display:flex;padding:2px 0}.fc-daygrid-dot-event .fc-event-title{flex-grow:1;flex-shrink:1;font-weight:700;min-width:0;overflow:hidden}.fc-daygrid-dot-event.fc-event-mirror,.fc-daygrid-dot-event:hover{background:rgba(0,0,0,.1)}.fc-daygrid-dot-event.fc-event-selected:before{bottom:-10px;top:-10px}.fc-daygrid-event-dot{border:calc(var(--fc-daygrid-event-dot-width)/2) solid var(--fc-event-border-color);border-radius:calc(var(--fc-daygrid-event-dot-width)/2);box-sizing:content-box;height:0;margin:0 4px;width:0}.fc-direction-ltr .fc-daygrid-event .fc-event-time{margin-right:3px}.fc-direction-rtl .fc-daygrid-event .fc-event-time{margin-left:3px}';o0(UP);var HP=Ec({name:"@fullcalendar/daygrid",initialView:"dayGridMonth",views:{dayGrid:{component:IP,dateProfileGeneratorClass:BP},dayGridDay:{type:"dayGrid",duration:{days:1}},dayGridWeek:{type:"dayGrid",duration:{weeks:1}},dayGridMonth:{type:"dayGrid",duration:{months:1},fixedWeekCount:!0},dayGridYear:{type:"dayGrid",duration:{years:1}}}});class qP extends tM{getKeyInfo(){return{allDay:{},timed:{}}}getKeysForDateSpan(e){return e.allDay?["allDay"]:["timed"]}getKeysForEventDef(e){return e.allDay?R8(e)?["timed","allDay"]:["allDay"]:["timed"]}}const WP=na({hour:"numeric",minute:"2-digit",omitZeroMinute:!0,meridiem:"short"});function vE(t){let e=["fc-timegrid-slot","fc-timegrid-slot-label",t.isLabeled?"fc-scrollgrid-shrink":"fc-timegrid-slot-minor"];return Fe(Cc.Consumer,null,n=>{if(!t.isLabeled)return Fe("td",{className:e.join(" "),"data-time":t.isoTimeStr});let{dateEnv:i,options:r,viewApi:a}=n,l=r.slotLabelFormat==null?WP:Array.isArray(r.slotLabelFormat)?na(r.slotLabelFormat[0]):na(r.slotLabelFormat),d={level:0,time:t.time,date:i.toDate(t.date),view:a,text:i.format(t.date,l)};return Fe(Xs,{elTag:"td",elClasses:e,elAttrs:{"data-time":t.isoTimeStr},renderProps:d,generatorName:"slotLabelContent",customGenerator:r.slotLabelContent,defaultGenerator:GP,classNameGenerator:r.slotLabelClassNames,didMount:r.slotLabelDidMount,willUnmount:r.slotLabelWillUnmount},p=>Fe("div",{className:"fc-timegrid-slot-label-frame fc-scrollgrid-shrink-frame"},Fe(p,{elTag:"div",elClasses:["fc-timegrid-slot-label-cushion","fc-scrollgrid-shrink-cushion"]})))})}function GP(t){return t.text}class VP extends Xi{render(){return this.props.slatMetas.map(e=>Fe("tr",{key:e.key},Fe(vE,Object.assign({},e))))}}const YP=na({week:"short"}),ZP=5;class KP extends Ql{constructor(){super(...arguments),this.allDaySplitter=new qP,this.headerElRef=ds(),this.rootElRef=ds(),this.scrollerElRef=ds(),this.state={slatCoords:null},this.handleScrollTopRequest=e=>{let n=this.scrollerElRef.current;n&&(n.scrollTop=e)},this.renderHeadAxis=(e,n="")=>{let{options:i}=this.context,{dateProfile:r}=this.props,a=r.renderRange,d=zu(a.start,a.end)===1?ig(this.context,a.start,"week"):{};return i.weekNumbers&&e==="day"?Fe(KC,{elTag:"th",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},date:a.start,defaultFormat:YP},p=>Fe("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame","fc-timegrid-axis-frame-liquid"].join(" "),style:{height:n}},Fe(p,{elTag:"a",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"],elAttrs:d}))):Fe("th",{"aria-hidden":!0,className:"fc-timegrid-axis"},Fe("div",{className:"fc-timegrid-axis-frame",style:{height:n}}))},this.renderTableRowAxis=e=>{let{options:n,viewApi:i}=this.context,r={text:n.allDayText,view:i};return Fe(Xs,{elTag:"td",elClasses:["fc-timegrid-axis","fc-scrollgrid-shrink"],elAttrs:{"aria-hidden":!0},renderProps:r,generatorName:"allDayContent",customGenerator:n.allDayContent,defaultGenerator:XP,classNameGenerator:n.allDayClassNames,didMount:n.allDayDidMount,willUnmount:n.allDayWillUnmount},a=>Fe("div",{className:["fc-timegrid-axis-frame","fc-scrollgrid-shrink-frame",e==null?" fc-timegrid-axis-frame-liquid":""].join(" "),style:{height:e}},Fe(a,{elTag:"span",elClasses:["fc-timegrid-axis-cushion","fc-scrollgrid-shrink-cushion","fc-scrollgrid-sync-inner"]})))},this.handleSlatCoords=e=>{this.setState({slatCoords:e})}}renderSimpleLayout(e,n,i){let{context:r,props:a}=this,l=[],d=rg(r.options);return e&&l.push({type:"header",key:"header",isSticky:d,chunk:{elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}}),n&&(l.push({type:"body",key:"all-day",chunk:{content:n}}),l.push({type:"body",key:"all-day-divider",outerContent:Fe("tr",{role:"presentation",className:"fc-scrollgrid-section"},Fe("td",{className:"fc-timegrid-divider "+r.theme.getClass("tableCellShaded")}))})),l.push({type:"body",key:"body",liquid:!0,expandRows:!!r.options.expandRows,chunk:{scrollerElRef:this.scrollerElRef,content:i}}),Fe(Jp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:r.viewSpec},Fe(R0,{liquid:!a.isHeightAuto&&!a.forPrint,collapsibleWidth:a.forPrint,cols:[{width:"shrink"}],sections:l}))}renderHScrollLayout(e,n,i,r,a,l,d){let p=this.context.pluginHooks.scrollGridImpl;if(!p)throw new Error("No ScrollGrid implementation");let{context:g,props:m}=this,_=!m.forPrint&&rg(g.options),A=!m.forPrint&&VC(g.options),x=[];e&&x.push({type:"header",key:"header",isSticky:_,syncRowHeights:!0,chunks:[{key:"axis",rowContent:M=>Fe("tr",{role:"presentation"},this.renderHeadAxis("day",M.rowSyncHeights[0]))},{key:"cols",elRef:this.headerElRef,tableClassName:"fc-col-header",rowContent:e}]}),n&&(x.push({type:"body",key:"all-day",syncRowHeights:!0,chunks:[{key:"axis",rowContent:M=>Fe("tr",{role:"presentation"},this.renderTableRowAxis(M.rowSyncHeights[0]))},{key:"cols",content:n}]}),x.push({key:"all-day-divider",type:"body",outerContent:Fe("tr",{role:"presentation",className:"fc-scrollgrid-section"},Fe("td",{colSpan:2,className:"fc-timegrid-divider "+g.theme.getClass("tableCellShaded")}))}));let R=g.options.nowIndicator;return x.push({type:"body",key:"body",liquid:!0,expandRows:!!g.options.expandRows,chunks:[{key:"axis",content:M=>Fe("div",{className:"fc-timegrid-axis-chunk"},Fe("table",{"aria-hidden":!0,style:{height:M.expandRows?M.clientHeight:""}},M.tableColGroupNode,Fe("tbody",null,Fe(VP,{slatMetas:l}))),Fe("div",{className:"fc-timegrid-now-indicator-container"},Fe(Fd,{unit:R?"minute":"day"},k=>{let I=R&&d&&d.safeComputeTop(k);return typeof I=="number"?Fe(M0,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:I},isAxis:!0,date:k}):null})))},{key:"cols",scrollerElRef:this.scrollerElRef,content:i}]}),A&&x.push({key:"footer",type:"footer",isSticky:!0,chunks:[{key:"axis",content:Ry},{key:"cols",content:Ry}]}),Fe(Jp,{elRef:this.rootElRef,elClasses:["fc-timegrid"],viewSpec:g.viewSpec},Fe(p,{liquid:!m.isHeightAuto&&!m.forPrint,forPrint:m.forPrint,collapsibleWidth:!1,colGroups:[{width:"shrink",cols:[{width:"shrink"}]},{cols:[{span:r,minWidth:a}]}],sections:x}))}getAllDayMaxEventProps(){let{dayMaxEvents:e,dayMaxEventRows:n}=this.context.options;return(e===!0||n===!0)&&(e=void 0,n=ZP),{dayMaxEvents:e,dayMaxEventRows:n}}}function XP(t){return t.text}class QP{constructor(e,n,i){this.positions=e,this.dateProfile=n,this.slotDuration=i}safeComputeTop(e){let{dateProfile:n}=this;if(bc(n.currentRange,e)){let i=Er(e),r=e.valueOf()-i.valueOf();if(r>=gl(n.slotMinTime)&&r<gl(n.slotMaxTime))return this.computeTimeTop(Ei(r))}return null}computeDateTop(e,n){return n||(n=Er(e)),this.computeTimeTop(Ei(e.valueOf()-n.valueOf()))}computeTimeTop(e){let{positions:n,dateProfile:i}=this,r=n.els.length,a=(e.milliseconds-gl(i.slotMinTime))/gl(this.slotDuration),l,d;return a=Math.max(0,a),a=Math.min(r,a),l=Math.floor(a),l=Math.min(l,r-1),d=a-l,n.tops[l]+n.getHeight(l)*d}}class $P extends Xi{render(){let{props:e,context:n}=this,{options:i}=n,{slatElRefs:r}=e;return Fe("tbody",null,e.slatMetas.map((a,l)=>{let d={time:a.time,date:n.dateEnv.toDate(a.date),view:n.viewApi};return Fe("tr",{key:a.key,ref:r.createRef(a.key)},e.axis&&Fe(vE,Object.assign({},a)),Fe(Xs,{elTag:"td",elClasses:["fc-timegrid-slot","fc-timegrid-slot-lane",!a.isLabeled&&"fc-timegrid-slot-minor"],elAttrs:{"data-time":a.isoTimeStr},renderProps:d,generatorName:"slotLaneContent",customGenerator:i.slotLaneContent,classNameGenerator:i.slotLaneClassNames,didMount:i.slotLaneDidMount,willUnmount:i.slotLaneWillUnmount}))}))}}class JP extends Xi{constructor(){super(...arguments),this.rootElRef=ds(),this.slatElRefs=new vc}render(){let{props:e,context:n}=this;return Fe("div",{ref:this.rootElRef,className:"fc-timegrid-slots"},Fe("table",{"aria-hidden":!0,className:n.theme.getClass("table"),style:{minWidth:e.tableMinWidth,width:e.clientWidth,height:e.minHeight}},e.tableColGroupNode,Fe($P,{slatElRefs:this.slatElRefs,axis:e.axis,slatMetas:e.slatMetas})))}componentDidMount(){this.updateSizing()}componentDidUpdate(){this.updateSizing()}componentWillUnmount(){this.props.onCoords&&this.props.onCoords(null)}updateSizing(){let{context:e,props:n}=this;n.onCoords&&n.clientWidth!==null&&this.rootElRef.current.offsetHeight&&n.onCoords(new QP(new Nd(this.rootElRef.current,eI(this.slatElRefs.currentMap,n.slatMetas),!1,!0),this.props.dateProfile,e.options.slotDuration))}}function eI(t,e){return e.map(n=>t[n.key])}function Sf(t,e){let n=[],i;for(i=0;i<e;i+=1)n.push([]);if(t)for(i=0;i<t.length;i+=1)n[t[i].col].push(t[i]);return n}function xw(t,e){let n=[];if(t){for(let i=0;i<e;i+=1)n[i]={affectedInstances:t.affectedInstances,isEvent:t.isEvent,segs:[]};for(let i of t.segs)n[i.col].segs.push(i)}else for(let i=0;i<e;i+=1)n[i]=null;return n}class tI extends Xi{render(){let{props:e}=this;return Fe(XC,{elClasses:["fc-timegrid-more-link"],elStyle:{top:e.top,bottom:e.bottom},allDayDate:null,moreCnt:e.hiddenSegs.length,allSegs:e.hiddenSegs,hiddenSegs:e.hiddenSegs,extraDateSpan:e.extraDateSpan,dateProfile:e.dateProfile,todayRange:e.todayRange,popoverContent:()=>xE(e.hiddenSegs,e),defaultGenerator:nI,forceTimed:!0},n=>Fe(n,{elTag:"div",elClasses:["fc-timegrid-more-link-inner","fc-sticky"]}))}}function nI(t){return t.shortText}function iI(t,e,n){let i=new OC;e!=null&&(i.strictOrder=e),n!=null&&(i.maxStackCnt=n);let r=i.addSegs(t),a=pM(r),l=rI(i);return l=lI(l,1),{segRects:cI(l),hiddenGroups:a}}function rI(t){const{entriesByLevel:e}=t,n=z0((i,r)=>i+":"+r,(i,r)=>{let a=sI(t,i,r),l=bw(a,n),d=e[i][r];return[Object.assign(Object.assign({},d),{nextLevelNodes:l[0]}),d.thickness+l[1]]});return bw(e.length?{level:0,lateralStart:0,lateralEnd:e[0].length}:null,n)[0]}function bw(t,e){if(!t)return[[],0];let{level:n,lateralStart:i,lateralEnd:r}=t,a=i,l=[];for(;a<r;)l.push(e(n,a)),a+=1;return l.sort(aI),[l.map(oI),l[0][1]]}function aI(t,e){return e[1]-t[1]}function oI(t){return t[0]}function sI(t,e,n){let{levelCoords:i,entriesByLevel:r}=t,a=r[e][n],l=i[e]+a.thickness,d=i.length,p=e;for(;p<d&&i[p]<l;p+=1);for(;p<d;p+=1){let g=r[p],m,_=ky(g,a.span.start,jy),A=_[0]+_[1],x=A;for(;(m=g[x])&&m.span.start<a.span.end;)x+=1;if(A<x)return{level:p,lateralStart:A,lateralEnd:x}}return null}function lI(t,e){const n=z0((i,r,a)=>Lu(i),(i,r,a)=>{let{nextLevelNodes:l,thickness:d}=i,p=d+a,g=d/p,m,_=[];if(!l.length)m=e;else for(let x of l)if(m===void 0){let R=n(x,r,p);m=R[0],_.push(R[1])}else{let R=n(x,m,0);_.push(R[1])}let A=(m-r)*g;return[m-A,Object.assign(Object.assign({},i),{thickness:A,nextLevelNodes:_})]});return t.map(i=>n(i,0,0)[1])}function cI(t){let e=[];const n=z0((r,a,l)=>Lu(r),(r,a,l)=>{let d=Object.assign(Object.assign({},r),{levelCoord:a,stackDepth:l,stackForward:0});return e.push(d),d.stackForward=i(r.nextLevelNodes,a+r.thickness,l+1)+1});function i(r,a,l){let d=0;for(let p of r)d=Math.max(n(p,a,l),d);return d}return i(t,0,0),e}function z0(t,e){const n={};return(...i)=>{let r=t(...i);return r in n?n[r]:n[r]=e(...i)}}function _w(t,e,n=null,i=0){let r=[];if(n)for(let a=0;a<t.length;a+=1){let l=t[a],d=n.computeDateTop(l.start,e),p=Math.max(d+(i||0),n.computeDateTop(l.end,e));r.push({start:Math.round(d),end:Math.round(p)})}return r}function uI(t,e,n,i){let r=[],a=[];for(let g=0;g<t.length;g+=1){let m=e[g];m?r.push({index:g,thickness:1,span:m}):a.push(t[g])}let{segRects:l,hiddenGroups:d}=iI(r,n,i),p=[];for(let g of l)p.push({seg:t[g.index],rect:g});for(let g of a)p.push({seg:g,rect:null});return{segPlacements:p,hiddenGroups:d}}const dI=na({hour:"numeric",minute:"2-digit",meridiem:!1});class yE extends Xi{render(){return Fe(D0,Object.assign({},this.props,{elClasses:["fc-timegrid-event","fc-v-event",this.props.isShort&&"fc-timegrid-event-short"],defaultTimeFormat:dI}))}}class fI extends Xi{constructor(){super(...arguments),this.sortEventSegs=Nn(CC)}render(){let{props:e,context:n}=this,{options:i}=n,r=i.selectMirror,a=e.eventDrag&&e.eventDrag.segs||e.eventResize&&e.eventResize.segs||r&&e.dateSelectionSegs||[],l=e.eventDrag&&e.eventDrag.affectedInstances||e.eventResize&&e.eventResize.affectedInstances||{},d=this.sortEventSegs(e.fgEventSegs,i.eventOrder);return Fe(O0,{elTag:"td",elRef:e.elRef,elClasses:["fc-timegrid-col",...e.extraClassNames||[]],elAttrs:Object.assign({role:"gridcell"},e.extraDataAttrs),date:e.date,dateProfile:e.dateProfile,todayRange:e.todayRange,extraRenderProps:e.extraRenderProps},p=>Fe("div",{className:"fc-timegrid-col-frame"},Fe("div",{className:"fc-timegrid-col-bg"},this.renderFillSegs(e.businessHourSegs,"non-business"),this.renderFillSegs(e.bgEventSegs,"bg-event"),this.renderFillSegs(e.dateSelectionSegs,"highlight")),Fe("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(d,l,!1,!1,!1)),Fe("div",{className:"fc-timegrid-col-events"},this.renderFgSegs(a,{},!!e.eventDrag,!!e.eventResize,!!r,"mirror")),Fe("div",{className:"fc-timegrid-now-indicator-container"},this.renderNowIndicator(e.nowIndicatorSegs)),P0(i)&&Fe(p,{elTag:"div",elClasses:["fc-timegrid-col-misc"]})))}renderFgSegs(e,n,i,r,a,l){let{props:d}=this;return d.forPrint?xE(e,d):this.renderPositionedFgSegs(e,n,i,r,a,l)}renderPositionedFgSegs(e,n,i,r,a,l){let{eventMaxStack:d,eventShortHeight:p,eventOrderStrict:g,eventMinHeight:m}=this.context.options,{date:_,slatCoords:A,eventSelection:x,todayRange:R,nowDate:M}=this.props,k=i||r||a,I=_w(e,_,A,m),{segPlacements:Y,hiddenGroups:B}=uI(e,I,g,d);return Fe(Cr,null,this.renderHiddenGroups(B,e),Y.map(V=>{let{seg:ee,rect:ue}=V,_e=ee.eventRange.instance.instanceId,fe=k||!!(!n[_e]&&ue),G=Yv(ue&&ue.span),me=!k&&ue?this.computeSegHStyle(ue):{left:0,right:0},Z=!!ue&&ue.stackForward>0,J=!!ue&&ue.span.end-ue.span.start<p;return Fe("div",{className:"fc-timegrid-event-harness"+(Z?" fc-timegrid-event-harness-inset":""),key:l||_e,style:Object.assign(Object.assign({visibility:fe?"":"hidden"},G),me)},Fe(yE,Object.assign({seg:ee,isDragging:i,isResizing:r,isDateSelecting:a,isSelected:_e===x,isShort:J},eu(ee,R,M))))}))}renderHiddenGroups(e,n){let{extraDateSpan:i,dateProfile:r,todayRange:a,nowDate:l,eventSelection:d,eventDrag:p,eventResize:g}=this.props;return Fe(Cr,null,e.map(m=>{let _=Yv(m.span),A=hI(m.entries,n);return Fe(tI,{key:iC(QC(A)),hiddenSegs:A,top:_.top,bottom:_.bottom,extraDateSpan:i,dateProfile:r,todayRange:a,nowDate:l,eventSelection:d,eventDrag:p,eventResize:g})}))}renderFillSegs(e,n){let{props:i,context:r}=this,l=_w(e,i.date,i.slatCoords,r.options.eventMinHeight).map((d,p)=>{let g=e[p];return Fe("div",{key:AC(g.eventRange),className:"fc-timegrid-bg-harness",style:Yv(d)},n==="bg-event"?Fe(YC,Object.assign({seg:g},eu(g,i.todayRange,i.nowDate))):ZC(n))});return Fe(Cr,null,l)}renderNowIndicator(e){let{slatCoords:n,date:i}=this.props;return n?e.map((r,a)=>Fe(M0,{key:a,elClasses:["fc-timegrid-now-indicator-line"],elStyle:{top:n.computeDateTop(r.start,i)},isAxis:!1,date:i})):null}computeSegHStyle(e){let{isRtl:n,options:i}=this.context,r=i.slotEventOverlap,a=e.levelCoord,l=e.levelCoord+e.thickness,d,p;r&&(l=Math.min(1,a+(l-a)*2)),n?(d=1-l,p=a):(d=a,p=1-l);let g={zIndex:e.stackDepth+1,left:d*100+"%",right:p*100+"%"};return r&&!e.stackForward&&(g[n?"marginLeft":"marginRight"]=20),g}}function xE(t,{todayRange:e,nowDate:n,eventSelection:i,eventDrag:r,eventResize:a}){let l=(r?r.affectedInstances:null)||(a?a.affectedInstances:null)||{};return Fe(Cr,null,t.map(d=>{let p=d.eventRange.instance.instanceId;return Fe("div",{key:p,style:{visibility:l[p]?"hidden":""}},Fe(yE,Object.assign({seg:d,isDragging:!1,isResizing:!1,isDateSelecting:!1,isSelected:p===i,isShort:!1},eu(d,e,n))))}))}function Yv(t){return t?{top:t.start,bottom:-t.end}:{top:"",bottom:""}}function hI(t,e){return t.map(n=>e[n.index])}class pI extends Xi{constructor(){super(...arguments),this.splitFgEventSegs=Nn(Sf),this.splitBgEventSegs=Nn(Sf),this.splitBusinessHourSegs=Nn(Sf),this.splitNowIndicatorSegs=Nn(Sf),this.splitDateSelectionSegs=Nn(Sf),this.splitEventDrag=Nn(xw),this.splitEventResize=Nn(xw),this.rootElRef=ds(),this.cellElRefs=new vc}render(){let{props:e,context:n}=this,i=n.options.nowIndicator&&e.slatCoords&&e.slatCoords.safeComputeTop(e.nowDate),r=e.cells.length,a=this.splitFgEventSegs(e.fgEventSegs,r),l=this.splitBgEventSegs(e.bgEventSegs,r),d=this.splitBusinessHourSegs(e.businessHourSegs,r),p=this.splitNowIndicatorSegs(e.nowIndicatorSegs,r),g=this.splitDateSelectionSegs(e.dateSelectionSegs,r),m=this.splitEventDrag(e.eventDrag,r),_=this.splitEventResize(e.eventResize,r);return Fe("div",{className:"fc-timegrid-cols",ref:this.rootElRef},Fe("table",{role:"presentation",style:{minWidth:e.tableMinWidth,width:e.clientWidth}},e.tableColGroupNode,Fe("tbody",{role:"presentation"},Fe("tr",{role:"row"},e.axis&&Fe("td",{"aria-hidden":!0,className:"fc-timegrid-col fc-timegrid-axis"},Fe("div",{className:"fc-timegrid-col-frame"},Fe("div",{className:"fc-timegrid-now-indicator-container"},typeof i=="number"&&Fe(M0,{elClasses:["fc-timegrid-now-indicator-arrow"],elStyle:{top:i},isAxis:!0,date:e.nowDate})))),e.cells.map((A,x)=>Fe(fI,{key:A.key,elRef:this.cellElRefs.createRef(A.key),dateProfile:e.dateProfile,date:A.date,nowDate:e.nowDate,todayRange:e.todayRange,extraRenderProps:A.extraRenderProps,extraDataAttrs:A.extraDataAttrs,extraClassNames:A.extraClassNames,extraDateSpan:A.extraDateSpan,fgEventSegs:a[x],bgEventSegs:l[x],businessHourSegs:d[x],nowIndicatorSegs:p[x],dateSelectionSegs:g[x],eventDrag:m[x],eventResize:_[x],slatCoords:e.slatCoords,eventSelection:e.eventSelection,forPrint:e.forPrint}))))))}componentDidMount(){this.updateCoords()}componentDidUpdate(){this.updateCoords()}updateCoords(){let{props:e}=this;e.onColCoords&&e.clientWidth!==null&&e.onColCoords(new Nd(this.rootElRef.current,gI(this.cellElRefs.currentMap,e.cells),!0,!1))}}function gI(t,e){return e.map(n=>t[n.key])}class mI extends Ql{constructor(){super(...arguments),this.processSlotOptions=Nn(vI),this.state={slatCoords:null},this.handleRootEl=e=>{e?this.context.registerInteractiveComponent(this,{el:e,isHitComboAllowed:this.props.isHitComboAllowed}):this.context.unregisterInteractiveComponent(this)},this.handleScrollRequest=e=>{let{onScrollTopRequest:n}=this.props,{slatCoords:i}=this.state;if(n&&i){if(e.time){let r=i.computeTimeTop(e.time);r=Math.ceil(r),r&&(r+=1),n(r)}return!0}return!1},this.handleColCoords=e=>{this.colCoords=e},this.handleSlatCoords=e=>{this.setState({slatCoords:e}),this.props.onSlatCoords&&this.props.onSlatCoords(e)}}render(){let{props:e,state:n}=this;return Fe("div",{className:"fc-timegrid-body",ref:this.handleRootEl,style:{width:e.clientWidth,minWidth:e.tableMinWidth}},Fe(JP,{axis:e.axis,dateProfile:e.dateProfile,slatMetas:e.slatMetas,clientWidth:e.clientWidth,minHeight:e.expandRows?e.clientHeight:"",tableMinWidth:e.tableMinWidth,tableColGroupNode:e.axis?e.tableColGroupNode:null,onCoords:this.handleSlatCoords}),Fe(pI,{cells:e.cells,axis:e.axis,dateProfile:e.dateProfile,businessHourSegs:e.businessHourSegs,bgEventSegs:e.bgEventSegs,fgEventSegs:e.fgEventSegs,dateSelectionSegs:e.dateSelectionSegs,eventSelection:e.eventSelection,eventDrag:e.eventDrag,eventResize:e.eventResize,todayRange:e.todayRange,nowDate:e.nowDate,nowIndicatorSegs:e.nowIndicatorSegs,clientWidth:e.clientWidth,tableMinWidth:e.tableMinWidth,tableColGroupNode:e.tableColGroupNode,slatCoords:n.slatCoords,onColCoords:this.handleColCoords,forPrint:e.forPrint}))}componentDidMount(){this.scrollResponder=this.context.createScrollResponder(this.handleScrollRequest)}componentDidUpdate(e){this.scrollResponder.update(e.dateProfile!==this.props.dateProfile)}componentWillUnmount(){this.scrollResponder.detach()}queryHit(e,n){let{dateEnv:i,options:r}=this.context,{colCoords:a}=this,{dateProfile:l}=this.props,{slatCoords:d}=this.state,{snapDuration:p,snapsPerSlot:g}=this.processSlotOptions(this.props.slotDuration,r.snapDuration),m=a.leftToIndex(e),_=d.positions.topToIndex(n);if(m!=null&&_!=null){let A=this.props.cells[m],x=d.positions.tops[_],R=d.positions.getHeight(_),M=(n-x)/R,k=Math.floor(M*g),I=_*g+k,Y=this.props.cells[m].date,B=Sy(l.slotMinTime,iD(p,I)),V=i.add(Y,B),ee=i.add(V,p);return{dateProfile:l,dateSpan:Object.assign({range:{start:V,end:ee},allDay:!1},A.extraDateSpan),dayEl:a.els[m],rect:{left:a.lefts[m],right:a.rights[m],top:x,bottom:x+R},layer:0}}return null}}function vI(t,e){let n=e||t,i=d0(t,n);return i===null&&(n=t,i=1),{snapDuration:n,snapsPerSlot:i}}class yI extends UC{sliceRange(e,n){let i=[];for(let r=0;r<n.length;r+=1){let a=Nu(e,n[r]);a&&i.push({start:a.start,end:a.end,isStart:a.start.valueOf()===e.start.valueOf(),isEnd:a.end.valueOf()===e.end.valueOf(),col:r})}return i}}class xI extends Ql{constructor(){super(...arguments),this.buildDayRanges=Nn(bI),this.slicer=new yI,this.timeColsRef=ds()}render(){let{props:e,context:n}=this,{dateProfile:i,dayTableModel:r}=e,{nowIndicator:a,nextDayThreshold:l}=n.options,d=this.buildDayRanges(r,i,n.dateEnv);return Fe(Fd,{unit:a?"minute":"day"},(p,g)=>Fe(mI,Object.assign({ref:this.timeColsRef},this.slicer.sliceProps(e,i,null,n,d),{forPrint:e.forPrint,axis:e.axis,dateProfile:i,slatMetas:e.slatMetas,slotDuration:e.slotDuration,cells:r.cells[0],tableColGroupNode:e.tableColGroupNode,tableMinWidth:e.tableMinWidth,clientWidth:e.clientWidth,clientHeight:e.clientHeight,expandRows:e.expandRows,nowDate:p,nowIndicatorSegs:a&&this.slicer.sliceNowDate(p,i,l,n,d),todayRange:g,onScrollTopRequest:e.onScrollTopRequest,onSlatCoords:e.onSlatCoords})))}}function bI(t,e,n){let i=[];for(let r of t.headerDates)i.push({start:n.add(r,e.slotMinTime),end:n.add(r,e.slotMaxTime)});return i}const ww=[{hours:1},{minutes:30},{minutes:15},{seconds:30},{seconds:15}];function _I(t,e,n,i,r){let a=new Date(0),l=t,d=Ei(0),p=n||wI(i),g=[];for(;gl(l)<gl(e);){let m=r.add(a,l),_=d0(d,p)!==null;g.push({date:m,time:l,key:m.toISOString(),isoTimeStr:xD(m),isLabeled:_}),l=Sy(l,i),d=Sy(d,i)}return g}function wI(t){let e,n,i;for(e=ww.length-1;e>=0;e-=1)if(n=Ei(ww[e]),i=d0(n,t),i!==null&&i>1)return n;return t}class SI extends KP{constructor(){super(...arguments),this.buildTimeColsModel=Nn(CI),this.buildSlatMetas=Nn(_I)}render(){let{options:e,dateEnv:n,dateProfileGenerator:i}=this.context,{props:r}=this,{dateProfile:a}=r,l=this.buildTimeColsModel(a,i),d=this.allDaySplitter.splitProps(r),p=this.buildSlatMetas(a.slotMinTime,a.slotMaxTime,e.slotLabelInterval,e.slotDuration,n),{dayMinWidth:g}=e,m=!g,_=g,A=e.dayHeaders&&Fe(zC,{dates:l.headerDates,dateProfile:a,datesRepDistinctDays:!0,renderIntro:m?this.renderHeadAxis:null}),x=e.allDaySlot!==!1&&(M=>Fe(mE,Object.assign({},d.allDay,{dateProfile:a,dayTableModel:l,nextDayThreshold:e.nextDayThreshold,tableMinWidth:M.tableMinWidth,colGroupNode:M.tableColGroupNode,renderRowIntro:m?this.renderTableRowAxis:null,showWeekNumbers:!1,expandRows:!1,headerAlignElRef:this.headerElRef,clientWidth:M.clientWidth,clientHeight:M.clientHeight,forPrint:r.forPrint},this.getAllDayMaxEventProps()))),R=M=>Fe(xI,Object.assign({},d.timed,{dayTableModel:l,dateProfile:a,axis:m,slotDuration:e.slotDuration,slatMetas:p,forPrint:r.forPrint,tableColGroupNode:M.tableColGroupNode,tableMinWidth:M.tableMinWidth,clientWidth:M.clientWidth,clientHeight:M.clientHeight,onSlatCoords:this.handleSlatCoords,expandRows:M.expandRows,onScrollTopRequest:this.handleScrollTopRequest}));return _?this.renderHScrollLayout(A,x,R,l.colCnt,g,p,this.state.slatCoords):this.renderSimpleLayout(A,x,R)}}function CI(t,e){let n=new BC(t.renderRange,e);return new FC(n,!1)}var EI='.fc-v-event{background-color:var(--fc-event-bg-color);border:1px solid var(--fc-event-border-color);display:block}.fc-v-event .fc-event-main{color:var(--fc-event-text-color);height:100%}.fc-v-event .fc-event-main-frame{display:flex;flex-direction:column;height:100%}.fc-v-event .fc-event-time{flex-grow:0;flex-shrink:0;max-height:100%;overflow:hidden}.fc-v-event .fc-event-title-container{flex-grow:1;flex-shrink:1;min-height:0}.fc-v-event .fc-event-title{bottom:0;max-height:100%;overflow:hidden;top:0}.fc-v-event:not(.fc-event-start){border-top-left-radius:0;border-top-right-radius:0;border-top-width:0}.fc-v-event:not(.fc-event-end){border-bottom-left-radius:0;border-bottom-right-radius:0;border-bottom-width:0}.fc-v-event.fc-event-selected:before{left:-10px;right:-10px}.fc-v-event .fc-event-resizer-start{cursor:n-resize}.fc-v-event .fc-event-resizer-end{cursor:s-resize}.fc-v-event:not(.fc-event-selected) .fc-event-resizer{height:var(--fc-event-resizer-thickness);left:0;right:0}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-start{top:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event:not(.fc-event-selected) .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-thickness)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer{left:50%;margin-left:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-start{top:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc-v-event.fc-event-selected .fc-event-resizer-end{bottom:calc(var(--fc-event-resizer-dot-total-width)/-2)}.fc .fc-timegrid .fc-daygrid-body{z-index:2}.fc .fc-timegrid-divider{padding:0 0 2px}.fc .fc-timegrid-body{min-height:100%;position:relative;z-index:1}.fc .fc-timegrid-axis-chunk{position:relative}.fc .fc-timegrid-axis-chunk>table,.fc .fc-timegrid-slots{position:relative;z-index:1}.fc .fc-timegrid-slot{border-bottom:0;height:1.5em}.fc .fc-timegrid-slot:empty:before{content:"\\00a0"}.fc .fc-timegrid-slot-minor{border-top-style:dotted}.fc .fc-timegrid-slot-label-cushion{display:inline-block;white-space:nowrap}.fc .fc-timegrid-slot-label{vertical-align:middle}.fc .fc-timegrid-axis-cushion,.fc .fc-timegrid-slot-label-cushion{padding:0 4px}.fc .fc-timegrid-axis-frame-liquid{height:100%}.fc .fc-timegrid-axis-frame{align-items:center;display:flex;justify-content:flex-end;overflow:hidden}.fc .fc-timegrid-axis-cushion{flex-shrink:0;max-width:60px}.fc-direction-ltr .fc-timegrid-slot-label-frame{text-align:right}.fc-direction-rtl .fc-timegrid-slot-label-frame{text-align:left}.fc-liquid-hack .fc-timegrid-axis-frame-liquid{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col.fc-day-today{background-color:var(--fc-today-bg-color)}.fc .fc-timegrid-col-frame{min-height:100%;position:relative}.fc-media-screen.fc-liquid-hack .fc-timegrid-col-frame{bottom:0;height:auto;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols{bottom:0;left:0;position:absolute;right:0;top:0}.fc-media-screen .fc-timegrid-cols>table{height:100%}.fc-media-screen .fc-timegrid-col-bg,.fc-media-screen .fc-timegrid-col-events,.fc-media-screen .fc-timegrid-now-indicator-container{left:0;position:absolute;right:0;top:0}.fc .fc-timegrid-col-bg{z-index:2}.fc .fc-timegrid-col-bg .fc-non-business{z-index:1}.fc .fc-timegrid-col-bg .fc-bg-event{z-index:2}.fc .fc-timegrid-col-bg .fc-highlight{z-index:3}.fc .fc-timegrid-bg-harness{left:0;position:absolute;right:0}.fc .fc-timegrid-col-events{z-index:3}.fc .fc-timegrid-now-indicator-container{bottom:0;overflow:hidden}.fc-direction-ltr .fc-timegrid-col-events{margin:0 2.5% 0 2px}.fc-direction-rtl .fc-timegrid-col-events{margin:0 2px 0 2.5%}.fc-timegrid-event-harness{position:absolute}.fc-timegrid-event-harness>.fc-timegrid-event{bottom:0;left:0;position:absolute;right:0;top:0}.fc-timegrid-event-harness-inset .fc-timegrid-event,.fc-timegrid-event.fc-event-mirror,.fc-timegrid-more-link{box-shadow:0 0 0 1px var(--fc-page-bg-color)}.fc-timegrid-event,.fc-timegrid-more-link{border-radius:3px;font-size:var(--fc-small-font-size)}.fc-timegrid-event{margin-bottom:1px}.fc-timegrid-event .fc-event-main{padding:1px 1px 0}.fc-timegrid-event .fc-event-time{font-size:var(--fc-small-font-size);margin-bottom:1px;white-space:nowrap}.fc-timegrid-event-short .fc-event-main-frame{flex-direction:row;overflow:hidden}.fc-timegrid-event-short .fc-event-time:after{content:"\\00a0-\\00a0"}.fc-timegrid-event-short .fc-event-title{font-size:var(--fc-small-font-size)}.fc-timegrid-more-link{background:var(--fc-more-link-bg-color);color:var(--fc-more-link-text-color);cursor:pointer;margin-bottom:1px;position:absolute;z-index:9999}.fc-timegrid-more-link-inner{padding:3px 2px;top:0}.fc-direction-ltr .fc-timegrid-more-link{right:0}.fc-direction-rtl .fc-timegrid-more-link{left:0}.fc .fc-timegrid-now-indicator-arrow,.fc .fc-timegrid-now-indicator-line{pointer-events:none}.fc .fc-timegrid-now-indicator-line{border-color:var(--fc-now-indicator-color);border-style:solid;border-width:1px 0 0;left:0;position:absolute;right:0;z-index:4}.fc .fc-timegrid-now-indicator-arrow{border-color:var(--fc-now-indicator-color);border-style:solid;margin-top:-5px;position:absolute;z-index:4}.fc-direction-ltr .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 0 5px 6px;left:0}.fc-direction-rtl .fc-timegrid-now-indicator-arrow{border-bottom-color:transparent;border-top-color:transparent;border-width:5px 6px 5px 0;right:0}';o0(EI);const AI={allDaySlot:Boolean};var LI=Ec({name:"@fullcalendar/timegrid",initialView:"timeGridWeek",optionRefiners:AI,views:{timeGrid:{component:SI,usesMinMaxTime:!0,allDaySlot:!0,slotDuration:"00:30:00",slotEventOverlap:!0},timeGridDay:{type:"timeGrid",duration:{days:1}},timeGridWeek:{type:"timeGrid",duration:{weeks:1}}}});k0.touchMouseIgnoreWait=500;let Dy=0,ag=0,My=!1;class bE{constructor(e){this.subjectEl=null,this.selector="",this.handleSelector="",this.shouldIgnoreMove=!1,this.shouldWatchScroll=!0,this.isDragging=!1,this.isTouchDragging=!1,this.wasTouchScroll=!1,this.handleMouseDown=n=>{if(!this.shouldIgnoreMouse()&&TI(n)&&this.tryStart(n)){let i=this.createEventFromMouse(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i),this.shouldIgnoreMove||document.addEventListener("mousemove",this.handleMouseMove),document.addEventListener("mouseup",this.handleMouseUp)}},this.handleMouseMove=n=>{let i=this.createEventFromMouse(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleMouseUp=n=>{document.removeEventListener("mousemove",this.handleMouseMove),document.removeEventListener("mouseup",this.handleMouseUp),this.emitter.trigger("pointerup",this.createEventFromMouse(n)),this.cleanup()},this.handleTouchStart=n=>{if(this.tryStart(n)){this.isTouchDragging=!0;let i=this.createEventFromTouch(n,!0);this.emitter.trigger("pointerdown",i),this.initScrollWatch(i);let r=n.target;this.shouldIgnoreMove||r.addEventListener("touchmove",this.handleTouchMove),r.addEventListener("touchend",this.handleTouchEnd),r.addEventListener("touchcancel",this.handleTouchEnd),window.addEventListener("scroll",this.handleTouchScroll,!0)}},this.handleTouchMove=n=>{let i=this.createEventFromTouch(n);this.recordCoords(i),this.emitter.trigger("pointermove",i)},this.handleTouchEnd=n=>{if(this.isDragging){let i=n.target;i.removeEventListener("touchmove",this.handleTouchMove),i.removeEventListener("touchend",this.handleTouchEnd),i.removeEventListener("touchcancel",this.handleTouchEnd),window.removeEventListener("scroll",this.handleTouchScroll,!0),this.emitter.trigger("pointerup",this.createEventFromTouch(n)),this.cleanup(),this.isTouchDragging=!1,jI()}},this.handleTouchScroll=()=>{this.wasTouchScroll=!0},this.handleScroll=n=>{if(!this.shouldIgnoreMove){let i=window.scrollX-this.prevScrollX+this.prevPageX,r=window.scrollY-this.prevScrollY+this.prevPageY;this.emitter.trigger("pointermove",{origEvent:n,isTouch:this.isTouchDragging,subjectEl:this.subjectEl,pageX:i,pageY:r,deltaX:i-this.origPageX,deltaY:r-this.origPageY})}},this.containerEl=e,this.emitter=new Ag,e.addEventListener("mousedown",this.handleMouseDown),e.addEventListener("touchstart",this.handleTouchStart,{passive:!0}),kI()}destroy(){this.containerEl.removeEventListener("mousedown",this.handleMouseDown),this.containerEl.removeEventListener("touchstart",this.handleTouchStart,{passive:!0}),RI()}tryStart(e){let n=this.querySubjectEl(e),i=e.target;return n&&(!this.handleSelector||Qo(i,this.handleSelector))?(this.subjectEl=n,this.isDragging=!0,this.wasTouchScroll=!1,!0):!1}cleanup(){My=!1,this.isDragging=!1,this.subjectEl=null,this.destroyScrollWatch()}querySubjectEl(e){return this.selector?Qo(e.target,this.selector):this.containerEl}shouldIgnoreMouse(){return Dy||this.isTouchDragging}cancelTouchScroll(){this.isDragging&&(My=!0)}initScrollWatch(e){this.shouldWatchScroll&&(this.recordCoords(e),window.addEventListener("scroll",this.handleScroll,!0))}recordCoords(e){this.shouldWatchScroll&&(this.prevPageX=e.pageX,this.prevPageY=e.pageY,this.prevScrollX=window.scrollX,this.prevScrollY=window.scrollY)}destroyScrollWatch(){this.shouldWatchScroll&&window.removeEventListener("scroll",this.handleScroll,!0)}createEventFromMouse(e,n){let i=0,r=0;return n?(this.origPageX=e.pageX,this.origPageY=e.pageY):(i=e.pageX-this.origPageX,r=e.pageY-this.origPageY),{origEvent:e,isTouch:!1,subjectEl:this.subjectEl,pageX:e.pageX,pageY:e.pageY,deltaX:i,deltaY:r}}createEventFromTouch(e,n){let i=e.touches,r,a,l=0,d=0;return i&&i.length?(r=i[0].pageX,a=i[0].pageY):(r=e.pageX,a=e.pageY),n?(this.origPageX=r,this.origPageY=a):(l=r-this.origPageX,d=a-this.origPageY),{origEvent:e,isTouch:!0,subjectEl:this.subjectEl,pageX:r,pageY:a,deltaX:l,deltaY:d}}}function TI(t){return t.button===0&&!t.ctrlKey}function jI(){Dy+=1,setTimeout(()=>{Dy-=1},k0.touchMouseIgnoreWait)}function kI(){ag+=1,ag===1&&window.addEventListener("touchmove",_E,{passive:!1})}function RI(){ag-=1,ag||window.removeEventListener("touchmove",_E,{passive:!1})}function _E(t){My&&t.preventDefault()}class NI{constructor(){this.isVisible=!1,this.sourceEl=null,this.mirrorEl=null,this.sourceElRect=null,this.parentNode=document.body,this.zIndex=9999,this.revertDuration=0}start(e,n,i){this.sourceEl=e,this.sourceElRect=this.sourceEl.getBoundingClientRect(),this.origScreenX=n-window.scrollX,this.origScreenY=i-window.scrollY,this.deltaX=0,this.deltaY=0,this.updateElPosition()}handleMove(e,n){this.deltaX=e-window.scrollX-this.origScreenX,this.deltaY=n-window.scrollY-this.origScreenY,this.updateElPosition()}setIsVisible(e){e?this.isVisible||(this.mirrorEl&&(this.mirrorEl.style.display=""),this.isVisible=e,this.updateElPosition()):this.isVisible&&(this.mirrorEl&&(this.mirrorEl.style.display="none"),this.isVisible=e)}stop(e,n){let i=()=>{this.cleanup(),n()};e&&this.mirrorEl&&this.isVisible&&this.revertDuration&&(this.deltaX||this.deltaY)?this.doRevertAnimation(i,this.revertDuration):setTimeout(i,0)}doRevertAnimation(e,n){let i=this.mirrorEl,r=this.sourceEl.getBoundingClientRect();i.style.transition="top "+n+"ms,left "+n+"ms",Rf(i,{left:r.left,top:r.top}),HN(i,()=>{i.style.transition="",e()})}cleanup(){this.mirrorEl&&(l0(this.mirrorEl),this.mirrorEl=null),this.sourceEl=null}updateElPosition(){this.sourceEl&&this.isVisible&&Rf(this.getMirrorEl(),{left:this.sourceElRect.left+this.deltaX,top:this.sourceElRect.top+this.deltaY})}getMirrorEl(){let e=this.sourceElRect,n=this.mirrorEl;return n||(n=this.mirrorEl=this.sourceEl.cloneNode(!0),n.style.userSelect="none",n.style.webkitUserSelect="none",n.style.pointerEvents="none",n.classList.add("fc-event-dragging"),Rf(n,{position:"fixed",zIndex:this.zIndex,visibility:"",boxSizing:"border-box",width:e.right-e.left,height:e.bottom-e.top,right:"auto",bottom:"auto",margin:0}),this.parentNode.appendChild(n)),n}}class wE extends T0{constructor(e,n){super(),this.handleScroll=()=>{this.scrollTop=this.scrollController.getScrollTop(),this.scrollLeft=this.scrollController.getScrollLeft(),this.handleScrollChange()},this.scrollController=e,this.doesListening=n,this.scrollTop=this.origScrollTop=e.getScrollTop(),this.scrollLeft=this.origScrollLeft=e.getScrollLeft(),this.scrollWidth=e.getScrollWidth(),this.scrollHeight=e.getScrollHeight(),this.clientWidth=e.getClientWidth(),this.clientHeight=e.getClientHeight(),this.clientRect=this.computeClientRect(),this.doesListening&&this.getEventTarget().addEventListener("scroll",this.handleScroll)}destroy(){this.doesListening&&this.getEventTarget().removeEventListener("scroll",this.handleScroll)}getScrollTop(){return this.scrollTop}getScrollLeft(){return this.scrollLeft}setScrollTop(e){this.scrollController.setScrollTop(e),this.doesListening||(this.scrollTop=Math.max(Math.min(e,this.getMaxScrollTop()),0),this.handleScrollChange())}setScrollLeft(e){this.scrollController.setScrollLeft(e),this.doesListening||(this.scrollLeft=Math.max(Math.min(e,this.getMaxScrollLeft()),0),this.handleScrollChange())}getClientWidth(){return this.clientWidth}getClientHeight(){return this.clientHeight}getScrollWidth(){return this.scrollWidth}getScrollHeight(){return this.scrollHeight}handleScrollChange(){}}class SE extends wE{constructor(e,n){super(new fM(e),n)}getEventTarget(){return this.scrollController.el}computeClientRect(){return uM(this.scrollController.el)}}class DI extends wE{constructor(e){super(new hM,e)}getEventTarget(){return window}computeClientRect(){return{left:this.scrollLeft,right:this.scrollLeft+this.clientWidth,top:this.scrollTop,bottom:this.scrollTop+this.clientHeight}}handleScrollChange(){this.clientRect=this.computeClientRect()}}const Sw=typeof performance=="function"?performance.now:Date.now;class MI{constructor(){this.isEnabled=!0,this.scrollQuery=[window,".fc-scroller"],this.edgeThreshold=50,this.maxVelocity=300,this.pointerScreenX=null,this.pointerScreenY=null,this.isAnimating=!1,this.scrollCaches=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.animate=()=>{if(this.isAnimating){let e=this.computeBestEdge(this.pointerScreenX+window.scrollX,this.pointerScreenY+window.scrollY);if(e){let n=Sw();this.handleSide(e,(n-this.msSinceRequest)/1e3),this.requestAnimation(n)}else this.isAnimating=!1}}}start(e,n,i){this.isEnabled&&(this.scrollCaches=this.buildCaches(i),this.pointerScreenX=null,this.pointerScreenY=null,this.everMovedUp=!1,this.everMovedDown=!1,this.everMovedLeft=!1,this.everMovedRight=!1,this.handleMove(e,n))}handleMove(e,n){if(this.isEnabled){let i=e-window.scrollX,r=n-window.scrollY,a=this.pointerScreenY===null?0:r-this.pointerScreenY,l=this.pointerScreenX===null?0:i-this.pointerScreenX;a<0?this.everMovedUp=!0:a>0&&(this.everMovedDown=!0),l<0?this.everMovedLeft=!0:l>0&&(this.everMovedRight=!0),this.pointerScreenX=i,this.pointerScreenY=r,this.isAnimating||(this.isAnimating=!0,this.requestAnimation(Sw()))}}stop(){if(this.isEnabled){this.isAnimating=!1;for(let e of this.scrollCaches)e.destroy();this.scrollCaches=null}}requestAnimation(e){this.msSinceRequest=e,requestAnimationFrame(this.animate)}handleSide(e,n){let{scrollCache:i}=e,{edgeThreshold:r}=this,a=r-e.distance,l=a*a/(r*r)*this.maxVelocity*n,d=1;switch(e.name){case"left":d=-1;case"right":i.setScrollLeft(i.getScrollLeft()+l*d);break;case"top":d=-1;case"bottom":i.setScrollTop(i.getScrollTop()+l*d);break}}computeBestEdge(e,n){let{edgeThreshold:i}=this,r=null,a=this.scrollCaches||[];for(let l of a){let d=l.clientRect,p=e-d.left,g=d.right-e,m=n-d.top,_=d.bottom-n;p>=0&&g>=0&&m>=0&&_>=0&&(m<=i&&this.everMovedUp&&l.canScrollUp()&&(!r||r.distance>m)&&(r={scrollCache:l,name:"top",distance:m}),_<=i&&this.everMovedDown&&l.canScrollDown()&&(!r||r.distance>_)&&(r={scrollCache:l,name:"bottom",distance:_}),p<=i&&this.everMovedLeft&&l.canScrollLeft()&&(!r||r.distance>p)&&(r={scrollCache:l,name:"left",distance:p}),g<=i&&this.everMovedRight&&l.canScrollRight()&&(!r||r.distance>g)&&(r={scrollCache:l,name:"right",distance:g}))}return r}buildCaches(e){return this.queryScrollEls(e).map(n=>n===window?new DI(!1):new SE(n,!1))}queryScrollEls(e){let n=[];for(let i of this.scrollQuery)typeof i=="object"?n.push(i):n.push(...Array.prototype.slice.call(e.getRootNode().querySelectorAll(i)));return n}}class nh extends mM{constructor(e,n){super(e),this.containerEl=e,this.delay=null,this.minDistance=0,this.touchScrollAllowed=!0,this.mirrorNeedsRevert=!1,this.isInteracting=!1,this.isDragging=!1,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,this.delayTimeoutId=null,this.onPointerDown=r=>{this.isDragging||(this.isInteracting=!0,this.isDelayEnded=!1,this.isDistanceSurpassed=!1,qN(document.body),GN(document.body),r.isTouch||r.origEvent.preventDefault(),this.emitter.trigger("pointerdown",r),this.isInteracting&&!this.pointer.shouldIgnoreMove&&(this.mirror.setIsVisible(!1),this.mirror.start(r.subjectEl,r.pageX,r.pageY),this.startDelay(r),this.minDistance||this.handleDistanceSurpassed(r)))},this.onPointerMove=r=>{if(this.isInteracting){if(this.emitter.trigger("pointermove",r),!this.isDistanceSurpassed){let a=this.minDistance,l,{deltaX:d,deltaY:p}=r;l=d*d+p*p,l>=a*a&&this.handleDistanceSurpassed(r)}this.isDragging&&(r.origEvent.type!=="scroll"&&(this.mirror.handleMove(r.pageX,r.pageY),this.autoScroller.handleMove(r.pageX,r.pageY)),this.emitter.trigger("dragmove",r))}},this.onPointerUp=r=>{this.isInteracting&&(this.isInteracting=!1,WN(document.body),VN(document.body),this.emitter.trigger("pointerup",r),this.isDragging&&(this.autoScroller.stop(),this.tryStopDrag(r)),this.delayTimeoutId&&(clearTimeout(this.delayTimeoutId),this.delayTimeoutId=null))};let i=this.pointer=new bE(e);i.emitter.on("pointerdown",this.onPointerDown),i.emitter.on("pointermove",this.onPointerMove),i.emitter.on("pointerup",this.onPointerUp),n&&(i.selector=n),this.mirror=new NI,this.autoScroller=new MI}destroy(){this.pointer.destroy(),this.onPointerUp({})}startDelay(e){typeof this.delay=="number"?this.delayTimeoutId=setTimeout(()=>{this.delayTimeoutId=null,this.handleDelayEnd(e)},this.delay):this.handleDelayEnd(e)}handleDelayEnd(e){this.isDelayEnded=!0,this.tryStartDrag(e)}handleDistanceSurpassed(e){this.isDistanceSurpassed=!0,this.tryStartDrag(e)}tryStartDrag(e){this.isDelayEnded&&this.isDistanceSurpassed&&(!this.pointer.wasTouchScroll||this.touchScrollAllowed)&&(this.isDragging=!0,this.mirrorNeedsRevert=!1,this.autoScroller.start(e.pageX,e.pageY,this.containerEl),this.emitter.trigger("dragstart",e),this.touchScrollAllowed===!1&&this.pointer.cancelTouchScroll())}tryStopDrag(e){this.mirror.stop(this.mirrorNeedsRevert,this.stopDrag.bind(this,e))}stopDrag(e){this.isDragging=!1,this.emitter.trigger("dragend",e)}setIgnoreMove(e){this.pointer.shouldIgnoreMove=e}setMirrorIsVisible(e){this.mirror.setIsVisible(e)}setMirrorNeedsRevert(e){this.mirrorNeedsRevert=e}setAutoScrollEnabled(e){this.autoScroller.isEnabled=e}}class OI{constructor(e){this.el=e,this.origRect=L0(e),this.scrollCaches=MC(e).map(n=>new SE(n,!0))}destroy(){for(let e of this.scrollCaches)e.destroy()}computeLeft(){let e=this.origRect.left;for(let n of this.scrollCaches)e+=n.origScrollLeft-n.getScrollLeft();return e}computeTop(){let e=this.origRect.top;for(let n of this.scrollCaches)e+=n.origScrollTop-n.getScrollTop();return e}isWithinClipping(e,n){let i={left:e,top:n};for(let r of this.scrollCaches)if(!PI(r.getEventTarget())&&!Q8(i,r.clientRect))return!1;return!0}}function PI(t){let e=t.tagName;return e==="HTML"||e==="BODY"}class Lg{constructor(e,n){this.useSubjectCenter=!1,this.requireInitial=!0,this.disablePointCheck=!1,this.initialHit=null,this.movingHit=null,this.finalHit=null,this.handlePointerDown=i=>{let{dragging:r}=this;this.initialHit=null,this.movingHit=null,this.finalHit=null,this.prepareHits(),this.processFirstCoord(i),this.initialHit||!this.requireInitial?(r.setIgnoreMove(!1),this.emitter.trigger("pointerdown",i)):r.setIgnoreMove(!0)},this.handleDragStart=i=>{this.emitter.trigger("dragstart",i),this.handleMove(i,!0)},this.handleDragMove=i=>{this.emitter.trigger("dragmove",i),this.handleMove(i)},this.handlePointerUp=i=>{this.releaseHits(),this.emitter.trigger("pointerup",i)},this.handleDragEnd=i=>{this.movingHit&&this.emitter.trigger("hitupdate",null,!0,i),this.finalHit=this.movingHit,this.movingHit=null,this.emitter.trigger("dragend",i)},this.droppableStore=n,e.emitter.on("pointerdown",this.handlePointerDown),e.emitter.on("dragstart",this.handleDragStart),e.emitter.on("dragmove",this.handleDragMove),e.emitter.on("pointerup",this.handlePointerUp),e.emitter.on("dragend",this.handleDragEnd),this.dragging=e,this.emitter=new Ag}processFirstCoord(e){let n={left:e.pageX,top:e.pageY},i=n,r=e.subjectEl,a;r instanceof HTMLElement&&(a=L0(r),i=$8(i,a));let l=this.initialHit=this.queryHitForOffset(i.left,i.top);if(l){if(this.useSubjectCenter&&a){let d=RC(a,l.rect);d&&(i=J8(d))}this.coordAdjust=eM(i,n)}else this.coordAdjust={left:0,top:0}}handleMove(e,n){let i=this.queryHitForOffset(e.pageX+this.coordAdjust.left,e.pageY+this.coordAdjust.top);(n||!Tg(this.movingHit,i))&&(this.movingHit=i,this.emitter.trigger("hitupdate",i,!1,e))}prepareHits(){this.offsetTrackers=Sc(this.droppableStore,e=>(e.component.prepareHits(),new OI(e.el)))}releaseHits(){let{offsetTrackers:e}=this;for(let n in e)e[n].destroy();this.offsetTrackers={}}queryHitForOffset(e,n){let{droppableStore:i,offsetTrackers:r}=this,a=null;for(let l in i){let d=i[l].component,p=r[l];if(p&&p.isWithinClipping(e,n)){let g=p.computeLeft(),m=p.computeTop(),_=e-g,A=n-m,{origRect:x}=p,R=x.right-x.left,M=x.bottom-x.top;if(_>=0&&_<R&&A>=0&&A<M){let k=d.queryHit(_,A,R,M);k&&Cg(k.dateProfile.activeRange,k.dateSpan.range)&&(this.disablePointCheck||p.el.contains(p.el.getRootNode().elementFromPoint(_+g-window.scrollX,A+m-window.scrollY)))&&(!a||k.layer>a.layer)&&(k.componentId=l,k.context=d.context,k.rect.left+=g,k.rect.right+=g,k.rect.top+=m,k.rect.bottom+=m,a=k)}}}return a}}function Tg(t,e){return!t&&!e?!0:!!t!=!!e?!1:F8(t.dateSpan,e.dateSpan)}function CE(t,e){let n={};for(let i of e.pluginHooks.datePointTransforms)Object.assign(n,i(t,e));return Object.assign(n,II(t,e.dateEnv)),n}function II(t,e){return{date:e.toDate(t.range.start),dateStr:e.formatIso(t.range.start,{omitTime:t.allDay}),allDay:t.allDay}}class zI extends Bd{constructor(e){super(e),this.handlePointerDown=i=>{let{dragging:r}=this,a=i.origEvent.target;r.setIgnoreMove(!this.component.isValidDateDownEl(a))},this.handleDragEnd=i=>{let{component:r}=this,{pointer:a}=this.dragging;if(!a.wasTouchScroll){let{initialHit:l,finalHit:d}=this.hitDragging;if(l&&d&&Tg(l,d)){let{context:p}=r,g=Object.assign(Object.assign({},CE(l.dateSpan,p)),{dayEl:l.dayEl,jsEvent:i.origEvent,view:p.viewApi||p.calendarApi.view});p.emitter.trigger("dateClick",g)}}},this.dragging=new nh(e.el),this.dragging.autoScroller.isEnabled=!1;let n=this.hitDragging=new Lg(this.dragging,E0(e));n.emitter.on("pointerdown",this.handlePointerDown),n.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}}class BI extends Bd{constructor(e){super(e),this.dragSelection=null,this.handlePointerDown=l=>{let{component:d,dragging:p}=this,{options:g}=d.context,m=g.selectable&&d.isValidDateDownEl(l.origEvent.target);p.setIgnoreMove(!m),p.delay=l.isTouch?FI(d):null},this.handleDragStart=l=>{this.component.context.calendarApi.unselect(l)},this.handleHitUpdate=(l,d)=>{let{context:p}=this.component,g=null,m=!1;if(l){let _=this.hitDragging.initialHit;l.componentId===_.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(_,l)||(g=UI(_,l,p.pluginHooks.dateSelectionTransformers)),(!g||!wM(g,l.dateProfile,p))&&(m=!0,g=null)}g?p.dispatch({type:"SELECT_DATES",selection:g}):d||p.dispatch({type:"UNSELECT_DATES"}),m?c0():u0(),d||(this.dragSelection=g)},this.handlePointerUp=l=>{this.dragSelection&&(_C(this.dragSelection,l,this.component.context),this.dragSelection=null)};let{component:n}=e,{options:i}=n.context,r=this.dragging=new nh(e.el);r.touchScrollAllowed=!1,r.minDistance=i.selectMinDistance||0,r.autoScroller.isEnabled=i.dragScroll;let a=this.hitDragging=new Lg(this.dragging,E0(e));a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp)}destroy(){this.dragging.destroy()}}function FI(t){let{options:e}=t.context,n=e.selectLongPressDelay;return n==null&&(n=e.longPressDelay),n}function UI(t,e,n){let i=t.dateSpan,r=e.dateSpan,a=[i.range.start,i.range.end,r.range.start,r.range.end];a.sort(QN);let l={};for(let d of n){let p=d(t,e);if(p===!1)return null;p&&Object.assign(l,p)}return l.range={start:a[0],end:a[3]},l.allDay=i.allDay,l}class ih extends Bd{constructor(e){super(e),this.subjectEl=null,this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=l=>{let d=l.origEvent.target,{component:p,dragging:g}=this,{mirror:m}=g,{options:_}=p.context,A=p.context;this.subjectEl=l.subjectEl;let x=this.subjectSeg=Rd(l.subjectEl),M=(this.eventRange=x.eventRange).instance.instanceId;this.relevantEvents=_0(A.getCurrentData().eventStore,M),g.minDistance=l.isTouch?0:_.eventDragMinDistance,g.delay=l.isTouch&&M!==p.props.eventSelection?qI(p):null,_.fixedMirrorParent?m.parentNode=_.fixedMirrorParent:m.parentNode=Qo(d,".fc"),m.revertDuration=_.dragRevertDuration;let k=p.isValidSegDownEl(d)&&!Qo(d,".fc-event-resizer");g.setIgnoreMove(!k),this.isDragging=k&&l.subjectEl.classList.contains("fc-event-draggable")},this.handleDragStart=l=>{let d=this.component.context,p=this.eventRange,g=p.instance.instanceId;l.isTouch?g!==this.component.props.eventSelection&&d.dispatch({type:"SELECT_EVENT",eventInstanceId:g}):d.dispatch({type:"UNSELECT_EVENT"}),this.isDragging&&(d.calendarApi.unselect(l),d.emitter.trigger("eventDragStart",{el:this.subjectEl,event:new Hr(d,p.def,p.instance),jsEvent:l.origEvent,view:d.viewApi}))},this.handleHitUpdate=(l,d)=>{if(!this.isDragging)return;let p=this.relevantEvents,g=this.hitDragging.initialHit,m=this.component.context,_=null,A=null,x=null,R=!1,M={affectedEvents:p,mutatedEvents:Zs(),isEvent:!0};if(l){_=l.context;let k=_.options;m===_||k.editable&&k.droppable?(A=HI(g,l,this.eventRange.instance.range.start,_.getCurrentData().pluginHooks.eventDragMutationMassagers),A&&(x=C0(p,_.getCurrentData().eventUiBases,A,_),M.mutatedEvents=x,HC(M,l.dateProfile,_)||(R=!0,A=null,x=null,M.mutatedEvents=Zs()))):_=null}this.displayDrag(_,M),R?c0():u0(),d||(m===_&&Tg(g,l)&&(A=null),this.dragging.setMirrorNeedsRevert(!A),this.dragging.setMirrorIsVisible(!l||!this.subjectEl.getRootNode().querySelector(".fc-event-mirror")),this.receivingContext=_,this.validMutation=A,this.mutatedRelevantEvents=x)},this.handlePointerUp=()=>{this.isDragging||this.cleanup()},this.handleDragEnd=l=>{if(this.isDragging){let d=this.component.context,p=d.viewApi,{receivingContext:g,validMutation:m}=this,_=this.eventRange.def,A=this.eventRange.instance,x=new Hr(d,_,A),R=this.relevantEvents,M=this.mutatedRelevantEvents,{finalHit:k}=this.hitDragging;if(this.clearDrag(),d.emitter.trigger("eventDragStop",{el:this.subjectEl,event:x,jsEvent:l.origEvent,view:p}),m){if(g===d){let I=new Hr(d,M.defs[_.defId],A?M.instances[A.instanceId]:null);d.dispatch({type:"MERGE_EVENTS",eventStore:M});let Y={oldEvent:x,event:I,relatedEvents:Au(M,d,A),revert(){d.dispatch({type:"MERGE_EVENTS",eventStore:R})}},B={};for(let V of d.getCurrentData().pluginHooks.eventDropTransformers)Object.assign(B,V(m,d));d.emitter.trigger("eventDrop",Object.assign(Object.assign(Object.assign({},Y),B),{el:l.subjectEl,delta:m.datesDelta,jsEvent:l.origEvent,view:p})),d.emitter.trigger("eventChange",Y)}else if(g){let I={event:x,relatedEvents:Au(R,d,A),revert(){d.dispatch({type:"MERGE_EVENTS",eventStore:R})}};d.emitter.trigger("eventLeave",Object.assign(Object.assign({},I),{draggedEl:l.subjectEl,view:p})),d.dispatch({type:"REMOVE_EVENTS",eventStore:R}),d.emitter.trigger("eventRemove",I);let Y=M.defs[_.defId],B=M.instances[A.instanceId],V=new Hr(g,Y,B);g.dispatch({type:"MERGE_EVENTS",eventStore:M});let ee={event:V,relatedEvents:Au(M,g,B),revert(){g.dispatch({type:"REMOVE_EVENTS",eventStore:M})}};g.emitter.trigger("eventAdd",ee),l.isTouch&&g.dispatch({type:"SELECT_EVENT",eventInstanceId:A.instanceId}),g.emitter.trigger("drop",Object.assign(Object.assign({},CE(k.dateSpan,g)),{draggedEl:l.subjectEl,jsEvent:l.origEvent,view:k.context.viewApi})),g.emitter.trigger("eventReceive",Object.assign(Object.assign({},ee),{draggedEl:l.subjectEl,view:k.context.viewApi}))}}else d.emitter.trigger("_noEventDrop")}this.cleanup()};let{component:n}=this,{options:i}=n.context,r=this.dragging=new nh(e.el);r.pointer.selector=ih.SELECTOR,r.touchScrollAllowed=!1,r.autoScroller.isEnabled=i.dragScroll;let a=this.hitDragging=new Lg(this.dragging,Ty);a.useSubjectCenter=e.useEventCenter,a.emitter.on("pointerdown",this.handlePointerDown),a.emitter.on("dragstart",this.handleDragStart),a.emitter.on("hitupdate",this.handleHitUpdate),a.emitter.on("pointerup",this.handlePointerUp),a.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}displayDrag(e,n){let i=this.component.context,r=this.receivingContext;r&&r!==e&&(r===i?r.dispatch({type:"SET_EVENT_DRAG",state:{affectedEvents:n.affectedEvents,mutatedEvents:Zs(),isEvent:!0}}):r.dispatch({type:"UNSET_EVENT_DRAG"})),e&&e.dispatch({type:"SET_EVENT_DRAG",state:n})}clearDrag(){let e=this.component.context,{receivingContext:n}=this;n&&n.dispatch({type:"UNSET_EVENT_DRAG"}),e!==n&&e.dispatch({type:"UNSET_EVENT_DRAG"})}cleanup(){this.subjectSeg=null,this.isDragging=!1,this.eventRange=null,this.relevantEvents=null,this.receivingContext=null,this.validMutation=null,this.mutatedRelevantEvents=null}}ih.SELECTOR=".fc-event-draggable, .fc-event-resizable";function HI(t,e,n,i){let r=t.dateSpan,a=e.dateSpan,l=r.range.start,d=a.range.start,p={};r.allDay!==a.allDay&&(p.allDay=a.allDay,p.hasEnd=e.context.options.allDayMaintainDuration,a.allDay?l=Er(n):l=n);let g=xd(l,d,t.context.dateEnv,t.componentId===e.componentId?t.largeUnit:null);g.milliseconds&&(p.allDay=!1);let m={datesDelta:g,standardProps:p};for(let _ of i)_(m,t,e);return m}function qI(t){let{options:e}=t.context,n=e.eventLongPressDelay;return n==null&&(n=e.longPressDelay),n}class WI extends Bd{constructor(e){super(e),this.draggingSegEl=null,this.draggingSeg=null,this.eventRange=null,this.relevantEvents=null,this.validMutation=null,this.mutatedRelevantEvents=null,this.handlePointerDown=a=>{let{component:l}=this,d=this.querySegEl(a),p=Rd(d),g=this.eventRange=p.eventRange;this.dragging.minDistance=l.context.options.eventDragMinDistance,this.dragging.setIgnoreMove(!this.component.isValidSegDownEl(a.origEvent.target)||a.isTouch&&this.component.props.eventSelection!==g.instance.instanceId)},this.handleDragStart=a=>{let{context:l}=this.component,d=this.eventRange;this.relevantEvents=_0(l.getCurrentData().eventStore,this.eventRange.instance.instanceId);let p=this.querySegEl(a);this.draggingSegEl=p,this.draggingSeg=Rd(p),l.calendarApi.unselect(),l.emitter.trigger("eventResizeStart",{el:p,event:new Hr(l,d.def,d.instance),jsEvent:a.origEvent,view:l.viewApi})},this.handleHitUpdate=(a,l,d)=>{let{context:p}=this.component,g=this.relevantEvents,m=this.hitDragging.initialHit,_=this.eventRange.instance,A=null,x=null,R=!1,M={affectedEvents:g,mutatedEvents:Zs(),isEvent:!0};a&&(a.componentId===m.componentId&&this.isHitComboAllowed&&!this.isHitComboAllowed(m,a)||(A=GI(m,a,d.subjectEl.classList.contains("fc-event-resizer-start"),_.range))),A&&(x=C0(g,p.getCurrentData().eventUiBases,A,p),M.mutatedEvents=x,HC(M,a.dateProfile,p)||(R=!0,A=null,x=null,M.mutatedEvents=null)),x?p.dispatch({type:"SET_EVENT_RESIZE",state:M}):p.dispatch({type:"UNSET_EVENT_RESIZE"}),R?c0():u0(),l||(A&&Tg(m,a)&&(A=null),this.validMutation=A,this.mutatedRelevantEvents=x)},this.handleDragEnd=a=>{let{context:l}=this.component,d=this.eventRange.def,p=this.eventRange.instance,g=new Hr(l,d,p),m=this.relevantEvents,_=this.mutatedRelevantEvents;if(l.emitter.trigger("eventResizeStop",{el:this.draggingSegEl,event:g,jsEvent:a.origEvent,view:l.viewApi}),this.validMutation){let A=new Hr(l,_.defs[d.defId],p?_.instances[p.instanceId]:null);l.dispatch({type:"MERGE_EVENTS",eventStore:_});let x={oldEvent:g,event:A,relatedEvents:Au(_,l,p),revert(){l.dispatch({type:"MERGE_EVENTS",eventStore:m})}};l.emitter.trigger("eventResize",Object.assign(Object.assign({},x),{el:this.draggingSegEl,startDelta:this.validMutation.startDelta||Ei(0),endDelta:this.validMutation.endDelta||Ei(0),jsEvent:a.origEvent,view:l.viewApi})),l.emitter.trigger("eventChange",x)}else l.emitter.trigger("_noEventResize");this.draggingSeg=null,this.relevantEvents=null,this.validMutation=null};let{component:n}=e,i=this.dragging=new nh(e.el);i.pointer.selector=".fc-event-resizer",i.touchScrollAllowed=!1,i.autoScroller.isEnabled=n.context.options.dragScroll;let r=this.hitDragging=new Lg(this.dragging,E0(e));r.emitter.on("pointerdown",this.handlePointerDown),r.emitter.on("dragstart",this.handleDragStart),r.emitter.on("hitupdate",this.handleHitUpdate),r.emitter.on("dragend",this.handleDragEnd)}destroy(){this.dragging.destroy()}querySegEl(e){return Qo(e.subjectEl,".fc-event")}}function GI(t,e,n,i){let r=t.context.dateEnv,a=t.dateSpan.range.start,l=e.dateSpan.range.start,d=xd(a,l,r,t.largeUnit);if(n){if(r.add(i.start,d)<i.end)return{startDelta:d}}else if(r.add(i.end,d)>i.start)return{endDelta:d};return null}class VI{constructor(e){this.context=e,this.isRecentPointerDateSelect=!1,this.matchesCancel=!1,this.matchesEvent=!1,this.onSelect=i=>{i.jsEvent&&(this.isRecentPointerDateSelect=!0)},this.onDocumentPointerDown=i=>{let r=this.context.options.unselectCancel,a=$S(i.origEvent);this.matchesCancel=!!Qo(a,r),this.matchesEvent=!!Qo(a,ih.SELECTOR)},this.onDocumentPointerUp=i=>{let{context:r}=this,{documentPointer:a}=this,l=r.getCurrentData();if(!a.wasTouchScroll){if(l.dateSelection&&!this.isRecentPointerDateSelect){let d=r.options.unselectAuto;d&&(!d||!this.matchesCancel)&&r.calendarApi.unselect(i)}l.eventSelection&&!this.matchesEvent&&r.dispatch({type:"UNSELECT_EVENT"})}this.isRecentPointerDateSelect=!1};let n=this.documentPointer=new bE(document);n.shouldIgnoreMove=!0,n.shouldWatchScroll=!1,n.emitter.on("pointerdown",this.onDocumentPointerDown),n.emitter.on("pointerup",this.onDocumentPointerUp),e.emitter.on("select",this.onSelect)}destroy(){this.context.emitter.off("select",this.onSelect),this.documentPointer.destroy()}}const YI={fixedMirrorParent:lt},ZI={dateClick:lt,eventDragStart:lt,eventDragStop:lt,eventDrop:lt,eventResizeStart:lt,eventResizeStop:lt,eventResize:lt,drop:lt,eventReceive:lt,eventLeave:lt};k0.dataAttrPrefix="";var KI=Ec({name:"@fullcalendar/interaction",componentInteractions:[zI,BI,ih,WI],calendarInteractions:[VI],elementDraggingImpl:nh,optionRefiners:YI,listenerRefiners:ZI});const XI=({data:t,category:e})=>{const n=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],i=r=>{if(!r)return[];if(r.toLowerCase().includes("year-round"))return[[0,11]];const a=[];return r.split("/").forEach(d=>{const[p,g]=d.trim().split("-").map(m=>m.trim());if(p&&g){const m=n.findIndex(A=>p.startsWith(A)),_=n.findIndex(A=>g.startsWith(A));m!==-1&&_!==-1&&(_<m?(a.push([m,11]),a.push([0,_])):a.push([m,_]))}else if(p){const m=n.findIndex(_=>p.startsWith(_));m!==-1&&a.push([m,m])}}),a};return u.jsxs("div",{className:"card",style:{padding:"24px",borderRadius:"16px",marginTop:"24px"},children:[u.jsxs("h3",{style:{fontSize:"18px",marginBottom:"20px",color:"#2d3748"},children:[e," Growth Cycles (2026)"]}),u.jsx("div",{style:{overflowX:"auto"},children:u.jsxs("div",{style:{minWidth:"600px"},children:[u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px repeat(12, 1fr)",gap:"4px",marginBottom:"12px"},children:[u.jsx("div",{style:{fontWeight:"bold",color:"#718096",fontSize:"12px"},children:"CROP"}),n.map(r=>u.jsx("div",{style:{textAlign:"center",fontWeight:"bold",color:"#cbd5e0",fontSize:"11px"},children:r},r))]}),t.map((r,a)=>{const l=i(r.window);return u.jsxs("div",{style:{display:"grid",gridTemplateColumns:"150px repeat(12, 1fr)",gap:"4px",marginBottom:"8px",alignItems:"center",padding:"8px 0",borderBottom:"1px solid #f7fafc"},children:[u.jsx("div",{style:{fontWeight:"600",fontSize:"14px",color:"#2d3748"},children:r.crop}),n.map((d,p)=>{const g=l.some(m=>p>=m[0]&&p<=m[1]);return u.jsx("div",{style:{height:"24px",position:"relative"},children:g&&u.jsx("div",{className:"animate-slide-in",style:{position:"absolute",top:"4px",bottom:"4px",left:0,right:0,backgroundColor:"var(--primary)",borderRadius:"4px",opacity:.8},title:`${r.crop}: Active in ${n[p]}`})},p)})]},a)})]})}),u.jsx("div",{style:{marginTop:"16px",display:"flex",gap:"20px",fontSize:"12px",color:"#718096"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("div",{style:{width:"12px",height:"12px",backgroundColor:"var(--primary)",borderRadius:"3px",opacity:.8}}),u.jsx("span",{children:"Optimal Planting & Growth Window"})]})})]})},QI=({currentFarm:t})=>{const[e,n]=de.useState("Cereals"),i=tj;return u.jsxs("div",{className:"animate-fade-in",style:{padding:"0 10px"},children:[u.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"var(--bg-main)",borderRadius:"12px",border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"16px"},children:[u.jsx("div",{style:{fontSize:"32px"},children:""}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:"0 0 5px 0",color:"var(--secondary)",fontSize:"18px"},children:"Regional Intelligence: Maloure / Njimoun Zone"}),u.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["Based on the ",u.jsx("strong",{children:"Western Region"})," boundary defined by coordinates ",u.jsxs("strong",{children:[i.lat.toFixed(6),", ",i.lng.toFixed(6)]}),". These standards are optimized for this specific agricultural zone."]})]})]}),u.jsx("div",{style:{display:"flex",gap:"8px",marginBottom:"24px",overflowX:"auto",paddingBottom:"4px"},children:Object.keys(Cu).map(r=>u.jsx("button",{onClick:()=>n(r),style:{padding:"10px 20px",borderRadius:"20px",border:"1px solid var(--border)",backgroundColor:e===r?"var(--primary)":"white",color:e===r?"white":"var(--text-muted)",fontWeight:"600",cursor:"pointer",transition:"all 0.2s",whiteSpace:"nowrap"},children:r},r))}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(280px, 1fr))",gap:"20px"},children:Cu[e].map((r,a)=>u.jsxs("div",{className:"card hover-glow",style:{padding:"20px",borderRadius:"16px",borderLeft:"5px solid var(--primary)",marginBottom:0},children:[u.jsxs("div",{className:"flex j-between a-start",style:{marginBottom:"12px"},children:[u.jsx("h3",{style:{margin:0,fontSize:"18px",color:"var(--text-main)"},children:r.crop}),u.jsx("span",{style:{fontSize:"10px",padding:"2px 8px",backgroundColor:"var(--bg-main)",borderRadius:"10px",color:"var(--text-muted)",fontWeight:"bold"},children:r.type})]}),u.jsxs("div",{style:{display:"grid",gap:"12px"},children:[u.jsxs("div",{className:"flex j-between",children:[u.jsx("span",{style:{color:"#718096",fontSize:"13px"},children:"Duration"}),u.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:r.duration})]}),u.jsxs("div",{className:"flex j-between",children:[u.jsx("span",{style:{color:"#718096",fontSize:"13px"},children:"Campaigns"}),u.jsx("span",{style:{fontWeight:"600",fontSize:"14px",color:"var(--primary)"},children:r.campaigns})]}),u.jsxs("div",{style:{marginTop:"8px",paddingTop:"8px",borderTop:"1px dashed #e2e8f0"},children:[u.jsx("span",{style:{display:"block",color:"#718096",fontSize:"11px",marginBottom:"4px",textTransform:"uppercase",letterSpacing:"0.5px"},children:"Optimal Window"}),u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"6px"},children:[u.jsx("span",{children:""}),u.jsx("span",{style:{fontWeight:"600",fontSize:"14px"},children:r.window})]})]})]})]},a))}),u.jsx(XI,{data:Cu[e],category:e})]})},$I=()=>{const t=[];return Object.keys(Cu).forEach(e=>{Cu[e].forEach(n=>{t.push({category:e,crop:n.crop,duration:n.duration,campaigns:n.campaigns})})}),u.jsxs("div",{className:"animate-fade-in",style:{padding:"0 10px"},children:[u.jsxs("div",{style:{marginBottom:"24px",padding:"20px",backgroundColor:"var(--bg-main)",borderRadius:"12px",border:"1px solid var(--border)",display:"flex",alignItems:"center",gap:"16px"},children:[u.jsx("div",{style:{fontSize:"32px"},children:""}),u.jsxs("div",{children:[u.jsx("h3",{style:{margin:"0 0 5px 0",color:"var(--secondary)",fontSize:"18px"},children:"Growth Cycles & Campaigns Summary"}),u.jsxs("p",{style:{margin:0,color:"var(--text-muted)",fontSize:"14px"},children:["Consolidated view of all crop standards for the ",u.jsx("strong",{children:"Maloure / Njimoun Zone"}),"."]})]})]}),u.jsx("div",{style:{backgroundColor:"var(--bg-card)",borderRadius:"12px",boxShadow:"var(--shadow-sm)",overflow:"hidden",border:"1px solid var(--border)"},children:u.jsxs("table",{style:{width:"100%",borderCollapse:"collapse"},children:[u.jsx("thead",{children:u.jsxs("tr",{style:{backgroundColor:"var(--bg-main)",color:"var(--text-main)",textAlign:"left",borderBottom:"2px solid var(--border)"},children:[u.jsx("th",{style:{padding:"16px 24px",fontSize:"14px",fontWeight:"700",textTransform:"uppercase"},children:"Category"}),u.jsx("th",{style:{padding:"16px 24px",fontSize:"14px",fontWeight:"700",textTransform:"uppercase"},children:"Crop"}),u.jsx("th",{style:{padding:"16px 24px",fontSize:"14px",fontWeight:"700",textTransform:"uppercase"},children:"Duration"}),u.jsx("th",{style:{padding:"16px 24px",fontSize:"14px",fontWeight:"700",textTransform:"uppercase"},children:"Campaigns"})]})}),u.jsx("tbody",{children:t.map((e,n)=>u.jsxs("tr",{style:{borderBottom:"1px solid var(--border)",transition:"background-color 0.2s"},className:"hover:bg-gray-50",children:[u.jsx("td",{style:{padding:"16px 24px",color:"var(--text-main)",fontWeight:"500"},children:e.category}),u.jsx("td",{style:{padding:"16px 24px",color:"var(--secondary)",fontWeight:"600"},children:e.crop}),u.jsx("td",{style:{padding:"16px 24px",color:"var(--text-muted)"},children:e.duration}),u.jsx("td",{style:{padding:"16px 24px",color:"var(--text-muted)"},children:e.campaigns})]},n))})]})})]})},JI=()=>{const{currentFarm:t}=Pi(),{activities:e,fetchActivitiesByFarm:n,deleteActivity:i}=ml(),{showNotification:r,showAlert:a}=hr(),[l,d]=de.useState([]),[p,g]=de.useState("calendar"),[m,_]=de.useState(!1),[A,x]=de.useState(null);de.useEffect(()=>{t&&n(t.id)},[t,n]),de.useEffect(()=>{if(e&&e.length>0){const Y=e.map(B=>({id:B.id,title:`${B.activity_type} - ${B.field?.name||"Field"}`,date:B.activity_date,extendedProps:{...B},color:R(B.activity_type)}));d(Y)}else d([])},[e]);const R=Y=>{switch(Y){case"planting":return"#2f855a";case"harvesting":return"#c05621";case"fertilizing":return"#dd6b20";case"spraying":return"#e53e3e";case"irrigation":return"#3182ce";default:return"#718096"}},M=Y=>{x(null),_(!0)},k=Y=>{const B=Y.event.extendedProps;x(B),_(!0)},I=async()=>{if(A&&window.confirm("Are you sure you want to delete this event? This action cannot be undone."))try{await i(A.id),r("Event deleted successfully","success"),_(!1)}catch(Y){console.error("Failed to delete activity:",Y),a("DELETE_FAILED")}};return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",height:"100%",display:"flex",flexDirection:"column",position:"relative"},children:[u.jsxs("div",{className:"flex j-between a-center",style:{marginBottom:"24px"},children:[u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:0,color:"var(--secondary)"},children:"Scheduler"}),u.jsxs("p",{style:{color:"var(--text-muted)",fontSize:"15px"},children:["Schedule and track farm operations for ",u.jsx("strong",{children:t?.name||"Loading..."})]})]}),u.jsxs("div",{style:{display:"flex",backgroundColor:"var(--bg-main)",padding:"4px",borderRadius:"12px",gap:"4px",border:"1px solid var(--border)"},children:[u.jsx("button",{onClick:()=>g("calendar"),style:{padding:"8px 16px",borderRadius:"8px",border:p==="calendar"?"1px solid var(--border)":"none",backgroundColor:p==="calendar"?"var(--bg-card)":"transparent",color:p==="calendar"?"var(--primary)":"var(--text-muted)",fontWeight:"600",boxShadow:p==="calendar"?"var(--shadow-sm)":"none",cursor:"pointer",transition:"all 0.2s"},children:"Calendar View"}),u.jsx("button",{onClick:()=>g("regional"),style:{padding:"8px 16px",borderRadius:"8px",border:p==="regional"?"1px solid var(--border)":"none",backgroundColor:p==="regional"?"var(--bg-card)":"transparent",color:p==="regional"?"var(--primary)":"var(--text-muted)",fontWeight:"600",boxShadow:p==="regional"?"var(--shadow-sm)":"none",cursor:"pointer",transition:"all 0.2s"},children:"Regional Guidelines"}),u.jsx("button",{onClick:()=>g("summary"),style:{padding:"8px 16px",borderRadius:"8px",border:p==="summary"?"1px solid var(--border)":"none",backgroundColor:p==="summary"?"var(--bg-card)":"transparent",color:p==="summary"?"var(--primary)":"var(--text-muted)",fontWeight:"600",boxShadow:p==="summary"?"var(--shadow-sm)":"none",cursor:"pointer",transition:"all 0.2s"},children:"Summary"})]}),u.jsx("div",{style:{display:"flex",gap:"12px"},children:u.jsx("button",{className:"primary",onClick:()=>{x(null),_(!0)},children:"+ Add Event"})})]}),u.jsxs("div",{className:"card",style:{flex:1,padding:"20px",borderRadius:"16px",overflow:p==="calendar"?"hidden":"auto"},children:[p==="calendar"&&u.jsx(sE,{plugins:[HP,LI,KI],initialView:"dayGridMonth",headerToolbar:{left:"prev,next today",center:"title",right:"dayGridMonth,timeGridWeek,timeGridDay"},height:"100%",events:l,dateClick:M,eventClick:k,editable:!0,selectable:!0}),p==="regional"&&u.jsx(QI,{currentFarm:t}),p==="summary"&&u.jsx($I,{})]}),m&&u.jsx("div",{style:{position:"fixed",top:0,left:0,right:0,bottom:0,backgroundColor:"rgba(0,0,0,0.5)",display:"flex",justifyContent:"center",alignItems:"center",zIndex:1e3,backdropFilter:"blur(5px)"},children:u.jsxs("div",{style:{backgroundColor:"white",width:"90%",maxWidth:"1000px",height:"90vh",borderRadius:"16px",overflowY:"auto",padding:"20px",boxShadow:"0 25px 50px -12px rgba(0, 0, 0, 0.25)",position:"relative"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"16px"},children:[A?u.jsx("button",{onClick:I,style:{backgroundColor:"#fff5f5",color:"#c53030",border:"1px solid #fc8181",borderRadius:"8px",padding:"8px 16px",fontWeight:"700",cursor:"pointer",display:"flex",alignItems:"center",gap:"6px"},children:" Delete Event"}):u.jsx("div",{}),u.jsx("button",{onClick:()=>_(!1),style:{background:"none",border:"none",fontSize:"24px",cursor:"pointer",padding:"8px"},children:""})]}),u.jsx(Bf,{onComplete:()=>_(!1),initialData:A})]})})]})},ez=()=>{const{currentFarm:t}=Pi(),e=[{title:"Advanced Analytics",icon:"",desc:"Deep dive into yield trends, financial forecasting, and soil health metrics.",status:"Coming Soon"},{title:"IoT Integrations",icon:"",desc:"Connect sensors, drones, and automated irrigation systems.",status:"Active",path:"/iot-integrations"},{title:"Market Access",icon:"",desc:"Direct connection to buyers, commodity prices, and logistics partners.",status:"Active",path:"/market-access"},{title:"Compliance & Audits",icon:"",desc:"Automated report generation for organic certification and GAP audits.",status:"Coming Soon"}],n=ta.useMemo(()=>i=>window.location.href=i,[]);return u.jsxs("div",{className:"animate-fade-in",style:{padding:"24px",minHeight:"100vh"},children:[u.jsx("div",{className:"flex j-between a-center",style:{marginBottom:"32px"},children:u.jsxs("div",{children:[u.jsx("h1",{style:{fontSize:"28px",fontWeight:"800",margin:0,color:"#1a365d"},children:"Advanced Features"}),u.jsxs("p",{style:{color:"#4a5568",fontSize:"15px"},children:["Next-generation tools for ",u.jsx("strong",{children:t?.name||"your farm"})]})]})}),u.jsx("div",{style:{display:"grid",gridTemplateColumns:"repeat(auto-fill, minmax(300px, 1fr))",gap:"24px"},children:e.map((i,r)=>u.jsxs("div",{className:"card hover-glow",style:{padding:"30px",border:"none",borderRadius:"20px",position:"relative",overflow:"hidden"},children:[u.jsx("div",{style:{position:"absolute",top:"20px",right:"20px"},children:u.jsx("span",{style:{padding:"4px 12px",borderRadius:"20px",fontSize:"11px",fontWeight:"bold",backgroundColor:i.status==="Active"?"#38a169":i.status==="Beta"?"#f6ad55":"#cbd5e0",color:i.status==="Active"||i.status==="Beta"?"white":"#4a5568"},children:i.status})}),u.jsx("div",{style:{fontSize:"40px",marginBottom:"20px"},children:i.icon}),u.jsx("h3",{style:{margin:"0 0 10px 0",fontSize:"20px",color:"#2d3748"},children:i.title}),u.jsx("p",{style:{color:"#718096",lineHeight:"1.6"},children:i.desc}),u.jsx("div",{style:{marginTop:"24px"},children:u.jsx("button",{className:i.status==="Active"?"primary":"outline",disabled:i.status==="Coming Soon"||i.status==="Planned",style:{width:"100%",opacity:i.status==="Coming Soon"||i.status==="Planned"?.5:1},onClick:()=>i.path&&n(i.path),children:i.status==="Active"?"Access Feature":i.status==="Beta"?"Manage Settings":"Notify Me"})})]},r))}),u.jsxs("div",{style:{marginTop:"40px",padding:"30px",backgroundColor:"#ebf8ff",borderRadius:"20px",border:"1px solid #bee3f8"},children:[u.jsx("h3",{style:{margin:"0 0 10px 0",color:"#2b6cb0"},children:" Request a Feature"}),u.jsx("p",{style:{color:"#2c5282",marginBottom:"20px"},children:"Don't see what you need? We are constantly building new tools for modern farming."}),u.jsx("button",{className:"primary",style:{backgroundColor:"#3182ce"},children:"Submit Request"})]})]})},B0={isSyncing:!1,async syncOutbox(){if(this.isSyncing||!navigator.onLine)return;const t=await Wl.sync_outbox.where({status:"pending"}).toArray();if(t.length!==0){this.isSyncing=!0;for(const e of t)try{await zt({method:e.method,url:e.url,data:e.data,skipQueue:!0}),await Wl.sync_outbox.delete(e.id)}catch(n){console.error(`[Sync] Failed to sync item ${e.id}:`,n),n.response?.status>=400&&n.response?.status<500&&await Wl.sync_outbox.update(e.id,{status:"failed"});break}this.isSyncing=!1}},async pullFromNetwork(t){if(!(!navigator.onLine||!t))try{const[e,n,i,r,a]=await Promise.all([zt.get(`/farms/${t}/activities`),zt.get(`/farms/${t}/crops`),zt.get(`/farms/${t}/fields`),zt.get(`/infrastructure/farm/${t}`),zt.get(`/farms/${t}/cost-settings`)]);return await Promise.all([Io("activities",e.data),Io("crops",n.data),Io("fields",i.data),Io("infrastructure",r.data),Io("cost_settings",a.data)]),!0}catch(e){return console.error("[Sync] Pull failed:",e),!1}}};window.addEventListener("online",()=>{B0.syncOutbox()});const tz=()=>{const[t,e]=de.useState(navigator.onLine),[n,i]=de.useState(!1),[r,a]=de.useState(0),l=async()=>{e(navigator.onLine);const p=await Wl.sync_outbox.where({status:"pending"}).count();a(p)};de.useEffect(()=>{window.addEventListener("online",l),window.addEventListener("offline",l);const p=setInterval(async()=>{await l(),navigator.onLine&&!n&&await Wl.sync_outbox.where({status:"pending"}).count()>0&&(i(!0),await B0.syncOutbox(),i(!1),await l())},5e3);return l(),()=>{window.removeEventListener("online",l),window.removeEventListener("offline",l),clearInterval(p)}},[n]);const d={container:{padding:"10px 24px",fontSize:"11px",fontWeight:"700",letterSpacing:"0.5px",display:"flex",alignItems:"center",gap:"10px",borderTop:"1px solid #222",backgroundColor:"#000",color:t?"#4caf50":"#888",transition:"all 0.3s ease"},dot:{width:"8px",height:"8px",borderRadius:"50%",backgroundColor:n?"#2196f3":t?"#4caf50":"#ff9800",boxShadow:n?"0 0 10px #2196f3":t?"0 0 10px #4caf50":"none",animation:n?"pulse 1.5s infinite":"none"},pending:{marginLeft:"auto",color:"white",backgroundColor:"#cc0000",padding:"2px 8px",borderRadius:"4px",fontSize:"9px",fontWeight:"900",display:r>0?"inline":"none"}};return u.jsxs("div",{style:d.container,children:[u.jsx("div",{style:d.dot}),u.jsx("span",{children:n?"Synchronizing Data...":t?"System Online":"Offline Mode Enabled"}),u.jsxs("span",{style:d.pending,children:[r," QUEUED"]}),u.jsx("style",{children:`
                    @keyframes pulse {
                        0% { opacity: 1; transform: scale(1); }
                        50% { opacity: 0.5; transform: scale(1.5); }
                        100% { opacity: 1; transform: scale(1); }
                    }
                `})]})},nz=()=>{const{modal:t,closeModal:e,confirmAction:n}=hr();if(!t.isOpen)return null;const i=t.title.includes("REMOVAL")||t.title.includes("DELETE")||t.title.includes("CRITICAL"),r=a=>{a.stopPropagation()};return u.jsxs("div",{style:{position:"fixed",top:0,left:0,width:"100%",height:"100%",backgroundColor:"rgba(0, 0, 0, 0.5)",display:"flex",justifyContent:"center",alignItems:"start",paddingTop:"100px",zIndex:9999,backdropFilter:"blur(2px)"},onClick:e,children:[u.jsxs("div",{style:{backgroundColor:"#f8fdf9",width:"450px",maxWidth:"90%",borderRadius:"12px",boxShadow:"0 10px 25px rgba(0,0,0,0.2)",overflow:"hidden",animation:"fadeIn 0.2s ease-out"},onClick:r,children:[u.jsx("div",{style:{backgroundColor:"var(--secondary)",padding:"12px 24px"},children:u.jsxs("h3",{style:{margin:0,fontSize:"14px",fontWeight:"900",color:"white",textTransform:"uppercase",letterSpacing:"1px",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{fontSize:"16px"},children:i?"":""}),"System Notification"]})}),u.jsxs("div",{style:{padding:"24px"},children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:"700",color:"#000",marginBottom:"8px",textTransform:"uppercase",letterSpacing:"0.5px"},children:t.title}),u.jsx("div",{style:{borderBottom:"1px dashed #ccc",margin:"10px 0"}}),u.jsx("p",{style:{fontSize:"14px",lineHeight:"1.5",color:"#333",whiteSpace:"pre-line"},children:t.body})]}),u.jsxs("div",{style:{padding:"16px 24px",display:"flex",justifyContent:"flex-end",gap:"12px"},children:[!t.singleAction&&u.jsx("button",{onClick:e,style:{padding:"10px 24px",borderRadius:"50px",border:"none",backgroundColor:"#bbf7d0",color:"#14532d",fontWeight:"600",cursor:"pointer",fontSize:"14px"},onMouseOver:a=>a.target.style.backgroundColor="#86efac",onMouseOut:a=>a.target.style.backgroundColor="#bbf7d0",children:"Cancel"}),u.jsx("button",{onClick:t.singleAction?e:n,style:{padding:"10px 24px",borderRadius:"50px",border:"none",backgroundColor:"#365314",color:"#fff",fontWeight:"600",cursor:"pointer",fontSize:"14px"},onMouseOver:a=>a.target.style.backgroundColor="#1a2e05",onMouseOut:a=>a.target.style.backgroundColor="#365314",children:"OK"})]})]}),u.jsx("style",{children:`
                @keyframes fadeIn {
                    from { opacity: 0; transform: translateY(-20px); }
                    to { opacity: 1; transform: translateY(0); }
                }
            `})]})},co=({children:t})=>{const{user:e,logout:n}=tu(),{farms:i,currentFarm:r,setCurrentFarm:a,fetchFarms:l}=Pi(),d=bl();de.useEffect(()=>{l()},[l]),de.useEffect(()=>{r?.id&&navigator.onLine&&B0.pullFromNetwork(r.id)},[r?.id]);const[p,g]=de.useState({operations:!0,production:!0,finance:!1,inventory:!1,admin:!1,advanced:!0}),m=k=>{g(I=>({...I,[k]:!I[k]}))},_=()=>{n(),d("/login")},[A,x]=de.useState(!1),R=()=>{x(!A)},M=()=>{window.innerWidth<1024&&x(!1)};return u.jsxs("div",{style:{display:"flex",height:"100vh",backgroundColor:"#f8f9fa",position:"relative"},children:[u.jsx("header",{className:"mobile-header",style:{backgroundColor:"#fff",borderBottom:"1px solid #eee",color:"#111",justifyContent:"space-between"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"15px"},children:[u.jsxs("div",{className:"hamburger",onClick:R,children:[u.jsx("span",{style:{backgroundColor:"#111"}}),u.jsx("span",{style:{backgroundColor:"#111"}}),u.jsx("span",{style:{backgroundColor:"#111"}})]}),u.jsx("div",{children:u.jsxs("div",{style:{fontSize:"18px",fontWeight:"900",letterSpacing:"-0.5px"},children:[u.jsx("span",{style:{color:"#cc0000"},children:"PRO"}),"FARMER"]})})]})}),u.jsx("div",{className:`mobile-sidebar-overlay ${A?"show":""}`,onClick:()=>x(!1)}),u.jsxs("aside",{className:`sidebar-container ${A?"open":""}`,style:{width:"280px",backgroundColor:"var(--bg-sidebar)",color:"white",display:"flex",flexDirection:"column",boxShadow:"4px 0 15px rgba(0,0,0,0.1)",zIndex:100,borderRight:"1px solid #333"},children:[u.jsxs("div",{style:{padding:"24px",borderBottom:"1px solid #333"},children:[u.jsxs("h2",{style:{margin:0,color:"white",fontSize:"22px",fontWeight:"700",letterSpacing:"-0.5px",display:"flex",alignItems:"center",gap:"8px"},children:[u.jsx("span",{style:{backgroundColor:"var(--primary)",padding:"4px 8px",borderRadius:"6px",fontSize:"14px"},children:"PRO"}),"FARMER"]}),u.jsx("div",{style:{fontSize:"11px",color:"#888",marginTop:"8px",fontWeight:"500"},children:"INTELLIGENT AGRICULTURE"})]}),u.jsxs("div",{style:{padding:"20px 24px",backgroundColor:"rgba(255,255,255,0.03)"},children:[u.jsxs("div",{style:{display:"flex",justifyContent:"space-between",alignItems:"center",marginBottom:"8px"},children:[u.jsx("label",{style:{fontSize:"11px",color:"#888",fontWeight:"600"},children:"ACTIVE FARM"}),u.jsx("button",{onClick:()=>{d("/"),setTimeout(()=>{window.dispatchEvent(new CustomEvent("open-new-farm"))},100),M()},style:{backgroundColor:"var(--primary)",color:"white",border:"none",padding:"4px 10px",fontSize:"10px",fontWeight:"bold",cursor:"pointer",borderRadius:"4px"},children:"+ NEW"})]}),u.jsxs("select",{value:r?.id||"",onChange:k=>{const I=i.find(Y=>Y.id===k.target.value);I&&a(I)},style:{width:"100%",padding:"10px",backgroundColor:"#000",color:"white",border:"1px solid #444",borderRadius:"6px",fontSize:"13px",fontWeight:"500",cursor:"pointer",outline:"none"},children:[(!i||i.length===0)&&u.jsx("option",{value:"",children:"Select a Station"}),(i||[]).map(k=>u.jsx("option",{value:k.id,children:k.name},k.id))]})]}),u.jsxs("nav",{style:{flex:1,overflowY:"auto",padding:"16px 12px"},children:[u.jsx(Va,{to:"/",icon:"",label:"Home",onClick:M}),u.jsxs(Cf,{label:"OPERATIONS",isOpen:p.operations,onToggle:()=>m("operations"),children:[u.jsx(Va,{to:"/fields",icon:"",label:"Parcel Management",sub:!0,onClick:M}),u.jsx(Va,{to:"/infrastructure",icon:"",label:"Infrastructure",sub:!0,onClick:M}),u.jsx(Va,{to:"/weather",icon:"",label:"Weather",sub:!0,onClick:M}),u.jsx(Va,{to:"/agri-calendar",icon:"",label:"Scheduler",sub:!0,onClick:M}),u.jsxs("div",{style:{marginLeft:"20px"},children:[u.jsxs("div",{onClick:()=>m("advanced"),style:{padding:"10px 16px",color:"#888",fontSize:"11px",fontWeight:"700",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",userSelect:"none"},children:["ADVANCED ",u.jsx("span",{style:{fontSize:"8px"},children:p.advanced?"":""})]}),p.advanced&&u.jsx(u.Fragment,{children:u.jsx(Va,{to:"/advanced-features",icon:"",label:"Overview",sub:!0,onClick:M})})]})]}),u.jsxs(Cf,{label:"PRODUCTION",isOpen:p.production,onToggle:()=>m("production"),children:[u.jsx(Va,{to:"/select-crops",icon:"",label:"Active Cultivation",sub:!0,onClick:M}),u.jsx(Va,{to:"/activities",icon:"",label:"Field Journal",sub:!0,onClick:M}),u.jsx(Va,{to:"/harvests",icon:"",label:"Harvest Records",sub:!0,onClick:M}),u.jsx(Va,{to:"/planner",icon:"",label:"Crop Planner",sub:!0,onClick:M}),u.jsx(Va,{to:"/crop-library",icon:"",label:"Crop Library",sub:!0,onClick:M}),u.jsx(Va,{to:"/infrastructure-library",icon:"",label:"Infra Library",sub:!0,onClick:M})]}),u.jsxs(Cf,{label:"INVENTORY & ASSETS",isOpen:p.inventory,onToggle:()=>m("inventory"),children:[u.jsx(Va,{to:"/stores?view=inventory",icon:"",label:"Inputs",sub:!0,onClick:M}),u.jsx(Va,{to:"/stores?view=structures",icon:"",label:"Assets",sub:!0,onClick:M})]}),u.jsxs(Cf,{label:"FINANCIALS",isOpen:p.finance,onToggle:()=>m("finance"),children:[u.jsx(Va,{to:"/production-costs",icon:"",label:"Cost Analysis",sub:!0,onClick:M}),u.jsx(Va,{to:"/reports",icon:"",label:"Reports",sub:!0,onClick:M}),u.jsx(Va,{to:"/contracts",icon:"",label:"Contracts",sub:!0,onClick:M})]}),u.jsxs(Cf,{label:"ADMINISTRATION",isOpen:p.admin,onToggle:()=>m("admin"),children:[u.jsx(Va,{to:"/team",icon:"",label:"Team & Roles",sub:!0,onClick:M}),u.jsx(Va,{to:"/production-costs?view=settings",icon:"",label:"Settings",sub:!0,onClick:M}),u.jsx(Va,{to:"/vault",icon:"",label:"Documents",sub:!0,onClick:M})]})]}),u.jsx(tz,{}),u.jsx("div",{style:{padding:"20px",borderTop:"1px solid #222",backgroundColor:"#000"},children:u.jsxs("div",{style:{display:"flex",alignItems:"center",gap:"12px"},children:[u.jsx("div",{style:{width:"40px",height:"40px",backgroundColor:"var(--primary)",color:"white",display:"flex",alignItems:"center",justifyContent:"center",fontWeight:"bold",fontSize:"18px"},children:e?.first_name?.charAt(0)}),u.jsxs("div",{style:{flex:1},children:[u.jsx("div",{style:{fontSize:"14px",fontWeight:"700"},children:e?.first_name}),u.jsx("button",{onClick:_,style:{fontSize:"11px",color:"var(--error)",background:"none",padding:0,fontWeight:"bold",cursor:"pointer"},children:"LOGOUT"})]})]})})]}),u.jsx("main",{style:{flex:1,display:"flex",flexDirection:"column",overflow:"hidden"},children:u.jsx("div",{style:{flex:1,overflowY:"auto"},children:t})}),u.jsx(nz,{})]})},Va=({to:t,icon:e,label:n,sub:i,onClick:r})=>u.jsxs(Hw,{to:t,onClick:r,className:({isActive:a})=>`sidebar-link ${a?"active":""}`,style:({isActive:a})=>({display:"flex",alignItems:"center",padding:i?"10px 12px 10px 44px":"12px 16px",color:a?"var(--primary-light)":"#ccc",textDecoration:"none",fontSize:i?"13px":"14px",fontWeight:a?"600":"400",borderLeft:a?"3px solid var(--primary-light)":"3px solid transparent",backgroundColor:a?"rgba(255, 255, 255, 0.05)":"transparent",transition:"all 0.2s",marginBottom:"2px",borderRadius:"0 4px 4px 0"}),children:[u.jsx("span",{style:{marginRight:"12px",fontSize:"16px",opacity:i?.8:1},children:e}),n]}),Cf=({label:t,children:e,isOpen:n,onToggle:i})=>u.jsxs("div",{style:{marginBottom:"8px"},children:[u.jsxs("div",{onClick:i,style:{padding:"12px 16px",color:"#888",fontSize:"11px",fontWeight:"700",letterSpacing:"1px",cursor:"pointer",display:"flex",justifyContent:"space-between",alignItems:"center",userSelect:"none",textTransform:"uppercase"},children:[t,u.jsx("span",{style:{fontSize:"10px",transform:n?"rotate(180deg)":"rotate(0deg)",transition:"transform 0.2s"},children:""})]}),u.jsx("div",{style:{height:n?"auto":"0",overflow:"hidden",transition:"height 0.3s ease"},children:e})]}),iz=()=>{const{notification:t,hideNotification:e,clearNotification:n}=hr();if(de.useEffect(()=>{if(t&&!t.visible){const l=setTimeout(()=>{n()},500);return()=>clearTimeout(l)}},[t,n]),!t)return null;const i=t.type==="error",r=t.type==="success",a={container:{position:"fixed",top:"20px",right:"20px",zIndex:9999,maxWidth:"450px",width:"calc(100% - 40px)",transition:"all 0.5s cubic-bezier(0.19, 1, 0.22, 1)",transform:t.visible?"translateX(0)":"translateX(120%)",opacity:t.visible?1:0},banner:{backgroundColor:i?"#bb1919":r?"#166534":"#000",color:"#fff",padding:"20px 24px",boxShadow:"0 20px 40px rgba(0,0,0,0.3)",display:"flex",alignItems:"flex-start",gap:"16px",borderLeft:"8px solid #000",position:"relative"},icon:{fontSize:"24px",marginTop:"-2px"},content:{flex:1},header:{margin:"0 0 4px 0",fontSize:"12px",fontWeight:"900",textTransform:"uppercase",letterSpacing:"1.5px",opacity:.9},message:{margin:0,fontSize:"15px",fontWeight:"700",lineHeight:"1.4",whiteSpace:"pre-wrap"},close:{background:"none",border:"none",color:"#fff",cursor:"pointer",padding:"4px",fontSize:"18px",opacity:.6,transition:"opacity 0.2s"}};return u.jsx("div",{style:a.container,children:u.jsxs("div",{style:a.banner,children:[u.jsx("div",{style:a.icon,children:i?"":r?"":""}),u.jsxs("div",{style:a.content,children:[u.jsx("div",{style:a.header,children:i?"Operational Alert":r?"Success Protocol":"System Intelligence"}),u.jsx("p",{style:a.message,children:t.message})]}),u.jsx("button",{style:a.close,onClick:e,onMouseOver:l=>l.target.style.opacity=1,onMouseOut:l=>l.target.style.opacity=.6,children:""})]})})},rz=600*1e3,az=()=>{const{isAuthenticated:t,logout:e}=tu(),{showNotification:n}=hr(),i=de.useRef(null),r=de.useCallback(()=>{t&&(e(),n("Session expired due to 10 minutes of inactivity.","info"))},[t,e,n]),a=de.useCallback(()=>{i.current&&clearTimeout(i.current),t&&(i.current=setTimeout(r,rz))},[r,t]);return de.useEffect(()=>{const l=["mousedown","mousemove","keydown","scroll","touchstart","click"];return t&&(a(),l.forEach(d=>{window.addEventListener(d,a)})),()=>{i.current&&clearTimeout(i.current),l.forEach(d=>{window.removeEventListener(d,a)})}},[t,a]),null},uo=({children:t})=>{const{isAuthenticated:e,loading:n}=tu();return n?u.jsx("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",height:"100vh"},children:"Loading..."}):e?t:u.jsx(zw,{to:"/login"})};function oz(){const{checkAuth:t,isAuthenticated:e}=tu(),{fetchSystemMessages:n}=hr();return de.useEffect(()=>{t()},[t]),de.useEffect(()=>{e&&n()},[e,n]),u.jsxs(cL,{children:[u.jsx(iz,{}),u.jsx(az,{}),u.jsxs(z4,{children:[u.jsx(ea,{path:"/login",element:u.jsx(a3,{})}),u.jsx(ea,{path:"/register",element:u.jsx(o3,{})}),u.jsx(ea,{path:"/",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(oj,{})})})}),u.jsx(ea,{path:"/inventory",element:u.jsx(zw,{to:"/stores"})}),u.jsx(ea,{path:"/harvests",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(B6,{})})})}),u.jsx(ea,{path:"/crops",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(F6,{})})})}),u.jsx(ea,{path:"/planner",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(X6,{})})})}),u.jsx(ea,{path:"/fields",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(sj,{})})})}),u.jsx(ea,{path:"/activities",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(M6,{})})})}),u.jsx(ea,{path:"/reports",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(O6,{})})})}),u.jsx(ea,{path:"/team",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(z6,{})})})}),u.jsx(ea,{path:"/weather",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(eN,{})})})}),u.jsx(ea,{path:"/vault",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(nN,{})})})}),u.jsx(ea,{path:"/infrastructure",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(iN,{})})})}),u.jsx(ea,{path:"/production-costs",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(aN,{})})})}),u.jsx(ea,{path:"/contracts",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(sN,{})})})}),u.jsx(ea,{path:"/stores",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(dN,{})})})}),u.jsx(ea,{path:"/crop-library",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(G6,{})})})}),u.jsx(ea,{path:"/infrastructure-library",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(Z6,{})})})}),u.jsx(ea,{path:"/select-crops",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(H6,{})})})}),u.jsx(ea,{path:"/agri-calendar",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(JI,{})})})}),u.jsx(ea,{path:"/advanced-features",element:u.jsx(uo,{children:u.jsx(co,{children:u.jsx(ez,{})})})})]})]})}UA.createRoot(document.getElementById("root")).render(u.jsx(de.StrictMode,{children:u.jsx(oz,{})}));export{tr as _,NA as c,og as g};
